!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.p="undefined"!=typeof window&&window.__STATICS_BASE_URL__||i.p,i(i.s=327)}([function(e,t){e.exports=_},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.GeneralFatal=-1]="GeneralFatal",e[e.GeneralError=-2]="GeneralError",e[e.GeneralWarning=-3]="GeneralWarning",e[e.ExcessiveErrors=-4]="ExcessiveErrors",e[e.InitFlowError=10]="InitFlowError",e[e.KnowsErrors=11]="KnowsErrors",e[e.MobileEditorError=12]="MobileEditorError",e[e.InitSetPropertiesFailed=20]="InitSetPropertiesFailed",e[e.DSSaveFailed=21]="DSSaveFailed",e[e.DSPublishStoryFailed=22]="DSPublishStoryFailed",e[e.UploadImagesFailed=23]="UploadImagesFailed",e[e.SetColorKitFailed=24]="SetColorKitFailed",e[e.SetFontKitFailed=25]="SetFontKitFailed",e[e.SaveStoryHangs=26]="SaveStoryHangs",e[e.SaveStoryFailed=27]="SaveStoryFailed",e[e.PublishStoryFailed=28]="PublishStoryFailed",e[e.MarkMajorRevisionStoryFailed=29]="MarkMajorRevisionStoryFailed",e[e.UndoRedoFailed=30]="UndoRedoFailed",e[e.SaveStoryAsTemplateFailed=31]="SaveStoryAsTemplateFailed",e[e.ImportSiteFailed=32]="ImportSiteFailed",e[e.GetBusinessInfoFailed=33]="GetBusinessInfoFailed",e[e.GetCampaignFailed=200]="GetCampaignFailed",e[e.HeadlessInitFailed=500]="HeadlessInitFailed"}(t.BIErrorCodes||(t.BIErrorCodes={})),t.BIOrigins={TopBar:"topbar",FakeBrowser:"fakebrowser",DesignPanel:"design panel",SectionPanel:"section panel",SectionFontPanel:"section font panel",SectionAnimationPanel:"section animation panel",SectionColorsPanel:"section colors panel",SectionBackgroundPanel:"section background panel",ContentPanel:"content panel",AddSectionPanel:"add-section",AddPagePanel:"add-page",HeaderPanel:"header-panel",ColorationPanel:"customize-palette-panel",WelcomeTour:"welcomeTour",InfoCard:"info-card",ClipartSettingsPanel:"clipart-settings-panel",EditPanel:"edit panel",MediaSetting:"media settings panel",MediaSettingsPanel:"media settings panel",OSI:"OSI",ClickEditButton:"click edit button",ToFitModeButton:"fit-mode",ToCropModeButton:"crop-mode",UnknownSource:"unknown-source",SwitchEditModeDropdown:"switch-edit-mode-dropdown",OnSiteStart:"on-site-start",TourTask:"tour",AssistantDockButton:"assistant-dock-button",SwitchTab:"switch-tab",SmartAssistEmptyStateButton:"smart-assist empty state button",SmartAssistSocialsDefaultLinks:"smart-assist socials default links",SmartAssist:"smart-assist",SmartAssistUnlinkedButtons:"smart-assist unlinked buttons",SmartAssistBetterLayout:"smart-assist better layout",AppsPanel:"apps-panel",FloatingButton:"floating button",ClickEditMedia:"click on edit & replace",TpaSectionPanel:"TPA section panel",Overlay:"overlay"};var n=function(){function e(){}return e.System="system",e.User="user",e}();t.BIInitator=n;var o=function(){function e(){}return e.Solid="solid",e.Transparent="transparent",e.Fixed="freeze",e}();t.BIHeaderTypes=o;var r=function(){function e(){}return e.InitStory="init story",e.InitCoreB=core.BIWizardServiceInitBSteps.Init,e.ListenToSiteChanges="listen to site changes",e.InitSiteData="init site data",e.MarkCreated="mark created",e.ProvisionTPAs="provision tpas",e.GenerateInitialContent="generate initial content",e.InitialSave="initial save",e.FullSave="full save",e.DocumentServicesSave="ds save",e.LayoutSolverRender="layout solver render",e.InitContent="init content",e.RecalculatePages="recalculate pages",e}();t.BIInitSteps=r;var a=function(){function e(){}return e.Init="init",e.headless="headless",e}();t.AddTpaContext=a;var s=function(){function e(){}return e.Build="build",e.Publish="publish",e.Update="update",e}();t.BIMEDActions=s;var l=function(){function e(){}return e.GetMetadata="get metadata",e.FetchStory="fetch story",e.InitCoreA=core.BIWizardServiceInitSteps.Init,e.BackwardCompatibility="backward compatibility",e.DeepLink="deep link",e}();t.BILoadStorySteps=l;var c=function(){function e(){}return e.GetUniqueName="get unique name",e.SaveNewStory="save new story",e.LoadMetadataAndContent="load metadata and content",e.GetMetadata="get metadata",e.InitContent="init content",e.InitMediaManager="init mmgr",e.SetMainKit="set main kit",e.InitCoreA=core.BIWizardServiceInitSteps.Init,e.SetSiteProperties="set site properties",e}();t.BICreateStorySteps=c;var d=function(){function e(){}return e.Settings="GFPP_SETTINGS",e.Topbar="TOP_BAR_MANAGE",e.Manage="GFPP_MANAGE",e}();t.SdkBIEventType=d;var u=function(){function e(e,t,i,n,o,r,a,s){this.clientTopology=e,this.urlParser=t,this.$injector=i,this.initStopwatch=n,this.$window=o,this.applicationParameters=r,this.flags=a,this.consumerBiLoggerSanitizer=s,this.services={},this.extraPagesAdded=0,this.passedTime=0,this.defaultValues={},this.openedPanelStack=[]}return e.$inject=["clientTopology","urlParser","$injector","initStopwatch","$window","applicationParameters","flags","consumerBiLoggerSanitizer"],e.prototype.getService=function(e){return!this.services[e]&&this.$injector.has(e)&&(this.services[e]=this.$injector.get(e)),this.services[e]||null},Object.defineProperty(e.prototype,"storyServices",{get:function(){return this.getService("storyServices")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"themeChooser",{get:function(){return this.getService("themeChooser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assistantManager",{get:function(){return this.getService("assistantManager")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"introManager",{get:function(){return this.getService("introManager")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BackendStory",{get:function(){return this.getService("BackendStory")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodeFetcher",{get:function(){return this.getService("nodeFetcher")},enumerable:!0,configurable:!0}),e.prototype.getSDKJsonForBIEvent=function(e,t){var i={app_id:e,evid:12,initiator:"ADI",instance_id:this.getInstanceId(),msid:this.getMetaSiteId(),ownerId:this.getOwnerId(),src:75,type:t};return"cbi="+encodeURIComponent(JSON.stringify(i))},e.prototype.sanitizePII=function(e){return e&&this.consumerBiLoggerSanitizer.sanitizePII(e)},e.prototype.addSDKJsonForBiEvent=function(e,t,i){var n=this.getSDKJsonForBIEvent(t,i),o=e.split("#"),r=o[0].includes("?")?"&":"?",a=o[0]+r+n;return o[1]?a+"#"+o[1]:a},e.prototype.getPanelType=function(){return this.openedPanelStack[this.openedPanelStack.length-1]},e.prototype.setDefaultValue=function(e,t){this.defaultValues[e]=t},e.prototype.setPanelSource=function(e){this.panelSource=e},e.prototype.popPanelSource=function(){var e=this.panelSource;return this.panelSource=void 0,e},e.prototype.getPanelSource=function(){return this.panelSource},e.prototype.getStoryId=function(){return this.storyServices&&this.storyServices.story?this.storyServices.story.id:this.defaultValues.storyId},e.prototype.getStoryRevision=function(){return this.storyServices&&this.storyServices.story?this.storyServices.story.revision:this.defaultValues.storyRevision},e.prototype.getIsNewSite=function(){var e=this.defaultValues.isNewSite;return"true"===e?"new site":"false"===e?"existing site":""},e.prototype.getMetaSiteId=function(){var e=this.BackendStory.parseId(this.getStoryId());return e&&e.metaSiteId||this.defaultValues.metaSiteId},e.prototype.getInstanceId=function(){var e=this.BackendStory.parseId(this.getStoryId());return e&&e.instanceId||this.defaultValues.instanceId},e.prototype.getStructureId=function(){return this.storyServices&&this.storyServices.story?this.storyServices.story.structureId:this.defaultValues.structureId},e.prototype.getIndustryId=function(){return this.storyServices&&this.storyServices.story?this.storyServices.story.industryId:this.defaultValues.industryId},e.prototype.getEsi=function(){return this.clientTopology.esi},e.prototype.getPageId=function(){return this.storyServices&&this.storyServices.story?this.storyServices.story.selectedPage:""},e.prototype.getMainCategory=function(){return this.urlParser.queryParams().vertical||null},e.prototype.getReferral=function(){return decodeURI(this.urlParser.getQueryStringValueByKey("referral"))},e.prototype.getReferralForBI=function(){var e=this.getReferral(),t=this.getMainCategory();return"invalid_story"===e||t&&"business"===t.toLowerCase()?e:""},e.prototype.getWixWizSearchGuid=function(){return this.introManager&&this.introManager.wixWizSearchId||null},e.prototype.getLod=function(){return this.introManager&&this.introManager.getLod()},e.prototype.getEditMode=function(){if(!this.assistantManager||!this.assistantManager.isInActiveTask()||this.assistantManager.isMenuOpen())return"no-tour";var e=this.assistantManager.getCustomTaskData("editMode");return e||(this.assistantManager.isInAutoplayMode()?"auto-tour":"manual-tour")},e.prototype.getAssistType=function(){return this.assistantManager&&this.assistantManager.getActiveTask().BI.assistType},e.prototype.getAdiBuilderType=function(){return"string"==typeof this.flags.waasSrc?"waas-"+this.flags.waasSrc:this.flags.headlessApi?"headless":this.applicationParameters.isInMobileEditMode()?"mobile":"desktop"},e.prototype.getNode=function(){return this.nodeFetcher&&this.nodeFetcher.getCurrentActiveNode()},e.prototype.getNodeId=function(){var e=this.getNode();return e&&e.id},e.prototype.getSectionTypeAndAlias=function(){var e=this.getNode();return[e.getContentElementType(),e.alias]},e.prototype.getSectionType=function(){return"TBD"},e.prototype.getSectionAlias=function(){return"TBD"},e.prototype.getObjectType=function(){return"TBD"},e.prototype.getDesignId=function(){var e=this.themeChooser&&this.themeChooser.getActiveTheme("mainKit");if(e)return e.id},e.prototype.getDesignNumber=function(){return-1},e.prototype.getNoOfDesigns=function(){return this.themeChooser&&this.themeChooser.getColorThemes().length},e.prototype.getPhaseNumber=function(){return this.assistantManager&&this.assistantManager.getActiveTask().activeActionIndex},e.prototype.getTotalPhases=function(){return this.assistantManager&&this.assistantManager.getActiveTask().actions.length},e.prototype.getPhaseName=function(){var e=this.assistantManager&&this.assistantManager.getActiveAction();return e&&e.BI.description},e.prototype.getVersion=function(){return this.BackendStory&&this.BackendStory.getStaticsVersion()},e.prototype.getLastPhase=function(){return this.assistantManager&&this.assistantManager.getActiveTask().activeActionIndex},e.prototype.getIntervalLoadTime=function(){return this.initStopwatch.sample},e.prototype.getLoadTime=function(){return this.initStopwatch.total},e.prototype.resetLoadTime=function(e){this.initStopwatch.reset(e)},e.prototype.getOwnerId=function(){return this.storyServices&&this.storyServices.story&&this.storyServices.story.ownerId},e.prototype.getUserRoles=function(){return this.storyServices&&this.storyServices.story&&this.storyServices.story.userRoles&&this.storyServices.story.userRoles.join(",")},e.prototype.getScreenResolution=function(){return this.$window.screen?this.$window.screen.availWidth+"x"+this.$window.screen.availHeight:"unknown"},e.prototype.resetExtraPagesCount=function(){this.extraPagesAdded=0},e.prototype.incExtraPagesCount=function(){this.extraPagesAdded++},e.prototype.extraPagesCount=function(){return this.extraPagesAdded},e.prototype.startMEDActionIfPublish=function(e,t){"publishSite"===e&&(this.passedTime=this.getLoadTime(),t())},e.prototype.finishMEDActionIfPublish=function(e,t){"publishSite"===e&&(this.passedTime+=this.getLoadTime(),t(),this.resetLoadTime(this.passedTime),this.passedTime=0)},e.prototype.getBackOrigin=function(e){return"back "+e},e}();t.ConsumerBiLoggerHelpers=u,angular.module("siteGeneratorStaticsConsumerAppInternal").service("consumerBiLoggerHelpers",u)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.events={SWITCH_DESIGN_KIT:"SWITCH_DESIGN_KIT",COLOR_PALETTE_CHANGED:"COLOR_PALETTE_CHANGED",SWITCH_FONT_KIT:"SWITCH_FONT_KIT",CHANGE_FONT_SIZE:"CHANGE_FONT_SIZE",SWITCH_MODE:"SWITCH_MODE",CONTENT_UPDATED:"CONTENT_UPDATED",LIST_ITEMS_UPDATED:"LIST_ITEMS_UPDATED",NEW_STATE_STORY_WAS_SET:"NEW_STATE_STORY_WAS_SET",BLINK_FIELD:"BLINK_FIELD",BEFORE_CAPTURE_OPERATION:"BEFORE_CAPTURE_OPERATION",MEDIA_TYPE_CHANGE:"MEDIA_TYPE_CHANGE",MEDIA_REPLACED:"MEDIA_REPLACED",OVERLAY_BACKDROP_CLICK:"OVERLAY_BACKDROP_CLICK",FIELD_TOGGLED:"FIELD_TOGGLED",MEDIA_TOGGLED:"MEDIA_TOGGLED",LINK_OF_FIELD_UPDATED:"LINK_OF_FIELD_UPDATED",SECTION_DESIGN_CHANGED:"SECTION_DESIGN_CHANGED",SECTION_DELETED:"SECTION_DELETED",SECTION_ADDED:"SECTION_ADDED",SECTION_DUPLICATED:"SECTION_DUPLICATED",SECTION_MOVED:"SECTION_MOVED",PAGE_CHANGED:"PAGE_CHANGED",PAGE_RENAMED:"PAGE_RENAMED",ADD_TPA_PAGE:"ADD_TPA_PAGE",PAGE_DELETED:"PAGE_DELETED",PAGE_SHOWN:"PAGE_SHOWN",PAGE_HIDDEN:"PAGE_HIDDEN",PAGE_DUPLICATED:"PAGE_DUPLICATED",LIST_ITEM_ADDED_OR_SHOWN:"LIST_ITEM_ADDED_OR_SHOWN",LIST_ITEM_DELETED_OR_HIDDEN:"LIST_ITEM_DELETED_OR_HIDDEN",CREATED_PAGE_FROM_ITEM:"CREATED_PAGE_FROM_ITEM",MEDIA_CHANGED_BY_SYSTEM:"MEDIA_CHANGED_BY_SYSTEM",SOCIAL_LINKS_UPDATED:"SOCIAL_LINKS_UPDATED",PUBLISH:"PUBLISH",SMART_ASSIST_ISSUES_CLOSED:"SMART_ASSIST_ISSUES_CLOSED",SMART_ASSIST_ISSUES_MUTED:"SMART_ASSIST_ISSUES_MUTED",STORY_READY:"STORY_READY",STORY_REVISION_CHANGED:"STORY_REVISION_CHANGED",STORY_SAVE_AFTER_SITE_CHANGE:"STORY_SAVE_AFTER_SITE_CHANGE",PREVIEW_READY:"PREVIEW_READY",PREVIEW_ENTERED:"PREVIEW_ENTERED",PREVIEW_EXITED:"PREVIEW_EXITED",PUBLISH_INTERACTIONS_UPDATED:"PUBLISH_INTERACTIONS_UPDATED",TPA_INTERACTIONS_UPDATED:"TPA_INTERACTIONS_UPDATED",TPA_ADDED:"TPA_ADDED",TPA_SMART_ASSIST_ISSUES_UPDATED:"TPA_SMART_ASSIST_ISSUES_UPDATED",TPA_DELETED:"TPA_DELETED",IMPORT_TIP_DONE:"IMPORT_TIP_DONE",BUSINESS_MANAGER_CLOSED:"BUSINESS_MANAGER_CLOSED",SMART_ASSIST_NUMBER_CHANGED:"SMART_ASSIST_NUMBER_CHANGED",SITE_SCROLL:"SITE_SCROLL",RELOAD_SANTA:"RELOAD_SANTA",HEADER_FOOTER_BG_CHANGED:"HEADER_FOOTER_BG_CHANGED",HEADER_TYPE_CHANGED:"HEADER_TYPE_CHANGED",SITE_IS_LOADED:"SITE_IS_LOADED",DS_SAVE_FAILED:"DS_SAVE_FAILED",MEDIA_UPSCALE_CHANGED:"MEDIA_UPSCALE_CHANGED"};var n=function(){function e(){var e=this;this.listeners={},this.reset=function(){e.listeners={}}}return e.prototype.fire=function(e,t){this.listeners[e]&&this.listeners[e].slice().forEach(function(e){return e(t)})},e.prototype.subscribe=function(e,t){var i=this;return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t),function(){var n=i.listeners[e].indexOf(t);-1!==n&&i.listeners[e].splice(n,1)}},e.prototype.subscribeOnce=function(e,t){var i;return i=this.subscribe(e,function(e){return i(),t(e)})},e}();t.PubSub=new n},function(e,t,i){"use strict";(function(e){i.d(t,"a",function(){return o});var n={},o=function(){return"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof WorkerGlobalScope?WorkerGlobalScope:n}}).call(this,i(42))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,r,a,s=i(0);!function(e){e[e.beginner=0]="beginner",e[e.intermediate=1]="intermediate"}(t.AssistantMenuProgress||(t.AssistantMenuProgress={})),function(e){e[e.Next=0]="Next",e[e.Stop=1]="Stop",e[e.Goto=2]="Goto",e[e.Start=3]="Start",e[e.Complete=4]="Complete",e[e.ForceStop=5]="ForceStop",e[e.NoOp=6]="NoOp"}(n=t.AssistantOperation||(t.AssistantOperation={})),function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(o=t.TooltipOrientation||(t.TooltipOrientation={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Bottom=2]="Bottom"}(r=t.AssistantPositionY||(t.AssistantPositionY={})),function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(a=t.AssistantPositionX||(t.AssistantPositionX={})),function(e){e[e.Playing=0]="Playing",e[e.Stopped=1]="Stopped",e[e.Disabled=2]="Disabled",e[e.Hidden=3]="Hidden"}(t.AssistantDockStatus||(t.AssistantDockStatus={}));var l=function(){function e(){var t=this;this.conf={data:{}},this.thatAttachesTo=function(){var i={build:t.build.bind(t),and:t,dock:function(){return t.thatAttachesTo().hook(e.HOOKS.DOCK),t.withTooltip().thatOpensUp(),i},hook:function(e){return t.mergeConf({element:{selector:e}}),i},onlyUnselectedElements:function(){return t.conf&&t.conf.element&&t.conf.element.selector&&t.mergeConf({element:{selector:e.unselected(t.conf.element.selector)}}),i},onlySelectedElements:function(){return t.conf&&t.conf.element&&t.conf.element.selector&&t.mergeConf({element:{selector:t.conf.element.selector+".selected"}}),i},randomElement:function(){return t.mergeConf({element:{isRandom:!0}}),i}};return i},this.withTooltip=function(){var e={build:t.build.bind(t),and:t,thatIsDisabled:function(){return t.mergeConf({tooltip:{disabled:!0}}),e},withTemplate:function(i){return t.mergeConf({tooltip:{disabled:!1,template:i}}),e},withButton:function(i){t.mergeConf({tooltip:{buttons:{}}});var o={withButton:e.withButton,build:t.build.bind(t),and:t,label:function(e){return t.mergeConf({tooltip:{buttons:(n={},n[i]={label:e},n)}}),o;var n},callback:function(e){return t.mergeConf({tooltip:{buttons:(n={},n[i]={callback:e},n)}}),o;var n},onClickGoTo:function(e){return t.mergeConf({tooltip:{buttons:(r={},r[i]={intent:{operation:n.Goto,goToIndex:e}},r)}}),o;var r},goToNextStep:function(){return t.mergeConf({tooltip:{buttons:(e={},e[i]={intent:{operation:n.Next}},e)}}),o;var e},completeOnClick:function(){return t.mergeConf({tooltip:{buttons:(e={},e[i]={intent:{operation:n.Complete}},e)}}),o;var e}};return o},withTitle:function(i){return t.mergeConf({tooltip:{disabled:!1,title:i}}),e},withWidth:function(t){return e.withCustomStyle({width:t,"max-width":t}),e},withHeight:function(t){return e.withCustomStyle({height:t,"min-height":t}),e},withBackgroundColor:function(t){return e.withCustomStyle({backgroundColor:t}),e},withCustomStyle:function(i){return t.mergeConf({tooltip:{disabled:!1,customStyle:i}}),e},withSuccessMessage:function(){return t.mergeConf({tooltip:{successMessage:!0}}),e},withCloseButton:function(){return t.mergeConf({tooltip:{closeButton:!0}}),e},withContent:function(i){return t.mergeConf({tooltip:{disabled:!1,content:i}}),e},withImage:function(i){return t.mergeConf({tooltip:{disabled:!1,image:i}}),e},thatDoesntPreserveBackground:function(){return t.mergeConf({preserveBackground:!1}),e},thatIsntHiddenAfterAction:function(){return t.mergeConf({tooltip:{dontHideOnExit:!0}}),e},thatOrientsVertically:function(){return t.mergeConf({tooltip:{orientation:o.Vertical}}),e},thatOpensAsModal:function(){return t.mergeConf({isModal:!0}),e},thatOpensFullScreen:function(){var i=t.conf&&t.conf.tooltip&&t.conf.tooltip.customClasses||[];return t.mergeConf({isModal:!0,tooltip:{customClasses:i.concat(["assistant-tooltip-fullscreen"])}}),e},thatOpensUnderneathSpinnerLayer:function(){var i=t.conf&&t.conf.tooltip&&t.conf.tooltip.customClasses||[];return t.mergeConf({isModal:!0,tooltip:{customClasses:i.concat(["underneath-spinner-layer"])}}),e},thatOpensRight:function(i){var n=void 0===i?{}:i,o=n.offsetX,r=void 0===o?0:o,s=n.offsetY,l=void 0===s?0:s;return t.mergeConf({tooltip:{positionX:a.Right,offsetY:l,offsetX:r}}),e},thatOpensLeft:function(i){var n=void 0===i?{}:i,o=n.offsetX,r=void 0===o?0:o,s=n.offsetY,l=void 0===s?0:s;return t.mergeConf({tooltip:{positionX:a.Left,offsetY:l,offsetX:r}}),e},thatOpensUp:function(i){var n=void 0===i?{}:i,o=n.offsetX,a=void 0===o?0:o,s=n.offsetY,l=void 0===s?0:s;return t.mergeConf({tooltip:{positionY:r.Top,offsetY:l,offsetX:a}}),e},thatOpensDown:function(i){var n=void 0===i?{}:i,o=n.offsetX,a=void 0===o?0:o,s=n.offsetY,l=void 0===s?0:s;return t.mergeConf({tooltip:{positionY:r.Bottom,offsetY:l,offsetX:a}}),e}};return e},this.withBehaviors=function(){var i={build:t.build.bind(t),and:t,thatSkipsStepOnCondition:function(e){return t.mergeConf({shouldSkipAction:e}),i},thatStopsAutoplayOnEnter:function(){return t.mergeConf({onEnter:{stopAutoplay:!0}}),i},thatStartsAutoplayOnEnter:function(){return t.mergeConf({onEnter:{startAutoplay:!0}}),i},thatStartsAutoplayOnExit:function(){return t.mergeConf({onExit:{startAutoplay:!0}}),i},thatStopsAutoplayOnExit:function(){return t.mergeConf({onExit:{stopAutoplay:!0}}),i},thatGoesToIndexOnAutoPlay:function(e){return t.mergeConf({autoPlayGoToIndex:e}),i},thatClosesSidePanelOnExit:function(){return t.mergeConf({onExit:{DOMEvents:[{element:e.HOOKS.PANEL_CLOSE_BUTTON,trigger:"click"}]}}),i},thatClosesSidePanelOnEnter:function(){return t.mergeConf({onEnter:{DOMEvents:[{element:e.HOOKS.PANEL_CLOSE_BUTTON,trigger:"click"}]}}),i},thatWaitsForSpinner:function(){return t.mergeConf({waitForSpinner:!0}),i},thatRedirectsTo:function(e){return void 0===e&&(e=null),t.mergeConf({redirectToState:e}),i},thatWaitsForElementWithCondition:function(e){return t.mergeConf({waitForElementCondition:e}),i},thatDoesntScrollToElement:function(){return t.mergeConf({scrollToElement:!1}),i},thatDelays:function(e){return t.mergeConf({delayBeforeStartInMs:e}),i},thatWaitsForElement:function(e){return t.mergeConf({waitForElement:e}),i},thatWaitsForExpression:function(e){var n=t.conf.waitForExpressions,o=void 0===n?[]:n;return t.mergeConf({waitForExpressions:o.concat([e])}),i},thatHasHint:function(e,n){return void 0===e&&(e=a.Center),void 0===n&&(n=r.Center),t.mergeConf({hint:{enabled:!0,positionX:e,positionY:n}}),i},withAutoplayTimeoutOf:function(e){return t.mergeConf({autoplayTimeoutInMs:e}),i},thatAllowsDialogInterruptions:function(){return t.mergeConf({allowDialogInterruptions:!0}),i}};return i},this.withCallbacks=function(){var e={build:t.build.bind(t),and:t,onExit:function(i){return t.mergeConf({onExit:{callback:i}}),e},onEnter:function(i){return t.mergeConf({onEnter:{callback:i}}),e}};return e},this.withBackdrop=function(){var i={build:t.build.bind(t),and:t,thatIsOn:function(){return t.mergeConf({backdrop:e.BACKDROP.ON}),i},thatIsOff:function(){return t.mergeConf({backdrop:e.BACKDROP.OFF}),i},thatIsInvisible:function(){return t.mergeConf({backdrop:e.BACKDROP.INVISIBLE}),i},thatIsOpaque:function(){return t.mergeConf({backdrop:e.BACKDROP.OPAQUE}),i},thatFadesOutOnExit:function(e){return void 0===e&&(e=1e3),t.mergeConf({backdrop:{fadeOutOnExit:!0,fadeOutTime:e}}),i}};return i},this.withConditionalConf=function(){var e={build:t.build.bind(t),and:t,experimentIsEnabled:function(i,n){return t.mergeConf({experiments:(o={},o[i]=n,o)}),e;var o},isInAutoplayMode:function(i){return t.mergeConf({actionIfAuto:i}),e},isInManualMode:function(i){return t.mergeConf({actionIfManual:i}),e},customCondition:function(i,n,o){return t.conf.conditions||t.mergeConf({conditions:[]}),t.mergeConf({conditions:t.conf.conditions.concat([{conditionMethod:i,truthyConf:n,falsyConf:o}])}),e}};return e},this.thatIsBasedOnTemplate=function(){var e={build:t.build.bind(t),and:t,manualOrAuto:function(){return t.baseTooltipOn("MANUAL_OR_AUTO"),e},keepOrAnother:function(i){return t.baseTooltipOn("KEEP_OR_ANOTHER"),t.mergeConf({tooltip:{buttons:{TRY_ANOTHER:{intent:{actionIndex:i}}}}}),e},singleButtonTooltip:function(i,o){return void 0===o&&(o=n.Next),t.baseTooltipOn("SINGLE_BUTTON"),t.mergeConf({tooltip:{buttons:{BUTTON1:{label:i,intent:{operation:o}}}}}),e}};return e},this.withTriggers=function(){var i={build:t.build.bind(t),and:t,nextOnElementClick:function(e,o,r,a){return t.createExitTrigger({operation:n.Next,hook:e,descendant:o,dontWaitForElement:r,callback:a}),i},goToOnElementClick:function(e,o,r,a,s){return t.createExitTrigger({operation:n.Goto,hook:e,descendant:r,goToIndex:o,dontWaitForElement:a,callback:s}),i},nextOnBackdropClick:function(){return t.createExitTrigger({operation:n.Next,hook:e.HOOKS.BACKDROP}),i},stopOnElementClick:function(e,o){return t.createExitTrigger({operation:n.Stop,hook:e,dontWaitForElement:o}),i},completeOnElementClick:function(e,o,r,a){return t.createExitTrigger({operation:n.Complete,hook:e,descendant:o,dontWaitForElement:r,callback:a}),i},forceStopOnElementClick:function(e,o){return t.createExitTrigger({operation:n.ForceStop,hook:e,dontWaitForElement:o}),i},completeOnBackdropClick:function(){return t.createExitTrigger({operation:n.Complete,hook:e.HOOKS.BACKDROP}),i},stopOnBackdropClick:function(o){return t.createExitTrigger({operation:n.Stop,hook:e.HOOKS.BACKDROP,callback:o}),i}};return i},this.withBI=function(){var e={build:t.build.bind(t),and:t,withDescription:function(i){return t.mergeConf({BI:{description:i}}),e}};return e},this.withEvents=function(){var e={build:t.build.bind(t),and:t,thatBroadcastsOnEnter:function(i){var n=t.conf&&t.conf.events&&t.conf.events.onEnter||[];return t.mergeConf({events:{onEnter:n.concat([i])}}),e},thatBroadcastsOnExit:function(i){var n=t.conf&&t.conf.events&&t.conf.events.onExit||[];return t.mergeConf({events:{onExit:n.concat([i])}}),e}};return e},this.withCustomStage=function(){var e={build:t.build.bind(t),and:t,withDisabledElements:function(i){var n=t.conf&&t.conf.disabledElements||[];return t.mergeConf({disabledElements:n.concat([i])}),e},withAdditionalHighlight:function(i){var n=t.conf&&t.conf.additionalHighlightedElements||[];return t.mergeConf({additionalHighlightedElements:n.concat([i])}),e}};return e}}return e.prototype.build=function(){return this.conf},e.prototype.withCustomConf=function(e){return this.mergeConf(e),this},e.prototype.mergeConf=function(e){s.merge(this.conf,e)},e.prototype.baseTooltipOn=function(t){var i=e.TEMPLATES[t];if(!i)throw"unknown base type "+t;return this.mergeConf(i),this},e.prototype.createExitTrigger=function(t){var i=t.operation,n=t.hook,o=t.descendant,r=t.goToIndex,a=t.trigger,s=void 0===a?"click":a,l=t.dontWaitForElement,c=t.callback,d={element:n||e.ELEMENT_SELECTOR,descendant:o,intent:{operation:i,goToIndex:r},trigger:s,dontWaitForElement:l,callback:c},u=this.conf&&this.conf.exitTriggers||[];u.push(d),this.mergeConf({exitTriggers:u})},e.unselected=function(e){return e+":not(.selected)"},e.ELEMENT_SELECTOR="$element",e.BACKDROP={ON:{enabled:!0,opacity:.7},INVISIBLE:{enabled:!0,opacity:0},OFF:{enabled:!1},OPAQUE:{enabled:!0,opacity:1}},e.HOOKS={BODY:"body",$element:e.ELEMENT_SELECTOR,TOP_BAR:'[data-hook="top-bar"]',DOCK:".assistant-dock",DOCK_START:".assistant-dock-start",BACKDROP:".intro-backdrop",PREVIEW_TAB:'[data-hook="topbar-preview"]',ADD_TAB:'[data-hook="second-top-bar-add-section"]',PUBLISH_TAB:".publish-tab",ADD_SECTION_TAB:'[data-hook="add-section-button"]',ADD_PAGE_TAB:'[data-hook="add-page-button"]',PAGE_TAB_MENU_ITEM:".pages-dropdown .sub-menu-item",DESIGN_TAB:'[data-hook="design-tab-drop-down-section"]',DESIGN_MENU_THEMES_OPTION:'[data-hook="open-themes-button"]',DESIGN_MENU_COLORS_OPTION:'[data-hook="open-colors-button"]',DESIGN_MENU_FONTS_OPTION:'[data-hook="open-fonts-button"]',DESIGN_MENU_ANIMATIONS_OPTION:'[data-hook="open-animations-button"]',EXIT_PREVIEW_BUTTON:".tour-element-preview-back",KIT_OPTION:"design-panel .kit-option",SELECTED_KIT_OPTION:"design-panel .kit-option.selected",KIT_OPTION_CUSTOMISE:"design-panel .kit-option.selected .customise-button",COLORS_PANEL:"kit-colors cc-panel-frame",COLORS_CONTAINER:".colors-container",COLORS_CONTAINER_NEW_COLORATION:".color-palette > *",MAIN_COLOR_NEW_COLORATION:"p21-color-tag [data-hook=color-tag]",MAIN_COLOR_DIALOG_NEW_COLORATION:".colors-dialog",MAIN_COLOR_DIALOG_CANCEL_BUTTON_NEW_COLORATION:'.colors-dialog [data-hook="palette-color-dialog-cancel"]',MAIN_COLOR_DIALOG_CONFIRM_BUTTON_NEW_COLORATION:'.colors-dialog [data-hook="palette-color-dialog-confirm"]',MAIN_COLOR_DIALOG_COLOR_TAG:".colors-dialog .p21-color-tag",KIT_PALETTE_NEW_COLORATION:"kit-palette .p24-palette:not(.-selected)",ADVANCED_EDITING_NEW_COLORATION:"coloration-panel .p18-panel-footer",COLORS:"kit-colors .colors-container .colors",DESIGN_PANEL:"design-panel",DESIGN_PANEL_KIT:"design-panel-kit",TOP_BAR_BACK_BUTTON:'[data-hook="top-bar-back-button"]',PREVIEW_PADDING:".preview-padding",PREVIEW_LIST:".preview-list",PREVIEW_SECTION:".preview-section-loading",PREVIEW_OVERLAY:".preview-overlay",PREVIEW_OVERLAY_WITH_NOT_BLANK_PAGE:".preview-list-container [role=button]:not(.page-blank-overlay)",PREVIEW_CONTAINER:".preview-container",PREVIEW_CONTENT:".preview-content",OVERLAY_CONTAINER:".overlay-container",OVERLAY_SECTION_NOT_TPA:".list-span-overlay:not(.tpa-span)",OVERLAY_SECTION_WITH_PRESETS:".list-span-overlay.has-presets",PANEL_CLOSE_BUTTON:".p16-panel-header [data-hook=close-button]",PANEL_HELP_BUTTON:".p16-panel-header [data-hook=help-button]",PANEL_BACK_BUTTON:".p16-panel-header [data-hook=return-button]",TEXT_MANAGER_LINK_IMPORTED:'button[cc-tooltip="text-manager-link-imported"]',RETURN_SUB_BUTTON:'[data-hook="return-sub-button"]',TEXT_MANAGER_DIALOG:".text-manager-dialog",CUSTOMIZE_BUTTON:'[data-hook="customize-button"]',NODE_EDITOR:".node-editor .cc-panel-frame.cc-container",NODE_EDITOR_BUTTON_FIELD:function(e){return'.node-editor .cc-panel-frame.cc-container field-editor[node-id="'+e+'"] cc-button-editor [data-hook="multi-field-group"]'},NODE_EDITOR_BUTTON_FIELD_TOGGLE_SHOW_BUTTON:function(e){return'.node-editor .cc-panel-frame.cc-container field-editor[node-id="'+e+'"] cc-button-editor [data-hook="toggle-button"]'},NODE_EDITOR_BUTTON_FIELD_LINK_BUTTON:function(e){return'.node-editor .cc-panel-frame.cc-container field-editor[node-id="'+e+'"] cc-button-editor [data-hook="link"]'},NODE_EDITOR_SOCIALS_FIELD:'.node-editor .cc-panel-frame.cc-container [data-hook="social-buttons"] > [data-hook="label"]',NODE_EDITOR_SOCIALS_FIELD_TOGGLE:'.node-editor .cc-panel-frame.cc-container [data-hook="social-buttons"] > [data-hook="label"] [data-hook="toggle-button"]',LINK_PANEL_X:"link-editor-panel .cc-icon-close-12",LINK_PANEL_CANCEL:'link-editor-panel [data-hook="link-editor-cancel"]',LINK_PANEL_DONE:'link-editor-panel [data-hook="link-editor-done"]',SOCIAL_PANEL_CONTENT:"social-panel .cc-panel-body",SOCIAL_PANEL_HEADER:"social-panel .p16-panel-header",SOCIAL_PANEL_LIST:"social-panel social-panel-inner",SOCIAL_PANEL_X:'social-panel [data-hook="close-button"], single-panel [data-hook="close-button"]',TEXT_MANAGER_CLOSE_PANEL:'text-manager-dialog [data-hook="close-button"]',LEFT_PANEL:".builder-panel-inner",PRESETS_CONTAINER:".builder-left-panel .preview-list-wrap",PRESET:"[data-hook=preview]",PAGE_TAB:".top-bar-section .page-tab",PAGE_TAB_TEMPORARY:'[data-hook="second-top-bar-pages-panel"]',PAGE_TAB_SECOND_TOPBAR:'[data-hook="second-top-bar-pages-panel"]',MANAGE_PAGES:'[data-hook="manage-pages"]',ADD_PAGE_BUTTON:".add-page-button",PAGE_PANEL_FOOTER:".pages-panel-inner-footer",UNSELECTED_PAGE_ITEMS:".tree-node:not(.selected-page)",ADD_SECTION_PANEL:".add-section",ADD_SECTION_PANEL_LABEL:'.add-section [label="Add Section"]',BROWSER_TOOLBAR:".browser-toolbar",CONNECT_DOMAIN_BUTTON:'[data-hook="fake-browser-bar"] [data-hook="label"]',CONNECT_DOMAIN_BUTTON_NEW_TOP_BAR:'.assistant-connect-domain [data-hook="suggest-domain-cta"],[data-hook="fake-browser-connect-domain"]',PAGE_SETTINGS_BUTTON:".pages-panel-inner .menu-list .tree-node.selected-page .settings-button",PAGES_PANEL:"pages-panel .pages-panel-inner",PAGES_PANEL_SPLIT:"pages-panel-split .pages-panel-inner",PAGE_TRANSITION_DROPDOWN:'pages-panel [data-hook="p3-md-select"]',PAGE_SEO_MENU_ITEM:'md-dialog cc-menu-item[icon=cc-icon-seo] [data-hook="menu-item"]',SEO_PANEL:"seo-panel",SEO_PANEL_PAGE_DESCRIPTION_FIELD:"seo-panel c2-text-input:eq(1)",RECOMMENDED_SECTION:".tour-element-recommended-section .section-button",NEXT_RECOMMENDED_SECTION:".tour-element-recommended-section.selected + .tour-element-recommended-section .section-button",OVERLAY_SWITCH_LAYOUT_BUTTON:".tour-element-switch-layout",OVERLAY_SECTION_EDIT_BUTTON:'[data-hook="edit-button"]',OVERLAY_MORE_ACTIONS_BUTTON:".tour-more-actions-panel",OVERLAY_DRAG_HANDLE:".tour-drag-handle",OVERLAY_EDIT_SECTION_BODY:'[data-hook="default-transclude"]',OVERLAY_EDIR_SECTION_HEADER:".cc-headline",INSERT_SECTION_BUTTON:".insert",TOOLTIP_BUTTON:".tour-button",BLANK_PAGE_OVERLAY:".page-blank-overlay",ANIMATION_CONTAINER:".animations-container",ANIMATION_TIP:".animations-container .animations-tip",CHANGE_ANIMATION:'[data-hook="animation-container"]',PREVIEW_ANIMATION:'[data-hook="preview-animation"]',ANIMATION_DROPDOWN_EXCLUDE_NO_ANIMATION:"._md-select-menu-container [data-hook=dropdown-list-item]:not(.no-animation)",ANIMATION_DROPDOWN_NO_ANIMATION:"._md-select-menu-container [data-hook=dropdown-list-item].no-animation",PAGES_PREVIEW:"#PAGES_CONTAINERscreenWidthBackground",CLOSE_PREVIEW:".tour-element-preview-back",ANIMATION_CONTROL:'[data-hook="animations-control"]',ANIMATION_THUMBNAILS:'[data-hook="animation-thumbnails"]',ANIMATION_THUMBNAILS_EXCLUDE_NO_ANIMATION:'[data-hook="animation-thumbnails"] .c20-graphic-radio:not(:first)',ANIMATION_THUMBNAILS_NO_ANIMATION:'[data-hook="animation-thumbnails"] .c20-graphic-radio:first',SITE_DESIGN_DROPDOWN_MENU:'[data-hook="site-design-dropdown-menu"]',FONT_THUMBNAIL:'[data-hook="font-thumbnail"]',FONT_PANEL:"font-panel .cc-panel-frame",RETURN_BUTTON:'[data-hook="return-button"]',FONT_SIZE_SLIDER:'[data-hook="slider"].font-size-slider-control',CUSTOMIZE_DESIGN_BUTTON:".customize-design-container .customize-design",HEADER_OVERLAY:".header-overlay",FOOTER_OVERLAY:".footer-overlay",SELECTED_PREVIEW_SECTION:".preview-section.selected",SECTION_DESIGN_MENU_HOOK:'[data-hook="section-design-menu"]',MENU_ITEM:".customize-design-container.selected cc-menu-item",BACKGROUND_BUTTON:'[data-hook="background-button"]',MEDIA_PREVIEW:'[data-hook="preview-content"]',MEDIA_CHOOSER_PREVIEW:'media-chooser [data-hook="preview-content"]',MEDIA_SETTINGS_REPLACE_BUTTON:'[data-hook="replace-button"]',MEDIA_BUTTON:'[data-hook="media-button"]',COLOR_BUTTON:'[data-hook="color-button"]',FONT_BUTTON:'[data-hook="font-button"]',ANIMATIONS_BUTTON:'[data-hook="animations-button"]',ORGANIZE_MEDIA_BUTTON:'[data-hook="organize-media-button"]',CC_PANEL_FRAME:".cc-panel-frame",BACKGROUND_PREVIEW:'[data-hook="background"]:not(.-selected)',HEADERBG_BUTTON:'[data-hook="headerbg-button"]',LISTBG_BUTTON:'[data-hook="listbg-button"]',COLORATION_MODE_SELECTOR:"coloration-mode-selector",SEGMENT_OVERLAY_CLASS:".segment-overlay",GO_TO_SITE_COLORS:'[data-hook="goto-site-colors"]',GO_TO_SITE_FONTS:'[data-hook="goto-fonts-panel"]',GO_TO_SITE_ANIMATION:'[data-hook="goto-animation-panel"]',CHANGE_SECTION_HEIGHT_BUTTON:'[data-hook="height-button"]',SECTION_HEIGHT_CLOSE_BUTTON:".action-button.close",GO_TO_SITE_DESIGN:'[data-hook="goto-site-design"]',SITE_DROPDOWN:'[data-hook="site-dropdown"] .sub-menu-item:not(.seo-wiz)',SITE_DROPDOWN_ITEMS_EXCEPT_SEO_WIZ:'[data-hook="site-dropdown"] li:not(.seo-wiz)',SITE_DROPDOWN_SEO_WIZ:'[data-hook="seo-wiz"]',SITE_DROPDOWN_ITEMS_EXCEPT_BUSINESS_DETAILS:'[data-hook="site-dropdown"] li:not(.change-business-details)',SITE_DROPDOWN_BUSINESS_DETAILS:'[data-hook="change-business-details"]',DIALOG_BACKDROP:".md-dialog-container",IMAGE_UPSCALE_MODAL_APPLY:'[data-hook="image-upscale-modal-cancel-btn"]',IMAGE_UPSCALE_MODAL_CANCEL:'[data-hook="image-upscale-modal-apply-btn"]'},e.EVENTS={ACTION_START:"assistant.action.start",ACTION_COMPLETED:"assistant.action.completed",TASK_START:"assistant.task.start",TASK_COMPLETE:"assistant.task.complete",TASK_QUIT:"assistant.task.quit",TASK_SKIP:"assistant.task.skip",TASK_TIMEOUT:"assistant.task.timeout",MANUAL_OR_AUTO_CHOSE_MANUAL:"assistant.action-type.manualauto.manual",MANUAL_OR_AUTO_CHOSE_AUTO:"assistant.action-type.manualauto.auto",KEEP_TRYANOTHER_CHOSE_KEEP:"assistant.action-type.keeptryagain.keep",KEEP_TRYANOTHER_CHOSE_TRYANOTHER:"assistant.action-type.keeptryagain.tryagain",OPEN_MENU:"assistant.menu.open",CLOSE_MENU:"assistant.menu.close",PROGRESS_BAR_ACTION_IN_PROGRESS:"assistant.progress.action-inprogress",PROGRESS_BAR_ACTION_COMPLETED:"assistant.progress.action-completed"},e.TEMPLATES={SINGLE_BUTTON:{tooltip:{buttons:{BUTTON1:{intent:{operation:n.Next}}}}},MANUAL_OR_AUTO:{tooltip:{buttons:{AUTO:{label:"tour.button.auto",intent:{operation:n.Next,enableAutoplay:!0},BI:{event:e.EVENTS.MANUAL_OR_AUTO_CHOSE_AUTO}},MANUAL:{label:"tour.button.manual",intent:{operation:n.Next,disableAutoplay:!0},BI:{event:e.EVENTS.MANUAL_OR_AUTO_CHOSE_MANUAL}}}}},KEEP_OR_ANOTHER:{additionalHighlightedElements:[e.HOOKS.PREVIEW_CONTAINER],disabledElements:[e.HOOKS.INSERT_SECTION_BUTTON,e.HOOKS.OVERLAY_CONTAINER],onEnter:{stopAutoplay:!0},waitForSpinner:!0,exitTriggers:[{element:e.HOOKS.BACKDROP,intent:{operation:n.Complete}}],tooltip:{disabled:!1,buttons:{TRY_ANOTHER:{label:"tour.button.try-another",intent:{operation:n.Goto},BI:{event:e.EVENTS.KEEP_TRYANOTHER_CHOSE_TRYANOTHER}},KEEP_IT:{label:"tour.button.keep-it",intent:{operation:n.Complete},BI:{event:e.EVENTS.KEEP_TRYANOTHER_CHOSE_KEEP}}},closeable:{enabled:!0,intent:{operation:n.Complete}}},preserveBackground:!0,backdrop:e.BACKDROP.INVISIBLE,actionIfAuto:{tooltip:{buttons:{TRY_ANOTHER:{intent:{enableAutoplay:!0}}}}}}},e}();t.AssistantAction=l},,function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(64),r=i(229);t.STATES=n({},intro.INTRO_STATES,o.BUILDER_STATES,r.PLAYGROUND_STATES),t.STATE_PARAMS_KEY={MODEL:"model",GEO_SEARCH:"geosearch"},t.STATE_PARAMS_VALUES={MODEL_NOT_FOUND:"not-found",MODEL_FOUND_EST:"found-est",MODEL_FOUND:"found",GEO_SEARCH_FIRST_TIME:"first-time",GEO_SEARCH_NOT_FOUND:"not-found",GEO_SEARCH_EST_FAILED:"est-failed"},t.BACKGROUND_PANEL_MODE={HEADER_MODE:"header",LIST_MODE:"list"},t.PANEL_WIDTH=360,t.CARD_WIDTH=317},,function(e,t,i){"use strict";var n=i(46),o=i(105),r=Object.prototype.toString;function a(e){return"[object Array]"===r.call(e)}function s(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===r.call(e)}function c(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),a(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:o,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:l,isStream:function(e){return s(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function i(i,n){"object"==typeof t[n]&&"object"==typeof i?t[n]=e(t[n],i):t[n]=i}for(var n=0,o=arguments.length;n<o;n++)c(arguments[n],i);return t},extend:function(e,t,i){return c(t,function(t,o){e[o]=i&&"function"==typeof t?n(t,i):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(26),r=i(0),a=function(){function e(t,i,o,r,a,s,l){this.provider=t,this.$rootScope=i,this.$state=o,this.$timeout=r,this.$window=a,this.applicationParameters=s,this.flags=l,this.currentScale=e.DefaultScale,this.manualScale=null,this.disabled=!1,this.flags.newTopBar&&(e.MinScaleFactor=.6),this.flags.largerStage&&(e.MinScale=.3,e.MinScaleFactor=.2),this.disabled=this.$state.includes(n.STATES.BUILDER_STORY_PREVIEW),this.ranges=t.rangesConfig,this.scaleFactor=this.flags.scaleFactor,this.init()}return e.$inject=["provider","$rootScope","$state","$timeout","$window","applicationParameters","flags"],e.prototype.reset=function(e){void 0===e&&(e=!1),this.manualScale&&!e||(this.manualScale=this.applicationParameters.isInMobileEditMode()?1:null,this.currentScale=this.disabled?this.getDefaultScale():this.getScaleForCurrentResolution())},e.prototype.getScaleFactor=function(){return this.scaleFactor},e.prototype.setScale=function(e){this.manualScale=this.ensureValidScale(e)},e.prototype.getScale=function(){return this.manualScale||this.currentScale},e.prototype.setScaleFactor=function(e){this.scaleFactor=+e.toFixed(2),this.reset()},e.prototype.zoomIn=function(t,i){void 0===i&&(i=1);var n=this.getScaleFactor();this.changeScaleFactor(n+e.ScaleFactorStep*i,t)},e.prototype.zoomOut=function(t,i){void 0===i&&(i=1);var n=this.getScaleFactor();this.changeScaleFactor(n-e.ScaleFactorStep*i,t)},e.prototype.changeScaleFactor=function(e,t){this.setScaleFactor(e),t&&this.enable()},e.prototype.getScaleByViewPort=function(t,i){var n=e.StagePreviewRatio*i/o.Viewer.ViewerDesktopBaseSize;return Math.min(1,n)},e.prototype.getScaleForCurrentResolution=function(){var t=this,i=this.getViewportWidth(),n=this.getStageWidth();if(this.flags.largerStage){var o=this.getScaleByViewPort(i,n);return this.ensureValidScale(o*this.scaleFactor)}var a=r.find(this.ranges,function(e){return t.isValidConfiguration(e,i,n)});if(!a)return e.DefaultScale;var s=a.scale(i,n);return this.ensureValidScale(s*this.scaleFactor)},e.prototype.isValidConfiguration=function(e,t,i){return!!this.isInRange(t,e.viewport)&&(!e.stage||this.isInRange(i,e.stage))},e.prototype.isInRange=function(e,t){var i=t[0],n=t[1];return r.inRange(e,i,n)},e.prototype.init=function(){var e=this;this.reset(!0),this.$rootScope.$on("$stateChangeSuccess",function(t,i,o,r,a){if(r.name===n.STATES.BUILDER_STORY_PREVIEW)e.$timeout(function(){return e.enable()});else switch(i.name){case n.STATES.BUILDER_ADD_SECTION:break;case n.STATES.BUILDER_STORY_PREVIEW:e.disable();break;case n.STATES.BUILDER_STORY:e.$timeout(function(){return e.enable()});break;default:e.reset(!0)}})},e.prototype.ensureValidScale=function(t){return this.isValidScale(t)?t>e.MaxScale?e.MaxScale:t<e.MinScale?e.MinScale:t:this.getDefaultScale()},e.prototype.isValidScale=function(e){return"number"==typeof e&&!isNaN(e)},e.prototype.getDefaultScale=function(){return e.DefaultScale*this.scaleFactor},e.prototype.getStageWidth=function(){return this.getViewportWidth()-this.getPanelWidth()},e.prototype.getViewportWidth=function(){return this.$window.innerWidth},e.prototype.getPanelWidth=function(){return this.getPanelWidthFromState(this.$state.current)},e.prototype.getPanelWidthFromState=function(t){return t&&t.data&&t.data.panelWidth||e.DefaultPanelWidth},e.prototype.enable=function(){this.disabled=!1,this.reset()},e.prototype.disable=function(){this.disabled=!0,this.reset()},e.StagePreviewRatio=.94,e.MinScale=.384615385,e.MaxScale=10,e.DefaultScale=.71,e.DefaultPanelWidth=0,e.MaxScaleFactor=1,e.MinScaleFactor=.5,e.ScaleFactorStep=.1,e}();t.PreviewScale=a;var s=function(){function e(){this.rangesConfig=[]}return e.prototype.reset=function(){this.rangesConfig.length=0},e.prototype.range=function(e){if(!this.isRangeValid(e))throw"range: is not valid!, it won't be added";return this.rangesConfig.push(e),this.sortRanges(),this},e.prototype.sortRanges=function(){this.rangesConfig=this.rangesConfig.sort(function(e,t){return e.stage?-1:t.stage?1:0})},e.prototype.isRangeValid=function(e){var t=e.viewport,i=t[0],n=t[1];if(i>=n)return!1;if(e.stage){var o=e.stage,r=o[0],a=o[1];return r<a&&r>=i&&a<=n}return!0},e.prototype.$get=function(e){return e.instantiate(a,{provider:this})},e.prototype.$get.$inject=["$injector"],e}();t.PreviewScaleProvider=s,angular.module("siteGeneratorStaticsConsumerAppInternal").provider("previewScale",s)},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i(175),r=i(236),a=i(25),s=i(68),l=i(1),c=i(552).ImageUpscaleModal;!function(e){e[e.SHOW_POPUP_EVENT=0]="SHOW_POPUP_EVENT",e[e.TIME_TO_PUBLISH_POPUP=1]="TIME_TO_PUBLISH_POPUP",e[e.SESSION_EXPIRED_POPUP=2]="SESSION_EXPIRED_POPUP",e[e.STORY_CONFLICTING_CHANGES_POPUP=3]="STORY_CONFLICTING_CHANGES_POPUP",e[e.SITE_NOT_MANAGED_BY_OB_POPUP=4]="SITE_NOT_MANAGED_BY_OB_POPUP",e[e.STORY_ARCHIVED_POPUP=5]="STORY_ARCHIVED_POPUP",e[e.PUBLISH_FAILED_POPUP=6]="PUBLISH_FAILED_POPUP",e[e.CANT_REMOVE_HEADER_POPUP=7]="CANT_REMOVE_HEADER_POPUP",e[e.CANT_REMOVE_FOOTER_POPUP=8]="CANT_REMOVE_FOOTER_POPUP",e[e.AUTOSAVE_POPUP=9]="AUTOSAVE_POPUP",e[e.SAVE_VALIDATION_ERROR_POPUP=10]="SAVE_VALIDATION_ERROR_POPUP",e[e.DS_SAVE_PUBLISH_DISABLED_ON_SERVER_POPUP=11]="DS_SAVE_PUBLISH_DISABLED_ON_SERVER_POPUP",e[e.PALETTE_COLOR_DIALOG_POPUP=12]="PALETTE_COLOR_DIALOG_POPUP",e[e.BACKGROUND_IMAGE_SETTINGS=13]="BACKGROUND_IMAGE_SETTINGS",e[e.BACKGROUND_VIDEO_SETTINGS=14]="BACKGROUND_VIDEO_SETTINGS",e[e.BACKGROUND_GALLERY_SETTINGS=15]="BACKGROUND_GALLERY_SETTINGS",e[e.NEW_USER_FIRST_TIME_MOBILE_EDITOR_POPUP=16]="NEW_USER_FIRST_TIME_MOBILE_EDITOR_POPUP",e[e.EXISTING_USER_FIRST_TIME_MOBILE_EDITOR_POPUP=17]="EXISTING_USER_FIRST_TIME_MOBILE_EDITOR_POPUP",e[e.COLOR_MODE_DIALOG_POPUP=18]="COLOR_MODE_DIALOG_POPUP",e[e.DELETE_TPA_PAGE_POPUP=19]="DELETE_TPA_PAGE_POPUP",e[e.DELETE_ALL_TPA_WIDGETS_POPUP=20]="DELETE_ALL_TPA_WIDGETS_POPUP",e[e.DELETE_CHAT_POPUP=21]="DELETE_CHAT_POPUP",e[e.SIGN_UP=22]="SIGN_UP",e[e.IMAGE_UPSCALE_MODAL=23]="IMAGE_UPSCALE_MODAL",e[e.IMPORT_PAGE_SUCCESS_POPUP=24]="IMPORT_PAGE_SUCCESS_POPUP",e[e.IMPORT_PAGE_FAILED_POPUP=25]="IMPORT_PAGE_FAILED_POPUP",e[e.SAVE_AS_TEMPLATE_FAIL=26]="SAVE_AS_TEMPLATE_FAIL",e[e.CHANGE_BUSINESS_DETAILS_POPUP=27]="CHANGE_BUSINESS_DETAILS_POPUP"}(n=t.ConsumerDialogTypes||(t.ConsumerDialogTypes={}));var d=function(){function e(e,t,i,d,u,p,g,h){var m=this;this.$rootScope=e,this.$window=t,this.exitNotification=i,this.$translate=d,this.applicationState=u,this.consumerBiLogger=p,this.CONSUMER_DIALOGS=g,this.CcDialogBuilder=h,this.popups={},this.firstTimeInMobileBiEvents={onNextClick:function(e){m.consumerBiLogger.dialogs.approveChanges(null,null,null,e,null,l.BIOrigins.SwitchEditModeDropdown)},onShow:function(e,t){m.consumerBiLogger.dialogs.show(null,null,null,e?m.CONSUMER_DIALOGS.AFFECTS_ONLY_MOBILE_EDITOR:t,l.BIOrigins.SwitchEditModeDropdown)},onHide:function(){m.consumerBiLogger.dialogs.approveChanges(null,null,null,m.CONSUMER_DIALOGS.AFFECTS_ONLY_MOBILE_EDITOR,null,l.BIOrigins.SwitchEditModeDropdown)},onCancel:function(e,t){m.consumerBiLogger.dialogs.cancel(null,null,null,e?m.CONSUMER_DIALOGS.AFFECTS_ONLY_MOBILE_EDITOR:t,null,null)}};var f=this.popups;e.$on(n[n.SHOW_POPUP_EVENT],function(e,t){return m.showDialog(t)}),f[n.CHANGE_BUSINESS_DETAILS_POPUP]=function(){return h.show({parent:"body",template:"<md-dialog class='business-details-changer-popup'>\n                    <business-details-changer />\n                   </md-dialog>",controllerAs:"$ctrl",biDialogName:"",autoWrap:!1})},f[n.IMAGE_UPSCALE_MODAL]=function(e){return h.show({parent:"body",templateUrl:"views/builder/image-upscale-modal.html",controllerAs:"$ctrl",controller:c,clickOutsideToClose:!0,biDialogName:m.CONSUMER_DIALOGS.IMAGE_UPSCALE_MODAL,locals:e})},f[n.TIME_TO_PUBLISH_POPUP]=function(){return h.showFirstTimeNotice({heading:d.instant("popups.time-to-publish.heading"),text:d.instant("popups.time-to-publish.text"),acceptButtonText:d.instant("general.got-it"),icon:"time-to-publish.gif",hideFirstTimeCheckBox:!0,biDialogName:m.CONSUMER_DIALOGS.TIME_TO_PUBLISH})},f[n.PALETTE_COLOR_DIALOG_POPUP]=function(e,t,i){var n={color:"#000000",colorType:a.ePaletteColorPickerStates.mainColor,state:o.ePaletteColorDialogStates.NORMAL,layout:"top bottom",onColorSelected:angular.noop},r=angular.extend(n,i);return h.show({parent:"body",templateUrl:"views/design/palette-color-dialog.html",controllerAs:"$ctrl",controller:o.PaletteColorDialog,clickOutsideToClose:!0,onShowing:function(t,i){e&&e(r.$event,t,i)},onRemoving:function(e,i){t&&t(e,i)},locals:r,biDialogName:m.CONSUMER_DIALOGS.PALETTE_COLOR})},f[n.COLOR_MODE_DIALOG_POPUP]=function(e,t){return h.show({parent:"body",templateUrl:"views/design/color-mode-dialog.html",controllerAs:"$ctrl",controller:r.ColorModeDialog,clickOutsideToClose:!0,onShowing:function(t,i){e&&e(null,t,i)},onRemoving:function(e,i){t&&t(e,i)},locals:{},biDialogName:m.CONSUMER_DIALOGS.COLOR_SETTINGS})},f[n.SESSION_EXPIRED_POPUP]=function(){return h.showNegativeConfirmation({text:d.instant("error.session-expired.text"),acceptButtonText:d.instant("error.session-expired.ok-button"),biDialogName:m.CONSUMER_DIALOGS.SESSION_EXPIRED,icon:"fail.gif"}).then(function(){return t.open("https://users.wix.com/signin?loginDialogContext=login&referralInfo=ONBOARDING&postLogin=https://www.wix.com/my-account/sites/","_blank")})},f[n.STORY_CONFLICTING_CHANGES_POPUP]=function(){return h.showPositiveConfirmation({text:d.instant("error.conflicting-changes.text"),acceptButtonText:d.instant("error.conflicting-changes.ok-button"),icon:"reload.gif",biDialogName:m.CONSUMER_DIALOGS.CONFLICTING_CHANGES,noClose:!0,autoHideTimeout:6e4}).then(function(){return t.location.reload()})},f[n.SITE_NOT_MANAGED_BY_OB_POPUP]=function(){return h.showPositiveConfirmation({heading:d.instant("error.site-not-managed-by-ob.heading"),text:d.instant("error.site-not-managed-by-ob.text"),acceptButtonText:d.instant("error.site-not-managed-by-ob.ok-button"),icon:"wrong-way.gif",noClose:!0,biDialogName:m.CONSUMER_DIALOGS.SITE_NOT_MANAGED_BY_OB}).then(function(){var e=u.getStoryMetadata(),i=e&&e.htmlEditorUri;i&&(t.location.href=i)})},f[n.STORY_ARCHIVED_POPUP]=function(){return h.showPositiveConfirmation({text:d.instant("error.story-archived.text"),acceptButtonText:"",icon:"fail.gif",noClose:!0,biDialogName:m.CONSUMER_DIALOGS.STORY_ARCHIVED}).then(function(){return t.location.href=s.PublishDialog.MyAccountPrefix})},f[n.SAVE_AS_TEMPLATE_FAIL]=function(){return h.showNegativeConfirmation({text:d.instant("error.save-as-template.text"),acceptButtonText:d.instant("error.save-as-template.ok-button"),icon:"fail.gif",biDialogName:m.CONSUMER_DIALOGS.SAVE_AS_TEMPLATE_ERROR})},f[n.PUBLISH_FAILED_POPUP]=function(){return h.showNegativeConfirmation({heading:m.$translate.instant("popups.publish-failed.heading"),text:m.$translate.instant("popups.publish-failed.text"),acceptButtonText:m.$translate.instant("popups.publish-failed.accept"),rejectButtonText:m.$translate.instant("general.cancel"),icon:"fail.gif",biDialogName:m.CONSUMER_DIALOGS.PUBLISH_FAILED})},f[n.CANT_REMOVE_HEADER_POPUP]=function(){return h.showPositiveConfirmation({heading:d.instant("popups.cant-delete-header.heading"),text:d.instant("popups.cant-delete-header.text"),acceptButtonText:d.instant("general.got-it"),icon:"fail.gif",biDialogName:m.CONSUMER_DIALOGS.FIELD_VISIBILITY_SHOW_HIDE})},f[n.CANT_REMOVE_FOOTER_POPUP]=function(){return h.showPositiveConfirmation({heading:d.instant("popups.cant-delete-footer.heading"),text:d.instant("popups.cant-delete-footer.text"),acceptButtonText:d.instant("general.got-it"),icon:"fail.gif",biDialogName:m.CONSUMER_DIALOGS.FIELD_VISIBILITY_SHOW_HIDE})},f[n.AUTOSAVE_POPUP]=function(){return h.showPositiveConfirmation({heading:d.instant("popups.autosave.heading"),text:d.instant("popups.autosave.text"),acceptButtonText:d.instant("general.got-it"),icon:"autosave.gif",biDialogName:m.CONSUMER_DIALOGS.AUTOSAVE})},f[n.SIGN_UP]=function(){return h.showPositiveConfirmation({heading:d.instant("popups.save-your-site.heading"),text:d.instant("popups.save-your-site.text"),acceptButtonText:d.instant("general.sign-up"),icon:"signup.gif",biDialogName:m.CONSUMER_DIALOGS.SAVE_YOUR_SITE})},f[n.SAVE_VALIDATION_ERROR_POPUP]=function(){return h.showPositiveConfirmation({text:d.instant("error.save-failure.text"),acceptButtonText:d.instant("error.save-failure.ok-button"),icon:"reload.gif",biDialogName:m.CONSUMER_DIALOGS.SAVE_VALIDATION_ERROR,noClose:!0,autoHideTimeout:6e4}).then(function(){m.exitNotification.off(),t.location.reload()})},f[n.DS_SAVE_PUBLISH_DISABLED_ON_SERVER_POPUP]=function(){return h.showPositiveConfirmation({text:d.instant("error.publish-disabled-on-server.text"),acceptButtonText:d.instant("error.publish-disabled-on-server.ok-button"),icon:"fail.gif",biDialogName:m.CONSUMER_DIALOGS.DS_SAVE_PUBLISH_DISABLED_ON_SERVER,noClose:!0})},f[n.EXISTING_USER_FIRST_TIME_MOBILE_EDITOR_POPUP]=function(){return h.showMultiPagePopup({heading:d.instant("popups.welcome-to-mobile-editor-existing.heading"),headingNext:d.instant("popups.welcome-to-mobile-editor-existing.heading-next"),text:d.instant("popups.welcome-to-mobile-editor-existing.text"),textNext:d.instant("popups.welcome-to-mobile-editor-existing.text-next"),nextButtonText:d.instant("general.continue"),cancelButtonText:d.instant("general.no-thanks"),gotItButtonText:d.instant("popups.edit-now"),icon:"EditMobileFirstTime.svg",iconNext:"EditMobileFirstTime2.svg",showCancelButton:!0,biEvents:m.firstTimeInMobileBiEvents,dialogName:m.CONSUMER_DIALOGS.WELCOME_TO_MOBILE_EDITOR_EXISTING})},f[n.DELETE_CHAT_POPUP]=function(){return h.showNegativeConfirmation({heading:m.$translate.instant("popups.delete-chat.heading"),text:m.$translate.instant("popups.delete-chat.text"),acceptButtonText:m.$translate.instant("general.delete"),rejectButtonText:m.$translate.instant("general.cancel"),icon:"delete-single.gif",biDialogName:m.CONSUMER_DIALOGS.DELETE_CHAT})},f[n.DELETE_TPA_PAGE_POPUP]=function(e){return h.showNegativeConfirmation({heading:m.$translate.instant("popups.tpa-delete-confirmation.heading",{TPA:m.$translate.instant("builder.apps-panel.app.title."+e)}),text:m.$translate.instant("popups.tpa-delete-confirmation.text"),acceptButtonText:m.$translate.instant("general.delete"),rejectButtonText:m.$translate.instant("general.cancel"),biDialogName:m.CONSUMER_DIALOGS.TPA_PAGE_DELETE_CONFIRM})},f[n.DELETE_ALL_TPA_WIDGETS_POPUP]=function(e){return h.showNegativeConfirmation({heading:m.$translate.instant("popups.tpa-delete-confirmation.heading",{TPA:m.$translate.instant("builder.apps-panel.app.title."+e)}),text:m.$translate.instant("popups.tpa-delete-all-widgets-confirmation.text"),acceptButtonText:m.$translate.instant("general.delete"),rejectButtonText:m.$translate.instant("general.cancel"),biDialogName:m.CONSUMER_DIALOGS.TPA_PAGE_DELETE_CONFIRM})},f[n.IMPORT_PAGE_SUCCESS_POPUP]=function(){return h.showPositiveConfirmation({heading:d.instant("popups.import-page-success.heading"),text:d.instant("popups.import-page-success.text"),acceptButtonText:d.instant("general.got-it"),icon:"success.gif",biDialogName:m.CONSUMER_DIALOGS.IMPORT_PAGE_SUCCESS})},f[n.IMPORT_PAGE_FAILED_POPUP]=function(){return h.showNegativeConfirmation({heading:d.instant("popups.import-page-failed.heading"),text:d.instant("popups.import-page-failed.text"),acceptButtonText:d.instant("general.got-it"),icon:"fail.gif",biDialogName:m.CONSUMER_DIALOGS.IMPORT_PAGE_FAILED})}}return e.$inject=["$rootScope","$window","exitNotification","$translate","applicationState","consumerBiLogger","CONSUMER_DIALOGS","CcDialogBuilder"],e.prototype.showDialog=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=this.popups[e];if(!n)throw new Error("Couldn't launch popup: Popup doesn't exist");return n.apply(void 0,t)},e}();t.ConsumerDialogs=d,angular.module("siteGeneratorStaticsConsumerAppInternal").service("consumerDialogs",d)},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.namespaces={BUTTONS:"buttons",SOCIALS:"socials",PUBLISH:"publish",TPA:"tpa",IMPORT:"import",LAYOUT:"layout"},t.issueTypeIds=n({UNLINKED_BUTTON:"unlinked_button",SOCIALS_DEFAULT_LINKS:"socials_default_links",PUBLISH_SITE_INTERVAL:"publish_site_interval"},core.TpaTypes,{IMPORTED_CONTENT:"imported_content",IMPORTED_IMAGES:"imported_images",BETTER_LAYOUT:"better_layout",IMAGE_UPSCALE:"image_upscale"});var o=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u){this.smartAssistButtonsIssueTypes=e,this.smartAssistSocialsIssueTypes=t,this.smartAssistPublishIssueTypes=i,this.smartAssistTpaIssueTypes=n,this.smartAssistImportIssueTypes=o,this.smartAssistLayoutIssueTypes=r,this.smartAssistButtonsIssueUIDataBuilders=a,this.smartAssistSocialsIssueUIDataBuilders=s,this.smartAssistPublishIssueUIDataBuilders=l,this.smartAssistTpaIssueUIDataBuilders=c,this.smartAssistImportIssueUIDataBuilders=d,this.smartAssistLayoutIssueUIDataBuilders=u,this.populatePotentialIssues(),this.populateIssueUIDataBuilders()}return e.$inject=["smartAssistButtonsIssueTypes","smartAssistSocialsIssueTypes","smartAssistPublishIssueTypes","smartAssistTpaIssueTypes","smartAssistImportIssueTypes","smartAssistLayoutIssueTypes","smartAssistButtonsIssueUIDataBuilders","smartAssistSocialsIssueUIDataBuilders","smartAssistPublishIssueUIDataBuilders","smartAssistTpaIssueUIDataBuilders","smartAssistImportIssueUIDataBuilders","smartAssistLayoutIssueUIDataBuilders"],e.prototype.getPotentialIssues=function(){return this.potentialIssues},e.prototype.getIssueUIDataBuilder=function(e){return this.issueUIDataBuilders[e]},e.prototype.populatePotentialIssues=function(){this.potentialIssues={},this.populatePotentialIssueNamespace(t.namespaces.BUTTONS,this.smartAssistButtonsIssueTypes),this.populatePotentialIssueNamespace(t.namespaces.SOCIALS,this.smartAssistSocialsIssueTypes),this.populatePotentialIssueNamespace(t.namespaces.PUBLISH,this.smartAssistPublishIssueTypes),this.populatePotentialIssueNamespace(t.namespaces.TPA,this.smartAssistTpaIssueTypes),this.populatePotentialIssueNamespace(t.namespaces.IMPORT,this.smartAssistImportIssueTypes),this.populatePotentialIssueNamespace(t.namespaces.LAYOUT,this.smartAssistLayoutIssueTypes)},e.prototype.populatePotentialIssueNamespace=function(e,t){this.potentialIssues[e]={id:e,issues:t.reduce(function(e,t){return n({},e,((i={})[t.id]=t,i));var i},{})}},e.prototype.populateIssueUIDataBuilders=function(){this.issueUIDataBuilders=n({},this.smartAssistButtonsIssueUIDataBuilders,this.smartAssistSocialsIssueUIDataBuilders,this.smartAssistPublishIssueUIDataBuilders,this.smartAssistTpaIssueUIDataBuilders,this.smartAssistImportIssueUIDataBuilders,this.smartAssistLayoutIssueUIDataBuilders)},e}();t.SmartAssistConf=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistConf",o)},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o,r=i(231),a=i(232),s=i(233);!function(e){e[e.Generic=0]="Generic",e[e.Tpa=1]="Tpa",e[e.Color=2]="Color",e[e.FitMode=3]="FitMode",e[e.UnFitMode=4]="UnFitMode",e[e.InterleaveFitMode=5]="InterleaveFitMode",e[e.MED=6]="MED"}(o=t.PresetsStrategyType||(t.PresetsStrategyType={})),function(e){e[e.Add=0]="Add",e[e.Change=1]="Change"}(t.PresetsStrategyMode||(t.PresetsStrategyMode={}));var l=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I){this.flags=e,this.designKit=t,this.applicationState=i,this.defaultsService=n,this.presetHelpers=o,this.presetPreviewSorter=r,this.presetPreviewGenerator=a,this.mobileSectionValidator=s,this.fitModePresetsStrategyOptions=l,this.medPresetsStrategyOptions=c,this.mediaOverrideManager=d,this.sectionLayoutSuggestions=u,this.sitePartTypes=p,this.$p=g,this.slideShowService=h,this.$q=m,this.$window=f,this.presetSettingsService=v,this.modelTreeHelpers=S,this.mediaOpacity=y,this.clientTopology=T,this.colorationPattern=b,this.nodeFetcher=I}return e.$inject=["flags","designKit","applicationState","defaultsService","presetHelpers","presetPreviewSorter","presetPreviewGenerator","mobileSectionValidator","fitModePresetsStrategyOptions","medPresetsStrategyOptions","mediaOverrideManager","sectionLayoutSuggestions","sitePartTypes","$p","slideShowService","$q","$window","presetSettingsService","modelTreeHelpers","mediaOpacity","clientTopology","colorationPattern","nodeFetcher"],e.prototype.createFromNode=function(e,t){var i=this.flags.refactorOSIActions?this.nodeFetcher.getNodeSitePart(e):this.modelTreeHelpers.getNodeSitePart(e),r=n({},t,{node:e,sitePart:i});if(this.flags.sectionMedia&&"blank"!==e.id&&this.mediaOverrideManager.isFitMode(e))return this.create(o.InterleaveFitMode,r);var a=e.isTpaNode&&e.isTpaNode()?o.Tpa:o.Generic;return this.create(a,r)},e.prototype.create=function(e,t){switch(e){case o.Generic:return this.createGenericStrategyFromMode(t.node,t.strategyMode,t.sitePart,t.isBackgroundSupported,t.isChangeBgPermutationSupported);case o.Tpa:return this.createTPAStrategy(t.strategyMode);case o.Color:return this.createColorStrategy();case o.FitMode:return this.createGenericStrategy(this.fitModePresetsStrategyOptions.create(!0,t.node));case o.UnFitMode:return this.createGenericStrategy(this.fitModePresetsStrategyOptions.create(!1,t.node));case o.InterleaveFitMode:return this.createGenericStrategy(this.fitModePresetsStrategyOptions.createInterleaving(t.node));case o.MED:return this.createGenericStrategy(this.medPresetsStrategyOptions.create())}return null},e.prototype.createGenericStrategyFromMode=function(e,t,i,n,o){var r=this;void 0===n&&(n=!0),void 0===o&&(o=!0);var a={strategyMode:t,node:e,isChangeBgPermutationSupported:o,isBackgroundSupported:n,sitePart:i,orderPresets:function(e,t){return r.presetPreviewSorter.sort(e,t[0])}};return this.createGenericStrategy(a)},e.prototype.createGenericStrategy=function(e){return new s.GenericPresetsStrategy(e,this.defaultsService,this.applicationState,this.presetHelpers,this.presetPreviewGenerator,this.sectionLayoutSuggestions,this.$window,this.$q,this.mobileSectionValidator,this.flags,this.sitePartTypes,this.presetSettingsService)},e.prototype.createTPAStrategy=function(e){var t={strategyMode:e,isBackgroundSupported:!1,isChangeBgPermutationSupported:!1};return new a.TpaPresetsStrategy(t,this.defaultsService,this.presetHelpers,this.$p,this.clientTopology,this.flags)},e.prototype.createColorStrategy=function(){return new r.ColoredPresetsStrategy(this.presetHelpers,this.designKit,this.$p,this.flags,this.slideShowService,this.mediaOpacity,this.colorationPattern)},e}();t.PresetsStrategyFactory=l,angular.module("siteGeneratorBuilderInternal").service("presetsStrategyFactory",l)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);t.PresetMediaTypes={SHAPE:0,COAST2COAST:1,IMAGE:2,AGGREGATOR:3,COLUMNBG:4};var o=function(){function e(e,t,i,n,o,r,a,s,l,c,d){this.flags=e,this.mediaOverride=t,this.simpleSolutionManager=i,this.solutionFetcher=n,this.modelTree=o,this.layoutSelectionStoreProvider=r,this.sectionBackgroundService=a,this.patternService=s,this.previewColors=l,this.$translate=c,this.solutionManager=d,this.MEDIA_DEFAULTS={base:{Slideshow:[{name:"slideshow",displayName:this.$translate.instant("editor.media-settings.gallery-name.slideshow"),properties:{}}],"Grid (with margins)":[{name:"grid6",displayName:this.$translate.instant("editor.media-settings.gallery-name.grid6"),properties:{columns:6}},{name:"grid4",displayName:this.$translate.instant("editor.media-settings.gallery-name.grid4"),properties:{columns:4}},{name:"grid3",displayName:this.$translate.instant("editor.media-settings.gallery-name.grid3"),properties:{columns:3}},{name:"grid2",displayName:this.$translate.instant("editor.media-settings.gallery-name.grid2"),properties:{columns:2}}],"Animated Grid":[{name:"animatedgrid3",displayName:this.$translate.instant("editor.media-settings.gallery-name.animatedgrid3"),properties:{columns:3}}],Collage:[{name:"collage",displayName:this.$translate.instant("editor.media-settings.gallery-name.collage"),properties:{columns:3,maxImageSize:2}}],Slider:[{name:"slider",displayName:this.$translate.instant("editor.media-settings.gallery-name.slider"),properties:{}}],Thumbnails:[{name:"thumbnails",displayName:this.$translate.instant("editor.media-settings.gallery-name.thumbnails"),properties:{}}],Masonry:[{name:"masonry",displayName:this.$translate.instant("editor.media-settings.gallery-name.masonry"),properties:{columns:3}}],Accordion:[{name:"accordion",displayName:this.$translate.instant("editor.media-settings.gallery-name.accordion"),properties:{}}]},coast2coast:{"Fullwidth Collage":[{name:"fullwidthcollage_b",displayName:this.$translate.instant("editor.media-settings.gallery-name.fullwidthcollage_b"),properties:{columns:4}},{name:"fullwidthcollage_c",displayName:this.$translate.instant("editor.media-settings.gallery-name.fullwidthcollage_c"),properties:{columns:3}}],"Strip Slideshow":[{name:"stripslideshow",displayName:this.$translate.instant("editor.media-settings.gallery-name.stripslideshow"),properties:{}}],"Strip Showcase":[{name:"stripshowcase",displayName:this.$translate.instant("editor.media-settings.gallery-name.stripshowcase"),properties:{}}],Accordion:[{name:"stripaccordion",displayName:this.$translate.instant("editor.media-settings.gallery-name.stripaccordion"),properties:{stretch:"coast2coast"}}],stripmasonry:[{name:"stripmasonry",displayName:this.$translate.instant("editor.media-settings.gallery-name.stripmasonry"),properties:{columns:3}}]}},this.imageAlignmentOptions=[{label:this.$translate.instant("media.image-alignment-options.top"),value:"top"},{label:this.$translate.instant("media.image-alignment-options.center"),value:"center"},{label:this.$translate.instant("media.image-alignment-options.bottom"),value:"bottom"}]}return e.$inject=["flags","mediaOverride","simpleSolutionManager","solutionFetcher","modelTree","layoutSelectionStoreProvider","sectionBackgroundService","patternService","previewColors","$translate","solutionManager"],e.prototype.findSegment=function(e){var t=this.solutionFetcher.getSectionSolution.bind(this.solutionFetcher)(e.containerPageId,this.modelTree.findIdentifyingNodeId(e));return this.solutionManager.getSegmentForNode(t,e)},e.prototype.getAlignmentOption=function(e){return n.find(this.imageAlignmentOptions,{value:e})},e.prototype.listAlignmentOptions=function(){return this.imageAlignmentOptions},e.prototype.isFitMode=function(e){var t=this.getGallery(e);return"full"===(n.get(t,["properties","displayMode"])||"fill")},e.prototype.setFitMode=function(e,t){var i=this.getGallery(e);i&&(i.properties.displayMode=t?"full":"fill",this.setGallery(e,i))},e.prototype.isCoast2Coast=function(e){return this.getAllowedMediaOverride(e)===t.PresetMediaTypes.COAST2COAST},e.prototype.getAvailableGalleries=function(e){var t=this,i=this.isCoast2Coast(e),o=this.findSegment(e),r=o.getLE(),a=r.getMediaLayout(),s=this.mediaOverride.makeListOfValidatedGalleries(a.argIndex,o),l=this.mediaOverride.getGallery(r,a,o);l&&l.properties&&(l.properties=n.omit(l.properties,"zIndex"));var c=i?this.MEDIA_DEFAULTS.coast2coast:this.MEDIA_DEFAULTS.base;return n(s.valid).filter(function(e){return c[e.name]}).map(function(e){return n(c[e.name]).map(function(o){var r=n.clone(o.properties);i&&(r.stretch="coast2coast");var a=t.mediaOverride.transformGallery(e,r);if(!r.columns||r.columns===a.properties.numCols||r.columns===a.properties.numOfCells)return{gallery:a,selected:(t.flags.lodash4?n.isEqual:n.eq)(a,l),cssKey:o.name,name:o.displayName||e.name}}).filter().value()}).flatten().sortBy(function(e){return e.selected?-1:0}).value()},e.prototype.setGallery=function(e,t){if("GeneralDescription"!==e.getContentElementType()){var i=this.findSegment(e);if(!i)return cc.MediaPreviewType.SingleImage;var n=i.getLE(),o=n.getMediaLayout();return this.mediaOverride.setGallery(n,o,i,t)}},e.prototype.getGallery=function(e){if(e.isList()&&!(e=e.children.find(function(e){return!e.isListHeader()&&!e.isListFooter()})))return null;var t=this.findSegment(e);if(!t)return null;var i=t.getLE(),n=i.getMediaLayout();return i&&n&&this.mediaOverride.getGallery(i,n,t)},e.prototype.setMediaOverride=function(e,t){if("GeneralDescription"!==e.getContentElementType()){var i=this.findSegment(e),n=i.getLE(),o=n.getMediaLayout();return this.mediaOverride.setGalleryByNameAndValues(n,o,i,t,{})}},e.prototype.getFieldDataType=function(e,t){return e===core.ElementSubTypes.Image?this.getSelectedMediaName(t):e},e.prototype.getSelectedMediaName=function(e){var t=this.getCurrentSelectedMediaPreviewType(e);return this.getSelectedMediaNameByTabIndex(t)},e.prototype.getSelectedMediaNameByTabIndex=function(e){return e===cc.MediaPreviewType.ExtVideo||e===cc.MediaPreviewType.Video?"video":"image"},e.prototype.getCurrentSelectedMediaPreviewType=function(e){if("GeneralDescription"===e.getContentElementType())return e.contentElement.getValuesByMediaType().shape&&cc.MediaPreviewType.Shape||cc.MediaPreviewType.Clipart;var t=this.layoutSelectionStoreProvider.getLayoutSelectionStore(e.containerPageId).getOverrideByNode("media",e,"_preferred"),i=t&&n.values(t),o=n.first(i);return this.getMediaTypeFromGallery(o,e)},e.prototype.getMediaTypeFromGallery=function(e,i){var n=i?this.getAllowedMediaOverride(i):void 0,o=e&&e.name||"Image";return n===t.PresetMediaTypes.COLUMNBG&&"Wix Video"!==o?cc.MediaPreviewType.SingleImage:-1!==this.mediaOverride.imageGalleriesTypes.indexOf(o)?cc.MediaPreviewType.MultipleImages:"video"===o?cc.MediaPreviewType.ExtVideo:"Strip Video"===o?cc.MediaPreviewType.Video:"Wix Video"===o?cc.MediaPreviewType.Video:n===t.PresetMediaTypes.SHAPE?this.getCE(i).getValuesByMediaType().shape&&cc.MediaPreviewType.Shape||cc.MediaPreviewType.Clipart:cc.MediaPreviewType.SingleImage},e.prototype.getCE=function(e){return(e.isList()&&e.children.length?e.children[0]:e).contentElement},e.prototype.typeToLabel=function(e){switch(e){case cc.MediaPreviewType.SingleImage:return this.$translate.instant("editor.media-settings.types.image");case cc.MediaPreviewType.Shape:case cc.MediaPreviewType.Clipart:return this.$translate.instant("editor.media-settings.types.shape");case cc.MediaPreviewType.ExtVideo:case cc.MediaPreviewType.Video:return this.$translate.instant("editor.media-settings.types.video");case cc.MediaPreviewType.MultipleImages:return this.$translate.instant("editor.media-settings.types.gallery")}},e.prototype.getCurrentSelectedMediaTypeLabel=function(e){var t=this.getCurrentSelectedMediaPreviewType(e);return this.typeToLabel(t)},e.prototype.getAllowedMediaOverrideForSingleOrList=function(e){return this.getAllowedMediaOverride(e.isListHeader()?e:this.modelTree.findIdentifyingNode(e))},e.prototype.getAllowedMediaOverride=function(e){return"GeneralDescription"===e.getContentElementType()?t.PresetMediaTypes.SHAPE:this.layoutSelectionStoreProvider.getLayoutSelectionStore(e.containerPageId).getOverrideByNode("media",e,"allowedMediaOverrides")},e.prototype.getMediaValues=function(e){return this.extractActiveMediaValues(e,this.getCurrentSelectedMediaPreviewType(e))},e.prototype.getPatternMediaForNode=function(e){var t,i=this.sectionBackgroundService.getBackground(e);if("pattern"===i.mediaType)t=i;else{var n=this.patternService.getPatternOptions(1,!1);if(0===n.length)return null;t=n[0]}return this.convertBgPatternToMedia(e,t)},e.prototype.convertBgPatternToMedia=function(e,t){var i=this.simpleSolutionManager.getSectionSolution(e.containerPageId,this.modelTree.findIdentifyingNodeId(e))[0],n=this.patternService.getPatternItem({mediaId:t.mediaId},i);return n.rgbBackgroundColor=this.previewColors.getRGBColor(n.backgroundColor.display),n},e.prototype.getAllMediaValues=function(e){var t=n(e.contentElement.allValuesByMediaType).values().flatten()[this.flags.lodash4?"uniqBy":String("unique")]("fileName").value();if(this.flags.sectionMedia){var i=this.getPatternMediaForNode(e);i&&t.push(i)}return t},e.prototype.getActiveMediaValue=function(e){var t=this.getMediaValues(e);return t&&t.length&&t[0]},e.prototype.extractActiveMediaValues=function(e,t){var i=this.convertToMediaTypeName(t);return e.contentElement.allValuesByMediaType[i]},e.prototype.convertToMediaTypeName=function(e){var t=cc.MediaPreviewType[e];return"SingleImage"===t?"image":"MultipleImages"===t?"image":""+t.slice(0,1).toLowerCase()+t.slice(1)},e.MO_IMAGE="Image",e.MO_STRIP_IMAGE="Strip Image",e.MO_SLIDESHOW="Slideshow",e.MO_STRIP_SLIDESHOW="Strip Slideshow",e.MO_VIDEO="video",e.MO_STRIP_VIDEO="Strip Video",e.MO_WIX_VIDEO="Wix Video",e}();t.MediaOverrideManager=o,angular.module("siteGeneratorEditorInternal").service("mediaOverrideManager",o)},function(e,t,i){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((i=n[o])===t||i.fn===t){n.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i)for(var n=0,o=(i=i.slice(0)).length;n<o;++n)i[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ValueChange=0]="ValueChange",e[e.TypeChange=1]="TypeChange",e[e.VisibilityChange=2]="VisibilityChange",e[e.AlignmentChange=3]="AlignmentChange",e[e.GalleryLayoutChange=4]="GalleryLayoutChange",e[e.VideoSettingsChange=5]="VideoSettingsChange",e[e.MediaTitleChange=6]="MediaTitleChange",e[e.MediaDescriptionChange=7]="MediaDescriptionChange",e[e.ParagraphColumnsToggle=8]="ParagraphColumnsToggle",e[e.OverrideTextColor=9]="OverrideTextColor",e[e.SetMapStyle=10]="SetMapStyle"}(t.IEditEventType||(t.IEditEventType={}));var n=function(){function e(){}return e.FIELD_CHANGED="fieldChanged",e.NODE_FIELD_CHANGED="nodeFieldChanged",e.EDIT_LIST_ITEM="editListItem",e.ITEM_TO_PAGE="itemToPage",e.EDIT_SOCIAL="editSocial",e.CLOSE_PANEL="closePanel",e.BACKGROUND_CHANGED="backgroundChanged",e}();t.EditorEvents=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaSizeOptions={Box:"Box",Cropped:"Cropped",CroppedHeader:"CroppedHeader",Uncropped:"Uncropped",Strip:"Strip",StripHeader:"StripHeader",Column:"Column",Background:"Background",BackgroundHeader:"BackgroundHeader",BackgroundList:"BackgroundList",BackgroundFull:"BackgroundFull"},t.MediaLayoutFormats={Inline:"Inline",Strip:"Strip",Column:"Column",Background:"Background"}},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.previewInBuilder="preview in builder",e.previewInWelcomeTour="preview in welcome tour",e.builder="builder"}(t.BIModeType||(t.BIModeType={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){return e.on(t,i),{destroy:function(){return e.off(t,i)}}}},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(93);t.RestoreStrategyBuilderFactory=n.default;var o=i(97);t.PollPayloadBuilder=o.default;var r=i(98);t.PollOverrideRestoreStrategyBuilder=r.default},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.CLOSED=0]="CLOSED",e[e.OPENING=1]="OPENING",e[e.OPEN=2]="OPEN"}(n||(n={})),t.default=n},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0);t.PALETTE_DIALOG_OPEN_CLASS="palette-color-dialog-open",t.INVALID_PALETTE_INDEX=-1,t.CUSTOM_PALETTE_INDEX=-2,t.LOGO_PALETTE_INDEX=-3;var r="#ffffff";t.ColorationMode=ThemeChooser.COLORATION_METHOD_TYPE,t.ColorationLevel=ThemeChooser.COLORATION_LEVEL;var a=i(2);function s(e){return e&&void 0!==e.colors}t.isPalette=s;!function(){function e(e,t,i){this.colors=e,this.blackAndWhite=t,this.utils=i,this.isColorLight=e.map(function(e){return i.isLightColor(e,t)}),this.firstLight=this.isColorLight.indexOf(!0),this.firstDark=this.isColorLight.indexOf(!1)}e.prototype.getExistingLight=function(){var e=this.colors[this.firstLight]||r;return this.firstLight=this.isColorLight.indexOf(!0,this.firstLight+1),e},e.prototype.getExistingDark=function(){var e=this.colors[this.firstDark]||"#181818";return this.firstDark=this.isColorLight.indexOf(!1,this.firstDark+1),e},e.prototype.getLight=function(){return-1!==this.firstLight?this.getExistingLight():this.utils.toLightColor(this.getExistingDark(),this.blackAndWhite)},e.prototype.getDark=function(){return-1!==this.firstDark?this.getExistingDark():this.utils.toDarkColor(this.getExistingLight(),this.blackAndWhite)},e.prototype.getFirst=function(){return-1===this.firstDark||-1!==this.firstLight&&this.firstLight<this.firstDark?this.getExistingLight():this.getExistingDark()},e.prototype.getComplementary=function(e){return this.utils.isLightColor(e,this.blackAndWhite)?this.getDark():this.getLight()}}();var l=function(){function e(e,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f){this.consumerBiLogger=e,this.logoColorService=i,this.initService=n,this.themeChooser=o,this.themeChooserUtils=r,this.contentManager=a,this.chroma=s,this.colorApi=l,this.localStorageService=c,this.$timeout=d,this.$q=u,this.$log=p,this.storyServices=g,this.layoutSelectionStoreProvider=h,this.paletteGenerator=m,this.flags=f,this.activePaletteIndex=t.INVALID_PALETTE_INDEX,this.shouldUpdatePalettes=!1,this.isUpdatingPalettes=!1,this.isSwitchingMainColor=!1}return e.$inject=["consumerBiLogger","logoColorService","initService","themeChooser","themeChooserUtils","contentManager","chroma","colorApi","localStorageService","$timeout","$q","$log","storyServices","layoutSelectionStoreProvider","paletteGenerator","flags"],e.prototype.initialize=function(){var e=this;return this.initPromise?this.initPromise:(this.initPromise=this.initService.loaded().then(function(){return e.themeChooser.initialize()}).then(function(){return e.$timeout(function(){return e.loadStoryColoration()})}).then(function(){return e.listenToUndoRedo()}),this.initPromise)},e.prototype.setShouldUpdatePalettes=function(){this.shouldUpdatePalettes=!0},e.prototype.resetStoryColoration=function(){this.storyColoration=this.storyServices.story.coloration,this.storyColoration||(this.storyServices.story.coloration=this.storyColoration={})},e.prototype.loadStoryColoration=function(){this.storyColoration=this.storyServices.story.coloration,this.storyColoration||(this.storyServices.story.coloration=this.storyColoration={},this.resetColoration()),this.adjustCustomMainColorForNewColoration(),this.checkIntegrity(),this.shouldUpdatePalettes=!0},e.prototype.checkIntegrity=function(){var e=this.themeChooser.coloration.getActiveKitColors(),t=this.storyColoration.activePalette;this.arePalettesEqual(e,t)||(this.$log.error("colorationUtils: integrity check failed"),this.themeChooserUtils.logColors("error","colorationUtils: expected colors '"+JSON.stringify(t.colors)+"'",o.values(t.colors)),this.themeChooserUtils.logColors("error","colorationUtils: actual colors '"+JSON.stringify(e)+"'",o.values(e)),this.storyColoration.activePalette={colors:e,numOfColors:this.numOfColors(e),creator:"error"})},e.prototype.adjustCustomMainColorForNewColoration=function(){var e=this.themeChooser.coloration.getActiveKitColors(),t=this.themeChooser.coloration.getActiveKitDefaultColors(),i=this.themeChooserUtils.isNewColorationPalette(e)===this.themeChooserUtils.isNewColorationPalette(t),n=this.storyColoration,o=n.activePalette,r=n.customMainColor,a=n.logoPalette;this.arePalettesEqual(o,a)||!!r!==!this.areColorsEqual(e.mainColor,t.mainColor)&&i&&(r||(this.storyColoration.customMainColor=e.mainColor))},e.prototype.listenToUndoRedo=function(){var e=this;a.PubSub.subscribe(a.events.STORY_REVISION_CHANGED,function(){return e.loadStoryColoration()})},e.prototype.resetColoration=function(){var e=this.themeChooser.coloration.getActiveKitDefaultColors();this.storyColoration.activePalette={colors:e,creator:"default",numOfColors:this.numOfColors(e)},this.storyColoration.customPalette=null,this.storyColoration.customMainColor=null,this.shouldUpdatePalettes=!0},e.prototype.areKitColorsOverriden=function(){var e=this.themeChooser.coloration.getActiveKitDefaultColors();return!this.arePalettesEqual(e,this.storyColoration.activePalette)},e.prototype.setActivePaletteByIndex=function(e,i){var n;if(this.isPaletteIndexReferringToCalculatedPalette(e))n=this.palettes[e];else if(e===t.CUSTOM_PALETTE_INDEX){var o=this.storyColoration.customPalette;if(!o)return this.$log.error("colorationUtils: cannot set custom palette as active, custom palette doesn't exist"),this.$q.reject();n=o}else{if(e!==t.LOGO_PALETTE_INDEX)return this.$log.error("colorationUtils: palette index is out of range"),this.$q.reject();var r=this.storyColoration.logoPalette;if(!r)return this.$log.error("colorationUtils: cannot set logo palette as active, logo palette doesn't exist"),this.$q.reject();n=r}return this.setActivePaletteIndex(e),this.storyColoration.activePalette=n,this.layoutSelectionStoreProvider.getLayoutSelectionStore().resetFieldColorOverrides(),this.updateActiveKitColors(n,i).then(function(){return a.PubSub.fire(a.events.COLOR_PALETTE_CHANGED)})},e.prototype.updateActiveKitColors=function(e,t){return null!==t?this.themeChooser.coloration.setActiveKitColorsAndMode(e.colors,void 0,!1,t):this.themeChooser.coloration.setActiveKitColors(e.colors)},e.prototype.setActivePaletteIndex=function(e){this.activePaletteIndex=e},e.prototype.getActivePaletteIndex=function(){return this.activePaletteIndex},e.prototype.getActivePalette=function(){return this.storyColoration.activePalette},e.prototype.getCustomPalette=function(){return this.storyColoration.customPalette},e.prototype.getLogoPalette=function(){return this.storyColoration.logoPalette},e.prototype.getLogoRecommendedColorationMode=function(){return this.storyColoration.logoRecommendedColorationMode},e.prototype.getNumPalettes=function(){return this.getPalettes().length+(this.getCustomPalette()?1:0)+(this.getLogoPalette()?1:0)},e.prototype.getMainColor=function(){return this.storyColoration.customMainColor||this.themeChooser.coloration.getActiveKitDefaultColors().mainColor},e.prototype.setCustomMainColor=function(e){this.storyColoration.customMainColor=e,this.shouldUpdatePalettes=!0},e.prototype.switchMainColor=function(e){var t=this;return this.isSwitchingMainColor=!0,this.storyColoration.customMainColor=e,function(e){var i=t.$q.defer();return $("[data-main-color] .p21-color-tag").off("transitionend").one("transitionend",function(){return i.resolve()}),t.$timeout(function(){return i.resolve()}),i.promise}().then(function(){return t.storyColoration.customPalette=null}).then(function(){return t.generatePalettes("selectSimilar")}).finally(function(){t.isSwitchingMainColor=!1})},e.prototype.numOfColors=function(e){return e.fourthColor?6:e.thirdColor?5:e.secondaryColor?4:3},e.prototype.saveLogoPaletteAsCustom=function(){this.activePaletteIndex===t.LOGO_PALETTE_INDEX&&(this.storyColoration.customPalette=this.storyColoration.logoPalette,this.activePaletteIndex=t.CUSTOM_PALETTE_INDEX),this.storyColoration.logoPalette=null},e.prototype.setCustomColors=function(e,i){var o=this,s=n({},e),l=this.numOfColors(s),c=!this.areColorsEqual(this.storyColoration.activePalette.colors.mainColor,s.mainColor),d={colors:s,creator:"custom",numOfColors:l};return 3===l&&this.areColorsEqual(s.white,r)&&this.areColorsEqual(s.black,"#181818")?(this.storyColoration.customPalette=null,this.storyColoration.activePalette=d):(this.storyColoration.customPalette=d,this.storyColoration.activePalette=d,this.activePaletteIndex=t.CUSTOM_PALETTE_INDEX),c&&this.setCustomMainColor(s.mainColor),function(e,t){return o.themeChooserUtils.isNewColorationPalette(e)?o.themeChooser.coloration.setActiveKitColorsForCustomPalette(e):o.themeChooser.coloration.setActiveKitColorsAndMode(e,t)}(s,i).then(function(){return a.PubSub.fire(a.events.COLOR_PALETTE_CHANGED)})},e.prototype.preparePaletteFromLogo=function(e,t){var i,n,o=this;return this.$q.when(e).then(function(e){return i=Date.now(),o.consumerBiLogger.siteDesign.createPaletteFromLogoAlgoStart(t),o.logoColorService.extractLogoColorsFromWixImage(e,function(){n=Date.now(),o.onLogoImageLoaded(i,t)})}).then(function(e){return o.consumerBiLogger.siteDesign.createPaletteFromLogoAlgoSuccess(Date.now()-i,Date.now()-n,"palette extraction",t,o.numOfColors(e.colors)),e})},e.prototype.onLogoImageLoaded=function(e,t){this.consumerBiLogger.siteDesign.createPaletteFromLogoAlgoSuccess(null,Date.now()-e,"image download",t,null)},e.prototype.setLogoColors=function(e){var t=n({},e.colors),i={colors:t,creator:"logo",numOfColors:this.numOfColors(t)};this.storyColoration.logoPalette=i,this.storyColoration.logoRecommendedColorationMode=e.mode,this.storyColoration.logoRecommendedColorationLevel=e.level,this.forgetCustomPaletteIfDupeOfLogo()},e.prototype.useLogoColors=function(e){var i=void 0===e?{}:e,n=i.setColorationMode,o=void 0!==n&&n,r=i.overrideMainColor,s=void 0!==r&&r,l=this.storyColoration,c=l.logoPalette,d=l.logoRecommendedColorationMode,u=l.logoRecommendedColorationLevel;this.storyColoration.activePalette=c,this.activePaletteIndex=t.LOGO_PALETTE_INDEX,s&&this.setCustomMainColor(c.colors.mainColor),this.forgetCustomPaletteIfDupeOfLogo();var p,g=void 0;return o&&(g=null!==d?d:t.ColorationMode.light),p=null!==u?u:null,this.themeChooser.coloration.setActiveKitColorsAndMode(c.colors,g,null,p).then(function(){return a.PubSub.fire(a.events.COLOR_PALETTE_CHANGED)})},e.prototype.forgetCustomPaletteIfDupeOfLogo=function(){this.arePalettesEqual(this.storyColoration.customPalette,this.storyColoration.logoPalette)&&(this.storyColoration.customPalette=null,this.activePaletteIndex===t.CUSTOM_PALETTE_INDEX&&(this.activePaletteIndex=t.LOGO_PALETTE_INDEX))},e.prototype.arePalettesEqual=function(e,t){return!(!e||!t)&&(e=s(e)?e.colors:e,t=s(t)?t.colors:t,this.areColorsEqual(e.mainColor,t.mainColor)&&this.areColorsEqual(e.secondaryColor,t.secondaryColor)&&this.areColorsEqual(e.thirdColor,t.thirdColor)&&this.areColorsEqual(e.fourthColor,t.fourthColor)&&this.areColorsEqual(e.white,t.white)&&this.areColorsEqual(e.black,t.black))},e.prototype.areColorsEqual=function(e,t){return!!e&&!!t&&e.toLowerCase()===t.toLowerCase()||!e&&!t},e.prototype.getActivePaletteIndexBasedOnActiveColorationLevel=function(){var e=this.getColorationLevel();void 0===e&&(e=t.ColorationLevel.colorful);var i=0,n=1,o=2;switch(e){case t.ColorationLevel.plain:return i;case t.ColorationLevel.tinted:case t.ColorationLevel.colorful:return n;case t.ColorationLevel.vibrant:return o;default:return i}},e.prototype.getPaletteColors=function(){return this.storyColoration.activePalette?this.storyColoration.activePalette.colors:this.themeChooser.coloration.getActiveKitColors()},e.prototype.getCurrentState=function(){return{storyColoration:this.storyColoration&&n({},this.storyColoration),palettes:this.palettes&&this.palettes.slice(),activePaletteIndex:this.activePaletteIndex,shouldUpdatePalettes:this.shouldUpdatePalettes}},e.prototype.restoreState=function(e){return Object.assign(this.storyColoration,e.storyColoration),this.palettes=e.palettes,this.activePaletteIndex=e.activePaletteIndex,this.shouldUpdatePalettes=e.shouldUpdatePalettes,this.themeChooser.coloration.setActiveKitColors(this.storyColoration.activePalette.colors).then(function(){return a.PubSub.fire(a.events.COLOR_PALETTE_CHANGED)})},e.prototype.areColorsReadable=function(e){if(!this.areKitColorsOverriden())return!0;var t=this.chroma,i=this.themeChooserUtils,n=e.thirdColor,o=e.fourthColor,r=i.generate6Colors(e).map(function(e){return t(e)}),a=r[0],s=r[1],l=r[2],c=r[3],d=r[4],u=r[5],p=function(e){var i=t(e).luminance();return a.luminance()>=i&&i>=c.luminance()};return a.luminance()>c.luminance()&&3===function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.filter(function(t){return i.isDarkColor(t,e)}).length}(a,s,l,c,d,u)&&t.contrast(a,c)>2.8&&t.contrast(a,d)>2.8&&t.contrast(a,u)>2.8&&t.contrast(c,s)>2.8&&t.contrast(c,l)>2.8&&(!n||p(n))&&(!o||p(o))},e.prototype.makeColorsReadable=function(e){switch(this.numOfColors(e)){case 3:return this.make3ColorsReadable(e);case 4:return this.make4ColorsReadable(e);case 5:return this.make5ColorsReadable(e);case 6:return this.make6ColorsReadable(e)}},e.prototype.make3ColorsReadable=function(e){var t,i,n,o,a,s,l=this.chroma,c=this.themeChooserUtils,d=e.mainColor,u=e.black,p=e.white,g=function(){var e;e=c.generate6Colors({mainColor:d,black:u,white:p}).map(function(e){return l(e)}),t=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5]};if(g(),o.luminance()>t.luminance()){var h=u;u=p,p=h,g()}for(;l.contrast(o,t)<2.8;)u=o.darken(.1).hex(),p=t.brighten(.1).hex(),g();for(var m={black:u,white:p};c.isLightColor(d,m)&&l.contrast(d,"#000000")<2.8;)d=l(d).brighten(.1).hex(),g();for(;c.isDarkColor(d,m)&&l.contrast(d,r)<2.8;)d=l(d).darken(.1).hex(),g();for(;(l.contrast(t,o)<2.8||l.contrast(t,a)<2.8||l.contrast(t,s)<2.8)&&!this.areColorsEqual(p,r);)p=t.brighten(.3).hex(),g();for(;(l.contrast(o,i)<2.8||l.contrast(o,n)<2.8)&&!this.areColorsEqual(u,"#000000");)u=o.darken(.3).hex(),g();return{mainColor:d,black:u,white:p}},e.prototype.make4ColorsReadable=function(e){var t,i,n,o,a,s,l=this.chroma,c=this.themeChooserUtils,d=e.mainColor,u=e.secondaryColor,p=e.black,g=e.white,h=function(){var e;e=c.generate6Colors({mainColor:d,secondaryColor:u,black:p,white:g}).map(function(e){return l(e)}),t=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5]};if(h(),o.luminance()>t.luminance()){var m=p;p=g,g=m,h()}for(;l.contrast(o,t)<2.8;)p=o.darken(.1).hex(),g=t.brighten(.1).hex(),h();for(var f={black:p,white:g};c.isLightColor(d,f)&&l.contrast(d,"#000000")<2.8;)d=l(d).brighten(.1).hex(),h();for(;c.isDarkColor(d,f)&&l.contrast(d,r)<2.8;)d=l(d).darken(.1).hex(),h();for(;c.isLightColor(u,f)&&l.contrast(u,"#000000")<2.8;)u=l(u).brighten(.1).hex(),h();for(;c.isDarkColor(u,f)&&l.contrast(u,r)<2.8;)u=l(u).darken(.1).hex(),h();for(;(l.contrast(t,o)<2.8||l.contrast(t,a)<2.8||l.contrast(t,s)<2.8)&&!this.areColorsEqual(g,r);)g=t.brighten(.3).hex(),h();for(;(l.contrast(o,i)<2.8||l.contrast(o,n)<2.8)&&!this.areColorsEqual(p,"#000000");)p=o.darken(.3).hex(),h();return{mainColor:d,secondaryColor:u,black:p,white:g}},e.prototype.make5ColorsReadable=function(e){var t,i,n,o,a,s,l=this.chroma,c=this.themeChooserUtils,d=e.mainColor,u=e.secondaryColor,p=e.thirdColor,g=e.black,h=e.white,m=function(){var e;e=c.generate6Colors({mainColor:d,secondaryColor:u,thirdColor:p,black:g,white:h}).map(function(e){return l(e)}),t=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5]};if(m(),o.luminance()>t.luminance()){var f=g;g=h,h=f,m()}if(l(p).luminance()>t.luminance()){f=p;p=h,h=f,m()}if(l(p).luminance()<o.luminance()){f=p;p=g,g=f,m()}for(;l.contrast(o,t)<2.8;)g=o.darken(.1).hex(),h=t.brighten(.1).hex(),m();var v={black:g,white:h},S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return c.isDarkColor(e,v)}).length};for(S(d,u,p)>2&&(p=c.toLightColor(p,v),m()),S(d,u,p)<1&&(p=c.toDarkColor(p,v),m());c.isLightColor(d,v)&&l.contrast(d,"#000000")<2.8;)d=l(d).brighten(.1).hex(),m();for(;c.isDarkColor(d,v)&&l.contrast(d,r)<2.8;)d=l(d).darken(.1).hex(),m();for(;c.isLightColor(u,v)&&l.contrast(u,"#000000")<2.8;)u=l(u).brighten(.1).hex(),m();for(;c.isDarkColor(u,v)&&l.contrast(u,r)<2.8;)u=l(u).darken(.1).hex(),m();for(;c.isLightColor(p,v)&&l.contrast(p,"#000000")<2.8;)p=l(p).brighten(.1).hex(),m();for(;c.isDarkColor(p,v)&&l.contrast(p,r)<2.8;)p=l(p).darken(.1).hex(),m();for(;(l.contrast(t,o)<2.8||l.contrast(t,a)<2.8||l.contrast(t,s)<2.8)&&!this.areColorsEqual(h,r);)h=t.brighten(.3).hex(),m();for(;(l.contrast(o,i)<2.8||l.contrast(o,n)<2.8)&&!this.areColorsEqual(g,"#000000");)g=o.darken(.3).hex(),m();return{mainColor:d,secondaryColor:u,thirdColor:p,black:g,white:h}},e.prototype.make6ColorsReadable=function(e){var t,i,n,o,a,s,l=this.chroma,c=this.themeChooserUtils,d=e.mainColor,u=e.secondaryColor,p=e.thirdColor,g=e.fourthColor,h=e.black,m=e.white,f=function(){var e;e=c.generate6Colors({mainColor:d,secondaryColor:u,thirdColor:p,fourthColor:g,black:h,white:m}).map(function(e){return l(e)}),t=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5]};if(f(),o.luminance()>t.luminance()){var v=h;h=m,m=v,f()}if(l(p).luminance()>l(g).luminance()){if(l(p).luminance()>t.luminance()){v=p;p=m,m=v,f()}if(l(g).luminance()<o.luminance()){v=g;g=h,h=v,f()}}else{if(l(g).luminance()>t.luminance()){v=g;g=m,m=v,f()}if(l(p).luminance()<o.luminance()){v=p;p=h,h=v,f()}}for(;l.contrast(o,t)<2.8;)h=o.darken(.1).hex(),m=t.brighten(.1).hex(),f();var S={black:h,white:m},y=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return c.isDarkColor(e,S)}).length};for(y(d,u,p,g)>2&&(g=c.toLightColor(g,S),f()),y(d,u,p,g)>2&&(p=c.toLightColor(p,S),f()),y(d,u,p,g)<2&&(g=c.toDarkColor(g,S),f()),y(d,u,p,g)<2&&(p=c.toDarkColor(p,S),f());c.isLightColor(d,S)&&l.contrast(d,"#000000")<2.8;)d=l(d).brighten(.1).hex(),f();for(;c.isDarkColor(d,S)&&l.contrast(d,r)<2.8;)d=l(d).darken(.1).hex(),f();for(;c.isLightColor(u,S)&&l.contrast(u,"#000000")<2.8;)u=l(u).brighten(.1).hex(),f();for(;c.isDarkColor(u,S)&&l.contrast(u,r)<2.8;)u=l(u).darken(.1).hex(),f();for(;c.isLightColor(p,S)&&l.contrast(p,"#000000")<2.8;)p=l(p).brighten(.1).hex(),f();for(;c.isDarkColor(p,S)&&l.contrast(p,r)<2.8;)p=l(p).darken(.1).hex(),f();for(;c.isLightColor(g,S)&&l.contrast(g,"#000000")<2.8;)g=l(g).brighten(.1).hex(),f();for(;c.isDarkColor(g,S)&&l.contrast(g,r)<2.8;)g=l(g).darken(.1).hex(),f();for(;(l.contrast(t,o)<2.8||l.contrast(t,a)<2.8||l.contrast(t,s)<2.8)&&!this.areColorsEqual(m,r);)m=t.brighten(.3).hex(),f();for(;(l.contrast(o,i)<2.8||l.contrast(o,n)<2.8)&&!this.areColorsEqual(h,"#000000");)h=o.darken(.3).hex(),f();return{mainColor:d,secondaryColor:u,thirdColor:p,fourthColor:g,black:h,white:m}},e.prototype.setColorationMode=function(e,t){return t?this.themeChooser.coloration.setKitColorationMode(t,e,!0):this.themeChooser.coloration.setActiveKitColorationMode(e)},e.prototype.setColorationLevel=function(e,t){return t?this.themeChooser.coloration.setKitColorationLevel(t,e,!0):this.themeChooser.coloration.setActiveKitColorationLevel(e)},e.prototype.getColorationMode=function(){return this.themeChooser.coloration.getActiveKitColorationMode()},e.prototype.getColorationLevel=function(){return this.themeChooser.coloration.getActiveKitColorationLevel()},e.prototype.isColorationModeOverriden=function(){return this.themeChooser.coloration.getActiveKitColorationMode()!==this.themeChooser.coloration.getActiveKitDefaultColorationMode()},e.prototype.removePalettes=function(){this.palettes=[],this.storyColoration.customPalette=null},e.prototype.generatePalettes=function(e){var i=this;this.palettes=[],this.activePaletteIndex=t.INVALID_PALETTE_INDEX;var n=this.calculateThreeColorsForPalettes();return this.colorApi.getMatches(n.mainColor,50).then(function(e){return e.matches}).catch(function(){return[]}).then(function(e){var t=i.paletteGenerator.calculatePalettes(n,e);return i.storyColoration.customMainColor||i.insertDefaultPalette(t),t}).then(function(n){var o=t.INVALID_PALETTE_INDEX;switch(e){case"selectSimilar":o=i.getActivePaletteIndexBasedOnActiveColorationLevel();break;case"selectCustom":o=t.CUSTOM_PALETTE_INDEX;break;case"keepLogo":o=t.LOGO_PALETTE_INDEX;break;case"addToList":var r=i.storyColoration.activePalette;r?(o=n.findIndex(function(e){return i.arePalettesEqual(e,r)}))===t.INVALID_PALETTE_INDEX&&(o=i.insertPalette(r,n)):i.$log.error("colorationUtils: activePalette is not specified")}return{palettes:n,activePaletteIndex:o}}).then(function(t){var n=t.palettes,o=t.activePaletteIndex;return i.$timeout(function(){if(i.palettes=n,"selectSimilar"===e)return i.setActivePaletteByIndex(o);i.activePaletteIndex=o})})},e.prototype.insertDefaultPalette=function(e){var t=this.themeChooser.coloration.getActiveKitDefaultColors(),i={colors:t,creator:"default",numOfColors:this.numOfColors(t)};return this.insertPalette(i,e)},e.prototype.insertPalette=function(e,t){var i=t.findIndex(function(t){return e.numOfColors<=t.numOfColors});return-1===i&&(i=t.length),t.splice(i,0,e),i},e.prototype.calculateThreeColorsForPalettes=function(){var e;if(this.storyColoration.customMainColor)e={mainColor:this.storyColoration.customMainColor,white:r,black:"#181818"};else{var t=this.storyColoration.activePalette.colors;e={mainColor:t.mainColor,white:t.white,black:t.black}}return e},e.prototype.isPaletteIndexReferringToCalculatedPalette=function(e){return e>=0&&e<this.palettes.length},e.prototype.updatePalettes=function(){var e=this;if(!this.isUpdatingPalettes){var i=this.storyColoration,n=i.activePalette,o=i.customPalette,r=i.logoPalette,a=this.palettes,s=void 0===a?[]:a,l=this.activePaletteIndex,c=n.colors.mainColor,d=s.length>0?s[0].colors.mainColor:"",u=o&&this.arePalettesEqual(n,o),p=r&&this.arePalettesEqual(n,r);this.areColorsEqual(c,d)||this.isSwitchingMainColor?u?this.activePaletteIndex=t.CUSTOM_PALETTE_INDEX:p?this.activePaletteIndex=t.LOGO_PALETTE_INDEX:(l<0||l>=s.length||!this.arePalettesEqual(n,s[l]))&&(this.activePaletteIndex=s.findIndex(function(t){return e.arePalettesEqual(t,n)})):(this.isUpdatingPalettes=!0,this.generatePalettes(u?"selectCustom":p?"keepLogo":"addToList").then(function(){return e.isUpdatingPalettes=!1}))}},e.prototype.willLoadPalettes=function(){return this.shouldUpdatePalettes},e.prototype.getPalettes=function(){return this.shouldUpdatePalettes&&(this.updatePalettes(),this.shouldUpdatePalettes=!1),this.palettes},e.prototype.getRecentColors=function(){return this.localStorageService.get("recentColors")||[]},e.prototype.addColorToRecent=function(e){var t=this.getRecentColors();o(t).includes(e)||(t.unshift(e),this.localStorageService.set("recentColors",t))},e.prototype.getIndustryMainColors=function(e){var t=this;void 0===e&&(e=14);var i=angular.copy(this.themeChooser.getColorThemes()),n=[];return this.contentManager.getKitIds().forEach(function(e){var r=t.flags.lodash4?o.findIndex(i,["id",e]):o[String("findIndex")](i,{id:e});-1!==r&&(n.push(i[r]),i.splice(r,1))}),o.uniq(n.concat(i).map(function(e){var i=e.originalKit?e.originalKit:e;return t.themeChooser.coloration.getSpecificKitColors(i).mainColor})).splice(0,e)},e}();!function(e){e[e.mainColor=0]="mainColor",e[e.secondaryColor=1]="secondaryColor",e[e.black=2]="black",e[e.white=3]="white",e[e.thirdColor=4]="thirdColor",e[e.fourthColor=5]="fourthColor"}(t.ePaletteColorPickerStates||(t.ePaletteColorPickerStates={})),angular.module("siteGeneratorStaticsConsumerAppInternal").service("colorationUtils",l)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=function(){function e(t,i,n,o,r,a,s,l,c,d,u,p){this.previewService=t,this.$window=i,this.$element=n,this.$scope=o,this.applicationState=r,this.siteInit=a,this.viewerScrollController=s,this.viewerScaleController=l,this.viewerHeightController=c,this.viewerPreviewController=d,this.previewScale=u,this.flags=p,e.ViewerDesktopBaseSize=this.applicationState.previewFrameWidth}return e.$inject=["previewService","$window","$element","$scope","applicationState","siteInit","viewerScrollController","viewerScaleController","viewerHeightController","viewerPreviewController","previewScale","flags"],e.prototype.$postLink=function(){var e=this;this.initContentWindow(this.$element),this.enableReactDevTools(),this.preventLoadJittering(),this.previewService.registerUrlLoader(function(t){return e.contentWindow.location.replace(t)}),this.flags.AnonymousFlowEnabled&&n.PubSub.subscribe("RELOAD_SANTA",this.onReload.bind(this)),this.onViewerLoaded()},e.prototype.onReload=function(){var e=this;this.onViewerLoaded().then(function(){e.flags.removeSpinnerAsStageReady||e.viewerScaleController.updateScale(e.previewScale.getScale())})},e.prototype.onViewerLoaded=function(){var e=this;return this.siteInit.onSiteReady(this.contentWindow).then(function(){e.previewCtrl.viewerLoaded(e.contentWindow),e.flags.removeSpinnerAsStageReady&&(n.PubSub.fire(n.events.PREVIEW_READY),e.viewerScaleController.updateScale(e.previewScale.getScale(),!0))})},e.prototype.preventLoadJittering=function(){var e=this;this.$scope.$watch(function(){return e.applicationState.isPreviewDisplay()},function(t){e.$element.css("opacity",t?0:1)})},e.prototype.initContentWindow=function(t){var i=t.find(e.IframeSelector);this.iframe=i[0],this.contentWindow=this.iframe.contentWindow},e.prototype.enableReactDevTools=function(){var e=this;this.$window.__REACT_DEVTOOLS_GLOBAL_HOOK__&&this.$element.load(function(){e.contentWindow.__REACT_DEVTOOLS_GLOBAL_HOOK__=e.$window.__REACT_DEVTOOLS_GLOBAL_HOOK__})},e.ViewerDesktopBaseSize=1140,e.ViewerMobileBaseSize=320,e.FakeBrowserVerticalSpacing=18,e.FakeBrowserBarHeight=36,e.ResizeWindowDebounce=300,e.WindowResizeEvent="resize",e.BuilderSelector=".builder",e.TopBarSelector='[data-hook="top-bar"]',e.IframeSelector="iframe.viewer",e}();t.Viewer=o,angular.module("siteGeneratorStaticsConsumerAppInternal").component("viewer",{template:'<iframe name="viewer" class="viewer" ng-class="{ preview: $ctrl.applicationState.isPreviewDisplay() }" style="height: 100px;"></iframe>',require:{previewCtrl:"^preview"},controller:o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.timeout=e,this.showDropdown=!1}return e.prototype.showDropDown=function(){this.showDropdown=!0},e.prototype.hideDropDown=function(){this.showDropdown=!1},e.prototype.isShowDropDown=function(){return this.showDropdown},e.prototype.isDropdownClicked=function(e,t){for(var i=0;i<t.length;i++)if(0!==$(e).closest(t[i]).length)return!0;return!1},e.prototype.onDropdownClose=function(){document.body.onclick=null},e.prototype.closeWhenClickOutside=function(e,t){var i=this;document.body.onclick=function(n){var o=n.target;o&&(i.isDropdownClicked(o,e)||(i.timeout(function(){t?t():i.hideDropDown()}),i.onDropdownClose()))}},e}();t.BaseDropDown=n},,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.helpDialogManager=e}return e.$inject=["helpDialogManager"],e.prototype.bShowHelp=function(){return this.helpDialogManager.stateHasHelp()},e.prototype.bOnHelp=function(){return this.helpDialogManager.show()},e}();t.PanelBase=n},,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e){this.strategy=e}}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this._promise=new Promise(function(t,i){e._resolve=t,e._reject=i})}return e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(){this._reject()},Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!0,configurable:!0}),e}();t.default=n},function(e,t,i){"use strict";(function(t){var n=i(8),o=i(107),r={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=i(37):void 0!==t&&(e=i(37)),e}(),transformRequest:[function(e,t){return o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function(e){s.headers[e]={}}),n.forEach(["post","put","patch"],function(e){s.headers[e]=n.merge(r)}),e.exports=s}).call(this,i(47))},function(e,t,i){"use strict";var n=i(8),o=i(108),r=i(110),a=i(111),s=i(112),l=i(48),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||i(113);e.exports=function(e){return new Promise(function(t,d){var u=e.data,p=e.headers;n.isFormData(u)&&delete p["Content-Type"];var g=new XMLHttpRequest,h="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in g||s(e.url)||(g=new window.XDomainRequest,h="onload",m=!0,g.onprogress=function(){},g.ontimeout=function(){}),e.auth){var f=e.auth.username||"",v=e.auth.password||"";p.Authorization="Basic "+c(f+":"+v)}if(g.open(e.method.toUpperCase(),r(e.url,e.params,e.paramsSerializer),!0),g.timeout=e.timeout,g[h]=function(){if(g&&(4===g.readyState||m)&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in g?a(g.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?g.response:g.responseText,status:1223===g.status?204:g.status,statusText:1223===g.status?"No Content":g.statusText,headers:i,config:e,request:g};o(t,d,n),g=null}},g.onerror=function(){d(l("Network Error",e,null,g)),g=null},g.ontimeout=function(){d(l("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",g)),g=null},n.isStandardBrowserEnv()){var S=i(114),y=(e.withCredentials||s(e.url))&&e.xsrfCookieName?S.read(e.xsrfCookieName):void 0;y&&(p[e.xsrfHeaderName]=y)}if("setRequestHeader"in g&&n.forEach(p,function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete p[t]:g.setRequestHeader(t,e)}),e.withCredentials&&(g.withCredentials=!0),e.responseType)try{g.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&g.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){g&&(g.abort(),d(e),g=null)}),void 0===u&&(u=null),g.send(u)})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=function(){function e(e,t,i,o,r,a,s,l,c){var d=this;this.flags=e,this.applicationState=t,this.overlayManager=i,this.overlayPosition=o,this.sectionHeightUIService=r,this.storyServices=a,this.initService=s,this.documentServicesMediator=l,this.applicationParameters=c,this.dsInitalized=!1,this.pageReady=!1,this.data=function(e){return d.overlayManager.getSitePartByType(e)},this.isPreviewDisplay=function(){return d.applicationState.isPreviewDisplay()},this.isInMobileEditMode=function(){return d.applicationState.isInMobileEditMode()},this.getFocusedListSpan=function(){return d.overlayManager.data.focusedListSpan},this.getHoveredListSpan=function(){return d.overlayManager.data.hoveredListSpan},this.isShowOverlayBackdrop=function(){return d.overlayManager.showBackdrop},this.overlayBackdropClicked=function(){return n.PubSub.fire(n.events.OVERLAY_BACKDROP_CLICK)},this.flags.removeSpinnerAsStageReady&&(this.initService.loaded().then(function(){d.pageReady=!0}),this.documentServicesMediator.whenInitialized().then(function(){d.dsInitalized=!0}))}return e.$inject=["flags","applicationState","overlayManager","overlayPosition","sectionHeightUIService","storyServices","initService","documentServicesMediator","applicationParameters"],e.prototype.getPageWidth=function(){return this.applicationState.isInMobileEditMode()?this.applicationParameters.mobilePageWidth:this.applicationParameters.desktopPageWidth},e.prototype.stateIsChangeHeight=function(){return this.sectionHeightUIService.stateIsChangeHeight()},e.prototype.height=function(e){var t=this.storyServices.story&&this.overlayPosition.getOverlay(e,this.storyServices.story.selectedPage),i=t?t.layout.height:0,n="body"===e?i+this.overlayManager.getDropTargetHeight():i;return this.flags.removeSpinnerAsStageReady&&this.dsInitalized&&"body"===e&&0===n&&(n=this.data(e).adjustedHeight),n},Object.defineProperty(e.prototype,"showFocusedListSpan",{get:function(){return this.flags.removeSpinnerAsStageReady?this.pageReady&&!!this.getFocusedListSpan():!!this.getFocusedListSpan()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showHoveredListSpan",{get:function(){return this.flags.removeSpinnerAsStageReady?this.pageReady&&this.applicationState.isSteady()&&!!this.getHoveredListSpan():this.applicationState.isSteady()&&!!this.getHoveredListSpan()},enumerable:!0,configurable:!0}),e.prototype.isOnAddState=function(){return this.applicationState.isOnAddState()},e.ViewportSelector=".overlay-viewport",e}();t.Overlay=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i(6),r=i(2),a=i(14),s=i(65),l=i(1),c=i(0);!function(e){e[e.AddSection=0]="AddSection",e[e.AddPage=1]="AddPage",e[e.ChangeSection=2]="ChangeSection"}(n=t.PreviewListIntent||(t.PreviewListIntent={}));var d=function(){function e(t,i,o,a,s,l,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H,O,_,D,$,N,x,R,F,U,G,j,V,W,z,K,q,Y,X){var Q=this;this.$scope=t,this.$state=i,this.undoRedo=o,this.CONSUMER_DIALOGS=a,this.$timeout=s,this.CcDialogBuilder=l,this.$translate=d,this.$q=u,this.$element=p,this.spinnerService=g,this.sectionManager=h,this.mobileSectionManager=m,this.pagesManager=f,this.storyServices=v,this.presetHelpers=S,this.applicationState=y,this.sitePartTypes=T,this.overlayManager=b,this.flags=I,this.$window=P,this.tpaService=M,this.setTpaContentService=E,this.dropTargetCalculator=w,this.layoutSelectionStoreProvider=C,this.consumerBiLogger=A,this.consumerBiLoggerHelpers=L,this.obMonitoring=B,this.initService=k,this.silentPageBuilder=H,this.colorationUtils=O,this.getStageBackgroundColors=_,this.assistantManager=D,this.smartAssistHelpers=$,this.smartAssistTpaHelpers=N,this.consumerMenu=x,this.$injector=R,this.presetPreviewFlagUtils=F,this.headerPresetUtils=U,this.slideShowPresetUtils=G,this.simpleSolutionManager=j,this.presetsStrategyFactory=V,this.designKit=W,this.modelTree=z,this.slideShowService=K,this.cabbieHover=q,this.solutionFetcher=Y,this.presetPreviewAnalyzer=X,this.isDoneLoading=!1,this.isLoadedAttr="is-loaded",this.cancelTimeout=null,this.doNotUpdatePresetConfiguration=!1,this.unsettingPreviewIsInView=!1,this.shouldShowMenu=!1,this.maxPlaceholdersToShow=4,this.isAllPresetsLoaded=!1,this.cachedSiblings=new Map,this.unsubscribers=[],this.handleSelection=c.debounce(function(t){Q.obMonitoring.mark({name:"addSection-"+t.node.alias}),Q.applicationState.isSectionColorsMode()||Q.spinnerService.waitForMe(e.SpinnerAddSection),Q.obMonitoring.mark({name:"getSelectedPreviewData"});var i=Q.getSelectedPreviewData(t,"click");Q.obMonitoring.measure({name:"getSelectedPreviewData"}),Q.onSelectionStart&&(Q.obMonitoring.mark({name:"onSelectionStart"}),Q.onSelectionStart({data:i}),Q.obMonitoring.measure({name:"onSelectionStart"})),Q.obMonitoring.mark({name:"reportBIStart"}),Q.reportBIStart(i),Q.obMonitoring.measure({name:"reportBIStart"});var o=Q.$q.when();if(Q.intent!==n.AddPage||t.node.isTpa||(Q.obMonitoring.mark({name:"addPageAndSection"}),o=Q.addPageAndSection(!t.node.isTpaWidget).then(function(e){return Q.obMonitoring.measure({name:"addPageAndSection"}),e})),Q.intent===n.AddPage&&Q.flags.addAllPageMode)return o.then(function(e){return e?(Q.obMonitoring.mark({name:"constructAnyPage"}),Q.silentPageBuilder.constructAnyPage(e).then(function(e){return Q.obMonitoring.measure({name:"constructAnyPage"}),e})):Q.$q.when()});var a=o.then(function(){return Q.obMonitoring.mark({name:"handlePreviewSelected"}),Q.handlePreviewSelected(t)}).then(function(e){return Q.obMonitoring.measure({name:"handlePreviewSelected"}),e}).then(function(o){o&&"Service"===o.contentElementType&&o.children&&o.children.length&&Q.intent===n.AddSection&&(Q.obMonitoring.mark({name:"addSingleServiceToTpa"}),Q.setTpaContentService.addSingleServiceToTpa(o),Q.obMonitoring.measure({name:"addSingleServiceToTpa"})),Q.obMonitoring.mark({name:"reportBISuccess"}),Q.reportBISuccess(o,i),Q.obMonitoring.measure({name:"reportBISuccess"}),Q.intent!==n.ChangeSection?(Q.obMonitoring.mark({name:"onSectionAdded"}),Q.onSectionAdded(o),Q.obMonitoring.measure({name:"onSectionAdded"})):r.PubSub.fire(r.events.SECTION_DESIGN_CHANGED,o),Q.flags.smartAssistTpa&&o&&c.includes(Q.smartAssistTpaHelpers.supportedTpaTypes,o.contentElementType)&&r.PubSub.fire(r.events.TPA_ADDED),Q.obMonitoring.mark({name:"refreshContentFocus"}),Q.applicationState.refreshContentFocus(),Q.obMonitoring.measure({name:"refreshContentFocus"}),Q.spinnerService.imDone(e.SpinnerAddSection),Q.$timeout(function(){Q.current=Q.previewAboutToBeSet,Q.obMonitoring.measure({name:"addSection-"+t.node.alias}),Q.onSelectionChanged&&Q.onSelectionChanged({data:i})},10),Q.$timeout(function(){Q.ensurePreviewVisible(Q.current)},300)});Q.flags.keepPagesPanelOpen&&a.then(function(){if(Q.applicationState.shouldReopenPagesPanel&&!Q.assistantManager.isInActiveTask()){var e=Q.storyServices.story.selectedPage;e&&Q.applicationState.goToPage(e)}})},400,{leading:!1,trailing:!0}),this.currentPresetIndex=0,this.handleCurrentPreviewUpdate=function(e){Q.reCalculatePresets(),Q.headerPresetUtils.resetPreviewFlags(Q.current),Q.headerPresetUtils.notifyHeaderPreviewUpdated(e)},void 0===this.scale&&(this.scale=e.PreviewListScale),void 0===this.markSelected&&(this.markSelected=!0),this.$timeout(function(){var i=Q.$element.find(e.PreviewListSelector);Q.previewListElement=i[0],i.bind("scroll",function(){Q.previewListElement.scrollTop+Q.previewListElement.offsetHeight>=Q.previewListElement.scrollHeight-50&&t.$apply(function(){return Q.addPreviews(Q.timestamp)})})}),this.isInColorPanel=this.applicationState.isInSectionColorPanel(),t.$watch("$ctrl.nodes",function(){if(Q.cancelThrottlingInterval(),angular.element(Q.previewListElement).scrollTop(0),Q.intent===n.AddPage&&Q.nodes&&"blank"===c.first(Q.nodes).id)Q.showBlankPage=!0;else{Q.showBlankPage=!1;var e=Q.nodes&&Q.nodes[0],t=Q.applicationState.getPageNodeInFocus();Q.flags.mergedHeader&&Q.intent===n.ChangeSection&&e&&!e.isTpa&&Q.isHeaderNode(e)&&Q.previewHeaderWithFirstSection(t);var i=Q.timestamp;Q.strategy.generateListOfPreviews(Q.nodes).then(function(e){Q.timestamp===i&&(e=Q.handleHeaderPreviews(e),e=Q.handleSlideShowPreviews(e),Q.$timeout(function(){return Q.initializeThrottlingMechanism(e,i)},0))})}}),t.$on("switchPreset",function(e,t){var i=Q.previews.indexOf(Q.current)+t;i>=Q.previews.length?i=0:i<0&&(i=Q.previews.length-1),Q.selectPreset(Q.previews[i])}),t.$on("$destroy",function(){Q.cancelThrottlingInterval(),Q.layoutSelectionStoreProvider.resetPresetSelections(),Q.intent===n.AddPage?Q.consumerBiLogger.pagesManager.pagesPanelWasClosed("add page"):Q.selectedSection?Q.consumerBiLogger.sectionManagement.sectionPanelClosed("",Q.selectedSection.ceType,Q.selectedSection.id):!Q.nodes||Q.flags.invertTpaPalette&&Q.isTpaMode()&&Q.isInColorPanel||Q.sendSectionPanelClosedEvent(),Q.flags.presetsAnalyzerForAutomationTests&&Q.presetPreviewAnalyzer.unsetAllPreviews(),Q.unsubscribers.forEach(function(e){return e()})}),this.isMobile=this.applicationState.isInMobileEditMode(),this.unsubscribers.push(r.PubSub.subscribe(r.events.HEADER_FOOTER_BG_CHANGED,function(){return Q.handleCurrentPreviewUpdate("headerBg")}))}return e.$inject=["$scope","$state","undoRedo","CONSUMER_DIALOGS","$timeout","CcDialogBuilder","$translate","$q","$element","spinnerService","sectionManager","mobileSectionManager","pagesManager","storyServices","presetHelpers","applicationState","sitePartTypes","overlayManager","flags","$window","tpaService","setTpaContentService","dropTargetCalculator","layoutSelectionStoreProvider","consumerBiLogger","consumerBiLoggerHelpers","obMonitoring","initService","silentPageBuilder","colorationUtils","getStageBackgroundColors","assistantManager","smartAssistHelpers","smartAssistTpaHelpers","consumerMenu","$injector","presetPreviewFlagUtils","headerPresetUtils","slideShowPresetUtils","simpleSolutionManager","presetsStrategyFactory","designKit","modelTree","slideShowService","cabbieHover","solutionFetcher","presetPreviewAnalyzer"],e.prototype.sendSectionPanelClosedEvent=function(){var e=this.nodes[0];this.consumerBiLogger.sectionManagement.sectionPanelClosed(e.getId(),e.getContentElementType(),e.alias)},e.prototype.$onInit=function(){var e=this;this.initPlaceholders(),this.initService.loaded().then(function(){return e.colorationUtils.initialize()}).then(function(){switch(e.intent){case n.AddPage:e.pageMode=!0,e.consumerBiLogger.pagesManager.addPagePanelIsLoaded();break;case n.AddSection:e.consumerBiLogger.sectionManagement.addSectionPanelIsLoaded()}})},e.prototype.initPlaceholders=function(){this.isShowPlaceholdersInPresets&&(this.placeholders=[])},Object.defineProperty(e.prototype,"isShowPlaceholdersInPresets",{get:function(){return this.intent!==n.AddPage&&!this.applicationState.isSectionColorsMode()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overlayTitle",{get:function(){return this.applicationState.isSectionColorsMode()?this.$translate.instant("preset-title.change-color"):this.applicationState.isSwitchPresetMode()?this.$translate.instant("preset-title.switch-preset"):this.intent===n.AddPage?this.$translate.instant("preset-title.add"):this.nodes[0].isTpaNode()?this.$translate.instant("preset-title.click"):this.$translate.instant("preset-title.click-or-drag")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelSource",{get:function(){switch(this.intent){case n.AddPage:return l.BIOrigins.AddPagePanel;case n.AddSection:return l.BIOrigins.AddSectionPanel;case n.ChangeSection:if(this.applicationState.isSectionColorsMode())return l.BIOrigins.SectionColorsPanel;if(this.applicationState.isSwitchPresetMode())return l.BIOrigins.SectionPanel}return this.flags.sectionMedia&&this.source?this.source:l.BIOrigins.UnknownSource},enumerable:!0,configurable:!0}),e.prototype.handleHeaderPreviews=function(e){return this.flags.mergedHeader?this.headerPresetUtils.addHeaderPreviews(e,this.nodes[0],this.current&&this.current.flags):e},e.prototype.handleSlideShowPreviews=function(e){var t=e;return this.slideShowPresetUtils.isNodeSupportSlideShow(this.nodes[0])&&(this.isMobile&&!this.isSlideShowPreset(this.current)||(t=this.slideShowPresetUtils.addSlideShowPreviews(t),this.isMobile&&(t=this.slideShowPresetUtils.removeNonSlideShowPreviews(t)))),t},e.prototype.getPlaceholderBackgroundColor=function(){var e=this.colorationUtils.getPaletteColors();return{"background-color":"rgba("+this.getStageBackgroundColors(e).gradientStart.rgba()+")"}},e.prototype.getPlaceholderClassName=function(e){return this.applicationState.isInMobileEditMode()?"preview-placeholder-mobile":"preview-placeholder"},e.prototype.isSelected=function(e){if(!this.markSelected)return!1;if(this.flags.mergedHeader)return e.isSelected;if(this.flags.invertTpaPalette&&e.isTpa)return this.isTpaSelected(e);var t=e&&(e.id||e.preset&&e.preset.id),i=this.current&&this.tpaService.getChosenPresetId(this.current.node);return e===this.current||t===i&&void 0!==t},e.prototype.isTpaSelected=function(e){if(this.applicationState.isInSectionColorPanel()){var t=this.current.node;return this.designKit.doesPreviewBackgroundMatchSelected(e,this.simpleSolutionManager.getSectionSolution(t.containerPageId,t.id)[0])}var i=this.current&&this.tpaService.getChosenPresetId(this.current.node),n=e&&(e.id||e.preset&&e.preset.id);return n&&n===i},e.prototype.isGeneralDescriptionPreview=function(e){return e&&this.isGeneralDescription(e.node)},e.prototype.isGeneralDescription=function(e){return e&&"GeneralDescription"===e.getContentElementType()},e.prototype.isHeaderPreview=function(e){return e&&this.isHeaderNode(e.node)},e.prototype.isHeaderNode=function(e){return this.isGeneralDescription(e)&&"footer"!==e.containerPageId},e.prototype.isFooterPreview=function(e){return e&&this.isFooterNode(e.node)},e.prototype.isFooterNode=function(e){return e&&"footer"===e.containerPageId},e.prototype.isSelectedInView=function(){var e=this.$element.find(".preview-list-container .cc-scrollbar"),t=this.$element.find(".selected.preview-section");if(0===t.length)return!1;var i=e.scrollTop(),n=i+e.outerHeight(),o=t.position().top;return i<=o+t.outerHeight()&&o<=n},Object.defineProperty(e.prototype,"body",{get:function(){var e=this.applicationState.getContentFocus();return null===e||e.sitePart!==this.sitePartTypes.HEADER&&e.sitePart!==this.sitePartTypes.FOOTER},enumerable:!0,configurable:!0}),e.prototype.createBlankPage=function(){var t=this,i=this.consumerBiLoggerHelpers.getEditMode(),n=this.selectedSection.ceType,o=this.selectedSection.id,r=this.selectedSection.origin;this.consumerBiLogger.pagesManager.clickOnDesiredNewPage(n,o,r,1,1,"",!1),this.applicationState.clearContentFocus(),this.spinnerService.waitForMe(e.SpinnerAddBlankPage),this.pageName=this.$translate.instant("general.blank"),this.addPageAndSection().then(function(){return t.consumerMenu.calcMenuAnchors(),t.spinnerService.imDone(e.SpinnerAddBlankPage),t.undoRedo.captureOperation(),t.applicationState.clearContentFocus(),t.storyServices.recalculateCurrentPage()}).then(function(){t.consumerBiLogger.pagesManager.addNewPageSuccess(i,n,o,"",r,1,1,"","","by user",!1),t.applicationState.goToAddSectionMode()})},e.prototype.popupAfterPageAdd=function(){var e=this;return this.CcDialogBuilder.showFirstTimeNotice({heading:this.$translate.instant("popups.after-page-add.heading"),text:this.$translate.instant("popups.after-page-add.text"),acceptButtonText:this.$translate.instant("popups.after-page-add.accept"),icon:"badge.gif",hideFirstTimeCheckBox:!0,onHelp:function(){e.CcDialogBuilder.showSupportIframe(e.$translate.instant("help.popup.newPageAdded"),e.CONSUMER_DIALOGS.AFTER_PAGE_ADD_HELP)},biDialogName:this.CONSUMER_DIALOGS.AFTER_PAGE_ADD})},e.prototype.popupPageAddInitiation=function(){return this.CcDialogBuilder.showFirstTimeNotice({heading:this.$translate.instant("popups.after-page-add.heading"),text:this.$translate.instant("popups.after-page-add.text"),acceptButtonText:this.$translate.instant("popups.after-page-add.accept"),dontBotherMeText:this.$translate.instant("general.dont-show-again"),dontBotherMe:!0,biDialogName:this.CONSUMER_DIALOGS.AFTER_PAGE_ADD_FIRST_TIME})},e.prototype.addPageAndSection=function(e){var t=this;void 0===e&&(e=!0);var i=this.pageName||"Untitled",n=this.pagesManager.addPage(i).then(function(e){return t.storyServices.story.selectedPage=e.id,t.pagesManager.goToPage(e.id)});return this.applicationState.isSilent()?n:n.then(function(i){return!t.storyServices.story.popupConfigurations["popups.after-page-add"]&&e&&t.popupAfterPageAdd().then(function(e){t.storyServices.story.popupConfigurations["popups.after-page-add"]=!0}),i})},e.prototype.handlePreviewSelected=function(e){if(this.applicationState.isInMobileEditMode())return this.mobileSectionManager.handlePreviewSelected(e);var t=this.intent===n.ChangeSection;return this.sectionManager.handlePreviewSelected(e,t)},e.prototype.reportBISuccess=function(e,t){if(e&&e.isTpaNode()&&(t.instanceId=this.tpaService.getInstanceId(e),!this.isNewTpaAdded||this.intent!==n.AddPage&&this.intent!==n.AddSection||this.sendBIForTpaPackageSuccess(t)),this.applicationState.isSectionColorsMode())this.consumerBiLogger.sectionDesign.changeColorSuccess(t.sectionAlias,t.sectionType);else switch(this.intent){case n.AddPage:t.instanceId&&this.consumerBiLogger.provisioning.tpaIntent(t.instanceId,t.appId,"ADD_APP","ADI"),this.consumerBiLogger.pagesManager.addNewPageSuccess(t.editMode,t.sectionType,t.sectionAlias,e.getId(),t.origin,t.totalPreviews,t.selectedIndex,t.presetId,t.appId,"by user",t.isColumns);break;case n.ChangeSection:this.consumerBiLogger.sectionManagement.changeSectionLayoutSuccess(t.editMode,t.node.getId(),t.sectionType,t.sectionAlias,t.totalPreviews,t.selectedIndex,t.presetId,t.appId,t.isColumns,this.panelSource,t.preview.isRecommended?"recommended":"others",t.noOfRecommendedViewed);break;case n.AddSection:t.instanceId&&this.consumerBiLogger.provisioning.tpaIntent(t.instanceId,t.appId,"ADD_APP","ADI"),this.consumerBiLogger.sectionManagement.addSectionToPageSuccess(t.editMode,e.getId(),t.addPosition,t.sectionType,t.sectionAlias,t.origin,t.totalPreviews,t.selectedIndex,t.presetId,t.addType,t.appId,t.isColumns,s.SectionManager.isNodeDuplicated(e))}},e.prototype.sendBIForTpaPackageSuccess=function(e){this.consumerBiLogger.pagesManager.addTpaPackageSuccess(this.consumerBiLoggerHelpers.extraPagesCount(),e.appId,e.isColumns,Date.now()-e.startTime,e.node.getId(),null),this.consumerBiLoggerHelpers.resetExtraPagesCount()},e.prototype.getSelectedPreviewData=function(e,t){var i=this,o=this.nodes[0],r=this.intent!==n.ChangeSection?function(e){return{ceType:e.ceType,alias:e.id,origin:e.origin}}(this.selectedSection):function(e){return{ceType:e.getSpecificContentElementType(),alias:e.alias,origin:null}}(o);return{preview:e,addType:t,node:o,appId:function(t){var n=i.tpaService.getAppId(t);if(e.node.isTpaWidget){var o=e.node.contentElementType.split("_")[0];return i.tpaService.getAppIdByType(o)}return n}(e.node),totalPreviews:this.previews.length,selectedIndex:this.previews.indexOf(e)+1,presetId:e.preset&&e.preset.id||"current",isColumns:!(!e.preset||!e.preset.flag_useColumns),sectionType:r.ceType,sectionAlias:r.alias,origin:r.origin,startTime:Date.now(),addPosition:this.sectionManager.getAddSectionPosition(),editMode:this.consumerBiLoggerHelpers.getEditMode(),noOfRecommendedViewed:this.previews.filter(function(e){return e.isRecommended}).length}},e.prototype.reportBIStart=function(e){if(this.consumerBiLoggerHelpers.resetExtraPagesCount(),this.applicationState.isSectionColorsMode())this.consumerBiLogger.sectionDesign.changeColorClick(e.sectionAlias,e.sectionType);else switch(this.intent){case n.ChangeSection:this.consumerBiLogger.sectionManagement.changeASectionLayout(e.node.getId(),e.sectionType,e.sectionAlias,e.totalPreviews,e.selectedIndex,e.presetId,e.appId,e.isColumns,this.panelSource,e.preview.isRecommended?"recommended":"others",e.noOfRecommendedViewed);break;case n.AddSection:this.consumerBiLogger.sectionManagement.addSectionToPage(e.sectionType,e.sectionAlias,e.addPosition,e.origin,e.totalPreviews,e.selectedIndex,e.presetId,e.addType,e.appId,e.isColumns,s.SectionManager.isNodeDuplicated(e.node));break;case n.AddPage:this.consumerBiLogger.pagesManager.clickOnDesiredNewPage(e.sectionType,e.sectionAlias,e.origin,e.totalPreviews,e.selectedIndex,e.presetId,e.isColumns)}if(e.node&&e.node.isTpaNode()){var t=this.tpaService.getNaiveType(e.node.contentElementType);if(this.isNewTpaAdded=!this.tpaService.isTpaAdded(t),this.isNewTpaAdded&&(this.intent===n.AddPage||this.intent===n.AddSection)){var i=this.tpaService.getAppIdByType(this.tpaService.getNaiveType(t));this.consumerBiLogger.apps.addTpaStart(e.node.contentElementType,i)}}},e.prototype.onSectionAdded=function(e){var t=this.applicationState,i=this.sitePartTypes,n=this.$state;this.doNotUpdatePresetConfiguration=!0,n.current.name===o.STATES.BUILDER_ADD_SECTION?this.reloadAfterAdd&&this.reloadAfterAdd({$nodeId:e.getId()}):(t.setContentFocus(e.getId(),i.BODY,!0),t.goToBuilder())},e.prototype.updateSelectedProp=function(e){var t=this.previews.find(function(e){return e.isSelected});t&&(t.isSelected=!1),e.isSelected=!0},e.prototype.selectPreset=function(e,t){if(this.applicationState.isAddSectionMode()||this.updateSelectedProp(e),t&&this.flags.prettyAlgo&&this.flags.debug&&(t.metaKey||t.ctrlKey)){var i=this.$injector.get("prettyAlgoDX"),n=this.overlayManager.getDropTargetSection();i.openRuleCreationDialog(e,n)}else this.previewAboutToBeSet!==e&&(this.unsettingPreviewIsInView=this.isSelectedInView(),this.previewAboutToBeSet=e,this.handleSelection(e))},e.prototype.ensurePreviewVisible=function(e){var t=this.previews.indexOf(e),i=angular.element(this.previewListElement).find(".preview-section")[t];if(i){var n=i.offsetTop+i.offsetHeight,o=this.previewListElement.offsetHeight+this.previewListElement.scrollTop;n>o?this.previewListElement.scrollTop+=20+n-o:i.offsetTop<this.previewListElement.scrollTop&&(this.previewListElement.scrollTop-=20+this.previewListElement.scrollTop-i.offsetTop)}},e.prototype.isDebugMode=function(){return!!this.flags.debugMode||!!this.flags.debug},e.prototype.debugInfo=function(e){if(this.$window.preview=e,e.preset&&e.preset.data&&(this.$window.console.log("%cPreset ID: "+e.preset.id,"color:blue"),e.preset.data.priority&&this.$window.console.log("%cPreset Priority: "+e.preset.data.priority[e.node.contentElementType]+"\nContent Element Type: "+e.node.contentElementType,"color:blue")),this.$window.console.log("%cSignature:\n"+this.strategy.getPresetVisualSignature(e),"color:blue"),this.$window.console.log("%cYou can use the following variables\n'preview.node', \n'preview.preset', \n'preview.solution'\n","color:orange"),window.siteConverterSection){var t=window,i=t.siteConverterSection,n=t.siteConverterNode,o=this.$injector.get("siteConverterPresetPicker").getScoredPresetPreview(e,i,n);this.$window.console.log("SiteConverter PresetPreview",o)}},e.prototype.postAdd=function(e){var t=this;if(!this.initiateInterval(e))return this.$q.when().then(function(){t.cancelThrottlingInterval()})},e.prototype.addPresetToQueue=function(e,t){var i=this;(e.isTpa?this.createStrategy():this.strategy).calculatePresetPreview(e,this.currentPresetIndex).then(function(e){if(i.timestamp===t){if(e){i.flags.mergedHeader&&e.isTpa&&(e.isSelected=i.isTpaSelected(e));var n=!1;i.flags.mergedHeader&&i.isHeaderPreview(e)&&(i.headerPresetUtils.normalizeHeaderPreview(e),i.headerPresetUtils.isValidHeaderPreview(e)||(n=!0)),!n&&i.addPresetToListIfUnique(i.previews,e)&&i.currentPresetIndex++}return i.postAdd(t)}})},e.prototype.createStrategy=function(){return this.presetsStrategyFactory.createFromNode(this.nodes[0],{strategyMode:a.PresetsStrategyMode.Change})},e.prototype.addPresetToListIfUnique=function(e,t){if(this.strategy.isUnique(t)||t.isTpa&&this.flags.invertTpaPalette)return e.push(t),!0;if(this.isDebugMode()){var i=this.strategy.getPresetVisualSignature(t),n=t.preset&&t.preset.id;this.$window.console.log("%cFound duplication in presets, ignore.\nPreset ID: "+n+"\nSignature:\n"+i,"color:blue")}return!1},e.prototype.isTpaMode=function(){return this.nodes[0].isTpaNode&&this.nodes[0].isTpaNode()},e.prototype.addPreviews=function(e){if(!this.isTpaMode()){switch(this.intent){case n.AddPage:this.consumerBiLogger.sectionManagement.showMoreSectionPageLayoutsOnScroll("",this.selectedSection.ceType,this.selectedSection.id,"add page");break;case n.AddSection:this.consumerBiLogger.sectionManagement.showMoreSectionPageLayoutsOnScroll("",this.selectedSection.ceType,this.selectedSection.id,"add section");break;case n.ChangeSection:var t=this.nodes[0];this.consumerBiLogger.sectionManagement.showMoreSectionPageLayoutsOnScroll(t.getId(),t.getContentElementType(),t.alias,"replace section")}this.limit=Math.max(this.limit,this.previews.length+3),this.cancelTimeout||this.initiateInterval(e)}},e.prototype.initializeThrottlingMechanism=function(e,t){this.layoutSelectionStoreProvider.resetPresetSelections(),this.allPreviews=e,this.flags.presetsAnalyzerForAutomationTests&&this.presetPreviewAnalyzer.setAllPreviews(this.allPreviews),this.doNotUpdatePresetConfiguration=!1,this.previews=[],this.current&&this.intent===n.ChangeSection&&!this.isTpaMode()&&(this.flags.mergedHeader&&(this.current.isSelected=!0),this.addCurrentPresetToList()),this.limit=5,this.numberOfIterations=0,this.initiateInterval(t)},e.prototype.addCurrentPresetToList=function(){this.flags.mergedHeader&&this.isHeaderPreview(this.current)&&(this.current.flags=this.presetPreviewFlagUtils.getPreviewFlagsByNode(this.current.node,!0)),this.isSlideShowPreset(this.current)&&(this.current.flags=this.current.flags||[],this.current.flags.push("slideShowPreset")),this.addPresetToListIfUnique(this.previews,this.current)},e.prototype.isSlideShowPreset=function(e){return e&&this.slideShowService.isSlideShow(e.node)},e.prototype.handleNextChunkForSlideShow=function(e){var t=this;c.each(e,function(e){e.preset&&t.slideShowPresetUtils.isPresetSupportSlideShow(e.preset)&&t.slideShowPresetUtils.addSlideShowPresetFlag(e)})},e.prototype.initiateInterval=function(e){var t=this;if(this.isShowPlaceholdersInPresets&&(this.isAllPresetsLoaded=!1),this.timestamp!==e)return!1;this.isDoneLoading=!1,this.isShowPlaceholdersInPresets&&this.showPlaceholders();var i=this.allPreviews.length-this.numberOfIterations;if(0===i){var n=this.strategy.generateNextChunkOfPreviews(this.nodes);c.isEmpty(n)||(this.handleNextChunkForSlideShow(n),this.allPreviews=[].concat.call(this.allPreviews,n),i=this.allPreviews.length-this.numberOfIterations),this.loadCallback&&this.loadCallback({total:this.previews.length})}if(i>0&&(!this.strategy.shouldLoadPreviousOnScroll()||this.previews.length<this.limit||this.isLoadMorePresetsAccordingToScroll()))return this.flags.noRandomForAutomationTests?(this.cancelTimeout=!0,this.addPresetToQueue(this.allPreviews[this.numberOfIterations++],e)):this.cancelTimeout=this.$timeout(function(){t.addPresetToQueue(t.allPreviews[t.numberOfIterations++],e)},100),!0;this.isShowPlaceholdersInPresets&&0===i&&this.onAllPresetsLoaded()},e.prototype.onAllPresetsLoaded=function(){this.isAllPresetsLoaded=!0,this.initPlaceholders()},e.prototype.showPlaceholders=function(){if(this.isShowPlaceholdersInPresets&&!this.isTpaMode()&&this.placeholders&&0===this.placeholders.length)for(var e=0;e<this.maxPlaceholdersToShow;e++){var t={id:e};this.placeholders.push(t)}},e.prototype.isLoadMorePresetsAccordingToScroll=function(){var e=$(".preview-list").height(),t=0;return $('.preview-section:not(".preview-section-placeholder")').each(function(){t+=$(this).outerHeight(!0)||0}),e>t-50},e.prototype.onPresetsLoadingFinished=function(){this.cancelTimeout=null,this.timestamp=(new Date).getTime(),this.isDoneLoading=!0},e.prototype.cancelThrottlingInterval=function(){this.cancelTimeout&&(this.$timeout.cancel(this.cancelTimeout),this.initPlaceholders()),this.onPresetsLoadingFinished()},e.prototype.onDragStart=function(e,t){var i=this.getSelectedPreviewData(t,"drag");t.selectionData=i,this.consumerBiLogger.sectionManagement.addSectionToPageStartDragging(i.sectionType,i.sectionAlias,i.origin,i.totalPreviews,i.selectedIndex,i.presetId,i.addType,i.appId),this.overlayManager.data.draggedPresetPreview=t},e.prototype.onDrop=function(){var t=this,i=this.overlayManager.data.draggedPresetPreview,n=i.selectionData;this.reportBIStart(n),this.spinnerService.waitForMe(e.SpinnerDropSection),this.handlePreviewSelected(i).then(function(i){t.onSectionAdded(i),t.reportBISuccess(i,n),t.spinnerService.imDone(e.SpinnerDropSection)})},e.prototype.onDragEnd=function(e){this.overlayManager.data.draggedPresetPreview=null},e.prototype.onCanceled=function(e){this.dropTargetCalculator.updateDropTarget()},e.prototype.onPresetPreviewBeforeRender=function(e){this.doNotUpdatePresetConfiguration||this.sectionManager.setConfigurationForSection(e)},e.prototype.onHoverPreview=function(t,i){var n=angular.element(t.currentTarget),o=n.find(e.PreviewContainerSelector),r=n.find(e.PreviewSlideShowSelector),a=o.find(e.TpaPreviewSelector),s=n.find(e.PreviewFlagSelector);if(!a[0]||a.closest(".preview-section["+this.isLoadedAttr+"=true]")[0]){var l=o.height(),d=n.height()-n.find(".browser-toolbar").height()-n.find(".browser-bottom").height();if(i){0===r.length&&s.hide();var u=l-d;o.css({"margin-top":Math.min(-u,0),transition:"margin-top "+u/80+"s .15s"}),c.each(o.find(".video-bg"),function(e){return e.play()}),r.trigger("preview-slide-show-start")}else r.trigger("preview-slide-show-stop"),o.css({"margin-top":0,transition:"margin-top 1s"}),c.each(o.find(".video-bg"),function(e){return e.pause()}),s.show()}},Object.defineProperty(e.prototype,"isMenuVisible",{get:function(){if(this.assistantManager.isInActiveTask()){var e=this.assistantManager.getCustomTaskData("showSectionDesignMenu");if(void 0!==e)return e}return this.shouldShowMenu},enumerable:!0,configurable:!0}),e.prototype.shouldShowCabbie=function(e){return e&&(this.isHeaderPreview(e)||this.flags.mergedHeaderPhase2&&this.isGeneralDescription(e.node))},e.prototype.getSitePart=function(e){return e||console.error("preview is not defined"),this.isHeaderPreview(e)?this.sitePartTypes.HEADER:this.sitePartTypes.FOOTER},e.prototype.showSectionDesignMenu=function(e){if(this.flags.mergedHeader&&this.shouldShowCabbie(e)){var t={target:angular.element('[data-hook="customize-design-button"]'),containerWindowSelector:".preview-list",contentSelector:".intro-tooltip-content",element:"header-design-menu",cabClassContainer:"header-design-menu-cab",onCloseTimeout:500,addClassToBody:"header-design-cab",closeWhenClickOn:["go-to-site-color"],attributes:{onDesignUpdated:this.handleCurrentPreviewUpdate,sitePart:this.getSitePart(e)}};this.cabbieHover.show(t)}else this.flags.invertTpaPalette&&this.isTpaSelected(e)||(this.shouldShowMenu=!0)},e.prototype.hideSectionDesignMenu=function(){this.shouldShowMenu=!1},e.prototype.isPresetResponsive=function(e){var t=e.preset&&c.get(e.preset,"data.groups");return c.some(t,function(e){return e.columns&&e.columns.enable})},e.prototype.shouldShowCustomizeDesignDropdown=function(e){return!this.applicationState.isAddSectionMode()&&!this.applicationState.isAddPage()&&!this.applicationState.isInMobileEditMode()&&!this.applicationState.isSectionColorsMode()&&(!e.isTpa||this.modelTree.canInvertTpa(e.node))&&(!this.flags.mergedHeader&&!this.isGeneralDescriptionPreview(e)||this.flags.mergedHeader&&!this.isFooterPreview(e)||this.flags.mergedHeaderPhase2)},e.prototype.printPrettyAlgoInfo=function(e){console.log(e.prettyAlgo)},e.prototype.prettyAlgoGetRuleNames=function(e){return e.prettyAlgo&&e.prettyAlgo.rules?e.prettyAlgo.rules.map(function(e){return e.name}):[]},e.prototype.printBgOpacityData=function(e){console.log("opacityDebugData: "),c.each(e.solution,function(e){c.each(e.opacityDebugData,function(e,t){console.log(t,":",e)})})},e.prototype.previewHeaderWithFirstSection=function(e){var t=e.children[1];if(t){var i=this.solutionFetcher.getSectionSolution.bind(this.solutionFetcher)(e.id,t.id);this.firstSectionPreview=this.presetHelpers.createCurrentSectionPreview(t.id,i)}},e.prototype.wrapWithSiblingsIfNeeded=function(e){if(this.flags.mergedHeader&&this.firstSectionPreview){if(this.cachedSiblings.has(e))return this.cachedSiblings.get(e);var t=this.presetHelpers.wrapHeaderWithFirstSectionPreviews(e,this.firstSectionPreview);return this.cachedSiblings.set(e,t),t}return e},e.prototype.reCalculatePresets=function(){var e=this;this.previews.filter(function(e,t){return t>0}).forEach(function(t){c.includes(t.flags,"mergeHeader")||e.strategy.calculatePresetPreview(t)})},e.prototype.getPresetButtonText=function(e){return this.$translate.instant(this.flags.invertTpaPalette&&this.isTpaSelected(e)?"builder.section-design.change-colors":"builder.section-design.customize-design")},e.prototype.goToColorationPanel=function(e){this.flags.invertTpaPalette&&this.isTpaSelected(e)&&this.applicationState.goToSectionColorPanel(l.BIOrigins.TpaSectionPanel)},e.PreviewListWidth=360,e.MobilePreviewListWidth=276,e.PreviewListScale=.25,e.PreviewContainerSelector=".preview-content",e.TpaPreviewSelector="tpa-preview",e.PreviewFlagSelector=".preview-flag-message",e.PreviewListSelector=".preview-list",e.PreviewSlideShowSelector="preset-preview .slide-show-film",e.SpinnerAddBlankPage="addblankpage",e.SpinnerAddSection="addsection",e.SpinnerDropSection="dropsection",e}();t.PreviewList=d},function(e,t,i){e.exports=i(104)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(14),o=i(0),r=function(){return function(e,t){this.header=e,this.tpa=t}}(),a=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u){this.presetsStrategyFactory=e,this.$q=t,this.defaultSections=i,this.contentSource=n,this.menuService=o,this.applicationParameters=r,this.assistantUtils=a,this.defaultContent=s,this.siteModelData=l,this.$translate=c,this.modelTree=d,this.flags=u}return e.$inject=["presetsStrategyFactory","$q","defaultSections","contentSource","menuService","applicationParameters","assistantUtils","defaultContent","siteModelData","$translate","modelTree","flags"],e.prototype.extractPresetPreview=function(e,t,i,n){var o=this;t!==e.length?i.calculatePresetPreview(e[t]).then(function(r){r?n.resolve(r):o.extractPresetPreview(e,++t,i,n)}):n.reject("couldn't find preset")},e.prototype.getTpaAnchors=function(e,t,i,n){var r=this;if(o.some(e)){this.addAliasToHeaders(e);var a=e.map(function(e){return e.tpa}),s=e.map(function(e){return e.header}),l=o.filter(s,function(e){return!r.nodeHasAnchorMenu(e)});o.some(n)&&(s=o.reject(s,function(e){return e.id===n[0].id}),l=o.reject(l,function(e){return e.id===n[0].id})),t=(t=t.filter(function(e){return-1===a.findIndex(function(t){return t.id===e.id})})).concat(l.filter(function(e){return-1===t.findIndex(function(t){return t.id===e.id})})),i=(i=i.filter(function(e){return-1===s.findIndex(function(t){return t.id===e.id})})).concat(a.filter(function(e){return-1===i.findIndex(function(t){return t.id===e.id})}))}return{nodesToSetAnchor:t,nodesToRemoveAnchor:i}},e.prototype.addAliasToHeaders=function(e){o.each(e,function(e){e.header.alias=e.tpa.alias})},e.prototype.getTpaHeaderArray=function(e){for(var t=[],i=0,n=e.length;i<n-1;){var o=e[i];if(this.isTpaHeader(o)){var a=this.modelTree.getPageNodeById(o.containerPageId),s=this.getNextNodeInPage(o,a);s&&s.isTpaNode()&&this.isSupportHeader(s.contentElementType)&&(t.push(new r(o,s)),i++)}i++}return t},e.prototype.get=function(e){var t,i=this,o=this.prepareTpaDraft(e),r=this.$q.defer();return(t=this.presetsStrategyFactory.createFromNode(o,{strategyMode:n.PresetsStrategyMode.Change})).generateListOfPreviews([o]).then(function(e){i.extractPresetPreview(e,0,t,r)}),r.promise},e.prototype.prepareTpaDraft=function(t){var i=this.contentSource.prepareDrafts(this.getSuggestionByTypa(t.contentElementType))[0],n=this.contentSource.prepareDrafts(this.getSuggestionByTypa(e.TPA_HEADER_CE_TYPE))[0],o=this.modelTree.createNodeFromCE(n,"999."+n.type+"_0");return this.copyTpaValues(o.contentElement,i.values),this.setDefaultValues(o.contentElement.values),delete o.contentElement.values[t.contentElementType],this.addArgsMatchingPolicy(o),o},e.prototype.nodeHasAnchorMenu=function(e){return!!this.menuService.getLinkToNode(e)},e.prototype.hasDefaultValues=function(e){return o.includes(["TpaHeaderTitle","TpaHeaderBody","TpaHeaderSubtitle","button"],e)},e.prototype.copyTpaValues=function(e,t){Object.keys(e.values).forEach(function(i){var n=o.values(t).find(function(t){return t.subType===e.values[i].subType});e.values[i]=n?o.cloneDeep(n):e.values[i]})},e.prototype.setDefaultValues=function(t){var i=this;o.each(t,function(t,n){if(i.hasDefaultValues(n)&&!t.value){var o=i.siteModelData.calcNodeType(e.TPA_HEADER_CE_TYPE,!1,"");t.value=i.defaultContent.ValuesData[o][n]}})},e.prototype.getSuggestionByTypa=function(e){var t=this.defaultSections.getSectionOfceType(e);return{ceType:t.ceType,id:t.id,rawSectionBrief:t}},e.prototype.addArgsMatchingPolicy=function(e){var t=Object.keys(e.contentElement.values).reduce(function(t,i){return t[i]=e.contentElement.values[i].subType===core.ElementSubTypes.Title,t},{});e.argsMatchingPolicy=t,e.contentElement.setArgsMatchingPolicy(t)},e.prototype.isBlogAsHP=function(e){var t=this.applicationParameters.tpaTypes.Blog.type;return e===t&&this.assistantUtils.shouldAutoProvisionTPAOfType(t)},e.coreContentElementType=function(e){return o.find(core.contentElementTypes,function(t){return!(t.description!==e.type||!o.get(t,"extraData.All.properties.isTpaWidget")&&!o.get(t,"extraData.All.properties.isTpa"))})},e.addExtraFields=function(t){var i=e.coreContentElementType(t);i&&(core.TpaWidgetTypes[i.description]||core.TpaSectionTypes[i.description])&&o.each(core.tpaExtraFieldsForTpaHeader,function(e){t.values[e.name]=e})},e.prototype.isSupportHeader=function(e){return o.includes(["Music_Widget","Stores","Stores_Product_specific_Widget","Stores_Grid_Gallery_Widget","Stores_Slider_Gallery_Widget","BandsInTown_Widget","Video_Widget","ProGallery_Widget","Bookings_Widget","Blog","Blog_Post_Gallery"],e)&&!this.isBlogAsHP(e)},e.prototype.getNodeIndex=function(e,t){var i=o.filter(t.children,function(e){return"PageHeader"!==e.contentElementType});return o.findIndex(i,function(t){return t.id===e.id})},e.prototype.isDeleteRelatedTpaHeader=function(e){return o.includes(["Stores_Slider_Gallery_Widget","Stores_Product_specific_Widget","Stores_Grid_Gallery_Widget","Blog_Post_Gallery"],e.contentElementType)},e.prototype.getTpaHeadersOfWidget=function(e){var t=this,i=[];return o.each(e,function(e){var n=t.modelTree.getPageNodeById(e.containerPageId),o=t.getPrevNodeInPage(e,n);o&&t.isTpaHeader(o)&&t.isDeleteRelatedTpaHeader(e)&&i.push(o)}),i},e.prototype.getPrevNodeInPage=function(e,t){var i=this.getNodeIndex(e,t),n=o.filter(t.children,function(e){return"PageHeader"!==e.contentElementType});return i-1<0?null:n[i-1]},e.prototype.updateAfterDelete=function(e){var t=this.modelTree.getPageNodeById(e.containerPageId),i=this.getPrevNodeInPage(e,t);i&&this.isTpaHeader(i)&&(i.alias=this.$translate.instant("builder.sections.Tpa_Header"))},e.prototype.getNextNodeInPage=function(e,t){var i=this.getNodeIndex(e,t),n=o.filter(t.children,function(e){return"PageHeader"!==e.contentElementType});return i+1>=n.length?null:n[i+1]},e.prototype.isTpaHeader=function(t){return t.contentElementType===e.TPA_HEADER_CE_TYPE},e.prototype.isTpaHasHeader=function(t,i){return!!this.isSupportHeader(i[t].contentElementType)&&(t>0&&i[t-1].contentElementType===e.TPA_HEADER_CE_TYPE)},e.TPA_HEADER_CE_TYPE="Tpa_Header",e.TPA_HEADER_ID="Tpa Header",e}();t.TPAHeader=a,angular.module("siteGeneratorEditorInternal").service("tpaHeader",a)},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(187),r=i(2),a=i(26),s=i(179),l=i(0);t.EditTypes={settings:"settings",design:"design"};var c="design-menu",d="edit",u=function(){function e(i,o,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H,O,_,D,$,N,x){var R=this;this.applicationParameters=i,this.storyServices=o,this.$q=c,this.$p=d,this.$state=u,this.$stateParams=p,this.sitePartTypes=g,this.$rootScope=h,this.renderedModelApi=m,this.mobileRenderedModelApi=f,this.$translate=v,this.designKit=S,this.notify=y,this.previewService=T,this.modelTree=b,this.tipManager=I,this.clientTopology=P,this.pagesManager=M,this.tpaService=E,this.flags=w,this.consumerBiLogger=C,this.assistantManager=A,this.overlayManager=L,this.spinnerService=B,this.visualValidation=k,this.siteState=H,this.layoutSolver=O,this.$window=_,this.slideShowService=D,this.$timeout=$,this.modelRenderGoToEditor=N,this.consumerBiLoggerHelpers=x,this.ignoreStateSaving=[n.STATES.BUILDER_ADD_SECTION],this.mobileViewVisible=!1,this.isCroppperMode=!1,this._isRenderAndReturnToDesktop=!1,this._steady=!0,this.previewFrameWidth=this.flags.largerStage?1920:this.flags.removeSpinnerAsStageReady?1140:1040,this._isGoToEditorState=!1,this._isMobileEditorEnabled=!1,this._pagePrettyRulesMode=s.ePrettyPageRulesMode.rulesOff,this.customAddMode=!1,this.isPublishing=!1,this.calculateAndRenderDesktopAndMobilePages=function(e,t,i,n){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=!1);var o=R.modelTree.getPagesNodes().filter(function(t){return"current"!==e||R.storyServices.story.selectedPage===t.id}),r=R.isInDesktopEditMode()&&i||t;return R._isRenderAndReturnToDesktop=r,R.$p.when().then(function(){return R.storyServices.prepareForMobileRendering(o,t)}).then(function(){return R.storyServices.renderMobilePages(o,t,n)}).then(function(){return r?R.disableMobileEditor():void 0}).finally(function(){return R._isRenderAndReturnToDesktop=!1})},this.generateRandomOffset=function(e,t){return void 0===t&&(t=101),R.flags.noRandomForAutomationTests?0:R.storyServices.generateRandomOffset(e,t)},this.isInEditListMode=function(){return R.isInEditMode()&&!R.$state.params.childId},this.isTemplatesUser=function(){return R.clientTopology.isTemplatesUser},this.isSupportStaffEditing=function(e){return(e||l.isUndefined(R.supportStaffEditing))&&(R.isWixStaff()||R.clientTopology.isImpersonatedUser?R.supportStaffEditing=R.clientTopology.isImpersonatedUser||R.storyServices.story&&R.storyServices.story.dbStory&&!R.storyServices.story.dbStory.isStoryOwner&&!R.flags.templateSite:R.supportStaffEditing=!1),R.supportStaffEditing},this.isSilent=function(){return Boolean("true"===R.$state.params.silent||R.isSilentInTour()||R.flags.silentMode)},this.isSilentInTour=function(){return!R.assistantManager.allowDialogInterruptions()},this.isAddPage=function(){return R.$state.current.name===n.STATES.BUILDER_ADD_PAGE},this.isContentFocusEnabled=function(){return R.$state.current.name!==n.STATES.BUILDER_ADD_SECTION},this.getContentFocus=function(){return R.contentFocus},this.clearContentFocus=function(){R.contentFocus=null,R.overlayManager.updateContentFocus(null)},this.setContentFocus=function(e,t,i){if(void 0===i&&(i=!1),i||R.isContentFocusEnabled()){var n={nodeId:e,sitePart:t};(R.flags.lodash4?l.isEqual:l.eq)(n,R.contentFocus)||(R.contentFocus=n,R.overlayManager.updateContentFocus(R.contentFocus))}},this.refreshContentFocus=function(){R.overlayManager.updateContentFocus(R.contentFocus)},this.setStoryMetadata=function(e){R.storyMetadata=e},this.getStoryMetadata=function(){return R.storyMetadata},this.getSelectedTpaComponentRef=function(){return R.selectedTpaComponentRef},this.setSelectedTpaComponentRef=function(e){R.selectedTpaComponentRef=e},this.goToDesignMode=function(){if(R.flags.cardsToPanels&&R.isInDesignKitArea())return R.goToSubPanel(n.STATES.BUILDER_DESIGN_KITS);R.builderSubStateToggle(n.STATES.BUILDER_DESIGN_KITS)},this.goToPagesPanel=function(){return R.$state.go(n.STATES.BUILDER_PAGES)},this.goToIntro=function(){return R.$state.go(n.STATES.INTRO)},this.goToIntroCategorySearch=function(){return R.$state.go(n.STATES.INTRO_CATEGORY_SEARCH)},this.goToDesignKitMode=function(){return R.clearContentFocus(),R.$state.go(n.STATES.BUILDER_DESIGN_KIT)},this.goToColorationPanel=function(){return R.clearContentFocus(),R.flags.cardsToPanels&&R.isInDesignKitArea()?R.goToSubPanel(n.STATES.BUILDER_DESIGN_KIT_COLORATION):R.$state.go(n.STATES.BUILDER_DESIGN_KIT_COLORATION)},this.goToAdvancedPaletteEditing=function(){return R.clearContentFocus(),R.flags.cardsToPanels&&R.isInDesignKitArea()?R.goToSubPanel(n.STATES.BUILDER_DESIGN_KIT_COLORATION_ADVANCED):R.$state.go(n.STATES.BUILDER_DESIGN_KIT_COLORATION_ADVANCED)},this.goToFontsPanel=function(e){return R.clearContentFocus(),R.consumerBiLogger.siteDesign.customizeDesignSubPanelIsLoaded("font",e),R.flags.cardsToPanels&&R.isInDesignKitArea()?R.goToSubPanel(n.STATES.BUILDER_DESIGN_KIT_FONTS_NEW):R.$state.go(n.STATES.BUILDER_DESIGN_KIT_FONTS_NEW)},this.goToAnimationPanel=function(e){return R.clearContentFocus(),R.consumerBiLogger.siteDesign.customizeDesignSubPanelIsLoaded("animation",e),R.flags.cardsToPanels&&R.isInDesignKitArea()?R.goToSubPanel(n.STATES.BUILDER_DESIGN_KIT_ANIMATIONS):R.$state.go(n.STATES.BUILDER_DESIGN_KIT_ANIMATIONS)},this.goToSignupPanel=function(){return R.goToSubPanel(n.STATES.BUILDER_PAGES_MEMBERS_SIGNUP_SETTINGS)},this.goToMediaSettingsPanel=function(e){return R.$state.go(n.STATES.BUILDER_NEW_MEDIA_SETTINGS,{contentId:R.toContentId(R.contentFocus),childId:e})},this.isInSignupSettings=function(){return R.$state.includes(n.STATES.BUILDER_PAGES_MEMBERS_SIGNUP_SETTINGS)},this.isInSectionMediaSettingsPanel=function(){return R.$state.includes(n.STATES.BUILDER_NEW_MEDIA_SETTINGS)},this.isInPresetSectionMedia=function(){return-1!==R.$state.current.name.indexOf(n.STATES.BUILDER_SECTION_MEDIA)},this.isInEditSectionMedia=function(){return R.$state.includes(n.STATES.BUILDER_SECTION_MEDIA_EDIT)},this.isInEditPatterns=function(){return R.$state.includes(n.STATES.BUILDER_EDIT_PATTERNS)},this.isInEditLogin=function(){return R.$state.current.name===n.STATES.BUILDER_EDIT&&R.childId()===e.LOGIN&&R.isHeaderContent()},this.goToSectionMediaPanel=function(e){R.consumerBiLoggerHelpers.openedPanelStack.push("media settings");var t=R.getSectionMediaState();return R.goToSubPanel(t,{contentId:R.toContentId(R.contentFocus),childId:e})},this.goToSectionAnimationPanel=function(){var e=R.toContentNode(R.contentFocus);R.consumerBiLogger.sectionDesign.animationPanelOpened(e.alias,e.getContentElementType(),"");var t={contentId:R.toContentId(R.contentFocus)};return R.flags.cardsToPanels?R.flags.largerStage&&R.isInEditMode()?R.slideShowService.isSlideShow(e)?R.goToSubPanel(n.STATES.BUILDER_SLIDESHOW_ANIMATIONS_EDIT,t):R.goToSubPanel(n.STATES.BUILDER_SECTION_DESIGN_ANIMATIONS_EDIT,t):R.slideShowService.isSlideShow(e)?R.goToSubPanel(n.STATES.BUILDER_SLIDESHOW_ANIMATIONS,t):R.goToSubPanel(n.STATES.BUILDER_SECTION_DESIGN_ANIMATIONS,t):R.slideShowService.isSlideShow(e)?R.$state.go(n.STATES.BUILDER_SLIDESHOW_ANIMATIONS,t):R.$state.go(n.STATES.BUILDER_SECTION_DESIGN_ANIMATIONS,t)},this.goToSlideshowAnimationPanel=function(){var e=R.toContentNode(R.contentFocus);R.consumerBiLogger.sectionDesign.animationPanelOpened(e.alias,e.getContentElementType(),"slideshow");var t={contentId:R.toContentId(R.contentFocus)};return R.flags.cardsToPanels?R.goToSubPanel(n.STATES.BUILDER_SLIDESHOW_ANIMATIONS,t):R.$state.go(n.STATES.BUILDER_SLIDESHOW_ANIMATIONS,t)},this.isInSectionOrSlideShowAnimationPanel=function(){return R.isInSectionAnimationPanel()||R.isInSlideShowAnimationPanel()},this.isInSectionAnimationPanel=function(){return-1!==R.$state.current.name.indexOf(n.STATES.BUILDER_SECTION_DESIGN_ANIMATIONS)},this.isInSlideShowAnimationPanel=function(){return-1!==R.$state.current.name.indexOf(n.STATES.BUILDER_SLIDESHOW_ANIMATIONS)},this.goToSectionBackgroundPanel=function(e,t){R.reportBiForSectionBackgroundPanel(e,R.getBackgroundModeForBi());var i={contentId:R.toContentId(R.contentFocus),mode:t};if(R.flags.cardsToPanels){var o=R.getPatternsState();return R.goToSubPanel(o,i)}return R.$state.go(n.STATES.BUILDER_SECTION_DESIGN_BACKGROUND,i)},this.goToSectionHeaderBackgroundPanel=function(e){return R.reportBiForSectionBackgroundPanel(e,R.getBackgroundModeForBi()),R.$state.go(n.STATES.BUILDER_SECTION_DESIGN_BACKGROUND,{contentId:R.toContentId(R.contentFocus),mode:n.BACKGROUND_PANEL_MODE.HEADER_MODE})},this.goToSectionListBackgroundPanel=function(e){return e&&R.reportBiForSectionBackgroundPanel(e,R.getBackgroundModeForBi()),R.$state.go(n.STATES.BUILDER_SECTION_DESIGN_BACKGROUND,{contentId:R.toContentId(R.contentFocus),mode:n.BACKGROUND_PANEL_MODE.LIST_MODE})},this.isInSectionBackgroundPanel=function(){return R.$state.includes(n.STATES.BUILDER_SECTION_DESIGN_BACKGROUND)},this.goToSectionColorPanel=function(e){var t=R.toContentNode(R.contentFocus);R.consumerBiLogger.sectionDesign.colorPanelOpened(t.alias,t.getContentElementType(),e);var i={contentId:R.toContentId(R.contentFocus)};if(R.flags.cardsToPanels){if(R.isSwitchPresetMode())return R.goToSubPanel(n.STATES.BUILDER_SECTION_DESIGN_COLORS,i);if(R.flags.largerStage&&R.isInEditMode())return R.goToSubPanel(n.STATES.BUILDER_SECTION_DESIGN_COLORS_EDIT,i)}return R.$state.go(n.STATES.BUILDER_SECTION_DESIGN_COLORS,i)},this.isInSectionColorPanel=function(){return-1!==R.$state.current.name.indexOf(n.STATES.BUILDER_SECTION_DESIGN_COLORS)},this.goToSectionFontPanel=function(){var e=R.toContentNode(R.contentFocus);R.consumerBiLogger.sectionDesign.fontPanelOpened(e.alias,e.getContentElementType());var t={contentId:R.toContentId(R.contentFocus)};return R.flags.cardsToPanels?R.flags.largerStage&&R.isInEditMode()?R.goToSubPanel(n.STATES.BUILDER_SECTION_DESIGN_FONTS_EDIT,t):R.goToSubPanel(n.STATES.BUILDER_SECTION_DESIGN_FONTS,t):R.$state.go(n.STATES.BUILDER_SECTION_DESIGN_FONTS,t)},this.isInSectionFontPanel=function(){return-1!==R.$state.current.name.indexOf(n.STATES.BUILDER_SECTION_DESIGN_FONTS)},this.goToAddSectionMode=function(){R.builderSubStateToggle(n.STATES.BUILDER_ADD_SECTION)},this.goToAddPageMode=function(){return R.clearContentFocus(),R.$state.go(n.STATES.BUILDER_ADD_PAGE)},this.goToAddAppMode=function(){return R.clearContentFocus(),R.$state.go(n.STATES.BUILDER_ADD_APP)},this.goToSectionPanel=function(e,i){return R.isSwitchPresetMode()&&i!==t.EditTypes.design?R.goToSwitchPresetMode(e):R.isInSectionFontPanel()?R.goToSectionFontPanel():R.isInSectionColorPanel()?R.goToSectionColorPanel(e):R.isInSectionOrSlideShowAnimationPanel()?R.goToSectionAnimationPanel():R.isInSectionBackgroundPanel()?R.toContentNode(R.contentFocus).isList()?R.goToSectionListBackgroundPanel(e):R.goToSectionBackgroundPanel(e):R.goToEditMode(i)},this.goToPreview=function(e,t){return R.flags.newTopBar&&R.flags.newPreviewMode&&(R.firstTimePreview=t),e&&!l.includes(R.ignoreStateSaving,R.$state.current.name)?R.savedState={state:R.$state.$current,params:l.assign(l.clone(R.$stateParams),R.getContentFocus())}:R.savedState=null,R.clearContentFocus(),R.storyServices.nodesRefMap={},R.siteState.setSiteScale(1),R.flags.membersArea&&(R.modelRenderGoToEditor.updateSantaColorPalette(),R.modelRenderGoToEditor.updateAllSantaStyles()),(R.isInMobileEditMode()?R.storyServices.calculateAndRenderDesktopAndMobilePages("all"):R.storyServices.calculateAndRenderAllPages(!1)).then(function(){return R.notify.closeAll(),R.previewService.setPreviewMode(!0),R.$state.go(n.STATES.BUILDER_STORY_PREVIEW,null,{location:"replace"}).then(function(){!R.isFirstTimePreview()&&r.PubSub.fire(r.events.PREVIEW_ENTERED)})})},this.returnFromPreview=function(){return R.flags.newTopBar&&R.flags.newPreviewMode?R.savedState?R.$state.go(R.savedState.state,R.savedState.params,{location:"replace"}).then(function(){R.firstTimePreview=!1}):R.goToBuilder().then(function(){R.firstTimePreview=!1}):R.savedState?R.$state.go(R.savedState.state,R.savedState.params,{location:"replace"}):R.goToBuilder()},this.builderSubStateToggle=function(e,t){if(void 0===t&&(t={}),R.$state.current.name.indexOf(e+".")>-1)return R.tipManager.hide(),R.goToBuilder(!1);R.clearContentFocus();var i=e!==R.$state.current.name||R.flags.dontGoToPage&&t.pageId!==R.$state.params.pageId;return R.$state.transitionTo(e,t,{location:!0,inherit:!0,relative:R.$state.$current,notify:i})},this.getPageNodeInFocus=function(){var e=R.storyServices.story&&R.storyServices.story.selectedPage;return R.modelTree.getNodeById(e)},this.getPageInFocus=function(){var e=R.getPageNodeInFocus();return{name:e&&e.getDisplayName(),managable:e&&"Blog_Single_Post_Widget"!==e.tpaExtraPage}},this.goToBuilder=function(e,t){var i;return void 0===e&&(e=!1),R.overlayManager.clearDropTarget(),R.isPreviewDisplay()&&(R.previewService.setPreviewMode(!1),R.pagesManager.goToPage(R.storyServices.story.selectedPage)),i=t?R.$state.go(n.STATES.BUILDER_STORY,{storyId:t},{reload:!0}):R.$state.go(n.STATES.BUILDER_STORY,null,{reload:!0}),e&&R.clearContentFocus(),i},this.goToBuilderDeepLink=function(e,t,i){var o={industryId:t,structureId:e,businessName:i};R.$state.transitionTo(n.STATES.BUILDER,o,{reload:!0})},this.goToPageManager=function(){R.builderSubStateToggle(n.STATES.BUILDER_PAGES)},this.goToPage=function(e){return R.overlayManager.clearDropTarget(),R.builderSubStateToggle(n.STATES.BUILDER_SELECTED_PAGE,{pageId:e})},this.goToPageSeo=function(e){R.overlayManager.clearDropTarget(),R.builderSubStateToggle(n.STATES.BUILDER_PAGES_SEO,{pageId:e})},this.goToMobilePage=function(e,t){if(void 0===t&&(t=!1),R.isInMobileEditMode()&&R.storyServices.story.selectedPage===e||R.goToMobilePagePromise)return R.goToMobilePagePromise||R.$q.when();var i=R.modelTree.getPageNodeById(e);return i?(R.goToMobilePagePromise=R.$q.when().then(function(){return R.maybeApplyAnimation(!0,"switchEditModeStart",3e3,!0)}).then(function(){R.isInDesktopEditMode()&&R.goToBuilder()}).then(function(){R.storyServices.story.selectedPage=e,R.storyServices.story.mobileEditorActive=!0}).then(function(){return R.storyServices.prepareForMobileRendering([i])}).then(function(){return R.enableMobileEditor()}).then(function(){return R.storyServices.renderMobilePages([i],!1,t)}).then(function(){return R.pagesManager.goToPage(e)}).finally(function(){R.goToMobilePagePromise=void 0,R.maybeApplyAnimation(!1,"switchEditModeEnd")}),R.goToMobilePagePromise):(console.log("goToMobilePage: got no page"),R.$q.when())},this.isOnAddState=function(){return R.$state.includes(n.STATES.BUILDER_ADD_SECTION)},this.isInEditMode=function(){return R.$state.includes(n.STATES.BUILDER_EDIT)&&!R.isTpaDesignMode()},this.inIntroMode=function(){return R.$state.includes(n.STATES.INTRO)},this.goToEditMode=function(e,t){return R.overlayManager.clearDropTarget(),R.$state.go(n.STATES.BUILDER_EDIT,{contentId:R.toContentId(R.contentFocus),childId:e,panelType:t})},this.goToEditChildMode=function(e){var t={contentId:R.toContentId(R.contentFocus),childId:e};return R.goToSubPanel(n.STATES.BUILDER_EDIT,t)},this.goToSubPanel=function(e,t){void 0===t&&(t={});var i=R.$state.$current,n=R.$stateParams,o={location:!0,inherit:!0,relative:i,notify:!1};return R.$state.transitionTo(e,t,o).then(function(e){R.$rootScope.$emit("$stateChangeSuccess",e,t,i,n)})},this.goToSwitchPresetMode=function(e){R.overlayManager.clearDropTarget();var t=R.toContentNode(R.contentFocus);t&&R.consumerBiLogger.sectionManagement.replaceSectionPanelIsLoaded(t.getId(),t.getSpecificContentElementType(),t.alias,e);var i={contentId:R.toContentId(R.contentFocus)};return R.flags.cardsToPanels&&(R.isSwitchPresetArea()||R.isSectionHeightMode())?R.goToSubPanel(n.STATES.BUILDER_SWITCH_PRESET,i):R.$state.go(n.STATES.BUILDER_SWITCH_PRESET,i)},this.goToSectionHeight=function(){var e={contentId:R.toContentId(R.contentFocus)};return R.flags.cardsToPanels?R.flags.largerStage&&R.isInEditMode()?R.goToSubPanel(n.STATES.BUILDER_SWITCH_PRESET_SECTION_HEIGHT_EDIT,e):R.goToSubPanel(n.STATES.BUILDER_SWITCH_PRESET_SECTION_HEIGHT,e):R.$state.go(n.STATES.BUILDER_SWITCH_PRESET_SECTION_HEIGHT,e)},this.goToImportPagePanel=function(){return R.$state.go(n.STATES.BUILDER_IMPORT_PAGE)},this.isBodyContent=function(){return R.contentFocus&&R.contentFocus.sitePart===R.sitePartTypes.BODY},this.isFooterContent=function(){return R.contentFocus&&R.contentFocus.sitePart===R.sitePartTypes.FOOTER},this.isHeaderContent=function(){return R.contentFocus&&R.contentFocus.sitePart===R.sitePartTypes.HEADER},this.isAddSectionMode=function(){return R.$state.current.name===n.STATES.BUILDER_ADD_SECTION},this.isEditMode=function(){return R.$state.current.name===n.STATES.BUILDER_EDIT},this.isSwitchPresetMode=function(){return R.$state.current.name===n.STATES.BUILDER_SWITCH_PRESET||R.isEditMode()&&R.isTpaDesignMode()},this.isTpaDesignMode=function(){return R.$stateParams.panelType===t.EditTypes.design},this.isSwitchPresetArea=function(){return R.isInPresetSectionMedia()||R.isInSectionBackgroundPanel()||R.isSectionColorsMode()||R.isInSectionFontPanel()||R.isInSectionOrSlideShowAnimationPanel()},this.isSelectedPageMode=function(){return R.$state.current.name===n.STATES.BUILDER_SELECTED_PAGE},this.isPagesPanelOpen=function(){return R.isSelectedPageMode()||R.$state.current.name===n.STATES.BUILDER_PAGES},this.isSectionColorsMode=function(){return-1!==R.$state.current.name.indexOf(n.STATES.BUILDER_SECTION_DESIGN_COLORS)},this.isMediaSettingsActive=function(){return R.$state.current.name===n.STATES.BUILDER_MEDIA_SETTINGS},this.isSeoPanelActive=function(){return R.$state.current.name===n.STATES.BUILDER_PAGES_SEO},this.isBuilderMode=function(){return R.$state.current.name===n.STATES.BUILDER_STORY},this.isAddAppMode=function(){return R.$state.current.name===n.STATES.BUILDER_ADD_APP},this.isSwitchDesignMode=function(){return R.isSectionColorsMode()||R.isSwitchPresetMode()},this.isInAnyEditOrDesignOfSectionPanel=function(){return R.isInEditMode()||R.isSwitchDesignMode()||R.isInSectionBackgroundPanel()||R.isInSectionFontPanel()||R.isInSectionOrSlideShowAnimationPanel()||R.isInSectionMediaSettingsPanel()||R.isInEditSectionMedia()},this.isPreviewDisplay=function(){return R.$state.current.name===n.STATES.BUILDER_STORY_PREVIEW},this.previewRevision=function(){return R.isPreviewDisplay()?R.flags.previewRevision:null},this.isMobilePreviewDisplay=function(){return R.mobileViewVisible},this.setMobilePreviewDisplay=function(e){R.mobileViewVisible=e},this.mobilePreviewUrl=function(e){return e?R._mobilePreviewUrl=e:R._mobilePreviewUrl},this.mobilePreviewPageId=function(e){return e?R._mobilePreviewPageId=e:R._mobilePreviewPageId},this.setCropperMode=function(e){R.isCroppperMode=e},this.isInCropperMode=function(){return R.flags.updatedCropper&&R.isCroppperMode},this.onStateChangeSuccess=function(e,t,i,o){if(R._isMobileEditorEnabled&&!t.mobile&&R.disableMobileEditor(!1),i.contentId){var r=R.toContentFocus(i.contentId);(R.flags.lodash4?l.isEqual:l.eq)(r,R.contentFocus)||(R.contentFocus=r,R.overlayManager.updateContentFocus(R.contentFocus))}o&&o.name===n.STATES.BUILDER_STORY_PREVIEW&&R.pagesManager.goToPage(R.storyServices.story.selectedPage)},this.init=function(){R.$rootScope.$on("$stateChangeSuccess",R.onStateChangeSuccess.bind(R)),R.$rootScope.$on("$stateChangeError",function(e,t,i,n,o){console.log(e)}),R.onStateChangeSuccess(void 0,R.$state.current,R.$state.params)},this.setGoToEditorState=function(e){R._isGoToEditorState=e},this.isGoToEditorState=function(){return R._isGoToEditorState},this.isInMobileEditMode=function(){return R._isMobileEditorEnabled},this.isInDesktopEditMode=function(){return!R._isMobileEditorEnabled},this.setPrettyPageMode=function(e){R._pagePrettyRulesMode=e},this.enableMobileEditor=function(){return R.isInMobileEditMode()||R.enableMobileEditorPromise?R.enableMobileEditorPromise||R.$q.when():(R.previewFrameWidth=a.Viewer.ViewerMobileBaseSize,R.clearContentFocus(),R.enableMobileEditorPromise=R.siteState.setMobileMode(R._isRenderAndReturnToDesktop).then(function(){R.overlayManager.onEditModeSwitched(!0),R.flags.textManager&&R.flags.textManagerTours||r.PubSub.fire(r.events.SWITCH_MODE),R.clearState()}).finally(function(){R._isMobileEditorEnabled=!0,R.enableMobileEditorPromise=void 0,R.flags.textManager&&R.flags.textManagerTours&&r.PubSub.fire(r.events.SWITCH_MODE)}),R.enableMobileEditorPromise)},this.disableMobileEditor=function(e){return R.isInDesktopEditMode()||R.disableMobileEditorPromise?R.disableMobileEditorPromise||R.$q.when():(R.disableMobileEditorPromise=R.$q.when().then(function(){if(!e)return R.maybeApplyAnimation(!0,"switchEditModeStart")}).then(function(){return R.previewFrameWidth=a.Viewer.ViewerDesktopBaseSize,R.clearState(),R.clearContentFocus(),R.siteState.setDesktopMode(e,R._isRenderAndReturnToDesktop).then(function(){R.overlayManager.onEditModeSwitched(!1),R.flags.textManager&&R.flags.textManagerTours||r.PubSub.fire(r.events.SWITCH_MODE)}).finally(function(){R._isMobileEditorEnabled=!1,R.disableMobileEditorPromise=void 0,R.maybeApplyAnimation(!1,"switchEditModeEnd"),R.flags.textManager&&R.flags.textManagerTours&&r.PubSub.fire(r.events.SWITCH_MODE)})}),R.disableMobileEditorPromise)},this.setFirstTimePreview=function(e){R.firstTimePreview=e},i.registerMobileModeCallbacks(this.isInMobileEditMode.bind(this),this.enableMobileEditor.bind(this)),this.flags.removeSpinnerAsStageReady||(l.isNaN(Number.parseInt(this.flags.extraWidth,10))&&(this.flags.extraWidth=100),this.previewFrameWidth+=Number.parseInt(this.flags.extraWidth,10)),this.storyServices.calculateAndRenderDesktopAndMobilePages=this.calculateAndRenderDesktopAndMobilePages}return e.$inject=["applicationParameters","storyServices","$q","$p","$state","$stateParams","sitePartTypes","$rootScope","renderedModelApi","mobileRenderedModelApi","$translate","designKit","notify","previewService","modelTree","tipManager","clientTopology","pagesManager","tpaService","flags","consumerBiLogger","assistantManager","overlayManager","spinnerService","visualValidation","siteState","layoutSolver","$window","slideShowService","$timeout","modelRenderGoToEditor","consumerBiLoggerHelpers"],e.prototype.isRenderAndReturnToDesktop=function(){return this._isRenderAndReturnToDesktop},e.prototype.isSteady=function(){return this._steady},e.prototype.setSteady=function(e){this._steady=e},e.prototype.toContentId=function(e){if(e)return e.sitePart===this.sitePartTypes.BODY?e.nodeId:e.sitePart},e.prototype.toContentFocus=function(e){var t=this.modelTree.getGeneralInformation();return"header"===e?{sitePart:this.sitePartTypes.HEADER,nodeId:t.getId()}:"footer"===e?{sitePart:this.sitePartTypes.FOOTER,nodeId:t.getId()}:{sitePart:this.sitePartTypes.BODY,nodeId:e}},e.prototype.toContentNode=function(e){return this.modelTree.findById(e.nodeId)},e.prototype.childId=function(){return this.$stateParams.childId},e.prototype.isWixStaff=function(){return this.clientTopology.isWixStaff||this.storyServices.story&&(this.storyServices.story.userRoles.indexOf("wixStaff")>-1||this.storyServices.story.userRoles.indexOf("superuser")>-1||this.storyServices.story.userRoles.indexOf("superuser-limited")>-1)},e.prototype.goBack=function(){this.$window.history.back()},e.prototype.isInDesignKitArea=function(){return this.isSwitchKitMode()||this.isColorationMode()||this.isFontMode()||this.isAnimationMode()||this.isColorationAdvancedMode()},e.prototype.getPatternsState=function(){if(this.isInEditSectionMedia())return n.STATES.BUILDER_EDIT_PATTERNS;if(this.isInPresetSectionMedia())return n.STATES.BUILDER_SECTION_DESIGN_BACKGROUND;throw"can't detect pattern state"},e.prototype.getSectionMediaState=function(){var e=this.getSectionMediaOriginByCurrentState();switch(e){case c:return n.STATES.BUILDER_SECTION_MEDIA;case d:return n.STATES.BUILDER_SECTION_MEDIA_EDIT;default:throw"unknown SectionMediaOrigin: "+e}},e.prototype.getSectionMediaOriginByCurrentState=function(){return this.isStateInEditPanel()?d:c},e.prototype.isStateInEditPanel=function(){return-1!==this.$state.current.name.indexOf("edit")},e.prototype.getBackgroundModeForBi=function(){var e=this.$stateParams.mode;return e||"regular"},e.prototype.reportBiForSectionBackgroundPanel=function(e,t){var i=this.toContentNode(this.contentFocus);this.consumerBiLogger.sectionDesign.backgroundPanelOpened(t,e,i.alias,i.getContentElementType())},e.prototype.isSectionHeightMode=function(){return-1!==this.$state.current.name.indexOf(n.STATES.BUILDER_SWITCH_PRESET_SECTION_HEIGHT)},e.prototype.isAddMode=function(){return this.isAddSectionMode()||this.isAddPage()||this.isAddAppMode()},e.prototype.forceAddMode=function(e){this.customAddMode=e},e.prototype.isForcedAddMode=function(){return this.customAddMode},e.prototype.isLeftPanelOpen=function(){return this.isInAnyEditOrDesignOfSectionPanel()||this.isAddSectionMode()},e.prototype.isSwitchKitMode=function(){return this.$state.current.name===n.STATES.BUILDER_DESIGN_KITS},e.prototype.isColorationMode=function(){return this.$state.current.name===n.STATES.BUILDER_DESIGN_KIT_COLORATION},e.prototype.isColorationAdvancedMode=function(){return this.$state.current.name===n.STATES.BUILDER_DESIGN_KIT_COLORATION_ADVANCED},e.prototype.isFontMode=function(){return this.$state.current.name===n.STATES.BUILDER_DESIGN_KIT_FONTS_NEW},e.prototype.isAnimationMode=function(){return this.$state.current.name===n.STATES.BUILDER_DESIGN_KIT_ANIMATIONS},Object.defineProperty(e.prototype,"isPagePrettyRulesActive",{get:function(){return this._pagePrettyRulesMode!==s.ePrettyPageRulesMode.rulesOff},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPagePrettyRulesCached",{get:function(){return this._pagePrettyRulesMode===s.ePrettyPageRulesMode.rulesOnAndCaching},enumerable:!0,configurable:!0}),e.prototype.getCurrentStateName=function(){return this.$state.current.name},e.prototype.clearState=function(){this.isPreviewDisplay()?this.savedState=null:this.goToBuilder()},e.prototype.maybeApplyAnimation=function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return!this.flags.headlessApi&&!this.isPublishing?this.applyAnimation(e,t,i):this.$q.when()},e.prototype.applyAnimation=function(e,t,i){return(n=this.$rootScope).$emit.apply(n,[t].concat(i)),e?this.$timeout(angular.noop,2*o.Builder.ANIMATION_LENGTH):this.$q.when();var n},e.prototype.isFirstTimePreview=function(){return this.firstTimePreview},e.LOGIN="login",e}();t.ApplicationState=u,angular.module("siteGeneratorStaticsConsumerAppInternal").service("applicationState",u)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a,s,l,c){this.$translate=e,this.CcDialogBuilder=t,this.saleService=i,this.publishService=n,this.storyServices=o,this.CONSUMER_DIALOGS=r,this.flags=a,this.staticsUrls=s,this.consumerBiLogger=l,this.siteState=c,this.translatePrefix="popups.publish-congrats",this.metaSiteId=this.siteState.getMetaSiteId(),this.publicUrl=this.publishService.getPublicUrl();var d=this.publishService.getCongratsState();this.rightPart={state:d,"three-actions-social":{subtitle:this.inTranslate("three-actions-social.subtitle"),actions:[{iconClassName:"cc-icon-seowiz",description:this.inTranslate("action.seowiz.description"),linkText:this.inTranslate("action.seowiz.linkText"),linkUrl:this.getSEOWizUrl(n.isPremium()?"ADI_POSTPUBLISH_PREMIUM":"ADI_POSTPUBLISH_FREE")},{iconClassName:"cc-icon-twitter",description:this.inTranslate("action.twitter.description"),linkText:this.inTranslate("action.twitter.linkText"),social:"twitter",socialUrl:this.publicUrl,socialText:this.inTranslate("action.twitter.socialText"),socialVia:"",socialHashtags:this.inTranslate("action.twitter.socialHashTags")},{iconClassName:"cc-icon-shoutout",description:this.inTranslate("action.shoutout.description"),linkText:this.inTranslate("action.shoutout.linkText"),linkUrl:this.getShoutoutUrl(this.metaSiteId,d)}]},"three-actions-promote":{subtitle:"Promote your website and business",actions:[{iconClassName:"cc-icon-shoutout",description:this.inTranslate("action.shoutout.description"),linkText:this.inTranslate("action.shoutout.linkText"),linkUrl:this.getShoutoutUrl(this.metaSiteId,d)},{iconSrc:"assets/common-controls/svg-font-icons/mailbox.svg",description:this.inTranslate("action.email.description"),linkText:this.inTranslate("action.email.linkText"),linkUrl:this.getMailboxesUrl(d)},{iconSrc:"assets/common-controls/svg-font-icons/dashboard.svg",description:this.inTranslate("action.dashboard.description"),linkText:this.inTranslate("action.dashboard.linkText"),linkUrl:this.getWixHomeUrl(this.metaSiteId,d)}]}},this.consumerBiLogger.builder.publishSiteCongratsPageView(this.rightPart.state,this.referral)}return e.$inject=["$translate","CcDialogBuilder","saleService","publishService","storyServices","CONSUMER_DIALOGS","flags","staticsUrls","consumerBiLogger","siteState"],e.prototype.inTranslate=function(e){return this.$translate.instant(this.translatePrefix+"."+e)},e.prototype.getSEOWizUrl=function(e){return this.staticsUrls.getSeoWizUrl(e)},e.prototype.getMailboxesUrl=function(e){return"https://premium.wix.com/wix/api/mpContainerStaticController#/mailboxes?referralAdditionalInfo="+this.generatePageName(this.referral,e)},e.prototype.getWixHomeUrl=function(e,t){var i=this.generatePageName(this.referral,t);return"https://www.wix.com/my-account/sites/"+this.metaSiteId+"?referralInfo="+i},e.prototype.getShoutoutUrl=function(e,t){return["https://www.wix.com/my-account/sites/",e,"/app/","135c3d92-0fea-1f9d-2ba5-2a1dfb04297e","?referralInfo="+this.generatePageName(this.referral,t),"&appState=%3Fdl%3Dmessage%26messageId%3D","feedb3b8-0b1a-413f-bcab-73e805d0f554"].join("")},e.prototype.continueEditing=function(){var t=this.generatePageName(this.referral,this.rightPart.state);this.consumerBiLogger.builder.publishSiteCongratsPageDoneClick(t,!!this.dontShowValue),this.CcDialogBuilder.hide(),this.storyServices.story.popupConfigurations[e.PublishCongratsPopupKey]=this.dontShowValue},e.prototype.onViewSite=function(){var e=this.generatePageName(this.referral,this.rightPart.state);this.consumerBiLogger.builder.publishSiteCongratsPageViewSiteClick(e)},e.prototype.onSocialShare=function(e){var t=this.generatePageName(this.referral,this.rightPart.state);this.consumerBiLogger.builder.publishSiteCongratsPageSocialClick(t,e)},e.prototype.goToManagePremium=function(){this.publishDialogCtrl.goToManagePremium(this.rightPart.state)},e.prototype.closeCongratsDialog=function(){this.publishDialogCtrl.closeDialog()},e.prototype.generatePageName=function(e,t){return this.referral+"|"+t},e.prototype.openCongratsHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.publish"),this.CONSUMER_DIALOGS.PUBLISH_CONGRATS_HELP)},e.PublishCongratsPopupKey="popup.publish-congrats",e}();t.PublishCongrats=n},function(e,t){function i(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=i,i.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),i=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-i:e+i}return 0|Math.min(e,this.max)},i.prototype.reset=function(){this.attempts=0},i.prototype.setMin=function(e){this.ms=e},i.prototype.setMax=function(e){this.max=e},i.prototype.setJitter=function(e){this.jitter=e}},function(e,t,i){"use strict";e.exports=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}}},function(e,t){var i,n,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(e){i=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l,c=[],d=!1,u=-1;function p(){d&&l&&(d=!1,l.length?c=l.concat(c):u=-1,c.length&&g())}function g(){if(!d){var e=s(p);d=!0;for(var t=c.length;t;){for(l=c,c=[];++u<t;)l&&l[u].run();u=-1,t=c.length}l=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];c.push(new h(e,t)),1!==c.length||d||s(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,i){"use strict";var n=i(109);e.exports=function(e,t,i,o,r){var a=new Error(e);return n(a,t,i,o,r)}},function(e,t,i){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,i){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(16),r=i(24),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._keepAlive=!0,t.readyState=r.default.CLOSED,t}return n(t,e),Object.defineProperty(t.prototype,"keepAliveEnabled",{get:function(){return this._keepAlive},enumerable:!0,configurable:!0}),t.prototype.open=function(){this.doOpen()},t.prototype.close=function(e){this.doClose(),this.onClose(e)},t.prototype.send=function(e){this.write(e)},t.prototype.updatePayload=function(e){this.payload=e},t.prototype.onData=function(e){var t=this;Array.isArray(e)?e.forEach(function(e){return t.handlePacket(e)}):this.handlePacket(e)},t.prototype.onClose=function(e){this.sessionId="",this.readyState=r.default.CLOSED,this.emit("close",e)},t.prototype.handlePacket=function(e){switch(e.type){case"connection_established":this.sessionId=e.sessionId,this.readyState=r.default.OPEN,this.emit("open",e);break;default:this.emit("packet",e)}},t}(o);t.default=a},function(e,t,i){"use strict";function n(e,t,i){return{transport:e,status:t,message:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.aWebSocketError=function(e,t){return n("websocket",e,t)},t.anHttpLongPollingError=function(e,t){return n("http_long_polling",e,t)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(563);t.reduceDbStory=n.default;var o=i(237);t.isRichText=o.isRichText,t.unMarkRichText=o.unMarkRichText,t.markRichText=o.markRichText,t.toPlainText=o.toPlainText,t.getCategoryOfCE=o.getCategoryOfCE;var r=i(564);t.createHashParams=r.createHashParams;var a=i(238);t.SectionMediaType=a.SectionMediaType,t.MediaType=a.MediaType;var s=i(565);t.FieldType=s.FieldType,t.FieldSubType=s.FieldSubType;var l=i(566);t.presetMaps=l.default;var c=i(568);t.SocialLinkManager=c.default;var d=i(569);t.setInitialKitId=d.setInitialKitId,t.getInitialKitId=d.getInitialKitId,t.setNewSite=d.setNewSite,t.getNewSite=d.getNewSite;var u=i(570);t.HeadlessSiteApi=u.HeadlessSiteApi,t.SiteUpdateType={PublishSite:"publishSite",ChangeKit:"changeKit",AddPage:"addPage",DeletePage:"deletePage",MovePage:"movePage",RenamePage:"renamePage",SetHomepage:"setHomepage",AddSection:"addSection",DeleteSection:"deleteSection",MoveSection:"moveSection",ChangeSectionLayout:"changeSectionLayout",UpdateSection:"updateSection",UpdateSocial:"updateSocial",AddListItem:"addListItem",RemoveListItem:"removeListItem",MoveListItem:"moveListItem"};var p=function(){return function(){this.actionsThatRerender=[],this.actionsThatNeedRerender=[]}}();t.SiteUpdateConfig=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i(1),r=i(0);!function(e){e[e.SHOULD_I_EXTRACT_STEP=3e3]="SHOULD_I_EXTRACT_STEP",e[e.CREATING_PALETTE_STEP=3100]="CREATING_PALETTE_STEP",e[e.SHOULD_I_SAVE_STEP=3200]="SHOULD_I_SAVE_STEP"}(n=t.LogoCEWStep||(t.LogoCEWStep={}));var a,s,l=function(){function e(e,t,i,o,a,s){this.logoManager=e,this.consumerBiLogger=t,this.$log=i,this.$timeout=o,this.$scope=a,this.flags=s,this.allSteps=[n.SHOULD_I_EXTRACT_STEP,n.CREATING_PALETTE_STEP,n.SHOULD_I_SAVE_STEP],this.stepButtonWasClicked=[],this.logoWasChanged=!1,this.processingNewLogo=!1,this.isLoading=!1,void 0===this.autoStartPreparePalette&&(this.autoStartPreparePalette=!0);var l={persistence:this.logoPersistence,onFieldChanged:this.onLogoChanged.bind(this),usePlaceholderOnDelete:!1};this.logoManager.setContext(l),this.textsPrefix=this.context+".logoExtraction",this.currentStep=r.isUndefined(this.firstStep)?n.SHOULD_I_EXTRACT_STEP:this.firstStep()}return e.$inject=["logoManager","consumerBiLogger","$log","$timeout","$scope","flags"],e.prototype.$postLink=function(){this.currentStep===n.CREATING_PALETTE_STEP?(this.refreshPalettePromise(),this.showPaletteCreation()):this.autoStartPreparePalette&&this.refreshPalettePromise()},e.prototype.refreshPalettePromise=function(){this.palettePromise=this.getPreparePalettePromise({logoOrigin:this.logoOrigin()})},e.prototype.getContent=function(e){return e===n.SHOULD_I_SAVE_STEP&&this.flags.newPaletteFromLogo?this.textsPrefix+".step"+e+".newPaletteFromLogo.content":this.textsPrefix+".step"+e+".content"},e.prototype.isShowContent=function(t,i){return e.contentMap[i][t]},e.prototype.getTitle=function(e){return e===n.SHOULD_I_SAVE_STEP&&this.flags.newPaletteFromLogo?this.textsPrefix+".step"+e+".newPaletteFromLogo.title":this.flags.newIntroDesign||e!==n.CREATING_PALETTE_STEP?this.textsPrefix+".step"+e+".title":""},e.prototype.getSecondaryButtonText=function(e){return this.textsPrefix+".step"+e+".skip"},e.prototype.getPrimaryButtonText=function(e){return this.textsPrefix+".step"+e+".button"},e.prototype.setCurrentStep=function(e){this.stepButtonWasClicked[e]=!1,this.currentStep=e},e.prototype.showStepTexts=function(e){return e===this.currentStep&&!this.aboutToReplaceLogo()},e.prototype.showStep=function(e){return e===this.currentStep},e.prototype.aboutToReplaceLogo=function(){return this.currentStep===n.SHOULD_I_SAVE_STEP&&(this.processingNewLogo||this.logoManager.uploadingLogo)},e.prototype.showPrimaryButton=function(e){return e===this.currentStep&&e!==n.CREATING_PALETTE_STEP&&!this.aboutToReplaceLogo()&&!this.isLoading},e.prototype.showSecondaryButton=function(e){return e===this.currentStep&&e!==n.CREATING_PALETTE_STEP&&!this.aboutToReplaceLogo()&&!this.isLoading},e.prototype.showPalettePreview=function(){return this.currentStep!==n.SHOULD_I_EXTRACT_STEP&&!this.aboutToReplaceLogo()&&this.logoColors},e.prototype.showWrappingCircle=function(){return this.currentStep===n.CREATING_PALETTE_STEP},e.prototype.inShouldISaveStep=function(){return this.currentStep===n.SHOULD_I_SAVE_STEP},e.prototype.enableEdit=function(){return this.enableReplaceLogo&&(this.currentStep===n.SHOULD_I_EXTRACT_STEP||this.currentStep===n.SHOULD_I_SAVE_STEP&&!this.processingNewLogo)},e.prototype.getFadeClass=function(e){return e===n.CREATING_PALETTE_STEP?"fade-up":"fade-down"},e.prototype.getButtonClasses=function(e){switch(this.context){case"tour":return["tour-button"];case"builder":return["-medium",e?"p9-primary":"p9b-text-button"]}},e.prototype.clickSecondaryButton=function(e){this.stepButtonWasClicked[e]=!0,this.isLoading=!0,this.skip(e)},e.prototype.clickPrimaryButton=function(e){var t=this;switch(this.stepButtonWasClicked[e]=!0,this.palettePromise||this.refreshPalettePromise(),e){case n.SHOULD_I_EXTRACT_STEP:this.onCreatePaletteClick({logoExtractorStep:e}),this.showPaletteCreation();break;case n.SHOULD_I_SAVE_STEP:this.isLoading=!0,this.palettePromise.then(function(e){t.onSavePaletteClick({logoColoration:e}),t.updateModel(),t.onDone({logoColoration:e})})}},e.prototype.onLogoChanged=function(e,t,i,o,r){var a=this;if(o!==i){var s=o?o.length:0,l="edit";l=o?l:"remove",l=i?l:"add",this.consumerBiLogger.intro.infoCardAddEditRemoveInfo(e,t,s,l,this.logoClickOrigin(),r||null),this.$scope.$apply(function(){a.logoWasChanged=!0,a.processingNewLogo=!0,a.logoColors=void 0}),this.refreshPalettePromise(),this.currentStep!==n.SHOULD_I_EXTRACT_STEP&&this.showPaletteCreation()}},e.prototype.doneShowingPalettePreview=function(){this.currentStep=n.SHOULD_I_SAVE_STEP,this.processingNewLogo=!1},e.prototype.isAnimateColors=function(e){return this.flags.newIntroDesign&&e===n.CREATING_PALETTE_STEP},e.prototype.showPaletteCreation=function(){var e=this;this.palettePromise.then(function(t){void 0!==t?(e.$timeout(function(){e.currentStep=n.CREATING_PALETTE_STEP,e.logoColors=void 0}),e.$timeout(function(){if(e.flags.newPaletteFromLogo)e.logoColors=r.uniq(t.mainColors).slice(0,6);else{var i=t.colors;e.logoColors=r.uniq([i.mainColor,i.secondaryColor,i.thirdColor,i.fourthColor,i.white,i.black].filter(function(e){return!!e}))}})):e.colorationExtractionError("coloration is undefined.")},function(t){e.colorationExtractionError(t)})},e.prototype.updateModel=function(){this.updateLogoInModel&&this.logoWasChanged&&this.updateLogoInModel()},e.prototype.logoOrigin=function(){return this.logoWasChanged?o.BIOrigins.WelcomeTour:o.BIOrigins.InfoCard},e.prototype.logoClickOrigin=function(){return this.currentStep===n.SHOULD_I_EXTRACT_STEP?"welcomeTour-before-extraction":"welcomeTour-after-extraction"},e.prototype.skip=function(e){this.onSkipClick({logoExtractorStep:e}),this.updateModel(),this.onDone({logoColoration:null})},e.prototype.colorationExtractionError=function(e){this.$log.error("Failed while getting palette from logo.",e),this.skip(this.currentStep)},e.prototype.$onDestroy=function(){this.logoManager.doneWithThisContext()},e.view="logoCEW",e.contentMap={description:(a={},a[n.SHOULD_I_EXTRACT_STEP]=!0,a),sublabel:(s={},s[n.SHOULD_I_SAVE_STEP]=!0,s)},e}();t.LogoColorExtractionWizard=l},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(27),r=i(0),a=function(e){function t(t,i,n,o,r){var a=e.call(this,i)||this;return a.$translate=t,a.$timeout=i,a.nodeFetcher=n,a.applicationState=o,a.backgroundScrollService=r,a.initScrollType(),a}return n(t,e),t.$inject=["$translate","$timeout","nodeFetcher","applicationState","backgroundScrollService"],t.prototype.initScrollType=function(){var e=this.nodeFetcher.getCurrentNode();if(e){var t=this.backgroundScrollService.getActiveScrollType(e);this.shouldShowParallaxParagraph=r([this.backgroundScrollService.SCROLL_TYPE.PARALLAX,this.backgroundScrollService.SCROLL_TYPE.PARALLAX_ZOOM]).includes(t)}},t.prototype.toggleDropDown=function(){this.isShowDropDown()?this.hideDropDown():this.showDropDown(),this.isShowDropDown()?this.closeWhenClickOutside(["image-positions"]):this.onDropdownClose()},t.getLabelDetailsByPosName=function(e){return{imagePosition:"image-positions:"+e.replace("_","-"),selectedPosition:e}},t.prototype.positionClicked=function(e){var i=e.index,n=t.posToDetails[i],o=t.getLabelDetailsByPosName(n);this.selectedPositionImage=o.imagePosition,this.selectedPositionName=o.selectedPosition,this.onAlignmentChanged&&this.onAlignmentChanged({value:n})},t.prototype.goToPreview=function(){this.applicationState.goToPreview(!0)},t.prototype.getHeaderTitle=function(){return this.$translate.instant("builder.section-background.background-settings.image.lower-title")},t.prototype.getHeaderBody=function(){return this.$translate.instant("builder.section-background.background-settings.image.body")},t.prototype.getFooterTextForParallax=function(){return this.$translate.instant("builder.section-background.background-settings.image.parallax-paragraph")},t.posToDetails={1:"top_left",2:"top",3:"top_right",4:"left",5:"center",6:"right",7:"bottom_left",8:"bottom",9:"bottom_right"},t.invertedPosToDetails=r.invert(t.posToDetails),t}(o.BaseDropDown);t.ImagePositions=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(71),o=i(2),r=i(13),a=i(0),s=function(){function e(e,t,i,n,o,r){this.publishService=e,this.flags=t,this.consumerDialogs=i,this.storyServices=n,this.assistantManager=o,this.anonService=r,this.revisionCountBeforeTrigger=this.flags.debugTimeToPublishRevisionsCount||20,this.previewsCountBeforeTrigger=this.flags.debugTimeToPublishPreviewsCount||2,this.updatePublishReminderTimestamp(),this.anonService.isAnonymousUser()||this.startPublishTimer()}return e.$inject=["publishService","flags","consumerDialogs","storyServices","assistantManager","anonService"],e.prototype.startPublishTimer=function(){this.subscribeEvents()},e.prototype.subscribeEvents=function(){var t=this;this.flags.smartAssistTpa||this.publishService.isSitePublished()||(o.PubSub.subscribe(o.events.STORY_SAVE_AFTER_SITE_CHANGE,function(){t.incrementStoryValue(e.revisionsUpdatedKey),o.PubSub.fire(o.events.PUBLISH_INTERACTIONS_UPDATED)}),o.PubSub.subscribe(o.events.PREVIEW_ENTERED,function(){t.incrementStoryValue(e.previewEnteredKey),o.PubSub.fire(o.events.PUBLISH_INTERACTIONS_UPDATED)}))},e.prototype.incrementStoryValue=function(e){var t=(a.get(this.storyServices.story,e)||0)+1;a.set(this.storyServices.story,e,t)},Object.defineProperty(e.prototype,"minutesSinceLastPublishReminder",{get:function(){return((new Date).getTime()-this.lastPublishReminderTimestamp)/1e3/60},enumerable:!0,configurable:!0}),e.prototype.updatePublishReminderTimestamp=function(){this.lastPublishReminderTimestamp=(new Date).getTime()},e.prototype.isTimeToPublish=function(){return!(a.get(this.storyServices.story,"visitedTasks."+a.camelCase(r.issueTypeIds.PUBLISH_SITE_INTERVAL)+"."+this.assistantManager.visitedTaskKey)||e.isPublishTourVisited)&&!this.publishService.isSitePublished()&&(this.minutesSinceLastPublishReminder>=e.TIME_TO_PUBLISH_REMINDER_INTERVAL||this.isEnoughToPublish())},e.prototype.isEnoughToPublish=function(){var t=this.storyServices.story,i=a.get(t,this.flags.smartAssistTpa?n.AssistantManager.revisionsUpdatedKey:e.revisionsUpdatedKey)||0,o=a.get(t,this.flags.smartAssistTpa?n.AssistantManager.previewEnteredKey:e.previewEnteredKey)||0;return i>=this.revisionCountBeforeTrigger&&o>=this.previewsCountBeforeTrigger},e.TIME_TO_PUBLISH_REMINDER_INTERVAL=50,e.revisionsUpdatedKey="revisionsUpdated",e.previewEnteredKey="smartAssist.previewEntered",e.publishClickedKey="smartAssist.publishClicked",e.isPublishTourVisited=!1,e}();t.PublishTimer=s,angular.module("siteGeneratorBuilderInternal").service("publishTimer",s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(72),o=i(1),r=i(0),a=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E){var w=this;this.$scope=e,this.$element=t,this.modelTree=i,this.$translate=n,this.CONSUMER_DIALOGS=o,this.applicationState=r,this.overlaySegmentManager=a,this.consumerBiLoggerHelpers=s,this.consumerBiLogger=l,this.nodeTitleManager=c,this.mediaOverrideManager=d,this.contentElementFieldManager=u,this.applicationParameters=p,this.CcDialogBuilder=g,this.onstageActionsManager=h,this.consumerMenu=m,this.richTextService=f,this.slideShowService=v,this.$timeout=S,this.overlayColumnsPosition=y,this.mediaSectionUtils=T,this.overlayManager=b,this.flags=I,this.mediaTypeResolver=P,this.componentStyles=M,this.layoutElementButtons=E,this.leArgList=[],this.tooltipOptions={trigger:"click",timer:7e3,interactive:!0},this.menuIsShown=!1,this.listActionsMenu=[],this.isSegmentHighlight=function(){return w.overlaySegmentManager.lastHoveredArgs&&w.overlaySegmentManager.isActiveSegmentNodeId(w.segment.getSafeId(),w.segment.contentElement.isSpecialListItem())},this.isSectionActive=function(){return w.overlaySegmentManager.isSectionActive(w.segment)},this.onMouseEnterComponent=function(e){return w.overlaySegmentManager.lastHoveredArgs=w.getLayoutArgs(e.layout)},this.onMouseLeaveComponent=function(){return w.overlaySegmentManager.lastHoveredArgs=null},this.onClickComponent=function(e,t){return w.overlaySegmentManager.lastClickedArgs=w.getLayoutArgs(e.layout,t)},this.node=this.getNode(),this.isListItem=this.node.isListItem&&["ListFooter","ListHeader"].every(function(e){return e!==w.node.contentElementType}),this.listActionsMenu=this.onstageActionsManager.getActionsByType("LIST_ITEM").menu(),this.initComponents(),this.overlaySegmentManager.onSegmentOverlayCreate(this.node,this.$element),this.$scope.$watch(function(){return w.segment.renderTime},function(){return w.initComponents()}),this.$scope.$watch(function(){return w.segment.getLENoError()},function(){return w.initComponents()})}return e.$inject=["$scope","$element","modelTree","$translate","CONSUMER_DIALOGS","applicationState","overlaySegmentManager","consumerBiLoggerHelpers","consumerBiLogger","nodeTitleManager","mediaOverrideManager","contentElementFieldManager","applicationParameters","CcDialogBuilder","onstageActionsManager","consumerMenu","richTextService","slideShowService","$timeout","overlayColumnsPosition","mediaSectionUtils","overlayManager","flags","mediaTypeResolver","componentStyles","layoutElementButtons"],e.prototype.$onDestroy=function(){this.overlaySegmentManager.onSegmentOverlayDestroy(this.node)},e.prototype.onMouseEnterSegment=function(){$(document.body).addClass(e.segmentHoveredClass)},e.prototype.onMouseLeaveSegment=function(){$(document.body).removeClass(e.segmentHoveredClass)},e.prototype.editSection=function(e){e.stopPropagation(),this.consumerBiLoggerHelpers.setPanelSource("click on overlay"),this.overlaySegmentManager.editSegment(this.segment)},e.prototype.getTitle=function(){if(this.isListItem){var e=this.components.find(function(e){return e.field.data.subType===core.ElementSubTypes.Title});if(!e)return"List Item";var t=e.field.data.value;return this.richTextService.isRichText(t)?r.extractPlainText(this.richTextService.unMarkRichText(t)):t}var i=this.nodeTitleManager.nodeTitle(this.node),n="general."+i,o=this.$translate.instant(n);return o===n?i:o},e.prototype.getLayoutTitle=function(e){if("shoppingCart"===e.layout.type)return"Store";if("widget"===e.layout.type)return"login"===e.layout.subType?"Login":"subscribe"===e.layout.subType?"Subscribe":"Widget";if(e.field&&"media"===e.field.data.type)return"Logo"===e.field.key?"Logo":"Social.SocialButtons"===e.field.key?"Social":this.flags.sectionMedia?this.mediaTypeResolver.getTypeLabel(this.node):this.mediaOverrideManager.getCurrentSelectedMediaTypeLabel(this.node);var t=e.field?e.field.data.displayName:e.layout.displayName;return t||this.nodeTitleManager.labelBySubtype(e.field.data.subType,e.field.contentElement.type)},e.prototype.getTpaType=function(e){switch(e.layout.type){case"shoppingCart":return this.applicationParameters.tpaTypes.Stores.type;case"widget":switch(e.layout.subType){case"login":return"login"}return"";default:return""}},e.prototype.getTpaNode=function(e){return this.flags.widgetAppsPanel?this.modelTree.getTpaNodeByType(e):r.find(this.modelTree.getTpaNodes(),{contentElementType:this.getTpaType(e)})},e.prototype.initComponents=function(){var e=this,t=this.segment.getLENoError();if(t&&t.argList){this.layoutElement=t,this.leArgList=t.argList,this.components=this.calculateComponents(t);var i=r.filter(t.layoutArray,function(e){return"shoppingCart"===e.type||"widget"===e.type});this.tpaComponents=i.map(function(i){return{layout:i,le:t,indications:e.indications,type:i.type+"$"+i.subType}}),this.indications=this.overlayColumnsPosition.getIndications(this.segment,this.columns)}},e.prototype.doClickOnSegmentOverlay=function(e){this.isListItem&&this.runListClickAction(e,this.node)},e.prototype.getNode=function(){return"header"===this.segment.getSafeId()?this.modelTree.getGeneralInformation():this.segment.node},e.prototype.calculateComponents=function(e){var t=this;if(!e||!Array.isArray(e.layoutArray))return[];var i=this.contentElementFieldManager.getNodeFields(this.segment.contentElement,this.node,!1),o=this.contentElementFieldManager.getReferencedFields(this.segment.contentElement,this.node),a=i.concat(o);a.length>0&&(a[a.length-1].lastField=!0),e.calculateAbsoluteLocations();var s=r.filter(e.layoutArray,function(e){return e.argIndex>-1&&"label"!==e.subType}),l=[];return this.flags.sectionMedia&&!this.hasMediaLayout(s)&&this.mediaSectionUtils.nodeHasBackground(this.node)&&l.push(this.generateBGComponent(e,a)),this.flags.overrideContainerBgColor&&(r.each(e.containingLG.columns,function(i,n){r.each(i,function(i){i.segment===e.containingSegment&&"color"===i.currentSettings.backgroundMode&&l.push(t.generateColumnBgComponent(e,n,i.virtualColumnIndex))})}),r.each(e.layoutArray,function(i){!e.isDecorativeContainerLayout(i)||e.containingSegment.hasColumnWithColorBackground()&&!e.isOnMediaContainer(i)||l.push(t.generateContainerComponent(e,i))})),r.each(s,function(i){var o={type:e.argList[i.argIndex].type,subType:e.argList[i.argIndex].subType},s=r.find(a,{data:o}),c={layout:i,field:s,le:e,indications:t.indications};e.isMediaLayout(i)?l.unshift(c):(l.push(c),t.flags.twoButtonSection&&i.type===core.ElementTypes.Button&&(c.extraMapping={extraButtonIndex:void 0},r.each(t.layoutElementButtons.getExtraButtons(s.data.value),function(o,a){l.push({layout:i,field:r.assign({},s,{key:"button"+a,osiType:n.OnstageTypes.EXTRA_BUTTON}),le:e,indications:t.indications,extraMapping:{extraButtonIndex:a}})})))}),l},e.prototype.hasMediaLayout=function(e){return e.some(function(e){return"media"===e.type})},e.prototype.generateFakeBGLayout=function(){var e=this.overlayManager.listSpanManager.calcLayoutGroupLayout(this.segment.containingLG).height,t=this.overlaySegmentManager.getLgData(this.segment).strip.paddingTop||0,i=this.applicationParameters.desktopPageWidth;return{height:e,width:this.applicationState.previewFrameWidth,isFake:!0,absoluteLeft:-(this.applicationState.previewFrameWidth-i)/2,absoluteTop:-(t+this.segment.top),type:"media",subType:"background"}},e.prototype.generateBGComponent=function(e,t){return{layout:this.generateFakeBGLayout(),field:r.find(t,{data:{type:"media",subType:"image"}}),le:e,indications:this.indications}},e.prototype.generateContainerComponent=function(e,t){return{layout:t,field:{contentElement:e.containingSegment.contentElement,key:t.type,styleKey:t.type+this.componentStyles.getDecorationUniqueID(t),data:{type:t.type,subType:t.subType,displayName:this.$translate.instant("builder.color-box")}},le:e,indications:this.indications}},e.prototype.generateColumnBgComponent=function(e,t,i){return{layout:{type:core.ElementTypes.Container,subType:"columnBg",isFake:!0,virtualColumnIndex:i,rowIndex:t},field:{contentElement:e.containingSegment.contentElement,key:"columnBg-"+t+"-"+i,styleKey:"columnBg",data:{type:core.ElementTypes.Container,subType:"columnBg",displayName:this.$translate.instant("builder.color-box")}},le:e,indications:this.indications}},e.prototype.getLayoutArgs=function(e,t){return t&&this.doTooltip(t),{contentElementType:this.segment.contentElement.type,type:this.leArgList[e.argIndex].type,subType:this.leArgList[e.argIndex].subType}},e.prototype.doTooltip=function(e){var t=$(e.target);this.domHasTooltip(t)&&this.activateTooltip(t,e)},e.prototype.domHasTooltip=function(e){return e&&e.tooltipster()&&e.tooltipster().length>0},e.prototype.activateTooltip=function(e,t){var i=e.get(0).getBoundingClientRect(),n=(i.left+i.right)/2;e.tooltipster("option","offsetX",t.clientX-n),e.tooltipster("reposition")},e.prototype.getMenuTooltipOptions=function(){return this.tooltipOptions},e.prototype.getMenuTooltip=function(e){if("menu"===e.layout.type)return 1===this.consumerMenu.getVisiblePageNodes().length?"section_menu_clicked":"page_menu_clicked"},e.prototype.onPageTooltipLinkClick=function(){this.consumerBiLoggerHelpers.setPanelSource("menu tooltip"),this.applicationState.goToPageManager()},e.prototype.onSectionTooltipLinkClick=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.tooltip.sectionTooltip"),this.CONSUMER_DIALOGS.MENU_TOOLTIP_HELP)},e.prototype.runListClickAction=function(e,t){this.consumerBiLoggerHelpers.setPanelSource("click on list item"),this.runAction(e,this.onstageActionsManager.getActionsByType("LIST_ITEM").click,t)},e.prototype.runAction=function(e,t,i){e.stopPropagation(),this.consumerBiLogger.builder.onstageOsiQuickAction(o.BIOrigins.OSI,t.name,i.key,this.node.getId(),i.contentElement.type,this.node.alias),this.onstageActionsManager.executeAction(t,i)},e.prototype.isShowSlideShowOverlay=function(){return this.segment.node&&this.segment.node.id===this.slideShowService.getSelectedItem(this.node.identifyingNodeId)},e.prototype.stopPropagation=function(e){e.preventDefault(),e.stopPropagation()},e.prototype.onShowActionsMenu=function(){var t=this;this.menuIsShown=!0,this.$timeout(function(){t.menuIsShown&&t.consumerBiLogger.contentEditor.onstageQuickActionsTooltipShown(t.getTitle(),t.node.getId(),t.node.alias,"list-item")},e.MENU_BI_TIMEOUT)},e.prototype.onHideActionsMenu=function(){this.menuIsShown=!1},e.segmentHoveredClass="segment-hovered",e.BorderWidth=1,e.Padding=0,e.MENU_BI_TIMEOUT=500,e}();t.SegmentOverlay=a,angular.module("siteGeneratorStaticsConsumerAppInternal").component("segmentOverlay",{templateUrl:"views/segment-overlay.html",controller:a,bindings:{segment:"=",columns:"="}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.overlayPosition=e,this.overlayModel=t,this.overlayPosition=e,this.overlayModel=t}return e.prototype.getPosition=function(e){var t=this.getRootOverlayModel(e),i=t&&this.buildOverlayNode(t,e);return i?i.layout:void 0},e}();t.BaseOverlayPositionService=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(43),o=i(1),r=i(0),a=i(777).isHighestTier,s=function(){function e(e,t,i,r,a,s,l,c,d,u,p,g){var h=this;this.masterPageActions=e,this.masterPageOverlayModel=t,this.applicationState=i,this.overlayScroller=r,this.spinnerService=a,this.tpaSettings=s,this.masterPageManager=l,this.tpaService=c,this.onstageActionsManager=d,this.ONSTAGE_EVENTS=u,this.modelTree=p,this.flags=g,d.subscribe(u.OPEN_CHAT_SETTINGS,function(e){h.tpaSettings.openTpaPanel(e.node,n.EditTypes.settings,o.BIOrigins.OSI)}),d.subscribe(u.OPEN_CHAT_DESIGN,function(e){h.tpaSettings.openTpaPanel(e.node,n.EditTypes.design,o.BIOrigins.OSI)}),d.subscribe(u.OPEN_CHAT_INBOX,function(e){h.tpaSettings.openTpaManagement(e.node)}),d.subscribe(u.DELETE_CHAT,function(e){h.tpaSettings.deleteTpaPackage(e.node)}),d.subscribe(u.UPGRADE_CHAT,function(e){var t=h.tpaService.getAppDefId(e.node);h.tpaSettings.openBillingPage(t)})}return e.$inject=["masterPageActions","masterPageOverlayModel","applicationState","overlayScroller","spinnerService","tpaSettings","masterPageManager","tpaService","onstageActionsManager","ONSTAGE_EVENTS","modelTree","flags"],e.prototype.addChat=function(e){var t=this,i=Date.now();this.spinnerService.waitForMe("onAddApp");var o=this.masterPageOverlayModel.getMasterPageChild(core.TpaWidgetTypes.Chat_Widget);o?o.node.userHidden?(this.tpaSettings.openTpaPanel(o.node,n.EditTypes.settings,e),this.masterPageManager.afterAddingMasterPageApp(o.node,i)):this.spinnerService.imDone("onAddApp"):(this.applicationState.goToBuilder(),this.masterPageActions.addMasterPageWidget(core.TpaWidgetTypes.Chat_Widget).then(function(e){t.masterPageManager.afterAddingMasterPageApp(e,i)}))},e.isChat=function(e){return e===core.TpaWidgetTypes.Chat_Widget},e.prototype.getChatNode=function(){return this.flags.widgetAppsPanel?this.modelTree.getNodeByContentElementName(core.TpaWidgetTypes.Chat_Widget):r.get(this.masterPageOverlayModel.getMasterPageChild(core.TpaWidgetTypes.Chat_Widget),"node")},e.prototype.removeChat=function(){return this.tpaSettings.deleteTpaPackage(this.getChatNode(),!1)},e.prototype.openChatSettings=function(e){var t=this.getChatNode();this.tpaSettings.openTpaPanel(t,n.EditTypes.settings,e),this.overlayScroller.scrollToBottom()},e.prototype.isPremium=function(){var e=r.get(this.tpaService.getTpaInstance(this.getChatNode()),"vendorProductId");return a(e)},e.prototype.getChatNodeFromModelTree=function(){return this.modelTree.getNodeByContentElementName(core.TpaWidgetTypes.Chat_Widget)},e}();t.ChatManager=s,angular.module("siteGeneratorBuilderInternal").service("chatManager",s)},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),a=i(2),s=i(20),l=i(44),c=i(188),d=i(12),u=i(0),p=function(){function e(e,t,i,n,o,r,a,s,l,c,d,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B){var k=this;this.publishService=e,this.applicationState=t,this.$window=i,this.$state=n,this.$sce=o,this.$scope=r,this.$document=a,this.storyServices=s,this.modelTree=l,this.$timeout=c,this.flags=d,this.introManager=p,this.undoRedo=g,this.CcDialogBuilder=h,this.$translate=m,this.notification=f,this.metaDataService=v,this.spinnerService=S,this.consumerBiLogger=y,this.CONSUMER_DIALOGS=T,this.autoSaveNotifier=b,this.initService=I,this.siteState=P,this.consumerDialogs=M,this.signUpNotifier=E,this.topBarModes=w,this.assistantManager=C,this.previewModeToggleService=A,this.consumerPublishService=L,this.$element=B,this.managablePageSelected=!0,this.activeTab="",this.isAppReady=!1,this.afterPublishing=!1,this.showPublishAnimation=!1,this.timeToRetrySave=0,this.showSavingMessage=!1,this.showSavedMessage=!1,this.lastSaveTime=Date.now(),this.onKeyDown=u.debounce(function(e){if(e.metaKey||e.ctrlKey)switch(String.fromCharCode(e.keyCode)){case"Z":if(!e.shiftKey){k.undoRedo.undo(!0);break}case"Y":k.undoRedo.redo(!0),e.preventDefault();break;case"V":if(e.shiftKey&&e.altKey){var t=k.storyServices.story.staticsVersion;t&&0!==t.toString().length||(t="local");var i=(k.flags.contentVersionId?k.flags.contentVersionId:k.storyServices.story.contentVersion)||"unspecified",n=k.flags.realSantaVersion;k.notification.show(k.$sce.trustAsHtml(k.$translate.instant("notifications.version-info",{staticsVersion:t,contentVersion:i,santaVersion:n}))),e.preventDefault()}break;case"F":if(e.shiftKey&&e.altKey){var o=(k.flags.lodash4?u.pickBy:u[String("pick")])(u.omit(k.flags,u.functions(k.flags)),u.identity),r=u.keys(o);k.$window.console.log(r),k.$window.console.log("Experiments has been saved to 'openExperiments', use 'copy(openExperiments)' to copy them to your clipboard"),k.$window.openExperiments=r;var a="Active flags: "+r.join(", ");k.notification.show(a),e.preventDefault()}}},500),this.headerHeight=63,this.isTooltipHidden=!1,this.isHeaderVisible=!0,this.showHeaderDebounced=u.debounce(this.showHeader,450),this.initService.loaded().then(function(){return k.isAppReady=!0}),angular.element(this.$window).keydown(function(e){return k.onKeyDown(e)}),this.watchSave(),this.watchState(),this.activeTab=this.getActiveTab(),this.previewModeToggleService.init()}return e.$inject=["publishService","applicationState","$window","$state","$sce","$scope","$document","storyServices","modelTree","$timeout","flags","introManager","undoRedo","CcDialogBuilder","$translate","notification","metaDataService","spinnerService","consumerBiLogger","CONSUMER_DIALOGS","autoSaveNotifier","initService","siteState","consumerDialogs","signUpNotifier","topBarModes","assistantManager","previewModeToggleService","consumerPublishService","$element"],e.prototype.getComponentsList=function(){return this.topBarModes.getComponentsByMode(this.topBarState)},e.prototype.watchSave=function(){var e,t=this;this.$scope.$watch("$ctrl.autoSaveNotifier.savingState",function(i){"saving"===i?(t.showSavingMessage=!0,t.showSavedMessage=!1,t.timeToRetrySave=0,e&&t.$timeout.cancel(e)):null===t.autoSaveNotifier.saveRetryTime?(t.timeToRetrySave=0,e=t.$timeout(function(){t.showSavingMessage=!1,t.showSavedMessage=!0,e=t.$timeout(function(){t.showSavedMessage=!1,e=null},1500)},800)):(t.showSavingMessage=!1,t.showSavedMessage=!1)})},e.prototype.watchState=function(){var e=this;this.$scope.$watch(function(){return e.$state.$current&&e.$state.$current.name},function(){e.activeTab=e.getActiveTab()})},e.prototype.debugFeatures=function(){return this.flags.debugMode},e.prototype.startOver=function(){this.introManager.reset(),this.$state.go(r.STATES.INTRO,{reload:!0})},e.prototype.isPreviewDisplay=function(){return this.applicationState.isPreviewDisplay()},e.prototype.isManualSave=function(){return this.applicationState.isSupportStaffEditing()||this.flags.disableAutoSave},e.prototype.onManualSave=function(){this.undoRedo.manualSave()},e.prototype.shouldShowButtons=function(){return!this.flags.removeSpinnerAsStageReady||this.isAppReady},e.prototype.onClickPreview=function(){var e=this;this.consumerBiLogger.builder.topBarPreviewSiteClick("top bar"),this.spinnerService.waitForMe("goToPreview"),this.applicationState.goToPreview(!0).then(function(){e.consumerBiLogger.builder.topBarPreviewSiteSuccess(s.BIModeType.previewInBuilder),e.applicationState.isSupportStaffEditing()&&e.notification.show("toasters.preview-in-manual-save"),e.spinnerService.imDone("goToPreview")})},e.prototype.$onInit=function(){var e=this;this.unsubscribe=a.PubSub.subscribe("SITE_SCROLL",u.throttle(function(t){if((e.topBarState===c.TopBarStates.PREVIEW||e.topBarState===c.TopBarStates.ANON_PREVIEW)&&(e.applicationState.isFirstTimePreview()&&!e.isTooltipHidden&&e.isInWelcomeTask()&&(e.isTooltipHidden=!0,e.assistantManager.gotoNextAction()),!e.previewModeToggleService.isMobilePreview())){var i=t.target.documentElement.scrollTop;i<=e.headerHeight?e.showHeader():e.hideHeader(),i>e.headerHeight&&e.showHeaderDebounced()}},70))},e.prototype.showHeader=function(){this.isHeaderVisible||(this.isHeaderVisible=!0,this.moveHeader(0))},e.prototype.hideHeader=function(){this.isHeaderVisible&&(this.isHeaderVisible=!1,this.moveHeader(this.headerHeight))},e.prototype.moveHeader=function(e){var t=this;requestAnimationFrame(function(){t.$element.css("transform","translateY(-"+e+"px")})},e.prototype.$onDestroy=function(){this.previewModeToggleService.destroy(),this.unsubscribe()},e.prototype.isInWelcomeTask=function(){var e=this.assistantManager.getActiveTask();return e&&"welcomeTask"===e.id},e.prototype.isPPPPreview=function(){return this.flags.newTopBar&&this.flags.newPreviewMode&&this.applicationState.isFirstTimePreview()},e.prototype.handleGoToEditClick=function(){this.applicationState.isFirstTimePreview()&&this.isInWelcomeTask()&&this.assistantManager.gotoNextAction(),this.previewModeToggleService.stopPreview();var e=this.applicationState.isFirstTimePreview()?s.BIModeType.previewInWelcomeTour:s.BIModeType.previewInBuilder;this.consumerBiLogger.builder.previewSiteClosePage(e,"edit site")},e.prototype.publishCompleteCB=function(){var e=this;this.metaDataService.getMetadata(this.storyServices.story.id,this.applicationState.setStoryMetadata.bind(this.applicationState),!0),this.applicationState.isPublishing=!1,this.showPublishAnimation=!0,this.afterPublishing=!0,this.$timeout(function(){e.showPublishAnimation=!1,e.afterPublishing=!1},1300)},e.prototype.publisher=function(){var e=this;this.applicationState.isPublishing=!0,this.consumerPublishService.publishStory().then(function(){e.consumerBiLogger.builder.publishSuccess(!1),e.publishCompleteCB()})},e.prototype.shouldShowPublishDialog=function(){return this.storyServices.story.popupConfigurations[l.PublishCongrats.PublishCongratsPopupKey]},e.prototype.onClickSave=function(){this.signUpNotifier.showSignUpPopup("onClickSave")},e.prototype.onSaveAsTemplate=function(){return n(this,void 0,void 0,function(){var e=this;return o(this,function(t){switch(t.label){case 0:return this.spinnerService.waitForMe("goToPreview"),[4,this.undoRedo.manualSave()];case 1:return t.sent(),[4,this.siteState.saveAsTemplate()];case 2:return t.sent(),[4,this.storyServices.story.saveAsTemplate().catch(function(t){e.consumerDialogs.showDialog(d.ConsumerDialogTypes.SAVE_AS_TEMPLATE_FAIL)})];case 3:return t.sent(),this.spinnerService.imDone("goToPreview"),[2]}})})},e.prototype.onClickPublish=function(e){var t=this;this.applicationState.goToBuilder(!0),this.showPublishAnimation=!1,this.consumerBiLogger.builder.topBarPublishSiteClick(s.BIModeType.builder),this.shouldShowPublishDialog()?this.publisher():this.CcDialogBuilder.show({biDialogName:"publish congrats",parent:this.$document.body,targetEvent:e,onComplete:function(){angular.element(".md-dialog-container").addClass("tour-modal")},template:'<md-dialog aria-label="Publish dialog" class="big-modal">    <publish-dialog></publish-dialog></md-dialog>',controller:["$scope",function(e){e.publisher=t.publisher.bind(t)}]}).then(function(){t.showPublishAnimation=!0,t.publishCompleteCB()})},e.prototype.getActiveTab=function(){var e="",t=[r.STATES.BUILDER_DESIGN,r.STATES.BUILDER_DESIGN_KITS,r.STATES.BUILDER_DESIGN_KIT,r.STATES.BUILDER_DESIGN_KIT_FONTS_NEW,r.STATES.BUILDER_DESIGN_KIT_COLORATION,r.STATES.BUILDER_DESIGN_KIT_COLORATION_ADVANCED,r.STATES.BUILDER_DESIGN_KIT_ANIMATIONS],i=[r.STATES.BUILDER_ADD_SECTION],n=[r.STATES.BUILDER_ADD_PAGE,r.STATES.BUILDER_SELECTED_PAGE,r.STATES.BUILDER_PAGES,r.STATES.BUILDER_PAGES_SEO],o=[r.STATES.BUILDER_STORY_PREVIEW];return t.indexOf(this.$state.$current.name)>-1?e="design":i.indexOf(this.$state.$current.name)>-1?e="add-section":n.indexOf(this.$state.$current.name)>-1?e="page-tab":o.indexOf(this.$state.$current.name)>-1&&(e="desktop-preview"),e},e.prototype.switchToOldTopBar=function(){this.flags.debug&&(this.flags.newTopBar=!this.flags.newTopBar,this.$window.document.body.removeAttribute("data-experiment-new-top-bar"),console.log("newTopBar: ",this.flags.newTopBar))},e.prototype.openMainHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.home"),this.CONSUMER_DIALOGS.HOME_HELP),this.consumerBiLogger.builder.topBarHelpClick()},e.prototype.isShowPages=function(){return this.modelTree.getPagesNodes().length>1},Object.defineProperty(e.prototype,"whilePublishing",{get:function(){return this.applicationState.isPublishing},enumerable:!0,configurable:!0}),e.prototype.isTemplatesUser=function(){return this.flags.addSaveAsTemplate&&this.applicationState.isTemplatesUser()},e.ConnectDomainSource="site-connect",e}();t.TopBar=p},,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BUILDER_STATES={RECOVER_ADI:"recover-adi",BUILDER:"builder",BUILDER_STORY:"builder.story",BUILDER_STORY_PREVIEW:"builder.story.preview",BUILDER_ADD_SECTION:"builder.story.add",BUILDER_ADD_PAGE:"builder.story.add-page",BUILDER_ADD_APP:"builder.story.add-app",BUILDER_EDIT:"builder.story.edit",BUILDER_MEDIA_SETTINGS:"builder.story.edit.media-settings",BUILDER_EDIT_LOGIN:"builder.story.edit.login",BUILDER_SECTION_MEDIA_EDIT:"builder.story.section-media-edit",BUILDER_EDIT_PATTERNS:"builder.story.edit-patterns",BUILDER_NEW_MEDIA_SETTINGS:"builder.story.new-media-settings",BUILDER_DESIGN:"builder.story.design",BUILDER_DESIGN_KITS:"builder.story.design.kits",BUILDER_DESIGN_KIT:"builder.story.design.kit",BUILDER_DESIGN_KIT_COLORATION:"builder.story.design.coloration",BUILDER_DESIGN_KIT_COLORATION_ADVANCED:"builder.story.design.advancedpaletteediting",BUILDER_DESIGN_KIT_FONTS_NEW:"builder.story.design.fonts",BUILDER_DESIGN_KIT_ANIMATIONS:"builder.story.design.animations",BUILDER_SECTION_DESIGN_ANIMATIONS:"builder.story.section-animations",BUILDER_SLIDESHOW_ANIMATIONS:"builder.story.slideshow-animations",BUILDER_SECTION_DESIGN_BACKGROUND:"builder.story.section-background",BUILDER_SECTION_DESIGN_COLORS:"builder.story.section-colors",BUILDER_SECTION_DESIGN_FONTS:"builder.story.section-fonts",BUILDER_SWITCH_PRESET:"builder.story.switch-preset",BUILDER_SECTION_MEDIA:"builder.story.section-media-panel",BUILDER_SWITCH_PRESET_SECTION_HEIGHT:"builder.story.switch-preset.section-height",BUILDER_PAGES:"builder.story.pages",BUILDER_SELECTED_PAGE:"builder.story.page",BUILDER_PAGES_SEO:"builder.story.pages.seo",BUILDER_HOMEPAGE_SEO:"builder.story.pages.hompage-seo",BUILDER_PAGES_MEMBERS_SIGNUP_SETTINGS:"builder.story.members-signup-settings",BUILDER_IMPORT_PAGE:"builder.story.import-page",BUILDER_SECTION_DESIGN_COLORS_EDIT:"builder.story.section-colors-edit",BUILDER_SECTION_DESIGN_FONTS_EDIT:"builder.story.section-fonts-edit",BUILDER_SECTION_DESIGN_ANIMATIONS_EDIT:"builder.story.section-animations-edit",BUILDER_SLIDESHOW_ANIMATIONS_EDIT:"builder.story.slideshow-animations-edit",BUILDER_SWITCH_PRESET_SECTION_HEIGHT_EDIT:"builder.story.switch-preset.section-height-edit"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(66),o=i(173),r=i(2),a=i(14),s=i(67),l=i(41),c=i(12),d=i(69),u=i(1),p=i(0),g=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H,O,_,D,$,N,x,R,F,U,G,j,V,W,z,K,q,Y,X,Q,J,Z,ee,te,ie,ne,oe,re,ae,se){this.$q=e,this.layoutSolver=t,this.CONSUMER_DIALOGS=i,this.$translate=n,this.modelTree=o,this.notification=r,this.storyServices=a,this.mediaOverride=s,this.mediaOverrideManager=l,this.miscUtils=c,this.undoRedo=d,this.tpaService=u,this.tpaDefinition=p,this.flags=g,this.applicationState=h,this.applicationParameters=m,this.sitePartTypes=f,this.simpleSolutionManager=v,this.solutionFetcher=S,this.mobileSolutionManager=y,this.layoutSelectionStoreProvider=T,this.designKit=b,this.siteModelData=I,this.contentElementGenerator=P,this.pagesManager=M,this.nodeManipulationService=E,this.contentManager=w,this.contentSource=C,this.defaultsService=A,this.presetHelpers=L,this.presetPreviewGenerator=B,this.presetPreviewSorter=k,this.$log=H,this.wizardService=O,this.consumerPublishService=_,this.CcDialogBuilder=D,this.consumerBiLogger=$,this.consumerBiLoggerHelpers=N,this.overlayManager=x,this.solutionManager=R,this.consumerDialogs=F,this.consumerMenu=U,this.healthCheck=G,this.Solution=j,this.sectionBackgroundService=V,this.initBI=W,this.mergedHeaderService=z,this.wizContentManager=K,this.slideShowService=q,this.wizWebsite=Y,this.wizPresetsFilter=X,this.siteConverterPresetPicker=Q,this.linkDetailsManager=J,this.tpaSectionManager=Z,this.tpaSolutionManager=ee,this.nodeFetcher=te,this.presetsStrategyFactory=ie,this.modelTreeHelpers=ne,this.introManager=oe,this.tpaHeader=re,this.headerFooterDecorator=ae,this.colorationPattern=se,this.totalSteps=0,this.currentStep=0}return e.$inject=["$q","layoutSolver","CONSUMER_DIALOGS","$translate","modelTree","notification","storyServices","mediaOverride","mediaOverrideManager","miscUtils","undoRedo","tpaService","tpaDefinition","flags","applicationState","applicationParameters","sitePartTypes","simpleSolutionManager","solutionFetcher","mobileSolutionManager","layoutSelectionStoreProvider","designKit","siteModelData","contentElementGenerator","pagesManager","nodeManipulationService","contentManager","contentSource","defaultsService","presetHelpers","presetPreviewGenerator","presetPreviewSorter","$log","wizardService","consumerPublishService","CcDialogBuilder","consumerBiLogger","consumerBiLoggerHelpers","overlayManager","solutionManager","consumerDialogs","consumerMenu","healthCheck","Solution","sectionBackgroundService","initBI","mergedHeaderService","wizContentManager","slideShowService","wizWebsite","wizPresetsFilter","siteConverterPresetPicker","linkDetailsManager","tpaSectionManager","tpaSolutionManager","nodeFetcher","presetsStrategyFactory","modelTreeHelpers","introManager","tpaHeader","headerFooterDecorator","colorationPattern"],e.prototype.setConfigurationForSection=function(e,t){var i=this.storyServices.story.selectedPage,n=this.layoutSolver.getSelectedSolution(this.sitePartTypes.BODY,i),o=this.flags.sectionMedia&&this.makeSectionBg(e);if(this.isAddMode){var r=void 0,a=void 0;this.applicationState.isAddPage()||(r=(t=t||this.overlayManager.dropTargetId)===d.DropTargetCalculator.FirstDropTargetId?void 0:p.last(this.solutionFetcher.getSectionSolution(i,t)),a=n&&n[n.indexOf(r)+1]),this.designKit.setConfigurationForSection(e.solution,r,a,void 0,o),this.presetHelpers.preparePresetPreviewForRender(this.sitePartTypes.BODY,e)}else{var s=this.applicationState.getContentFocus();if(!s||!e.preset||this.applicationState.isSectionColorsMode())return;this.flags.mergedHeader?this.setSectionConfigurationBySitePartType(this.flags.refactorOSIActions?this.nodeFetcher.getNodeSitePart(e.node):this.modelTreeHelpers.getNodeSitePart(e.node),i,e,o):this.setSectionConfigurationBySitePartType(s.sitePart,i,e,o),this.presetHelpers.preparePresetPreviewForRender(s.sitePart,e)}},e.prototype.makeSectionBg=function(e){var t={bg:this.sectionBackgroundService.getBackground(e.node,"body",e.solution)};return e.node.isList()&&(t.headerBg=this.sectionBackgroundService.getBackground(e.node,"header",e.solution)),t},e.prototype.setSectionConfigurationBySitePartType=function(e,t,i,n){if(e===this.sitePartTypes.BODY){var o=this.solutionFetcher.getSectionSolution(t,i.node.id);n=n||this.flags.sectionMedia&&this.makeSectionBg(i),this.designKit.setSpecificConfigurationForSection(i.solution,o,void 0,n)}else this.designKit.setConfigurationForHeaderFooter(e,i.solution)},e.prototype.forceAddMode=function(e){this.applicationState.forceAddMode(e)},Object.defineProperty(e.prototype,"isAddMode",{get:function(){return this.applicationState.isForcedAddMode()||this.applicationState.isAddMode()},enumerable:!0,configurable:!0}),e.prototype.getDefaultAnimationDefinition=function(){return{direction:this.simpleSolutionManager.Animation.Direction.REVERSE,type:this.simpleSolutionManager.Animation.Type.CROSS_FADE,duration:.5}},e.isNodeDuplicated=function(e){return!!e&&p.filter(p.map(e.getDependencies(),function(e){return e.containerPageId}),function(t){return!!t&&t!==e.containerPageId}).length>0},e.prototype.recalculateSection=function(e){var t=this,i=e.containerPageId,n=e.id,o=this.simpleSolutionManager.getSectionSolution(i,n);return this.simpleSolutionManager.replaceSectionOnPage(i,n,o,!0).then(function(e){return t.startAnimatedRender(e)})},e.prototype.startAnimatedRender=function(e,t){return void 0===t&&(t=this.getDefaultAnimationDefinition()),this.storyServices.renderAnimated(e,n.ListSpanManager.MinBodyHeight,t)},e.prototype.addTpa=function(e,t,i){return void 0===t&&(t=void 0),this.tpaSectionManager.addTpa(e,t,i)},e.prototype.addTPAHeaderToTargetId=function(e,t,i){var n=this;return this.flags.tpaHeader&&this.tpaHeader.isSupportHeader(e.contentElementType)?this.tpaHeader.get(e).then(function(o){return o?(n.setConfigurationForSection(o),n.addSectionToPage(o,t,i,!0)):(n.$log.warn("can't create tpa header for",e,t),n.$q.when())},function(e){console.log(e)}):this.$q.when()},e.prototype.addingTpaHeader=function(e,t,i){var n=this,o=this.tpaHeader.getPrevNodeInPage(e,i),r=null===o?d.DropTargetCalculator.FirstDropTargetId:o.id;return this.addTPAHeaderToTargetId(t.node,i,r).then(function(){return n.flags.headlessApi||n.storyServices.reRender(),n.consumerMenu.calcMenuAnchors(),e})},e.prototype.handlePreviewSelected=function(e,t,i,n,o,r){var a=this;void 0===r&&(r=!1),i=i||this.storyServices.story.selectedPage;var s=this.modelTree.getPageNodeById(i);if(e.isTpa)return this.tpaSectionManager.handleTpaPreviewSelected(s,e,void 0,o,r).then(function(i){return!r&&t&&i.isTpaWidget&&a.storyServices.reRender(),t||i.isTpa?i:a.addingTpaHeader(i,e,s)});if(e.previewNode.crop&&(e.node.crop=e.node.crop||[],p.defaults(e.node.crop,e.previewNode.crop)),t){var l=n?{sitePart:n}:this.applicationState.getContentFocus();return l.sitePart!==this.sitePartTypes.BODY?this.applyHeaderOrFooterPreset(e,l.sitePart,s,r):this.replaceSection(e,s,r)}return this.addSectionToPage(e,s,this.overlayManager.dropTargetId,r)},e.prototype.applyHeaderOrFooterPreset=function(e,t,i,n){var o=this;return void 0===n&&(n=!1),this.$q.when().then(function(){return o.flags.resizeBusinessName&&o.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(e.lss,t,t,o.layoutSelectionStoreProvider.getKeyMap(e.solution)),e.preset?o.layoutSolver.applyLayoutPreset(t,void 0,e.node,e.preset.data).then(function(){o.designKit.setConfigurationForHeaderFooter(t,o.layoutSolver.getSelectedSolution(t))}):(o.flags.resizeBusinessName||o.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(e.lss,t,t,o.layoutSelectionStoreProvider.getKeyMap(e.solution)),p.each(o.layoutSolver.getSelectedSolution(t),function(e){e.isDirty=!0}),o.layoutSolver.calculateSolverStatus(void 0,void 0,!0))}).then(function(){if(o.flags.mergedHeader&&t===o.sitePartTypes.HEADER){var n=p(e.flags).includes("fix");o.wizardService.setFixedHeader(n);var a=p(e.flags).includes("mergeHeader"),s=o.modelTree.getPageNodeById(o.modelTree.homePageId),l=o.mergedHeaderService.isHeaderMerged(s);if(a||l){var c=s===i?a:l;return o.headerFooterDecorator.setHeaderMerged(c,s).then(function(e){e&&r.PubSub.fire(r.events.HEADER_FOOTER_BG_CHANGED)})}}}).then(function(){if(o.modelTree.dustifyAllPages(),!n)return o.storyServices.reRender()}).then(function(){var e=o.mobileSolutionManager.getMobileSitePartSolution(t);o.simpleSolutionManager.setSolutionDirty(e)}).then(function(){return n||o.undoRedo.captureOperation(),e.node})},e.prototype.replaceSection=function(e,t,i){var n=this;return void 0===i&&(i=!1),this.$q.when().then(function(){n.modelTree.replaceNode(e.previewNode,t),p.each(e.solution,function(e){return e.setPage(t.id)});var o=n.solutionFetcher.getSectionSolution(t.id,e.previewNode.getId()),r=o.reduce(function(e,t){return t.getBoundingHeight()+e},0);return n.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(e.lss,e.dummyPageId,t.id,n.layoutSelectionStoreProvider.getKeyMap(e.solution,e.previewNode),void 0,!1),n.simpleSolutionManager.replaceSectionOnPage(t.id,e.previewNode.getId(),e.solution).then(function(e){if(!i){var t={type:n.applicationState.isSectionColorsMode()?n.simpleSolutionManager.Animation.Type.NO_TRANSITION:n.simpleSolutionManager.Animation.Type.SLIDE_HORIZONTAL,direction:n.simpleSolutionManager.Animation.Direction.NORMAL};return e.oldHeight=r,n.startAnimatedRender(e,t)}}).then(function(){var t=n.mobileSolutionManager.getMobileSolution(o);n.mobileSolutionManager.setMobileSolution(e.solution,t),n.simpleSolutionManager.setSolutionDirty(t)}).then(function(){return i||n.undoRedo.captureOperation(),e.previewNode})})},e.prototype.addSectionToPage=function(e,t,i,n){var o=this;return void 0===i&&(i=d.DropTargetCalculator.FirstDropTargetId),void 0===n&&(n=!1),this.$q.when().then(function(){var a=o.layoutSelectionStoreProvider.getKeyMap(e.solution,e.previewNode),l=e.previewNode.getIds(),c=o.modelTree.addNewNodeWithValues(e.previewNode,t,i);p.each(e.solution,function(e){e.clearCache(),e.setPage(t.getId())});var u=c.getIds(),g=p.zipObject(l,u),h=o.layoutSelectionStoreProvider.getMergedKeyMap(a,g);o.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(e.lss,e.dummyPageId,t.getId(),h,a);var m=i!==d.DropTargetCalculator.FirstDropTargetId&&i,f=e.previewNode.getId();return o.simpleSolutionManager.addSectionToPage(t.getId(),f,e.solution,m).then(function(t){if(o.mobileSolutionManager.createMobileSolution(o.sitePartTypes.BODY,e.solution),!n){var i=void 0;if(o.flags.headlessApi)i=o.$q.when();else{t.oldHeight=s.OverlayManager.DropTargetHeight;var r={type:o.simpleSolutionManager.Animation.Type.CROSS_FADE,direction:o.simpleSolutionManager.Animation.Direction.NORMAL,duration:.5};i=o.startAnimatedRender(t,r)}return i.then(function(){if(!e.previewNode.isList()){var t=o.overlayManager.listSpanManager.getSegmentByNodeId(f,o.sitePartTypes.BODY),i=t&&t.getLENoError(),n=i&&i.getLayoutBySubType("image");if(n&&o.mediaOverride.isUnexpectedHeight(i,n))return o.tpaSectionManager.waitForHeightChanged(e.solution[0])}}).then(function(){o.consumerMenu.calcMenuAnchors(),o.undoRedo.captureOperation()})}}).then(function(){var i=o.nodeFetcher.getNode(f);return i&&r.PubSub.fire(r.events.SECTION_ADDED,i.node),o.modelTree.increasePageLastRenderRevision(t.id),e.previewNode})})},e.prototype.duplicateSectionToMobile=function(e,t,i,n,o){var r=this.mobileSolutionManager.getMobileSolution(i.sourceSection),a=this.layoutSelectionStoreProvider.getKeyMap(r,e),s=this.mobileSolutionManager.createMobileSolution(this.sitePartTypes.BODY,i.newSection),l=this.layoutSelectionStoreProvider.getKeyMap(s,t);this.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(n,o,o,l,a,!0,!0)},e.prototype.duplicateSection=function(e){var t=this,i=this.storyServices.story.selectedPage,n=this.modelTree.duplicateNode(e,this.modelTree.getPageNodeById(i));this.simpleSolutionManager.duplicateSection(i,e,n).then(function(o){var r=t.layoutSelectionStoreProvider.getLayoutSelectionStore().clone(),a=t.layoutSelectionStoreProvider.getKeyMap(o.sourceSection,e),s=p.zipObject(e.getIds(),n.getIds()),l=t.layoutSelectionStoreProvider.getMergedKeyMap(a,s);return t.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(r,i,i,l,a,!0),t.duplicateSectionToMobile(e,n,o,r,i),t.simpleSolutionManager.addSectionToPage(i,n.id,o.newSection,e.id,!0,void 0,!0).then(function(e){return t.tpaSolutionManager.setTpaInitialHeight(o.newSection),t.startAnimatedRender(e)})}).then(function(){t.consumerMenu.calcMenuAnchors(),r.PubSub.fire(r.events.SECTION_DUPLICATED,n),t.consumerBiLogger.sectionManagement.sectionDuplicateSuccess(n.id,n.getContentElementType(),n.alias,t.tpaService.getAppId(n)),t.undoRedo.captureOperation()})},e.prototype.duplicatePage=function(e){var t=this,i=e.getId();return this.consumerBiLogger.pagesManager.duplicatePage(i),this.pagesManager.duplicatePage(e).then(function(n){var o=t.layoutSelectionStoreProvider.getNodesMap(e,n),a=t.layoutSelectionStoreProvider.getLayoutSelectionStore(),s=a.clone(),l=p(e.children).map(function(i){var n=t.solutionFetcher.getSectionSolution(e.id,i.id);return t.layoutSelectionStoreProvider.getKeyMap(n,i)}).flatten().value(),c=t.layoutSelectionStoreProvider.getMergedKeyMap(l,o);t.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(s,e.getId(),n.getId(),c,l,!0);var d=p(e.children).map(function(i){var n=t.solutionFetcher.getSectionSolution(e.id,i.id),o=t.mobileSolutionManager.getMobileSolution(n);return t.layoutSelectionStoreProvider.getKeyMap(o,i)}).flatten().value(),u=t.layoutSelectionStoreProvider.getMergedKeyMap(d,o);t.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(s,e.getId(),n.getId(),u,d,!0,!0);var g=p.mapKeys(a.getSolutionLGs(e.getId()),function(e,t){return o[t]});a.setSolutionLGs(n.id,g),r.PubSub.fire(r.events.PAGE_DUPLICATED,n),t.consumerBiLogger.pagesManager.duplicatePageSuccess(i)})},e.prototype.goToPage=function(e){var t=this;return this.applicationState.clearContentFocus(),this.storyServices.story.selectedPage=e.getId(),this.pagesManager.goToPage(e.getId()).then(function(){return t.storyServices.recalculateCurrentPage()})},e.prototype.moveSectionToAnotherPage=function(e,t){var i,n=this,o=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage),a=null;if(o&&t&&e&&o!==t){var s=p.last(t.children).getId(),l=this.layoutSelectionStoreProvider.getLayoutSelectionStore().clone();this.nodeManipulationService.moveNodeToPage(e,o,t)&&(this.applicationState.setSteady(!1),this.linkDetailsManager.updateLinkDetailsOnPageMove(e,o),a=this.simpleSolutionManager.removeSectionOnPage(o.getId(),e.getId()).then(function(e){return i=e.oldSolution.slice(e.startIndex,e.startIndex+e.length),n.startAnimatedRender(e)}).then(function(){return n.goToPage(t)}).then(function(){n.nodeManipulationService.reassignSolutionSectionToPage(i,o,t);var r=n.layoutSelectionStoreProvider.getKeyMap(i,e);n.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(l,o.getId(),t.getId(),r,r,!0);var a=n.mobileSolutionManager.getMobileSolution(i);n.nodeManipulationService.reassignSolutionSectionToPage(a,o,t);var c=n.layoutSelectionStoreProvider.getKeyMap(a,e);return n.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(l,o.getId(),t.getId(),c,c,!0,!0),n.simpleSolutionManager.addSectionToPage(t.getId(),e.getId(),i,s,!1,void 0,!0)}).then(function(e){return n.startAnimatedRender(e)}).then(function(){n.consumerMenu.calcMenuAnchors(),n.undoRedo.captureOperation()}).finally(function(){n.applicationState.setSteady(!0)})),r.PubSub.fire(r.events.SECTION_MOVED,e)}return this.$q.when(a)},e.prototype.makeIntoPage=function(e){var t,i,n=this,o=this.modelTree.findIdentifyingNode(e),a=o.isList()?o:e,s=this.storyServices.story.selectedPage;return this.applicationState.clearContentFocus(),this.applicationState.goToBuilder(!1),this.consumerBiLogger.contentEditor.switchListItemToPage(a.getId(),this.storyServices.story.selectedPage,a.getSpecificContentElementType(),a.alias),this.nodeManipulationService.makePageFromNode(e).then(function(i){r.PubSub.fire(r.events.CREATED_PAGE_FROM_ITEM,i),t=i.containerPageId;var o=n.layoutSelectionStoreProvider.getLayoutSelectionStore().getOverrideByNode("media",e,"allowedMediaOverrides");return n.defaultsService.getPresetsForNode(i).then(function(e){var t=p.sortBy(e,function(e){return o!==p.get(e.data,["groups",0,"layouts",0,"mediaType"])});return p.whilePromises(function(e){return!(e&&e[0]||!t.length)},function(){var e=t.shift();if(e&&e.data&&!e.data.isTpa)return n.layoutSolver.createLayoutPresetPreviewSolutions([e],i,!0)})}).then(function(e){var o=e&&e[0];return o?(n.designKit.setConfigurationForSection(o.solution),n.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(o.lss,o.dummyPageId,t,n.layoutSelectionStoreProvider.getKeyMap(o.solution)),p.each(o.solution,function(e){e.setPage(t)}),n.modelTree.setContainerPageId(i,t),n.mobileSolutionManager.createMobileSolution(n.sitePartTypes.BODY,o.solution),n.simpleSolutionManager.addSectionToPage(t,i.id,o.solution)):(n.$log.warn("cannot find applicable preset for created node "+i.id),n.modelTree.setContainerPageId(i,t),n.simpleSolutionManager.createJokerSection(i).then(function(e){return n.simpleSolutionManager.addSectionToPage(t,i.id,e,void 0,!0,i.contentElement,!0)}))})}).then(function(e){return i=e,n.storyServices.story.selectedPage=t,n.pagesManager.goToPage(t)}).then(function(){if(i)return n.startAnimatedRender(i)}).then(function(){n.consumerMenu.calcMenuAnchors(),n.undoRedo.captureOperation(),n.applicationState.goToPageManager(),n.consumerBiLogger.contentEditor.itemMovedToAnotherPageSuccess(a.getId(),s,a.getSpecificContentElementType(),a.alias)})},e.prototype.duplicateListItem=function(e,t,i){var n=this.modelTree.duplicateListItem(t,e,i),o=this.layoutSelectionStoreProvider.getLayoutSelectionStore().clone();return this.layoutSelectionStoreProvider.mergeNodeOverrides(o,n.id,t.id,n.containerPageId,t.containerPageId),this.addListItem(e,n,i,!0)},e.prototype.addListItem=function(e,t,i,n){var o,a=this,s=e.containerPageId,l=e.getId(),c=this.solutionFetcher.getSectionSolution(s,l),d=this.mobileSolutionManager.getMobileSolution(c);return this.mobileSolutionManager.addListItem(d,t,i),this.flags.listItemOverrideColor&&(o=this.colorationPattern.detectPattern(c)),this.simpleSolutionManager.addListItem(s,l,t,i).then(function(i){var r=i.newSolution.slice(i.startIndex,i.startIndex+i.newLength);return a.flags.listItemOverrideColor&&n&&o&&a.colorationPattern.applyPattern(r,o,t),a.mobileSolutionManager.setMobileSolution(r,d),a.simpleSolutionManager.setSolutionDirty(d),a.selectFirstUnHiddenSlide(e),a.startAnimatedRender(i,{direction:a.simpleSolutionManager.Animation.Direction.REVERSE,type:a.simpleSolutionManager.Animation.Type.CROSS_FADE})}).then(function(){r.PubSub.fire(r.events.LIST_ITEM_ADDED_OR_SHOWN,t)})},e.prototype.removeListItem=function(e,t,i){var n=this,o=e.containerPageId,a=e.getId(),s=this.solutionFetcher.getSectionSolution(o,a),l=this.mobileSolutionManager.getMobileSolution(s);return this.mobileSolutionManager.removeListItem(l,i),this.simpleSolutionManager.removeListItem(o,a,t,i).then(function(t){var i=t.newSolution.slice(t.startIndex,t.startIndex+t.newLength);return n.mobileSolutionManager.setMobileSolution(i,l),n.simpleSolutionManager.setSolutionDirty(l),n.selectFirstUnHiddenSlide(e),n.startAnimatedRender(t,{direction:n.simpleSolutionManager.Animation.Direction.REVERSE,type:n.simpleSolutionManager.Animation.Type.CROSS_FADE})}).then(function(){r.PubSub.fire(r.events.LIST_ITEM_DELETED_OR_HIDDEN,t)})},e.prototype.selectFirstUnHiddenSlide=function(e){this.slideShowService.isSlideShow(e)&&this.slideShowService.selectUnhiddenItem(e,0)},e.prototype.getNodeIndexInPage=function(e){var t=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage),i=p.filter(t.children,function(e){return!e.isUserHidden()});return p.findIndex(i,function(t){return t.getId()===e})},e.prototype.getAddSectionPosition=function(){var e=this.overlayManager.dropTargetId,t=e!==d.DropTargetCalculator.FirstDropTargetId&&e;return t?this.getNodeIndexInPage(t)+1:0},e.prototype.geSectionPositionInPage=function(e){return this.getNodeIndexInPage(e.getId())},e.prototype.showDeleteSectionPopup=function(t,i,n){var o=this;this.consumerBiLogger.sectionManagement.sectionMenuDeleteSectionClick(t.getId(),t.getContentElementType(),t.alias,this.tpaService.getAppId(t),i,e.isNodeDuplicated(t));var r={heading:this.$translate.instant("popups.deletesection.heading"),text:this.$translate.instant("popups.deletesection.text"),acceptButtonText:this.$translate.instant("general.delete"),rejectButtonText:this.$translate.instant("general.cancel"),icon:"delete-single.gif",biDialogName:this.CONSUMER_DIALOGS.DELETE_SECTION,onHelp:function(){o.CcDialogBuilder.showSupportIframe(o.$translate.instant("help.popup.deleteSection"),o.CONSUMER_DIALOGS.DELETE_SECTION_HELP)}};return(this.applicationState.isSilent()?this.$q.resolve():this.CcDialogBuilder.showNegativeConfirmation(r)).then(function(){return t.identifyingNode&&t.identifyingNode.isList()&&(t=t.identifyingNode),o.deleteSection(t,i)},function(){return n&&n(),o.$q.reject()})},e.prototype.showHideNodePopup=function(e){var t;if(e===this.sitePartTypes.HEADER)t=c.ConsumerDialogTypes.CANT_REMOVE_HEADER_POPUP;else{if(e!==this.sitePartTypes.FOOTER)return this.$q.when();t=c.ConsumerDialogTypes.CANT_REMOVE_FOOTER_POPUP}return this.consumerDialogs.showDialog(t)},e.prototype.countPagesContainingNode=function(e){var t=this;return this.modelTree.getPagesList().filter(function(i){return t.modelTree.findNodeAndParentAndPageByNodeId(e.getId(),i)}).length},e.prototype.clearHiddenSection=function(e){var t=this,i=this.$q.defer(),n=this.modelTree.getPagesNodes();if(0===n.reduce(function(i,n){var o=t.modelTree.getTpaWidgetsInPage(n,e);return i.concat(o)},[]).length){var o=n.filter(function(t){return t.tpaExtraPage===e})[0];o&&(this.flags.coreCleanLssOnRemove?this.nodeManipulationService.deletePage(o,"body",p.noop,function(){return i.resolve()}):this.nodeManipulationService.deletePageById(o.id,"body",p.noop,function(){return i.resolve()}))}else i.resolve();return i.promise},e.prototype.deleteSection=function(t,i,n){var o=this;void 0===n&&(n=!1);var a=ob.deepClone(t),s=this.$q.defer(),l=t.containerPageId,c="Contact"===t.contentElementType,d=!c&&this.countPagesContainingNode(t)<2;return c&&this.modelTree.markPageAsDirty(l),this.flags.tpaHeader&&this.tpaHeader.isSupportHeader(t.contentElementType)&&this.tpaHeader.updateAfterDelete(t),this.nodeManipulationService.deleteNode(t,l,d,function(){o.applicationState.clearContentFocus(),o.simpleSolutionManager.removeSectionOnPage(l,t.getId()).then(function(e){return o.startAnimatedRender(e)}).then(function(){if(t.isTpaNode()){var e=o.tpaService.getNaiveType(t.contentElementType);"hidden"===o.tpaService.sectionType(e)&&o.clearHiddenSection(e)}if(o.consumerMenu.calcMenuAnchors(),o.applicationState.goToBuilder(!1),o.undoRedo.captureOperation(),o.tpaSectionManager.shouldPublishForTpaWidget(t)){return o.consumerPublishService.saveStory(void 0,void 0,!0)}}).then(function(){r.PubSub.fire(r.events.SECTION_DELETED,a),o.consumerBiLogger.sectionManagement.deleteSectionSuccess(t.getId(),t.getContentElementType(),t.alias,o.tpaService.getAppId(t),i,e.isNodeDuplicated(t)),n||(o.flags.disableUndoRedo?o.notification.show("toasters.section-deleted"):o.notification.show("toasters.section-deleted","general.undo",function(){o.undoRedo.undo()})),s.resolve()})},d&&!c),s.promise},e.prototype.addSection=function(e,t){var i=d.DropTargetCalculator.FirstDropTargetId;if(t)"GeneralDescription"!==e.contentElementType&&(i=e.getId());else{var n=e.containerPageId,o=this.overlayManager.listSpanManager.getAllInBody();if("footer"===n)o.length>0&&(i=o[o.length-1].node.getId());else{var r=this.flags.lodash4?p.findIndex(o,["node",e]):p[String("findIndex")](o,{node:e});r>0&&(i=o[r-1].node.getId())}}this.overlayManager.lockDropTarget(i),this.applicationState.goToAddSectionMode()},e.prototype.makeTpaSectionObject=function(e,t){return t&&(e.alias=t),{id:t||e.contentElementType,ceType:e.contentElementType,isTpa:!0,widgetNode:e,isRecommendedForPage:!0}},e.prototype.modifySectionRecommendationsBySelectedOffer=function(e,t){var i,n,r,a=this,s=function(s,l){void 0===l&&(l=s);var c=a.applicationParameters.tpaTypes[s]?a.applicationParameters.tpaTypes[s].type:s;if(t[c]){var d=-1!==i.indexOf(l);if(l===core.TpaWidgetTypes.Stores_Slider_Gallery_Widget?d||-1!==i.indexOf(core.TpaWidgetTypes.Stores_Product_specific_Widget):d)return!1;var u=p.find(r,function(e){return e.contentElementType===l});if(u){var g;return g=l===core.TpaWidgetTypes.Stores_Slider_Gallery_Widget?1:n,e.suggestions.splice(g,0,a.makeTpaSectionObject(u,a.$translate.instant("builder.sections."+o.AddSection.tpaWidgetAliases[l]))),n++,!0}}};p.some(p.values(t))&&(i=e.suggestions.filter(function(e){return e.isRecommendedForPage}).map(function(e){return e.ceType}),n=p.findIndex(e.suggestions,function(e){return!e.isRecommendedForPage}),r=this.modelTree.getAvailableWidgetsNodes(),s(core.TpaTypes.Stores,core.TpaWidgetTypes.Stores_Slider_Gallery_Widget)||(this.flags.blog2?s(core.TpaTypes.Blog2,core.TpaWidgetTypes.Blog2_Custom_Feed_Widget):s(core.TpaTypes.Blog,core.TpaWidgetTypes.Blog_Post_Gallery)),this.flags.subscribeInFooter||s(core.TpaTypes.GetSubscribers,core.TpaWidgetTypes.GetSubscribers_Widget))},e.prototype.utilCreateSelectedOffersMap=function(){return p.reduce(this.storyServices.story.selectedOffers,function(e,t){return e[t.type]=t.checked||t.autoProvisioned,e},{})},e.prototype.postProcessSuggestedTpaSections=function(e){var t=this,i=this.modelTree.getAvailableWidgetsNodes();p.each(e,function(e){if(!e.isTpa){var n=p.find(i,function(t){return t.contentElementType===e.ceType});n&&(e.isTpa=!0,e.widgetNode=n,t.flags.wixEvents&&(e.widgetNode.alias=e.id))}})},e.prototype.addStepMessage=function(e){this.notification.showNextStep(e)},e.prototype.makeSectionsInGeneralPage=function(e,t,i){var n=this;return void 0===t&&(t=!0),void 0===i&&(i=!1),this.forceAddMode(!0),this.makeSectionsInGeneralPageInternal(e,t,i).finally(function(){return n.forceAddMode(!1)})},e.prototype.makeSectionsInGeneralPageInternal=function(e,t,i){var n=this;void 0===t&&(t=!0),void 0===i&&(i=!1);var o=this.contentSource.suggestedSectionsByPage(e.alias,{isHomepage:i});t&&(this.totalSteps=o.length+1,this.currentStep=0);var r=d.DropTargetCalculator.FirstDropTargetId;return p.sequencePromises(o,function(i){return t&&n.addStepMessage(n.$translate.instant("builder.progress-bar.step-message.adding-section",{type:i.id||i.ceType})),n.makeSectionInPage(e,i,r).then(function(e){r=e&&e.id||r})}).then(function(){t&&n.addStepMessage(n.$translate.instant("builder.progress-bar.step-message.finishing-touches"))})},e.prototype.addNewPage=function(e){var t=this;return this.pagesManager.addPage(e).then(function(e){return e&&e.id?t.pagesManager.goToPage(e.id).then(function(){return t.storyServices.story.selectedPage=e.id,t.makeSectionsInGeneralPageInternal(e,!1)}):t.$q.when()})},e.prototype.addSiteConverterStepsToProgressBar=function(e){var t=this;this.wizWebsite.siteConverterProgressSteps.forEach(function(i){return e(t.$translate.instant(i))})},e.prototype.addStepsToProgressBar=function(e,t,i){var n=this;this.addStepMessage(""),this.addStepMessage(this.$translate.instant("builder.progress-bar.step-message.header-and-footer")),i&&this.addStepMessage(this.$translate.instant("builder.progress-bar.step-message.online-content")),e.forEach(function(e){n.addStepMessage(n.$translate.instant("builder.progress-bar.step-message.adding-section",{type:e.id||e.ceType}))}),t.forEach(function(e){n.addStepMessage(n.$translate.instant("builder.progress-bar.step-message.adding-page",{pageTitle:e.pageTitle}))}),this.addStepMessage(this.$translate.instant("builder.progress-bar.step-message.finishing-touches"))},e.prototype.getHomePageSections=function(e){var t=this.utilCreateSelectedOffersMap(),i=this.contentSource.suggestedSections({isHomepage:!0,siteHasStore:t.Stores});return e||this.modifySectionRecommendationsBySelectedOffer(i,t),this.postProcessSuggestedTpaSections(i.suggestions),i.suggestions.filter(function(e){return e.isRecommendedForPage})},e.prototype.getAdditionalPages=function(){if(this.wizWebsite.isConvertingSite())return[this.wizWebsite.createContactPage()];if(this.flags.fullSiteBuilder){var e=this.utilCreateSelectedOffersMap();return this.contentManager.suggestedPages(e[this.applicationParameters.tpaTypes.Stores.type],!1).pageSuggestions.filter(function(e){return e.isRecommendedPage})}return[]},e.prototype.handleSocialImages=function(e){return this.contentManager.isSocialImageEnabled()?(e(this.$translate.instant("builder.progress-bar.step-message.online-content")),this.contentManager.initSocialImages()):this.$q.when()},e.prototype.moveContactSectionToTheEnd=function(e){var t=e.findIndex(function(e){return"Contact"===e.ceType});t>-1&&e.splice(e.length-1,0,e.splice(t,1)[0])},e.prototype.buildSite=function(e,t,i,n,o){var r=this,a=t&&("Blog"===t.contentElementType||"Blog2"===t.contentElementType);return this.forceAddMode(!0),this.wizWebsite.isConvertingSite()?this.addSiteConverterStepsToProgressBar(o):o(this.$translate.instant("builder.progress-bar.step-message.header-and-footer")),this.handleSocialImages(o).catch(function(e){return r.$log.error("Failed Uploading some media.",e)}).then(function(){var n=d.DropTargetCalculator.FirstDropTargetId;return r.flags.fullSiteBuilder&&r.moveContactSectionToTheEnd(i),p.sequencePromises(i,function(i){return r.wizWebsite.isConvertingSite()||o(r.$translate.instant("builder.progress-bar.step-message.adding-section",{type:i.id||i.ceType})),!a||"Blog"!==i.ceType&&"Blog2"!==i.ceType?r.makeSectionInPage(e,i,n).then(function(e){return n=e&&e.id||n,e}):(n=t.id,r.$q.when())})}).then(function(e){r.wizWebsite.isConvertingSite()&&e.forEach(function(e,t){r.setGalleryIfConfigured(e,i[t]),r.setSingleSectionTitle(e,t),r.setListItemTitles(e)})}).then(function(){return p.sequencePromises(n,function(e){return r.wizWebsite.isConvertingSite()||o(r.$translate.instant("builder.progress-bar.step-message.adding-page",{pageTitle:e.pageTitle})),r.addNewPage(e.pageTitle)})}).then(function(){return r.storyServices.story.selectedPage=r.modelTree.homePageId,r.pagesManager.goToPage(r.modelTree.homePageId)}).then(function(){r.forceAddMode(!1),o(r.$translate.instant("builder.progress-bar.step-message.finishing-touches"))})},e.prototype.generateDraftNode=function(e,t){var i,n=this.modelTree.getDataHoldersAndExistingNodesForPage(e,t.ceType,t.rawSectionBrief.cardinality>1);"Contact"===t.ceType?i=n.existingNodes[0]||this.getDefaultContactNodes(t)[0]:i=p.first(this.prepareDrafts(t));return this.overrideDraftsContent([i],n.dataHolders),i},e.prototype.makeSectionInPage=function(e,t,i){var n,o=this;t.isTpa&&((n=t.widgetNode).alias&&!this.flags.wixEvents||(n.alias=t.rawSectionBrief&&t.rawSectionBrief.id||n.alias)),n||(n=this.generateDraftNode(e,t));var r=this.isTpaWidget(t.ceType)||n.isTpaNode&&n.isTpaNode();return n.isTpaWidget=r,this.wizWebsite.isConvertingSite()&&!r&&"Contact"!==n.contentElementType&&this.suggestionExists(t)?("Welcome"!==n.contentElementType&&(n.origin="siteconverter"),this.getPresetsForSiteConverter(r,n,t).then(function(t){if(t)return o.setConfigurationForSection(t,i),o.addSectionToPage(t,e,i,!0)})):(this.flags.headlessApi&&!this.flags.headlessApiUseRandomMedia&&(n.preferredMedia="image"),this.defaultsService.getPresetsForNode(n,t.ceType,!0).then(function(e){return r||(e=o.presetPreviewSorter.sort(e,n)),e}).then(function(a){o.flags.headlessApi&&(e.dusty=!0);var s=o.generatePresetIndex(a,t.ceType);if(r){var l=p.find(o.storyServices.story.selectedOffers,function(e){return e.type===t.ceType}),c=l&&l.data,d=Date.now();return o.flags.youTubeChannel&&o.consumerBiLogger.apps.addTpaStart(t.ceType,o.tpaService.getAppId(n,!0)),o.tpaSectionManager.solveTPACE(a,s,e,n,i,c).then(function(t){var i=n.getContentElementType();return("hidden"===o.tpaService.sectionType(o.tpaService.getNaiveType(i))||o.flags.youTubeChannel&&i===core.TpaWidgetTypes.Video_Widget)&&o.consumerBiLogger.pagesManager.addTpaPackageSuccess(o.consumerBiLoggerHelpers.extraPagesCount(),o.tpaService.getAppId(n,!0),null,Date.now()-d,n.getId(),null),o.flags.tpaHeader?o.addingTpaHeader(t.node,t.preview,e):t})}return o.flags.prettyAlgo?o.solvePrettyAlgo(n,a,e,i):o.solveCE(s,n,s,a,e,i)}))},e.prototype.isTpaWidget=function(e){return!!core.TpaWidgetTypes[e]},e.prototype.getPresetsForSiteConverter=function(e,t,i){var n=this;return this.defaultsService.getPresetsForNode(t,i.ceType,!0,!1,!0).then(function(e){return e=e.map(function(e){return{preset:e,maskIndex:0}}),n.siteConverterPresetPicker.getPresetPreviewForWizSection(e,i.data.contents,t)})},e.prototype.generatePresetIndex=function(e,t){if(this.flags.noRandomForAutomationTests)return 0;if(t===core.TpaWidgetTypes.Events_Single){var i=p.filter(e,function(e){return e.data.isFullWidth}),n=i[p.random(Math.min(i.length-1,4))];return Math.max(e.indexOf(n),0)}return p.random(Math.min(e.length-1,4))},e.prototype.solvePrettyAlgo=function(e,t,i,n){var o=this.presetPreviewGenerator.generateNewPreviews([e],t,0),r=this.layoutSolver.getPartSolutions(this.sitePartTypes.BODY,i.id,!0).getSelectedSolution(),a=this.Solution.calculateListSpans(r)[i.children[i.children.length-1].id];a&&(o=this.presetHelpers.orderPresetsByPrettyAlgo(o,a));var s=o.filter(function(e){return e.score>0}),l=(s.length?s:o).slice(0,10).map(function(e,t,i){var n=Math.pow(e.score,5);return void 0===e.score?e.stackedScore=t:e.stackedScore=0===t?n:i[t-1].stackedScore+n,e});return this.applyPreviewToPage(l,i,n)},e.prototype.applyPreviewToPage=function(e,t,i){var n=this,o=this.getPrettyAlgoWeightedRandomPreview(e);return this.presetHelpers.calculateSolution(o,this.sitePartTypes.BODY).then(function(e){return n.setConfigurationForSection(e,i),n.addSectionToPage(e,t,i,!0).then(function(e){return e})},function(){if(e.splice(e.indexOf(o),1),e.length)return n.applyPreviewToPage(e,t,i)})},e.prototype.getPrettyAlgoWeightedRandomPreview=function(e){var t=e[e.length-1].stackedScore,i=Math.floor(Math.random()*t);return e.find(function(e){return i<=e.stackedScore})},e.prototype.solveCE=function(e,t,i,n,o,r){var s,l=this;if(this.flags.presetSettings)this.presetStrategy=this.presetsStrategyFactory.create(a.PresetsStrategyType.Generic,{strategyMode:a.PresetsStrategyMode.Add}),s=this.presetStrategy.generateListOfPreviews([t]);else{var c=this.presetPreviewGenerator.generateNewPreviews([t],[n[i]],0)[0];s=this.presetHelpers.calculateSolution(c,this.sitePartTypes.BODY)}return s.then(function(e){if(Array.isArray(e)&&e.length){var t=e[0];return"Contact"===t.node.contentElementType&&l.wizWebsite.isConvertingSite()&&e.forEach(function(e){e.node.argsMatchingPolicy["Contact Media"]=!1}),l.presetStrategy.calculatePresetPreview(t,i)}return e}).then(function(e){if(e)return l.setConfigurationForSection(e,r),l.addSectionToPage(e,o,r,!l.flags.headlessApi).then(function(e){return e})},function(){if(!l.flags.presetSettings)return++i===n.length&&(i=0),i===e?l.$q.when():l.solveCE(e,t,i,n,o,r)})},e.prototype.draftsToPrepare=function(t){return t.rawSectionBrief.cardinality>1||t.ceType===o.AddSection.OpeningHours||this.flags.tpaHeader&&t.ceType===l.TPAHeader.TPA_HEADER_CE_TYPE?e.ContentDraftsPerListSection:e.ContentDraftsPerSingleSection},e.prototype.getDefaultContactNodes=function(e){var t=this,i=[];p.each(this.modelTree.data.children,function(t){t.getContentElementType()===e.ceType&&i.push(t)});var n=this.siteModelData.getDefaultValuesForCeType(e.ceType);return p.each(i,function(i){t.contentElementGenerator.setupFieldLabels(i.contentElement,e),p.each(i.contentElement.values,function(e,t){""===e.value&&(i.contentElement.values[t].value=n[t])})}),i},e.prototype.recalculateSiteHeader=function(){return this.tpaSectionManager.recalculateSiteHeader()},e.prototype.prepareDrafts=function(e){var t=this,i=this.contentSource.prepareDrafts(e,this.draftsToPrepare(e)),n=e.rawSectionBrief.syncWithBooking,o=e.rawSectionBrief.preferredMedia;return this.flags.debugOnlyVideo&&(o="video"),p.map(i,function(i,r){var a=t.modelTree.createNodeFromCE(i,"999."+i.type+"_"+r);return a.syncWithBooking=n,a.preferredMedia=o,a.alias=e.alias?e.alias:e.id?e.id:null,p.forEach(a.children,function(e){return e.alias=a.alias}),i.items||(a.hiddenMedia=angular.copy(i.getHiddenMedia())),a.isDraft=!0,t.wizWebsite.isConvertingSite()&&t.modelTree.updateFieldsVisibility(a,void 0,void 0,!0),a})},e.prototype.restoreRemovedNode=function(e,t){var i=this;this.$log.warn("restoring node "+JSON.stringify(e));var n=p.find(t,function(t){return t.ceType===e.ceType}),o=this.modelTree.getPageNodeById(e.pageId);if(n&&o){var r=o.children[e.index-1];return this.makeSectionInPage(o,n,r&&!r.userHidden&&r.id||d.DropTargetCalculator.FirstDropTargetId).then(function(e){e&&i.$log.warn("restored node "+e.id)})}},e.prototype.onPageCalculated=function(e){var t=this;return this.detectAndHandlePageSolutionFailure(e).then(function(){if("header"===e||"footer"===e)t.healthCheck.fixLog.resetHeaderFoterDesignKitConfig&&t.designKit.setConfigurationForHeaderFooter(e);else{var i=t.layoutSolver.getSelectedSolution(t.sitePartTypes.BODY,e);t.tpaSolutionManager.setTpaInitialHeight(i)}t.mobileSolutionManager.createPageMobileSolution(e)})},e.prototype.detectAndHandlePageSolutionFailure=function(e){var t=this;if("header"===e||"footer"===e){var i=void 0;if(this.flags.waas&&"header"===e){var n=p.get(this.introManager,"data.extra.presets.desktop.header");if(n)i={preferedPresets:p.isArray(n)?n:[n]}}return this.simpleSolutionManager.detectAndHandleHeaderOrFooterFailure(e,i)}var o=this.simpleSolutionManager.getSectionMap(e);return p.sequencePromises(o,function(i,n){return t.simpleSolutionManager.detectAndHandleSolutionFailure(e,n,void 0,i)}).then(function(){if(t.healthCheck.fixLog&&t.healthCheck.fixLog.removedNodes&&t.healthCheck.fixLog.removedNodes.length){var i=p.remove(t.healthCheck.fixLog.removedNodes,function(t){return t.pageId===e});if(i.length)return t.contentManager.initialize(t.storyServices.story).then(function(){var e=t.contentManager.suggestedSections().suggestions;return p.sequencePromises(i,function(i){return t.restoreRemovedNode(i,e)})})}})},e.prototype.recalculatePagesWithRemovedNodes=function(){var e=this;if(this.healthCheck.fixLog&&this.healthCheck.fixLog.removedNodes&&this.healthCheck.fixLog.removedNodes.length){this.initBI.reportStart({name:u.BIInitSteps.RecalculatePages,init:!0});var t=p(this.healthCheck.fixLog.removedNodes).groupBy("pageId").keys().value();return p.sequencePromises(t,function(t){return e.layoutSolver.calculatePage(t,!0)}).then(function(){return e.initBI.reportEnd({name:u.BIInitSteps.RecalculatePages,init:!0})})}return this.$q.resolve()},e.prototype.overrideDraftsContent=function(e,t){var i=this;if(t&&0!==t.length)if(t[0].isList()){var n=0;p.forEach(e[0].children,function(e,o){var r=e.getContentElementType();if("ListHeader"!==r&&"ListFooter"!==r){var a=i.getListItemByIndexAndType(n,r,t[0]);if(!a)return;var s=i.getContentKeysToOverride(r);p.forEach(s,function(t){e.contentElement.values[t].value=p.clone(a.contentElement.values[t].value)}),n++}})}else p.forEach(e,function(e,n){var o=e.getContentElement().usesSocialImages,r=e.getContentElementType(),a=t[n%t.length],s=i.getContentKeysToOverride(r);p.forEach(s,function(t){o&&"media"===e.contentElement.values[t].type||(e.contentElement.values[t].value=p.clone(a.contentElement.values[t].value))})})},e.prototype.getListItemByIndexAndType=function(e,t,i){return"ListHeader"===t?this.modelTree.getListHeader(i):"ListFooter"===t?this.modelTree.getListFooter(i):this.modelTree.getListItems(i)[e]},e.prototype.getContentKeysToOverride=function(e){switch(e){case"Homepage_about":case"Inner_about":return["AboutBody"];case"OpeningHours":return["OpeningHoursDescription"];case"Welcome":return["WelcomeBody","WelcomeMedia"];case"Testimonial":return["CustomerQuote","CustomerName"];case"ListHeader":return["listTitle","listSubTitle"];case"ListFooter":return["button","listDescription"]}return[]},e.prototype.suggestionExists=function(e){return e&&e.data&&e.data.contents},e.prototype.setGalleryIfConfigured=function(e,t){var i=p.get(t,"data.contents.mediaDisplayType");if(e&&!e.isList()&&"gallery"===i){var n=this.mediaOverrideManager.getAvailableGalleries(e),o=this.miscUtils.getRandomItem(n);o&&this.mediaOverrideManager.setGallery(e,o.gallery)}},e.prototype.setSingleSectionTitle=function(e,t){e&&(e.alias=this.wizWebsite.composeNodeTitle(e,t,"Section"))},e.prototype.setListItemTitles=function(e){var t=this;e&&e.children&&e.children.length&&e.children.filter(function(e){return!e.isHeader&&!e.isFooter}).forEach(function(e,i){var n=t.wizWebsite.getCEValueBySubType(e,"title");n&&(n.value=t.wizWebsite.composeNodeTitle(e,i,"Item"))})},e.ContentDraftsPerSingleSection=3,e.ContentDraftsPerListSection=1,e.FullWidthMediaOfStrip=1400,e.MaxStretch=1.1,e.AspectRatioDiff=.2,e}();t.SectionManager=g,angular.module("siteGeneratorBuilderInternal").service("sectionManager",g)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(230),o=i(38),r=i(0),a=function(){function e(e,t,i,n,o,r,a,s,l,c){this.solutionSantaMediator=e,this.$q=t,this.siteState=i,this.previewScale=n,this.isMobileEditMode=o,this.sitePartTypes=r,this.layoutSolver=a,this.flags=s,this.mergedHeaderService=l,this.tpaDefinition=c,this.listSpanState="",this.listSpans=[],this.getMinPartHeight={}}return e.prototype.equals=function(e,t){return e&&t&&e.sitePart===t.sitePart&&e.node.id===t.node.id},e.prototype.setChangeSectionHeightState=function(e){void 0===e&&(e=!1),this.listSpanState=e?"changeHeight":""},Object.defineProperty(e.prototype,"isChangeSectionHeightState",{get:function(){return"changeHeight"===this.listSpanState},enumerable:!0,configurable:!0}),e.prototype.setSitePartListSpans=function(e,t,i){void 0===i&&(i=function(){return 0}),this.getMinPartHeight[e]=i,this.flags.lodash4?this.listSpans=r.reject(this.listSpans,["sitePart",e]).concat(t):this.listSpans=r[String("reject")](this.listSpans,{sitePart:e}).concat(t)},e.prototype.getByNodeId=function(e,t){void 0===t&&(t=this.sitePartTypes.BODY);var i=r.find(this.listSpans,function(i){return 0===e.indexOf(i.node.id)&&i.sitePart===t});return r.clone(i)},e.prototype.getAll=function(){return this.listSpans},e.prototype.getAllInBody=function(){return this.getAllInSitePart(this.sitePartTypes.BODY)},e.prototype.getAllInHeader=function(){return this.getAllInSitePart(this.sitePartTypes.HEADER)},e.prototype.getAllInFooter=function(){return this.getAllInSitePart(this.sitePartTypes.FOOTER)},e.prototype.isBodyEmpty=function(){return r.isEmpty(this.getAllInBody())},e.prototype.getAllInSitePart=function(e){return this.flags.lodash4?r.filter(this.listSpans,["sitePart",e]):r[String("filter")](this.listSpans,{sitePart:e})},e.prototype.getLgForCalcWith=function(e){return"horizontal"===e.orientation?r.find(e.groups,function(e){return"ListFooter"===e.contentType})||r.find(e.groups,function(e){return"ListFooter"!==e.contentType&&"ListHeader"!==e.contentType}):e.groups&&r.last(e.groups)},e.prototype.getFirstLayout=function(e){var t=e.groups&&r.first(e.groups);return"horizontal"===e.orientation&&e.groups&&r.find(e.groups,function(e){return"ListHeader"===e.contentType})||t},e.prototype.getListSpanLayout=function(e){var t=this.getFirstLayout(e),i=this.getLgForCalcWith(e);if(t){var o=this.calcLayoutGroupLayout(t,e.index).top,r=this.calcLayoutGroupLayout(i,e.index),a=r.top+r.height-o;return new n.OverlayLayout(o,a)}return new n.OverlayLayout(0,0)},e.prototype.getNodeTopRelativeToListSpan=function(e,t){var i=r.find(t.groups,function(t){return!!r.find(t.segments,function(t){return t.node&&t.node.id===e})});return i?i.getBoundingTop()-this.getListSpanLayout(t).top:0},e.prototype.getListSpanAbsoluteLayout=function(e){var t=this.getListSpanLayout(e),i=t.height,o=t.top;switch(e.sitePart){case this.sitePartTypes.BODY:o+=this.getHeaderHeight();break;case this.sitePartTypes.FOOTER:o+=this.getHeaderHeight()+this.getBodyHeight()}return new n.OverlayLayout(o,i)},e.prototype.rerenderFromIndex=function(e){void 0===e&&(e=0);var t=this.getAllInSitePart(this.sitePartTypes.BODY),i=this.getAllInSitePart(this.sitePartTypes.FOOTER),n=0;if(e>0){var o=t[e-1],r=this.getListSpanLayout(o);n=r.top+r.height}var a=t.slice(e),s=this.rerenderListSpans(a,n),l=this.rerenderListSpans(i,0);return this.$q.all([s,l])},e.prototype.setListSpanTop=function(e,t){var i=t-this.getListSpanLayout(e).top;return this.solutionSantaMediator.moveLayoutGroupArrayByOffset(e.groups,i)},e.prototype.moveListSpanByOffset=function(e,t){return this.solutionSantaMediator.moveLayoutGroupArrayByOffset(e.groups,t)},e.prototype.toggleListSpanVisibility=function(e,t){return this.solutionSantaMediator.setLayoutGroupsVisibility(e.groups,t)},e.prototype.moveListSpansByOffset=function(e,t){var i=this;return e.map(function(e){return i.moveListSpanByOffset(e,t)})},e.prototype.setPlaceholder=function(e,t){this.solutionSantaMediator.setPlaceholder(e,t)},e.prototype.clearPlaceholder=function(){this.solutionSantaMediator.clearPlaceholder()},e.prototype.shouldMoveLayout=function(e,t){return this.flags.mergedHeader&&e===this.sitePartTypes.BODY&&0===t&&this.mergedHeaderService.isHeaderMerged()},e.prototype.calcLayoutGroupLayout=function(e,t){var i=e.getBoundingTop(),o=e.getBoundingHeight();this.shouldMoveLayout(e.sitePart,t)&&(i+=e.isMobile()?this.layoutSolver.getMobileHeaderHeight(e.page):this.layoutSolver.getHeaderHeight(e.page));return new n.OverlayLayout(i,o)},e.prototype.getLayoutGroupAbsoluteLayout=function(e){var t=this.calcLayoutGroupLayout(e),i=t.height,o=t.top;switch(e.sitePart){case this.sitePartTypes.BODY:o+=this.getHeaderHeight();break;case this.sitePartTypes.HEADER:"footer"===e.page&&(o+=this.getHeaderHeight()+this.getBodyHeight())}return new n.OverlayLayout(o,i)},e.prototype.isInViewport=function(e,t){var i=this.siteState.getSiteScroll().y;return e<=i+$(o.Overlay.ViewportSelector).height()&&t>=i},e.prototype.getLayoutGroupsInViewport=function(){var e=this,t=this.previewScale.getScale(),i=this.getAll();return r(i).map("groups").flattenDeep().filter(function(i){var n=e.getLayoutGroupAbsoluteLayout(i).scale(t),o=n.height,r=n.top;return e.isInViewport(r,r+o)}).value()},e.prototype.getHeaderHeight=function(){return this.getSitePartHeight(this.sitePartTypes.HEADER)},e.prototype.getBodyHeight=function(){return this.getSitePartHeight(this.sitePartTypes.BODY)},e.prototype.getListSpanHeightByNodeId=function(e){return this.getListSpanAbsoluteLayout(this.getByNodeId(e)).height},e.prototype.getSegmentByNodeId=function(e,t){var i=this.getByNodeId(e,t);if(i)return r(i.groups).map("segments").flatten().value().find(function(t){return t.node.id===e})},e.prototype.hasTpaDesign=function(e){return this.tpaDefinition.hasTpaDesigns.indexOf(e)>=0},e.prototype.getSitePartHeight=function(e){var t=this,i=r.filter(this.listSpans,{sitePart:e}),n=this.getMinPartHeight[e]&&this.getMinPartHeight[e]()||0,o=(this.flags.lodash4?r.strictSumBy:r[String("sum")])(i,function(e){return t.getListSpanLayout(e).height});return Math.max(o,n)},e.prototype.rerenderListSpans=function(e,t){var i=this;void 0===t&&(t=0);var n=t,o=e.map(function(e){var t=i.getListSpanLayout(e).height,o=i.setListSpanTop(e,n);return n+=t,o});return this.$q.all(o)},e.MinBodyHeight=505,e}();t.ListSpanManager=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(66),o=i(2),r=i(234),a=i(174),s=i(0),l=function(){function e(e,t,i,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b){var I=this;if(this.$rootScope=e,this.solutionSantaMediator=t,this.$q=i,this.sitePartTypes=a,this.previewScale=s,this.modelTree=l,this.designKit=c,this.storyServices=d,this.applicationParameters=u,this.Solution=p,this.documentServicesMediator=g,this.siteState=h,this.flags=m,this.FeatureList=f,this.prettyAlgoRules=v,this.$injector=S,this.layoutSolver=y,this.mergedHeaderService=T,this.tpaDefinition=b,this._partRenderCache={},this.isAddTargetKnown=!1,this.flags.removeSpinnerAsStageReady&&o.PubSub.subscribeOnce(o.events.PREVIEW_READY,function(){I.flags.loadPreviewAsap&&!I.flags.templateSite?I.storyServices.getIsStoryAvailablePromise().then(function(){return I.createFakeOverlay()}):I.createFakeOverlay()}),this._listSpanManager=new n.ListSpanManager(this.solutionSantaMediator,this.$q,this.siteState,this.previewScale,function(){return I.applicationParameters.isInMobileEditMode()},this.sitePartTypes,this.layoutSolver,this.flags,this.mergedHeaderService,this.tpaDefinition),this._overlayData=new r.OverlayData(this.listSpanManager,this.sitePartTypes),this.$rootScope.$watch(function(){return I.previewScale.getScale()},function(e){return I.calculateDropTargetPosition(I.dropTargetId)}),this.storyServices.onRenderedPart(this.renderedPartHandler.bind(this)),this.flags.debug&&this.flags.prettyAlgo){var P=this.$injector.get("prettyAlgoDX");P.init().then(function(){return P.getRulesFromDB()}).then(function(e){I.prettyAlgoRules=e,console.log("loaded rules from firebase",e)})}}return e.$inject=["$rootScope","solutionSantaMediator","$q","sitePartTypes","previewScale","modelTree","designKit","storyServices","applicationParameters","Solution","documentServicesMediator","siteState","flags","FeatureList","prettyAlgoRules","$injector","layoutSolver","mergedHeaderService","tpaDefinition"],e.prototype.createFakeOverlay=function(){var e=this.storyServices.story.selectedPage,t=this.modelTree.getPageNodeById(e).children[1],i=this.documentServicesMediator.getLayout(this.documentServicesMediator.getCurrentPage()).height+this.documentServicesMediator.getLayout({type:"DESKTOP",id:"SITE_HEADER"}).height+this.documentServicesMediator.getLayout({type:"DESKTOP",id:"SITE_FOOTER"}).height,n={nodeId:t&&t.id};this.renderedPartHandler(void 0,this.sitePartTypes.BODY,[],i,e,"desktop",n)},e.prototype.getPartRenderCache=function(e){void 0===e&&(e=this.applicationParameters.isInMobileEditMode());var t=e?"mobile":"desktop";return this._partRenderCache[t]=this._partRenderCache[t]||{},this._partRenderCache[t]},Object.defineProperty(e.prototype,"data",{get:function(){return this._overlayData},enumerable:!0,configurable:!0}),e.prototype.getDropTargetSection=function(){var e=this,t=this.listSpanManager.getAllInBody();return s.find(t,function(t){return t.node.getId()===e.dropTargetId})},e.prototype.onEditModeSwitched=function(e){var t=this,i=s.mapValues(this.getPartRenderCache(e),function(e,i){return i===t.sitePartTypes.BODY?e[t.storyServices.story.selectedPage]:e.any});s.each(i,function(e,i){return e&&t.updateData(e.solution,i,e.height)})},e.prototype.getSitePartByType=function(e){return this.data.siteParts[e]},e.prototype.updateSitePart=function(e){this.data.siteParts[e.partType]=e,this.calculatePartHeight(e.partType)},e.prototype.getDropTargetHeight=function(){return this.dropTargetId&&!this.listSpanManager.isBodyEmpty()?e.DropTargetHeight:0},e.prototype.getViewerHeight=function(){var e=this.flags.lodash4?s.values(this.data.siteParts):this.data.siteParts;return(this.flags.lodash4?s.strictSumBy:s[String("sum")])(e,function(e){return e.originalHeight||0})+this.getDropTargetHeight()},e.prototype.calculateBodyHeight=function(){this.calculatePartHeight(this.sitePartTypes.BODY)},Object.defineProperty(e.prototype,"listSpanManager",{get:function(){return this._listSpanManager},enumerable:!0,configurable:!0}),e.prototype.isListSpanHovered=function(e){return this.listSpanManager.equals(e,this.data.hoveredListSpan)},e.prototype.isListSpanFocused=function(e){return this.listSpanManager.equals(e,this.data.focusedListSpan)},e.prototype.updateContentFocus=function(e){e?(this.data.focusedListSpan=this.listSpanManager.getByNodeId(e.nodeId,e.sitePart),this.isListSpanFocused(this.data.hoveredListSpan)&&(this.data.hoveredListSpan=null)):(this.data.focusedListSpan=null,this.data.hoveredListSpan=null)},Object.defineProperty(e.prototype,"isCurrentPageEmpty",{get:function(){if(!this.storyServices.story)return!0;var e=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage);return!(this.flags.membersArea&&e&&e.membersArea)&&(!e||!s.some(e.children,{userHidden:!1}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropTargetData",{get:function(){return this.data.dropTargetData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropTargetId",{get:function(){return this.dropTargetData.dropTargetId},enumerable:!0,configurable:!0}),e.prototype.clearDropTarget=function(){return this.setDropTarget(null)},Object.defineProperty(e.prototype,"addTargetKnown",{get:function(){return this.isAddTargetKnown},enumerable:!0,configurable:!0}),e.prototype.setAddTargetKnown=function(e){this.isAddTargetKnown=e},e.prototype.setDropTarget=function(e){if(this.dropTargetData.isDropTargetLocked)return!1;if(e===this.dropTargetId)return!0;var t=this.dropTargetId;return this.dropTargetData.dropTargetId=e,this.calculatePartHeight(this.sitePartTypes.BODY),e?this.handleDropTargetChange(t,e):this.listSpanManager.rerenderFromIndex(0),!0},e.prototype.lockDropTarget=function(e){return!this.dropTargetData.isDropTargetLocked&&(this.setDropTarget(e),this.dropTargetData.lock(),!0)},e.prototype.unlockDropTarget=function(){this.dropTargetData.unlock()},e.prototype.makeSpaceForDropTarget=function(t,i){var n=this.listSpanManager.getAllInBody(),o=this.getListSpanIndex(i,n),r=t?this.getListSpanIndex(t,n):n.length,a=Math.min(r,o),s=Math.max(r,o),l=n.slice(a+1,s+1),c=(r>o?1:-1)*e.DropTargetHeight;return this.listSpanManager.moveListSpansByOffset(l,c)},e.prototype.handleDropTargetChange=function(e,t){this.makeSpaceForDropTarget(e,t),this.calculateDropTargetPosition(t)},e.prototype.calculateDropTargetPosition=function(e){if(e){var t=this.listSpanManager.getAllInBody(),i=s.find(t,function(t){return t.node.getId()===e});if(i){var n=this.listSpanManager.getListSpanLayout(i);this.data.dropTargetData.dropTargetPosition=(n.top+n.height)*this.previewScale.getScale()}else this.data.dropTargetData.dropTargetPosition=0}else this.data.dropTargetData.dropTargetPosition=0},e.prototype.renderedPartHandler=function(e,t,i,n,o,r,a){var s="mobile"===r,l=t===this.sitePartTypes.BODY,c=this.getPartRenderCache(s)[t]||{};c[l?o:"any"]={solution:i,height:n},this.getPartRenderCache(s)[t]=c,s===!!this.applicationParameters.isInMobileEditMode()&&(!l||this.storyServices.story.selectedPage===o)&&this.updateData(i,t,n,a)},e.prototype.updateData=function(e,t,i,o){var r=this,l=this.Solution.calculateListSpans(e),c={partType:t,originalHeight:i,adjustedHeight:i,listSpans:l,fakeData:o};if(this.flags.prettyAlgo&&t===this.sitePartTypes.BODY)for(var d=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage).children,u=2,p=d.length;u<p;u++){var g=l[d[u-1].id],h=l[d[u].id],m=new this.FeatureList(g),f=new this.FeatureList(h),v=a.prettyAlgoRuleEngine.getScores(this.prettyAlgoRules,m,[f])[0];v&&(h.prettyAlgo={score:v.score,rules:v.rules,features:f})}this.updateSitePart(c),this.listSpanManager.setSitePartListSpans(t,s.values(l),function(){return t!==r.sitePartTypes.BODY||r.applicationParameters.isInMobileEditMode()?c.adjustedHeight:n.ListSpanManager.MinBodyHeight}),this.data.focusedListSpan&&(this.data.focusedListSpan=this.listSpanManager.getByNodeId(this.data.focusedListSpan.listNodeId,this.data.focusedListSpan.sitePart)),this.data.hoveredListSpan&&(this.data.hoveredListSpan=this.listSpanManager.getByNodeId(this.data.hoveredListSpan.listNodeId,this.data.hoveredListSpan.sitePart))},e.prototype.getListSpanIndex=function(e,t){var i=this;return s.findIndex(t,function(t){var n=t.node.id,o=t.sitePart;return n===e&&o===i.sitePartTypes.BODY})},e.prototype.calculatePartHeight=function(t){if(t===this.sitePartTypes.BODY){var i=this.getSitePartByType(t);if(!i)throw new Error("site part not found:"+t);i.adjustedHeight=i.originalHeight,this.data.draggedListSpan&&(i.adjustedHeight-=this.listSpanManager.getListSpanLayout(this.data.draggedListSpan).height),this.data.dropTargetData.dropTargetId&&!this.isCurrentPageEmpty&&(i.adjustedHeight+=e.DropTargetHeight)}},e.DropTargetHeight=450,e}();t.OverlayManager=l,angular.module("siteGeneratorStaticsConsumerAppInternal").service("overlayManager",l)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=function(){function e(){}return e.CHOOSE="choose",e.CONNECT="connect",e.CONGRATS="congrats",e}();t.PublishDialogStates=o;var r=function(){function e(t,i,r,a,s,l,c,d,u,p,g){var h=this;this.$q=i,this.$log=r,this.$window=a,this.publishService=s,this.consumerBiLogger=l,this.userService=c,this.flags=d,this.consumerPublishService=u,this.CcDialogBuilder=p,this.consumerBiLoggerHelpers=g,this.metaSiteId=t.getMetaSiteId(),this.firstPublish=!s.isSitePublished(),this.disableGoToConnectDomain=!1,this.referralString=this.domain?"fakebrowser-suggested":"onboarding-"+(this.source?this.source:(this.firstPublish?1:2)+"publish"),this.managePremiumUrl=""+e.MyAccountPrefix+this.metaSiteId+"/manage-premium/?referralAdditionalInfo="+this.referralString,this.newDomainUrl=""+e.PremiumPrefix+e.DomainsMidfix+"?domainSearch=true&referralAdditionalInfo="+this.referralString,this.connectNewOwnedDomainUrl=""+e.PremiumPrefix+e.DomainsMidfix+"?connectDomain=true&referralAdditionalInfo="+this.referralString,this.connectUnattachedOwnedDomainUrl=""+e.MyAccountPrefix+this.metaSiteId+"/manage-premium/?referralAdditionalInfo="+this.referralString,this.packagePickerUrl=e.PremiumPrefix+"premiumStart?siteGuid="+this.metaSiteId+"&referralAdditionalInfo="+this.referralString+(this.domain?"&domainName="+encodeURI(this.domain):""),this.consumerBiLogger=l,this.screen?this.setState(this.screen):this.firstPublish&&!s.isDomainConnected()?this.setState(o.CHOOSE):(this.setState(o.CONGRATS),this.consumerBiLoggerHelpers.resetLoadTime(),this.consumerPublishService.publishStory().then(function(){h.consumerBiLogger.builder.publishSuccess(!1)})),this.flags.closePublishPopupOnSaveFailed&&n.PubSub.subscribeOnce(n.events.DS_SAVE_FAILED,function(){h.closeDialogAndCancelPublish()})}return e.$inject=["siteState","$q","$log","$window","publishService","consumerBiLogger","userService","flags","consumerPublishService","CcDialogBuilder","consumerBiLoggerHelpers"],e.prototype.sendCloseDialogBiEvents=function(){this.state!==o.CONNECT&&this.consumerBiLogger.builder.publishSiteClosePage(this.referralString)},e.prototype.setState=function(e){this.state=e},e.prototype.closeDialog=function(){this.sendCloseDialogBiEvents(),this.CcDialogBuilder.hide()},e.prototype.closeDialogAndCancelPublish=function(){this.sendCloseDialogBiEvents(),this.CcDialogBuilder.cancel()},e.prototype.skipToCongrats=function(e){this.userHasChosenConnectADomain=!0,this.consumerBiLogger.builder.connectDomainClosePage(e),this.screen===o.CONNECT?this.closeDialog():this.setState(o.CONGRATS)},e.prototype.goToNewDomain=function(){this.userHasChosenConnectADomain=!0,this.consumerBiLogger.builder.connectDomainNavigateToDomainSPages("newdomain"),this.$window.open((this.publishService.isPremium()?this.newDomainUrl:this.packagePickerUrl)+(this.flags.suggestDomain?"":"-newdomain")),this.screen===o.CONNECT?this.closeDialog():this.setState(o.CONGRATS)},e.prototype.goToConnectDomain=function(){var e,t=this;if(!this.disableGoToConnectDomain)return this.disableGoToConnectDomain=!0,this.userHasChosenConnectADomain=!0,this.consumerBiLogger.builder.connectDomainNavigateToDomainSPages("owndomain"),(this.publishService.isPremium()?this.userService.hasUnattachedOwnedDomain().then(function(e){return e?t.connectUnattachedOwnedDomainUrl:t.connectNewOwnedDomainUrl}):this.$q.when(this.packagePickerUrl)).then(function(t){e=t}).catch(function(i){t.$log.error("Failed reading from server, so using fallback url",i),e=t.connectNewOwnedDomainUrl}).then(function(){t.$window.open(e+"-owndomain")}).finally(function(){t.disableGoToConnectDomain=!1,t.screen===o.CONNECT?t.closeDialog():t.setState(o.CONGRATS)})},e.prototype.goToManagePremium=function(e){var t=this.publishService.isPremium()?this.managePremiumUrl:this.packagePickerUrl;this.$window.open(t+"-"+e)},e.MyAccountPrefix="https://www.wix.com/my-account/sites/",e.PremiumPrefix="https://premium.wix.com/wix/api/",e.DomainsMidfix="mpContainerStaticController#/domains",e}();t.PublishDialog=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(38),o=i(10),r=i(0),a=function(){function e(e,t,i,n,o,r,a){this.overlayManager=e,this.previewService=t,this.previewScale=i,this.sitePartTypes=n,this.siteState=o,this.flags=r,this.$timeout=a}return e.$inject=["overlayManager","previewService","previewScale","sitePartTypes","siteState","flags","$timeout"],e.prototype.initDropTarget=function(){var e=this;if(this.previewScale.setScale(o.PreviewScale.MinScale),this.overlayManager.dropTargetId){var t=this.overlayManager.listSpanManager.getAllInBody();this.scrollToDropTargetCandidate(this.overlayManager.dropTargetId,t),this.$timeout(function(){e.overlayManager.unlockDropTarget()},0)}},e.prototype.scrollToDropTargetCandidate=function(t,i){var o=this.generateDropTargetCandidates(i),r=this.getYPositionByID(o,t)-e.DistanceFromDropTarget;document.querySelector(n.Overlay.ViewportSelector).scrollTop=r},e.prototype.updateDropTarget=function(){this.overlayManager.setDropTarget(this.getDropTargetInViewPort())},e.prototype.getDropTargetInViewPort=function(){if(this.overlayManager.addTargetKnown)return this.overlayManager.dropTargetId;var t=document.querySelector(n.Overlay.ViewportSelector),i=this.overlayManager.listSpanManager.getAllInBody();return t&&0!==i.length?this.isAlmostTotallyScrolled(t)?i[i.length-1].node.id:this.calculateClosestDropTargetInViewPort(i,this.getSiteYScrollPosition()):e.FirstDropTargetId},e.prototype.isAlmostTotallyScrolled=function(e){return e.scrollHeight-e.scrollTop-e.clientHeight<=48},e.prototype.getClosestDropTargetInViewPort=function(e,t){var i=this.getActualClientY(e);return this.calculateClosestDropTargetInViewPort(t,i)},e.prototype.getActualClientY=function(t){return t+this.getSiteYScrollPosition()-e.TopBarHeight-e.OverlayTopOffset},e.prototype.calculateClosestDropTargetInViewPort=function(e,t){var i=this.generateDropTargetCandidates(e);return this.isLockedDropTargetInViewport(i)?this.overlayManager.dropTargetId:(this.overlayManager.unlockDropTarget(),this.detectBestDropTargetCandidate(i,t))},e.prototype.generateDropTargetCandidates=function(t){var i=this,n=this.previewScale.getScale(),o={yPosition:this.overlayManager.listSpanManager.getHeaderHeight()*n+e.OverlayTopOffset,nodeId:e.FirstDropTargetId},r=t.map(function(e){return{yPosition:i.overlayManager.listSpanManager.getListSpanAbsoluteLayout(e).scale(n).getBottom(),nodeId:e.node.id}});return[o].concat(r)},e.prototype.isLockedDropTargetInViewport=function(e){return this.overlayManager.dropTargetData.isDropTargetLocked&&this.isInViewPort(document.querySelector(n.Overlay.ViewportSelector),this.getYPositionByID(e,this.overlayManager.dropTargetId))},e.prototype.getYPositionByID=function(e,t){return r.find(e,{nodeId:this.overlayManager.dropTargetId}).yPosition},e.prototype.detectBestDropTargetCandidate=function(e,t){var i=this,o=document.querySelector(n.Overlay.ViewportSelector),a=r.filter(e,function(e){var t=e.yPosition;return i.isInViewPort(o,t)}),s=r.isEmpty(a)?e:a;return(this.flags.lodash4?r.strictMinBy:r[String("min")])(s,function(e){var i=e.yPosition;return Math.abs(t-i)}).nodeId},e.prototype.isInViewPort=function(e,t){var i=this.getSiteYScrollPosition(),n=i+e.clientHeight;return t>=i&&t<=n},e.prototype.getSiteYScrollPosition=function(){return this.siteState.getSiteScroll().y},e.TopBarHeight=72,e.OverlayTopOffset=54,e.DistanceFromDropTarget=100,e.FirstDropTargetId="0",e}();t.DropTargetCalculator=a,angular.module("siteGeneratorStaticsConsumerAppInternal").service("dropTargetCalculator",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.images=[{Description:"",Link:{},Title:"Misty Slope",height:1280,mediaType:"image",relativeUri:"99ec98fdb81945c29c25a3ad6c5606b1.jpg",width:1920},{Description:"",Link:{},Title:"Taj Mahal",height:1275,mediaType:"image",relativeUri:"d967ba93f0314c78924edc8a8c8cfa15.jpg",width:1920},{Description:"",Link:{},Title:"Palm Trees",height:1280,mediaType:"image",relativeUri:"3cd1de924697419088c1e033bb3384ef.jpg",width:1920}],e.clipart={Title:"Black and White Star in Circle",mediaType:"clipart",relativeUri:"cd115295292ab894d58b44978c02d931.png",uri:"cd115295292ab894d58b44978c02d931.png",fileUrl:"media/cd115295292ab894d58b44978c02d931.png",width:378,height:349},e.shape={Description:"",Link:{},Title:"Graphic Shape 4",mediaType:"shape",relativeUri:"shapes/2e796bc57637468ba28a8ca2e254810f.svg"},e.extVideo={videoUrl:"https://youtu.be/Pdq8ddrLd1A",videoId:"Pdq8ddrLd1A",thumbnailUrl:"https://i.ytimg.com/vi/Pdq8ddrLd1A/hqdefault.jpg",width:480,height:360,Title:"Wix default video",Description:"",mediaType:"extVideo",active:!0,controls:1,playmode:{autoplay:!0,loop:!1}},e.bgVideo={mediaType:core.MediaItemTypes.Video,uri:"11062b_3e2f37c297534f9ead156265242fbca8",fileUrl:"video/11062b_3e2f37c297534f9ead156265242fbca8",title:"Urban View",fileInput:{audioBitrate:196,videoBitrate:10082,height:1080,width:1920,fps:25,duration:19600,type:"video",displayAspectRatio:"16:9"},fileOutput:{image:[{status:"READY",secure:!1,format:"jpg",url:"media/11062b_3e2f37c297534f9ead156265242fbca8f000.jpg",height:1080,width:1920,key:"poster.0"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_3e2f37c297534f9ead156265242fbca8f001.jpg",height:1080,width:1920,key:"poster.1"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_3e2f37c297534f9ead156265242fbca8f002.jpg",height:1080,width:1920,key:"poster.2"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_3e2f37c297534f9ead156265242fbca8f003.jpg",height:1080,width:1920,key:"poster.3"}],video:[{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/480p/mp4/file.mp4",height:480,videoBitrate:877,tag:"High",key:"480p.mp4",duration:19600,displayAspectRatio:"16:9",quality:"480p",width:854},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/480p/webm/file.webm",height:480,videoBitrate:1457,tag:"High",key:"480p.webm",duration:19600,displayAspectRatio:"16:9",quality:"480p",width:854},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/720p/mp4/file.mp4",height:720,videoBitrate:3362,tag:"HD",key:"720p.mp4",duration:19600,displayAspectRatio:"16:9",quality:"720p",width:1280},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/720p/webm/file.webm",height:720,videoBitrate:3954,tag:"HD",key:"720p.webm",duration:19600,displayAspectRatio:"16:9",quality:"720p",width:1280},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/1080p/mp4/file.mp4",height:1080,videoBitrate:5753,tag:"HD",key:"1080p.mp4",duration:19600,displayAspectRatio:"16:9",quality:"1080p",width:1920},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/1080p/webm/file.webm",height:1080,videoBitrate:7151,tag:"HD",key:"1080p.webm",duration:19600,displayAspectRatio:"16:9",quality:"1080p",width:1920}]},vendor:"bigstock&bigstock&bigstock&clipcanvas",reference:"v49780622&v493478872&v49737086&v318347",fileBaseUrl:"video/11062b_3e2f37c297534f9ead156265242fbca8",relativeUri:"11062b_3e2f37c297534f9ead156265242fbca8",thumbnailUrl:"https://static.wixstatic.com/media/11062b_3e2f37c297534f9ead156265242fbca8f002.jpg/v1/fit/w_288,h_155/11062b_3e2f37c297534f9ead156265242fbca8f002.jpg",Title:"Urban View",Description:"",controls:0,playmode:{autoplay:!0,loop:!0},active:!0},e.BackgroundImages=[],e}();t.ContentDefaults=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(183),o=i(4),r=i(1),a=i(0),s=function(){function e(e,t,i,n,r,a,s,l,c,d){this.$rootScope=e,this.$q=t,this.$timeout=i,this.assistantUtils=n,this.assistantUIAdapter=r,this.assistantWaitUntilElement=a,this.experimentManager=s,this.storyServices=l,this.$injector=c,this.flags=d,this.waitUntilElementWorkers=[],this.isInAutoplay=!1,this.dockStatus=o.AssistantDockStatus.Hidden,this.menuProgress=o.AssistantMenuProgress.beginner,this._undoRedo=null}return e.$inject=["$rootScope","$q","$timeout","assistantUtils","assistantUIAdapter","assistantWaitUntilElement","experimentManager","storyServices","$injector","flags"],e.prototype.getActiveTask=function(){return this.activeTask},e.prototype.getActiveAction=function(){return this.activeAction},Object.defineProperty(e.prototype,"undoRedo",{get:function(){return this._undoRedo=this._undoRedo||this.$injector.get("undoRedo"),this._undoRedo},enumerable:!0,configurable:!0}),e.prototype.startTask=function(e,t){(void 0===t&&(t=0),this.flags.noTour)||(this.setDockStatus(o.AssistantDockStatus.Playing),this.getActiveTask()?(a.get(this.storyServices.story,"visitedTasks."+e.id+"."+this.visitedTaskKey)||(a.set(this.storyServices.story,"visitedTasks."+e.id+"."+this.visitedTaskKey,!0),this.undoRedo.captureOperation(!1,!0)),this.setIntent({operation:o.AssistantOperation.Start,task:e,actionIndex:t})):(this.activateTask(e),this.handleActionLifecycle(this.getActiveTask(),t)))},Object.defineProperty(e.prototype,"visitedTaskKey",{get:function(){return"visited"},enumerable:!0,configurable:!0}),e.prototype.isTaskVisited=function(e){return this.storyServices.story.visitedTasks[e.id][this.visitedTaskKey]},e.prototype.stop=function(){this.setIntent({operation:o.AssistantOperation.Stop})},e.prototype.stopAndComplete=function(){this.setIntent({operation:o.AssistantOperation.Complete})},e.prototype.forceStop=function(){this.setIntent({operation:o.AssistantOperation.ForceStop})},e.prototype.gotoNextAction=function(){this.setIntent({operation:o.AssistantOperation.Next})},e.prototype.gotoPrevAction=function(){this.gotoActionInActiveTask(this.getActiveTask().activeActionIndex-1)},e.prototype.gotoLastAction=function(){this.gotoActionInActiveTask(this.getActiveTask().actions.length-1)},e.prototype.gotoActionInActiveTask=function(e){this.setIntent({operation:o.AssistantOperation.Goto,actionIndex:e})},e.prototype.setMenu=function(e){this.menuTask=e},e.prototype.isInActiveTask=function(){return!!this.getActiveTask()},e.prototype.openMenu=function(e,t){if(t=t||n.AssistantTabListService.TAB_ID.BUCKET_LIST,!this.isMenuTaskDefined())throw"Assistant - menu task is not defined";this.assistantUtils.broadcastAssistantEvent(o.AssistantAction.EVENTS.OPEN_MENU,e,t),this.startTask(this.menuTask)},e.prototype.setIntent=function(e){e.goToIndex&&(e.actionIndex=e.goToIndex),this.userOrSystemIntent=e,this.unblockLifecycle()},e.prototype.getIntent=function(){return this.userOrSystemIntent},e.prototype.setDockStatus=function(e){this.dockStatus=e},e.prototype.getDockStatus=function(){return this.dockStatus},e.prototype.setMenuProgress=function(e){this.menuProgress=e},e.prototype.getMenuProgress=function(){return this.menuProgress},e.prototype.isInAutoplayMode=function(){return this.isInAutoplay},e.prototype.canStop=function(){return this.getActiveTask()&&!this.getActiveTask().isUnstoppable},e.prototype.setCustomTaskData=function(e,t){var i=this.getActiveTask();i&&(i.customData=i.customData||{},i.customData[e]=t)},e.prototype.getCustomTaskData=function(e){var t=this.getActiveTask();if(t)return t.customData&&t.customData[e]},e.prototype.isTaskInLastAction=function(e){return e.actions.length-1===e.activeActionIndex},e.prototype.isMenuOpen=function(){return this.isMenuTask(this.activeTask)},e.prototype.isIntentToStop=function(){var e=this.getIntent();return e&&e.operation===o.AssistantOperation.Stop},e.prototype.setTaskComplete=function(e){e.isComplete=!0,this.assistantUtils.saveTaskData(e)},e.prototype.allowDialogInterruptions=function(){var e=this.getActiveAction();return!e||Boolean(e.allowDialogInterruptions)},e.prototype.mergeActionsConf=function(e,t){var i;e.exitTriggers&&t.exitTriggers?(i=e.exitTriggers.slice(),t.exitTriggers.forEach(function(e){var t=i.findIndex(function(t){return t.element===e.element});-1!==t?i[t]=a.merge({},i[t],e):i.push(e)})):i=e.exitTriggers||t.exitTriggers;var n=a.merge({},e,t);return n.exitTriggers=i,n},e.prototype.handleActionLifecycle=function(e,t){var i=this;void 0===t&&(t=0);try{if(this.setActiveActionIndex(e,t),this.activeAction=this.getAction(e,t,this.isInAutoplay),this.activeAction.shouldSkipAction&&this.activeAction.shouldSkipAction())return this.gotoNextAction(),void this.handleIntent();this.lifecyclePreparation(e,this.activeAction).then(function(){return i.lifecycleUIPreparation(i.activeAction)}).then(function(){return i.renderAction(e,i.activeAction)}).then(function(){return i.lifecycleUITeardown(i.activeAction)}).then(function(){return i.lifecycleTeardown(e,i.activeAction)}).then(function(){return i.handleIntent()}).catch(function(){return i.stopTaskAndHandleMenu()})}catch(e){console.error("encountered error in lifecycle",e),this.stopTaskAndHandleMenu()}},e.prototype.lifecyclePreparation=function(e,t){var i=this;this.assistantUtils.broadcastAssistantEvent(o.AssistantAction.EVENTS.ACTION_START),this.resetIntent(),this.handleAutoplay(t.onEnter),this.setExitTriggerElementSelectors(t.exitTriggers,t);var n=a.map(t.exitTriggers,function(e){return angular.element(e.element)});return this.assistantUIAdapter.disableElements(n),this.assistantUtils.waitForSpinner(t.waitForSpinner).then(function(){return i.assistantUtils.redirectToState(t.redirectToState)}).then(function(){return i.assistantUtils.delayAction(t.delayBeforeStartInMs)}).then(function(){return i.waitForExpressions(t.waitForExpressions)}).then(function(){return i.waitUntilElementIsInDOM(t,t.waitForElement,t.waitForElementCondition).catch(function(e){return i.assistantUtils.broadcastAssistantEvent(o.AssistantAction.EVENTS.TASK_TIMEOUT)})}).then(function(){t.events&&t.events.onEnter&&t.events.onEnter.forEach(function(e){return i.$rootScope.$broadcast(e)})}).then(function(){if(t.onEnter&&t.onEnter.callback)return t.onEnter.callback(e,t)}).then(function(){if(t.onEnter&&t.onEnter.DOMEvents)return i.$q.all(t.onEnter.DOMEvents.map(function(e){return i.runExitTrigger(e)}))}).then(function(){if(t.element)return i.waitUntilElementIsInDOM(t,t.element.selector).then(function(){return t.element.selector=i.assistantUtils.getElementSelector(t.element)}).catch(function(e){return i.assistantUtils.broadcastAssistantEvent(o.AssistantAction.EVENTS.TASK_TIMEOUT)})}).then(function(){return i.registerExitTriggers(t.exitTriggers,t)}).then(function(){return i.assistantUIAdapter.enableElements(n),i.$q.when()})},e.prototype.lifecycleUIPreparation=function(e){var t=this;return this.assistantUIAdapter.scrollToElement(e),this.assistantUIAdapter.moveHintToElement(e).then(function(){t.handleInteractivity(e),t.disabledElements=e.disabledElements?e.disabledElements.map(function(e){return angular.element(e)}):[],t.assistantUIAdapter.disableElements(t.disabledElements)})},e.prototype.renderAction=function(e,t){var i=this;if(!this.userOrSystemIntent)return this.assistantUIAdapter.renderAction(t,this.assistantUtils.compileTemplateContent(this,e,t,this.flags)).then(function(){return i.isInAutoplay&&i.runAutoplay(t),i.blockLifecycleUntilUserInteraction()}).then(function(){if(t.hint)return i.assistantUIAdapter.simulateClick()})},e.prototype.lifecycleUITeardown=function(e){return this.assistantUIAdapter.enableElements(this.disabledElements),this.assistantUIAdapter.hideAction(e)},e.prototype.lifecycleTeardown=function(e,t){var i=this;this.cancelAutoplayTimeout();var n=this.$q.when();return t.onExit&&t.onExit.callback&&n.then(function(){return t.onExit.callback(e,t)}),t.onExit&&t.onExit.DOMEvents&&n.then(function(){return i.$q.all(t.onExit.DOMEvents.map(function(e){return i.runExitTrigger(e)}))}),t.backdrop&&t.backdrop.fadeOutOnExit&&(this.assistantUIAdapter.fadeOutBackdrop(t.backdrop.fadeOutTime),n.then(function(){return i.$timeout(angular.noop,t.backdrop.fadeOutTime)})),t.events&&t.events.onExit&&t.events.onExit.forEach(function(e){return i.$rootScope.$broadcast(e)}),n.then(function(){i.handleAutoplay(t.onExit),i.stopAllWaitUntilElementWorkers(),i.unregisterExitTriggers(t.exitTriggers,t),i.assistantUtils.broadcastAssistantEvent(o.AssistantAction.EVENTS.ACTION_COMPLETED)})},e.prototype.clearCustomTaskData=function(){this.getActiveTask().customData={}},e.prototype.getAction=function(e,t,i){if(!e.actions||t<0||t>=e.actions.length)throw"action index out of bounds";var n=e.actions[t];return n=this.createActionAccordingToExperiments(n),n=this.createActionByAutoplayMode(n,i),n=this.createActionByCustomCondition(n)},e.prototype.createActionAccordingToExperiments=function(e){return e.experiments?this.assistantUtils.getActiveExperiments().reduce(function(t,i){return angular.merge({},t,e.experiments[i])},e):e},e.prototype.createActionByAutoplayMode=function(e,t){return angular.merge({},e,t?e.actionIfAuto:e.actionIfManual)},e.prototype.createActionByCustomCondition=function(e){var t=this,i=e.conditions;if(i){var n=i.map(function(e){return e.conditionMethod()?e.truthyConf||{}:e.falsyConf||{}}).reduce(function(e,i){return t.mergeActionsConf(e,i)},{});return this.mergeActionsConf(e,n)}return e},e.prototype.handleAutoplay=function(e){e&&(e.stopAutoplay?this.disableAutoplay():e.startAutoplay&&this.enableAutoplay())},e.prototype.resetIntent=function(){this.userOrSystemIntent=null},e.prototype.blockLifecycleUntilUserInteraction=function(){return this.lifecycleBlockDeferred=this.$q.defer(),this.userOrSystemIntent&&this.lifecycleBlockDeferred.resolve(),this.lifecycleBlockDeferred.promise},e.prototype.unblockLifecycle=function(){this.lifecycleBlockDeferred&&this.lifecycleBlockDeferred.resolve()},e.prototype.handleInteractivity=function(e){this.isInAutoplay?this.assistantUIAdapter.disableHighlightInteractivity(e):this.assistantUIAdapter.enableHighlightInteractivity(e)},e.prototype.setExitTriggerElementSelectors=function(e,t){var i=this;e&&e.forEach(function(e){return e.element=i.assistantUtils.replaceElementSelectorPlaceholderWithValue(e.element,t.element&&t.element.selector||"")})},e.prototype.registerExitTriggers=function(e,t){var i=this;if(e){var n=e.map(function(e){return(e.dontWaitForElement?i.$q.when():i.waitUntilElementIsInDOM(t,e.element)).then(function(){return i.assistantUtils.registerActionTrigger(e,i.setIntent.bind(i))})});return this.$q.all(n)}},e.prototype.unregisterExitTriggers=function(e,t){var i=this;e&&e.forEach(function(e){i.assistantUtils.unregisterActionTrigger(e)})},e.prototype.runAutoplay=function(e){var t=this,i=e.autoPlayGoToIndex,n=e.exitTriggers,o=e.autoplayTimeoutInMs,r=this.assistantUtils.getDefaultExitTrigger(n);this.autoplayTimeout=this.$timeout(function(){i?t.gotoActionInActiveTask(i):r?t.runExitTrigger(r):t.gotoNextAction()},o)},e.prototype.cancelAutoplayTimeout=function(){this.$timeout.cancel(this.autoplayTimeout)},e.prototype.runExitTrigger=function(e){var t=this,i=$(e.element);return e.descendant&&(i=i.find(e.descendant)),this.$timeout(function(){return i.first().trigger(e.trigger||t.assistantUtils.DEFAULT_TRIGGER)})},e.prototype.activateTask=function(e){return this.activeTask=e,this.setActiveActionIndex(this.activeTask,0),this.assistantUtils.broadcastAssistantEvent(o.AssistantAction.EVENTS.TASK_START),this.activeTask.onEnter&&this.activeTask.onEnter.callback?this.$q.when(this.activeTask.onEnter.callback(this.activeTask)):this.$q.when()},e.prototype.deactivateTask=function(){this.activeTask.activeActionIndex=0,this.activeTask=void 0},e.prototype.isMenuTaskDefined=function(){return!!this.menuTask},e.prototype.isMenuTask=function(e){return e&&this.menuTask&&e.id===this.menuTask.id},e.prototype.waitForExpressions=function(e){var t=this;return e?Promise.all(e.map(function(e){return Promise.resolve().then(function(){var i=0,n=function(){if(!e())return i<5?(i++,t.$timeout(n,500)):void 0};return n()})})):Promise.resolve()},e.prototype.waitUntilElementIsInDOM=function(e,t,i){if(t){var n=this.assistantWaitUntilElement();return this.waitUntilElementWorkers.push(n),n.waitUntilElementIsInDOM(t,this.isIntentToStop.bind(this),i&&i.bind(this))}return this.$q.when()},e.prototype.stopAllWaitUntilElementWorkers=function(){this.waitUntilElementWorkers.forEach(function(e){return e.stopWaiting()}),this.waitUntilElementWorkers=[]},e.prototype.setActiveActionIndex=function(e,t){e.activeActionIndex=t},e.prototype.disableAutoplay=function(){this.isInAutoplay=!1},e.prototype.enableAutoplay=function(){this.isInAutoplay=!0},e.prototype.stopActiveTask=function(){var e=this,t=this.getActiveTask(),i=this.$q.when();return t.onExit&&t.onExit.callback&&(i=this.$q.when(t.onExit.callback(t))),i.then(function(){return e.clearCustomTaskData()}).then(function(){return e.assistantUIAdapter.destroyAction()}).then(function(){e.activeAction=null,e.setDockStatus(o.AssistantDockStatus.Stopped),e.disableAutoplay();var t=e.getActiveTask();return e.deactivateTask(),t})},e.prototype.handleMenu=function(e){e&&!this.isMenuTask(e)&&this.isMenuTaskDefined()?this.openMenu(r.BIOrigins.TourTask):this.isMenuTask(e)&&this.assistantUtils.broadcastAssistantEvent(o.AssistantAction.EVENTS.CLOSE_MENU)},e.prototype.stopTaskAndHandleMenu=function(){var e=this;return this.stopActiveTask().then(function(t){return e.handleMenu(t)})},e.prototype.handleIntent=function(){var e=this;if(this.userOrSystemIntent){var t=this.getActiveTask();switch(this.userOrSystemIntent.enableAutoplay?this.enableAutoplay():this.userOrSystemIntent.disableAutoplay&&this.disableAutoplay(),this.userOrSystemIntent.operation){case o.AssistantOperation.Next:this.handleActionLifecycle(t,t.activeActionIndex+1);break;case o.AssistantOperation.Goto:this.handleActionLifecycle(t,this.userOrSystemIntent.actionIndex);break;case o.AssistantOperation.Stop:this.assistantUtils.broadcastAssistantEvent(o.AssistantAction.EVENTS.TASK_QUIT),this.stopTaskAndHandleMenu();break;case o.AssistantOperation.Start:this.stopTaskAndHandleMenu().then(function(){return e.startTask(e.userOrSystemIntent.task,e.userOrSystemIntent.actionIndex)});break;case o.AssistantOperation.Complete:this.assistantUtils.broadcastAssistantEvent(o.AssistantAction.EVENTS.TASK_COMPLETE),this.setTaskComplete(t),this.stopTaskAndHandleMenu();break;case o.AssistantOperation.ForceStop:this.assistantUtils.broadcastAssistantEvent(o.AssistantAction.EVENTS.TASK_QUIT),this.stopActiveTask();break;default:this.stopTaskAndHandleMenu()}}},e.revisionsUpdatedKey="revisionsUpdated",e.previewEnteredKey="smartAssist.previewEntered",e.publishClickedKey="smartAssist.publishClicked",e.textManagerImportedContentDoneKey="smartAssist.textManagerImportedContentDone",e.textManagerImportedImagesDoneKey="smartAssist.textManagerImportedImagesDone",e}();t.AssistantManager=s,angular.module("siteGeneratorTourManagerInternal").service("assistantManager",s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i(191),r=i(0);!function(e){e.CONTAINER="CONTAINER",e.LOGO="LOGO",e.BUTTON="BUTTON",e.EXTRA_BUTTON="EXTRA_BUTTON",e.TEXT="TEXT",e.LONGTEXT="LONGTEXT",e.BUSINESS_NAME="BUSINESS_NAME",e.CONTACT="CONTACT",e.MAP="MAP",e.PAGES_MENU="PAGES_MENU",e.SECTIONS_MENU="SECTIONS_MENU",e.SOCIAL="SOCIAL",e.EXT_VIDEO="EXT_VIDEO",e.VIDEO="VIDEO",e.GALLERY="GALLERY",e.BG_GALLERY="BG_GALLERY",e.IMAGE="IMAGE",e.IMAGE_WITHOUT_CROP="IMAGE_WITHOUT_CROP",e.LIST_ITEM="LIST_ITEM",e.CHAT_WIDGET="CHAT_WIDGET"}(n=t.OnstageTypes||(t.OnstageTypes={}));var a=function(){function e(e,t,i,n){void 0===n&&(n=[]),this.click=e,this.dbl_click=t,this.menuItems=i,this.moreItems=n,this._menu=i.concat(n)}return e.prototype.menu=function(e){var t;return(t=r.some(this._menu,function(e){return e.actionType===o.OnstageActionType.Group})?r(this._menu).map(function(t){return t.actionType!==o.OnstageActionType.Group?t:[t].concat(t.subActionsGetter(e))}).flatten().value():this._menu).forEach(function(t){t.labelGetter&&(t.label=t.labelGetter(e))}),t},e}();t.OnstageActionMap=a;var s="#000000",l=function(){function e(e,t,i,o,l){var c,d=this;this.ONSTAGE_ACTIONS=e,this.flags=t,this.themeChooser=i,this.designKit=o,this.previewColors=l,this.colorsGetter=function(){return[]},this.currentColorGetter=function(){return""},this.currentMapStyleGetter=function(){return""},this.TYPES=((c={})[n.CONTAINER]=new a(null,null,[this.ONSTAGE_ACTIONS.OVERRIDE_FIELD_COLOR]),c[n.LOGO]=new a(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.OPEN_MEDIA_SETTINGS,this.ONSTAGE_ACTIONS.HIDE,this.ONSTAGE_ACTIONS.MEDIA_LINK_TO]),c[n.BUTTON]=new a(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.LINK_TO,this.ONSTAGE_ACTIONS.HIDE,this.ONSTAGE_ACTIONS.EDIT_COMPONENT_STYLE],[this.ONSTAGE_ACTIONS.OVERRIDE_FIELD_COLOR]),c[n.EXTRA_BUTTON]=new a(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.LINK_TO]),c[n.TEXT]=new a(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.HIDE],[this.ONSTAGE_ACTIONS.OVERRIDE_FIELD_COLOR]),c[n.LONGTEXT]=new a(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.HIDE],[this.flags.sectionTextSplitParagraph&&this.ONSTAGE_ACTIONS.TOGGLE_PARAGRAPH_COLUMNS,this.ONSTAGE_ACTIONS.OVERRIDE_FIELD_COLOR].filter(Boolean)),c[n.BUSINESS_NAME]=new a(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.HIDE,this.ONSTAGE_ACTIONS.OPEN_SEO],[this.flags.resizeBusinessName&&this.ONSTAGE_ACTIONS.RESIZE_TEXT,this.ONSTAGE_ACTIONS.OVERRIDE_FIELD_COLOR].filter(Boolean)),c[n.CONTACT]=new a(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.HIDE]),c[n.MAP]=new a(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_ADDRESS,this.ONSTAGE_ACTIONS.HIDE],[this.ONSTAGE_ACTIONS.SET_MAP_STYLE]),c[n.PAGES_MENU]=new a(null,this.ONSTAGE_ACTIONS.OPEN_PAGES_PANEL,[this.ONSTAGE_ACTIONS.OPEN_PAGES_PANEL,this.ONSTAGE_ACTIONS.HIDE]),c[n.SECTIONS_MENU]=new a(null,null,[this.ONSTAGE_ACTIONS.HIDE]),c[n.SOCIAL]=new a(this.ONSTAGE_ACTIONS.OPEN_SOCIAL_PANEL,null,[this.ONSTAGE_ACTIONS.OPEN_SOCIAL_PANEL,this.ONSTAGE_ACTIONS.HIDE]),c[n.EXT_VIDEO]=new a(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.OPEN_MEDIA_SETTINGS,this.ONSTAGE_ACTIONS.HIDE]),c[n.VIDEO]=new a(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.HIDE]),c[n.GALLERY]=new a(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.ORGANIZE_GALLERY,[this.ONSTAGE_ACTIONS.ORGANIZE_GALLERY,this.ONSTAGE_ACTIONS.CHANGE_GALLERY_TYPE,this.ONSTAGE_ACTIONS.HIDE]),c[n.BG_GALLERY]=new a(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.ORGANIZE_GALLERY,[this.ONSTAGE_ACTIONS.ORGANIZE_GALLERY,this.ONSTAGE_ACTIONS.HIDE]),c[n.IMAGE]=new a(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.OPEN_MEDIA_SETTINGS,this.ONSTAGE_ACTIONS.CROP_IMAGE,this.ONSTAGE_ACTIONS.MEDIA_LINK_TO,this.ONSTAGE_ACTIONS.HIDE]),c[n.IMAGE_WITHOUT_CROP]=new a(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.OPEN_MEDIA_SETTINGS,this.ONSTAGE_ACTIONS.MEDIA_LINK_TO,this.ONSTAGE_ACTIONS.HIDE]),c[n.LIST_ITEM]=new a(this.ONSTAGE_ACTIONS.EDIT_LIST_ITEM,null,[this.ONSTAGE_ACTIONS.EDIT_LIST_ITEM,this.ONSTAGE_ACTIONS.DUPLICATE_LIST_ITEM,this.ONSTAGE_ACTIONS.HIDE_LIST_ITEM,this.ONSTAGE_ACTIONS.DELETE_LIST_ITEM,this.ONSTAGE_ACTIONS.LIST_ITEM_TO_PAGE]),c[n.CHAT_WIDGET]=new a(this.ONSTAGE_ACTIONS.OPEN_CHAT_SETTINGS,null,[this.ONSTAGE_ACTIONS.OPEN_CHAT_SETTINGS,this.ONSTAGE_ACTIONS.OPEN_CHAT_DESIGN,this.ONSTAGE_ACTIONS.OPEN_CHAT_INBOX,this.ONSTAGE_ACTIONS.DELETE_CHAT],[this.ONSTAGE_ACTIONS.UPGRADE_CHAT]),c),this.colorsGetter=function(){return i.coloration.getColorsForCurrentColoration("header",!0)},this.ONSTAGE_ACTIONS.OVERRIDE_FIELD_COLOR.paletteGetter=function(e){var t=d.currentColorGetter(e.field),i=!1,n=d.colorsGetter(),o=r.map(n,"color"),a=r.map(n,"hex"),l=r(a).map(function(e,t){return d.designKit.isContrastValid(e,s)?null:t}).without(null).value(),c=o.indexOf(t);if(!d.flags.listItemOverrideColor&&t&&d.isTextOrButtonField(e.field.data.type)&&!d.isFillButton(e)){var u=d.designKit.getColorOfFirstBackground(e.le,e.layout,!0);i=!d.designKit.isContrastValid(u,t)}return{colorList:o,hexList:a,lightIconIndex:l,colorIndex:c,currentColor:t,contrastProblem:i}},this.ONSTAGE_ACTIONS.SET_MAP_STYLE.paletteGetter=function(e){var t={hexList:[{color:"white",class:"map-style-white"},{color:"white",class:"map-style-black"},{color:"white",class:"map-style-color"}],colorIndex:void 0,lightIconIndex:[1],colorList:["white","black","color"]},i=d.currentMapStyleGetter(e.field);return i||(i=d.designKit.getDefaultMapStyle(e.le,e.layout)),t.colorIndex=t.colorList.indexOf(i),t},t.sectionTextSplitParagraph&&(this.ONSTAGE_ACTIONS.TOGGLE_PARAGRAPH_COLUMNS.labelGetter=function(e){return d.columnsLabelGetter(e)})}return e.$inject=["ONSTAGE_ACTIONS","flags","themeChooser","designKit","previewColors"],e.prototype.isFillButton=function(e){return e.field.data.type===core.ElementTypes.Button&&this.designKit.isFillButton(e.le,e.layout.style)},e.prototype.isTextOrButtonField=function(e){return e===core.ElementTypes.Text||e===core.ElementTypes.Button},e}();t.OnstageActionsByType=l,angular.module("siteGeneratorStaticsConsumerAppInternal").service("ONSTAGE_ACTIONS_BY_TYPE",l)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o){this.$rootScope=e,this.$window=t,this.siteState=i,this.applicationState=n,this.iframeViewAdapter=o}return e.$inject=["$rootScope","$window","siteState","applicationState","iframeViewAdapter"],e.prototype.init=function(e){var t=this;this.$scrollingSource=e,this.$scrollingSource.on("scroll",this.onScroll.bind(this)),this.siteState.onSiteChanges(function(){return!t.applicationState.isPreviewDisplay()&&t.refreshScroll()})},e.prototype.getScrollbarWidth=function(){var e="Win32"===this.$window.navigator.platform,t=this.$window.chrome,i=void 0!==this.$window.InstallTrigger;if(e&&!t&&!i)return 0;var n,o,r,a=document.documentElement;return(n=document.createElement("div")).style.cssText="position: absolute;\n                             left: -100px;\n                             width: 50px;\n                             height: 50px;\n                             overflow: scroll;\n                             -ms-overflow-style: scrollbar",(o=document.createElement("div")).style.cssText="width: 100px; height: 100px",n.appendChild(o),a.appendChild(n),r=n.offsetWidth-n.clientWidth,a.removeChild(n),r},e.prototype.refreshScroll=function(){this.scrollIframe(this.$scrollingSource.scrollTop())},e.prototype.onScroll=function(e){this.scrollIframe(e.target.scrollTop)},e.prototype.scrollIframe=function(t){this.iframeViewAdapter.setScrollTop(t),this.$rootScope.$broadcast(e.PreviewScrollEvent,t)},e.PreviewScrollEvent="previewScroll",e}();t.ViewerScrollController=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("viewerScrollController",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToAdiAutomation=function(e){return e.toLowerCase().replace(/\s+/g,"-")},t.adiAutomationLabel="adi-automation-label",angular.module("siteGeneratorStaticsConsumerAppInternal").directive("adiAutomation",function(){return{restrict:"A",scope:!1,link:function(e,i,n){n.$observe("adiAutomation",function(e){e&&angular.element(i).attr(t.adiAutomationLabel,t.stringToAdiAutomation(e))})}}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.mediaOverride=e,this.applicationParameters=t,this.PresetMediaType=i}return e.prototype._getNumberOfColumns=function(e){return e&&e[0]&&e[0].length},e.prototype.getMediaType=function(t){if(this.hasMedia(t)){var i=this.getMediaPreferredOverride(t),n=this.getMediaTypeOverride(t);return i?this.isImageGallery(i.name)?e.MediaTypes.gallery:i.name===e.MediaTypes.video?e.MediaTypes.extVideo:"Strip Video"===i.name?e.MediaTypes.video:n===this.PresetMediaType.SHAPE?e.MediaTypes.shape:e.MediaTypes.image:n===this.PresetMediaType.SHAPE?e.MediaTypes.shape:e.MediaTypes.image}},e.prototype.getGalleryType=function(e){var t=this.getMediaPreferredOverride(e);return t&&t.name},e.prototype._getMediaWidth=function(e){var t=e.match(/m(\d{1,2})/)[1];if(t)return this.applicationParameters.getPixelsFromGridUnits(t)},e.prototype._getTextPositions=function(e,t,i,n,o){var r=[];return e>-1&&i>-1&&(e>i?r.push("below"):e<i&&r.push("above"),t<n?r.push("left"):t>n&&r.push("right")),o&&o.length>0&&r.push("on"),r},e.prototype._getMediaPositions=function(e,t,i,n){var o=[];return e>-1&&(i>e?o.push("below"):i<e&&o.push("above"),n<t?o.push("left"):n>t&&o.push("right")),o},e.prototype.isImageGallery=function(e){return-1!==this.mediaOverride.imageGalleriesTypes.indexOf(e)},e.MediaTypes={extVideo:"extVideo",image:"image",gallery:"gallery",shape:"shape",video:"video",pattern:"pattern"},e}();t.FeatureDetector=n},,,,,,,,,,,,,function(e,t){var i=/^\.\//,n=/\.haml$/;t.initTemplates=function(e){var t=function(e){return e.keys().reduce(function(t,o){return t[o.replace(i,"views/").replace(n,".html")]=e(o),t},{})}(e);_.each(t,function(e,t){!function(e,t,i){try{angular.module(e)}catch(t){angular.module(e,[])}angular.module(e).run(["$templateCache",function(e){e.put(t,i)}])}("siteGeneratorStaticsPreload",t,e)})}},function(e,t){e.exports="<style>\n  digest-presenter {\n   font-family: \"HelveticaNeueW01-Thin\", \"HelveticaNeueW02-Thin\", \"HelveticaNeueW10-35Thin\", sans-serif;\n   font-size: 20px;\n   letter-spacing: .03em;\n   line-height: 1.6;\n  }\n  \n  digest-presenter > a {\n      font-size: 12px;\n      color: #459fed;\n      cursor: pointer;\n      font-style: italic;\n  }\n  \n  .digest {\n     font-size: 18px;\n  width: 500px;\n  display: flex;\n  flex-direction: column;\n  }\n  \n  .digest-row {\n  width: 100%;\n  min-width: 800px;\n  height: 100%;\n  margin: auto;\n  display:flex;\n  flex-direction: row;\n   align-items: stretch;\n  }\n  .digest-row .title{\n      width: 30%;\n      min-width: 300px;\n      color: #459fed;\n  }\n  .digest-row .content{\n      color: #858f96;\n  }\n</style>\n<div class='h2'>Key details for user site {{$ctrl.storyArchivedLabel()}}</div>\n<a ng-click='$ctrl.openADI()' ng-hide='$ctrl.storyArchivedLabel()'>Open ADI editor</a>\n<div class='digest'>\n<div class='digest-row' ng-repeat='x in $ctrl.getDigestMap()'>\n<div class='title'>{{x.title}}</div>\n<div class='content'>{{x.content}}</div>\n</div>\n<div class='digest-row'>\n<div class='title'>Site History</div>\n<site-history class='content' story-id='$ctrl.storyId'></site-history>\n</div>\n</div>\n"},function(e,t){e.exports="<div ng-if='!$ctrl.candidate &amp;&amp; !$ctrl.reverting'>\n<ul>\n<li data-hook='major-revision' ng-repeat='rev in $ctrl.revisions track by rev.revision'>\n<span>{{rev.dateCreated | date:'dd-MM-yyyy HH:mm:ss'}} - revision {{rev.revision}}</span>\n<a data-hook='preview' ng-href='{{$ctrl.getPreviewUrl(rev.revision)}}' target='_blank'>preview</a>\n<button data-hook='load-sub-revisions' ng-click='$ctrl.loadSubRevisions(rev)'>load sub revisions</button>\n<ul>\n<li data-hook='sub-revision' ng-repeat='sub in rev.subRevisions track by sub.revision'>\n<span>{{sub.date | date:'dd-MM-yyyy HH:mm:ss'}} - revision {{sub.revision}}</span>\n<a data-hook='preview-sub' ng-href='{{$ctrl.getPreviewUrl(sub.revision)}}' target='_blank'>preview</a>\n<button data-hook='revert' ng-click='$ctrl.revert(sub)' ng-if='$ctrl.canRevert'>revert</button>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n<div data-hook='reverting' ng-if='$ctrl.reverting'>wait! reverting . . .</div>\n<div data-hook='confirm-message' ng-if='$ctrl.candidate &amp;&amp; !$ctrl.reverting'>\n<h2>This will revert the story to version {{$ctrl.candidate.revision}}. Are you sure?</h2>\n<button data-hook='yes' ng-click='$ctrl.yes()'>Yes</button>\n<button data-hook='no' ng-click='$ctrl.reset()'>No</button>\n</div>\n"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(92),o=i(140),r=window;Object.assign(r,{ob:r.ob||{},jsonpatch:r.jsonpatch||o,Duplexer:r.Duplexer||n.Duplexer}),i(141),i(142),i(143),i(144),i(145),i(146),i(147),i(148),i(149),i(150),i(151),i(152),i(153),i(154),i(155),i(156),i(157),i(158),i(159),i(160),i(161),i(162),i(163),i(164),i(165),i(166),i(167),i(168),i(169),i(170)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(23);t.RestoreStrategyBuilderFactory=n.RestoreStrategyBuilderFactory;var o=i(99);t.Duplexer=o.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(94),o=i(95),r=i(96),a=function(){function e(){}return e.all=function(){return new n.default},e.messageId=function(){return new o.default},e.timestamp=function(){return new r.default},e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(34),o=function(){function e(){}return e.prototype.build=function(){return new n.default("All")},e}();t.default=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(34),r=function(){function e(){}return e.prototype.withId=function(e){return this.id=e,this},e.prototype.build=function(){return new a(this.id)},e}();t.default=r;var a=function(e){function t(t){var i=e.call(this,"message_id")||this;return i.id=t,i}return n(t,e),t}(o.default);t.MessageIdRestoreStrategy=a},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(34),r=function(){function e(){}return e.prototype.withT=function(e){return this.t=e,this},e.prototype.build=function(){return new a(this.t)},e}();t.default=r;var a=function(e){function t(t){var i=e.call(this,"Timestamp")||this;return i.t=t,i}return n(t,e),t}(o.default);t.TimestampRestoreStrategy=a},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.overrideRestoreStrategies=[]}return e.prototype.withOverrideRestoreStrategy=function(e){return this.overrideRestoreStrategies=this.overrideRestoreStrategies.filter(function(t){return t.channel!==e.channel||t.ns!==e.ns}),this.overrideRestoreStrategies.push(e),this},e.prototype.withDefaultRestoreStrategy=function(e){return this.defaultRestoreStrategy=e,this},e.prototype.build=function(){return new r(this.defaultRestoreStrategy,this.overrideRestoreStrategies).toProtocolFormat()},e}();t.default=o;var r=function(){function e(e,t){this.defaultRestoreStrategy=e,this.overrideRestoreStrategies=t}return e.prototype.toProtocolFormat=function(){var e={};return void 0!==this.defaultRestoreStrategy&&(e.restore={default:this.defaultRestoreStrategy}),this.hasOverrides()&&(e.restore=n({},e.restore,{overrides:this.overrideRestoreStrategies})),e},e.prototype.hasOverrides=function(){return this.overrideRestoreStrategies.length>0},e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.withNs=function(e){return this.ns=e,this},e.prototype.withChannelName=function(e){return this.channelName=e,this},e.prototype.withRestoreStrategy=function(e){return this.restore=e,this},e.prototype.build=function(){return{ns:this.ns,channel:this.channelName,override:this.restore}},e}();t.default=n},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(16),r=i(23),a=i(35),s=i(100),l=i(122),c=i(133),d=i(139),u=function(e){function t(t,i){var n=void 0===i?{}:i,o=n.pingInterval,s=void 0===o?3e4:o,u=n.pingTimeout,p=void 0===u?5e3:u,g=n.environment,h=n.timeline,m=void 0===h?d.default():h,f=e.call(this)||this;return f.virtualSockets=[],f.payloadBuilder=new r.PollPayloadBuilder,f.connectionServerTimeDeferred=new a.default,f.environment=g||l.default({url:t}),f.connection=new c.default({pingTimeout:p,pingInterval:s,environment:f.environment,timeline:m}),f.listen(),f}return n(t,e),t.prototype.connect=function(e){var t=new s.default(this,e);return this.virtualSockets.push(t),t},t.prototype.getConnectionServerTime=function(){return this.connectionServerTimeDeferred.promise},t.prototype.close=function(){this.connection.close()},t.prototype.addRestoreOverride=function(e){var t=this.payloadBuilder.withOverrideRestoreStrategy(e).build();this.connection.updatePayload(t)},t.prototype.closeVirtualSocket=function(e){this.virtualSockets=this.virtualSockets.filter(function(t){return t!==e}),0===this.virtualSockets.length&&this.close()},t.prototype.packet=function(e){this.connection.send(e)},t.prototype.listen=function(){var e=this;this.connection.on("open",function(t){var i=r.RestoreStrategyBuilderFactory.timestamp().withT(t.t).build();e.payloadBuilder.withDefaultRestoreStrategy(i),e.connection.updatePayload(e.payloadBuilder.build()),e.emit("open"),e.connectionServerTimeDeferred.resolve(t.t)}),this.connection.on("message",function(t){switch(t.type){case"UpdateRestoreStrategyOverrides":e.overwriteRestoreOverrides(t.overrides);break;default:e.emit("packet",t)}}),this.connection.on("close",this.onClose.bind(this))},t.prototype.onClose=function(e){this.emit("close",e),this.connectionServerTimeDeferred=new a.default},t.prototype.overwriteRestoreOverrides=function(e){var t=this;this.payloadBuilder=new r.PollPayloadBuilder,e.forEach(function(e){return t.payloadBuilder.withOverrideRestoreStrategy(e)});var i=this.payloadBuilder.build();this.connection.updatePayload(i)},t}(o);t.default=u},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(16),r=i(23),a=i(24),s=i(101),l=i(21),c=function(e){function t(t,i){var n=e.call(this)||this;return n.duplexer=t,n.ids=1,n.connected=!1,n.sendBuffer=[],n.acks={},n.socketListeners=[],n.sessionId="",n.channels=new s.default(n),n.ns=i.apiKey,n.config={auth:i.auth},n.open(),n}return n(t,e),t.prototype.subscribe=function(e,t){void 0===t&&(t={});var i=this.channels.add(e,t);return i.subscribe(t),i},t.prototype.unsubscribe=function(e){var t=this.channels.remove(e);return t.unsubscribe(),t},t.prototype.open=function(){var e=this,t=this.duplexer.connection.readyState;this.listen(),t===a.default.CLOSED?this.duplexer.connection.connect():t===a.default.OPEN&&setTimeout(function(){return e.onConnect()},0)},t.prototype.disconnect=function(){this.send({type:"disconnect"}),this.cleanup(),this.duplexer.closeVirtualSocket(this),this.onClose()},t.prototype.send=function(e){var t=this;return new Promise(function(i){if(t.connected){var n=t.issueAckId();t.acks[n]=i,e.id=n,t.packet(e)}else t.sendBuffer.push({message:e,resolve:i})})},t.prototype.whenConnected=function(){var e=this;return new Promise(function(t){e.duplexer.connection.readyState===a.default.OPEN?t():e.once("@duplexer:connected",t)})},t.prototype.listen=function(){this.socketListeners=[l.default(this.duplexer,"open",this.onConnect.bind(this)),l.default(this.duplexer,"packet",this.onPacket.bind(this)),l.default(this.duplexer,"close",this.onClose.bind(this)),l.default(this.duplexer.connection,"connect_error",this.onConnectError.bind(this))]},t.prototype.onConnectError=function(e){this.emit("@duplexer:connect_error",e)},t.prototype.onClose=function(e){this.connected=!1,this.emit("@duplexer:disconnected",e)},t.prototype.onPacket=function(e){if(e.ns===this.ns)switch(e.type){case"ack":this.onAck(e);break;case"message":this.onMessage(e)}},t.prototype.onConnect=function(){this.sessionId=this.duplexer.connection.sessionId,this.channels.subscribeAll(),this.connected=!0,this.emit("@duplexer:connected"),this.emitBuffered()},t.prototype.onMessage=function(e){var t=this.channels.find(e.channel);if(void 0!==t){var i=t.setMessageIdRestore(e.id),n=(new r.PollOverrideRestoreStrategyBuilder).withNs(this.ns).withChannelName(t.name).withRestoreStrategy(i).build();this.duplexer.addRestoreOverride(n),t.emit(e.event,e.payload)}},t.prototype.onAck=function(e){var t=this.acks[e.id];"function"==typeof t&&(t(e),delete this.acks[e.id])},t.prototype.packet=function(e){e.ns=this.ns,this.duplexer.packet(e)},t.prototype.emitBuffered=function(){var e=this;this.sendBuffer.forEach(function(t){var i=t.message,n=t.resolve;e.send(i).then(n)}),this.sendBuffer=[]},t.prototype.issueAckId=function(){return(this.ids++).toString()},t.prototype.cleanup=function(){this.socketListeners.forEach(function(e){return e.destroy()})},t}(o);t.default=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(102),o=function(){function e(e){this.virtualSocket=e,this.channelsList={}}return e.prototype.add=function(e,t){return this.channelsList[e]=this.channelsList[e]||new n.default(this.virtualSocket,e,t)},e.prototype.remove=function(e){var t=this.find(e);return delete this.channelsList[e],t},e.prototype.find=function(e){return this.channelsList[e]},e.prototype.all=function(){var e=this;return Object.keys(this.channelsList).map(function(t){return e.find(t)})},e.prototype.subscribeAll=function(){var e=this;Object.keys(this.channelsList).forEach(function(t){return e.channelsList[t].subscribe()})},e}();t.default=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(16),s=i(45),l=i(23),c=i(103),d=function(e){function t(t,i,n){var o=e.call(this)||this;if(o.subscribing=!1,o.name=i,o.io=t,o.authenticator=o.io.config.auth?new c.default(o.io.config.auth):null,o.forceTokenRequest=n.forceTokenRequest||!1,o.isAuthRequired()&&null===o.authenticator)throw new Error("auth config has not passed, cannot use channels that require authorization");return o}return n(t,e),t.prototype.setMessageIdRestore=function(e){return this.restore=l.RestoreStrategyBuilderFactory.messageId().withId(e).build(),this.restore},t.prototype.subscribe=function(e){return void 0===e&&(e={}),o(this,void 0,void 0,function(){var t,i;return r(this,function(n){switch(n.label){case 0:return this.subscribing?[2]:(this.subscribing=!0,[4,this.io.whenConnected()]);case 1:return n.sent(),[4,this.maybeAuth()];case 2:return(t=n.sent()).success?[4,this.io.send({type:"subscribe",channel:this.name,auth:t.auth,restore:e.restoreStrategy||this.restore})]:[3,4];case 3:return i=n.sent(),this.emit("@duplexer:subscription_succeeded",{isSynced:i.isSynced}),[3,5];case 4:this.emit("@duplexer:subscription_failed",t.error),n.label=5;case 5:return this.subscribing=!1,[2]}})})},t.prototype.unsubscribe=function(){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,this.io.send({type:"unsubscribe",channel:this.name})];case 1:return e.sent(),this.emit("unsubscribe"),[2]}})})},t.prototype.send=function(e,t){this.io.send({type:"client_message",channel:this.name,event:e,payload:t})},t.prototype.maybeAuth=function(){return o(this,void 0,void 0,function(){var e=this;return r(this,function(t){return this.isAuthRequired()?[2,function(e,t){var i=0,n=new s({min:t.minTimeout});return function a(){return o(this,void 0,void 0,function(){var o;return r(this,function(r){switch(r.label){case 0:return[4,e()];case 1:return o=r.sent(),i+=1,o.success||t.maxTimes===i?[2,o]:[4,function(e){return new Promise(function(t){return setTimeout(t,e)})}(n.duration())];case 2:return r.sent(),[2,a()]}})})}()}(function(){return e.authenticator.auth(e.name,e.io.sessionId)},{maxTimes:3,minTimeout:400})]:[2,Promise.resolve({success:!0,auth:""})]})})},t.prototype.isAuthRequired=function(){return 0===this.name.indexOf("@private")||0===this.name.indexOf("@presence")||this.forceTokenRequest},t}(a);t.default=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(40),o=i(37),r=function(){function e(e){this.opts=e,this.httpClient=n.default.create({adapter:o})}return e.prototype.auth=function(e,t){var i=this.opts.onBeforeRequest?this.opts.onBeforeRequest():{},n=i.body,o=i.headers,r={sessionId:t,channelName:e,custom:n};return this.httpClient.post(this.opts.url,r,{withCredentials:!0,headers:o}).then(a,s)},e}();function a(e){return{success:!0,auth:e.data}}function s(e){var t=e.response;return{success:!1,error:{status:t?t.status:-1,message:e.toString()}}}t.default=r},function(e,t,i){"use strict";var n=i(8),o=i(46),r=i(106),a=i(36);function s(e){var t=new r(e),i=o(r.prototype.request,t);return n.extend(i,r.prototype,t),n.extend(i,t),i}var l=s(a);l.Axios=r,l.create=function(e){return s(n.merge(a,e))},l.Cancel=i(50),l.CancelToken=i(120),l.isCancel=i(49),l.all=function(e){return Promise.all(e)},l.spread=i(121),e.exports=l,e.exports.default=l},function(e,t){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(i(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,i){"use strict";var n=i(36),o=i(8),r=i(115),a=i(116);function s(e){this.defaults=e,this.interceptors={request:new r,response:new r}}s.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),(e=o.merge(n,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[a,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)i=i.then(t.shift(),t.shift());return i},o.forEach(["delete","get","head","options"],function(e){s.prototype[e]=function(t,i){return this.request(o.merge(i||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){s.prototype[e]=function(t,i,n){return this.request(o.merge(n||{},{method:e,url:t,data:i}))}}),e.exports=s},function(e,t,i){"use strict";var n=i(8);e.exports=function(e,t){n.forEach(e,function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])})}},function(e,t,i){"use strict";var n=i(48);e.exports=function(e,t,i){var o=i.config.validateStatus;i.status&&o&&!o(i.status)?t(n("Request failed with status code "+i.status,i.config,null,i.request,i)):e(i)}},function(e,t,i){"use strict";e.exports=function(e,t,i,n,o){return e.config=t,i&&(e.code=i),e.request=n,e.response=o,e}},function(e,t,i){"use strict";var n=i(8);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,i){if(!t)return e;var r;if(i)r=i(t);else if(n.isURLSearchParams(t))r=t.toString();else{var a=[];n.forEach(t,function(e,t){null!==e&&void 0!==e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))}))}),r=a.join("&")}return r&&(e+=(-1===e.indexOf("?")?"?":"&")+r),e}},function(e,t,i){"use strict";var n=i(8),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,i,r,a={};return e?(n.forEach(e.split("\n"),function(e){if(r=e.indexOf(":"),t=n.trim(e.substr(0,r)).toLowerCase(),i=n.trim(e.substr(r+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([i]):a[t]?a[t]+", "+i:i}}),a):a}},function(e,t,i){"use strict";var n=i(8);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function o(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=o(window.location.href),function(t){var i=n.isString(t)?o(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0}},function(e,t,i){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(){this.message="String contains an invalid character"}o.prototype=new Error,o.prototype.code=5,o.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,i,r=String(e),a="",s=0,l=n;r.charAt(0|s)||(l="=",s%1);a+=l.charAt(63&t>>8-s%1*8)){if((i=r.charCodeAt(s+=.75))>255)throw new o;t=t<<8|i}return a}},function(e,t,i){"use strict";var n=i(8);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,i,o,r,a){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),n.isString(o)&&s.push("path="+o),n.isString(r)&&s.push("domain="+r),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,i){"use strict";var n=i(8);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=o},function(e,t,i){"use strict";var n=i(8),o=i(117),r=i(49),a=i(36),s=i(118),l=i(119);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!s(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return c(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return r(t)||(c(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,i){"use strict";var n=i(8);e.exports=function(e,t,i){return n.forEach(i,function(i){e=i(e,t)}),e}},function(e,t,i){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,i){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,i){"use strict";var n=i(50);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var i=this;e(function(e){i.reason||(i.reason=new n(e),t(i.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o(function(t){e=t}),cancel:e}},e.exports=o},function(e,t,i){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(123),o=i(124),r=i(126);t.default=function(e){var t=new o.default,i=r.default({baseUrl:e.url});return new n.default({transportsManager:i,network:t})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._transportsManager=e.transportsManager,this._network=e.network}return Object.defineProperty(e.prototype,"network",{get:function(){return this._network},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transportsManager",{get:function(){return this._transportsManager},enumerable:!0,configurable:!0}),e}();t.default=n},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"isOnline",{get:function(){return"undefined"==typeof window||(void 0===window.navigator.onLine||window.navigator.onLine)},enumerable:!0,configurable:!0}),t.prototype.listenConnectionStateChanges=function(){var e=this;"undefined"!=typeof window&&(window.addEventListener("online",function(){return e.connectionIsOnline()}),window.addEventListener("offline",function(){return e.connectionIsOffline()}))},t}(i(125).default);t.default=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=e.call(this)||this;return t.listenConnectionStateChanges(),t}return n(t,e),t.prototype.connectionIsOnline=function(){this.emit("online")},t.prototype.connectionIsOffline=function(){this.emit("offline")},t}(i(16));t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(127),o=i(128),r=i(129),a=i(130);function s(e){var t=""+(l()?"https://":"http://")+e;return new o.default(t)}function l(){return"undefined"!=typeof window&&"http:"!==window.location.protocol}t.default=function(e){if(n.default.isSupported()){var t=function(e){var t=s(e);return a.anXhrStrategyPreset1(t)}(e.baseUrl),i=function(e){var t=(l()?"wss://":"ws://")+e,i=new n.default(t);return a.aWebSocketStrategyPreset1(i)}(e.baseUrl);return new r.default([i,t])}var o=function(e){var t=s(e);return a.anXhrStrategyPreset2(t)}(e.baseUrl);return new r.default([o])}},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(51),r=i(52),a=function(e){function t(t){var i=e.call(this)||this;return i.url=t,i}return n(t,e),t.isSupported=function(){return"undefined"!=typeof WebSocket},Object.defineProperty(t.prototype,"name",{get:function(){return"websocket"},enumerable:!0,configurable:!0}),t.prototype.doOpen=function(){this.ws=new WebSocket(this.url),this.listen()},t.prototype.doClose=function(){this.ws.close()},t.prototype.write=function(e){var t=JSON.stringify(e);this.ws.send(t)},t.prototype.listen=function(){var e=this;this.ws.onclose=function(t){if(!t.wasClean){var i=r.aWebSocketError(t.code,t.reason);e.onClose(i)}},this.ws.onmessage=function(t){var i=JSON.parse(t.data);e.onData(i)},this.ws.onerror=function(){}},t}(o.default);t.default=a},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(40),s=i(51),l=i(24),c=i(52),d=function(e){function t(t){var i=e.call(this)||this;return i.xhrClient=a.default.create({baseURL:t}),i._keepAlive=!1,i}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"http_long_polling"},enumerable:!0,configurable:!0}),t.prototype.doOpen=function(){this.poll()},t.prototype.doClose=function(e){this.abortOngoingPollInterval()},t.prototype.write=function(e){return o(this,void 0,void 0,function(){var t,i,n;return r(this,function(o){switch(o.label){case 0:t=this.buildUrl("xhr-command"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.xhrClient.post(t,e)];case 2:return i=o.sent().data,this.onData(i),this.startPollInterval(),[3,4];case 3:return n=o.sent(),this.closeOnTransportFailure(n),[3,4];case 4:return[2]}})})},t.prototype.abortOngoingPollInterval=function(){this.cancelToken&&this.cancelToken.cancel()},t.prototype.startPollInterval=function(){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return this.abortOngoingPollInterval(),this.readyState!==l.default.OPEN?[3,2]:[4,this.poll()];case 1:e.sent().continuable&&this.startPollInterval(),e.label=2;case 2:return[2]}})})},t.prototype.poll=function(){return o(this,void 0,void 0,function(){var e,t,i,n;return r(this,function(s){switch(s.label){case 0:this.cancelToken=a.default.CancelToken.source(),e=this.buildUrl("xhr"),t=this.xhrClient.post(e,this.payload,{cancelToken:this.cancelToken.token}),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(e){return o(this,void 0,void 0,function(){var t;return r(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return[2,{continuable:!0,data:i.sent().data||void 0}];case 2:if(t=i.sent(),a.default.isCancel(t))return[2,{continuable:!1}];if(function(e){return 504===u(e)}(t))return[2,{continuable:!0}];throw t;case 3:return[2]}})})}(t)];case 2:return(i=s.sent()).data&&this.onData(i.data),[2,i];case 3:return n=s.sent(),this.closeOnTransportFailure(n),[2,{continuable:!1}];case 4:return[2]}})})},t.prototype.buildUrl=function(e){return this.sessionId&&(e+="?sessionId="+this.sessionId),e},t.prototype.closeOnTransportFailure=function(e){var t=u(e),i=c.anHttpLongPollingError(t,e.message);this.close(i)},t}(s.default);function u(e){return e.response&&e.response.status||-1}t.default=d},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(16),s=i(24),l=i(21),c=i(35),d=function(e){function t(t){var i=e.call(this)||this;return i.strategies=t,i.disposables=[],i.readyState=s.default.CLOSED,i}return n(t,e),Object.defineProperty(t.prototype,"transport",{get:function(){return this._transport},enumerable:!0,configurable:!0}),t.prototype.connect=function(){return o(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:if(this.readyState!==s.default.CLOSED)return[2,{success:!1}];this.cancelToken=new c.default,this.readyState=s.default.OPENING,this.listenAndEmitConnectErrorsInAllTransports(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.connectToFirstToRespondStrategy()];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{success:!1}];case 4:return this.removeListeners(),this.abortStrategiesWithNoOpenTransport(),this.listenEventsOfActiveTransport(),[2,function(e){return{success:!0,connectionEstablishedPacket:e}}(e)]}})})},t.prototype.close=function(e){this.readyState!==s.default.CLOSED&&(this.removeListeners(),this.strategies.forEach(function(e){return e.abort()}),this.cancelToken.reject(),this.doClose(e))},t.prototype.connectToFirstToRespondStrategy=function(){return o(this,void 0,void 0,function(){var e,t,i;return r(this,function(n){switch(n.label){case 0:return[4,Promise.race(this.strategies.map(function(e){return e.connect()}).concat([this.cancelToken.promise]))];case 1:return e=n.sent(),t=e.transport,i=e.connectionEstablishedPacket,this._transport=t,this.readyState=s.default.OPEN,[2,i]}})})},t.prototype.abortStrategiesWithNoOpenTransport=function(){this.strategies.filter(function(e){return e.transport.readyState!==s.default.OPEN}).forEach(function(e){return e.abort()})},t.prototype.listenAndEmitConnectErrorsInAllTransports=function(){var e=this;this.disposables=this.strategies.map(function(t){return l.default(t.transport,"close",function(t){e.emit("connect_error",t)})})},t.prototype.listenEventsOfActiveTransport=function(){var e=this;this.disposables=[l.default(this.transport,"close",function(t){e.removeListeners(),e.doClose(t)}),l.default(this.transport,"packet",function(t){e.onPacket(t)})]},t.prototype.removeListeners=function(){this.disposables.forEach(function(e){return e.destroy()})},t.prototype.doClose=function(e){this.readyState!==s.default.CLOSED&&(this.readyState=s.default.CLOSED,this.emit("close",e))},t.prototype.onPacket=function(e){switch(e.type){case"message":case"ack":case"UpdateRestoreStrategyOverrides":this.emit("message",e)}},t}(a);t.default=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(131),o=150;t.aWebSocketStrategyPreset1=function(e){return n.default(e).withBackoff(o).build()},t.anXhrStrategyPreset1=function(e){return n.default(e).withDelay(4e3).withBackoff(o).build()},t.anXhrStrategyPreset2=function(e){return n.default(e).withBackoff(o).build()}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(132),o=function(){function e(e){this.transport=e,this.opts={delay:0,backoff:0}}return e.prototype.withDelay=function(e){return this.opts.delay=e,this},e.prototype.withBackoff=function(e){return this.opts.backoff=e,this},e.prototype.build=function(){return new n.default(this.transport,this.opts)},e}();t.StrategyBuilder=o,t.default=function(e){return new o(e)}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(45),a=i(21),s=i(35),l=function(){function e(e,t){this._transport=e,this.opts=t,this.disposables=[],this.backoff=new r}return Object.defineProperty(e.prototype,"transport",{get:function(){return this._transport},enumerable:!0,configurable:!0}),e.prototype.connect=function(){return n(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return this.cancelToken=new s.default,this.opts.delay>0?[4,Promise.race([function(e){return new Promise(function(t){return setTimeout(t,e)})}(this.opts.delay),this.cancelToken.promise])]:[3,2];case 1:t.sent(),t.label=2;case 2:return[4,Promise.race([this.connectWithBackoff(),this.cancelToken.promise])];case 3:return e=t.sent(),[2,{transport:this.transport,connectionEstablishedPacket:e}]}})})},e.prototype.abort=function(){clearTimeout(this.connectDelayTimeoutId),this.removeListeners(),this.cancelToken.reject(),this.transport.close()},e.prototype.connectWithBackoff=function(){return n(this,void 0,void 0,function(){var e=this;return o(this,function(t){return this.backoff.reset(),[2,new Promise(function(t){e.disposables=[a.default(e.transport,"open",function(i){e.removeListeners(),t(i)}),a.default(e.transport,"close",function(){e.connectDelayTimeoutId=setTimeout(function(){return e.transport.open()},e.backoff.duration())})],e.transport.open()})]})})},e.prototype.removeListeners=function(){this.disposables.forEach(function(e){return e.destroy()})},e}();t.default=l},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(16),s=i(21),l=i(134),c=i(136),d=i(137),u=i(138),p=function(e){function t(t){var i=e.call(this)||this;return i.opts=t,i.autoConnect=!0,i.environment=t.environment,i.timeline=t.timeline,i.listenNeworkStateChanges(),i.listenTransportEvents(),i}return n(t,e),Object.defineProperty(t.prototype,"sessionId",{get:function(){return this.transport.sessionId},enumerable:!0,configurable:!0}),t.prototype.connect=function(){return o(this,void 0,void 0,function(){return r(this,function(e){return this.autoConnect=!0,[2,this.connectTransport()]})})},t.prototype.updatePayload=function(e){this.transport.updatePayload(e)},t.prototype.send=function(e){this.transport.send(e)},t.prototype.close=function(){this.autoConnect=!1,this.doClose()},Object.defineProperty(t.prototype,"readyState",{get:function(){return this.environment.transportsManager.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transport",{get:function(){return c.defined(this.environment.transportsManager.transport,"transport was not initialized yet"),this.environment.transportsManager.transport},enumerable:!0,configurable:!0}),t.prototype.connectTransport=function(){return o(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:return[4,this.environment.transportsManager.connect()];case 1:return(e=t.sent()).success&&(this.keepAlive=new l.default(this.transport,this.opts),this.transport.keepAliveEnabled&&this.keepAlive.schedule(),this.timeline.log({type:"connect_succeeded",data:{transport:this.transport.name}}),this.emit("open",e.connectionEstablishedPacket)),[2]}})})},t.prototype.doClose=function(e){this.environment.transportsManager.close(e)},t.prototype.shouldReconnect=function(){return this.autoConnect&&this.environment.network.isOnline},t.prototype.listenNeworkStateChanges=function(){var e=this;this.environment.network.on("offline",function(){e.autoConnect&&e.timeline.log({type:"network_state_changed",data:"offline"}),e.doClose(d.default())}),this.environment.network.on("online",function(){e.autoConnect&&(e.timeline.log({type:"network_state_changed",data:"online"}),e.connect())})},t.prototype.listenTransportEvents=function(){var e=this;s.default(this.environment.transportsManager,"connect_error",function(t){e.timeline.log({type:"connect_error",data:t}),e.emit("connect_error",t)}),s.default(this.environment.transportsManager,"close",function(t){e.dispose(),u.default(t)&&e.timeline.log({type:"disconnect_error",data:t}),e.shouldReconnect()&&e.connect(),e.emit("close",t)}),s.default(this.environment.transportsManager,"message",function(t){e.emit("message",t)})},t.prototype.dispose=function(){this.keepAlive&&this.keepAlive.dispose()},t}(a);t.default=p},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(16),r=i(135),a=i(21),s=function(e){function t(t,i){var n=e.call(this)||this;return n.transport=t,n.opts=i,n.started=!1,a.default(n.transport,"packet",function(){return n.started&&n.schedule()}),n}return n(t,e),t.prototype.schedule=function(){var e=this;this.dispose(),this.started=!0,this.intervalTimer=new r.default(this.opts.pingInterval,function(){return e.sendHeartbeat()}),this.intervalTimer.schedule()},t.prototype.dispose=function(){this.started=!1,this.intervalTimer&&this.intervalTimer.cancel(),this.timeoutTimer&&this.timeoutTimer.cancel()},t.prototype.sendHeartbeat=function(){var e=this;this.ping(),this.timeoutTimer=new r.default(this.opts.pingTimeout,function(){return e.transport.close()}),this.timeoutTimer.schedule()},t.prototype.ping=function(){this.transport.send({type:"ping"})},t}(o);t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.timeout=e,this.handler=t}return e.prototype.schedule=function(){this.timer=setTimeout(this.handler,this.timeout)},e.prototype.cancel=function(){clearTimeout(this.timer)},e}();t.default=n},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var i=e.call(this,t)||this;return i.name=i.constructor.name,i}return n(t,e),t}(Error);t.defined=function(e,t){if(void 0===e)throw new o(t)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{status:"offline"}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return void 0!==e&&void 0!==e.transport}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.log=function(){},e}();t.NoopTimeline=n,t.default=function(){return new n}},function(e,t){
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * json-patch-duplex.js version: 0.5.7
 * (c) 2013 Joachim Wester
 * MIT license
 */
var i,n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},o=Error;!function(e){function t(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function i(e){return"object"==typeof e?JSON.parse(JSON.stringify(e)):e}function r(e){for(var t,i=0,n=h.length;n>i;i++)if(h[i].obj===e.object){t=h[i];break}a(t.value,e.object,e.patches,""),e.patches.length&&l(t.value,e.patches);var o=e.patches;return o.length>0&&(e.patches=[],e.callback&&e.callback(o)),o}function a(e,n,o,r){for(var s=d(n),l=d(e),c=!1,u=l.length-1;u>=0;u--){var p=e[h=l[u]];if(n.hasOwnProperty(h)){var g=n[h];"object"==typeof p&&null!=p&&"object"==typeof g&&null!=g?a(p,g,o,r+"/"+t(h)):p!=g&&(!0,o.push({op:"replace",path:r+"/"+t(h),value:i(g)}))}else o.push({op:"remove",path:r+"/"+t(h)}),c=!0}if(c||s.length!=l.length)for(u=0;u<s.length;u++){var h=s[u];e.hasOwnProperty(h)||o.push({op:"add",path:r+"/"+t(h),value:i(n[h])})}}function s(e){for(var t,i=0,n=e.length;n>i;){if(!((t=e.charCodeAt(i))>=48&&57>=t))return!1;i++}return!0}function l(e,t,i){for(var n,o,r=!1,a=0,l=t.length;l>a;){n=t[a],a++;for(var d=(n.path||"").split("/"),h=e,m=1,f=d.length,S=void 0;;){if(o=d[m],i&&void 0===S&&(void 0===h[o]?S=d.slice(0,m).join("/"):m==f-1&&(S=n.path),void 0!==S&&this.validator(n,a-1,e,S)),m++,void 0===o&&m>=f){r=g[n.op].call(n,h,o,e);break}if(c(h)){if("-"===o)o=h.length;else{if(i&&!s(o))throw new v("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a-1,n.path,n);o=parseInt(o,10)}if(m>=f){if(i&&"add"===n.op&&o>h.length)throw new v("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a-1,n.path,n);r=p[n.op].call(n,h,o,e);break}}else if(o&&-1!=o.indexOf("~")&&(o=o.replace(/~1/g,"/").replace(/~0/g,"~")),m>=f){r=u[n.op].call(n,h,o,e);break}h=h[o]}}return r}var c,d=function(e){if(c(e)){for(var t=new Array(e.length),i=0;i<t.length;i++)t[i]=""+i;return t}if(Object.keys)return Object.keys(e);t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},u={add:function(e,t){return e[t]=this.value,!0},remove:function(e,t){return delete e[t],!0},replace:function(e,t){return e[t]=this.value,!0},move:function(e,t,i){var n={op:"_get",path:this.from};return l(i,[n]),l(i,[{op:"remove",path:this.from}]),l(i,[{op:"add",path:this.path,value:n.value}]),!0},copy:function(e,t,i){var n={op:"_get",path:this.from};return l(i,[n]),l(i,[{op:"add",path:this.path,value:n.value}]),!0},test:function(e,t){return function e(t,i){switch(typeof t){case"undefined":case"boolean":case"string":case"number":return t===i;case"object":if(null===t)return null===i;if(c(t)){if(!c(i)||t.length!==i.length)return!1;for(var n=0,o=t.length;o>n;n++)if(!e(t[n],i[n]))return!1;return!0}var r=d(i).length;if(d(t).length!==r)return!1;for(n=0;r>n;n++)if(!e(t[n],i[n]))return!1;return!0;default:return!1}}(e[t],this.value)},_get:function(e,t){this.value=e[t]}},p={add:function(e,t){return e.splice(t,0,this.value),!0},remove:function(e,t){return e.splice(t,1),!0},replace:function(e,t){return e[t]=this.value,!0},move:u.move,copy:u.copy,test:u.test,_get:u._get},g={add:function(e){for(var t in g.remove.call(this,e),this.value)this.value.hasOwnProperty(t)&&(e[t]=this.value[t]);return!0},remove:function(e){for(var t in e)e.hasOwnProperty(t)&&u.remove.call(this,e,t);return!0},replace:function(e){return l(e,[{op:"remove",path:this.path}]),l(e,[{op:"add",path:this.path,value:this.value}]),!0},move:u.move,copy:u.copy,test:function(e){return JSON.stringify(e)===JSON.stringify(this.value)},_get:function(e){this.value=e}},h=[],m=function(){return function(e){this.observers=[],this.obj=e}}(),f=function(){return function(e,t){this.callback=e,this.observer=t}}();e.unobserve=function(e,t){t.unobserve()},e.observe=function(e,t){var n,a=function(e){for(var t=0,i=h.length;i>t;t++)if(h[t].obj===e)return h[t]}(e);if(a?n=function(e,t){for(var i=0,n=e.observers.length;n>i;i++)if(e.observers[i].callback===t)return e.observers[i].observer}(a,t):(a=new m(e),h.push(a)),n)return n;if(n={},a.value=i(e),t){n.callback=t,n.next=null;var s=this.intervals||[100,1e3,1e4,6e4];if(void 0===s.push)throw new o("jsonpatch.intervals must be an array");var l=0,c=function(){r(n)},d=function(){clearTimeout(n.next),n.next=setTimeout(function(){c(),l=0,n.next=setTimeout(u,s[l++])},0)},u=function(){c(),l==s.length&&(l=s.length-1),n.next=setTimeout(u,s[l++])};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mousedown",d),window.addEventListener("mouseup",d),window.addEventListener("keydown",d)):(document.documentElement.attachEvent("onmousedown",d),document.documentElement.attachEvent("onmouseup",d),document.documentElement.attachEvent("onkeydown",d))),n.next=setTimeout(u,s[l++])}return n.patches=[],n.object=e,n.unobserve=function(){r(n),clearTimeout(n.next),function(e,t){for(var i=0,n=e.observers.length;n>i;i++)if(e.observers[i].observer===t)return void e.observers.splice(i,1)}(a,n),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mousedown",d),window.removeEventListener("mouseup",d),window.removeEventListener("keydown",d)):(document.documentElement.detachEvent("onmousedown",d),document.documentElement.detachEvent("onmouseup",d),document.documentElement.detachEvent("onkeydown",d)))},a.observers.push(new f(t,n)),n},e.generate=r,c=Array.isArray?Array.isArray:function(e){return e.push&&"number"==typeof e.length},e.apply=l,e.compare=function(e,t){var i=[];return a(e,t,i,""),i};var v=function(e){function t(t,i,n,o,r){e.call(this,t),this.message=t,this.name=i,this.index=n,this.operation=o,this.tree=r}return n(t,e),t}(o);e.JsonPatchError=v,e.Error=v,e.validator=function(t,i,n,o){if("object"!=typeof t||null===t||c(t))throw new v("Operation is not an object","OPERATION_NOT_AN_OBJECT",i,t,n);if(!u[t.op])throw new v("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,t,n);if("string"!=typeof t.path)throw new v("Operation `path` property is not a string","OPERATION_PATH_INVALID",i,t,n);if(("move"===t.op||"copy"===t.op)&&"string"!=typeof t.from)throw new v("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",i,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new v("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",i,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&function e(t){if(void 0===t)return!0;if("array"==typeof t||"object"==typeof t)for(var i in t)if(e(t[i]))return!0;return!1}(t.value))throw new v("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",i,t,n);if(n)if("add"==t.op){var r=t.path.split("/").length,a=o.split("/").length;if(r!==a+1&&r!==a)throw new v("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",i,t,n)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==o)throw new v("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",i,t,n)}else if("move"===t.op||"copy"===t.op){var s={op:"_get",path:t.from,value:void 0},l=e.validate([s],n);if(l&&"OPERATION_PATH_UNRESOLVABLE"===l.name)throw new v("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",i,t,n)}},e.validate=function(e,t){try{if(!c(e))throw new v("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)t=JSON.parse(JSON.stringify(t)),l.call(this,t,e,!0);else for(var i=0;i<e.length;i++)this.validator(e[i],i)}catch(e){if(e instanceof v)return e;throw e}}}(i||(i={})),void 0!==t&&(t.apply=i.apply,t.observe=i.observe,t.unobserve=i.unobserve,t.generate=i.generate,t.compare=i.compare,t.validate=i.validate,t.validator=i.validator,t.JsonPatchError=i.JsonPatchError,t.Error=i.Error)},function(e,t){angular.module("onboardingServerJsApiAppInternal",["wixAngular","wix.common.bi"]),angular.module("onboardingServerJsApiApp",["onboardingServerJsApiAppInternal"]).config(function(){})},function(e,t,i){"use strict"},function(e,t,i){"use strict"},function(e,t,i){"use strict"},function(e,t,i){"use strict"},function(e,t,i){"use strict"},function(e,t,i){"use strict"},function(e,t,i){"use strict"},function(e,t,i){"use strict"},function(e,t,i){"use strict"},function(e,t,i){"use strict"},function(e,t,i){"use strict";var n;!function(e){var t=function(){function e(e){this.$q=e,this.errorCodesCallbackMap={},this.editorSessionId=null}return e.$inject=["$q"],e.prototype.setEditorSessionId=function(e){this.editorSessionId=e},e.prototype.getEditorSessionId=function(){return this.editorSessionId},e.prototype.onSessionExpired=function(e){this.sessionExpired=e,this.setErrorCodeCallback([-12,-15,-16],this.sessionExpired)},e.prototype.onConflictingChanges=function(e){this.conflictingChanges=e,this.setErrorCodeCallback([-26e3],this.conflictingChanges)},e.prototype.onSiteNotManagedByOB=function(e){this.siteNotManagedByOB=e,this.setErrorCodeCallback([-26009],this.siteNotManagedByOB)},e.prototype.onStoryArchived=function(e){this.storyArchived=e,this.setErrorCodeCallback([-26002],this.storyArchived)},e.prototype.getResponse=function(e){var t=this;return void 0===e&&(e=!1),function(i){if(t.isErrorResponse(i)){var n=t.errorCodesCallbackMap[i.data.errorCode];return n&&n(i),t.$q.reject(i)}return e?t.$q.reject(i):i.data}},e.prototype.isErrorResponse=function(e){return e.data&&e.data.errorCode},e.prototype.setErrorCodeCallback=function(e,t){var i=this;e.forEach(function(e){return i.errorCodesCallbackMap[e]=t})},e}();e.JsApiManager=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("jsApiManager",n.JsApiManager)},function(e,t,i){"use strict";var n;!function(e){var t=function(){function e(e,t,i){this.$http=e,this.$q=t,this.jsApiManager=i,this.endpointPrefix="/_api/adi-content-server-web/content/"}return e.$inject=["$http","$q","jsApiManager"],e.prototype.setPayload=function(e){return this.$http.post(this.endpointPrefix+"index",e).then(function(){})},e.prototype.suggest=function(e){if(!e)return this.$q.when([]);var t=this.endpointPrefix+"suggestCategory?q="+encodeURIComponent(this.sanitize(e));this.contentVersionId&&(t+="&indexVersion="+this.contentVersionId);var i=this.jsApiManager.getEditorSessionId();return i&&(t+="&editorSessionId="+i),this.locale&&(t+="&locale="+this.locale),this.$http.get(t).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0)).then(function(e){return e.results})},e.prototype.elasticSearch=function(e,t,i){if(!e)return this.$q.when(null);var n=this.endpointPrefix+"suggestCategory?q="+encodeURIComponent(e);this.contentVersionId&&(n+="&indexVersion="+this.contentVersionId);var o=this.jsApiManager.getEditorSessionId();return o&&(n+="&editorSessionId="+o),this.locale&&(n+="&locale="+this.locale),t&&(n+="&limit="+t),i&&(n+="&relatedLimit="+i),this.$http.get(n).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.load=function(e){if(e.industryId||e.structureId){var t=this.endpointPrefix+"lookup",i=[];e.industryId&&i.push("industryId="+e.industryId),e.structureId&&i.push("structureId="+e.structureId),this.contentVersionId&&i.push("indexVersion="+this.contentVersionId),this.locale&&i.push("locale="+this.locale);var n=t+"?"+i.join("&");return this.$http.get(n).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))}return this.$q.reject("Can't perform lookup: no industryId or structureId provided")},e.prototype.getStructureInfo=function(e){var t=this.endpointPrefix+"structure/lookup",i=[];e&&(i.push("structureId="+e),this.contentVersionId&&i.push("indexVersion="+this.contentVersionId),this.locale&&i.push("locale="+this.locale));var n=t+"?"+i.join("&");return this.$http.get(n).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.setContentVersionId=function(e){this.contentVersionId=e},e.prototype.setLocale=function(e){this.locale=e},e.prototype.sanitize=function(e){return e.replace(/[^0-9a-z\s\-+\/.;()'&]/gi,"")},e}();e.CmsApi=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("cmsApi",n.CmsApi)},function(e,t,i){"use strict";var n;!function(e){var t=function(){function e(e,t){this.$http=e,this.jsApiManager=t,this.endpointPrefix="/_api/onboarding-server-web/site"}return e.$inject=["$http","jsApiManager"],e.prototype.create=function(e,t){var i={templateMetaSiteId:e};return t&&(i.siteName=t),this.$http.post(this.endpointPrefix,i).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e}();e.SiteApi=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("siteApi",n.SiteApi)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r=window.Duplexer;!function(e){!function(e){e[e.Fail=0]="Fail",e[e.InProgress=1]="InProgress",e[e.Done=2]="Done"}(e.SiteConverterStatus||(e.SiteConverterStatus={})),function(e){e[e.BadUrl=0]="BadUrl",e[e.HTTP40X=1]="HTTP40X",e[e.HTTP50X=2]="HTTP50X",e[e.BadData=3]="BadData",e[e.ServerError=4]="ServerError",e[e.Timeout=5]="Timeout"}(e.FailReason||(e.FailReason={}));var t=function(){return function(e,t,i,n){this.url=e,this.title=n,this.esi=t,this.siteConverterSessionId=i}}();e.SiteInfoRequest=t;var i=function(){return function(){}}();e.SiteValidationResponse=i;var a=function(){return function(){}}();e.SiteInfoResponse=a;var s=function(){return function(){}}();e.SiteAnalyzeTaskPayload=s;var l=function(){return function(){}}();e.PageAnalyzeTask=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s);e.SiteAnalyzeTaskResult=c;var d=function(){return function(){this.logo=""}}();e.GeneralInfo=d;var u=function(){return function(){}}();e.SocialLinkData=u;var p=function(){return function(){}}();e.ImageItem=p;var g=function(){return function(){this.address="",this.phone="",this.email=""}}();e.ContactDetails=g;var h=function(){return function(){this.contactDetails=new g,this.generalInfo=new d}}();e.BusinessInfoResponse=h;var m=function(){return function(){}}();e.SiteDataResponseItem=m;var f=function(){return function(e,t,i,n,o){this.key=e,this.phaseName=t,this.importDetailsName=i,this.title=n,this.siteConverterSessionId=o}}();e.SiteConverterBIParams=f;var v=function(){function e(e,t,i,n){this.$http=e,this.$q=t,this.$window=i,this.jsApiManager=n,this.duplexerSocketServer="www.wix.com/wix-duplexer-sockets-server",this.adiEndpointPrefix="/_api/adi-import-site-server-webapp/site",this.endpointPrefix="/_api/onboarding-server-web/site",this.siteInfoUrl="info",this.validationUrl="validate",this.businessInfoUrl="businessInfo",this.analyzeTaskUrl="analyzeTask",this.importedDataUrl="data",this.importedPageUrl="page/data",this.apiKey="adi",this.userIdCookieName="_wixUIDX",this.eventName="AnalyzeSiteResultMessage"}return e.$inject=["$http","$q","$window","jsApiManager"],e.prototype.initDuplexer=function(){var e=new r(this.duplexerSocketServer);this.duplexerApp=e.connect({apiKey:this.apiKey})},e.prototype.readCookie=function(e){var t=this.$window.document.cookie.split("; ").find(function(t){return 0===t.indexOf(e+"=")});return t?t.replace(/.*=/g,""):null},e.prototype.getSiteInfo=function(e){return this.$http.get(this.endpointPrefix+"/"+this.siteInfoUrl+"?url="+e.url).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.getSiteValidation=function(e){return this.$http.get(this.adiEndpointPrefix+"/"+this.validationUrl+"?url="+e.url+"&editorSessionId="+e.esi).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.startAnalyzePageTask=function(e,t){var i=this.adiEndpointPrefix+"/"+this.analyzeTaskUrl+"?rootUrl="+t.url+"&url="+e+"&siteTitle="+t.title;t.wizRcVersion&&(i+="&rcVersion="+t.wizRcVersion),t.esi&&(i+="&editorSessionId="+t.esi),t.siteConverterSessionId&&(i+="&siteConverterSessionId="+t.siteConverterSessionId),this.$http.post(i,{})},e.prototype.startAnalyzeSiteTask=function(e){this.startAnalyzePageTask(e.url,e)},e.prototype.getBusinessInfo=function(e){return this.$http.get(this.adiEndpointPrefix+"/"+this.businessInfoUrl+"?url="+e.url+"&siteTitle="+e.title+"&editorSessionId="+e.esi+"&siteConverterSessionId="+e.siteConverterSessionId).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.getInnerPagesLinks=function(e,t){var i=e.pages[0],n=i&&i.sections.find(function(e){return"header"===e.type}),o=[];if(n&&n.menu){var r=function(e,i){return"internal"===i.type&&i.url&&!i.url.includes("#")&&i.url!==t.url&&e.push(i),i.sub&&i.sub.reduce(r,e),e};n.menu.reduce(r,o)}return o},e.prototype.analyzeFullSite=function(e,t,i){var n=this,r=e;return new Promise(function(a,s){n.initDuplexer();var l=n.getUserId();if(l){var c,d=l,u=n.duplexerApp.subscribe(d),p={};u.once("@duplexer:subscription_succeeded",function(){t&&t(),n.startAnalyzeSiteTask(e)}),u.on(n.eventName,function(s){if(s.url===r.url){var l=JSON.parse(s.jsonData),u=(c=n.getInnerPagesLinks(l,e)).slice(0,20).map(function(i){var o=i.url,r=i.text;return{url:o,title:r,result:new Promise(function(i){p[o]=i,t&&t({url:o,totalPages:c.length}),n.startAnalyzePageTask(o,e)})}});a(o({},s,{parsedData:l,pagesTasks:u})),Promise.all(u.map(function(e){return e.result})).then(function(){n.duplexerApp.unsubscribe(d),n.duplexerApp.disconnect(),i&&i({totalPages:c.length})})}else{var g=s.url,h=p[g];if(h){var m=JSON.parse(s.jsonData);i&&i({url:g,totalPages:c.length}),h(o({},s,{parsedData:m,pagesTasks:[]}))}}})}else s()})},e.prototype.getPageData=function(e,t,i){return this.$http.get(this.adiEndpointPrefix+"/"+this.importedPageUrl+"?userId="+i+"&rootUrl="+e+"&url="+t).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.getSiteData=function(e,t){return this.$http.get(this.adiEndpointPrefix+"/"+this.importedDataUrl+"?userId="+t+"&url="+e).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.getUserId=function(){var e=this.readCookie(this.userIdCookieName);return e&&e.split("|")[1]},e}();e.SiteDataRetrivalApi=v,angular.module("onboardingServerJsApiAppInternal").service("siteDataRetrivalApi",v)}(window.ob||{})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.serverData=t,this.translate=i,this.name=e.name,this.type=e.isPassed(t)?"passed":"pending",this.dataGetter=e[this.type]}return e.$inject=["stepData","serverData","translate"],e.prototype.getData=function(){return this.dataGetter(this.translate,this.serverData)},e}();t.Step=n},function(e,t,i){"use strict";var n;!function(e){e.STORES_FUNNEL_STEPS={addProduct:{name:"addProduct",isPassed:function(e){return e.storeInfo.hasSavedProduct},pending:function(e){return{title:e("tpa_add_product_title"),automationId:"addProduct",iconName:"ecom",link:{ref:"products.list",text:e("tpa_add_product_button"),url:"products"}}}},addPayment:{name:"addPayment",isPassed:function(e){return e.activePaymentMethods.length},pending:function(e){return{title:e("tpa_add_payment_title"),automationId:"addPayment",iconName:"payments",link:{type:"payments",ref:"dynamicPayments.list",text:e("tpa_add_payment_button"),url:"dynamicPayments/list"}}}},setupShipping:{name:"setupShipping",isPassed:function(e){return e.storeInfo.hasSavedDestinations&&e.destinations.length},pending:function(e){return{title:e("tpa_setup_shipping_title"),automationId:"setupShipping",iconName:"ecom",link:{ref:"shippingAndTax.list",text:e("tpa_setup_shipping_button"),url:"shipping-and-tax/list"}}}},upgrade:{name:"upgrade",isPassed:function(e){return e.storeInfo.isPremium},pending:function(e){return{title:e("tpa_upgrade_text"),automationId:"upgrade",iconName:"upgrade",link:{type:"upgrade",text:e("tpa_upgrade_text")}}}}};var t=function(){return function(e){this.activePaymentMethods=e.payments.activePaymentMethods,this.storeInfo=e.storeInfo,this.destinations=e.destinations,this.catalogInformation=e.catalogInformation}}();e.StoresFunnelData=t;var i=function(){function i(e,t){this.$http=e,this.jsApiManager=t,this.endpointPrefix="/_api/wix-ecommerce-graphql-web/api"}return i.$inject=["$http","jsApiManager"],i.prototype.payload=function(){return{query:"query getFunnelData {\n          storeInfo {\n            hasSavedProduct\n            hasSavedDestinations\n            hasCreatedPaymentMethods\n            isPremium\n          }\n          catalogInformation {\n            numberOfProducts\n          }\n          payments {\n            activePaymentMethods {\n              name\n              type\n            }\n          }\n          destinations(enabled: true) {\n            name\n          }\n        }",source:"WixStoresWebClient",operationName:"funnelSM"}},i.prototype.getFunnelData=function(i,n,o){void 0===o&&(o=this.payload());var r={method:"POST",url:this.endpointPrefix,headers:{Accept:"*/*","Content-Type":"application/json","X-ecom-instance":n},data:JSON.stringify(o)};return this.$http(r).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0)).then(function(n){var o=[],r=n&&n.data;if(!r)return o;var a=new t(r);return Object.keys(e.STORES_FUNNEL_STEPS).map(function(t){e.STORES_FUNNEL_STEPS[t].isPassed(a)||o.push(e.STORES_FUNNEL_STEPS[t].pending(i))}),o})},i}();e.StoresFunnelApi=i,angular.module("onboardingServerJsApiAppInternal").service("storesFunnelApi",i)}(n||(n={}))},function(e,t,i){"use strict";var n;!function(e){e.BOOKINGS_FUNNEL_STEPS={addService:{name:"addService",isPassed:function(e){return e.modifiedOffering&&e.numOfOfferings>0},pending:function(e){return{title:e("tpa_add_service_title"),automationId:"addService",iconName:"bookings",link:{ref:"scheduler.owner.offerings",text:e("tpa_add_service_button"),url:"scheduler/owner/offerings"}}}},addPayment:{name:"addPayment",isPassed:function(e){return e.hasPayments},pending:function(e){return{title:e("tpa_add_payment_title"),automationId:"addPayment",iconName:"payments",link:{type:"payments",ref:"payments",text:e("tpa_add_payment_button"),url:"payments"}}}},setAppointmentHours:{name:"setAppointmentHours",isPassed:function(e){return e.reviewedWorkingHours},pending:function(e){return{title:e("tpa_set_appointment_hours_title"),automationId:"setAppointmentHours",iconName:"bookings",link:{ref:"scheduler.owner.staff?referralInfo=sidebar",text:e("tpa_set_appointment_hours_button"),url:"scheduler/owner/staff?referralInfo=sidebar"}}}},upgrade:{name:"upgrade",isPassed:function(e){return"NONE"!==e.premiumType},pending:function(e){return{title:e("tpa_upgrade_text"),automationId:"upgrade",iconName:"upgrade",link:{type:"upgrade",text:e("tpa_upgrade_button")}}}}};var t=function(){return function(e){this.fromTemplate=e.fromTemplate,this.numOfOfferings=e.numOfOfferings,this.modifiedOffering=e.modifiedOffering,this.reviewedWorkingHours=e.reviewedWorkingHours,this.reviewedEmail=e.reviewedEmail,this.hasPayments=e.hasPayments,this.premiumType=e.premiumType}}();e.BookingsFunnelData=t;var i=function(){function i(e,t){this.$http=e,this.jsApiManager=t,this.endpointPrefix="/_api/scheduler-server/owner/business/setup"}return i.$inject=["$http","jsApiManager"],i.prototype.getFunnelData=function(i,n){var o={method:"GET",url:this.endpointPrefix,headers:{Accept:"*/*","Content-Type":"application/json","x-wix-scheduler-instance":n}};return this.$http(o).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0)).then(function(n){var o=[];return Object.keys(e.BOOKINGS_FUNNEL_STEPS).map(function(r){var a=new t(n);e.BOOKINGS_FUNNEL_STEPS[r].isPassed(a)||o.push(e.BOOKINGS_FUNNEL_STEPS[r].pending(i))}),o})},i}();e.BookingsFunnelApi=i,angular.module("onboardingServerJsApiAppInternal").service("bookingsFunnelApi",i)}(n||(n={}))},function(e,t,i){"use strict";var n;jsonpatch=window.jsonpatch,function(e){var t=function(){function e(e,t,i){this.$http=e,this.jsApiManager=t,this.cacheKillerParam=i,this.endpointPrefix="/_api/onboarding-server-web/story",this.templateEndpointPrefix="/_api/onboarding-server-web/template"}return e.$inject=["$http","jsApiManager","cacheKillerParam"],e.prototype.create2=function(e){return this.$http.post(this.decorateEndpoint(this.endpointPrefix,"new"),e).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.create=function(e){return this.$http.post(this.decorateEndpoint(this.buildEndpoint()),'"'+e+'"').then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.get=function(e,t){void 0===t&&(t=null);var i=this.decorateEndpoint(this.buildEndpoint(e,t));return this.$http.get(i,null).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.getTemplate=function(e,t){void 0===t&&(t=null);var i=this.decorateEndpoint(this.buildEndpoint(e,t,!0));return this.$http.get(i,null).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.getRevisions=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=100);var n=this.decorateEndpoint(this.buildEndpoint(e),"revisions",["from="+t,"limit="+i]);return this.$http.get(n,null).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.getMajorRevisions=function(e){var t=this.decorateEndpoint(this.buildEndpoint(e),"revisions/major");return this.$http.get(t,null).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.metadata=function(e){var t=this.decorateEndpoint(this.buildEndpoint(e),"metadata");return this.$http.get(t,null).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.update=function(e,t,i,n,o){void 0===o&&(o=null);var r={diff:jsonpatch.compare(i,n),action:"update"};o&&(r.htmlRevision=o);var a=this.decorateEndpoint(this.buildEndpoint(e,t));return this.$http.put(a,r).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.rollback=function(e,t){var i={targetRevision:t,action:"rollback"},n=this.decorateEndpoint(this.buildEndpoint(e));return this.$http.put(n,i).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.publish=function(e){var t=this.decorateEndpoint(this.buildEndpoint(e));return this.$http.put(t,{action:"publish"}).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.saveAsTemplate=function(e){var t=this.decorateEndpoint(this.buildEndpoint(e));return this.$http.put(t,{action:"saveAsTemplate"}).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.markAsMajorRevision=function(e){var t=this.decorateEndpoint(this.buildEndpoint(e));return this.$http.put(t,{action:"markAsMajor"}).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.markCreated=function(e,t,i){var n={templateMetaSiteId:t,metaSiteId:e.metaSiteId,siteId:i},o=this.decorateEndpoint(this.buildEndpoint(e),"markCreated");return this.$http.put(o,n).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.archive=function(e){var t=this.decorateEndpoint(this.buildEndpoint(e));return this.$http.put(t,{action:"archive"}).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.buildEndpoint=function(e,t,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i=!1);var n=i?this.templateEndpointPrefix:this.endpointPrefix;return null!==e&&(n+="/"+e.instanceId+":"+e.metaSiteId),null!==t&&(n+="/"+t),n},e.prototype.decorateEndpoint=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=[]);var n=["cacheKiller="+this.cacheKillerParam()].concat(i),o=this.jsApiManager.getEditorSessionId();return o&&n.push("editorSessionId="+o),e+(t?"/"+t:"")+"?"+n.join("&")},e}();e.StoryApi=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("storyApi",n.StoryApi).factory("cacheKillerParam",function(){return function(){return Date.now().toString()}})},function(e,t,i){"use strict";var n;!function(e){var t=function(){function e(e,t,i){var n=this;this.$q=e,this.storyApi=t,this.siteApi=i,this.create=function(e){return n.enqueue(function(){return n.createStory(e)})},this.create2=function(e){return n.enqueue(function(){return n.createStory2(e)})},this.createFromTemplate=function(e){return n.enqueue(function(){return n.createStoryFromTemplate(e)})},this.createSiteFromTemplate=function(e,t){return n.enqueue(function(){return n.siteApi.create(e,t)})},this.get=function(e,t){return n.enqueue(function(){return n.getStory(e,t)})},this.getTemplate=function(e,t){return n.enqueue(function(){return n.getTemplateStory(e,t)})},this.update=function(e){return n.enqueue(function(){return n.updateStory(e)})},this.publish=function(e){return n.enqueue(function(){return n.publishStory(e)})},this.saveAsTemplate=function(e){return n.enqueue(function(){return n.saveStoryAsTemplate(e)})},this.markAsMajorRevision=function(e){return n.enqueue(function(){return n.markStoryAsMajorRevision(e)})},this.markCreated=function(e,t,i){return n.enqueue(function(){return n._markCreated(e,t,i)})}}return e.$inject=["$q","storyApi","siteApi"],e.prototype.enqueue=function(e){return this.lastAction?(this.lastAction=this.lastAction.then(e,e),this.lastAction):(this.lastAction=e(),this.lastAction)},e.prototype.preload=function(e,t){return t.storyId=e,this.currentStory=this.cloneStory(t),t},e.prototype.createStory=function(e){var t=this;return this.storyApi.create(e).then(function(i){var n={storyId:{instanceId:i.instanceId,metaSiteId:e},revision:i.revision,blob:{}};return t.currentStory=t.cloneStory(n),n})},e.prototype.createStory2=function(e){var t=this;return this.storyApi.create2(e).then(function(e){var i={storyId:{instanceId:e.instanceId,metaSiteId:e.metaSiteId},siteId:e.siteId,revision:e.revision,blob:{}};return t.currentStory=t.cloneStory(i),i})},e.prototype.createStoryFromTemplate=function(e){var t=this;return this.storyApi.create2(e).then(function(e){var i={storyId:{instanceId:e.instanceId,metaSiteId:e.metaSiteId},siteId:e.siteId,revision:e.revision,blob:e.blob};return t.currentStory=t.cloneStory(i),i})},e.prototype.getStory=function(e,t){var i=this;return this.storyApi.get(e,t).then(function(n){return _.isNumber(t)?(n.storyId=e,n):i.preload(e,n)})},e.prototype.getTemplateStory=function(e,t){var i=this;return this.storyApi.getTemplate(e,t).then(function(n){return _.isNumber(t)?(n.storyId=e,n):i.preload(e,n)})},e.prototype.updateStory=function(e,t){var i=this;if(void 0===t&&(t=!0),e.storyId.instanceId!==this.currentStory.storyId.instanceId)return this.$q.reject("storyId "+e.storyId.instanceId+" does not match "+this.currentStory.storyId.instanceId);var n=angular.copy(e.blob);return this.storyApi.update(e.storyId,this.currentStory.revision,this.currentStory.blob,n,e.htmlRevision).then(function(e){return i.updateCurrentBlob(n),i.currentStory.revision=e,i.cloneStory(i.currentStory)}).catch(function(n){return t&&i.isDataCorruptionError(n)?i.handleDataCorruptionError(e):i.$q.reject(n)})},e.prototype.publishStory=function(e){var t=this;return this.storyApi.publish(e.storyId).then(function(e){return t.currentStory.revision=e,e})},e.prototype.saveStoryAsTemplate=function(e){var t=this;return this.storyApi.saveAsTemplate(e.storyId).then(function(e){return t.currentStory.revision=e,e})},e.prototype.markStoryAsMajorRevision=function(e){var t=this;return this.storyApi.markAsMajorRevision(e.storyId).then(function(e){return t.currentStory.revision=e,e})},e.prototype._markCreated=function(e,t,i){return this.storyApi.markCreated(e.storyId,t,i)},e.prototype.isDataCorruptionError=function(t){return t.status===e.DATA_CORRUPTION_STATUS&&t.data&&t.data.errorCode===e.DATA_CORRUPTION_ERROR_CODE},e.prototype.handleDataCorruptionError=function(e){var t=this;return this.getStory(e.storyId).then(function(){return t.updateStory(e,!1)})},e.prototype.cloneStory=function(e){return angular.copy(e)},e.prototype.updateCurrentBlob=function(e){this.currentStory.blob=e},e.DATA_CORRUPTION_STATUS=400,e.DATA_CORRUPTION_ERROR_CODE=-26011,e}();e.StoryManager=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("storyManager",n.StoryManager)},function(e,t,i){"use strict";var n;!function(e){var t=function(){function e(e,t){this.$http=e,this.jsApiManager=t,this.endpointPrefix="/_api/onboarding-server-web/location"}return e.$inject=["$http","jsApiManager"],e.prototype.getGeoLocation=function(){return this.$http.get(this.endpointPrefix).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e}();e.LocationApi=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("locationApi",n.LocationApi)},function(e,t,i){"use strict";var n;!function(e){var t=function(){function e(e,t){this.$http=e,this.jsApiManager=t,this.endpointPrefix="/_api/onboarding-server-web/sitename"}return e.$inject=["$http","jsApiManager"],e.prototype.getUniqueName=function(e){if(!e||!e.length)throw"empty site name";var t=this.endpointPrefix+"?suggestedName="+encodeURIComponent(e);return this.$http.get(t,{headers:{Accept:"text/plain"}}).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.rename=function(e,t){if(!t)throw"empty name";var i=this.endpointPrefix+"/"+e+"/rename?newName="+encodeURIComponent(t);return this.$http.post(i,null).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e}();e.SiteNameApi=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("siteNameApi",n.SiteNameApi)},function(e,t,i){"use strict";var n;!function(e){var t=function(){function e(e,t){this.$http=e,this.jsApiManager=t,this.endpointPrefix="/_api/onboarding-server-web/metasite",this.countryCodesByName={"united states":"US",france:"FR"}}return e.$inject=["$http","jsApiManager"],e.prototype.setSiteProperties=function(e,t){var i=this.prepareRequest(t);return this.$http.put(this.endpointPrefix+"/"+e+"/properties",i).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0)).then(function(){})},e.prototype.getSiteProperties=function(e){return this.$http.get(this.endpointPrefix+"/"+e+"/properties").then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.prepareRequest=function(e){var t={};if(!e.name)throw new Error("name must be set when updating site properties");t.businessName={value:e.name},e.categories&&e.categories.primary&&e.categories.secondary&&(t.categories={primary:e.categories.primary,secondary:e.categories.secondary}),e.email&&(t.email={address:e.email}),e.phone&&(t.phone={number:e.phone}),e.fax&&(t.fax={number:e.fax}),e.logo&&(t.logo={url:e.logo});var i=e.address&&e.address.country?this.getCountryCode(e.address.country):null;return e.address&&e.address.street&&e.address.city&&e.address.country&&i&&(t.postalAddress={street:e.address.street,city:e.address.city,country:i},e.address.state&&(t.postalAddress.state=e.address.state),e.address.zip&&(t.postalAddress.zip=e.address.zip)),e.address&&(t.postalAddress=t.postalAddress||{},e.address.fullAddress&&(t.postalAddress.fullAddress=e.address.fullAddress),e.address.googleFormattedAddress&&(t.postalAddress.googleFormattedAddress=e.address.googleFormattedAddress)),t},e.prototype.getCountryCode=function(e){return(e=(e||"").toLowerCase()).length>3&&(e=this.countryCodesByName[e]),e?e.toUpperCase():""},e}();e.MetaSiteApi=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("metaSiteApi",n.MetaSiteApi)},function(e,t,i){"use strict";var n;!function(e){var t=function(){function e(e,t){this.$http=e,this.jsApiManager=t,this.endpointPrefix="/_api/onboarding-server-web/media"}return e.$inject=["$http","jsApiManager"],e.prototype.upload=function(e,t){var i={albumsToUpload:_.map(t,function(e){return{albumName:e.name,mediaUrls:e.urls}})},n={};n.editorSessionId=this.jsApiManager.getEditorSessionId(),n.siteMediaToken=e;var o=this.endpointPrefix+"?"+this.calcParams(n);return this.$http.post(o,i).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.calcParams=function(e){return Object.keys(e).filter(function(t){return!!e[t]}).map(function(t){return t+"="+e[t]}).join("&")},e}();e.MediaApi=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("mediaApi",n.MediaApi)},function(e,t,i){"use strict";var n;!function(e){var t=function(){function e(e,t){this.$http=e,this.jsApiManager=t,this.oldEndpointPrefix="/_api/wix-dealer-integration-webapp/salesSystemResolver",this.endpointPrefix="/_api/wix-dealer-integration-webapp/saleInfo"}return e.$inject=["$http","jsApiManager"],e.prototype.old_GetCampaign=function(e){return this.$http.get(this.oldEndpointPrefix+"?siteGuid="+e).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.getCampaign=function(e){return this.$http.get(this.endpointPrefix+"?siteGuid="+e).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e}();e.DealerApi=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("dealerApi",n.DealerApi)},function(e,t,i){"use strict";var n;!function(e){var t=function(){function e(e,t){this.$http=e,this.jsApiManager=t,this.endpointPrefix="/_api/premium-domains/domains/suggestions"}return e.$inject=["$http","jsApiManager"],e.prototype.getSuggestedDomains=function(e){var t=e.metaSiteId,i=e.businessName;return this.$http.get(this.endpointPrefix+"?businessName="+encodeURI(i)+"&msid="+t).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e}();e.SuggestDomainApi=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("suggestDomainApi",n.SuggestDomainApi)},function(e,t,i){"use strict";var n;!function(e){var t=function(){function e(e,t){this.$http=e,this.jsApiManager=t,this.endpointPrefix="/_api/wix-html-login-webapp/user/getUserDetails",this.accountEndpointPrefix="/_api/my-account-services/user",this.avatarEndpointPrefix="/_api/business-manager/user"}return e.$inject=["$http","jsApiManager"],e.prototype.getUserDetails=function(){return this.$http.get(this.endpointPrefix).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.getMyAccountDetails=function(){return this.$http.get(this.accountEndpointPrefix).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e.prototype.getUserAvatar=function(){return this.$http.get(this.avatarEndpointPrefix).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e}();e.UserDetailsApi=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("userDetailsApi",n.UserDetailsApi)},function(e,t,i){"use strict";var n;!function(e){var t=function(){function e(e,t){this.$http=e,this.jsApiManager=t,this.endpointPrefix="/_api/onboarding-server-web/isAnonymous"}return e.$inject=["$http","jsApiManager"],e.prototype.isAnonymousUser=function(){return this.$http.get(this.endpointPrefix).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e}();e.AnonymousUserApi=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("anonymousUserApi",n.AnonymousUserApi)},function(e,t,i){"use strict";var n;!function(e){var t=function(){function e(e,t){this.$http=e,this.jsApiManager=t,this.endpointPrefix="/_api/onboarding-custom-pallete-server-webapp/coloring/colorMatches"}return e.$inject=["$http","jsApiManager"],e.prototype.getMatches=function(e,t,i){var n=this.buildUrl(e,t,i);return this.$http.get(n).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0)).then(function(e){return{matches:e.matches.map(function(e){return e.startsWith("#")?e:"#"+e})}})},e.prototype.buildUrl=function(e,t,i){e.startsWith("#")&&(e=e.substr(1));var n=this.endpointPrefix+"?color="+e;return t&&(n+="&limit="+t),i&&(n+="&nearestNeighbours="+i),n},e}();e.ColorApi=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("colorApi",n.ColorApi)},function(e,t,i){"use strict";var n;!function(e){var t=function(){function e(e,t,i){this.$http=e,this.$q=t,this.jsApiManager=i,this.endpointPrefix="/_api/adi-node-renderer/"}return e.$inject=["$http","$q","jsApiManager"],e.prototype.sanitize=function(e){return e.replace(/[^0-9a-z\s\-+\/.;()'&]/gi,"")},e.prototype.createAndRender=function(e,t,i,n){var o=this.endpointPrefix+"create_render?";return o=(o=(o=(o=o+"industryId="+encodeURIComponent(this.sanitize(t)))+"&structureId="+encodeURIComponent(this.sanitize(e)))+"&businessName="+encodeURIComponent(this.sanitize(i)))+"&flags="+encodeURIComponent(n?this.sanitize(n):"noTour&silentBI&noSpinners"),this.$http.post(o,"").then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0)).then(function(e){return e.id})},e.prototype.renderHomePage=function(e,t){var i=this.endpointPrefix+"render_home_page/"+e;return t&&(i=i+"?flags="+encodeURIComponent(this.sanitize(t))),this.$http.post(i,"").then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0)).then(function(e){return e.id})},e.prototype.renderAlternateHomePages=function(e,t,i){throw"not implemented"},e.prototype.getTaskStatus=function(e){var t=this.endpointPrefix+"status/"+e;return this.$http.get(t).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},e}();e.ServerSideRenderApi=t}(n||(n={})),angular.module("onboardingServerJsApiAppInternal").service("serverSideRenderApi",n.ServerSideRenderApi)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONSUMER_DIALOGS={ADD_SECTION_HELP:"add-section-help",ADD_PAGE_HELP:"add-page-help",BUSINESS_CARD_HELP:"business-card-help",AFTER_PAGE_ADD:"popup-after-page-add",AFTER_PAGE_ADD_HELP:"popup-after-page-add-help",AFTER_PAGE_ADD_FIRST_TIME:"popup-page-add-first-time",SECTION_REPLACE_HELP:"section-replace-help",SECTION_COLORS_HELP:"section-colors-help",SECTION_ANIMATIONS_HELP:"section-animations-help",SECTION_BACKGROUNDS_HELP:"section-background-help",SECTION_FONT_HELP:"section-font-help",CONFIRM_DELETE_LIST_ITEM:"confirm-delete-list-item",LIST_PANEL_HELP:"list-panel-help",MEDIA_SETTINGS_PANEL_HELP:"media-settings-panel-help",SHOW_HIDE_NODE:"show-hide-node-popup",SINGLE_PANEL_HELP:"single-panel-help",SOCIAL_PANEL_HELP:"social-panel-help",LIST_SPAN_TOOLS_DELETE:"list-span-tools-delete",LIST_SPAN_TOOLS_DELETE_HELP:"list-span-tools-delete-help",MOVE_SECTION:"move-section",MOVE_SECTION_HELP:"move-section-help",DELETE_SECTION:"delete-section",DELETE_SECTION_HELP:"delete-section-help",DELETE_CHAT:"delete-chat",DESIGN_PANEL_HELP:"design-panel-help",COLORATION_PANEL_HELP:"coloration-panel-help",ANIMATION_PANEL_HELP:"animation-panel-help",PAGES_PANEL_HELP:"pages-panel-help",PAGE_DELETE_CONFIRM:"confirm-page-delete",TPA_PAGE_DELETE_CONFIRM:"tpa-confirm-page-delete",SEO_PANEL_HELP:"seo-panel-help",GOTO_EDITOR:"goto-editor",PUBLISH_CHOOSE_DOMAIN_HELP:"publish-choose-domain-help",PUBLISH_CONGRATS_HELP:"publish-congrats-help",PUBLISH_CONNECT_DOMAIN_HELP:"publish-connect-domain-help",FAKEBROWSER_CONNECT_DOMAIN_HELP:"fakebrowser-connect-domain-help",TOPBAR_CONNECT_DOMAIN_HELP:"topbar-connect-domain-help",BUSINESS_DETAILS:"business-details",PUBLISH_FAILED:"publish-failed",HOME_HELP:"home-help",TPA_HELP:"tpa-help",TPA_AFTER_UPDATE:"tpa-after-update",LINK_DETAILS_HELP:"link-details-help",SESSION_EXPIRED:"session-expired",CONFLICTING_CHANGES:"conflicting-changes",SITE_NOT_MANAGED_BY_OB:"site-not-managed-by-ob",FIELD_VISIBILITY_SHOW_HIDE:"field-visibility-show-hide",TIME_TO_PUBLISH:"time-to-publish",AUTOSAVE:"autosave",SAVE_VALIDATION_ERROR:"save-failure",SAVE_AS_TEMPLATE_ERROR:"save-as-template-failure",STORY_ARCHIVED:"story-archived",DS_SAVE_PUBLISH_DISABLED_ON_SERVER:"ds-save-publish-disabled-on-server",PALETTE_COLOR:"choose-color",MENU_TOOLTIP_HELP:"menu-tooltip-help",FONT_PANEL_HELP:"font-panel-help",LINK_PHONE_HELP:"help.link.phone",DEBUG_MAP_STYLE:"map-style",WELCOME_TO_MOBILE_EDITOR_EXISTING:"welcome-to-mobile-editor-existing",WELCOME_TO_MOBILE_EDITOR_NEW:"welcome-to-mobile-editor-new",AFFECTS_ONLY_MOBILE_EDITOR:"affects-only-mobile-editor",DISABLED_TRANSPARENT_HEADER_TOOLTIP_HELP:"disabled-transparent-header-tooltip-help",COLOR_SETTINGS:"color-settings",APPS_PANEL_HELP:"apps-panel-help",MEMBERS_SIGNUP_SETTINGS:"members-signup-settings",MEMBERS_LOGIN_SETTINGS:"members-login-settings",MEMBERS_PAGES_HELP:"members-pages-help",MEMBERS_TERMS_OF_USE:"members-terms-of-use",MEMBERS_PRIVACY_POLICY:"members-privacy-policy",IMPORT_PAGE_SUCCESS:"import-page-success",IMPORT_PAGE_FAILED:"import-page-failed",SAVE_YOUR_SITE:"save-your-site",IMAGE_UPSCALE_MODAL:"image-upscale-modal"},angular.module("siteGeneratorStaticsConsumerAppInternal").constant("CONSUMER_DIALOGS",t.CONSUMER_DIALOGS)},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o,r=i(0),a=i(547),s=i(53),l=i(1),c=function(){function e(t,i,n,o,r,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E){var w=this;this.layoutSolver=t,this.clientTopology=i,this.applicationState=n,this.$q=o,this.flags=r,this.$injector=l,this.$window=c,this.storyServices=d,this.modelTree=u,this.tpaService=p,this.sectionMedia=g,this.publishService=h,this.consumerBiLogger=m,this.consumerBiLoggerHelpers=f,this.undoRedo=v,this.uncaughtExceptions=S,this.uncaughtExceptionListeners=y,this.tpasLoadedService=T,this.initSetup=b,this.initService=I,this.themeChooser=P,this.obMonitoring=M,this.mediaSectionUtils=E,this.actions=Object.keys(a.default).reduce(function(e,t){return e[t]=w.$injector.invoke(a.default[t]),e},{}),this.changeKitType="changeKit",this.typesShouldRunOnce=[this.changeKitType],this.okResponse=function(e){return{siteData:w.getSiteData(),results:e,success:!0,result:"OK"}},this.errResponse=function(e){return{siteData:w.getSiteData(),results:null,success:!1,result:e}},this.headlessLog=function(e,t){return w.$window.console.log("headless: "+e,t||"")},this.previewMediaTypeToPreferredMedia=function(t){var i=e.previewMediaTypeToSectionMediaType(t);return i===s.SectionMediaType.EXTVIDEO?s.SectionMediaType.VIDEO:i},b.overrideConflictingChangesHandler(this.handleConflictChangesError)}return e.$inject=["layoutSolver","clientTopology","applicationState","$q","flags","$injector","$window","storyServices","modelTree","tpaService","sectionMedia","publishService","consumerBiLogger","consumerBiLoggerHelpers","undoRedo","uncaughtExceptions","uncaughtExceptionListeners","tpasLoadedService","initSetup","initService","themeChooser","obMonitoring","mediaSectionUtils"],e.prototype.handleConflictChangesError=function(){o=!0},e.prototype.filterAndValidateActions=function(e,t){return r.each(this.typesShouldRunOnce,function(i){var n=r.filter(e,{type:i});n.length&&(n.pop(),n.forEach(function(e){return t[e.originalIndex]={result:"SKIPPED"}}),e=r.filter(e,function(e){return-1===n.indexOf(e)}))}),e},e.prototype.sortActions=function(e){var t=r.findIndex(e,{type:this.changeKitType});if(-1!==t&&e.length!==t){var i=e.splice(t,1)[0];e.push(i)}return e},e.prototype.extractAffectedPageId=function(e){var t;switch(e.type){case"deleteSection":case"addSection":case"addListItem":case"removeListItem":case"moveSection":case"moveSection":case"updateSection":case"changeSectionLayout":t=r.get(e,"data.pageId");break;case"changeKit":t=this.storyServices.story.selectedPage}return t},e.prototype.debugHeights=function(){var e=this,t=function(i){return i.visible?i.children?(e.flags.lodash4?r.strictSumBy:r.sum)(r.map(i.children,t)):i.height:0},i=this.getSiteData(),n=i.pages[0],o=r.filter([i.header.height].concat(n.sections.map(t),[i.footer.height]));console.log(o),console.log("total "+(this.flags.lodash4?r.strictSumBy:r.sum)(o)),console.log("stage heights:"),this.$window.coreDebug.eds.serializeAllSiteSegments()},e.prototype.getSiteData=function(){this.headlessLog("getting site data");var e=this.storyServices.story.getSourceObject().dbStory,t=this.themeChooser.getActiveTheme("mainKit");return s.reduceDbStory(n({},e,{isDraft:this.storyServices.story.isDraft,isDomainConnected:this.publishService.isDomainConnected(),isPublished:this.publishService.isSitePublished(),storyId:e.storyId.instanceId,kitFonts:t&&t.kitFonts,nodesMetadata:this.getNodesMetadata()}),this.clientTopology.experiments)},e.prototype.switchToMobilePage=function(e){var t=this;return this.undoRedo.startSlowAutoSave(),this.modelTree.getNodeById(e)||(e=this.modelTree.homePageId),this.switchToMobilePageWrapper(e).then(function(){return t.tpasLoadedService.waitForTpasToLoad(e)}).then(function(){return t.tpasLoadedService.waitForOtherComps(e)}).then(function(){return t.okResponse(null)})},e.prototype.switchToDesktop=function(){return this.headlessLog("switchToDesktop"),this.undoRedo.startSlowAutoSave(),this.applicationState.disableMobileEditor()},e.prototype.switchToMobilePageWrapper=function(e){var t=this;this.headlessLog("switchToMobilePage "+e);var i=this.modelTree.getPageNodeById(e),n=i&&this.tpaService.getAppIdByPageNode(i),o=i&&i.name;return this.consumerBiLogger.pagesManager.clickOnPage(o,n,"Headless"),this.applicationState.goToMobilePage(e).then(function(){t.consumerBiLogger.pagesManager.gotoPageSuccess(o,n,"Headless")})},e.prototype.stringifyErr=function(e){if(e)return e.stack||e.message||JSON.stringify(e)},e.prototype.invoke=function(e,t){var i=this;return(this.flags.med_recoverAfterError?this.initService.loaded():this.$q.resolve()).then(function(){return i.invokeInternal(e,t)})},e.prototype.invokeInternal=function(e,t){var i=this;this.undoRedo.startSlowAutoSave(),this.consumerBiLogger.med.headlessWrapperRequestTry(l.BIMEDActions.Update),e.forEach(function(e,t){return e.originalIndex=t});var n=[],a=this.filterAndValidateActions(e,n),s=this.sortActions(a);this.headlessLog("invoking "+s.map(function(e){return e.type}).join(","),s);var c=this.storyServices.story.revision;if(t&&t<c)return this.consumerBiLogger.med.headlessWrapperRequestFailed(l.BIMEDActions.Update,"STALE_VERSION"),this.$q.reject(this.errResponse("STALE_REVISION"));var d=function(e){if((e=e.concat(i.uncaughtExceptions.map(function(e){return e.exception}))).length>0){if(1===e.length)throw e[0];var t=e.map(function(e){return String(e&&(e.stack||e.message)||e)});throw new Error(e.length+" errors:\n"+JSON.stringify(t,null,2))}};return function(e){return new Promise(function(t,n){if(i.uncaughtExceptions.length>0)return t();i.uncaughtExceptionListeners.push(r);var o=function(){return i.uncaughtExceptionListeners.splice(i.uncaughtExceptionListeners.indexOf(r),1)};function r(){o(),t()}e.then(r,function(e){o(),n(e)})})}(s.reduce(function(e,t){i.consumerBiLoggerHelpers.startMEDActionIfPublish(t.type,function(){return i.consumerBiLogger.med.headlessWrapperRequestTry(l.BIMEDActions.Publish)});var o=i.actions[t.type];return e.then(function(){return i.recordStep(t),o(t.data)}).then(function(){return function(e){i.recordStep(e,!0),i.consumerBiLoggerHelpers.finishMEDActionIfPublish(e.type,function(){return i.consumerBiLogger.med.headlessWrapperRequestSuccess(l.BIMEDActions.Publish)});var t=i.extractAffectedPageId(e),o=e.originalIndex;n[o]={result:"OK"},t&&(n[o].affectedPageId=t)}(t)}).catch(function(e){return function(e){i.recordStep(e,!0),i.consumerBiLoggerHelpers.finishMEDActionIfPublish(e.type,function(){return i.consumerBiLogger.med.headlessWrapperRequestFailed(l.BIMEDActions.Publish,"ERROR")}),n[e.originalIndex]={result:"ERROR"}}(t)})},this.switchToDesktop()).then(function(){return i.storyServices.calculateAndRenderDesktopAndMobilePages()}).then(function(){return i.switchToMobilePageWrapper(i.storyServices.story.selectedPage)}).then(function(){if((!i.flags.med_recoverAfterError||!(r.values(n).filter(function(e){return"ERROR"===e.result}).length>0))&&(!i.applicationState.isSupportStaffEditing()||i.flags.allowSaveForStaff))return i.undoRedo.manualSave()})).catch(function(e){return d([e])}).then(function(){return d([])}).then(function(){return o?(o=!1,i.consumerBiLogger.med.headlessWrapperRequestFailed(l.BIMEDActions.Update,"CONFLICTING_CHANGES"),i.$q.reject(i.errResponse("CONFLICTING_CHANGES"))):(i.consumerBiLogger.med.headlessWrapperRequestSuccess(l.BIMEDActions.Update),i.okResponse(n))},function(e){return i.consumerBiLogger.med.headlessWrapperRequestFailed(l.BIMEDActions.Update,"ERROR"),i.$q.reject(i.errResponse(i.flags.debug?i.stringifyErr(e):"ERROR"))})},e.prototype.recordStep=function(e,t){if(e){var i=this.extractDataForMonitoring(e.data,e.type),n="headless_"+e.type+i;t?this.obMonitoring.measure({name:n}):this.obMonitoring.mark({name:n})}},e.prototype.extractDataForMonitoring=function(e,t){if(!e)return"";switch(t){case s.SiteUpdateType.ChangeKit:return"_id="+e.id;case s.SiteUpdateType.AddSection:return"_type="+e.ceType;case s.SiteUpdateType.UpdateSection:case s.SiteUpdateType.AddListItem:var i=e.sectionData;return i?"_type="+i.ceType:"";case s.SiteUpdateType.ChangeSectionLayout:return"_layoutId="+e.layoutId;case s.SiteUpdateType.AddPage:var n="_alias="+e.alias;return e.tpaType&&(n+="_tpaType="+e.tpaType),n;default:return""}},e.prototype.getNodesMetadata=function(){var t=this,i=function(i){var n=i&&t.sectionMedia.getMediaType(i)||cc.MediaPreviewType.SingleImage;return e.previewMediaTypeToSectionMediaType(n)},o=function(n,o){void 0===o&&(o=null);var r=!1;(o=o||n.segments[0].node)&&(r=o.argsMatchingPolicy[t.mediaSectionUtils.getMediaKey(o.contentElement)]||t.flags.sectionMedia&&t.mediaSectionUtils.nodeHasBackground(o));return{height:n.getBoundingHeight(),mediaType:i(o),validMediaTypes:function(i){return t.mediaSectionUtils.getVisibleMediaTypes(i).map(function(t){return e.previewMediaTypeToSectionMediaType(t)})}(o),bgMedia:function(e){if(i(e)===s.SectionMediaType.PATTERN){var n=t.mediaSectionUtils.getBackgroundMedia(e);return{mediaType:n.mediaType,relativeUri:n.relativeUri,rgbBackgroundColor:n.rgbBackgroundColor,thumbRatio:n.thumbRatio}}}(o),hasActiveMedia:r}},a=r(this.layoutSolver.siteSolutions.body).map(function(e){return e.getSelectedMobileSolution()}).flatten().reduce(function(e,t){return n({},e,((i={})[t.page+"."+t.segments[0].node.id]=o(t),i));var i},{}),l=this.layoutSolver.getSelectedSolution("header")[0].getMobileFirstLG(),c=this.modelTree.getGeneralInformation();a.header=o(l,c);var d=this.layoutSolver.getSelectedSolution("footer")[0].getMobileFirstLG(),u=this.modelTree.getFooterInformation();return a.footer=o(d,u),a},e.prototype.buildSite=function(e){var t=this;return this.headlessLog("building site",e),this.consumerBiLogger.med.headlessWrapperRequestTry(l.BIMEDActions.Build),this.undoRedo.startSlowAutoSave(),this.actions.buildSite(e).then(function(){return t.switchToMobilePageWrapper(t.storyServices.story.selectedPage)}).then(function(){return t.undoRedo.manualSave()}).then(function(){return t.consumerBiLogger.med.headlessWrapperRequestSuccess(l.BIMEDActions.Build),t.okResponse(null)}).catch(function(e){return t.consumerBiLogger.med.headlessWrapperRequestFailed(l.BIMEDActions.Build,"ERROR"),t.$q.reject(t.errResponse(JSON.stringify(e)))})},e.prototype.isSiteBuilt=function(){return this.actions.isSiteBuilt()},e.previewMediaTypeToSectionMediaType=function(e){switch(e){case cc.MediaPreviewType.SingleImage:return s.SectionMediaType.IMAGE;case cc.MediaPreviewType.Shape:return s.SectionMediaType.SHAPE;case cc.MediaPreviewType.Clipart:return s.SectionMediaType.CLIPART;case cc.MediaPreviewType.ExtVideo:return s.SectionMediaType.EXTVIDEO;case cc.MediaPreviewType.Video:return s.SectionMediaType.VIDEO;case cc.MediaPreviewType.MultipleImages:return s.SectionMediaType.GALLERY;case cc.MediaPreviewType.Pattern:return s.SectionMediaType.PATTERN}},e.sectionMediaTypeToPreviewMediaType=function(e){switch(e){case s.SectionMediaType.IMAGE:return cc.MediaPreviewType.SingleImage;case s.SectionMediaType.SHAPE:return cc.MediaPreviewType.Shape;case s.SectionMediaType.CLIPART:return cc.MediaPreviewType.Clipart;case s.SectionMediaType.EXTVIDEO:return cc.MediaPreviewType.ExtVideo;case s.SectionMediaType.VIDEO:return cc.MediaPreviewType.Video;case s.SectionMediaType.GALLERY:return cc.MediaPreviewType.MultipleImages;case s.SectionMediaType.PATTERN:return cc.MediaPreviewType.Pattern}},e}();t.default=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(39),o=i(14),r=i(0),a=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P){var M=this;this.contentManager=e,this.modelTree=t,this.storyServices=i,this.CONSUMER_DIALOGS=n,this.applicationState=o,this.applicationParameters=r,this.tpaService=a,this.pagesManager=s,this.CcDialogBuilder=l,this.$translate=c,this.tipManager=d,this.TipManagerTypeMap=u,this.initService=p,this.consumerBiLogger=g,this.sectionManager=h,this.assistantManager=m,this.flags=f,this.contentModelTree=v,this.dropTargetCalculator=S,this.overlayManager=y,this.FeatureList=T,this.presetsStrategyFactory=b,this.siteBuilderPages=I,this.tpaSettings=P,this.showMoreSections=!1;var E=this.applicationState.getPageInFocus();E.managable||this.pageMode?this.flags.removeSpinnerAsStageReady&&this.pageMode&&!E.name?this.applicationState.goToBuilder():p.loaded().then(function(){return e.initialize(M.storyServices.story)}).then(function(){return M.init()}):this.applicationState.goToBuilder()}return e.$inject=["contentManager","modelTree","storyServices","CONSUMER_DIALOGS","applicationState","applicationParameters","tpaService","pagesManager","CcDialogBuilder","$translate","tipManager","TipManagerTypeMap","initService","consumerBiLogger","sectionManager","assistantManager","flags","contentModelTree","dropTargetCalculator","overlayManager","FeatureList","presetsStrategyFactory","siteBuilderPages","tpaSettings"],e.prototype.init=function(){this.storyServices.story?(this.isHomePage=this.pagesManager.isHome(this.storyServices.story.selectedPage),this.contentManager.buildContentMap(),this.selectedOffersMap=this.sectionManager.utilCreateSelectedOffersMap(),this.pageMode?this.initPageMode():this.initAddSectionMode()):this.back()},e.prototype.sectionAlias=function(e){return this.pageMode?e.pageTitle:e.alias||e.id},e.prototype.isSectionSelected=function(e){return this.selectedSection&&e.id===this.selectedSection.id},e.prototype.back=function(){this.applicationState.goToBuilder()},e.prototype.onHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant(this.pageMode?"help.pages.add":"help.section.add"),this.pageMode?this.CONSUMER_DIALOGS.ADD_PAGE_HELP:this.CONSUMER_DIALOGS.ADD_SECTION_HELP)},e.prototype.toggleMoreSections=function(){this.showMoreSections&&(jQuery(".section-list")[0].scrollTop=0),this.showMoreSections=!this.showMoreSections;var e=this.showMoreSections?"see all":"see less";this.consumerBiLogger.sectionManagement.expandSectionsListClick(e)},e.prototype.setSelectedSection=function(e,t){if(!this.isSectionSelected(e)){if(t&&(this.pageMode?this.consumerBiLogger.pagesManager.switchPageTypeInTheAddPagePanel(e.ceType,e.id,e.origin):this.consumerBiLogger.sectionManagement.switchSectionTypeInTheAddSectionPanel(e.ceType,e.id,e.origin)),this.selectedSection=e,this.pageMode||this.tipManager.show(this.TipManagerTypeMap.ADD,e.id),e.isTpa)this.pageMode?(this.nodes=e.widgetNode?[e.widgetNode]:[this.getTpaNode(e.ceType)],this.pageName=e.pageTitle):(e.widgetNode.alias&&!this.flags.wixEvents||(e.widgetNode.alias=e.id),this.nodes=[e.widgetNode]);else if(e.isBlank)this.nodes=[{id:"blank"}];else{this.pageName=e.pageTitle;var i=void 0;if(!this.pageMode){var n=this.storyServices.story.selectedPage;i=this.modelTree.getPageNodeById(n)}var r=this.modelTree.getDataHoldersAndExistingNodesForPage(i,e.ceType,this.isListSection()),a=r.existingNodes,s=this.prepareDrafts(a);this.sectionManager.overrideDraftsContent(s,r.dataHolders),this.nodes=s}this.addSectionStrategy=this.presetsStrategyFactory.createFromNode(this.nodes[0],{strategyMode:o.PresetsStrategyMode.Add})}},e.prototype.isOnPage=function(e){return this.aliasesOnThisPage.indexOf(e.id)>-1},e.prototype.mapTpaWidgetNodesToSectionObject=function(e){var t=this;return r.map(e,function(e){return t.sectionManager.makeTpaSectionObject(e)})},e.prototype.setOriginForBI=function(){r.each(this.recommendedSections,function(e){e.origin="recommended"}),r.each(this.otherSections,function(e){e.origin="others"}),r.each(this.moreSections,function(e){e.origin="expanded list"})},e.prototype.initPageMode=function(){this.addSectionIntent=n.PreviewListIntent.AddPage,this.aliasesOnThisPage=[];var e=this.contentManager.suggestedPages(this.selectedOffersMap[this.applicationParameters.tpaTypes.Stores.type],!0);this.sectionManager.postProcessSuggestedTpaSections(e.pageSuggestions),this.recommendedSections=r.filter(e.pageSuggestions,function(e){return e.isRecommendedPage}),this.otherSections=r.filter(e.pageSuggestions,function(e){return!e.isRecommendedPage}),this.otherSections.push.apply(this.otherSections,this.tpaSettings.getTpaPageSuggestions()),this.moreSections=[],this.enforceVisibleSectionLimit(),this.setOriginForBI(),e.selectedIndex=-1===e.selectedIndex?0:e.selectedIndex,this.setSelectedSection(e.pageSuggestions[e.selectedIndex])},e.prototype.enforceVisibleSectionLimit=function(){var t=Math.min(e.MaxInitialVisibleSections,this.otherSections.length);this.moreSections=this.otherSections.splice(t).concat(this.moreSections)},e.prototype.filterPageSectionsByType=function(e,t,i,n){if(r.find(e.children,function(e){return e.contentElementType===i})||n)for(var o=t.findIndex(function(e){return e.ceType===i});-1!==o;)t.splice(o,1),o=t.findIndex(function(e){return e.ceType===i})},e.prototype.initAddSectionMode=function(){var e=this;if(this.flags.prettyAlgo){var t=this.overlayManager.getDropTargetSection();if(t){var i=new this.FeatureList(t);console.log("pa - section features",i)}}this.addSectionIntent=n.PreviewListIntent.AddSection;var o=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage);this.aliasesOnThisPage=r(o.children).filter(function(e){return!(e.userHidden||!e.alias&&"Contact"!==e.contentElementType||"siteconverter"===e.origin)}).map(function(e){return e.alias||e.contentElementType}).value();var a=this.selectedOffersMap[this.applicationParameters.tpaTypes.Stores.type],s=this.contentManager.suggestedSections(a);(this.filterPageSectionsByType(o,s.suggestions,"Contact"),this.filterPageSectionsByType(o,s.suggestions,"Blog",!0),this.flags.blog2)&&(this.filterPageSectionsByType(o,s.suggestions,"Blog2",!0),this.modelTree.getTpaPageNodeByType(core.TpaTypes.Blog)?this.filterPageSectionsByType(o,s.suggestions,"Blog2_Custom_Feed_Widget",!0):this.filterPageSectionsByType(o,s.suggestions,"Blog_Post_Gallery",!0));this.isHomePage&&this.modifySectionRecommendationsBySelectedOffer(s),this.sectionManager.postProcessSuggestedTpaSections(s.suggestions),s.suggestions=this.flags.lodash4?r.uniqBy(s.suggestions,"id"):r[String("uniq")](s.suggestions,!1,"id"),s.selectedIndex=r.findIndex(s.suggestions,function(t){return!e.contentModelTree.isSectionInTree(t.rawSectionBrief||t)}),s.remainingSuggestedSections=r.filter(s.suggestions,function(t){return!e.contentModelTree.isSectionInTree(t.rawSectionBrief||t)&&t.isRecommendedForPage}).length,this.recommendedSections=s.suggestions.filter(function(e){return e.isRecommendedForPage}),this.otherSections=s.suggestions.filter(function(e){return e.isRecommendedForSite&&!e.isRecommendedForPage}),this.moreSections=s.suggestions.filter(function(e){return!e.isRecommendedForSite}),this.moreSections=r.without.apply(r,[this.moreSections].concat(this.recommendedSections)),this.enforceVisibleSectionLimit(),this.flags.fullSiteBuilder&&this.moveBlogWidgetSectionsFromMoreToOther("blog",this.moreSections,this.otherSections),this.remainingSuggestedSections=s.remainingSuggestedSections,this.setOriginForBI(),this.setSelectedSection(s.suggestions[s.selectedIndex])},e.prototype.moveBlogWidgetSectionsFromMoreToOther=function(e,t,i){var n=this;if(this.modelTree.getPagesNodes().find(function(t){return n.siteBuilderPages.isTpaPage(t)&&n.siteBuilderPages.getTpaType(t).toLowerCase()===e})){var o=t.findIndex(function(e){return"Blog_Post_Gallery"===e.ceType});if(o>-1){var r=i.pop();i.push(t.splice(o,1)[0]),t.unshift(r)}}},e.prototype.modifySectionRecommendationsBySelectedOffer=function(e){this.sectionManager.modifySectionRecommendationsBySelectedOffer(e,this.selectedOffersMap)},e.prototype.getTpaNode=function(e){return this.flags.widgetAppsPanel?this.modelTree.getTpaNodeByType(e):r.find(this.modelTree.getTpaNodes(),{contentElementType:e})},e.prototype.prepareDrafts=function(e){return"Contact"===this.selectedSection.ceType?e.length?e:this.sectionManager.getDefaultContactNodes(this.selectedSection):this.sectionManager.prepareDrafts(this.selectedSection)},e.prototype.isListSection=function(){return this.selectedSection.rawSectionBrief.cardinality>1},e.prototype.reloadAfterAddingSection=function(e){this.pageMode||this.assistantManager.isInActiveTask()?(this.overlayManager.unlockDropTarget(),this.overlayManager.clearDropTarget(),this.overlayManager.lockDropTarget(e),this.pageMode?this.applicationState.goToAddSectionMode():(this.initAddSectionMode(),this.dropTargetCalculator.initDropTarget())):(this.applicationState.setContentFocus(e,"body",!0),this.applicationState.goToEditMode())},e.MaxInitialVisibleSections=12,e.OpeningHours="OpeningHours",e.tpaWidgetAliases={Stores_Slider_Gallery_Widget:"Stores_Slider_Gallery_Widget",Stores_Product_specific_Widget:"Stores_Product_specific_Widget",Blog_Post_Gallery:"from-the-blog",Blog2_Custom_Feed_Widget:"Blog2_Custom_Feed_Widget",GetSubscribers_Widget:"GetSubscribers_Widget",Events_Single:"Events_Single"},e}();t.AddSection=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.getScores=function(e,t,i){var n=this,o=e.filter(function(e){return n.isConditionMatching(e.name,e.conditionA,t)});return o.length?i.map(function(e){var i=o.filter(function(t){return n.isConditionMatching(t.name,t.conditionB,e)}).filter(function(i){return n.isCompareConditionMatching(i.compareFeaturesCondition,t,e)});return{rules:i,score:i.reduce(function(e,t){return e+t.score},0)}}):[]},e.prototype.isConditionMatching=function(e,t,i){var n=function(e){if(Array.isArray(i[e])){if(!i[e].some(function(i){return-1!==t[e].indexOf(i)}))return{value:!1}}else if(t.hasOwnProperty(e)&&t[e]!==i[e])return{value:!1}};for(var o in t){var r=n(o);if("object"==typeof r)return r.value}return!0},e.prototype.isCompareConditionMatching=function(e,t,i){return!e||(console.log("same media",void 0!==e.sameMedia,e.sameMedia,t.isSameMedia(i)!==e.sameMedia),(void 0===e.sameMedia||t.isSameMedia(i)===e.sameMedia)&&(void 0===e.sameTextAlignment||t.isSameTextAlignment(i)===e.sameTextAlignment))},e}();t.prettyAlgoRuleEngine=new n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i(25),r=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u){var p=this;this.$scope=e,this.$mdDialog=t,this.chroma=i,this.colorationUtils=n,this.$filter=o,this.colorType=a,this.CcDialogBuilder=d,this.$translate=u,this.selectedColor=r,this.showReturnButton=!1,this.state=s,this.layout=l,this.onColorSelected=c,this.$scope.$on("$stateChangeStart",function(){p.$mdDialog.destroy()}),n.initialize().then(function(){return p.colors=p.getColors()})}return e.$inject=["$scope","$mdDialog","chroma","colorationUtils","$filter","color","colorType","state","layout","onColorSelected","CcDialogBuilder","$translate"],e.prototype.getColors=function(){var e=this,t=this.colorationUtils.getIndustryMainColors().sort(function(t,i){var n=e.chroma(t).hsl()[2]-e.chroma(i).hsl()[2];return isNaN(n)?-1:n}).map(function(e){return{color:e,origin:"suggestion"}}),i=this.colorationUtils.getRecentColors().filter(function(e){return!t.find(function(t){return t.color===e})}).slice(0,4).reverse().map(function(e){return{color:e,origin:"user created"}}),n=t.concat(i);return n.find(function(t){return t.color===e.selectedColor})||(n.splice(t.length-1,1),n.unshift({color:this.selectedColor,origin:"user created"})),n},Object.defineProperty(e.prototype,"colorTypeName",{get:function(){switch(this.colorType){case o.ePaletteColorPickerStates.mainColor:return this.$translate.instant("design.coloration.generic.main");case o.ePaletteColorPickerStates.secondaryColor:return this.$translate.instant("design.coloration.generic.secondary");case o.ePaletteColorPickerStates.thirdColor:return this.$translate.instant("design.coloration.generic.third");case o.ePaletteColorPickerStates.fourthColor:return this.$translate.instant("design.coloration.generic.fourth");case o.ePaletteColorPickerStates.white:return this.$translate.instant("design.coloration.generic.light");case o.ePaletteColorPickerStates.black:return this.$translate.instant("design.coloration.generic.dark")}},enumerable:!0,configurable:!0}),e.prototype.getParagraph=function(){if(angular.isUndefined(this._paragraph)){var e=void 0;switch(this.colorType){case o.ePaletteColorPickerStates.white:e=this.$filter("translate")("design.coloration.generic.light"),this._paragraph=this.$filter("translate")("design.coloration.palettecolordialog.paragrpah",{colorType:e});break;case o.ePaletteColorPickerStates.black:e=this.$filter("translate")("design.coloration.generic.dark"),this._paragraph=this.$filter("translate")("design.coloration.palettecolordialog.paragrpah",{colorType:e});break;default:this._paragraph=""}}return this._paragraph},e.prototype.isAdvancedMode=function(){return this.state===n.ADVANCED},e.prototype.onReturn=function(){this.state=n.NORMAL,this.showReturnButton=!1},e.prototype.onClose=function(){this.CcDialogBuilder.hide()},e.prototype.colorSelected=function(e){this.onColorSelected(),this.CcDialogBuilder.hide(e),this.selectedColor=e.color,this.isAdvancedMode()&&this.colorationUtils.addColorToRecent(e.color)},e.prototype.placeholderClick=function(){this.state=n.ADVANCED,this.showReturnButton=!0},e}();t.PaletteColorDialog=r,function(e){e[e.NORMAL=0]="NORMAL",e[e.ADVANCED=1]="ADVANCED"}(n=t.ePaletteColorDialogStates||(t.ePaletteColorDialogStates={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.steps=[],this.toString=function(){return e.steps.map(function(e){return e.name}).join(" => ")}}return e.prototype.with=function(t){this.steps.push({name:t,start:e.getTimestamp()})},e.prototype.without=function(e){var t=this.lastIndexOf(e);t>=0&&this.steps.splice(t,1)},e.prototype.durationOf=function(t){var i=this.lastIndexOf(t);return i>=0?Math.round(e.getTimestamp()-this.steps[i].start):-1},e.prototype.clear=function(){this.steps=[]},e.prototype.lastIndexOf=function(e){for(var t=this.steps.length-1;t>=0;t--)if(this.steps[t].name===e)return t;return-1},e.getTimestamp="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()},e}();t.MonitoringSteps=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.createStoryIdsKey=function(e){return e+"siteIds"},e}();t.localStorageUtils=new n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.isActive=!1}return Object.defineProperty(e.prototype,"isShown",{get:function(){return this.isActive},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.isActive=!0},e.prototype.stop=function(){this.isActive=!1},e}();t.preloaderService=new n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o){this.FeatureList=e,this.Solution=t,this.layoutSolver=i,this.storyServices=n,this.applicationState=o,this.storyServices.onRenderedPart(this.renderedPartHandler.bind(this)),this._featureListPerPage=new Map}return e.$inject=["FeatureList","Solution","layoutSolver","storyServices","applicationState"],e.prototype._calcPageFeatures=function(e){var t=this,i=this.layoutSolver.getPartSolutions("body",e).getSelectedSolution(),o=this.Solution.calculateListSpans(i),r=[];return n.each(o,function(e){r=r.concat(new t.FeatureList(e).mediaObjects)}),{pageId:e,allMedia:r}},e.prototype._pageFeatures=function(e){return this.applicationState.isPagePrettyRulesCached?(this._featureListPerPage.get(e)||this._featureListPerPage.set(e,this._calcPageFeatures(e)),this._featureListPerPage.get(e)):this._calcPageFeatures(e)},e.prototype.renderedPartHandler=function(e,t,i,n,o,r){this._featureListPerPage.delete(o)},e.prototype.getPatternList=function(e){return n.filter(this._pageFeatures(e).allMedia,function(e){return"pattern"===e.mediaType})},e.prototype.hasAnyPattern=function(e){return this.getPatternList(e).length>0},e.prototype.getImageList=function(e){return n.filter(this._pageFeatures(e).allMedia,function(e){return"image"===e.mediaType})},e.prototype.getVideoList=function(e){return n.filter(this._pageFeatures(e).allMedia,function(e){return"video"===e.mediaType})},e}();t.PageFeatureDetector=o,function(e){e[e.rulesOff=1]="rulesOff",e[e.ruleOnNoCaching=2]="ruleOnNoCaching",e[e.rulesOnAndCaching=3]="rulesOnAndCaching"}(t.ePrettyPageRulesMode||(t.ePrettyPageRulesMode={})),angular.module("siteGeneratorStaticsConsumerAppInternal").service("PageFeatureList",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Keep=0]="Keep",e[e.Clear=1]="Clear",e[e.Fill=2]="Fill"}(t.MatchingPolicyState||(t.MatchingPolicyState={})),t.Currencies={ILS:"ILS",AUD:"AUD",BRL:"BRL",GBP:"GBP",CAD:"CAD",CZK:"CZK",DKK:"DKK",EUR:"EUR",HKD:"HKD",HUF:"HUF",JPY:"JPY",MXN:"MXN",TWD:"TWD",NZD:"NZD",NOK:"NOK",PHP:"PHP",PLN:"PLN",RUB:"RUB",SGD:"SGD",SEK:"SEK",CHF:"CHF",THB:"THB",USD:"USD"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t){this.siteConverterConf=e,this.flags=t,this.scoringMethods=[{scoringCriterion:"stretch",scoringMethod:this.getStretchScore},{scoringCriterion:"circular",scoringMethod:this.getCircleMediaScore},{scoringCriterion:"fitMode",scoringMethod:this.getFitModeScore}]}return e.prototype.calculateScore=function(e,t){return this.node=e,this.doAllMediaContainFaces=this.areAllMediaContainFaces(e),this.scoreObject(this.scoringMethods.concat(t))},e.prototype.scoreObject=function(e){var t=this;return e.reduce(function(e,i){var n=i.scoringCriterion,o=i.scoringMethod.call(t);return e.uglyScore[n]=o.uglyScore,o.debug&&(e.uglyScoreDebug[n]=o.debug),e},{uglyScore:{},uglyScoreDebug:{}})},e.prototype.getCircleMediaScore=function(){var e=0;return!this.doAllMediaContainFaces&&this.isCircularMedia()&&(e=+this.flags.circularPresetPenalty||this.siteConverterConf.SCORING.circularPreset.penalty),{uglyScore:e,debug:{doAllMediaContainFaces:this.doAllMediaContainFaces}}},e.prototype.getFitModeScore=function(){var e=+this.flags.fitModePenalty||this.siteConverterConf.SCORING.fitMode.penalty;return{uglyScore:this.isFitMode()?e:0}},e.prototype.getNodeMediaDimensions=function(e){return n(e.contentElement.getValuesByMediaType().image).filter(function(e){return e}).map(function(e){return{width:e.width,height:e.height}}).first()},e.prototype.normalizeScore=function(e,t,i){return i>t&&e>=i||t>i&&e<=i?1:i>t&&e<=t||t>i&&e>=t?0:i>t?(e-t)/(i-t):t>i?1-(e-i)/(t-i):0},e.prototype.normalizeScoreNoCap=function(e,t,i){return i>t?(e-t)/(i-t):t>i?1-(e-i)/(t-i):0},e.prototype.areAllMediaContainFaces=function(e){var t=e.children.slice(1,-1).map(function(e){return e.contentElement.getMediaField().value[0]}).filter(function(e){return!!e});return!(!t.length||!t.every(function(e){return e.fileInput&&e.fileInput.face&&e.fileInput.face.length}))},e}();t.ScoringCalculatorBase=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),r=function(e){function t(t,i,n,o,r){var a=e.call(this,t,i)||this;return a.presetListItemFeatureDetector=n,a.presetFeatureDetector=o,a.applicationParameters=r,a.presetScoringMethods=[{scoringCriterion:"cardinality",scoringMethod:a.getListCardinalityScore},{scoringCriterion:"priority",scoringMethod:a.getPriorityScore}],a}return n(t,e),t.prototype.innerGetScore=function(e,t,i){return void 0===i&&(i=[]),this.presetDetails=e,this.groupItems=this.presetDetails.preset.data.groups.filter(function(e){return!e.isHeader&&!e.isFooter}),this.calculateScore(t,this.presetScoringMethods.concat(i))},t.prototype.getListCardinalityScore=function(){var e,t;return this.node.isList()?(t=this.getItemsInRow(),e=this.normalizeScore(t,4,1)*this.siteConverterConf.SCORING.cardinality.presetPenalty):e=0,{uglyScore:e,debug:{itemsInRow:t}}},t.prototype.getStretchScore=function(){var e=this,t=0;if(this.node.isList()){var i=this.node.children.map(function(t){return e.getNodeMediaDimensions(t)}).filter(function(e){return e}).map(function(e){return e.width});t=(this.flags.lodash4?o.strictMinBy:o.min)(i)}else t=this.getNodeMediaDimensions(this.node).width;var n=this.getPresetMediaWidth(this.presetDetails.preset.data),r=t/n,a=this.siteConverterConf.SCORING.widthStretch;return{uglyScore:r>=a.scale.good?this.normalizeScoreNoCap(r,a.scale.good,a.scale.badHigh)*a.penalty:this.normalizeScoreNoCap(r,a.scale.good,a.scale.badLow)*a.penalty,debug:{presetMediaWidth:n,nodeMediaMinWidth:t,widthStretchRatio:r}}},t.prototype.getPriorityScore=function(){var e=this.getMinPriority(),t=this.getMaxPriority(),i=this.presetDetails.preset.data.priority[this.node.contentElementType],n=+this.flags.priorityPenalty||this.siteConverterConf.SCORING.priority.penalty;return{uglyScore:this.normalizeScore(i,e,t)*n,debug:{minPriority:e,maxPriority:t,priority:i}}},t.prototype.getItemsInRow=function(){return this.presetDetails.preset.data.itemsInRow},t.prototype.isCircularMedia=function(){return this.node.isList()&&this.presetListItemFeatureDetector.isCircularImage(this.presetDetails)||this.presetFeatureDetector.isCircularImage(this.presetDetails)},t.prototype.isFitMode=function(){return this.presetDetails.fitMode},t.prototype.getPresetMediaWidth=function(e){var t=this.groupItems.map(function(e){return e.layouts[0].leId})[0].match(/m(\d{1,2})/);if(t&&t[1]){var i=this.applicationParameters.getPixelsFromGridUnits(t[1]);return e.isList&&e.originalItemsInRow&&(i*=e.originalItemsInRow/e.itemsInRow),i}},t}(i(181).ScoringCalculatorBase);t.PresetScoringCalculator=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,r=i(4),a=i(2),s=i(1);!function(e){e[e.ISSUE_MUTED=0]="ISSUE_MUTED",e[e.ISSUE_CLOSED=1]="ISSUE_CLOSED",e[e.ISSUE_CLOSED_VIA_TOUR=2]="ISSUE_CLOSED_VIA_TOUR",e[e.NONE=3]="NONE"}(n||(n={})),function(e){e[e.FIRST_TIME_REQUEST=0]="FIRST_TIME_REQUEST",e[e.SECOND_TIME_REQUEST=1]="SECOND_TIME_REQUEST"}(o||(o={}));var l=function(){function e(t,i,n,o,r,s,l){var c=this;this.smartAssistMenuService=t,this.SmartAssistManager=i,this.consumerBiLogger=n,this.assistantTaskFetcher=o,this.$rootScope=r,this.publishService=s,this.flags=l,this.selectedTabId=this.getStartingTab(),l.headlessApi||(this.initiateSmartAssistTabData(),this.initiateSmartAsistTourCallbaks(),this.unsubscribe=a.PubSub.subscribe(a.events.SMART_ASSIST_NUMBER_CHANGED,function(t){t.new>t.old&&c.setSelectedTab(e.TAB_ID.SMART_ASSIST)}))}return e.$inject=["smartAssistMenuService","SmartAssistManager","consumerBiLogger","assistantTaskFetcher","$rootScope","publishService","flags"],e.prototype.tabListOpened=function(){this.isRequestedAfterLastIssueWasSolved()&&this.setTabAfterLastSmartAssistIssueClosed()},e.prototype.getSelectedTab=function(){return this.selectedTabId},e.prototype.selectBucketListTab=function(t){return void 0===t&&(t=s.BIOrigins.SwitchTab),this.onTabSelectedManually(e.TAB_ID.BUCKET_LIST,t),e.TAB_ID.BUCKET_LIST},e.prototype.selectSmartAssistTab=function(){return this.onTabSelectedManually(e.TAB_ID.SMART_ASSIST,s.BIOrigins.SwitchTab),e.TAB_ID.SMART_ASSIST},e.prototype.setSelectedTab=function(e){this.selectedTabId=e},e.prototype.isRequestedAfterLastIssueWasSolved=function(){return this.smartAssistTabData.lastIssueClosedReson!==n.NONE},e.prototype.initiateSmartAsistTourCallbaks=function(){var e=this;this.smartAssistTabData.issueClosedCallbackUnSubscribe=a.PubSub.subscribe(a.events.SMART_ASSIST_ISSUES_CLOSED,function(){return e.issueClosed(!1)}),this.defineCallbacksToCloseIssueEventWhenTourIsOpen(),this.defineCallbacksToCloseIssueEventWhenTourIsClosed(),this.defineCallbacksForMuteIssue()},e.prototype.defineCallbacksForMuteIssue=function(){this.enableMuteLogicWhenMuneOpen(),this.disableMuteLogicWhenMuneClose()},e.prototype.enableMuteLogicWhenMuneOpen=function(){var e=this;this.$rootScope.$on(r.AssistantAction.EVENTS.OPEN_MENU,function(){e.smartAssistTabData.muteIssueCallbackUnSubscribe=a.PubSub.subscribe(a.events.SMART_ASSIST_ISSUES_MUTED,function(){return e.issueMuted()})})},e.prototype.disableMuteLogicWhenMuneClose=function(){var e=this;this.$rootScope.$on(r.AssistantAction.EVENTS.CLOSE_MENU,function(){e.smartAssistTabData.muteIssueCallbackUnSubscribe&&e.smartAssistTabData.muteIssueCallbackUnSubscribe()})},e.prototype.defineCallbacksToCloseIssueEventWhenTourIsOpen=function(){var e=this;this.$rootScope.$on(r.AssistantAction.EVENTS.TASK_START,function(){e.smartAssistTabData.issueClosedCallbackUnSubscribe&&e.smartAssistTabData.issueClosedCallbackUnSubscribe(),e.smartAssistTabData.issueClosedCallbackUnSubscribe=a.PubSub.subscribe(a.events.SMART_ASSIST_ISSUES_CLOSED,function(){return e.issueClosed(!0)})})},e.prototype.defineCallbacksToCloseIssueEventWhenTourIsClosed=function(){var e=this;[r.AssistantAction.EVENTS.TASK_COMPLETE,r.AssistantAction.EVENTS.TASK_QUIT,r.AssistantAction.EVENTS.TASK_SKIP,r.AssistantAction.EVENTS.TASK_TIMEOUT].forEach(function(t){e.$rootScope.$on(t,function(){e.smartAssistTabData.issueClosedCallbackUnSubscribe&&e.smartAssistTabData.issueClosedCallbackUnSubscribe(),e.smartAssistTabData.issueClosedCallbackUnSubscribe=a.PubSub.subscribe(a.events.SMART_ASSIST_ISSUES_CLOSED,function(){return e.issueClosed(!1)})})})},e.prototype.issueClosed=function(e){0===this.smartAssistMenuService.getIssues().length&&(this.smartAssistTabData.lastIssueClosedReson=e?n.ISSUE_CLOSED_VIA_TOUR:n.ISSUE_CLOSED)},e.prototype.issueMuted=function(){0===this.smartAssistMenuService.getIssues().length&&(this.smartAssistTabData.lastIssueClosedReson=n.ISSUE_MUTED)},e.prototype.getStartingTab=function(){return this.smartAssistMenuService.shouldDisplayEmptyState()?e.TAB_ID.BUCKET_LIST:e.TAB_ID.SMART_ASSIST},e.prototype.isLastIssueClosedViaTour=function(){return this.smartAssistTabData.lastIssueClosedReson===n.ISSUE_CLOSED_VIA_TOUR},e.prototype.isTabRequestAfterIssueClosedViaTourFirstTime=function(){return this.smartAssistTabData.lastIssueClosedViaTourDisplayStatus===o.FIRST_TIME_REQUEST},e.prototype.setTabAfterLastSmartAssistIssueClosed=function(){this.isLastIssueClosedViaTour()&&this.isTabRequestAfterIssueClosedViaTourFirstTime()?(this.smartAssistTabData.lastIssueClosedViaTourDisplayStatus=o.SECOND_TIME_REQUEST,this.selectedTabId=e.TAB_ID.SMART_ASSIST):(this.initiateSmartAssistTabDataLastClosedIssue(),this.selectedTabId=e.TAB_ID.BUCKET_LIST)},e.prototype.initiateSmartAssistTabData=function(){this.smartAssistTabData={lastIssueClosedReson:n.NONE,lastIssueClosedViaTourDisplayStatus:o.FIRST_TIME_REQUEST,issueClosedCallbackUnSubscribe:void 0,muteIssueCallbackUnSubscribe:void 0}},e.prototype.initiateSmartAssistTabDataLastClosedIssue=function(){this.smartAssistTabData.lastIssueClosedReson=n.NONE,this.smartAssistTabData.lastIssueClosedViaTourDisplayStatus=o.FIRST_TIME_REQUEST},e.prototype.onTabSelectedManually=function(e,t){this.selectedTabId!==e&&(this.consumerBiLogger.tour.assistantMenuShown(this.getBIStateForTab(e),t,e),this.setSelectedTab(e))},e.prototype.getBIStateForTab=function(t){switch(t){case e.TAB_ID.SMART_ASSIST:return this.publishService.isSitePublished()?this.smartAssistMenuService.getNumberOfActiveIssues().toString():"empty-state";case e.TAB_ID.BUCKET_LIST:return this.assistantTaskFetcher.getNumOfCompletedTasks().toString();default:return null}},e.prototype.$onDestory=function(){this.unsubscribe&&this.unsubscribe()},e.TAB_ID={BUCKET_LIST:"tours",SMART_ASSIST:"smart-assist"},e}();t.AssistantTabListService=l,angular.module("siteGeneratorTourManagerInternal").service("assistantTabListService",l)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i(4),r=i(0);!function(e){e.ESSENTIALS="ESSENTIALS",e.CHANGE_CONTENT="CHANGE_CONTENT",e.IMPORTED_CONTENT="IMPORTED_CONTENT",e.CHANGE_SITE_DESIGN="CHANGE_SITE_DESIGN",e.CHANGE_SECTION_DESIGN="CHANGE_SECTION_DESIGN",e.PUBLISH="PUBLISH",e.CONNECT_DOMAIN="CONNECT_DOMAIN",e.SEO="SEO"}(n=t.BucketId||(t.BucketId={}));var a=function(){function e(e,t,i,o,r,a,s,l,c,d,u){var p,g=this;this.$translate=e,this.flags=t,this.$rootScope=i,this.assistantManager=o,this.assistantTaskFetcher=r,this.assistantUtils=a,this.storyServices=s,this.previewService=l,this.publishService=c,this.anonService=d,this.smartAssistImportManager=u,this.definitions=((p={})[n.ESSENTIALS]={translationKeys:{name:function(){return g.getEssentialsNameKey()},description:function(){return g.getEssentialsDescriptionKey()}},taskIds:function(){return g.getEssentialsTaskIds()}},p[n.CHANGE_CONTENT]={translationKeys:{name:function(){return"assistant-menu-bucket.change-content.name"},description:function(){return"assistant-menu-bucket.change-content.description"}},taskIds:function(){return["editContentTask","addSectionTask","addPageTask"]}},p[n.IMPORTED_CONTENT]={translationKeys:{name:function(){return"assistant-menu-bucket.imported-content.name"},description:function(){return"assistant-menu-bucket.imported-content.description"}},taskIds:function(){return g.smartAssistImportManager.getImportToursNames()}},p[n.CHANGE_SITE_DESIGN]={translationKeys:{name:function(){return"assistant-menu-bucket.change-site-design.name"},description:function(){return"assistant-menu-bucket.change-site-design.description"}},taskIds:function(){return["entireWebsiteDesignTask","colorDesignTask","fontPanelTask","animationTask"]}},p[n.CHANGE_SECTION_DESIGN]={translationKeys:{name:function(){return"assistant-menu-bucket.change-section-design.name"},description:function(){return"assistant-menu-bucket.change-section-design.description"}},taskIds:function(){return["changeLayoutTask","customizeSectionDesign"]}},p[n.PUBLISH]={translationKeys:{name:function(){return"assistant-menu-bucket.publish.name"},description:function(){return"assistant-menu-bucket.publish.description"}},taskIds:function(){return["publishTask"]}},p[n.CONNECT_DOMAIN]={translationKeys:{name:function(){return"assistant-menu-bucket.connect-domain.name"},description:function(){return"assistant-menu-bucket.connect-domain.description"}},taskIds:function(){return["connectDomainTask"]}},p[n.SEO]={translationKeys:{name:function(){return"assistant-menu-bucket.seo.name"},description:function(){return"assistant-menu-bucket.seo.description"}},taskIds:function(){return g.getSeoTaskIds()}},p),this.setupOnTaskStarted()}return e.$inject=["$translate","flags","$rootScope","assistantManager","assistantTaskFetcher","assistantUtils","storyServices","previewService","publishService","anonService","smartAssistImportManager"],e.prototype.shouldShowImportedContentBucket=function(){return this.flags.textManager&&this.flags.textManagerTours&&r.get(this.storyServices,"story.importedSite.siteAddress")&&this.smartAssistImportManager.isImportToursExist()},e.prototype.setupOnTaskStarted=function(){var e=this;this.$rootScope.$on(o.AssistantAction.EVENTS.TASK_START,function(){var t=e.assistantManager.getActiveTask();if(e.isActiveBucketContainsTask(t.id)){var i=e.findActiveBucketTask();if(i===t)return;i&&e.markTaskAsInactive(i),e.markTaskAsActive(t)}})},e.prototype.bucketName=function(e){return this.$translate.instant(this.definitions[e].translationKeys.name())},e.prototype.bucketDescription=function(e){return this.$translate.instant(this.definitions[e].translationKeys.description())},e.prototype.bucketTaskIds=function(e){return this.definitions[e].taskIds()},e.prototype.onBucketSelected=function(e){this.markBucketAsActive(e)},Object.defineProperty(e.prototype,"bucketsOrder",{get:function(){var e=[n.ESSENTIALS].concat(this.shouldShowImportedContentBucket()?[n.IMPORTED_CONTENT]:[],[n.CHANGE_SITE_DESIGN,n.CHANGE_SECTION_DESIGN,n.CHANGE_CONTENT]);return this.anonService.isAnonymousUser()?e:(!this.isDomainConnected()&&e.push(n.CONNECT_DOMAIN),e.push(n.SEO),e)},enumerable:!0,configurable:!0}),e.prototype.isDomainConnected=function(){return this.flags.stopExcessiveDSCalls?this.publishService.isDomainConnected():this.previewService.isDomainConnected()},Object.defineProperty(e.prototype,"activeBucketId",{get:function(){var e,t=this;return-1!==(e=this.flags.textManager&&this.flags.textManagerTours?this.bucketsOrder.findIndex(function(e){return t.bucketTaskIds(e).some(function(e){var i=t.assistantTaskFetcher.getTask(e);return!i.hidden&&i.currentlyActive})}):this.bucketsOrder.findIndex(function(e){return t.bucketTaskIds(e).some(function(e){return t.assistantTaskFetcher.getTask(e).currentlyActive})}))?this.bucketsOrder[e]:this.bucketsOrder[0]},enumerable:!0,configurable:!0}),e.prototype.markBucketAsActive=function(e){var t=this.bucketTaskIds(e),i=this.assistantTaskFetcher.getTask(t[0]),n=this.findActiveBucketTask();n&&this.markTaskAsInactive(n),this.markTaskAsActive(i)},e.prototype.markTaskAsActive=function(e){e.currentlyActive=!0,this.assistantUtils.saveTaskData(e)},e.prototype.markTaskAsInactive=function(e){e.currentlyActive=!1,this.assistantUtils.saveTaskData(e)},e.prototype.findActiveBucketTask=function(){var e=this,t=this.activeBucketId;return this.bucketTaskIds(t).map(function(t){return e.assistantTaskFetcher.getTask(t)}).find(function(e){return e.currentlyActive})},e.prototype.isActiveBucketContainsTask=function(e){var t=this,i=this.activeBucketId;return void 0!==this.bucketTaskIds(i).map(function(e){return t.assistantTaskFetcher.getTask(e)}).find(function(t){return t.id===e})},e.prototype.getSeoTaskIds=function(){return["pageSEOTask","seoWizTask"]},e.prototype.getEssentialsNameKey=function(){return"assistant-menu-bucket.essentials.name"},e.prototype.getEssentialsDescriptionKey=function(){return this.assistantTaskFetcher.getTpaTaskIds().length>0?"assistant-menu-bucket.essentials.description-with-tpa":"assistant-menu-bucket.essentials.description-without-tpa"},e.prototype.getEssentialsTaskIds=function(){var e=["previewTask"];return this.anonService.isAnonymousUser()?e:(e.push("publishTask"),e.concat(this.assistantTaskFetcher.getTpaTaskIds()))},e}();t.AssistantMenuBucketService=a,angular.module("siteGeneratorTourManagerInternal").service("assistantMenuBucketService",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);t.UNLINKED_BUTTON_ACTION={loadPage:0,openNodeEditorPanel:1,initial:2,buttonIsNowHidden:3,linking:4,linkingDone:5,buttonIsNowLinked:6},t.UnlinkedButtonTaskBI={assistType:"smart assist",description:"unlinkedButtonTask"};var o=function(e){var i=e.isLoadPage,o=e.onLoadPage,r=e.isPageLoaded,a=e.onOpenNodeEditPanel,s=e.onLinkViaTour,l=e.onLinkManually,c=e.onHideViaTour,d=e.onLinkingProcessComplete,u=e.nodeId,p=e.isItemOfList,g=(new n.AssistantAction).withConditionalConf().customCondition(i,(new n.AssistantAction).withCallbacks().onEnter(o).build()).and.withBehaviors().thatStartsAutoplayOnEnter().build(),h=(new n.AssistantAction).withConditionalConf().customCondition(i,(new n.AssistantAction).withBehaviors().thatWaitsForExpression(r).build()).and.withCallbacks().onEnter(a).and.withBehaviors().thatStopsAutoplayOnExit().build(),m=(new n.AssistantAction).withTooltip().withContent("smart-assist.tour.unlinked-button.link-or-hide-step.content").thatOpensRight().withButton("hide").label("smart-assist.tour.unlinked-button.link-or-hide-step.hide-button-text").callback(c).onClickGoTo(t.UNLINKED_BUTTON_ACTION.buttonIsNowHidden).withButton("link").label("smart-assist.tour.unlinked-button.link-or-hide-step.link-button-text").callback(s).onClickGoTo(t.UNLINKED_BUTTON_ACTION.linking).and.withBehaviors().thatDelays(700).and.withConditionalConf().customCondition(p,(new n.AssistantAction).withTooltip().withContent("smart-assist.tour.unlinked-button.link-or-hide-step.content-for-list-items").withButton("hide").label("smart-assist.tour.unlinked-button.link-or-hide-step.hide-button-text-for-list-items").build()).and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(n.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD(u)).and.withTriggers().goToOnElementClick(n.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD_TOGGLE_SHOW_BUTTON(u),t.UNLINKED_BUTTON_ACTION.buttonIsNowHidden).goToOnElementClick(n.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD_LINK_BUTTON(u),t.UNLINKED_BUTTON_ACTION.linking,void 0,void 0,l).stopOnBackdropClick().and.withBI().withDescription("Add a link to the button or hide it from this section.").build(),f=(new n.AssistantAction).withTooltip().withSuccessMessage().withContent("smart-assist.tour.unlinked-button.button-hidden-step.content").thatOpensRight().withButton("done").label("smart-assist.tour.unlinked-button.button-hidden-step.done-button-text").completeOnClick().and.withConditionalConf().customCondition(p,(new n.AssistantAction).withTooltip().withContent("smart-assist.tour.unlinked-button.button-hidden-step.content-for-list-items").build()).and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(n.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD(u)).and.withTriggers().completeOnBackdropClick().completeOnElementClick(n.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD(u)).and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD(u)).and.withBI().withDescription("This button is hidden.").build(),v=(new n.AssistantAction).withTooltip().withContent("smart-assist.tour.unlinked-button.linking-step.content").and.withBackdrop().thatIsInvisible().and.withTriggers().goToOnElementClick(n.AssistantAction.HOOKS.BACKDROP,t.UNLINKED_BUTTON_ACTION.initial).goToOnElementClick(n.AssistantAction.HOOKS.LINK_PANEL_X,t.UNLINKED_BUTTON_ACTION.initial).goToOnElementClick(n.AssistantAction.HOOKS.LINK_PANEL_CANCEL,t.UNLINKED_BUTTON_ACTION.initial).nextOnElementClick(n.AssistantAction.HOOKS.LINK_PANEL_DONE).build(),S=(new n.AssistantAction).withCallbacks().onEnter(d).build(),y=(new n.AssistantAction).withTooltip().withSuccessMessage().withContent("smart-assist.tour.unlinked-button.button-linked-step.content").thatOpensRight().withButton("done").label("smart-assist.tour.unlinked-button.button-linked-step.done-button-text").completeOnClick().and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(n.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD(u)).and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD(u)).and.withTriggers().completeOnBackdropClick().completeOnElementClick(n.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD(u)).and.withBI().withDescription("Nice! This button is linked.").build();return{id:"unlinkedButtonTask",label:"unlinkedButtonTask",BI:t.UnlinkedButtonTaskBI,actions:[g,h,m,f,v,S,y],customData:{editMode:"smart assist"}}};angular.module("siteGeneratorTourManagerInternal").factory("unlinkedButtonTaskConf",function(){return o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);t.SOCIAL_DEFAULT_LINKS_ACTION={loadPage:0,loadEditPanel:1,hideOrUpdate:2,loadSocialsPanel:3,linkSocials:4,socialsLinked:5,socialsArehidden:6,hideSocialsGlobally:7,socialsAreGloballyHidden:8,someSocialsCouldntBeHidden:9},t.SocialDefaultLinksTaskBI={assistType:"smart assist",description:"socialDefaultLinksTask"};var o=function(e){var i=e.onLoadEditPanel,o=e.onOpenSocialsPanel,r=e.onLinkActionStarted,a=e.onLinkActionCompleted,s=e.isLoadPage,l=e.isPageLoaded,c=e.onLoadPage,d=e.isSocialsAppearInMultipleSections,u=e.onHideSocialsGlobally,p=e.someSectionsHaveOnlySocialsNode,g=e.currentSectionHaveOnlySocialsNode,h=(new n.AssistantAction).withConditionalConf().customCondition(s,(new n.AssistantAction).withCallbacks().onEnter(c).build()).and.withBehaviors().thatStartsAutoplayOnEnter().build(),m=(new n.AssistantAction).withConditionalConf().customCondition(s,(new n.AssistantAction).withBehaviors().thatWaitsForExpression(l).build()).and.withCallbacks().onEnter(i).and.withBehaviors().thatStopsAutoplayOnExit().build(),f=(new n.AssistantAction).withTooltip().withContent("smart-assist.tour.socials-default-link.hide-or-update-step.content").thatOpensRight().withButton("update-links").label("smart-assist.tour.socials-default-link.hide-or-update-step.update-links-button").onClickGoTo(t.SOCIAL_DEFAULT_LINKS_ACTION.loadSocialsPanel).callback(r).withButton("hide-icons").label("smart-assist.tour.socials-default-link.hide-or-update-step.hide-icons-button").callback(u).and.withBehaviors().thatDelays(700).and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(n.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withTriggers().goToOnElementClick(n.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD,t.SOCIAL_DEFAULT_LINKS_ACTION.linkSocials,void 0,void 0,r).stopOnBackdropClick().and.withConditionalConf().customCondition(p,(new n.AssistantAction).withTooltip().withButton("hide-icons").onClickGoTo(t.SOCIAL_DEFAULT_LINKS_ACTION.someSocialsCouldntBeHidden).build(),(new n.AssistantAction).withTooltip().withButton("hide-icons").onClickGoTo(t.SOCIAL_DEFAULT_LINKS_ACTION.socialsAreGloballyHidden).build()).customCondition(g,(new n.AssistantAction).withTriggers().completeOnElementClick(n.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD_TOGGLE).and.withBehaviors().thatAllowsDialogInterruptions().build(),(new n.AssistantAction).withTriggers().goToOnElementClick(n.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD_TOGGLE,t.SOCIAL_DEFAULT_LINKS_ACTION.socialsArehidden).build()).and.withBI().withDescription("Connect your social accounts so people can follow you.").build(),v=(new n.AssistantAction).withCallbacks().onEnter(o).and.withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().build(),S=(new n.AssistantAction).withTooltip().withContent("smart-assist.tour.socials-default-link.link-socials-step.content").thatOpensRight().and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(n.AssistantAction.HOOKS.SOCIAL_PANEL_LIST).and.withCustomStage().withAdditionalHighlight(n.AssistantAction.HOOKS.SOCIAL_PANEL_HEADER).withAdditionalHighlight(n.AssistantAction.HOOKS.SOCIAL_PANEL_CONTENT).and.withTriggers().stopOnBackdropClick().stopOnElementClick(n.AssistantAction.HOOKS.SOCIAL_PANEL_X).and.withCallbacks().onExit(a).and.withBI().withDescription("Paste your social links here, instead of the Wix profiles, delete or add socials.").build(),y=(new n.AssistantAction).withTooltip().withSuccessMessage().withContent("smart-assist.tour.socials-default-link.socials-linked-step.content").thatOpensRight().withButton("done").label("smart-assist.tour.socials-default-link.socials-linked-step.done-button-text").completeOnClick().and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(n.AssistantAction.HOOKS.SOCIAL_PANEL_LIST).and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.SOCIAL_PANEL_LIST).and.withTriggers().completeOnBackdropClick().completeOnElementClick(n.AssistantAction.HOOKS.SOCIAL_PANEL_LIST).and.withBI().withDescription("Nice! All your accounts are connected.").build(),T=(new n.AssistantAction).withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().and.withConditionalConf().customCondition(d,(new n.AssistantAction).withBehaviors().thatGoesToIndexOnAutoPlay(t.SOCIAL_DEFAULT_LINKS_ACTION.hideSocialsGlobally).build(),(new n.AssistantAction).withBehaviors().thatGoesToIndexOnAutoPlay(t.SOCIAL_DEFAULT_LINKS_ACTION.socialsAreGloballyHidden).build()).build(),b=(new n.AssistantAction).withTooltip().withSuccessMessage().withContent("smart-assist.tour.socials-default-link.hide-socials-globally.content").thatOpensRight().withButton("hide-all").label("smart-assist.tour.socials-default-link.hide-socials-globally.hide-all-button-text").callback(u).and.withConditionalConf().customCondition(p,(new n.AssistantAction).withTooltip().withButton("hide-all").onClickGoTo(t.SOCIAL_DEFAULT_LINKS_ACTION.someSocialsCouldntBeHidden).build(),(new n.AssistantAction).withTooltip().withButton("hide-all").onClickGoTo(t.SOCIAL_DEFAULT_LINKS_ACTION.socialsAreGloballyHidden).build()).and.thatAttachesTo().hook(n.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withBackdrop().thatIsInvisible().and.withTriggers().goToOnElementClick(n.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD_TOGGLE,t.SOCIAL_DEFAULT_LINKS_ACTION.hideOrUpdate).stopOnBackdropClick().and.withBI().withDescription("Social icons are hidden from this section. You can hide all the social icons from your website in a click").build(),I=(new n.AssistantAction).withTooltip().withContent("smart-assist.tour.socials-default-link.socials-globally-hidden.content").withSuccessMessage().thatOpensRight().withButton("done").label("smart-assist.tour.socials-default-link.socials-globally-hidden.done-button-text").completeOnClick().and.thatAttachesTo().hook(n.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withBackdrop().thatIsInvisible().and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withTriggers().completeOnBackdropClick().completeOnElementClick(n.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withBI().withDescription("Social icons are hidden").build(),P=(new n.AssistantAction).withTooltip().withContent("smart-assist.tour.socials-default-link.socials-cant-be-hidden-step.content").thatOpensRight().withButton("done").label("smart-assist.tour.socials-default-link.socials-cant-be-hidden-step.done-button-text").completeOnClick().and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(n.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withTriggers().completeOnBackdropClick().completeOnElementClick(n.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withBI().withDescription("Some social panels cant be hidden").build();return{id:"socialDefaultLinksTask",label:"socialDefaultLinksTask",BI:t.SocialDefaultLinksTaskBI,actions:[h,m,f,v,S,y,T,b,I,P],customData:{editMode:"smart assist"}}};angular.module("siteGeneratorTourManagerInternal").factory("socialDefaultLinksTaskConf",function(){return o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(64),o=i(6),r=i(188),a=i(189),s=i(1),l=i(0),c=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B){var k=this;this.$element=e,this.$rootScope=t,this.initService=i,this.spinnerService=n,this.$state=o,this.applicationState=r,this.flags=a,this.stageStyler=s,this.assistantManager=l,this.importImagesAssistantTask=c,this.importContentAssistantTask=d,this.$timeout=u,this.storyServices=p,this.$window=g,this.publishService=h,this.$q=m,this.cardsPanels=f,this.exitNotification=v,this.signUpNotifier=S,this.anonService=y,this.clientTopology=T,this.mergedHeaderValidator=b,this.wizardService=I,this.importSiteContent=P,this.initBI=M,this.initContent=E,this.colorationUtils=w,this.consumerDialogs=C,this.smartAssistState=A,this.suggestDomainService=L,this.logoExtractionPopupService=B,this.initFinished=!1,this.renderBuilder=!1,this.showBuilder=!1,this.panelWidth=this.flags.cardsToPanels?void 0:0,this.isInPreviewMode=!1,this.$onDestroy=function(){return k.stateChangeWatcher()},this.$postLink=function(){return k.adjustBuilderLayoutOnStateChange(k.$state.$current.data)},this.onStateChange=function(e,t){return k.adjustBuilderLayoutOnStateChange(t.data)},this.isPreview=function(){return k.applicationState.isPreviewDisplay()||k.flags.newTopBar&&k.flags.newPreviewMode&&k.firstTimePreview()},this.shouldShowPreviewTopBar=function(){return k.flags.newPreviewMode&&k.isPreview()&&!k.flags.headlessApiPerf},this.shouldShowTopBar=function(){return!k.isPreview()},this.shouldShowPreviewToggle=function(){return!k.flags.newPreviewMode&&k.isPreview()&&!k.applicationState.previewRevision()},this.isMobilePreviewDisplay=function(){return k.applicationState.isMobilePreviewDisplay()},this.getMobilePreviewUrl=function(){return k.applicationState.mobilePreviewUrl()},this.getMobilePreviewPageId=function(){return k.applicationState.mobilePreviewPageId()},this.firstTimePreview=function(){return k.applicationState.isFirstTimePreview()},this.isPPPSupportPreview=function(){return k.flags.newTopBar&&k.flags.newPreviewMode},this.waitForBuilderState().then(function(e){var n=e.event,o=e.targetState;i.isBuilderValidState()?k.initBuilder():r.goToIntro(),k.onStateChange(n,o);var a=k.flags.cardsToPanels?"$stateChangeSuccess":"$stateChangeStart";k.stateChangeWatcher=t.$on(a,k.onStateChange)}),this.exitNotification.setup(),this.setupMobileEditorTransitions(),this.$timeout(function(){return k.renderBuilder=!0},5e3)}return e.$inject=["$element","$rootScope","initService","spinnerService","$state","applicationState","flags","stageStyler","assistantManager","importImagesAssistantTask","importContentAssistantTask","$timeout","storyServices","$window","publishService","$q","cardsPanels","exitNotification","signUpNotifier","anonService","clientTopology","mergedHeaderValidator","wizardService","importSiteContent","initBI","initContent","colorationUtils","consumerDialogs","smartAssistState","suggestDomainService","logoExtractionPopupService"],e.prototype.shouldBringTopBarToFront=function(){return this.assistantManager.isInActiveTask()&&("animationTask"===this.assistantManager.getActiveTask().id||this.isPPPSupportPreview()&&"welcomeTask"===this.assistantManager.getActiveTask().id&&this.firstTimePreview())},e.prototype.setupMobileEditorTransitions=function(){var e=this;this.$rootScope.$on("switchEditModeStart",function(t,i,n){e.startLoadingAnimation(n)}),this.$rootScope.$on("switchEditModeEnd",function(){e.$timeout(function(){return e.finishLoadingAnimation()},a.ProgressBar.PROGRESS_BAR_FINISH_LOADING_DURATION)})},e.prototype.startLoadingAnimation=function(e){this.$element.addClass("edit-mode-transition"),this.$element.addClass(e?"mobile-dimensions":"desktop-dimensions"),this.applicationState.isInMobileEditMode()&&e||this.$element.addClass("builder-panel-fade-out")},e.prototype.finishLoadingAnimation=function(){this.$element.removeClass("edit-mode-transition mobile-dimensions desktop-dimensions builder-panel-fade-out")},e.prototype.waitForBuilderState=function(){var e=this,t=this.$q.defer();if(this.isBuilderState(this.$state.$current))t.resolve({event:{},targetState:this.$state.$current});else var i=this.$rootScope.$on("$stateChangeSuccess",function(n,o){e.isBuilderState(o)&&(i(),t.resolve({event:n,targetState:o}))});return t.promise},e.prototype.isBuilderState=function(e){return e&&e.name.startsWith(n.BUILDER_STATES.BUILDER)},e.prototype.adjustBuilderLayoutOnStateChange=function(e){this.flags.cardsToPanels||(this.panelWidth=0),e&&(this.applicationState.isInMobileEditMode()&&e.mobilePanelWidth?this.panelWidth=e.mobilePanelWidth:this.cardsPanels.isPanelShouldBeCard()?this.panelWidth=o.CARD_WIDTH:e.panelWidth&&(this.panelWidth=e.panelWidth))},e.prototype.initBuilder=function(){var e=this;this.signUpNotifier.registerWindowFocusListener(),this.renderBuilder=!0,this.showBuilder=!0,this.flags.newPreloader||(this.spinnerService.waitForMe("initBuilder",this.flags.removeSpinnerAsStageReady),this.flags.removeSpinnerAsStageReady&&this.spinnerService.waitForMe("dynamicSpinner")),this.initService.init().then(function(){return e.flags.removeSpinnerAsStageReady&&(e.initFinished=!0),e.colorationUtils.initialize()}).finally(function(){return e.postInit()})},e.prototype.initSiteContent=function(){var e=this;if(this.flags.perfMoveContentInitToPostInit)return this.initBI.reportStart({name:s.BIInitSteps.InitContent,init:!0}),this.initContent.fromStory(this.storyServices.story).then(function(){e.initBI.reportEnd({name:s.BIInitSteps.InitContent,init:!0})})},e.prototype.initBuilderDone=function(){this.spinnerService.imDone("initBuilder",this.flags.removeSpinnerAsStageReady),"thin"!==l.get(this.storyServices,"story.locale.renderedModel.model.header.mode")&&this.spinnerService.imDone("dynamicSpinner")},e.prototype.postInit=function(){var e=this;this.stageStyler.run(),this.flags.perfMoveInitAssistantToPostInit&&(this.flags.emptyPage||this.initService.initAssistantForExistingSite(),this.smartAssistState.init()),this.initService.stopPreloader(),this.spinnerService.isFirstTime=!1,this.flags.newPreloader||this.initBuilderDone(),this.initSiteContent(),this.initService.isNewSite||this.flags.templateSite||this.assistantManager.openMenu(s.BIOrigins.OnSiteStart),this.flags.moveMediaManagerToPostInit?this.initService.initMediaManager():this.$window.MediaManager&&this.$window.MediaManager.updateSiteMediaToken(this.clientTopology.siteMediaToken),this.flags.mergedHeader&&this.mergedHeaderValidator.init(),this.flags.loadLayoutsLater&&this.wizardService.downloadLayouts(),this.initService.asyncLoadCampaign(),(!this.flags.reduceErrors||this.flags.reduceErrors&&!this.wizardService.activateWhenWelcomeEnds)&&this.initService.listenToRenderChanges(),this.flags.headlessApi&&this.recalcForHeadless().then(function(){e.$window.signalHeadlessReady&&e.$window.signalHeadlessReady()}),this.flags.cardsToPanels&&this.adjustBuilderLayoutOnStateChange(this.$state.current.data),this.flags.textManager&&(this.initService.isNewSite?this.importSiteContent.setNewStoryName(this.initService.newStoryName):this.loadImportedSiteTexts(),this.flags.textManagerTours&&(this.importImagesAssistantTask.init(),this.importContentAssistantTask.init())),this.anonService.isAnonymousUser()&&this.signUpNotifier.startSignUpNotifier(),this.flags.newTopBar&&this.flags.suggestDomain&&this.suggestDomainService.getSuggestedDomains(!0)},e.prototype.loadImportedSiteTexts=function(){if(this.storyServices.story.importedSite){var e=this.storyServices.story.importedSite,t=e.userId,i=e.siteAddress;this.importSiteContent.loadSiteTexts(i,t)}},e.prototype.recalcForHeadless=function(){return this.flags.waas?this.storyServices.calculateAndRenderDesktopAndMobilePages("current"):this.storyServices.calculateAndRenderDesktopAndMobilePages()},e.prototype.showFloatingGotoEditor=function(){return!this.flags.newTopBar&&(!(this.flags.removeSpinnerAsStageReady&&!this.initFinished)&&(this.publishService.isSitePublished()&&!this.applicationState.isInMobileEditMode()))},e.prototype.getTopBarState=function(){var e=this.applicationState.isInDesktopEditMode(),t=this.anonService.isAnonymousUser();return this.isInPreviewMode=this.shouldShowPreviewTopBar(),this.isInPreviewMode?this.isPPPSupportPreview()&&this.firstTimePreview()?r.TopBarStates.PPP_PREVIEW:t?r.TopBarStates.ANON_PREVIEW:r.TopBarStates.PREVIEW:t?e?r.TopBarStates.ANON:r.TopBarStates.ANON_MOBILE:e?r.TopBarStates.DEFAULT:r.TopBarStates.MOBILE},e.ANIMATION_LENGTH=250,e}();t.Builder=c,angular.module("siteGeneratorStaticsConsumerAppInternal").component("builder",{templateUrl:"views/builder.html",controller:c,controllerAs:"$builder"})},function(e,t,i){"use strict";var n,o=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.OLD_TOP_BAR=0]="OLD_TOP_BAR",e[e.DEFAULT=1]="DEFAULT",e[e.MOBILE=2]="MOBILE",e[e.PREVIEW=3]="PREVIEW",e[e.ANON=4]="ANON",e[e.ANON_MOBILE=5]="ANON_MOBILE",e[e.ANON_PREVIEW=6]="ANON_PREVIEW",e[e.PPP_PREVIEW=7]="PPP_PREVIEW"}(n=t.TopBarStates||(t.TopBarStates={}));var r=function(){function e(e,t,i){this.applicationState=e,this.assistantManager=t,this.flags=i,this.ComponentsByMode=new Map,this.init()}return e.$inject=["applicationState","assistantManager","flags"],e.prototype.isTourWithPreviewMode=function(){return this.flags.newTopBar&&this.flags.newPreviewMode&&this.applicationState.isPreviewDisplay()&&this.assistantManager.isInActiveTask()},e.prototype.init=function(){this.ComponentsByMode.set(n.DEFAULT,{pages:!0,pagesDivider:!0,add:!0,design:!0,tpa:!0,tpaDivider:!0,zoom:!1,undoRedo:!0,autoSave:!0,help:!0,settings:!0,upgrade:!0,preview:!0,publish:!this.isTourWithPreviewMode(),account:!1}),this.ComponentsByMode.set(n.MOBILE,o({},this.ComponentsByMode.get(n.DEFAULT),{add:!1,design:!1,tpa:!1,tpaDivider:!1,zoom:!1})),this.ComponentsByMode.set(n.ANON,{pages:!0,pagesDivider:!0,add:!0,design:!0,tpa:!0,tpaDivider:!0,zoom:!1,undoRedo:!0,help:!0,settings:!1,upgrade:!1,preview:!0,anonSave:!0}),this.ComponentsByMode.set(n.ANON_MOBILE,o({},this.ComponentsByMode.get(n.ANON),{add:!1,design:!1,tpa:!1,tpaDivider:!1,zoom:!1})),this.ComponentsByMode.set(n.PREVIEW,{editSite:!0,publish:!this.isTourWithPreviewMode()}),this.ComponentsByMode.set(n.PPP_PREVIEW,{editSite:!0,backButton:!0,message:!0}),this.ComponentsByMode.set(n.ANON_PREVIEW,{editSite:!0,anonSave:!0})},e.prototype.getComponentsByMode=function(e){return this.ComponentsByMode.get(e)||{}},e}();t.TopBarModes=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("topBarModes",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){var n=this;this.$rootScope=e,this.$element=t,this.$timeout=i,this.timeInterval=0,this.timer=void 0,this.width=0,this.$rootScope.$on("switchEditModeStart",function(e,t){n.startLoadingAnimation(t)}),this.$rootScope.$on("switchEditModeEnd",function(){clearInterval(n.timer),n.finishAnimation()})}return e.$inject=["$rootScope","$element","$timeout"],e.prototype.startLoadingAnimation=function(e){this.timeInterval=e,this.width=0,this.$element.children().removeClass("-fade-out"),this.$element.children().css({width:this.width+"%",display:"block"}),this.setAnimation(e)},e.prototype.setAnimation=function(e){var t=this;this.timer=setInterval(function(){t.width>=99?clearInterval(t.timer):(t.width++,t.$element.children().css("width",t.width+"%"))},e/(100-this.width))},e.prototype.finishAnimation=function(){var t=this;this.$element.children().css("width","100%"),this.$timeout(function(){return t.$element.children().addClass("-fade-out")},e.PROGRESS_BAR_FINISH_LOADING_DURATION)},e.PROGRESS_BAR_FINISH_LOADING_DURATION=200,e}();t.ProgressBar=n},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0);t.SectionBackgroundModes={HEADER:"header",LIST:"list",NONE:"none"};var r=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C){this.sectionBackgroundService=e,this.$q=t,this.$stateParams=i,this.applicationState=n,this.nodeFetcher=o,this.storyServices=r,this.patternService=a,this.designKitParameters=s,this.previewColors=l,this.undoRedo=c,this.clientTopology=d,this.consumerMediaUtils=u,this.mediaOrganizeDataAdapter=p,this.consumerBiLoggerHelpers=g,this.overlayManager=h,this.mediaGallery=m,this.simpleSolutionManager=f,this.flags=v,this.consumerBiLogger=S,this.wizardService=y,this.sitePartTypes=T,this.designKit=b,this.PageFeatureList=I,this.$log=P,this.backgroundScrollService=M,this.miscUtils=E,this.modelTree=w,this.modelTreeHelpers=C}return e.$inject=["sectionBackgroundService","$q","$stateParams","applicationState","nodeFetcher","storyServices","patternService","designKitParameters","previewColors","undoRedo","clientTopology","consumerMediaUtils","mediaOrganizeDataAdapter","consumerBiLoggerHelpers","overlayManager","mediaGallery","simpleSolutionManager","flags","consumerBiLogger","wizardService","sitePartTypes","designKit","PageFeatureList","$log","backgroundScrollService","miscUtils","modelTree","modelTreeHelpers"],Object.defineProperty(e.prototype,"mode",{get:function(){switch(this.$stateParams.mode){case"header":return t.SectionBackgroundModes.HEADER;case"list":return t.SectionBackgroundModes.LIST;default:return t.SectionBackgroundModes.NONE}},enumerable:!0,configurable:!0}),e.prototype.getBackgroundIfMedia=function(e){return e&&e.mediaType!==core.BgMediaTypes.COLOR?e:void 0},e.prototype.getBackgroundSingleOrList=function(e,t){if(!this.modelTreeHelpers.isItemOfList(e)){e=this.modelTree.findIdentifyingNode(e);var i=this.getBackgroundIfMedia(this.sectionBackgroundService.getBackground(e,"body",t));return i||this.getBackgroundIfMedia(this.sectionBackgroundService.getBackground(e,"header",t))}},e.prototype.node=function(){return this.nodeFetcher.getCurrentNode()},e.prototype.extractNodeByMode=function(e,i){return i===t.SectionBackgroundModes.HEADER?e.children.find(function(e){return"ListHeader"===e.contentElementType}):i===t.SectionBackgroundModes.LIST?e.children.find(function(e){return"ListFooter"===e.contentElementType}):e},e.prototype.contentElement=function(){var e=o.get(this.extractNodeByMode(this.node(),this.mode),"contentElement");if(!e)throw"there is no contentElement";return e},Object.defineProperty(e.prototype,"selectedBackgroundForCurrentMode",{get:function(){switch(this.mode){case t.SectionBackgroundModes.HEADER:return this.sectionBackgroundService.getBackground(this.node(),"header");default:return this.sectionBackgroundService.getBackground(this.node())}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bgPart",{get:function(){return"header"===this.mode?"header":"body"},enumerable:!0,configurable:!0}),e.prototype.selectedAligment=function(){var e=this.node();return this.sectionBackgroundService.getBackgroundAlignment(e,this.bgPart)},e.prototype.setAligmentOption=function(e){var t=this.node();this.sectionBackgroundService.setBackgroundAlignment(t,e,this.bgPart),this.sectionBackgroundService.updateViewer(t)},e.prototype.setBgBackgroundColors=function(e,t){var i=this,o=this.selectedBackgroundForCurrentMode,r=0,a=t.length;return e.map(function(e){if("pattern"===e.mediaType){var s=void 0;return s=i.isEqual(e,o)?o.backgroundColor:t[r++%a],n({},e,{backgroundColor:s})}return e})},e.prototype.validateBackgroundList=function(e){var t=this;Object.keys(e).forEach(function(i){e[i]&&(e[i]=e[i].filter(function(e){var i=t.validateBackground(e);return i||t.$log.debug("background is not valid",e),i}))})},e.prototype.calculateBackgrounds=function(){var e=this,t=o.pick(this.getBackgroundListForCurrentMode(),["pattern","color"]),i=t.color.slice();this.validateBackgroundList(t);var n=t.pattern,r=this.selectedBackgroundForCurrentMode;n=this.setBgBackgroundColors(n,i);var a=(n=this.moveUsedPatternsToTop(n)).map(function(t){return e.convertOrgToBackgroundObject(t,t.mediaId===r.mediaId)});return a.splice(0,0,a.splice(a.findIndex(function(e){return e.isSelected}),1)[0]),a},e.prototype.getParamsToBI=function(){var e=this.node();if(e)return[e.getContentElementType(),e.alias];this.$log.error("can't get node")},e.prototype.setBackground=function(e){var i=this,n=this.mode===t.SectionBackgroundModes.HEADER?"header":"body",o=[(e||{}).mediaType].concat(this.getParamsToBI(),[this.applicationState.getBackgroundModeForBi()]),r=o[0],a=o[1],s=o[2],l=o[3];return r&&this.consumerBiLogger.sectionDesign.changeBackgroundClick(r,a,s,l),this.sectionBackgroundService.setBackgroundAndUpdateViewer(this.node(),e,n).then(function(){if(i.flags.sectionMedia){var e=i.node();i.backgroundScrollService.setSectionOverrideWithInheritance(e,e.backgroundHasFaces?i.backgroundScrollService.SCROLL_TYPE.NONE:i.backgroundScrollService.getSiteOverride())}r&&i.consumerBiLogger.sectionDesign.changeBackgroundSuccess(r,a,s,l),i.undoRedo.captureOperation()})},e.prototype.createSorter=function(t,i,n){return void 0===n&&(n=e.STRIP_SLIDESHOW),{type:t,count:i,galleryType:n}},e.prototype.getCategory=function(e){return"color"===e.data.type||"pattern"===e.data.type?e.data.type:"media"},e.prototype.getSelectedBackgroundAsThumbnail=function(){var e=this.node();return e&&e.isList()?{headerBg:this.convertSelectedFromApi(this.sectionBackgroundService.getBackground(e,"header"),"header"),bg:this.convertSelectedFromApi(this.sectionBackgroundService.getBackground(e))}:this.convertSelectedFromApi(this.sectionBackgroundService.getBackground(e))},e.prototype.uploadBackground=function(e){var t=this;return e===cc.MediaPreviewType.MultipleImages?this.uploadGallery().then(function(i){return t.handleBgResult(i,e)}):this.uploadSingleMedia(e).then(function(i){return t.handleBgResult(i,e)})},e.prototype.handleBgResult=function(e,t){var i=this,n=this.contentElement(),o=this.getMediaField(n).value;e.data.forEach(function(e){i.convertUsage(e,o),i.normaizeFileUrl(e),t===cc.MediaPreviewType.Video&&i.fixVideoFormat(e)}),e.isChanged&&n&&n.fillValuesByMediaType();var r=this.extractBackground(e,t);return this.convertOrgToBackgroundObject(r,!1)},e.prototype.fixVideoFormat=function(e){"file"===e.relativeUri&&(e.fileUrl=e.fileBaseUrl,e.relativeUri=e.id)},e.prototype.normaizeFileUrl=function(e){e.fileUrl||(e.fileUrl="media/"+e.relativeUri)},e.prototype.convertUsage=function(e,t){var i=o.find(t,{relativeUri:e.relativeUri,usage:core.MediaUsageType.Content});i&&(i.usage=core.MediaUsageType.All)},e.prototype.uploadSingleMedia=function(e){var t=this.node();this.consumerBiLoggerHelpers.organizeMediaNode=t;var i=this.createCEMedia();return this.consumerMediaUtils.getChangeMediaMethod(t,e)(i,this.getCurrentSegment(),!0)},e.prototype.openGalleryOrganizer=function(e){var t=this;return void 0===e&&(e=[]),this.uploadGallery(e).then(function(e){return t.handleBgResult(e,cc.MediaPreviewType.MultipleImages)})},e.prototype.uploadGallery=function(e){void 0===e&&(e=[]);var t=this.node();this.consumerBiLoggerHelpers.organizeMediaNode=t;var i=this.createCEMedia();return this.consumerMediaUtils.getChangeMediaMethod(t,cc.MediaPreviewType.MultipleImages)(i,null,!0,e)},e.prototype.extractBackground=function(t,i){switch(i){case cc.MediaPreviewType.MultipleImages:return this.createGallery(e.STRIP_SLIDESHOW,t.data);case cc.MediaPreviewType.SingleImage:var n=ob.deepClone(t.data[0]);return n.mediaType="image",n;default:return t.data[0]}},e.prototype.createCEMedia=function(){var e=this.contentElement();return{contentElement:e,media:this.getMediaField(e).value}},e.prototype.getMediaField=function(e){var t=o.find(e.values,{type:core.ElementTypes.Media});if(!t)throw"mediaField not found in contentElement";return t},e.prototype.getCurrentSegment=function(){var e=this.applicationState.getContentFocus();if(e&&"header"!==e.sitePart){var t=this.node();return t&&this.overlayManager.listSpanManager.getSegmentByNodeId(t.getId(),e.sitePart)}},e.prototype.getCurrentListSpan=function(){var e=this.node();return e&&this.overlayManager.listSpanManager.getByNodeId(e.getId())},e.prototype.getPageId=function(){return this.storyServices.story?this.storyServices.story.selectedPage:""},e.prototype.usedPatternsUrls=function(){try{return this.PageFeatureList.getPatternList(this.getPageId()).map(function(e){return e.relativeUri})}catch(e){return this.$log.error("can't get usedPatterns. error:",e),[]}},e.prototype.moveUsedPatternsToTop=function(e){var t,i,n=this,o=angular.copy(e),r=e[t=i=e.findIndex(function(e){return"pattern"===e.mediaType})].label;return delete o[t].label,this.usedPatternsUrls().forEach(function(e){var t=o.findIndex(function(t){if("pattern"!==t.mediaType)return!1;var i=n.getPattern(t);return e===i});t>-1&&(o.splice(i,0,o.splice(t,1)[0]),i++)}),o[t].label=r,o},e.prototype.getVideoUrlFromBackgrounds=function(e,t){var i=this.sectionBackgroundService.getBackgroundOptions(this.node(),"header"===t?"header":"body").video.find(function(t){return t.relativeUri===e});if(i)return this.getVideo(i);this.$log.error("can't get video from videoId: "+e)},e.prototype.convertSelectedFromApi=function(e,i){var n=this;if(void 0===i&&(i=t.SectionBackgroundModes.NONE),e){var o;switch(e.mediaType){case"color":o=this.getColor(e);break;case"image":o=this.extractImageURL(e.mediaId);break;case"video":var r=/.+?(?=video)/.exec(e.mediaId);if(r&&r.length){var a=r[0];o=this.getVideoUrlFromBackgrounds(a,i)}else o=this.getVideoUrlFromBackgrounds(e.mediaId,i);break;case"gallery":o=e.mediaIds.map(function(e){return n.extractImageURL(e)});break;case"pattern":o=this.getPattern(e)}var s={data:{type:e.mediaType,value:o},isSelected:!1,org:null};switch(e.mediaType){case"gallery":s.data.metaData={galleryType:this.getGalleryType(e.galleryType)};break;case"pattern":s.data.metaData={patternBgColor:this.getColor(e.backgroundColor),thumbRatio:e.thumbRatio}}return s}},e.prototype.extractImageURL=function(e){var t,i=/.+?(?=media)/.exec(e);return i&&i.length?t=i[0]:(i=/\.(gif|jpe?g|png)$/i.exec(e))?t=i.input:this.$log.error("can't get image from mediaId: "+e),t},e.prototype.getBackgroundListForCurrentMode=function(){switch(this.mode){case"header":return ob.deepClone(this.sectionBackgroundService.getBackgroundOptions(this.node(),"header"));default:return ob.deepClone(this.sectionBackgroundService.getBackgroundOptions(this.node()))}},e.prototype.createGallery=function(e,t){return{mediaType:"gallery",galleryType:e,galleryProps:{},mediaItems:t}},e.prototype.convertOrgToBackgroundObject=function(e,t){if(e){var i=this.getPattern(e),n={data:{type:e.mediaType,value:i},isSelected:t,org:e};return n.data.metaData={patternBgColor:this.getColor(e.backgroundColor),thumbRatio:e.thumbRatio},n}},e.prototype.isEqual=function(e,t){if(void 0===t&&(t=this.selectedBackgroundForCurrentMode),!e||!t||e.mediaType!==t.mediaType)return!1;switch(e.mediaType){case"color":return e.color===t.color&&e.confId===t.confId;case"image":case"video":return o(t.mediaId).includes(e.relativeUri);case"gallery":return e.galleryType===t.galleryType;case"pattern":return e.mediaId===t.mediaId}},e.prototype.getGalleryType=function(e){return"slideshow"},e.prototype.getPattern=function(e){var t=this.simpleSolutionManager.getNodeSelectedLg(this.node(),this.mode);return this.patternService.getPattern(e,t)},e.prototype.getColor=function(e){var t=this.designKitParameters[e.color];return this.previewColors.getRGBColor(t)},e.prototype.getVideo=function(e){return this.clientTopology.videoUrl+e.fileOutput.video[0].url},e.prototype.convertMediaPreviewTypeToBi=function(e){return["image","gallery","video"][e]},e.prototype.updateViewer=function(e){var t=this,i=Object.keys(e.contentElement.values).find(function(t){return"media"===e.contentElement.values[t].type});return this.wizardService.onSynchronousFieldChanged(e,i,null,!0,void 0,void 0).then(function(){t.storyServices.reRender()})},e.prototype.validateBackground=function(e){return!!e&&("color"!==e.mediaType||"confId"in e&&"color"in e)},e.STRIP_SLIDESHOW="Strip Slideshow",e.LIST_TITLE_KEY="listTitle",e.MEDIA_KEY="media",e}();t.SectionBackgroundManager=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionBackgroundManager",r)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),a=function(){return function(e,t,i,n,o,r,a,s,l,d){void 0===s&&(s={}),void 0===l&&(l=c.Single),this.label=e,this.name=t,this.icon=i,this.event=n,this.state=o,this.goToState=r,this.mightChangeMenu=a,this.style=s,this.actionType=l,this.labelGetter=d}}();t.OnstageAction=a;var s=function(e){function t(t,i,n,o,r){var a=e.call(this,t,i,n,o)||this;return a.label=t,a.name=i,a.icon=n,a.event=o,a.subActionsGetter=r,a.actionType=c.Group,a}return n(t,e),t}(a);t.OnstageActionGroup=s;var l=function(e){function t(t,i,n,o,r,a){var s=e.call(this,t,i,n,o)||this;return s.label=t,s.name=i,s.icon=n,s.event=o,s.paletteGetter=r,s.colorSetter=a,s.actionType=c.ColorPicker,s}return n(t,e),t}(a);t.OnstageActionColorPick=l;var c,d=function(e){function t(t,i,n,o){var r=e.call(this,t,i,n,o)||this;return r.label=t,r.name=i,r.icon=n,r.event=o,r.actionType=c.ResizeText,r}return n(t,e),t}(a);!function(e){e[e.Single=0]="Single",e[e.Group=1]="Group",e[e.ColorPicker=2]="ColorPicker",e[e.ResizeText=3]="ResizeText"}(c=t.OnstageActionType||(t.OnstageActionType={}));var u=function(){function e(e,t,i){var n=this;this.ONSTAGE_EVENTS=e,this.flags=t,this.applicationState=i,this.getMediaSettingsState=function(){return n.flags.cardsToPanels?n.applicationState.getSectionMediaState():n.flags.sectionMedia?r.STATES.BUILDER_NEW_MEDIA_SETTINGS:r.STATES.BUILDER_MEDIA_SETTINGS},this.HIDE=new a("overlay.actions.hide","hide","osi:hideeye",this.ONSTAGE_EVENTS.HIDE),this.EDIT_CONTENT=new a("overlay.actions.edit","edit-content","osi:rename",this.ONSTAGE_EVENTS.EDIT_CONTENT,{name:r.STATES.BUILDER_EDIT}),this.EDIT_ADDRESS=o({},this.EDIT_CONTENT,{label:"overlay.actions.edit-address",icon:"osi:address"}),this.EDIT_COMPONENT_STYLE=new a("overlay.actions.styles","edit-style","osi:style",this.ONSTAGE_EVENTS.EDIT_COMPONENT_STYLE),this.CROP_IMAGE=new a("overlay.actions.crop","crop-image","osi:crop",this.ONSTAGE_EVENTS.CROP_IMAGE),this.OPEN_MEDIA=new a("overlay.actions.open-media","open-media","osi:replace",this.ONSTAGE_EVENTS.OPEN_MEDIA_MANAGER),this.ORGANIZE_GALLERY=o({},this.OPEN_MEDIA,{label:"overlay.actions.organize-gallery",name:"organize-gallery"}),this.CHANGE_GALLERY_TYPE=new a("overlay.actions.gallery-type","gallery-type","osi:gallery",this.ONSTAGE_EVENTS.CHANGE_GALLERY_TYPE,{name:this.flags.cardsToPanels?r.STATES.BUILDER_SECTION_MEDIA_EDIT:r.STATES.BUILDER_NEW_MEDIA_SETTINGS,childState:this.flags.cardsToPanels}),this.OVERRIDE_FIELD_COLOR=new l("overlay.actions.override-color","override-color","",this.ONSTAGE_EVENTS.OVERRIDE_FIELD_COLOR),this.RESIZE_TEXT=new d("overlay.actions.override-font-size","override-font-size","",this.ONSTAGE_EVENTS.RESIZE_TEXT),this.SET_MAP_STYLE=new l("overlay.actions.set-map-style","set-map-style","",this.ONSTAGE_EVENTS.SET_MAP_STYLE),this.OPEN_MEDIA_SETTINGS=new a("overlay.actions.settings"+(this.flags.sectionMedia?"2":""),"settings","osi:settings",this.ONSTAGE_EVENTS.OPEN_SETTINGS,{name:this.flags.cardsToPanels?function(){return n.getMediaSettingsState()}:r.STATES.BUILDER_MEDIA_SETTINGS,childState:this.flags.cardsToPanels}),this.LINK_TO=new a("overlay.actions.link-to","link-to","osi:link",this.ONSTAGE_EVENTS.LINK_TO),this.MEDIA_LINK_TO=o({},this.LINK_TO,{event:this.ONSTAGE_EVENTS.MEDIA_LINK_TO}),this.OPEN_SEO=new a("overlay.actions.edit-seo","edit-seo","osi:seo",this.ONSTAGE_EVENTS.OPEN_SEO),this.OPEN_PAGES_PANEL=new a("overlay.actions.edit-pages","edit-pages","osi:pages",null,{name:r.STATES.BUILDER_PAGES}),this.OPEN_SOCIAL_PANEL=new a("overlay.actions.edit","edit-socials","osi:edit",this.ONSTAGE_EVENTS.OPEN_SOCIAL_PANEL),this.EDIT_LIST_ITEM=new a("overlay.actions.edit","edit-list-item","osi:edit",this.ONSTAGE_EVENTS.EDIT_LIST_ITEM),this.HIDE_LIST_ITEM=new a("overlay.actions.hide","hide-list-item","osi:hideeye",this.ONSTAGE_EVENTS.HIDE_LIST_ITEM),this.TOGGLE_PARAGRAPH_COLUMNS=new a("overlay.actions.toggle-paragraphs","toggle-paragraph-columsn","osi:hideeye",this.ONSTAGE_EVENTS.TOGGLE_PARAGRAPH_COLUMNS,null,null,!0),this.DELETE_LIST_ITEM=new a("overlay.actions.delete","delete-list-item","osi:delete",this.ONSTAGE_EVENTS.DELETE_LIST_ITEM),this.DUPLICATE_LIST_ITEM=new a("overlay.actions.duplicate","duplicate-list-item","osi:duplicate",this.ONSTAGE_EVENTS.DUPLICATE_LIST_ITEM),this.LIST_ITEM_TO_PAGE=new a("overlay.actions.list-item-to-page","create-page-from-item","osi:moveto",this.ONSTAGE_EVENTS.LIST_ITEM_TO_PAGE),this.OPEN_CHAT_INBOX=new a("overlay.actions.inbox","open-chat-inbox","osi:inbox",this.ONSTAGE_EVENTS.OPEN_CHAT_INBOX),this.OPEN_CHAT_DESIGN=new a("overlay.actions.design","open-chat-design","osi:style",this.ONSTAGE_EVENTS.OPEN_CHAT_DESIGN),this.OPEN_CHAT_SETTINGS=new a("overlay.actions.settings","open-chat-settings","osi:settings",this.ONSTAGE_EVENTS.OPEN_CHAT_SETTINGS),this.DELETE_CHAT=new a("overlay.actions.delete","delete-chat","osi:delete",this.ONSTAGE_EVENTS.DELETE_CHAT),this.UPGRADE_CHAT=new a("overlay.actions.upgrade-chat","upgrade-chat","osi:upgrade",this.ONSTAGE_EVENTS.UPGRADE_CHAT)}return e.$inject=["ONSTAGE_EVENTS","flags","applicationState"],e}();t.OnstageActions=u,angular.module("siteGeneratorStaticsConsumerAppInternal").service("ONSTAGE_ACTIONS",u)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(26),o=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u){this.$scope=e,this.viewerScrollController=t,this.$element=i,this.previewScale=n,this.applicationState=o,this.flags=r,this.$translate=a,this.$document=s,this.CcDialogBuilder=l,this.anonService=c,this.signUpNotifier=d,this.suggestDomainService=u,this.scrollbarWidth=this.viewerScrollController.getScrollbarWidth()}return e.$inject=["$scope","viewerScrollController","$element","previewScale","applicationState","flags","$translate","$document","CcDialogBuilder","anonService","signUpNotifier","suggestDomainService"],e.prototype.$postLink=function(){var e=this;this.$scope.$watch(function(){return e.previewScale.getScale()},function(t){return e.updateWidth(t)}),this.$scope.$watch(function(){return e.applicationState.isInMobileEditMode()},function(t){return e.flags.largerStage?e.toggleEditModeBrowserLargeStage(t):e.toggleEditModeBrowser(t)})},e.prototype.isPreviewDisplay=function(){return this.applicationState.isPreviewDisplay()},e.prototype.isInMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},e.prototype.extraWidthIfDefined=function(e){var t=this.applicationState.previewFrameWidth;return this.flags.largerStage?{}:{width:t,maxWidth:this.isPreviewDisplay()?"100% !important":t}},e.prototype.getSiteUrl=function(){var e=this.applicationState.getStoryMetadata(),t=e&&e.publicUri;return t&&-1===t.indexOf("editor.wix")?t:"https://www.wix.com/mysite"},e.prototype.getBarLabel=function(){return this.$translate.instant("builder.fake-browser.choose-domain")},e.prototype.openConnectDomainDialog=function(t){this.flags.newTopBar&&this.flags.suggestDomain?this.suggestDomainService.openConnectDomainDialog(t):this.anonService.isAnonymousUser()?this.signUpNotifier.showSignUpPopup("openConnectDomainDialog"):this.CcDialogBuilder.show({parent:this.$document.body,targetEvent:t,onComplete:function(){angular.element(".md-dialog-container").addClass("tour-modal")},template:'<md-dialog aria-label="Publish dialog" class="big-modal"><publish-dialog screen="connect" source="'+e.ConnectDomainSource+'"></publish-dialog></md-dialog>'})},e.prototype.updateWidth=function(t){var i=n.Viewer.ViewerDesktopBaseSize*t;this.flags.largerStage&&this.isInMobileEditMode()||this.$element.find(e.BrowserWrapperSelector).width(i);this.flags.newTopBar&&(this.fakeBrowserWidth=i)},e.prototype.toggleEditModeBrowser=function(t){this.$element.find(e.BrowserWrapperSelector).css(this.extraWidthIfDefined()),t?this.previewScale.setScale(1):(this.previewScale.reset(!0),this.updateWidth(this.previewScale.getScale()))},e.prototype.limitWidthForMobile=function(e){return{maxWidth:e?"320px":"1920px"}},e.prototype.toggleEditModeBrowserLargeStage=function(t){this.$element.find(e.BrowserWrapperSelector).css(this.limitWidthForMobile(t)),t||this.previewScale.reset(!0)},e.prototype.getWidthWithScrollbar=function(){return{width:320+this.scrollbarWidth}},e.BrowserWrapperSelector=".browser-wrapper",e.InnerWrapperSelector=".inner-wrapper",e.IframeSelector=".viewer",e.ConnectDomainSource="fakebrowser",e}();t.FakeBrowser=o,angular.module("siteGeneratorStaticsConsumerAppInternal").component("fakeBrowser",{templateUrl:"views/preview/fake-browser.html",controller:o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(12),r=i(43),a=i(1),s=i(0),l=function(){function e(t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B){var k=this;this.$rootScope=t,this.$translate=i,this.$window=n,this.$timeout=o,this.miscUtils=r,this.applicationState=a,this.modelTree=s,this.applicationParameters=l,this.consumerBiLogger=c,this.consumerBiLoggerHelpers=d,this.CcDialogBuilder=u,this.tpaService=p,this.tpaUrlBuilder=g,this.tpaDiscovery=h,this.osUtils=m,this.storyServices=f,this.CONSUMER_DIALOGS=v,this.clientTopology=S,this.flags=y,this.tpaTypes=T,this.smartAssistTpaHelpers=b,this.masterPageActions=I,this.sitePartTypes=P,this.consumerDialogs=M,this.anonService=E,this.signUpNotifier=w,this.siteState=C,this.consumerPublishService=A,this.undoRedo=L,this.documentServicesPlatformService=B,this.registerTpaHandlers=function(t,i){return k.tpaService.registerTpaOpener(t,function(n){return k.$rootScope.$apply(function(){var o=k.tpaService.getInstanceId(i);k.consumerBiLogger.apps.clickOnManageApp(e.SETTINGS_PANEL_ORIGIN,k.tpaService.getAppIdByType(t),t,o),k.openManagement(e.SETTINGS_PANEL_ORIGIN,i,t,n)})})},this.isFullScreen=function(t){return t&&e.MANAGE_FULL_SCREEN_TYPES.indexOf(t.contentElementType)>=0},this.closeManagement=function(){return k.CcDialogBuilder.hide()},this.closeSettings=function(){return k.applicationState.goToBuilder()},p.registerTpaManagementCallback(e.TPA_EVENT_CLOSE_WINDOW,function(){return k.closeManagement()})}return e.$inject=["$rootScope","$translate","$window","$timeout","miscUtils","applicationState","modelTree","applicationParameters","consumerBiLogger","consumerBiLoggerHelpers","CcDialogBuilder","tpaService","tpaUrlBuilder","tpaDiscovery","osUtils","storyServices","CONSUMER_DIALOGS","clientTopology","flags","tpaTypes","smartAssistTpaHelpers","masterPageActions","sitePartTypes","consumerDialogs","anonService","signUpNotifier","siteState","consumerPublishService","undoRedo","documentServicesPlatformService"],e.prototype.popupAfterTpaAdded=function(e,t){var i=this;if(void 0===t&&(t=!1),e!==core.TpaTypes.Blog2){var n=e.toLowerCase(),o="popups.after-tpa-"+n+"-add";if(!this.storyServices.story.popupConfigurations[o]){var r=t?"-section":"",a=this.$translate.instant("popups.after-tpa-"+n+"-add"+r+".text",{TPA:e});if(n===this.applicationParameters.tpaTypes.GetSubscribers.type.toLowerCase())a=a+' <button class="p9b-text-button" ng-click="$ctrl.runCallback(\'open-learn-more\')">'+this.$translate.instant("popups.after-tpa-getsubscribers-learn-more")+"</button>";var s={heading:this.$translate.instant("popups.after-tpa-"+n+"-add.heading",{TPA:e}),text:a,acceptButtonText:this.miscUtils.translateIfPossible("popups.after-tpa-"+n+"-add.button")||this.$translate.instant("general.got-it"),hideFirstTimeCheckBox:!0,icon:n+".gif",biDialogName:this.CONSUMER_DIALOGS.TPA_AFTER_UPDATE+"-"+n,callback:function(e){"open-learn-more"===e&&i.CcDialogBuilder.showSupportIframe(i.$translate.instant("help.tpa.getsubscribers-learn-more"),"tpa-added-help")}};this.CcDialogBuilder.showFirstTimeNotice(s).then(function(e){i.storyServices.story.popupConfigurations[o]=!0})}}},e.prototype.sendClickOnManageAppEvent=function(e,t){var i=t.contentElementType,n=this.tpaService.getAppIdByType(this.tpaService.getNaiveType(i)),o=this.tpaService.getInstanceId(t);this.consumerBiLogger.apps.clickOnManageApp(e,n,i,o)},e.prototype.openTpaAction=function(e){var t=e.context;if(this.flags.smartAssistTpa&&this.smartAssistTpaHelpers.isSupportedTpaType(t))if("upgrade"===e.context.smartAssistData.link.type){var i="https://premium.wix.com/wix/api/premiumStart?siteGuid="+this.storyServices.metaSiteId+"&referralAdditionalInfo=onboarding-smart-assist";this.$window.open(i,"_blank")}else{var n=e.context,o=n.contentElementType;this.sendClickOnManageAppEvent(a.BIOrigins.SmartAssist,n),this.openManagement("smart-assist",n,o,e.context.smartAssistData.link.url)}},e.prototype.openManagement=function(e,t,i,n){var o=this;if(void 0===n&&(n=""),this.anonService.isAnonymousUser())this.signUpNotifier.showSignUpPopup("openManagement "+e+" "+i);else{this.isFullScreen(t)&&this.applicationState.setSelectedTpaComponentRef(t.widgetRef),this.applicationParameters.tpaTypes[i].closeSettingsPanelWhenManaging&&this.applicationState.goToBuilder(),this.applicationParameters.updateCurrentlyManaged(i);var r=this.buildManagementUrl(i,t,e,n);this.CcDialogBuilder.show(this.getManageDialogOptions(t,i,r)).finally(function(){return o.onDialogClosed(i)})}this.flags.templateSite&&this.undoRedo.manualSave()},e.prototype.deleteTpaPackage=function(e,t){var i=this;void 0===t&&(t=!0);var n=this.tpaService.getAppId(e),r=e.getId(),s=e.getContentElementType(),l=this.tpaService.getInstanceId(e);if(this.consumerBiLogger.sectionManagement.sectionMenuDeleteSectionClick(r,s,e.alias,n,a.BIOrigins.OSI,null),s===core.TpaWidgetTypes.Chat_Widget)return this.consumerDialogs.showDialog(o.ConsumerDialogTypes.DELETE_CHAT_POPUP).then(function(){i.consumerBiLogger.apps.removeTpaStart(s,n,l,r),t&&i.applicationState.goToBuilder(),i.masterPageActions.removeMasterPageWidget(e).then(function(){return i.undoRedo.captureOperation()}),i.consumerBiLogger.apps.removeTpaPackageSuccess(0,n,null,null,r,l)})},e.prototype.openTpaPanel=function(e,t,i){var n=e.getContentElementType();if(t===r.EditTypes.design)this.consumerBiLogger.sectionManagement.replaceSectionPanelIsLoaded(e.getId(),n,e.alias,i);else if(t===r.EditTypes.settings){var o=this.tpaService.getAppIdByType(this.tpaService.getNaiveType(n)),a=this.tpaService.getInstanceId(e);this.consumerBiLogger.apps.clickOnEditAppTpaSettings(i,o,n,a)}this.applicationState.setContentFocus(e.getId(),this.sitePartTypes.BODY),this.applicationState.goToEditMode(void 0,t)},e.prototype.openTpaManagement=function(t){var i=t.getContentElementType();if(this.flags.smartAssistTpa)this.sendClickOnManageAppEvent(a.BIOrigins.OSI,t);else{var n=this.tpaService.getAppIdByType(this.tpaService.getNaiveType(i)),o=this.tpaService.getInstanceId(t);this.consumerBiLogger.apps.clickOnManageApp(a.BIOrigins.OSI,n,i,o)}this.openManagement(e.SECTION_ORIGIN,t,this.tpaService.getNaiveType(i))},e.prototype.openBillingPage=function(e){var t="https://www.wix.com/apps/upgrade?appDefId="+e+"&metaSiteId="+this.siteState.getMetaSiteId()+"&pp_origin=ADI_App";this.$window.open(t)},e.prototype.buildManagementUrl=function(t,i,n,o){var r=n===e.SETTINGS_PANEL_ORIGIN?a.SdkBIEventType.Settings:n===e.SECTION_ORIGIN?a.SdkBIEventType.Manage:a.SdkBIEventType.Topbar,s=this.tpaUrlBuilder.getManagementUrl(t,i,n,o);return this.flags.smartAssistTpa||(s+=o),this.consumerBiLoggerHelpers.addSDKJsonForBiEvent(s,this.tpaService.getAppIdByType(t),r)},e.prototype.fireBusinessManagerClosedEvent=function(e){this.flags.smartAssistTpa&&s.includes(this.smartAssistTpaHelpers.supportedTpaTypes,e)&&n.PubSub.fire(n.events.BUSINESS_MANAGER_CLOSED)},e.prototype.onDialogClosed=function(t){var i=this;this.tpaUrlBuilder.bizMgrURL(t)?s.values(this.tpaDiscovery.manageableTPAs).map(function(e){var t=e.naiveNode;return i.tpaService.getNaiveType(t.contentElementType)}).forEach(function(e){i.tpaService.refreshApp(e)}):this.tpaService.refreshApp(t),this.fireBusinessManagerClosedEvent(t),this.storyServices.reRender(),this.$rootScope.$emit(e.TPA_EVENT_CLOSE_WINDOW)},e.prototype.getManageDialogOptions=function(e,t,i){var n=this,o=this.$translate.instant("builder.manage-tpa",{TPA:t}),r=this.miscUtils.translateIfPossible("builder.manage-tpa-"+t)||o,a=this.tpaUrlBuilder.bizMgrURL(t)||t===this.tpaTypes.Video;return{autoWrap:!1,hasBackdrop:!0,fullscreen:!0,templateUrl:"views/editor/tpa-manage-dialog.html",locals:{manageUrl:i,title:r,type:t&&t.toLowerCase(),fullScreen:this.isFullScreen(e),showHeader:!a,close:function(){return n.CcDialogBuilder.hide()},help:function(){var e=n.$translate.instant("help.tpa."+t);n.CcDialogBuilder.showSupportIframe(e,n.CONSUMER_DIALOGS.TPA_HELP)}},controllerAs:"$ctrl",bindToController:!0,controller:angular.noop,escapeToClose:!a}},e.prototype.getTpaPageSuggestions=function(e){var t=this;void 0===e&&(e=!1);var i,n,o=[];if(this.flags.blog2){var r=this.modelTree.getTpaPageNodeByType(this.tpaTypes.Blog);i=!r,n=r}else n=!0,i=!1;return s.chain(this.applicationParameters.tpaTypes).filter(function(e){if(e.type===t.tpaTypes.Blog){if(!n)return!1}else if(e.type===t.tpaTypes.Blog2&&!i)return!1;if(e.type===t.tpaTypes.Members)return!!t.flags.membersArea&&t.documentServicesPlatformService.suggestMembersArea();var o=e.sectionUnderFlag;return e.inConsumer&&"active"===e.sectionType&&(!o||t.flags[o])}).map("type").each(function(i){!e&&t.tpaService.isTpaAdded(i)||o.unshift({ceType:i,id:i,isTpa:!0,pageTitle:t.$translate.instant("builder.section-design.TPA_NAME."+i),rawSectionBrief:{}})}).value(),o},e.MANAGE_FULL_SCREEN_TYPES=["ProGallery_Widget"],e.TPA_EVENT_CLOSE_WINDOW="closeWindow",e.SETTINGS_PANEL_ORIGIN="settings-panel",e.SECTION_ORIGIN="ADI-section",e}();t.TpaSettings=l,angular.module("siteGeneratorBuilderInternal").service("tpaSettings",l)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(30),r=i(2),a=i(18),s=i(1),l=i(0),c=function(e){function t(t,i,n,o,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H,O){var _=e.call(this,O)||this;return _.$scope=t,_.$q=i,_.CONSUMER_DIALOGS=n,_.contentManager=o,_.nodeTitleManager=a,_.simpleSolutionManager=s,_.nodeManipulationService=l,_.storyServices=c,_.sectionManager=d,_.undoRedo=u,_.spinnerService=p,_.consumerBiLoggerHelpers=g,_.consumerBiLogger=h,_.notification=m,_.CcDialogBuilder=f,_.$translate=v,_.flags=S,_.menuService=y,_.modelTree=T,_.sectionBackgroundManager=b,_.applicationState=I,_.onstageActionsManager=P,_.ONSTAGE_EVENTS=M,_.editorEventManager=E,_.listPanelManager=w,_.slideShowService=C,_.sectionMedia=A,_.sectionMediaSetter=L,_.listPanelBackManager=B,_.$rootScope=k,_.sectionHeightUIService=H,_.listItems=[],_.unsubscribers=[],_.setSectionHeightState=function(e){_.applicationState.isSectionHeightMode()&&_.sectionHeightUIService.setChangeSectionHeightState(e)},_.onAnyFieldToggle=function(){_.setBackground()},_.pageId=_.storyServices.story.selectedPage,_.setBackground(),_.watchListItems(),_.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId!==_.node.id&&(_.consumerBiLoggerHelpers.openedPanelStack.push("main"),_.consumerBiLogger.contentEditor.panelIsLoaded(_.node.getId(),_.node.getSpecificContentElementType(),_.node.alias,_.consumerBiLoggerHelpers.popPanelSource())),_.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId=_.node.id,_.unsubscribers.push(r.PubSub.subscribe(r.events.LIST_ITEMS_UPDATED,_.refreshListItems.bind(_))),_.unsubscribers.push(r.PubSub.subscribe(r.events.NEW_STATE_STORY_WAS_SET,function(){_.refreshListItems()})),_.flags.sectionMedia&&!_.isMobileMode&&_.unsubscribers.push(r.PubSub.subscribe(r.events.CONTENT_UPDATED,function(){return _.tryMoveToListBackground(_.node,_.header)})),_.flags.cardsToPanels&&(_.unsubscribers.push(_.$rootScope.$on("$stateChangeSuccess",function(){_.updateChildId()})),_.flags.largerStage&&_.setSectionHeightState(!0),_.updateChildId()),_}return n(t,e),t.$inject=["$scope","$q","CONSUMER_DIALOGS","contentManager","nodeTitleManager","simpleSolutionManager","nodeManipulationService","storyServices","sectionManager","undoRedo","spinnerService","consumerBiLoggerHelpers","consumerBiLogger","notification","CcDialogBuilder","$translate","flags","menuService","modelTree","sectionBackgroundManager","applicationState","onstageActionsManager","ONSTAGE_EVENTS","editorEventManager","listPanelManager","slideShowService","sectionMedia","sectionMediaSetter","listPanelBackManager","$rootScope","sectionHeightUIService","helpDialogManager"],t.prototype.updateChildId=function(){this.editedNode=this.modelTree.getNodeById(this.applicationState.childId()),this.showNested=this.shouldShowNested()},t.prototype.stateIsChangeHeight=function(){return this.sectionHeightUIService.stateIsChangeHeight()},t.prototype.tryMoveToListBackground=function(e,t){var i=this.sectionMedia.getSelectedOption(t)===a.MediaSizeOptions.BackgroundList;if(!t.isUserHidden()||i)return this.$q.when(!0);var n=this.sectionMedia.getMediaType(t);return n===cc.MediaPreviewType.MultipleImages?this.sectionMediaSetter.setOption(e,cc.MediaPreviewType.SingleImage,a.MediaSizeOptions.BackgroundList).then(function(e){return r.PubSub.fire(r.events.MEDIA_CHANGED_BY_SYSTEM),e}):this.sectionMediaSetter.setOption(e,n,a.MediaSizeOptions.BackgroundList)},t.prototype.$onDestroy=function(){this.unsubscribers&&this.unsubscribers.forEach(function(e){return e()})},t.prototype.setBackground=function(){this.background=this.sectionBackgroundManager.getSelectedBackgroundAsThumbnail()},Object.defineProperty(t.prototype,"title",{get:function(){return this.nodeTitleManager.nodeTitle(this.node)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return l.find(this.node.children,function(e){return"ListHeader"===e.getContentElementType()})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"footer",{get:function(){return l.find(this.node.children,function(e){return"ListFooter"===e.getContentElementType()})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return!this.flags.headlessApiPerf&&void 0!==this.header},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showFooter",{get:function(){return!this.flags.headlessApiPerf&&void 0!==this.footer},enumerable:!0,configurable:!0}),t.prototype.watchListItems=function(){var e=this;this.$scope.$watch(this.node.children,function(){return e.refreshListItems()}),this.$scope.$watch(function(){return e.slideShowService.getSelectedItem(e.node.getId())},function(){var t=l.find(e.listItems,function(t){return t.id===e.slideShowService.getSelectedItem(e.node.getId())});t&&(l.map(e.listItems,function(e){return e.selected=!1}),t.selected=!0)})},t.prototype.refreshListItems=function(){this.flags.cardsToPanels?this.listItems=this.listPanelManager.createListItems(this.node):this.listItems=this.createListItems()},t.prototype.getOverrideLabel=function(){return this.slideShowService.isSlideShow(this.node)?this.$translate.instant("builder.add-slide"):""},t.prototype.getListItemsLabel=function(){return this.slideShowService.isSlideShow(this.node)?this.$translate.instant("builder.list-items-title-slideshow"):this.$translate.instant("builder.list-items-title")},t.prototype.isShowSlideShowTooltip=function(){return this.slideShowService.isSlideShow(this.node)},t.prototype.createListItems=function(){var e=this,i=t.filterChildren(this.node.children).find(function(e){return!e.userHidden});return this.slideShowService.isSlideShow(this.node)&&i&&!this.slideShowService.getSelectedItem(this.node.id)&&this.slideShowService.getSelectedItem(this.node.id)!==i.id&&this.slideShowService.setSelectedItem(this.node.id,i.id),t.filterChildren(this.node.children).map(function(t){return e.generateItem(t)})},t.prototype.generateItem=function(e){var t=e.identifyingNode,i=t&&this.slideShowService.isSlideShow(t)&&this.slideShowService.getSelectedItem(t.id);return this.listPanelManager.generateItem(e,i)},t.prototype.getRealItem=function(e){return l.find(this.node.children,function(t){return t.id===e.id})},t.filterChildren=function(e){return l.filter(e,function(e){return"ListHeader"!==e.getContentElementType()&&"ListFooter"!==e.getContentElementType()&&"HomePageTeaser"!==e.getContentElementType()})},t.prototype.addListItem=function(e,t,i,n){var o=this;return this.sectionManager.addListItem(this.node,e,t,!0).then(function(){o.handleAfterUpdateList(i,n),o.consumerBiLogger.contentEditor.addDuplicateItemSuccess(o.node.getId(),o.node.getSpecificContentElementType(),o.node.alias,"onAdd"===n?"new":"duplicate")})},t.prototype.handleAfterUpdateList=function(e,t){this.refreshListItems(),this.undoRedo.captureOperation(!1),e&&this.notification.show(e,2e3),this.spinnerService.imDone(t)},t.prototype.realIndexAndStatus=function(e){var t=this.getRealItem(e),i=this.nodeManipulationService.nodeIndexAndStatus(this.node,t);if(!i)throw"cannot toggle a non list item from this flow";return i.childNode=t,i},t.prototype.itemToPage=function(e){this.editorEventManager.itemToPage(e)},t.prototype.onEdit=function(e,t){this.consumerBiLoggerHelpers.setPanelSource("click edit in menu"),this.editorEventManager.editListItem(e)},t.prototype.onAdd=function(){if(this.consumerBiLogger.contentEditor.clickOnAddDuplicateItemInAList(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,"new"),this.flags.listPanelRefactor)this.listPanelManager.createItemNodeAndAddToList(this.node),this.refreshListItems();else{var e=this.createNewCEDraft(),t=this.createNewNodeFromCE(e);this.spinnerService.waitForMe("onAdd"),this.addListItem(t,void 0,"toasters.list-item-added","onAdd")}},t.prototype.createNewNodeFromCE=function(e){var t=this.nodeManipulationService.addNodeToList(this.node);return l.each(e.values,function(e,i){return t.contentElement.values[i]=e}),t},t.prototype.getSectionSuggestionByNode=function(e){var t=this,i={rawSectionBrief:{id:this.node.alias,ceType:this.node.getContentElementType(),cardinality:2}},n=this.contentManager.suggestedSections().suggestions,o=n&&n.find(function(e){return e.id===t.node.alias});return o&&o.rawSectionBrief.cardinality>1&&(i.rawSectionBrief.item=o.rawSectionBrief.item),i},t.prototype.createNewCEDraft=function(){var e=this.getSectionSuggestionByNode(this.node),t=this.modelTree.getListItems(this.node).length;return this.contentManager.prepareDrafts(e,1,t)[0].items[0]},t.prototype.onDuplicate=function(e){var t=this;this.flags.listPanelRefactor?this.listPanelManager.onDuplicate(e,!0,this.node).then(function(){t.refreshListItems()}):this.listPanelManager.onDuplicate(e,!0).then(function(){t.refreshListItems()})},t.prototype.onDelete=function(e){var t=this;this.listPanelManager.onDelete(e).then(function(){t.refreshListItems()})},t.prototype.onToggle=function(e){var t=this,i=this.listPanelManager.onToggle(e,!0,this.flags.listPanelRefactor&&this.node);i.then instanceof Function&&i.then(function(){e.hidden||t.slideShowService.moveToRealIndex(t.node,e.id),t.refreshListItems()})},t.prototype.closeListPanel=function(){this.flags.cardsToPanels?(this.applicationState.goToBuilder(),this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop()):(void 0!==this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId&&(this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop()),this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId=void 0,this.editorEventManager.closePanel(this.node.id)),this.applicationState.clearContentFocus()},t.prototype.onOrderChange=function(e){var t=this;this.consumerBiLogger.contentEditor.reorderItemInAList(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias);var i=this.createListItems(),n=i[e.fromIndex],o=this.realIndexAndStatus(n),r=l(i).filter({hidden:!1}).map(function(e){return e.id}).value().join("|"),a=l(this.listItems).filter({hidden:!1}).map(function(e){return e.id}).value().join("|");if(this.nodeManipulationService.moveListItem(this.node,e.fromIndex,e.toIndex),r!==a){var s=this.realIndexAndStatus(n);this.spinnerService.waitForMe("reorder"),this.simpleSolutionManager.reorderItems(this.pageId,this.node.getId(),o.indexInVisibleItemsIgnoringHeader,s.indexInVisibleItemsIgnoringHeader).then(function(e){var i={direction:t.simpleSolutionManager.Animation.Direction.REVERSE,type:t.simpleSolutionManager.Animation.Type.CROSS_FADE};return t.sectionManager.startAnimatedRender(e,i)}).then(function(){t.slideShowService.changeOrderInListItem(t.node,e.fromIndex,e.toIndex),t.refreshListItems(),t.undoRedo.captureOperation(!1),t.spinnerService.imDone("reorder"),t.consumerBiLogger.contentEditor.itemReorderSuccess(t.node.getId(),t.node.getSpecificContentElementType(),t.node.alias)})}},t.prototype.onItemClick=function(e){var t=this.modelTree.getNodeById(e.id);e.hidden||t.identifyingNode&&this.slideShowService.isSlideShow(t.identifyingNode)&&this.slideShowService.setSelectedItem(this.node.getId(),e.id),this.onEdit(e,t),this.consumerBiLoggerHelpers.setPanelSource("click item in panel")},t.prototype.onItemDoubleClick=function(e){this.onItemClick(e)},t.prototype.openListPanelHelp=function(){var e;e=this.flags.cardsToPanels&&this.editedNode?this.$translate.instant("help.section.editListItem"):this.flags.sectionMedia?this.$translate.instant("help.section.sectionMedia.editListPageSection"):this.slideShowService.isSlideShow(this.node)?this.$translate.instant("help.section.editSlideShow"):this.$translate.instant("help.section.editListPageSection"),this.CcDialogBuilder.showSupportIframe(e,this.CONSUMER_DIALOGS.LIST_PANEL_HELP)},t.prototype.showNameInMenuEditor=function(){return this.modelTree.isSiteMenuVisible()&&null!==this.menuService.getLinkToNode(this.node)&&!this.applicationState.isInMobileEditMode()},Object.defineProperty(t.prototype,"isMobileMode",{get:function(){return this.applicationState.isInMobileEditMode()},enumerable:!0,configurable:!0}),t.prototype.onEditHeaderBackground=function(){this.applicationState.goToSectionHeaderBackgroundPanel(s.BIOrigins.ContentPanel)},t.prototype.onEditListBackground=function(){this.applicationState.goToSectionListBackgroundPanel(s.BIOrigins.ContentPanel)},t.prototype.onReturn=function(){this.flags.cardsToPanels?this.listPanelBackManager.back():this.applicationState.goToEditChildMode(),this.refreshListItems()},t.prototype.showPanelMessage=function(){return this.applicationState.isInMobileEditMode()&&this.flags.cardsToPanels},t.prototype.shouldShowNested=function(){return!!this.editedNode||this.shouldShowMediaSettings()||this.flags.largerStage&&(this.applicationState.isInSectionColorPanel()||this.applicationState.isInSectionFontPanel()||this.applicationState.isInSectionAnimationPanel()||this.applicationState.isInSlideShowAnimationPanel())},t.prototype.shouldShowMediaSettings=function(){return this.applicationState.isInEditSectionMedia()||this.applicationState.isInEditPatterns()},t}(o.PanelBase);t.ListPanel=c,angular.module("siteGeneratorEditorInternal").component("listPanel",{templateUrl:"views/editor/list-panel.html",controller:c,bindings:{node:"=",onItemToPage:"&",childId:"<?"}})},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),r=i(17),a=i(1),s=i(0),l=function(){function e(e,t,i,n,o,r,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H,O,_){var D=this;this.$stateParams=e,this.flags=t,this.editorEventManager=i,this.applicationState=n,this.spinnerService=o,this.nodeChangeReporter=r,this.nodeEditorBiReporter=s,this.consumerBiLogger=l,this.consumerBiLoggerHelpers=c,this.wizardService=d,this.nodeFetcher=u,this.undoRedo=p,this.sectionManager=g,this.solutionFetcher=h,this.simpleSolutionManager=m,this.modelTree=f,this.logoHandler=v,this.mobileSolutionManager=S,this.linkDetailsManager=y,this.storyServices=T,this.notification=b,this.osUtils=I,this.focusKeeper=P,this.onstageActionsManager=M,this.ONSTAGE_EVENTS=E,this.listPanelManager=w,this.layoutSelectionStoreProvider=C,this.$injector=A,this.sectionBackgroundService=L,this.catalogStylesManager=B,this.modelTreeHelpers=k,this.designKit=H,this.previewColors=O,this.userOverrides=_,this.mediaSettingsActive=!1,M.subscribe(E.EDIT_LIST_ITEM,function(e){!D.consumerBiLoggerHelpers.getPanelSource()&&D.consumerBiLoggerHelpers.setPanelSource(a.BIOrigins.OSI),D.loadItemEditor(D.listPanelManager.generateItem(e))}),M.subscribe(E.LIST_ITEM_TO_PAGE,function(e){D.makeIntoPage(e)}),M.subscribe(this.ONSTAGE_EVENTS.OPEN_SOCIAL_PANEL,function(){D.isSocialEditor()||(A.get("contentElementFieldManager").resetFocus(),D.loadSocialEditor())}),M.subscribe(this.ONSTAGE_EVENTS.OVERRIDE_FIELD_COLOR,function(e){D.overrideFieldColor(e)})}return e.$inject=["$stateParams","flags","editorEventManager","applicationState","spinnerService","nodeChangeReporter","nodeEditorBiReporter","consumerBiLogger","consumerBiLoggerHelpers","wizardService","nodeFetcher","undoRedo","sectionManager","solutionFetcher","simpleSolutionManager","modelTree","logoHandler","mobileSolutionManager","linkDetailsManager","storyServices","notification","osUtils","focusKeeper","onstageActionsManager","ONSTAGE_EVENTS","listPanelManager","layoutSelectionStoreProvider","$injector","sectionBackgroundService","catalogStylesManager","modelTreeHelpers","designKit","previewColors","userOverrides"],e.prototype.overrideFieldColor=function(e){var t=this,i=this.layoutSelectionStoreProvider.getLayoutSelectionStore(),n=this.onstageActionsManager.getSegment(),o=e.styleKey||e.data.subType,r=this.flags.listItemOverrideColor?this.userOverrides.getFieldColorOverride(n.getSegmentNode(),o):i.getFieldColorOverride(n,o),a=e.actionData.name;if(this.flags.overrideContainerBgColor&&!a){var l=n.getLE(),c=l.getLayoutBySubType(e.data.subType),d=this.designKit.getColorOfFirstBackground(l,c,!0),u=this.designKit.getColorByField(e.data.subType,n,l),p=this.designKit.santaToKitFormat(u);!this.designKit.isContrastValid(d,p)&&(a=this.designKit.isDarkColor(d)?"L1":"D1")}if(a!==r){this.flags.listItemOverrideColor?this.userOverrides.setFieldColorOverride(n.getSegmentNode(),o,a):i.setFieldColorOverride(n,o,a);var g=s.get(n,"node.alias")||"",h=n.node?n.node.getSpecificContentElementType():"";a?this.consumerBiLogger.contentEditor.changeContentColorClick(o,n.node&&n.node.id,a,"",g,h):this.consumerBiLogger.contentEditor.resetContentColorClick(o,n.node&&n.node.id,g,h),this.storyServices.reRender().then(function(){t.undoRedo.captureOperation(),a?t.consumerBiLogger.contentEditor.changeContentColorSuccess(o,n.node&&n.node.id,a,"",g,h):t.consumerBiLogger.contentEditor.resetContentColorSuccess(o,n.node&&n.node.id,g,h)})}},e.prototype.showMediaSettings=function(){this.mediaSettingsActive=!0},e.prototype.hideMediaSettings=function(){this.mediaSettingsActive=!1},e.prototype.loadSocialEditor=function(){this.flags.cardsToPanels?this.applicationState.goToEditChildMode(e.SOCIAL_ID):this.applicationState.goToEditMode(e.SOCIAL_ID)},e.prototype.loadItemEditor=function(e){this.flags.cardsToPanels&&this.applicationState.isEditMode()?this.applicationState.goToEditChildMode(e.id):this.applicationState.goToEditMode(e.id)},e.prototype.isSocialEditor=function(){return this.$stateParams.childId===e.SOCIAL_ID},e.prototype.isItemEditor=function(){return this.$stateParams.childId&&this.$stateParams.childId!==e.SOCIAL_ID},e.prototype.makeIntoPage=function(e){var t=this;this.flags.cardsToPanels&&!e&&(e=this.nodeFetcher.getCurrentActiveNode()),this.spinnerService.waitForMe("makeIntoPage"),this.sectionManager.makeIntoPage(e).then(function(){t.linkButtonFieldIfEmpty(e,t.storyServices.story.selectedPage),t.spinnerService.imDone("makeIntoPage")})},e.prototype.linkButtonFieldIfEmpty=function(e,t){var i=e.contentElement,n=s.find(i.values,function(e){return"button"===e.type}),o=n?n.value:{};this.linkDetailsManager.isNone(o)&&(o.isPageRef=!0,o.targetPage=t,o.link={pageId:t})},e.prototype.setReferenceFieldsVisibility=function(e,t,i,n,o){var r=this;this.consumerBiLogger.contentEditor.hideComponentFromSite(i?"unhide":"hide",t,n,o);return Promise.all(e.map(function(e){var n=e.referenceFields[t]!==i,o=r.isLastVisibleField(e,t);return n&&!o?(e.referenceFields[t]=i,r.wizardService.onReferenceFieldChanged(e,t,!0)):Promise.resolve()})).then(function(){r.consumerBiLogger.contentEditor.hideComponentFromSiteSuccess(i?"unhide":"hide",t,n,o)}).then(function(){return r.storyServices.recalculateCurrentPage(!0)}).then(function(){return r.simpleSolutionManager.ensureHeaderAndFooterVisibility()}).then(function(){return r.afterUpdateComplete(e)})},e.prototype.isLastVisibleField=function(e,t){var i=n({},e.getArgsMatchingPolicy(),e.getReferenceFields());return i[t]&&1===Object.keys(i).filter(function(e){return i[e]}).length},e.prototype.updateViewer=function(e){var t=this;this.startTime=Date.now();var i,n,o=this.modelTree.findIdentifyingNode(e.node),r=this.flags.refactorOSIActions?this.nodeFetcher.getNodeSitePart(o):this.modelTreeHelpers.getNodeSitePart(o);if(this.applicationState.isInMobileEditMode())return this.updateMobileViewer(e);if(this.flags.resizeBusinessName&&e.BIOrigin===a.BIOrigins.OSI||this.nodeChangeReporter.handleValuesChanges(o,e),e.field.type===core.ElementTypes.FixedHeader)return this.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(e.node.getId(),e.node.getSpecificContentElementType(),e.node.alias||"",e.key,"boolean",this.wizardService.isFixedHeader(),0,0,void 0,0,"","",!1,!1),void this.afterUpdateComplete([e.node],e);var s=e.isReferencedField?e.node.getReferenceFields():e.node.getArgsMatchingPolicy();if(e.maskChanged){var l=e.node.hasVisibleFields();i=!l&&!this.canBeEmpty(e.node),n=(l||this.canBeEmpty(e.node))&&e.node.isUserHidden()}if("media"===e.field.type&&"Logo"===e.key){var c=!s||!!s.Logo;this.logoHandler.handleLogoChange(e,c)}if(i&&this.canBeRemoved(e.node))return this.sectionManager.showDeleteSectionPopup(e.node,"hide-or-delete-all-elements",function(){t.restoreFieldMask(e,s)});if(i&&"GeneralDescription"===e.node.contentElement.type)return this.sectionManager.showHideNodePopup(r).finally(function(){return t.restoreFieldMask(e,s)});var d=void 0;if(e.isReferencedField)d=this.handleReferenceFieldChanged(e);else{var u=void 0,p=!1;if(i&&e.node.contentElement.isSpecialListItem())u=this.removeListSpecialItem(e.node,e.key,this.getParent(e),o);else if(n&&e.node.contentElement.isSpecialListItem())u=this.addListSpecialItem(e.node,e.key,this.getParent(e),o,function(){return t.getSectionSolution(e.node)});else{var g=e.node.containerPageId,h=this.nodeFetcher.getCurrentCorrectNodeId(e.node,r),m=this.getSectionSolution(e.node),f=m.reduce(function(e,t){return t.getBoundingHeight()+e},0),v=this.mobileSolutionManager.getMobileSolution(m);u=this.wizardService.onSynchronousFieldChanged(e.node,e.key,this.getParent(e),e.maskChanged).then(function(){return t.simpleSolutionManager.detectAndHandleSolutionFailure(g,h,e.node.getContentElement())}).then(function(i){if(i)return p=!0,i.oldHeight=f,i;if(t.doReplaceSectionOnFieldChanged(e.node)){var n=t.getSectionSolution(e.node);if(n.reduce(function(e,t){return t.getBoundingHeight()+e},0)!==f)return t.simpleSolutionManager.replaceSectionOnPage(g,h,n).then(function(e){return e.oldHeight=f,e})}}).then(function(i){var n;return n=i&&i.newSolution?i.newSolution.slice(i.startIndex,i.startIndex+i.newLength):t.getSectionSolution(e.node),t.mobileSolutionManager.setMobileSolution(n,v),t.simpleSolutionManager.setSolutionDirty(v),i})}d=u.then(function(i){return t.handleLayoutChanged(i,p,"GeneralDescription"===e.node.getContentElementType()||t.modelTree.isReferenceField(e.node.getContentElementType(),e.field.name))})}return d.then(function(){return t.finishUpdateViewer(e,s)})},e.prototype.getParent=function(e){var t=this.modelTree.findIdentifyingNode(e.node);return t.isList()?t:null},e.prototype.addListSpecialItem=function(e,t,i,n,o){var r=this,a=this.mobileSolutionManager.getMobileSolution(o(e));this.mobileSolutionManager.addListItem(a,e);var s=this.simpleSolutionManager.addListSpecialItem(e.containerPageId,n.getId(),e).then(function(t){var i=t&&t.newSolution||o(e);return r.mobileSolutionManager.setMobileSolution(i,a),r.simpleSolutionManager.setSolutionDirty(a),t});return this.modelTree.updateFieldsVisibility(e,i,t,!0),e.userHidden=!1,s},e.prototype.removeListSpecialItem=function(e,t,i,n){var o=this,r=this.simpleSolutionManager.removeListSpecialItem(e.containerPageId,n.getId(),e.getId());e.userHidden=!0;var a=e.getContentElement().getDependencies();return s.each(a,function(i){if(i!==e&&i.containerPageId){var n=o.modelTree.findIdentifyingNode(i);o.modelTree.updateFieldsVisibility(i,n,t),i.userHidden=i.userHidden||!i.hasVisibleFields(),i.userHidden&&(o.modelTree.markPageAsDirty(i.containerPageId),o.simpleSolutionManager.removeListSpecialItemFromSolutionLGs(i.containerPageId,n.getId(),i.getContentElementType()))}}),r},e.prototype.doReplaceSectionOnFieldChanged=function(e){var t=this.flags.refactorOSIActions?this.nodeFetcher.getCurrentCorrectNodeId(e,this.nodeFetcher.getNodeSitePart(e)):this.nodeFetcher.getCurrentCorrectNodeId(e,this.modelTreeHelpers.getNodeSitePart(e));return"header"!==t&&"footer"!==t},e.prototype.updateMobileViewer=function(e){var t=this,i=this.nodeFetcher.getCurrentActiveNode();this.spinnerService.waitForMe("mobileNodeChange");var n=this.getSectionSolution(e.node),o=this.mobileSolutionManager.getMobileSolution(n);return this.simpleSolutionManager.setSolutionDirty(o),this.mobileSolutionManager.calculatePart(this.nodeFetcher.getCurrentNodeResult().sitePart,i.containerPageId).then(function(){return t.storyServices.renderMobileSolution(t.nodeFetcher.getCurrentNodeResult().sitePart,i.containerPageId)}).then(function(){t.afterUpdateComplete([i]),t.spinnerService.imDone("mobileNodeChange")})},e.prototype.getSectionSolution=function(e){var t=(e=this.modelTree.findIdentifyingNode(e)).containerPageId,i=e.id,n=this.flags.refactorOSIActions?this.nodeFetcher.getNodeSitePart(e):this.modelTreeHelpers.getNodeSitePart(e);return this.solutionFetcher.getSectionSolution(t,i,n)},e.prototype.canBeEmpty=function(e){if(!this.flags.sectionMedia)return!1;if(e.isListHeader()){var t=this.modelTree.findIdentifyingNode(e),i=this.sectionBackgroundService.getBackground(t,"header");return!!i&&i.mediaType!==core.BgMediaTypes.COLOR}return!e.isListItem&&this.sectionBackgroundService.getBackground(e).mediaType!==core.BgMediaTypes.COLOR},e.prototype.canBeRemoved=function(e){return!e.contentElement.isSpecialListItem()&&"GeneralDescription"!==e.contentElement.type},e.prototype.restoreFieldMask=function(e,t){var i=this;if(t[e.key]=!0,!e.field.value){return(e.isReferencedField?this.wizardService.onReferenceFieldChanged(e.node,e.key,!0):this.wizardService.onSynchronousFieldChanged(e.node,e.key,null,!0,!0)).then(function(){return i.simpleSolutionManager.detectAndHandleSolutionFailure(e.node.containerPageId,i.nodeFetcher.getCurrentCorrectNodeId(),e.node.getContentElement())}).then(function(){return i.handleLayoutChanged(void 0,void 0,!0)}).then(function(){return i.finishUpdateViewer(e,t)})}},e.prototype.handleLayoutChanged=function(e,t,i){var n,o=this;if(e&&!this.sameSolution(e.newSolution,e.oldSolution)){var r={direction:this.simpleSolutionManager.Animation.Direction.REVERSE,type:this.simpleSolutionManager.Animation.Type.CROSS_FADE,duration:.1};n=this.sectionManager.startAnimatedRender(e,r).then(function(){t&&o.notification.show("toasters.could-not-fit-text",2e3)})}else n=i?this.storyServices.reRender():this.storyServices.reRenderParts();return this.osUtils.isIE&&(n=n.then(function(){o.focusKeeper.restoreFocus()})),n},e.prototype.finishUpdateViewer=function(e,t){var i=this;return this.simpleSolutionManager.ensureHeaderAndFooterVisibility().then(function(e){if(e)return i.handleLayoutChanged(void 0,void 0,!0)}).then(function(){i.nodeEditorBiReporter.reportBi(e,t,i.getParent(e),i.startTime),i.afterUpdateComplete([e.node],e)})},e.prototype.isMediaField=function(e){var t=e.data||e;return!!t&&t.type===core.ElementTypes.Media&&t.subType===core.ElementSubTypes.Image},e.prototype.afterUpdateComplete=function(e,t){if(!this.flags.sectionMedia||!t||!this.isMediaField(t.field)){this.flags.lessTextCaptures&&function(e){return e&&!e.maskChanged&&e.whatChanged===r.IEditEventType.ValueChange&&e.field&&"text"===e.field.type}(t)?this.undoRedo.captureTextOperation():this.undoRedo.captureOperation(!1,!1,!1,!1,!0)}o.PubSub.fire(o.events.CONTENT_UPDATED,e)},e.prototype.sameSolution=function(e,t){return e.reduce(function(e,i,n){return e&&i===t[n]},!0)&&e.length===t.length},e.prototype.handleReferenceFieldChanged=function(e){var t=this,i=this.mobileSolutionManager.getMobileSolution(this.getSectionSolution(e.node));return this.wizardService.onReferenceFieldChanged(e.node,e.key,e.maskChanged).then(function(){return t.simpleSolutionManager.detectAndHandleSolutionFailure(e.node.containerPageId,t.nodeFetcher.getCurrentCorrectNodeId(),e.node.getContentElement())}).then(function(){var n=t.getSectionSolution(e.node);return t.mobileSolutionManager.setMobileSolution(n,i),t.simpleSolutionManager.setSolutionDirty(i),t.handleLayoutChanged(void 0,void 0,!0)})},e.SOCIAL_ID="social",e}();t.NodeEditorManager=l,angular.module("siteGeneratorEditorInternal").service("nodeEditorManager",l)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.scoreForDefaultContent=.05,e.scoreForDefaultIndustry=.3,e.scoreForDefaultSpecificIndustry=.4,e.scoreForFullSignature=4,e.scoreForNoIndustrySignature=3,e.scoreForNoStructureSignature=2,e.scoreForNoStructureAndIndustrySignature=1,e.scoreForUsingDefaultValues=.5,e.scoreForUsingPlaceholderValues=.9,e.scoreForUsingTemplateValues=1,e}();t.ContentScores=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="<textarea ng-model='$ctrl.json' ng-show='$ctrl.builderState()' ng-style='{fontFamily: &#39;monospace&#39;, borderBottom: &#39;1px solid gray&#39;, width: &#39;100%&#39;, height: 200, flexShrink: 0}'></textarea>\n<p ng-show='!$ctrl.builderState()'>\n<button ng-click='$ctrl.warmup()' ng-style='$ctrl.buttonStyle'>Warm up</button>\n</p>\n<p ng-show='$ctrl.builderState()'>\n<button ng-click='$ctrl.update()' ng-style='$ctrl.buttonStyle'>Update</button>\n</p>\n<p ng-show='$ctrl.builderState()'>\n<button ng-click='$ctrl.build()' ng-style='$ctrl.buttonStyle'>Build</button>\n</p>\n<p ng-show='$ctrl.builderState()'>\n<button ng-click='$ctrl.reset()' ng-style='$ctrl.buttonStyle'>Reset</button>\n</p>\n<p>\n<button ng-click='$ctrl.help(help)' ng-repeat='help in $ctrl.helps' ng-style='$ctrl.blueButtonStyle'>{{help.title}}</button>\n</p>\n<p>\nSections:\n<select ng-model='$ctrl.theSection' ng-options='section as section.name for section in $ctrl.sections track by section.id' ng-style='$ctrl.selectStyle'></select>\n</p>\n<p>\nRevision:\n<input ng-model='$ctrl.currentRevision'>\n</p>\n<p ng-if='$ctrl.helpMessage'>Help:</p>\n<pre ng-if='$ctrl.helpMessage' ng-style='{overflow: &#39;auto&#39;, borderTop: &#39;1px solid gray&#39;}'>{{$ctrl.helpMessage}}</pre>\n<pre ng-if='$ctrl.error' ng-style='{overflow: &#39;auto&#39;, background: &#39;red&#39;, color: &#39;white&#39;}'>{{$ctrl.error}}</pre>\n<button ng-click='$ctrl.error = null' ng-if='$ctrl.error'>clear</button>\n<hr ng-style='{position: &#39;absolute&#39;, bottom: 0, width: &#39;100%&#39;, background: &#39;blue&#39;, cursor: &#39;pointer&#39;}'>\n"},function(e,t){e.exports="<div class='main-container'>\n<div class='main' ng-transclude=''></div>\n<div class='main-helpers'>\n<spinner ng-if='!$ctrl.flags.noSpinners &amp;&amp; (!$ctrl.flags.simpleSpinner || $ctrl.initService.isNewSite)'></spinner>\n<simple-spinner ng-if='!$ctrl.flags.noSpinners &amp;&amp; ($ctrl.flags.simpleSpinner &amp;&amp; !$ctrl.initService.isNewSite)'></simple-spinner>\n<visual-validation></visual-validation>\n<div class='header-layout-solver' header-layout-solver=''></div>\n</div>\n<open-site-loader adi-automation='open-site-loader' class='animate-if' ng-if='$ctrl.preloaderService.isShown'></open-site-loader>\n<assistant-dock class='tour-dock-interactive tour-dock-stationary' ng-if='!$ctrl.applicationState.isInMobileEditMode() &amp;&amp; (!$ctrl.applicationState.isSectionHeightMode() || $ctrl.assistantManager.isInActiveTask())'></assistant-dock>\n<headless-test ng-if='$ctrl.flags.headlessApi'></headless-test>\n</div>\n"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLAYGROUND_STATES={CC_PLAYGROUND:"playground",BACKDROP_PLAYGROUND:"backdrop",LOGO_COLOR_PLAYGROUND:"logo-color-playground",ANALYSIS_PLAYGROUND:"analysis"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.top=e,this.height=t}return e.prototype.getBottom=function(){return this.top+this.height},e.prototype.scale=function(t){return new e(this.top*t,this.height*t)},e}();t.OverlayLayout=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a){this.presetHelpers=e,this.designKit=t,this.$p=i,this.flags=n,this.slideShowService=o,this.mediaOpacity=r,this.colorationPattern=a,this.hashMap={}}return e.prototype.generateListOfPreviews=function(e){var t=this;if(this.flags.listItemOverrideColor&&this.colorationPattern.isListWithColorBox(e[0])){var i=[];return this.presetHelpers.generateColorOptions(e[0],!0).forEach(function(o){var r=t.colorationPattern.getApplicablePatterns(e[0],t.designKit.indexToKitColor(o.confId));r&&r.length?r.forEach(function(e){return i.push(n.assign({},o,{pattern:e}))}):i.push(o)}),this.$p.when(i)}return this.$p.when(this.presetHelpers.generateColorOptions(e[0],!1))},e.prototype.generateNextChunkOfPreviews=function(e){return[]},e.prototype.calculatePresetPreview=function(e){var t=this;if(this.flags.listItemOverrideColor){var i="layoutPresetPreview_switchColor_"+e.confId+"_"+(e.headerConfId||0)+"_"+(e.pattern&&this.colorationPattern.getPatternSignature(e.pattern)||"");return this.presetHelpers.createColorOptionSolution(e,i).then(function(i){return e.pattern&&t.colorationPattern.applyPattern(i.solution,e.pattern),i})}return this.presetHelpers.createColorOptionSolution(e)},e.prototype.isUnique=function(e){var t=this.getPresetVisualSignature(e);return this.hashMap[t]||(this.hashMap[t]=e),this.hashMap[t]===e},e.prototype.getPresetVisualSignature=function(e){var t=this;return this.flags.listItemOverrideColor&&e.preset&&e.preset.pattern?this.colorationPattern.getPatternSignature(e.preset.pattern):(this.slideShowService.isSlideShow(e.node)&&(e.flags=e.flags||[],-1===e.flags.indexOf("slideShowPreset")&&e.flags.push("slideShowPreset")),n.each(e.solution,function(i,o){var r=e.stripData[o];if(r&&r.mediaItems){var a=n.map(i.segments,function(e){return e.node});i.hasNonTransparentBackground=n.every(a,function(e){return 1===t.mediaOpacity.getOpacity(e)})}}),this.designKit.getColorSignature(e.solution,e.previewNode))},e.prototype.shouldLoadPreviousOnScroll=function(){return!1},e}();t.ColoredPresetsStrategy=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(14),o=function(){function e(e,t,i,n,o,r){this.strategyOptions=e,this.defaultsService=t,this.presetHelpers=i,this.$p=n,this.clientTopology=o,this.flags=r}return e.prototype.generateListOfPreviews=function(e){var t=this,i=this.strategyOptions.strategyMode===n.PresetsStrategyMode.Add;return(this.flags.instagram&&e[0].contentElementType===core.TpaWidgetTypes.Instagram_Widget?this.$p.when([{data:{presetImageUrl:this.clientTopology.staticsUrl+"/images/presets/instagram.png"}}]):this.defaultsService.getPresetsForNode(e[0],void 0,i)).then(function(i){return t.presetHelpers.generateFlattenedListOfPreviewsForTpa(e[0],i)})},e.prototype.generateNextChunkOfPreviews=function(e){return[]},e.prototype.calculatePresetPreview=function(e){return this.$p.when(e)},e.prototype.isUnique=function(e){return!0},e.prototype.getPresetVisualSignature=function(e){return""},e.prototype.shouldLoadPreviousOnScroll=function(){return!1},e}();t.TpaPresetsStrategy=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(14),o=i(0),r=function(){function e(e,t,i,o,r,a,s,l,c,d,u,p){if(this.strategyOptions=e,this.defaultsService=t,this.applicationState=i,this.presetHelpers=o,this.presetPreviewGenerator=r,this.sectionLayoutSuggestions=a,this.$window=s,this.$q=l,this.mobileSectionValidator=c,this.flags=d,this.sitePartTypes=u,this.presetSettingsService=p,this.chunkIndex=0,this.maxChunks=0,this.staticIndex=0,this.hashMap={},this.sitePart=this.strategyOptions.sitePart,this.existingNode=this.strategyOptions.node,!this.sitePart){var g=this.applicationState.getContentFocus();this.sitePart=g?g.sitePart:this.sitePartTypes.BODY}this.ceType=this.strategyOptions.strategyMode===n.PresetsStrategyMode.Change&&this.sitePart===this.sitePartTypes.HEADER?"SiteHeader":null}return e.prototype.generateListOfPreviews=function(e){var t=this;return this.getPresets(e).then(function(i){var n=t.filterPresets(i,e),o=t.orderPresets(n,e);return t.generatePreviewsFromPresets(e,o)})},e.prototype.generateNextChunkOfPreviews=function(e){return this.strategyOptions.strategyMode===n.PresetsStrategyMode.Add&&this.chunkIndex<this.maxChunks?(this.flags.presetSettings&&(this.presets=this.presetSettingsService.filterPresetsBySettings(this.presets,e,this.chunkIndex)),this.presetPreviewGenerator.generateNewPreviews(e,this.presets,this.chunkIndex++)):[]},e.prototype.calculatePresetPreview=function(e,t){var i=this;return this.tryOverrideNextPreset(e),e=this.preCalculate(e,t),this.$q.when().then(function(){if(i.flags.mobileStaticPresetFiltering&&!i.validateMobilePreset(e))return i.$q.reject("Mobile preset does not fit desktop solution")}).then(function(){return i.presetHelpers.calculateSolution(e,i.sitePart)}).then(function(t){return i.validatePresetPreview(e,t)?i.validateMobileSolution(e,t)?(i.tryUpdateNextOverridePreset(e),i.postCalculate(t),t):i.$q.reject("Mobile solution does not fit desktop solution"):i.$q.reject("Preset preview validation failed")}).catch(function(n){return i.flags.debugMode&&i.$window.console.log("%cCannot create solution for preset/node\nPreset ID: "+e.preset.id+"\nReason: "+n,"color:red"),i.tryNextPreset(e,t)})},e.prototype.isUnique=function(e){if(this.strategyOptions.strategyMode===n.PresetsStrategyMode.Add)return!0;var t=this.getPresetVisualSignature(e);return this.hashMap[t]||(this.hashMap[t]=e),this.hashMap[t]===e},e.prototype.shouldLoadPreviousOnScroll=function(){return!0},e.prototype.getPresetVisualSignature=function(e){var t=this;return[o.map(e.solution,function(e){return[e.id,e.selectedHeightMutation,t.getColumnsVisualSignature(e),!(e.isMobile()&&e.isSiteHeader())&&o.get(e.getLgData(),["menuStrip","enable"])||!1,"["+o.map(e.segments,function(e){var i=e.getLENoError();return i&&[i.id,t.getLEVisualSignature(i)].join("$")}).join(",")+"]"].join("$")}).join("\n"),this.flags.mergedHeader&&e.flags?e.flags.join("$"):null].filter(function(e){return!!e}).join("$")},e.prototype.getPresets=function(e){var t=this,i=this.strategyOptions.strategyMode===n.PresetsStrategyMode.Add,o=e[0].isList();return this.flags.allPresets?this.defaultsService.getAllLayoutPresets(!1,this.flags.consumerMode?this.ceType:void 0).then(function(e){return e.filter(function(e){return o===e.data.isList&&t.applicationState.isInMobileEditMode()===Boolean(e.data.isMobile)&&-1===e.data.forContent.indexOf("SiteHeader")&&-1===e.data.forContent.indexOf("GeneralDescription")})}):this.defaultsService.getPresetsForNode(e[0],this.ceType,i,this.applicationState.isInMobileEditMode(),this.flags.presetSettings&&!this.applicationState.isInMobileEditMode())},e.prototype.filterPresets=function(e,t){return this.strategyOptions&&this.strategyOptions.filterPresets?this.strategyOptions.filterPresets(e,t):e},e.prototype.orderPresets=function(e,t){return!this.flags.allPresets&&this.strategyOptions&&this.strategyOptions.orderPresets?this.strategyOptions.orderPresets(e,t):e.map(function(e){return{preset:e,maskIndex:0}})},e.prototype.generatePreviewsFromPresets=function(e,t){if(this.presets=t,this.tryJust1Preset(),this.strategyOptions.strategyMode===n.PresetsStrategyMode.Add)return this.maxChunks=this.flags.presetSettings?core.maxPresetsIterations:e.filter(function(e){return e.isDraft}).length,this.flags.presetSettings&&(this.presets=this.presetSettingsService.filterPresetsBySettings(this.presets,e,this.chunkIndex)),this.presetPreviewGenerator.generateNewPreviews(e,this.presets,this.chunkIndex++);if(this.flags.presetSettings&&!this.applicationState.isInMobileEditMode()&&(this.presets=this.presetSettingsService.splitPresetsBySettings(this.presets,e)),this.strategyOptions.isBackgroundSupported&&!this.applicationState.isInMobileEditMode()&&this.flags.sectionMedia&&this.sitePart===this.sitePartTypes.BODY){var i={isChangeBgSupported:this.strategyOptions.isChangeBgPermutationSupported};return this.presetPreviewGenerator.generateAlternativePreviewsWithBg(e,this.presets,i)}return this.presetPreviewGenerator.generateAlternativePreviews(e,this.presets)},e.prototype.postCalculate=function(e){!this.flags.headlessApi&&this.flags.betterLayoutSuggestions&&this.sitePart===this.sitePartTypes.BODY&&this.strategyOptions.strategyMode===n.PresetsStrategyMode.Change&&this.existingNode&&(e.isRecommended=this.sectionLayoutSuggestions.isSectionPretty(e,this.presets,this.existingNode))},e.prototype.preCalculate=function(e,t){return this.strategyOptions&&this.strategyOptions.preCalculate?this.strategyOptions.preCalculate(e,t):e},e.prototype.validatePresetPreview=function(e,t){return!this.strategyOptions||!this.strategyOptions.validatePresetPreview||this.strategyOptions.validatePresetPreview(e,t)},e.prototype.validateMobilePreset=function(e){return!(e.preset.data.isMobile&&!this.mobileSectionValidator.validateMobilePreset(e.preset,this.sitePart,e.node.containerPageId,e.node.id))},e.prototype.validateMobileSolution=function(e,t){return!(t.preset.data.isMobile&&!this.mobileSectionValidator.validateMobileSolution(t.solution,this.sitePart,e.node.containerPageId,e.node.id))},e.prototype.tryOverrideNextPreset=function(e){e.staticRoundRobin&&(void 0===e.staticStartIndex&&(e.staticStartIndex=this.staticIndex),e.preset=this.presets[this.staticIndex].preset)},e.prototype.tryUpdateNextOverridePreset=function(e){e.staticRoundRobin&&(this.staticIndex=(this.staticIndex+1)%this.presets.length)},e.prototype.tryNextPreset=function(e,t){return e.staticRoundRobin&&(this.staticIndex=(this.staticIndex+1)%this.presets.length,e.staticStartIndex!==this.staticIndex)?this.calculatePresetPreview(e,t):null},e.prototype.getColumnsVisualSignature=function(e){var t=e.getColumnsData();return!(!t||!t.enable||e.isMobile())&&[t.colSplit,t.rowSplit,t.fullWidth,t.spacing,t.margin,t.columnVOffset||0,t.split].join(",")},e.prototype.getLEVisualSignature=function(e){var t=[],i=e.getLayoutSelectionStore();return e.recurseLayouts(function(n){var o;if(e.isMediaType(n)){var r=e.overrides&&e.overrides.media&&e.overrides.media[n.argIndex];o=r&&r.name||n.type}else switch(n.type){case"menu":o=[!i||i.menuOverridesManager.stretchButtons(),i?i.menuOverridesManager.alignment():"center"].join("|");case"text":o=e.getAlignment(n,"align")}o&&t.push(o)}),t.join("$")},e.prototype.tryJust1Preset=function(){var e=this;if(this.flags.debugMode&&this.$window.justThisPresetId){var t=o.find(this.presets,function(t){return t.preset.id===e.$window.justThisPresetId});t&&(this.presets=[t])}},e.prototype.preparePreset=function(e,t,i,n){var r=o.find(e,function(e){return e.id===t&&!(n&&!e.data.isMobile)}),a=this.generatePreviewsFromPresets([i],[{preset:r}]);return 0===a.length?this.$q.when(!1):this.calculatePresetPreview(a[0],1)},e}();t.GenericPresetsStrategy=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(235),o=function(){function e(e,t){this.listSpanManager=e,this.sitePartTypes=t,this.init()}return Object.defineProperty(e.prototype,"dropTargetData",{get:function(){return this._dropTargetData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"siteParts",{get:function(){return this._siteParts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draggedListSpan",{get:function(){return this._draggedListSpan},set:function(e){this._draggedListSpan=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusedListSpan",{get:function(){return this._focusedListSpan},set:function(e){this._focusedListSpan=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoveredListSpan",{get:function(){return this._hoveredListSpan},set:function(e){this._hoveredListSpan=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draggedPresetPreview",{get:function(){return this._draggedPresetPreview},set:function(e){this._draggedPresetPreview=e},enumerable:!0,configurable:!0}),e.prototype.init=function(){this._siteParts={},this._siteParts[this.sitePartTypes.HEADER]={},this._siteParts[this.sitePartTypes.BODY]={},this._siteParts[this.sitePartTypes.FOOTER]={},this._dropTargetData=new n.OverlayDropTargetData},e}();t.OverlayData=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._dropTargetId=null,this._dropTargetPosition=0,this._dropTargetLocked=!1}return Object.defineProperty(e.prototype,"dropTargetId",{get:function(){return this._dropTargetId},set:function(e){this._dropTargetId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDropTargetLocked",{get:function(){return this._dropTargetLocked},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropTargetPosition",{get:function(){return this._dropTargetPosition},set:function(e){this._dropTargetPosition=e},enumerable:!0,configurable:!0}),e.prototype.lock=function(){this._dropTargetLocked=!0},e.prototype.unlock=function(){this._dropTargetLocked=!1},e.DropTargetHeight=450,e}();t.OverlayDropTargetData=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(25),o=i(10),r=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p){var g=this;this.$scope=e,this.undoRedo=t,this.$translate=i,this.$mdDialog=n,this.colorationUtils=o,this.$filter=r,this.CcDialogBuilder=a,this.themeChooser=s,this.$timeout=l,this.applicationState=c,this.previewScale=d,this.consumerBiLogger=u,this.themeChooserUtils=p,this.init(),this.$scope.$on("$stateChangeStart",function(){g.$mdDialog.destroy()}),this.$timeout(function(){return g.setListenerAndAdjustView()})}return e.$inject=["$scope","undoRedo","$translate","$mdDialog","colorationUtils","$filter","CcDialogBuilder","themeChooser","$timeout","applicationState","previewScale","consumerBiLogger","themeChooserUtils"],e.prototype.init=function(){var e=this.getActiveColorPalette();this.isNewColoration=this.checkIfNewColoration(e),this.populateLevels(),this.populateModes(this.isNewColoration),this.activeMode=this.getRadioModeValue(e.currentState),this.activeLevel=this.getRadioColorationLevelValue(e.colorationLevel)},e.prototype.getActiveColorPalette=function(){return this.themeChooser.getActiveTheme("mainKit").kitFonts.colors},e.prototype.checkIfNewColoration=function(e){return this.themeChooserUtils.isNewColorationPalette(e)},e.prototype.onModeChange=function(e){var t=this;this.activeMode=e,this.consumerBiLogger.siteDesign.customizeDesignChangeDarkLightMode(n.ColorationMode[e.value]),this.colorationUtils.setColorationMode(e.value).then(function(){return t.undoRedo.captureOperation(!1,!0)}).then(function(){return t.consumerBiLogger.siteDesign.customizeDesignChangeDarkLightModeSuccess(n.ColorationMode[e.value])})},e.prototype.populateModes=function(e){var t={label:this.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-mode.radio-buttons.light"),icon:"coloration-modes:Light",complex:!0,value:n.ColorationMode.light},i={label:this.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-mode.radio-buttons.dark"),icon:"coloration-modes:Dark",complex:!0,value:n.ColorationMode.dark},o={label:this.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-mode.radio-buttons.mix"),icon:"coloration-modes:Mixed",complex:!0,value:n.ColorationMode.mix};this.modes=e?[t,i,o]:[t,i]},e.prototype.getRadioModeValue=function(e){return this.modes.find(function(t){return t.value===e})},e.prototype.onColorationLevelChange=function(e){var t=this;this.activeLevel=e,this.consumerBiLogger.siteDesign.customizeDesignChangeColorationLevel(n.ColorationLevel[e.value]),this.colorationUtils.setColorationLevel(e.value).then(function(){return t.consumerBiLogger.siteDesign.customizeDesignChangeColorationLevelSuccess(n.ColorationLevel[e.value])}),this.undoRedo.captureOperation(!1,!0)},e.prototype.getRadioColorationLevelValue=function(e){return this.levels.find(function(t){return t.value===e})},e.prototype.populateLevels=function(){this.levels=[{label:this.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-level.drop-down.plain"),value:n.ColorationLevel.plain,complex:!0,icon:"coloration-levels:NoColorx10"},{label:this.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-level.drop-down.tinted"),value:n.ColorationLevel.tinted,complex:!0,icon:"coloration-levels:SoftTintx10"},{label:this.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-level.drop-down.colorful"),value:n.ColorationLevel.colorful,complex:!0,icon:"coloration-levels:Colorfulx10"},{label:this.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-level.drop-down.vibrant"),value:n.ColorationLevel.vibrant,complex:!0,icon:"coloration-levels:Vibrantx10"}]},e.prototype.onClose=function(){this.CcDialogBuilder.hide()},e.prototype.syncBackdropScrollWithFakeBrowser=function(){angular.element(".md-dialog-container")[0].addEventListener("wheel",function(e){angular.element(".overlay-viewport")[0].scrollTop+=e.deltaY},{passive:!0})},e.prototype.setListenerAndAdjustView=function(){this.applicationState.clearContentFocus(),this.previewScale.setScaleFactor(o.PreviewScale.MinScaleFactor),this.syncBackdropScrollWithFakeBrowser()},e}();t.ColorModeDialog=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=String.fromCharCode(65535),o=String.fromCharCode(65534);t.isRichText=function(e){return e&&e[0]===n&&e[1]===o},t.markRichText=function(e){return n+o+e},t.unMarkRichText=function(e){return e&&e.substring(2)},t.toPlainText=function(e){return t.isRichText(e)?(e=t.unMarkRichText(e),t.resetFormatting(e)):e},t.resetFormatting=function(e){return r.forEach(function(t){return e=e.replace(new RegExp(t.key,"g"),t.value)}),e.replace(/(<([^>]+)>)/g,"")};var r=[{key:"&nbsp;",value:" "},{key:"&amp;",value:"&"},{key:"&quot;",value:'"'},{key:"&lt;",value:"<"},{key:"&gt;",value:">"},{key:"&reg;",value:"Â®"},{key:"&copy;",value:"Â©"},{key:"&bull;",value:"â€¢"},{key:"&trade;",value:"â„¢"},{key:"&apos;",value:"'"},{key:"&#39;",value:"'"},{key:"&#x2F;",value:"/"},{key:"&iexcl;",value:"¡"},{key:"&cent;",value:"¢"},{key:"&pound;",value:"£"},{key:"&curren;",value:"¤"},{key:"&yen;",value:"¥"},{key:"&brvbar;",value:"¦"},{key:"&sect;",value:"§"},{key:"&uml;",value:"¨"},{key:"&copy;",value:"©"},{key:"&ordf;",value:"ª"},{key:"&laquo;",value:"«"},{key:"&not;",value:"¬"},{key:"&reg;",value:"®"},{key:"&macr;",value:"¯"},{key:"&deg;",value:"°"},{key:"&plusmn;",value:"±"},{key:"&sup2;",value:"²"},{key:"&sup3;",value:"³"},{key:"&acute;",value:"´"},{key:"&micro;",value:"µ"},{key:"&para;",value:"¶"},{key:"&middot;",value:"·"},{key:"&cedil;",value:"¸"},{key:"&sup1;",value:"¹"},{key:"&ordm;",value:"º"},{key:"&raquo;",value:"»"},{key:"&frac14;",value:"¼"},{key:"&frac12;",value:"½"},{key:"&frac34;",value:"¾"},{key:"&iquest;",value:"¿"},{key:"&Agrave;",value:"À"},{key:"&Aacute;",value:"Á"},{key:"&Acirc;",value:"Â"},{key:"&Atilde;",value:"Ã"},{key:"&Auml;",value:"Ä"},{key:"&Aring;",value:"Å"},{key:"&AElig;",value:"Æ"},{key:"&Ccedil;",value:"Ç"},{key:"&Egrave;",value:"È"},{key:"&Eacute;",value:"É"},{key:"&Ecirc;",value:"Ê"},{key:"&Euml;",value:"Ë"},{key:"&Igrave;",value:"Ì"},{key:"&Iacute;",value:"Í"},{key:"&Icirc;",value:"Î"},{key:"&Iuml;",value:"Ï"},{key:"&ETH;",value:"Ð"},{key:"&Ntilde;",value:"Ñ"},{key:"&Ograve;",value:"Ò"},{key:"&Oacute;",value:"Ó"},{key:"&Ocirc;",value:"Ô"},{key:"&Otilde;",value:"Õ"},{key:"&Ouml;",value:"Ö"},{key:"&times;",value:"×"},{key:"&Oslash;",value:"Ø"},{key:"&Ugrave;",value:"Ù"},{key:"&Uacute;",value:"Ú"},{key:"&Ucirc;",value:"Û"},{key:"&Uuml;",value:"Ü"},{key:"&Yacute;",value:"Ý"},{key:"&THORN;",value:"Þ"},{key:"&szlig;",value:"ß"},{key:"&agrave;",value:"à"},{key:"&aacute;",value:"á"},{key:"&acirc;",value:"â"},{key:"&atilde;",value:"ã"},{key:"&auml;",value:"ä"},{key:"&aring;",value:"å"},{key:"&aelig;",value:"æ"},{key:"&ccedil;",value:"ç"},{key:"&egrave;",value:"è"},{key:"&eacute;",value:"é"},{key:"&ecirc;",value:"ê"},{key:"&euml;",value:"ë"},{key:"&igrave;",value:"ì"},{key:"&iacute;",value:"í"},{key:"&icirc;",value:"î"},{key:"&iuml;",value:"ï"},{key:"&eth;",value:"ð"},{key:"&ntilde;",value:"ñ"},{key:"&ograve;",value:"ò"},{key:"&oacute;",value:"ó"},{key:"&ocirc;",value:"ô"},{key:"&otilde;",value:"õ"},{key:"&ouml;",value:"ö"},{key:"&divide;",value:"÷"},{key:"&oslash;",value:"ø"},{key:"&ugrave;",value:"ù"},{key:"&uacute;",value:"ú"},{key:"&ucirc;",value:"û"},{key:"&uuml;",value:"ü"},{key:"&yacute;",value:"ý"},{key:"&thorn;",value:"þ"},{key:"&yuml;",value:"ÿ"},{key:"&OElig;",value:"Œ"},{key:"&oelig;",value:"œ"},{key:"&Scaron;",value:"Š"},{key:"&scaron;",value:"š"},{key:"&Yuml;",value:"Ÿ"},{key:"&fnof;",value:"ƒ"},{key:"&circ;",value:"ˆ"},{key:"&tilde;",value:"˜"},{key:"&Alpha;",value:"Α"},{key:"&Beta;",value:"Β"},{key:"&Gamma;",value:"Γ"},{key:"&Delta;",value:"Δ"},{key:"&Epsilon;",value:"Ε"},{key:"&Zeta;",value:"Ζ"},{key:"&Eta;",value:"Η"},{key:"&Theta;",value:"Θ"},{key:"&Iota;",value:"Ι"},{key:"&Kappa;",value:"Κ"},{key:"&Lambda;",value:"Λ"},{key:"&Mu;",value:"Μ"},{key:"&Nu;",value:"Ν"},{key:"&Xi;",value:"Ξ"},{key:"&Omicron;",value:"Ο"},{key:"&Pi;",value:"Π"},{key:"&Rho;",value:"Ρ"},{key:"&Sigma;",value:"Σ"},{key:"&Tau;",value:"Τ"},{key:"&Upsilon;",value:"Υ"},{key:"&Phi;",value:"Φ"},{key:"&Chi;",value:"Χ"},{key:"&Psi;",value:"Ψ"},{key:"&Omega;",value:"Ω"},{key:"&alpha;",value:"α"},{key:"&beta;",value:"β"},{key:"&gamma;",value:"γ"},{key:"&delta;",value:"δ"},{key:"&epsilon;",value:"ε"},{key:"&zeta;",value:"ζ"},{key:"&eta;",value:"η"},{key:"&theta;",value:"θ"},{key:"&iota;",value:"ι"},{key:"&kappa;",value:"κ"},{key:"&lambda;",value:"λ"},{key:"&mu;",value:"μ"},{key:"&nu;",value:"ν"},{key:"&xi;",value:"ξ"},{key:"&omicron;",value:"ο"},{key:"&pi;",value:"π"},{key:"&rho;",value:"ρ"},{key:"&sigmaf;",value:"ς"},{key:"&sigma;",value:"σ"},{key:"&tau;",value:"τ"},{key:"&upsilon;",value:"υ"},{key:"&phi;",value:"φ"},{key:"&chi;",value:"χ"},{key:"&psi;",value:"ψ"},{key:"&omega;",value:"ω"},{key:"&thetasym;",value:"ϑ"},{key:"&Upsih;",value:"ϒ"},{key:"&piv;",value:"ϖ"},{key:"&ndash;",value:"–"},{key:"&mdash;",value:"—"},{key:"&lsquo;",value:"‘"},{key:"&rsquo;",value:"’"},{key:"&sbquo;",value:"‚"},{key:"&ldquo;",value:"“"},{key:"&rdquo;",value:"”"},{key:"&bdquo;",value:"„"},{key:"&dagger;",value:"†"},{key:"&Dagger;",value:"‡"},{key:"&bull;",value:"•"},{key:"&hellip;",value:"…"},{key:"&permil;",value:"‰"},{key:"&prime;",value:"′"},{key:"&Prime;",value:"″"},{key:"&lsaquo;",value:"‹"},{key:"&rsaquo;",value:"›"},{key:"&oline;",value:"‾"},{key:"&frasl;",value:"⁄"},{key:"&euro;",value:"€"},{key:"&image;",value:"ℑ"},{key:"&weierp;",value:"℘"},{key:"&real;",value:"ℜ"},{key:"&trade;",value:"™"},{key:"&alefsym;",value:"ℵ"},{key:"&larr;",value:"←"},{key:"&uarr;",value:"↑"},{key:"&rarr;",value:"→"},{key:"&darr;",value:"↓"},{key:"&harr;",value:"↔"},{key:"&crarr;",value:"↵"},{key:"&lArr;",value:"⇐"},{key:"&UArr;",value:"⇑"},{key:"&rArr;",value:"⇒"},{key:"&dArr;",value:"⇓"},{key:"&hArr;",value:"⇔"},{key:"&forall;",value:"∀"},{key:"&part;",value:"∂"},{key:"&exist;",value:"∃"},{key:"&empty;",value:"∅"},{key:"&nabla;",value:"∇"},{key:"&isin;",value:"∈"},{key:"&notin;",value:"∉"},{key:"&ni;",value:"∋"},{key:"&prod;",value:"∏"},{key:"&sum;",value:"∑"},{key:"&minus;",value:"−"},{key:"&lowast;",value:"∗"},{key:"&radic;",value:"√"},{key:"&prop;",value:"∝"},{key:"&infin;",value:"∞"},{key:"&ang;",value:"∠"},{key:"&and;",value:"∧"},{key:"&or;",value:"∨"},{key:"&cap;",value:"∩"},{key:"&cup;",value:"∪"},{key:"&int;",value:"∫"},{key:"&there4;",value:"∴"},{key:"&sim;",value:"∼"},{key:"&cong;",value:"≅"},{key:"&asymp;",value:"≈"},{key:"&ne;",value:"≠"},{key:"&equiv;",value:"≡"},{key:"&le;",value:"≤"},{key:"&ge;",value:"≥"},{key:"&sub;",value:"⊂"},{key:"&sup;",value:"⊃"},{key:"&nsub;",value:"⊄"},{key:"&sube;",value:"⊆"},{key:"&supe;",value:"⊇"},{key:"&oplus;",value:"⊕"},{key:"&otimes;",value:"⊗"},{key:"&perp;",value:"⊥"},{key:"&sdot;",value:"⋅"},{key:"&lceil;",value:"⌈"},{key:"&rceil;",value:"⌉"},{key:"&lfloor;",value:"⌊"},{key:"&rfloor;",value:"⌋"},{key:"&lang;",value:"⟨"},{key:"&rang;",value:"⟩"},{key:"&loz;",value:"◊"},{key:"&spades;",value:"♠"},{key:"&clubs;",value:"♣"},{key:"&hearts;",value:"♥"},{key:"&diams;",value:"♦"}],a={"Welcome#title":"Welcome title","Welcome#subTitle":"Welcome subtitle","Welcome#longText":"Paragraph","About#title#single":"Title","About#title#list":"Title/3","About#longText#single":"Paragraph","About#longText#list":"Paragraph","About#subTitle#single":"Subtitle","About#subTitle#list":"Subtitle/2","Inner_about#title#single":"Title","Inner_about#title#list":"Title/3","Inner_about#longText#single":"Paragraph","Inner_about#longText#list":"Paragraph","Inner_about#subTitle#single":"Subtitle","Inner_about#subTitle#list":"Subtitle/2","Portfolio#title":"Title","Portfolio#subTitle":"Subtitle","Portfolio#longText":"Paragraph","Homepage_about#title#single":"Title","Homepage_about#title#list":"Title/3","Homepage_about#longText#single":"Paragraph","Homepage_about#longText#list":"Paragraph","Homepage_about#subTitle#single":"Subtitle","Homepage_about#subTitle#list":"Subtitle/2","Service#title#single":"Title","Service#title#list":"Title/3","Service#longText#single":"Paragraph","Service#longText#list":"Paragraph","Service#subTitle#single":"Subtitle","Service#subTitle#list":"Subtitle/2","TeamMember#title#single":"Title","TeamMember#title#list":"Title/3","TeamMember#subTitle#single":"Subtitle","TeamMember#subTitle#list":"Subtitle/2","TeamMember#longText#single":"Paragraph","TeamMember#longText#list":"Paragraph","Product#title#single":"Title","Product#title#list":"Title/3","Product#longText#single":"Paragraph","Product#longText#list":"Paragraph","Product#subTitle#single":"Subtitle","Product#subTitle#list":"Subtitle/2","Testimonial#title#single":"Title/3","Testimonial#title#list":"Title/3","Testimonial#subTitle#single":"Subtitle/2","Testimonial#subTitle#list":"Subtitle/2","Testimonial#longText#single":"Testimonial paragraph","Testimonial#longText#list":"Testimonial paragraph list","Quote#subTitle#single":"Subtitle/2","Quote#title#single":"Subtitle/2","Quote#title#list":"Subtitle/2","Quote#subTitle#list":"Subtitle/2","Quote#longText#single":"Testimonial paragraph","Quote#longText#list":"Testimonial paragraph list","Project#title#single":"Title","Project#title#list":"Title/3","Project#longText#single":"Paragraph","Project#longText#list":"Paragraph","Project#subTitle#single":"Subtitle","Project#subTitle#list":"Subtitle/2","Client#title#single":"Title/2","Client#title#list":"Title/2","Client#longText#single":"Paragraph","Client#longText#list":"Paragraph","Client#subTitle#single":"Subtitle/2","Client#subTitle#list":"Subtitle/2","Feature#title#single":"Title","Feature#title#list":"Title/3","Feature#longText#single":"Paragraph","Feature#longText#list":"Paragraph","Feature#subTitle#single":"Subtitle","Feature#subTitle#list":"Subtitle/2","Facility#title#single":"Title","Facility#title#list":"Title/3","Facility#longText#single":"Paragraph","Facility#longText#list":"Paragraph","Facility#subTitle#single":"Subtitle","Facility#subTitle#list":"Subtitle/2","SpecialOffer#title#single":"Title","SpecialOffer#title#list":"Title/3","SpecialOffer#longText#single":"Paragraph","SpecialOffer#longText#list":"Paragraph","SpecialOffer#subTitle#single":"Subtitle","SpecialOffer#subTitle#list":"Subtitle/2","Membership#title#single":"Title","Membership#title#list":"Title/3","Membership#longText#single":"Paragraph","Membership#longText#list":"Paragraph","Membership#subTitle#single":"Subtitle","Membership#subTitle#list":"Subtitle/2","Donation#title#single":"Title","Donation#title#list":"Title/3","Donation#longText#single":"Paragraph","Donation#longText#list":"Paragraph","Donation#subTitle#single":"Subtitle","Donation#subTitle#list":"Subtitle/2","FAQ#title#single":"Title/2","FAQ#title#list":"Title/2","FAQ#longText#single":"Paragraph","FAQ#longText#list":"Paragraph","Event#title#single":"Title","Event#title#list":"Title/3","Event#longText#single":"Paragraph","Event#longText#list":"Paragraph","Event#subTitle#single":"Event subtitle","Event#subTitle#list":"Event subtitle/2","News#title#single":"Title","News#title#list":"Title/3","News#longText#single":"Paragraph","News#longText#list":"Paragraph","News#subTitle#single":"Subtitle","News#subTitle#list":"Subtitle/2","OpeningHours#title":"Title/2","OpeningHours#subTitle":"Subtitle/2","OpeningHours#longText":"Paragraph","CV#title#single":"Title/2","CV#title#list":"Title/2","CV#longText#single":"Paragraph","CV#longText#list":"Paragraph","CV#subTitle#single":"Subtitle/2","CV#subTitle#list":"Subtitle/2","Careers#title#single":"Title/2","Careers#title#list":"Title/2","Careers#longText#single":"Paragraph","Careers#longText#list":"Paragraph","Careers#subTitle#single":"Subtitle/2","Careers#subTitle#list":"Subtitle/2","Contact#title":"Title","Contact#address":"Paragraph","Contact#ContactFormTitle":"Subtitle/2","Contact#fax":"Paragraph","Contact#longText":"Paragraph","Contact#zipCode":"Paragraph","Contact#street":"Paragraph","Contact#city":"Paragraph","Contact#state":"Paragraph","Contact#country":"Paragraph","Contact#email":"Paragraph","Contact#phoneNumber":"Paragraph","Contact#form":"Paragraph","Widget#title#single":"Title","Widget#title#list":"Title","Widget#longText#single":"Paragraph","Widget#longText#list":"Paragraph","Widget#subTitle#single":"Widget subtitle","Widget#subTitle#list":"Widget subtitle","GeneralDescription#title":"Header title","GeneralDescription#subTitle":"Header subtitle","GeneralDescription#businessType":"Paragraph","GeneralDescription#yearFounded":"Paragraph","GeneralDescription#founder":"Paragraph","GeneralDescription#companySize":"Paragraph","GeneralDescription#email":"Paragraph","GeneralDescription#phoneNumber#single":"Paragraph","PageHeader#title":"Page header","PageHeader#subTitle":"Subtitle/2","PageHeader#longText":"Paragraph","ListHeader#title":"Title","ListHeader#subTitle":"Subtitle","ListHeader#longText":"Paragraph","ListFooter#longText":"Paragraph",titleFallback:"Subtitle",subTitleFallback:"Subtitle/2",longTextFallback:"Paragraph",otherFallback:"Subtitle/2","Contact#map#single":"Paragraph","Contact#label#single":"Label","FooterGeneralDescription#copyrightMSG#single":"Menu/Copyright","FooterGeneralDescription#email#single":"Paragraph","FooterGeneralDescription#label#single":"Label","FooterGeneralDescription#title#single":"Footer title","FooterGeneralDescription#phoneNumber#single":"Paragraph","FooterGeneralDescription#fax#single":"Paragraph","FooterGeneralDescription#address#single":"Paragraph","GetSubscribers_Widget#widget#single":"Title","Instagram_Widget#widget#single":"Title","Chat_Widget#widget#single":"Title","TpaDynamic#title#single":"Title","Stores#title#single":"Title","Events#widget#single":"Title","Events_Single#widget#single":"Title","Events_Multiple#widget#single":"Title","Video_Widget#widget#single":"Title","Stores_Product_Widget#widget#single":"Title","Bookings#title#single":"Title","PhotoAlbums#title#single":"Title","Blog#title#single":"Title","Blog2#title#single":"Title","Forum#title#single":"Title","Stores_Slider_Gallery_Widget#widget#single":"Title","Stores_Shopping_Cart_Widget#widget#single":"Title","Stores_Thank_You_Widget#widget#single":"Title","Stores_Grid_Gallery_Widget#widget#single":"Title","Blog_Single_Post_Widget#widget#single":"Title","Stores_Product_specific_Widget#widget#single":"Title","Blog_Post_Gallery#widget#single":"Title","Music_Widget#widget#single":"Title","BandsInTown_Widget#widget#single":"Title","ProGallery_Widget#widget#single":"Title","Tpa_Header#title":"Title","Tpa_Header#subTitle":"Subtitle","Tpa_Header#longText":"Paragraph"};t.getCategoryOfCE=function(e,t,i){if("button"===t)return"BTN";var n=e||"GeneralDescription";"GeneralDescription"===e&&(n="Footer"+n);var o=n+"#"+t,r=a[o+"#"+(i?"list":"single")]||a[o];return r||(r=a[t+"Fallback"]||a.otherFallback),r}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaType={IMAGE:"image",CLIPART:"clipart",SHAPE:"shape",VIDEO:"video",EXTVIDEO:"extVideo"},t.SectionMediaType={IMAGE:"image",CLIPART:"clipart",SHAPE:"shape",GALLERY:"gallery",VIDEO:"video",PATTERN:"pattern",EXTVIDEO:"extVideo"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o){this.$timeout=e,this.assistantManager=t,this.$q=i,this.$element=n,this.options=o,this.options=Object.assign({selectedSelector:".-selected",scrollableContainerSelector:".cc-panel-body",selectedIconSize:12},this.options)}return e.prototype.scrollToSelected=function(e){var t=this;return void 0===e&&(e="animated"),!1!==this.assistantManager.getCustomTaskData("scrollToSelectedBackground")?this.$q(function(i){t.$timeout(function(){var n=t.$element.find(t.options.selectedSelector);t.doAnimatedVerticalScroll({childToScrollTo:n,scrollableContainer:t.$element.find(t.options.scrollableContainerSelector),calculateScroll:function(e){return Math.max(0,e-(t.options.considerSelectedIcon?t.options.selectedIconSize:0))},duration:"animated"===e?1e3:0}).then(i)},100)}):this.$q.when()},e.prototype.doAnimatedVerticalScroll=function(e){var t=e.calculateScroll,i=e.childToScrollTo,n=e.scrollableContainer,o=e.duration;return this.$q(function(e){n.animate({scrollTop:t(i[0].offsetTop)},o,function(){e()})})},e}();t.ScrollTo=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n){var o=this;this.consumerBiLogger=e,this.consumerBiLoggerHelpers=t,this.flags=i,this.$window=n,this.handlers={failToFitLayoutCanTFindAProperLayout:{start:function(e){var t=e.nodeId,i=e.sectionType,n=e.sectionAlias,r=e.reason;return o.consumerBiLogger.contentEditor.failToFitLayoutCanTFindAProperLayout(t,i,n,r)}},failoverReArrangeLayout:{start:function(e){var t=e.nodeId,i=e.sectionType,n=e.sectionAlias;return o.consumerBiLogger.contentEditor.failoverReArrangeLayout(t,i,n)}},failoverReArrangeSolution:{start:function(e){var t=e.nodeId,i=e.sectionType,n=e.sectionAlias;return o.consumerBiLogger.contentEditor.failoverReArrangeSolution(t,i,n)}},imageCropZoomInZoomOut:{start:function(e){var t=e.nodeId,i=e.sectionType,n=e.sectionAlias,r=e.zoomType;return o.consumerBiLogger.contentEditor.imageCropZoomInZoomOut(t,i,n,r)}},imageCropSuccess:{end:function(e,t){var i=t.nodeId,n=t.sectionType,r=t.sectionAlias;return o.consumerBiLogger.contentEditor.imageCropSuccess(i,n,r)}},imageCropCancel:{end:function(e,t){var i=t.nodeId,n=t.sectionType,r=t.sectionAlias;return o.consumerBiLogger.contentEditor.imageCropCancel(i,n,r)}}}}return e.prototype.mark=function(e){e.init?this.markInit(e):this.markHandler(e.name,e.data)},e.prototype.measure=function(e,t){e.init?this.measureInit(e,t):this.measureHandler(e.name,t,e.data)},e.prototype.markHandler=function(e,t){var i=this.handlers[e];i&&"function"==typeof i.start&&i.start(t)},e.prototype.markInit=function(e){var t=e.parent?e.parent:e.name,i=e.parent?e.name:"";if(this.consumerBiLogger.builder.loadingPhaseInInitStart(t,i),this.flags.debugMode){var n=this.consumerBiLoggerHelpers.getLoadTime();console.log("%c"+(i?"  ":"")+">> "+t+(i?"::":"")+i+" %c"+n+"ms","color:#0066ff","color:#00cc00"),this.$window.marks=this.$window.marks||[],this.$window.marks.push({name:t+"."+i,start:n})}},e.prototype.measureInit=function(e,t){var i=e.parent?e.parent:e.name,o=e.parent?e.name:"";if(this.consumerBiLogger.builder.loadingPhaseInInitComplete(t,i,o),this.flags.debugMode){var r=this.consumerBiLoggerHelpers.getLoadTime();console.log("%c"+(o?"  ":"")+"<< "+i+(o?"::":"")+o+" %c"+t+"ms %c"+r+"ms","color:#8c1aff","color:#e68a00","color:#00cc00");var a=n.find(this.$window.marks,{name:i+"."+o});a.duration=t,a.endTime=r}},e.prototype.measureHandler=function(e,t,i){var n=this.handlers[e];n&&"function"==typeof n.end&&n.end(t,i)},e}();t.MonitoringBI=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stoppable=function e(t){var i=!1;return{then:function(n,o,r){return e(t.then(n&&function(e){return!i&&n(e)},o&&function(e){return!i&&o(e)},r&&function(e){return!i&&r(e)}))},catch:function(n){return e(t.catch(n&&function(e){return!i&&n(e)}))},finally:function(n){return e(t.finally(n&&function(){return!i&&n()}))},stop:function(){i=!0}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.editableColor={value:this.color},e.$watch(function(){return t.color},function(e,i){e!==i&&(t.editableColor.value=e)})}return e.$inject=["$scope"],e.prototype.colorChange=function(e){"#"===e[0]&&"#"===e[1]&&(this.editableColor.value=e.slice(1,e.length),this.setColor()),this.onTextChanging&&this.onTextChanging({color:e})},e.prototype.selectColorText=function(e){var t=e.target,i=0;"#"===t.value[0]&&(i=1),t.setSelectionRange(i,t.value.length)},e.prototype.setColor=function(){this.color!==this.editableColor.value&&(e.isColorValid(this.editableColor.value)?("#"!==this.editableColor.value[0]&&(this.editableColor.value="#"+this.editableColor.value),this.color=this.editableColor.value,this.onTextChange({color:this.color})):this.onTextFixed&&this.onTextFixed({color:this.color}),this.editableColor.value=this.color)},e.isColorValid=function(e){return/^#?[0-9A-F]{6}$/i.test(e)},e}();t.HexInput=n,angular.module("siteGeneratorStaticsConsumerAppInternal").component("hexInput",{templateUrl:"views/design/hex-input.html",controller:n,bindings:{color:"=",onTextChange:"&",onTextChanging:"&?",onTextFixed:"&?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),o=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m){this.$scope=e,this.$q=t,this.$translate=i,this.CONSUMER_DIALOGS=n,this.$element=o,this.$timeout=r,this.sectionBackgroundManager=a,this.initService=s,this.previewScale=l,this.applicationState=c,this.assistantManager=d,this.mediaGalleryAdapter=u,this.mediaGallery=p,this.CcDialogBuilder=g,this.consumerBiLogger=h,this.flags=m,this.mediaTypes=cc.MediaPreviewType,this.initialized=!1,this.showBackground=!1,this.init()}return e.$inject=["$scope","$q","$translate","CONSUMER_DIALOGS","$element","$timeout","sectionBackgroundManager","initService","previewScale","applicationState","assistantManager","mediaGalleryAdapter","mediaGallery","CcDialogBuilder","consumerBiLogger","flags"],Object.defineProperty(e.prototype,"automationAttribute",{get:function(){var t=this.sectionBackgroundManager.mode;return e.AUTOMATION_LABELS[t.toUpperCase()]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHeaderMode",{get:function(){return"header"===this.sectionBackgroundManager.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldShowHiddenParts",{get:function(){return this.isHeaderMode&&!this.showBackground},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldShowBackdrop",{get:function(){return this.shouldShowHiddenParts||this.displaySettingsPopup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldShowBackground",{get:function(){return this.initialized&&!!this.selectedBackground},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){switch(this.sectionBackgroundManager.mode){case"header":return this.$translate.instant("builder.section-background.panel-headline-text-header");case"list":default:return this.$translate.instant("builder.section-background.panel-headline-text")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedBackground",{get:function(){return this.backgrounds.find(function(e){return e.isSelected})},enumerable:!0,configurable:!0}),e.prototype.selectBackground=function(e){var t=this;if(!e.isSelected)return this.$q(function(i){var n=t.backgrounds.find(function(e){return e.isSelected});t.unSelectSelected(n),e.isSelected=!0,t.sectionBackgroundManager.setBackground(e.org),i()})},e.prototype.closePanel=function(){var e=this;this.$scope.$applyAsync(function(){e.previewScale.setScaleFactor(n.PreviewScale.MaxScaleFactor),e.applicationState.goToBuilder(!0)})},e.prototype.goToPrevState=function(){this.applicationState.goBack()},e.prototype.onHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.section.sectionMedia.patternsPanel"),this.CONSUMER_DIALOGS.SECTION_BACKGROUNDS_HELP)},e.prototype.init=function(){var t=this;this.initService.loaded().then(function(){t.backgrounds=[],t.allBackgrounds=t.sectionBackgroundManager.calculateBackgrounds(),t.addBackgrounds(e.ADD_BACKGROUNS_START),t.initialized=!0,t.showBackground=t.shouldShowBackground,t.$timeout(function(){t.bindScrollEvent()})})},e.prototype.addBackgrounds=function(t){void 0===t&&(t=e.ADD_BACKGROUNS_STEP);var i,n=this.backgrounds.length,o=n+t;(i=this.backgrounds).push.apply(i,this.allBackgrounds.slice(n,o))},e.prototype.bindScrollEvent=function(){var t=this;this.$element.find(".cc-panel-body").scroll(function(i){var n=i.target,o=n.scrollTop,r=n.scrollHeight-(o+n.clientHeight);t.allBackgrounds.length>t.backgrounds.length&&r<e.INFINITE_SCROLL_THRESHOLD&&t.$scope.$apply(function(){return t.addBackgrounds()})})},e.prototype.unSelectSelected=function(e){e||(e=this.backgrounds.find(function(e){return e.isSelected})),e&&(e.isSelected=!1)},e.ADD_BACKGROUNS_START=12,e.ADD_BACKGROUNS_STEP=5,e.MINIMUM_PATTERNS=5,e.AUTOMATION_LABELS={HEADER:"section_list_header_bg_panel",LIST:"section_list_bg_panel",NONE:"section_bg_panel‎"},e.INFINITE_SCROLL_THRESHOLD=400,e}();t.SectionBackgroundPanel=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(1);t.HeaderProperties={FIX:"fix",TRANSPARENT:"transparent"};var r=function(){function e(e,t,i,o,r,a,s,l,c,d,u,p,g,h,m,f){var v=this;this.undoRedo=e,this.consumerBiLogger=t,this.wizardService=i,this.CONSUMER_DIALOGS=o,this.mergedHeaderService=r,this.CcDialogBuilder=a,this.$translate=s,this.clientTopology=l,this.headerFooterDecorator=p,this.$q=g,this.flags=h,this.assistantVideoService=m,this.$element=f,this.TRANSPARENT_BUTTON_SELECTOR='[data-hook="header-type-transparent"]',this.unsubscribers=[],this.homepage=c.getPageNodeById(c.homePageId),this.isCurrentPageHomepage=d.selectedPageIsHome(),this.isFixed=i.isFixedHeader(),this.setTransparency(),this.unsubscribers.push(n.PubSub.subscribe(n.events.HEADER_FOOTER_BG_CHANGED,function(){return v.setTransparency()}))}return e.$inject=["undoRedo","consumerBiLogger","wizardService","CONSUMER_DIALOGS","mergedHeaderService","CcDialogBuilder","$translate","clientTopology","modelTree","modelTreeHelpers","storyServices","headerFooterDecorator","$q","flags","assistantVideoService","$element"],Object.defineProperty(e.prototype,"isSolid",{get:function(){return!this.isFixed&&!this.isTransparent},enumerable:!0,configurable:!0}),e.prototype.$onInit=function(){this.flags.mergedHeaderPhase2&&this.registerEasterEgg()},e.prototype.setTransparency=function(){var e={validateIsFixed:!1,validateDarkHeader:!1};this.flags.mergedHeaderPhase2&&(e.validateHeaderSolution=!1),this.isTransparent=this.mergedHeaderService.isHeaderMerged(this.homepage)&&this.mergedHeaderService.isHeaderMergeable(this.homepage,e),this.enableTransparent=this.isTransparent||this.mergedHeaderService.isHeaderMergeable(this.homepage,e)},e.prototype.registerEasterEgg=function(){var e=this;$(this.$element).on("click.easter",this.TRANSPARENT_BUTTON_SELECTOR,function(t){3===t.detail&&e.assistantVideoService.onAssistantVideoClicked(t,"design.header.type.easter-egg-url")})},e.prototype.$onDestroy=function(){$(this.$element).off("click.easter"),this.unsubscribers.forEach(function(e){return e()})},e.prototype.setSolid=function(){this.setHeaderProperties(!1,!1,o.BIHeaderTypes.Solid)},e.prototype.setTransparent=function(){this.enableTransparent&&this.setHeaderProperties(!1,!0,o.BIHeaderTypes.Transparent)},e.prototype.setFixed=function(){this.setHeaderProperties(!0,!1,o.BIHeaderTypes.Fixed)},e.prototype.setHeaderProperties=function(e,i,r){var a=this;if(this.isFixed!==e||this.isTransparent!==i){this.consumerBiLogger.sectionDesign.changeHeaderTransparencyStart(o.BIInitator.User,r);var s={};this.isFixed!==e&&(s[t.HeaderProperties.FIX]=this.wizardService.setFixedHeader(e)),this.isTransparent!==i&&(s[t.HeaderProperties.TRANSPARENT]=this.headerFooterDecorator.setHeaderMerged(i,this.homepage)),this.isFixed=e,this.isTransparent=i,this.undoRedo.captureOperation(!0,!0),this.$q.all(s).then(function(e){return a.onUpdated&&a.onUpdated(e[t.HeaderProperties.TRANSPARENT])}).then(function(){return n.PubSub.fire(n.events.HEADER_TYPE_CHANGED)}).then(function(){return a.consumerBiLogger.sectionDesign.changeHeaderTransparencySuccess(o.BIInitator.User,r)})}},e.prototype.getHoverImgURL=function(e){return this.clientTopology.staticsUrl+"/assets/common-controls/animated/header-design/x2/"+e+".gif"},e.prototype.onDisabledTransparentTooltipLinkClick=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.switch-design.header"),this.CONSUMER_DIALOGS.DISABLED_TRANSPARENT_HEADER_TOOLTIP_HELP)},e}();t.HeaderType=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.fetch=function(){if(!window.performance||!window.performance.getEntriesByType)return null;var e=window.performance.getEntriesByType("resource").find(function(e){return e.name.includes("_api/onboarding-server-web/story")&&!e.name.includes("metadata")});return e?{storySize:e.decodedBodySize,storyGzipSize:e.transferSize}:null},e}();t.storySizeFetcher=new n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.knownUserErrors=["Not Found","Forbidden","Unauthorized"]}return e.prototype.isUserError=function(e){return e&&e.statusText&&this.knownUserErrors.indexOf(e.statusText)>-1},e}();t.userErrorDetector=new n},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(182),r=i(15),a=function(e){function t(t,i,n,o,r,a,s){var l=e.call(this,t,i,n,o,r)||this;return l.slideShowPresetUtils=a,l.wizUtils=s,l.siteConverterPresetScoringMethods=[{scoringCriterion:"extVideo",scoringMethod:l.getExtVideoScore},{scoringCriterion:"slideshow",scoringMethod:l.getSlideshowPresetsScore},{scoringCriterion:"listType",scoringMethod:l.getListTypeScore}],l}return n(t,e),t.prototype.getScore=function(t,i,n){return this.wizSection=n,e.prototype.innerGetScore.call(this,t,i,this.siteConverterPresetScoringMethods)},t.prototype.getMinPriority=function(){return this.wizSection.extraInfo.minPriority},t.prototype.getMaxPriority=function(){return this.wizSection.extraInfo.maxPriority},t.prototype.getExtVideoScore=function(){var e=this.getPresetMediaType(),t=e===r.PresetMediaTypes.IMAGE,i=0;return!t&&this.areMediasYoutubeOrVimeo()&&(i=this.siteConverterConf.SCORING.extVideo.penalty),{uglyScore:i,debug:{presetMediaType:e,isInlineImage:t}}},t.prototype.getSlideshowPresetsScore=function(){var e,t={};return t.notListOrNotSlideshow=!this.node.isList()||!this.isSlideshow(),t.notListOrNotSlideshow?e=0:(t.presetSupportsSlideshow=this.isPresetSupportsSlideshow(),e=t.presetSupportsSlideshow?-1*this.siteConverterConf.SCORING.slideshow.penalty:this.siteConverterConf.SCORING.slideshow.penalty),{uglyScore:e,debug:t}},t.prototype.getListTypeScore=function(){var e=0,t=!1,i=this.getItemsInRow();return 1===i&&(this.isHorizontalListSection()||this.isGridListSection())&&(t=!0,e=this.siteConverterConf.SCORING.listType.penalty),{uglyScore:e,debug:{itemsInRow:i,isHorizontalList:t}}},t.prototype.getPresetMediaType=function(){return this.groupItems[0].layouts[0].mediaType},t.prototype.isPresetSupportsSlideshow=function(){return this.slideShowPresetUtils.isPresetSupportSlideShow(this.presetDetails.preset)},t.prototype.areMediasYoutubeOrVimeo=function(){return this.wizUtils.areMediasYoutubeOrVimeo(this.wizSection,t.VIDEO_REGEX)},t.prototype.isSlideshow=function(){return this.wizUtils.isSlideshow(this.wizSection)},t.prototype.isHorizontalListSection=function(){return this.wizUtils.isListSection(this.wizSection)&&this.wizUtils.isHorizontalList(this.wizSection)},t.prototype.isGridListSection=function(){return this.wizUtils.isListSection(this.wizSection)&&this.wizUtils.isGrid(this.wizSection)},t.prototype.isCircularMedia=function(){var t=e.prototype.isCircularMedia.call(this);return this.wizSection.extraInfo.isCircularMedia=t,t},t.VIDEO_REGEX=/(?:youtube.com|vimeo.com|youtu.be)/,t}(o.PresetScoringCalculator);t.SiteConverterPresetScoringCalculator=a,angular.module("siteGeneratorStaticsConsumerAppInternal").factory("siteConverterPresetScoringCalculatorFactory",["siteConverterConf","flags","presetListItemFeatureDetector","presetFeatureDetector","applicationParameters","slideShowPresetUtils","wizUtils",function(e,t,i,n,o,r,s){return function(){return new a(e,t,i,n,o,r,s)}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=i(0),r=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u){this.$q=e,this.$state=t,this.$timeout=i,this.$window=n,this.$compile=o,this.$rootScope=r,this.spinnerService=a,this.ELEMENT_SELECTOR=s,this.storyServices=l,this.applicationParameters=c,this.flags=d,this.$injector=u,this.DEFAULT_TRIGGER="click",this.DELAY_BEFORE_SPINNER_WAIT=800,this.LISTENER_NAMESPACE="obassistant",this.TOUR_STEP_TOOLTIP_COMPONENT='<assistant-tooltip action="action"></assistant-tooltip>',this.STORAGE_KEY="ob_tasks",this.OLD_STORAGE_KEY="ob_tours",this.tourToAssistantNameDictionary={previewTour:"previewTask",entireWebsiteDesign:"entireWebsiteDesignTask",editContentTour:"editContentTask",customizeSectionDesign:"customizeSectionDesign",pageSEOTour:"pageSEOTask",changeLayoutTour:"changeLayoutTour",addSectionTour:"addSectionTask",welcomeTour:"welcomeTask",addNewPageTour:"addNewPageTask",animationTour:"animationTask"},this.$=n.$}return e.$inject=["$q","$state","$timeout","$window","$compile","$rootScope","spinnerService","ELEMENT_SELECTOR","storyServices","applicationParameters","flags","$injector"],e.prototype.compileTemplateContent=function(e,t,i,n){var o=this.$rootScope.$new();o.action=i,o.task=t,o.assistantManager=e,o.flags=n;var r=i.tooltip&&i.tooltip.template||this.TOUR_STEP_TOOLTIP_COMPONENT;return this.$compile(r)(o)},e.prototype.redirectToState=function(e){if(e)return this.$state.go(e)},e.prototype.triggerElement=function(e,t){this.$timeout(function(){$(e).trigger(t)})},e.prototype.registerActionTrigger=function(e,t){var i=this;return this.$timeout(function(){i.$(e.element).one(i.getNamespacedTrigger(e.trigger),e.descendant,function(){e.callback&&e.callback(),t(e.intent)})})},e.prototype.unregisterActionTrigger=function(e){this.$(e.element).off(this.getNamespacedTrigger(e.trigger))},e.prototype.replaceElementSelectorPlaceholderWithValue=function(e,t){return e?e.replace(this.ELEMENT_SELECTOR,t):t},e.prototype.waitForSpinner=function(e){var t=this;return e?this.$timeout(function(){return t.spinnerService.waitForStop()},this.DELAY_BEFORE_SPINNER_WAIT):this.$q.when()},e.prototype.delayAction=function(e){return void 0===e&&(e=0),this.$timeout(angular.noop,e)},e.prototype.getElementSelector=function(e){var t=e.selector;return e.isRandom&&(t=this.getRandomElementSelector(e)),t},e.prototype.getRandomElementSelector=function(e){e.randomElementsBank&&e.randomElementsBank.length||(e.randomElementsBank=this.createArrayAccordingToNumberOfElementsOnScreen(e.selector));var t=this.getAndRemoveRandomElementFromArray(e.randomElementsBank);return this.getIndexedElementSelector(e.selector,t)},e.prototype.createArrayAccordingToNumberOfElementsOnScreen=function(e){return o.range(0,this.$(e).length)},e.prototype.getAndRemoveRandomElementFromArray=function(e){return e.splice(Math.floor(Math.random()*e.length),1)[0]},e.prototype.getIndexedElementSelector=function(e,t){return e+":eq("+t+")"},e.prototype.getNamespacedTrigger=function(e){return void 0===e&&(e=this.DEFAULT_TRIGGER),e+"."+this.LISTENER_NAMESPACE},e.prototype.getDefaultExitTrigger=function(e){return void 0===e&&(e=[]),o.find(e,{isDefault:!0})||e[0]},e.prototype.broadcastAssistantEvent=function(e){for(var t,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(t=this.$rootScope).$broadcast.apply(t,[e].concat(i))},e.prototype.openAddTopBarMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("openAddTopBarMenu",!0)},e.prototype.closeAddTopBarMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("openAddTopBarMenu",!1)},e.prototype.openSiteDesignTopBarMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("openSiteDesignTopBarMenu",!0)},e.prototype.closeSiteDesignTopBarMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("openSiteDesignTopBarMenu",!1)},e.prototype.showSectionDesignMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("showSectionDesignMenu",!0)},e.prototype.hideSectionDesignMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("showSectionDesignMenu",!1)},e.prototype.showSiteDesignMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("showSiteDesignMenu",!0)},e.prototype.hideSiteDesignMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("showSiteDesignMenu",!1)},e.prototype.openPagesTopBarMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("openPagesTopBarMenu",!0)},e.prototype.closePagesTopBarMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("openPagesTopBarMenu",!1)},e.prototype.hideListSpanButtons=function(){this.$injector.get("assistantManager").setCustomTaskData("hideListSpanButtons",!0)},e.prototype.showListSpanButtons=function(){this.$injector.get("assistantManager").setCustomTaskData("hideListSpanButtons",!1)},e.prototype.getTaskDataFromStorage=function(e){void 0===e&&(e=this.STORAGE_KEY);var t=this.getData(e);if(this.storyServices.story&&this.storyServices.story.id)return t&&t[this.storyServices.story.id]},e.prototype.saveTaskData=function(e){var t=this.getData()||{};this.storyServices.story&&(t[this.storyServices.story.id]=t[this.storyServices.story.id]||{},t[this.storyServices.story.id][e.id]={id:e.id,isComplete:e.isComplete}),this.storeItem(this.STORAGE_KEY,JSON.stringify(t))},e.prototype.saveTasksData=function(e){var t=this.getData(this.STORAGE_KEY)||{};this.storyServices.story&&(t[this.storyServices.story.id]=e),this.storeItem(this.STORAGE_KEY,JSON.stringify(t))},e.prototype.removeDataFromStorage=function(e){void 0===e&&(e=this.STORAGE_KEY),this.isUseBlobStory(e)?this.storyServices.story.tourState[e]=null:this.$window.localStorage.removeItem(e)},e.prototype.convertLocalStorageToursToTasks=function(){var e=this,t=this.getData(this.OLD_STORAGE_KEY);if(t&&t.sites){var i=Object.keys(t.sites).reduce(function(i,n){return i[n]=e.normalizeOldTourDataToAssistantData(t.sites[n].tours),i},{});this.removeDataFromStorage(this.OLD_STORAGE_KEY),this.storeItem(this.STORAGE_KEY,JSON.stringify(i))}},e.prototype.isUseBlobStory=function(e){return e===this.STORAGE_KEY},e.prototype.storeItem=function(e,t){this.isUseBlobStory(e)&&this.storyServices.story?this.storyServices.story.tourState[e]=t:this.$window.localStorage.setItem(e,t)},e.prototype.getData=function(e){var t;return void 0===e&&(e=this.STORAGE_KEY),(t=this.isUseBlobStory(e)&&this.storyServices.story&&this.storyServices.story.tourState&&this.storyServices.story.tourState[e]?this.storyServices.story.tourState[e]:this.$window.localStorage.getItem(e))?JSON.parse(t):void 0},e.prototype.normalizeOldTourDataToAssistantData=function(e){var t=this;return e.reduce(function(e,i){var n=i.name;if("fontColorTour"===n)e.fontDesignTask={id:"fontDesignTask",isComplete:i.isComplete},e.colorDesignTask={id:"colorDesignTask",isComplete:i.isComplete};else{var o=t.tourToAssistantNameDictionary[n];o&&(e[o]={id:o,isComplete:i.isComplete})}return e},{})},e.prototype.getActiveExperiments=function(){var e=this;return Object.keys(this.flags).filter(function(t){return!!e.flags[t]&&"$get"!==t}).map(function(t){return!0===e.flags[t]?t:t+"_"+e.flags[t]})},e.prototype.shouldAutoProvisionTPAOfType=function(e){return!!this.storyServices.story&&o.includes(this.applicationParameters.tpaTypes[e].structureIds,this.storyServices.story.structureId)},e.prototype.goToOnSliderHandled=function(e){var t,i=this;$(n.AssistantAction.HOOKS.FONT_SIZE_SLIDER).mousedown(function(){return t=!0}),window.addEventListener("mouseup",function(n){!0===t&&(i.$injector.get("assistantManager").gotoActionInActiveTask(e),t=!1)})},e}();t.AssistantUtils=r;var a=function(){function e(e,t,i){this.$q=e,this.$interval=t,this.$window=i,this.$=i.$}return e.prototype.waitUntilElementIsInDOM=function(t,i,n,o,r){var a=this;void 0===n&&(n=null),void 0===o&&(o=e.WAIT_UNTIL_ELEMENT_INTERVAL_IN_MS),void 0===r&&(r=e.WAIT_UNTIL_ELEMENT_MAX_TRIES),this.element=t,this.intervalPromise&&this.stopWaiting();var s=this.$q.defer(),l=0,c=this.$(t);return!n&&c.length||n&&n(t)?s.resolve(c):this.intervalPromise=this.$interval(function(){l++;var e=a.$(t);!n&&e.length||n&&n(t)||i()?(a.stopWaiting(),s.resolve(e)):l>=r&&(a.stopWaiting(),s.reject())},o,r),s.promise},e.prototype.stopWaiting=function(){this.intervalPromise&&(this.$interval.cancel(this.intervalPromise),console.error("assistant waiter: couldn't find "+this.element))},e.WAIT_UNTIL_ELEMENT_INTERVAL_IN_MS=400,e.WAIT_UNTIL_ELEMENT_MAX_TRIES=90,e}();t.AssistantWaitUntilElement=a,angular.module("siteGeneratorTourManagerInternal").service("assistantUtils",r).factory("assistantWaitUntilElement",["$q","$interval","$window",function(e,t,i){return function(){return new a(e,t,i)}}]).constant("ELEMENT_SELECTOR","$element")},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(4),r=i(0),a=function(){function e(e,t,i,n){this.$q=e,this.$interval=t,this.storyServices=i,this.flags=n,this.DEFAULT_POSITION_DURATION_MS=500,this.ELEMENT_TRANSITION_ACTIVE_CLASS="tour-element-transition-active"}return e.$inject=["$q","$interval","storyServices","flags"],e.prototype.trackChanges=function(e,t,i){var n=this;return void 0===t&&(t=250),this.flags.assistantRegularInterval?window.setInterval(function(){return n.notifyChangeIfNeeded(e,i)},t):this.$interval(function(){return n.notifyChangeIfNeeded(e,i)},t)},e.prototype.notifyChangeIfNeeded=function(e,t){var i=e.data("boundingClientRect"),n=this.getRoundedBoundingClientRect(e);window.requestAnimationFrame(function(){angular.equals(i,n)||t(e),e.data("boundingClientRect",n)})},e.prototype.highlightElement=function(e,t){void 0===t&&(t=!1);var i=[],n=this;$(e).addClass("intro-element"),t&&$(e).addClass("intro-element-preserve-background"),"static"===$(e).css("position")&&$(e).addClass("intro-element-relative");for(var o=$(e).parent();o.length>0&&"body"!==o.get(0).tagName.toLowerCase();){var r=o.css("zIndex"),a=parseFloat(o.css("opacity")),s=o.css("transform"),l=o.css("will-change");(/[0-9]+/.test(r)||a<1||"none"!==s&&void 0!==s||"auto"!==l)&&(o.addClass("intro-fixparent"),i.push(o)),o=$(o).parent()}return function(e,t){return function(){n.unhighlighElement(e,t)}}(e,i)},e.prototype.unhighlighElement=function(e,t){void 0===t&&(t=[]);var i=$(e);i.removeClass("intro-element"),i.removeClass("intro-element-disabled"),i.removeClass("intro-element-relative"),t.forEach(function(e){$(e).removeClass("intro-fixparent")})},e.prototype.innerPositionElement=function(e,t,i,n,o){var r=this;void 0===o&&(o=this.DEFAULT_POSITION_DURATION_MS);var a=this.$q.defer(),s=$(e);try{t=$(t);var l=$(e).get(0).getBoundingClientRect(),c=this.getInnerPositionOffset(e,t,i,n),d=!("auto"===s.css("left")||"auto"===s.css("top")),u=o/1e3;0===o||l.left===c.left&&l.top===c.top||!d?(s.removeClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),a.resolve()):(s.removeClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),$(e).one("transitionend",function(){s.removeClass(r.ELEMENT_TRANSITION_ACTIVE_CLASS),a.resolve()}),s.addClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS)),s.css("transition","left "+u+"s ease-in-out, top "+u+"s ease-in-out"),s.offset(c)}catch(e){console.error("error",e),s.removeClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),a.resolve()}return a.promise},e.prototype.outerPositionElement=function(e,t,i,n,o,r,a,s,l){var c=this;void 0===o&&(o=this.DEFAULT_POSITION_DURATION_MS),void 0===r&&(r=!0);var d=this.$q.defer();try{var u=$(e);if((t=$(t))&&t.length){var p=$(e).get(0).getBoundingClientRect(),g=this.getOuterPositionOffset(e,t,i,n,a,s),h=!("auto"===u.css("left")||"auto"===u.css("top"));r&&(u.css({left:0}),g=this.fitOffsetToScreen(g,u.outerWidth(),u.outerHeight())),u.css("transition","left "+o+"ms ease-in-out, top "+o+"ms ease-in-out"),g.top<l&&(g.top=l),u.offset(g),0===o||p.left===g.left&&p.top===g.top||!h?(u.removeClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),d.resolve()):(u.addClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),$(e).one("transitionend",function(){u.removeClass(c.ELEMENT_TRANSITION_ACTIVE_CLASS),d.resolve()}))}else u.hide(),d.resolve()}catch(e){console.error(e),d.resolve()}return d.promise},e.prototype.getOuterPositionOffset=function(e,t,i,n,r,a){void 0===r&&(r=0),void 0===a&&(a=0);e=$(e);var s=$(t).get(0).getBoundingClientRect(),l={};return n===o.AssistantPositionY.Top?(l.left=s.left+s.width/2-e.outerWidth()/2,l.top=s.top-e.outerHeight()-20):i===o.AssistantPositionX.Right?(l.left=s.right+20,l.top=s.top-e.outerHeight()/2+s.height/2):n===o.AssistantPositionY.Bottom?(l.left=s.left+s.width/2-e.outerWidth()/2,l.top=s.bottom+20):i===o.AssistantPositionX.Left&&(l.left=s.left-e.outerWidth()-20,l.top=s.top-e.outerHeight()/2+s.height/2),isNaN(l.top)||(l.top+=a),isNaN(l.left)||(l.left+=r),l},e.prototype.fitOffsetToScreen=function(e,t,i){var n,o=$("body").get(0).getBoundingClientRect();return e.left+t>o.right?(n=o.right-(e.left+t),e.left=e.left+n-30):e.left<o.left?(n=o.left-e.left,e.left=e.left+n+30):e.top+i>o.bottom&&(n=o.bottom-(e.top+i),e.top+=n-30),e},e.prototype.getInnerPositionOffset=function(e,t,i,n){void 0===i&&(i=o.AssistantPositionX.Center),void 0===n&&(n=o.AssistantPositionY.Center);var r=$(e);t=$(t);var a=$(t).get(0).getBoundingClientRect(),s={};return i===o.AssistantPositionX.Left?s.left=a.left:i===o.AssistantPositionX.Center?s.left=a.left+a.width/2-r.outerWidth()/2:i===o.AssistantPositionX.Right&&(s.left=a.right-r.outerWidth()),n===o.AssistantPositionY.Top?s.top=a.top:n===o.AssistantPositionY.Center?s.top=a.top+a.height/2-r.outerHeight()/2:n===o.AssistantPositionY.Bottom&&(s.top=a.bottom-r.outerHeight()),s},e.prototype.getRoundedBoundingClientRect=function(e){var t=$(e).get(0);if(!t)return{left:-1,right:-1,top:-1,bottom:-1,width:0,height:0};var i=t.getBoundingClientRect();return{left:Number(i.left.toFixed(0)),right:Number(i.right.toFixed(0)),top:Number(i.top.toFixed(0)),bottom:Number(i.bottom.toFixed(0)),width:Number(i.width.toFixed(0)),height:Number(i.height.toFixed(0))}},e}(),s=function(){function e(e,t,i,n,o){this.$q=e,this.tourUiHelper=t,this.$interval=i,this.$timeout=n,this.flags=o,this.CLICK_CLASS="intro-hint-click",this.CLICK_DURATION=1e3,this.MOVE_SPEED=350,this.TRACK_CHANGE_INTERVAL=400,this.isDirty=!1,this.fadeTimeInMs=250,this.hintElement=this.createHint(),angular.element("body").append(this.hintElement),this.hide(0)}return e.prototype.show=function(e){void 0===e&&(e=this.fadeTimeInMs),this.hintElement.fadeIn(e)},e.prototype.hide=function(e){void 0===e&&(e=this.fadeTimeInMs),this.hintElement.fadeOut(e),this.hintElement.css("transition","left 0s ease-in-out, top 0s ease-in-out"),this.hintElement.offset({left:-1e3,top:1e3})},e.prototype.attachTo=function(e,t,i){var n=this;if(this.attachPromise)throw"hint is already attached, try to detach first";this.targetElement=$(e);var o=this.isDirty?this.MOVE_SPEED:0,r=this.tourUiHelper.innerPositionElement(this.hintElement,this.targetElement,t,i,o);return this.attachPromise=this.tourUiHelper.trackChanges(this.targetElement,this.TRACK_CHANGE_INTERVAL,function(){n.tourUiHelper.innerPositionElement(n.hintElement,n.targetElement,t,i,n.MOVE_SPEED)}),this.isDirty=!0,r},e.prototype.detach=function(){this.attachPromise&&(this.flags.assistantRegularInterval?window.clearInterval(this.attachPromise):this.$interval.cancel(this.attachPromise),this.attachPromise=null)},e.prototype.destroy=function(){this.detach(),this.hintElement.remove()},Object.defineProperty(e.prototype,"visible",{get:function(){return!this.hintElement.hasClass("tour-hint-hide")},enumerable:!0,configurable:!0}),e.prototype.simulateClick=function(){var e=this;return this.hintElement.addClass(this.CLICK_CLASS),this.$timeout(function(){return e.hintElement.removeClass(e.CLICK_CLASS)},this.CLICK_DURATION)},e.prototype.createHint=function(){var e;return(e=angular.element("<div>")).addClass("intro-hint"),e},e}(),l=function(){function e(e){this.$timeout=e,this.customClasses=[],this.fadeTimeInMs=250}return e.prototype.show=function(e){return void 0===e&&(e=this.fadeTimeInMs),this.element.fadeIn(e),this.$timeout(angular.noop,e)},e.prototype.hide=function(e){return void 0===e&&(e=this.fadeTimeInMs),this.element.fadeOut(e),this.$timeout(angular.noop,e)},e.prototype.destroy=function(){this.element.remove()},e.prototype.addCustomClasses=function(e){var t;e&&((t=this.customClasses).push.apply(t,e),this.element.addClass(e.join(" ")))},e.prototype.removeCustomClasses=function(){this.element.removeClass(this.customClasses.join(" "))},e.prototype.addElementToBody=function(){angular.element("body").append(this.element)},e}(),c=function(e){function t(t,i,n,o,r){var a=e.call(this,o)||this;return a.$q=t,a.tourUiHelper=i,a.$interval=n,a.flags=r,a.TRACK_CHANGE_INTERVAL=400,a.element=a.createElement(),a.arrowElement=a.getArrowElement(),a.addElementToBody(),a.hide(0),a}return n(t,e),t.prototype.setContent=function(e){this.element.find("."+t.CONTENT_CLASS).html(e)},t.prototype.destroy=function(){this.detach(),e.prototype.destroy.call(this)},t.prototype.attachTo=function(e,t,i,n,o,r){var a=this;if(this.isAttached)throw"tooltip is already attached, try to detach first";this.attachedToElement=$(e),this.attachToElementPromise=this.tourUiHelper.trackChanges(this.attachedToElement,this.TRACK_CHANGE_INTERVAL,function(){a.tourUiHelper.outerPositionElement(a.element,a.attachedToElement,t,i,0,!0,n,o,r),a.setArrowPosition(t,i)}),this.isAttached=!0,this.$timeout(function(){a.tourUiHelper.outerPositionElement(a.element,a.attachedToElement,t,i,0,!0,n,o,r),a.setArrowPosition(t,i)})},t.prototype.detach=function(){this.isAttached&&(this.flags.assistantRegularInterval?window.clearInterval(this.attachToElementPromise):this.$interval.cancel(this.attachToElementPromise),this.attachToElementPromise=null,this.isAttached=!1,this.attachedToElement.removeData("boundingClientRect"))},t.prototype.createElement=function(){var e=angular.element("<div>");return e.addClass(t.ELEMENT_CLASS),e.html('<div class="'+t.CONTENT_CLASS+'"></div><div class="'+t.ARROW_CLASS+'"></div>'),e},t.prototype.getArrowElement=function(){return this.element.find("."+t.ARROW_CLASS)},t.prototype.setArrowPosition=function(e,t){var i=r.isUndefined(e)?o.AssistantPositionY[t]:o.AssistantPositionX[e];this.arrowElement.attr("position",i),this.tourUiHelper.outerPositionElement(this.arrowElement,this.attachedToElement,e,t,0,!1);var n={};e===o.AssistantPositionX.Left?n.left=this.element.width():e===o.AssistantPositionX.Right?n.left=-8:t===o.AssistantPositionY.Top?n.top=this.element.height():t===o.AssistantPositionY.Bottom&&(n.top=-8),this.arrowElement.css(n)},t.ELEMENT_CLASS="intro-tooltip",t.ARROW_CLASS="intro-tooltip-arrow",t.CONTENT_CLASS="intro-tooltip-content",t}(l);t.TourAttachedTooltip=c;var d=function(e){function t(t){var i=e.call(this,t)||this;return i.element=i.createElement(),i.hide(),i.addElementToBody(),i}return n(t,e),t.prototype.setContent=function(e){this.element.html(e)},t.prototype.createElement=function(){var e=angular.element("<div>");return e.addClass(t.ELEMENT_CLASS),e},t.ELEMENT_CLASS="intro-modal",t}(l),u=function(){function e(e){this.$timeout=e,this.fadeTimeInMs=300,this.backdropElement=this.createBackdrop(),this.hide(0),this.syncBackdropScrollWithFakeBrowser()}return e.prototype.syncBackdropScrollWithFakeBrowser=function(){var e;angular.element("body").append(this.backdropElement),this.backdropElement[0].addEventListener("wheel",function(t){(e=e||angular.element(".overlay-viewport")[0]).scrollTop+=t.deltaY},{passive:!0})},e.prototype.show=function(e,t){void 0===t&&(t=this.fadeTimeInMs),this.backdropElement.show(),this.backdropElement.fadeTo(t,e)},e.prototype.hide=function(e){var t=this;return void 0===e&&(e=this.fadeTimeInMs),this.backdropElement.fadeTo(e,0),this.$timeout(function(){return t.backdropElement.hide()},e)},e.prototype.setOpacity=function(e,t){if(void 0===t&&(t=this.fadeTimeInMs),e>1||e<0)throw"invalid opacity, should be between 0-1";this.backdropElement.fadeTo(t,e)},e.prototype.destroy=function(){this.backdropElement.remove()},e.prototype.onClick=function(e){this.backdropElement.on("click",function(){return e()})},e.prototype.createBackdrop=function(){var e;return(e=angular.element("<div>")).addClass("intro-backdrop"),e},e.DEFAULT_OPACITY=.7,e}(),p=function(){function e(e,t,i,n,o,r){this.TourHint=e,this.TourBackdrop=t,this.TourAttachedTooltip=i,this.TourModal=n,this.tourUiHelper=o,this.$q=r,this.tourBackdrop=new this.TourBackdrop,this.tourHint=new this.TourHint}return e.$inject=["TourHint","TourBackdrop","TourAttachedTooltip","TourModal","tourUiHelper","$q"],e.prototype.renderAction=function(e,t){e.hint&&e.hint.enabled||this.tourHint.hide(),this.tourHint.detach();var i=this.handleBackdrop(e);e.isModal?(this.tourTooltip=new this.TourModal,this.tourTooltip.setContent(t),this.tourTooltip.addCustomClasses(e.tooltip.customClasses)):e.tooltip&&!e.tooltip.disabled&&e.element&&e.element.selector&&(this.tourTooltip=this.tourTooltip||new this.TourAttachedTooltip,this.tourTooltip.setContent(t),this.tourTooltip.attachTo(e.element.selector,e.tooltip.positionX,e.tooltip.positionY,e.tooltip.offsetX,e.tooltip.offsetY),this.tourTooltip.addCustomClasses(e.tooltip.customClasses)),this.unhighlightElementCallback=this.handleElementHighlight(e);var n=this.tourTooltip?this.tourTooltip.show():this.$q.when();return this.$q.all([i,n])},e.prototype.destroyAction=function(){return r.isFunction(this.unhighlightElementCallback)&&this.unhighlightElementCallback(),this.tourTooltip&&(this.tourTooltip.destroy(),this.tourTooltip=null),this.hideHint(),this.tourBackdrop.hide()},e.prototype.hideAction=function(e){var t=this;if(void 0===e&&(e={}),r.isFunction(this.unhighlightElementCallback)&&this.unhighlightElementCallback(),this.tourTooltip&&e.tooltip&&!e.tooltip.dontHideOnExit||this.tourTooltip instanceof d)return this.tourTooltip.hide().then(function(){t.tourTooltip&&t.tourTooltip.destroy(),t.tourTooltip=null})},e.prototype.disableHighlightInteractivity=function(e){e.element&&e.element.selector?$(e.element.selector).addClass("intro-element-disabled"):e.hint&&e.hint.selector&&$(e.hint.selector).addClass("intro-element-disabled"),e.additionalHighlightedElements&&e.additionalHighlightedElements.forEach(function(e){return $(e).addClass("intro-element-disabled")})},e.prototype.enableHighlightInteractivity=function(e){e.element&&e.element.selector?$(e.element.selector).removeClass("intro-element-disabled"):e.hint&&e.hint.selector&&$(e.hint.selector).removeClass("intro-element-disabled"),e.additionalHighlightedElements&&e.additionalHighlightedElements.forEach(function(e){return $(e).removeClass("intro-element-disabled")})},e.prototype.disableElements=function(e){void 0===e&&(e=[]),e.forEach(function(e){return e.addClass("disable-element").prop("disabled",!0)})},e.prototype.enableElements=function(e){void 0===e&&(e=[]),e.forEach(function(e){return e.removeClass("disable-element").prop("disabled",!1)})},e.prototype.hideHint=function(){this.tourHint.hide()},e.prototype.fadeOutBackdrop=function(e){this.tourBackdrop.show(0,e)},e.prototype.moveHintToElement=function(e){return e.hint?(this.tourHint.show(),this.tourHint.attachTo(e.hint.selector||e.element&&e.element.selector,e.hint.positionX,e.hint.positionY)):this.$q.when()},e.prototype.simulateClick=function(){return this.tourHint.simulateClick()},e.prototype.handleBackdrop=function(e){return e.backdrop&&e.backdrop.enabled?this.$q.when(this.tourBackdrop.show(void 0!==e.backdrop.opacity?e.backdrop.opacity:u.DEFAULT_OPACITY)):this.tourBackdrop.hide()},e.prototype.handleElementHighlight=function(e){var t=this,i=[],n=e.preserveBackground;if(e.element||e.hint){var o=this.tourUiHelper.highlightElement($(e.element?e.element.selector:e.hint.selector),n);i.push(o)}if(e.additionalHighlightedElements){var r=e.additionalHighlightedElements.map(function(e){return t.tourUiHelper.highlightElement($(e),n)});i.push.apply(i,r)}return function(){i.forEach(function(e){return e()})}},e.prototype.scrollToElement=function(e){if((e.hint&&e.hint.selector||e.element&&e.element.selector)&&!1!==e.scrollToElement){var t=e.hint&&e.hint.selector||e.element&&e.element.selector,i=$(t).get(0);i&&i.scrollIntoView(!1)}},e}();t.AssistantUIAdapter=p,angular.module("siteGeneratorTourManagerInternal").service("assistantUIAdapter",p).factory("TourHint",["$q","tourUiHelper","$interval","$timeout","flags",function(e,t,i,n,o){return function(){return new s(e,t,i,n,o)}}]).factory("TourAttachedTooltip",["$q","tourUiHelper","$interval","$timeout","flags",function(e,t,i,n,o){return function(){return new c(e,t,i,n,o)}}]).factory("TourBackdrop",["$timeout",function(e){return function(){return new u(e)}}]).factory("TourModal",["$timeout",function(e){return function(){return new d(e)}}]).service("tourUiHelper",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(54),o=i(1),r=i(0),a=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v){this.$scope=e,this.assistantManager=t,this.assistantUtils=i,this.assistantBI=n,this.consumerBiLogger=o,this.colorationUtils=r,this.introManager=a,this.designKitManager=s,this.flags=l,this.$q=c,this.kitUtils=d,this.initSiteData=u,this.introModelTree=p,this.miscUtils=g,this.initService=h,this.$element=m,this.themeChooser=f,this.CREATE_MY_HOMEPAGE_STEP=4e3,this.KIT_OUTER_WIDTH=256,this.currentStep=1e3,this.isLoading=!1,this.scrollLeftDisabled=!0,this.scrollRightDisabled=!1,this.kits=[],this.getKits(),this.logoPersistence=new intro.IntroLogoPersistence(this.introManager.data.media,this.miscUtils,v,l)}return e.$inject=["$scope","assistantManager","assistantUtils","assistantBI","consumerBiLogger","colorationUtils","introManager","designKitManager","flags","$q","kitUtils","initSiteData","introModelTree","miscUtils","initService","$element","themeChooser","clientTopology"],e.prototype.getKits=function(){var e=this;this.kitUtils.calculateKits().then(function(t){var i=e.themeChooser.filterNewVersionKits(t);e.kits=i,e.calcKitsWidth()})},e.prototype.selectKit=function(e){this.selectedKitId=e},e.prototype.calcKitsWidth=function(){var e=this;setTimeout(function(){var t=e.$element.find("right"),i=t.width();t.scroll(function(){var e=this.$element.find(".kits")[0],n=this.scrollRightDisabled,o=this.scrollLeftDisabled;this.scrollRightDisabled=t.scrollLeft()+i+1>=e.scrollWidth,this.scrollLeftDisabled=0===t.scrollLeft(),n===this.scrollRightDisabled&&o===this.scrollLeftDisabled||this.$scope.$apply()}.bind(e))},500)},e.prototype.scrollLeft=function(){if(!this.scrollLeftDisabled){var e=this.$element.find("right")[0],t=e.scrollLeft-e.clientWidth-this.KIT_OUTER_WIDTH;$(e).animate({scrollLeft:t},500)}},e.prototype.scrollRight=function(){if(!this.scrollRightDisabled){var e=this.$element.find("right")[0],t=e.scrollLeft+e.clientWidth-this.KIT_OUTER_WIDTH;$(e).animate({scrollLeft:t},500)}},e.prototype.getTitle=function(){return this.flags.fullSiteBuilder&&this.currentStep===this.CREATE_MY_HOMEPAGE_STEP?"I Will Now Create a Website Tailored to Your Needs":"tour.welcome2.step"+this.currentStep+".title"},e.prototype.getContent=function(){return this.flags.fullSiteBuilder&&this.currentStep===this.CREATE_MY_HOMEPAGE_STEP?"Let me take over for a few moments and I’ll create the initial design<br/>of your stunning website right before your eyes.":"tour.welcome2.step"+this.currentStep+".content"},e.prototype.sendBI=function(e,t){void 0===t&&(t=null),this.assistantBI.sendCustomBIEvent({evid:51,phaseNumber:t||this.currentStep,phaseName:e})},e.prototype.shouldSuggestLogoExtraction=function(){return this.introManager.isLogoExists()},e.prototype.onKitContinueClick=function(){this.shouldSuggestLogoExtraction()?this.goToSuggestToExtractPalette():(this.sendBI("Create my homepage"),this.goToCreateHomepageConfirmationStep())},e.prototype.goToDesignPickerStep=function(){this.sendBI("Help me understand your style."),this.goToNextInternalStep()},e.prototype.goToSuggestToExtractPalette=function(){this.sendBI("Would you like me to create a color palette from your logo?"),this.goToNextInternalStep()},e.prototype.updateLogoInModel=function(){this.introModelTree.updateLogo()},e.prototype.skipLogoPaletteClick=function(e){var t=1+(e===n.LogoCEWStep.SHOULD_I_EXTRACT_STEP?3e3:3200);this.sendBI("Create my homepage",t)},e.prototype.createLogoPaletteClick=function(){this.sendBI("Creating palette",3e3)},e.prototype.saveLogoPaletteClick=function(e){this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(this.colorationUtils.numOfColors(e.colors),1,"logo",0,o.BIOrigins.WelcomeTour),this.sendBI("Create my homepage",3200)},e.prototype.getLogoDescriptionPromise=function(){var e=this;return this.introModelTree.prepareLogoData().then(function(){return{relativeUri:e.introManager.siteProperties.logo,width:e.introManager.logoDimensions.width,height:e.introManager.logoDimensions.height}})},e.prototype.getPreparePalettePromise=function(e){var t=this;return this.getLogoDescriptionPromise().then(function(i){return t.prevPromise&&r.isEqual(i,t.prevPromiseImageDescription)?t.prevPromise:(t.prevPromiseImageDescription=i,t.prevPromise=t.colorationUtils.preparePaletteFromLogo(i,e),t.prevPromise)})},e.prototype.goToCreateHomepageConfirmationStep=function(e){var t,i=this;this.flags.newIntroDesign||this.goToInternalStep(this.CREATE_MY_HOMEPAGE_STEP),this.isLoading=!0,this.$q.all([this.designKitManager.setActiveMainKit(this.selectedKitId),this.colorationUtils.initialize(),this.initService.loaded()]).then(function(){if(e)return t=Date.now(),i.colorationUtils.setLogoColors(e),i.colorationUtils.useLogoColors({setColorationMode:!0,overrideMainColor:!0})}).then(function(){e&&i.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(Date.now()-t,i.colorationUtils.numOfColors(e.colors),1,"logo",0,o.BIOrigins.WelcomeTour),i.isLoading=!1,i.flags.newIntroDesign&&i.goToNextAction()})},e.prototype.goToNextInternalStep=function(){this.currentStep=1e3*Math.floor(this.currentStep/1e3)+1e3},e.prototype.goToInternalStep=function(e){this.currentStep=e},e.prototype.goToNextAction=function(){var e=this;this.sendBI("Creating your homepage..."),this.initSiteData.loaded().then(function(){return e.introModelTree.loaded()}).then(function(){return e.introManager.reset()}),this.assistantManager.gotoNextAction()},e.prototype.getLastButtonText=function(){return this.isLoading?"tour.welcome2.preparing.button":"tour.welcome2.step4000.button"},e}();t.WelcomeTaskStartTemplate=a,angular.module("siteGeneratorTourManagerInternal").component("welcomeTaskStart",{controller:a,template:'\n                <div class="tour-step-with-action welcome-start-step welcome-start-step-white">\n                  <div style="position: fixed; left: 200px; top: 120px; z-index: 2; display: none">\n                    <button ng-click="$ctrl.goToInternalStep(1000)">A</button>\n                    <button ng-click="$ctrl.goToInternalStep(2000)">B</button>\n                    <button ng-click="$ctrl.goToInternalStep(3000)">C</button>\n                    <button ng-click="$ctrl.goToInternalStep(4000)">D</button>\n                  </div>\n                  <div class="tour-step-content-wrapper">\n                    <div>\n                      <div ng-switch="$ctrl.currentStep" class="welcome-start-changing-section">\n                        <div ng-switch-when="1000" class="welcome-task-start-substep welcome-task-start-substep-1000">\n                          <div class="tour-step-title" ng-bind-html="$ctrl.getTitle() | translate" ng-if="$ctrl.getTitle() | translate"></div>\n                          <div class="tour-step-content" ng-bind-html="$ctrl.getContent() | translate" ng-if="$ctrl.getContent() | translate"></div>\n                          <button class="tour-button -primary assistant-dock-start" ng-click="$ctrl.goToDesignPickerStep()" adi-automation="welcome-task-start">{{::\'intro.start.button\' | translate}}</button>\n                        </div>\n                        <div ng-switch-when="2000" class="welcome-task-start-substep welcome-task-start-substep-2000">\n                          <div class="tour-step-title" ng-bind-html="$ctrl.getTitle() | translate" ng-if="$ctrl.getTitle() | translate"></div>\n                          <div class="tour-step-content" ng-bind-html="$ctrl.getContent() | translate" ng-if="$ctrl.getContent() | translate"></div>\n                          <div class="kits clearfix">\n                            <div class="tour-step-welcome-design-picker-item" ng-class="{selected: kit.id === $ctrl.selectedKitId}" ng-repeat="kit in $ctrl.kits | limitTo:6" ng-click="$ctrl.selectKit(kit.id)">\n                              <kit-thumbnail-new kit="kit" adi-automation="{{kit.displayName}}"></kit-thumbnail-new>\n                            </div>\n                          </div>\n                          <div class="tour-step-actions -centered">\n                            <button class="tour-button -primary" ng-click="$ctrl.onKitContinueClick()" ng-disabled="!$ctrl.selectedKitId" adi-automation="welcome-task-kit-continue"><span ng-bind-html="::\'tour.button.continue\' | translate"> </span></button>\n                          </div>\n                        </div>\n                        <div ng-switch-when="3000" class="welcome-task-start-substep welcome-task-start-substep-3000">\n                          <div class="tour-step-actions -centered">\n                            <logo-color-extraction-wizard logo-persistence=":: $ctrl.logoPersistence" get-prepare-palette-promise="$ctrl.getPreparePalettePromise(logoOrigin)" enable-replace-logo="true" update-logo-in-model="$ctrl.updateLogoInModel()" on-done="$ctrl.goToCreateHomepageConfirmationStep(logoColoration)" on-skip-click="$ctrl.skipLogoPaletteClick(logoExtractorStep)" on-create-palette-click="$ctrl.createLogoPaletteClick()" on-save-palette-click="$ctrl.saveLogoPaletteClick(logoColoration)" context="tour"> </logo-color-extraction-wizard>\n                          </div>\n                        </div>\n                        <div ng-switch-when="4000" class="welcome-task-start-substep welcome-task-start-substep-4000">\n                          <div class="tour-step-title" ng-bind-html="$ctrl.getTitle() | translate" ng-if="$ctrl.getTitle() | translate"></div>\n                          <div class="tour-step-content" ng-bind-html="$ctrl.getContent() | translate" ng-if="$ctrl.getContent() | translate"></div>\n                          <div class="tour-step-actions -centered">\n                            <button class="tour-button -primary" ng-click="$ctrl.goToNextAction()" ng-disabled="$ctrl.isLoading" adi-automation="welcome-task-create-my-homepage">\n                              <span ng-bind-html="$ctrl.getLastButtonText() | translate"> </span>\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              '})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(12),r=i(0),a=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L){this.$q=t,this.undoRedo=i,this.CONSUMER_DIALOGS=n,this.notification=o,this.tpaService=r,this.selected=a,this.flags=s,this.siteState=l,this.modelTree=c,this.sectionManager=d,this.pagesManager=u,this.consumerPublishService=p,this.menuService=g,this.$translate=h,this.nodeManipulationService=m,this.pagesPanelManager=f,this.simpleSolutionManager=v,this.CcDialogBuilder=S,this.consumerBiLogger=y,this.applicationState=T,this.consumerMenu=b,this.applicationParameters=I,this.storyServices=P,this.mergedHeaderService=M,this.mergedHeaderValidator=E,this.consumerDialogs=w,this.anonService=C,this.signUpNotifier=A,this.documentServicesPlatformSupport=L;var B=c.getNodeById(a.idForActions);this.tpaType=B.tpaSection||B.tpaExtraPage||s.membersArea&&B.membersArea&&B.membersArea.isParent&&this.applicationParameters.tpaTypes.Members.type,this.isHiddenTpa="hidden"===this.tpaService.sectionType(this.tpaType),this.position={top:e.clientY-30,left:e.clientX+16},this.menuItems=this.createMenuItems(B)}return e.$inject=["$event","$q","undoRedo","CONSUMER_DIALOGS","notification","tpaService","selected","flags","siteState","modelTree","sectionManager","pagesManager","consumerPublishService","menuService","$translate","nodeManipulationService","pagesPanelManager","simpleSolutionManager","CcDialogBuilder","consumerBiLogger","applicationState","consumerMenu","applicationParameters","storyServices","mergedHeaderService","mergedHeaderValidator","consumerDialogs","anonService","signUpNotifier","documentServicesPlatformSupport"],e.prototype.createTpaMenuItem=function(){var e=this;return{label:"builder.manage-tpa-"+this.tpaType,icon:this.getTpaIcon(this.tpaType),onClick:function(){return e.CcDialogBuilder.hide()},isHidden:function(){return!e.tpaType},manageTpaButton:this.tpaType,manageTpaButtonOrigin:"ADI-pages-cog"}},e.prototype.createSettingsPageSeoMenuItem=function(){var e=this;return{label:"builder.pages-panel.settings.page-seo",icon:"cc-icon-seo",isHidden:function(){return e.isHiddenTpa},onClick:function(){return e.goToPageSeo(e.selected.idForActions)}}},e.prototype.createSetHomepageMenuItem=function(){var e=this;return{label:"builder.pages-panel.settings.set-as-homepage",icon:"cc-icon-home",isHidden:function(){return e.isHomepage()||!e.menuService.isOuterLevelById(e.selected.idForActions)||e.isHiddenTpa},onClick:function(){return e.setAsHomepage()}}},e.prototype.createRenameMenuItem=function(){var e=this;return{label:"builder.pages-panel.settings.rename",icon:"cc-icon-rename",isHidden:function(){return e.isHiddenTpa},onClick:function(){return e.rename()}}},e.prototype.createDuplicateMenuItem=function(){var e=this;return{label:"builder.pages-panel.settings.duplicate",icon:"cc-icon-duplicate",onClick:function(){return e.duplicatePage()},isHidden:function(){return e.tpaType}}},e.prototype.createHideMenuItem=function(){var e=this;return{dataHook:"hide",label:"builder.pages-panel.settings.hide",icon:"cc-icon-hide-eye",onClick:function(){return e.toggleVisibility()},isHidden:function(){return e.pagesManager.isHiddenPage(e.selected.idForActions)||e.isHiddenTpa}}},e.prototype.createShowMenuItem=function(){var e=this;return{label:"builder.pages-panel.settings.show",icon:"cc-icon-show-eye",onClick:function(){return e.toggleVisibility()},isHidden:function(){return!e.pagesManager.isHiddenPage(e.selected.idForActions)||e.isHiddenTpa}}},e.prototype.createSubpageMenuItem=function(){var e=this;return{label:"builder.pages-panel.settings.subpage",icon:"cc-icon-subpage",onClick:function(){return e.toggleSubMainPage()},isHidden:function(){return e.hasNestedPages()||e.singlePage()||e.isHomepage()||!e.menuService.isOuterLevelById(e.selected.idForActions)||e.isHiddenTpa}}},e.prototype.createSubMainPageMenuItem=function(){var e=this;return{label:"builder.pages-panel.settings.main-page",icon:"cc-icon-subpage",onClick:function(){return e.toggleSubMainPage()},isHidden:function(){return e.hasNestedPages()||e.singlePage()||e.menuService.isOuterLevelById(e.selected.idForActions)||e.isHiddenTpa}}},e.prototype.createDeleteMenuItem=function(){var e=this;return{dataHook:"delete",label:"builder.pages-panel.settings.delete",icon:"cc-icon-delete",onClick:function(){return e.deletePage()},isHidden:function(){return e.notDeletable()}}},e.prototype.createMembersAreaMenuItems=function(){var e=this;return[{dataHook:"delete",label:"builder.pages-panel.settings.delete",icon:"cc-icon-delete",onClick:function(){return e.deleteMembersArea()},isHidden:function(){return!1}},{dataHook:"open-signup-settings",label:"members-area.open-signup-settings-panel.label",icon:"cc-icon-settings",onClick:function(){return e.openMembersSignupSettings()},isHidden:function(){return!1}}]},e.prototype.createMenuItems=function(e){var t;this.flags.membersArea&&e.membersArea?t=e.membersArea.isParent?this.createMembersAreaMenuItems():[this.createSettingsPageSeoMenuItem(),this.createRenameMenuItem(),this.createHideMenuItem()]:(t=[this.createSettingsPageSeoMenuItem(),this.createSetHomepageMenuItem(),this.createRenameMenuItem(),this.createDuplicateMenuItem(),this.createHideMenuItem(),this.createShowMenuItem(),this.createSubpageMenuItem(),this.createSubMainPageMenuItem(),this.createDeleteMenuItem()],"AllMembers"!==this.tpaType&&t.unshift(this.createTpaMenuItem()));for(var i=0,n=t;i<n.length;i++){var o=n[i];o.label=this.$translate.instant(o.label)}return t},e.prototype.hasNestedPages=function(){var e=this.menuService.getLinkToPage(this.selected.idForActions);return e&&!e.parent&&!r.isEmpty(e.item.children)},e.prototype.goToPageSeo=function(e){this.CcDialogBuilder.hide(),this.anonService.isAnonymousUser()?this.signUpNotifier.showSignUpPopup("goToPageSeo"):this.applicationState.goToPageSeo(e)},e.prototype.setAsHomepage=function(){this.CcDialogBuilder.hide(),this.flags.mergedHeader&&this.unmergePrevHomePage(),this.pagesManager.setHomeById(this.selected.idForActions),this.consumerBiLogger.pagesManager.clickOnSetPageAsHomepage(),this.selected.saveChanges()},e.prototype.unmergePrevHomePage=function(){var e=this.modelTree.getNodeById(this.modelTree.homePageId);this.mergedHeaderService.isHeaderMerged(e)&&(e.dirty=!0,this.mergedHeaderValidator.unmerge(e))},e.prototype.notDeletable=function(){return this.isHomepage()||this.singlePage()},e.prototype.singlePage=function(){return r.keys(this.pagesManager.getNameToPageMap()).length<2},e.prototype.isHomepage=function(){return this.pagesManager.isHome(this.selected.idForActions)},e.prototype.rename=function(){this.CcDialogBuilder.hide(),this.selected.activePageRenameForm.$show()},e.prototype.duplicatePage=function(){var e=this;this.CcDialogBuilder.hide();var t=this.modelTree.getNodeById(this.selected.idForActions);this.sectionManager.duplicatePage(t).then(function(){e.selected.saveChanges()})},e.prototype.toggleVisibility=function(){this.CcDialogBuilder.hide(),this.selected.togglePageVisibility(this.selected.idForActions)},e.prototype.getTpaIcon=function(t){return"cc-icon-"+e.tpaIconMap[t]},e.prototype.toggleSubMainPage=function(){this.CcDialogBuilder.hide(),this.menuService.toggleNestingById(this.selected.idForActions);var e=this.modelTree.getNodeById(this.selected.idForActions);this.consumerBiLogger.pagesManager.setPageAsSubpageMainPage(this.menuService.isOuterLevelById(this.selected.idForActions)?"subpage to main page":"main page to subpage ",this.tpaService.getAppIdByPageNode(e)),this.selected.saveChanges()},e.prototype.confirmPageDelete=function(){var e=this,t={heading:this.$translate.instant("popups.page-delete-confirmation.heading"),text:this.$translate.instant("popups.page-delete-confirmation.text"),acceptButtonText:this.$translate.instant("general.delete"),rejectButtonText:this.$translate.instant("general.cancel"),biDialogName:this.CONSUMER_DIALOGS.PAGE_DELETE_CONFIRM};return this.CcDialogBuilder.showNegativeConfirmation(t).then(function(){e.CcDialogBuilder.hide()})},e.prototype.confirmTpaDelete=function(e){var t=this,i=this.$translate.instant("builder.apps-panel.app.title."+e);return this.consumerDialogs.showDialog(o.ConsumerDialogTypes.DELETE_TPA_PAGE_POPUP,i).then(function(){t.CcDialogBuilder.hide()})},e.prototype.cleanTpaWidgets=function(e){return this.pagesPanelManager.cleanTpaWidgets(e)},e.prototype.deleteMembersArea=function(){var e=this;this.CcDialogBuilder.hide(),(this.applicationState.isSilent()?this.$q.resolve():this.confirmTpaDelete("Members")).then(function(){return e.consumerBiLogger.apps.removeTpaStart("Members","14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9","",""),e.flags.dontGoToPage?e.pagesPanelManager.setSelectedPageAndGoTo(e.modelTree.homePageId):e.pagesPanelManager.setSelectedPage(e.modelTree.homePageId)}).then(function(){e.documentServicesPlatformSupport.uninstallMembersArea(),e.CcDialogBuilder.hide()})},e.prototype.openMembersSignupSettings=function(){this.CcDialogBuilder.hide(),this.applicationState.goToSignupPanel(),this.consumerBiLogger.apps.clickOnEditAppTpaSettings("","14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9","Members","")},e.prototype.deletePage=function(){var e=this;this.CcDialogBuilder.hide();var t=this.modelTree.getNodeById(this.selected.idForActions),i=this.tpaService.getAppIdByPageNode(t);this.consumerBiLogger.pagesManager.clickOnDeletePage(i);var o=this.applicationState.isSilent()?this.$q.resolve():this.tpaType?this.confirmTpaDelete(this.tpaType):this.confirmPageDelete();this.flags.deletePageRefactor?o.then(function(){return e.pagesPanelManager.deletePage(e.selected.idForActions)}).then(function(){e.flags.disableUndoRedo?e.notification.show("toasters.page-deleted"):e.notification.show("toasters.page-deleted","general.undo",function(){e.undoRedo.undo()})}):o.then(function(){if(!e.pagesManager.isHome(e.selected.idForActions)){var i=e.modelTree.getNodeById(e.selected.idForActions),o=e.$q.defer();e.tpaType&&(r.each(e.pagesManager.getTpaExtraPages(e.tpaType),function(t){t.id!==e.selected.idForActions&&(e.flags.coreCleanLssOnRemove?e.nodeManipulationService.deletePage(t,"body",r.noop,r.noop):e.nodeManipulationService.deletePageById(t.id,"body",r.noop,r.noop))}),e.cleanTpaWidgets(e.tpaType));var a=function(){o.resolve();var r=e.pagesPanelManager.widgetsWithHiddenSection(t);if(e.flags.wixEvents&&r[0]){var a=r.map(function(t){return e.sectionManager.clearHiddenSection(t)});e.$q.all(a).then(function(){return n.PubSub.fire(n.events.PAGE_DELETED,i)})}else n.PubSub.fire(n.events.PAGE_DELETED,i)};return e.flags.coreCleanLssOnRemove?e.nodeManipulationService.deletePage(i,"body",e.selected.setSelectedPage,a):e.nodeManipulationService.deletePageById(e.selected.idForActions,"body",e.selected.setSelectedPage,a),o.promise}}).then(function(){if(e.consumerMenu.calcMenuAnchors(),e.undoRedo.captureOperation(),e.tpaType===e.applicationParameters.tpaTypes.Stores.type)return e.sectionManager.recalculateSiteHeader().then(function(){return e.storyServices.reRender("header")})}).then(function(){e.applicationState.isSupportStaffEditing()||e.siteState.waitForChanges().then(function(){return e.consumerPublishService.saveStory(void 0,void 0,!0).catch(function(){return e.$q.resolve()})})}).then(function(){e.flags.smartAssistTpa&&n.PubSub.fire(n.events.TPA_DELETED,t),e.consumerBiLogger.pagesManager.deletePageSuccess(i),e.flags.disableUndoRedo?e.notification.show("toasters.page-deleted"):e.notification.show("toasters.page-deleted","general.undo",function(){e.undoRedo.undo()})})},e.tpaIconMap={Blog:"blog",Stores:"store",Bookings:"booking",Events:"events",Blog2:"blog2",Members:"actions"},e}();t.PageMenuDialog=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(0),r=function(){function e(t,i,n,o,r,s,l,c,d,u,p){var g=this;this.$q=t,this.$timeout=i,this.siteDataRetrivalApi=n,this.clientTopology=o,this.urlParser=r,this.wizUtils=s,this.wizContentManager=l,this.textRepository=c,this.consumerBiLogger=d,this.storyServices=u,this.$injector=p,this.analyzeFullSitePromises={},this.sitePages=[],this.importDetails={FullDataImported:"full-data-imported"},this.getTextGroup=function(t){return t.trim().length>=e.LONG_TEXT_MINIMAL_LENGTH?"longText":"short"},this.generateSiteConverterPhaseInImportCallbacks=function(t){return{start:function(i){void 0===i&&(i={});var n=i.url?g.buildAnalyzeTaskKey(i.url,t.title,t.siteConverterSessionId):t.key;e.urlToLoadingTime[n]=new a;var o=i.totalPages>=0?i.totalPages:-1;g.consumerBiLogger.intro.siteConverterPhaseInImportStart(n,e.urlToLoadingTime[n].getStartTime(),t.phaseName,o)},complete:function(i){void 0===i&&(i={});var n=i.url?g.buildAnalyzeTaskKey(i.url,t.title,t.siteConverterSessionId):t.key,o=i.totalPages>=0?i.totalPages:-1;g.consumerBiLogger.intro.siteConverterPhaseInImportComplete(n,i.overrideImportDetailsName||t.importDetailsName,e.urlToLoadingTime[n]&&e.urlToLoadingTime[n].getLoadingTime(),t.phaseName,o)}}},this.buildAnalyzeTaskKey=function(e,t,i){return e+"|"+t+"|"+i},this.storyNamePromise=new Promise(function(e){g.storyNameResolve=e})}return e.$inject=["$q","$timeout","siteDataRetrivalApi","clientTopology","urlParser","wizUtils","wizContentManager","textRepository","consumerBiLogger","storyServices","$injector"],e.prototype.getSiteInfo=function(e){var t=new ob.SiteInfoRequest(e,null,null);return this.siteDataRetrivalApi.getSiteInfo(t)},e.prototype.getSiteValidation=function(e){var t=new ob.SiteInfoRequest(e,this.clientTopology.esi,null);return this.siteDataRetrivalApi.getSiteValidation(t)},e.prototype.getBusinessInfo=function(e,t,i,o){var r=this;return this.$q(function(a,s){o&&r.$timeout(function(){r.consumerBiLogger.err(n.BIErrorCodes.GetBusinessInfoFailed,"getbusinessInfo timeout"),s(null)},o);var l=new ob.SiteInfoRequest(e,r.clientTopology.esi,i,t);r.siteDataRetrivalApi.getBusinessInfo(l).then(function(e){a(e)})})},e.prototype.importTextsToRepository=function(t,i){var n=this,o=function(i,r){if(n.wizUtils.isListSection(r)){var a=r,s=[];a.header&&s.push(a.header),s.push.apply(s,a.list),a.footer&&s.push(a.footer),s.reduce(o,i)}else if(n.wizUtils.isSingleBlockSection(r)){!function(i,o){var r=o.title,a=void 0===r?"":r,s=o.subtitle,l=void 0===s?"":s,c=o.paragraph,d=void 0===c?"":c;i.push({textGroup:n.getTextGroup(a),source:t,sectionTypesData:[],text:a.trim()},{textGroup:n.getTextGroup(l),source:t,sectionTypesData:[],text:l.trim()},{textGroup:n.getTextGroup(d),source:t,sectionTypesData:(o.paragraphPredictions||[]).filter(function(t){return t.probability>=e.TEXT_TO_SECTION_PROBABILITY_THRESHOLD}).map(function(e){var t=e.label,i=e.probability;return{sectionType:t.replace("__label__","").replace(/(?!^)list$/,""),relevance:i}}).map(function(e){var t=e.sectionType,i=e.relevance;return[{sectionType:t,relevance:i},{sectionType:t+"_listheader",relevance:i},{sectionType:t+"_listfooter",relevance:i}]}).reduce(function(e,t){return e.concat(t)},[]),text:d.trim()})}(i,r)}return i},r=i.reduce(function(e,t){return t.sections.reduce(o,e)},[]).filter(function(t){return t.text.length>=e.TEXT_MINIMAL_LENGTH}).filter(function(){var e=new Set;return function(t){var i=t.text;return!e.has(i)&&(e.add(i),!0)}}());this.storyServices.story.importedSite.isTextFound||(this.storyServices.story.importedSite.isTextFound=r.length>0),this.textRepository.handleContentLoaded(r)},e.prototype.importTextsFromSite=function(e,t,i,n){var r=this;this.analyzeFullSite(e,t,i).then(function(t){var i=t.parsedData,n=t.pagesTasks,a=t.userGuid;o.set(r.storyServices.story,"importedSite.isMediaFound",!1),r.loadPageTexts(e,e,a),r.isPlatformAllowed&&r.storyNamePromise.then(function(t){r.storyServices.story.importedSite.isMediaFound||(r.storyServices.story.importedSite.isMediaFound=r.wizContentManager.isMediaFound(i)),r.$injector.get("wizWebsite").isConvertingSite()||r.wizContentManager.uploadMedia(e,i,t,"")}),n.forEach(function(t){var i=t.url,n=t.title;t.result.then(function(t){var o=t.parsedData;r.loadPageTexts(i,e,a),r.isPlatformAllowed&&r.storyNamePromise.then(function(e){r.storyServices.story.importedSite.isMediaFound||(r.storyServices.story.importedSite.isMediaFound=r.wizContentManager.isMediaFound(o)),r.wizContentManager.uploadMedia(i,o,e,n)})})})})},e.prototype.analyzeFullSite=function(t,i,o,r){var a=this,s=this.buildAnalyzeTaskKey(t,i,o),l=this.analyzeFullSitePromises[s];return l||(l=this.analyzeFullSitePromises[s]=new Promise(function(l,c){r&&a.$timeout(function(){a.consumerBiLogger.err(n.BIErrorCodes.ImportSiteFailed,"analyzeFullSite timeout"),c("timeout")},r);var d=new ob.SiteInfoRequest(t,a.clientTopology.esi,o,i);d.wizRcVersion=a.urlParser.getQueryStringValueByKey("wizRcVersion");var u=new ob.SiteConverterBIParams(s,e.phasesNames.SiteFullDataImport,a.importDetails.FullDataImported,i,o),p=a.generateSiteConverterPhaseInImportCallbacks(u);return a.siteDataRetrivalApi.analyzeFullSite(d,p.start,p.complete).then(function(e){l(e)})})),l},e.prototype.loadPageTexts=function(e,t,i){var n=this;this.siteDataRetrivalApi.getPageData(t,e,i).then(function(e){n.sitePages=n.sitePages.concat([e]),n.importTextsToRepository(t,e.data&&e.data.pages||[])})},e.prototype.loadSiteTexts=function(e,t){var i=this;!o.get(this.storyServices.story,"importedSite.isTextFound")&&o.set(this.storyServices.story,"importedSite.isTextFound",!1),this.siteDataRetrivalApi.getSiteData(e,t).then(function(t){i.sitePages=i.sitePages.concat(t),i.importTextsToRepository(e,t.map(function(e){return e.data.pages[0]}))})},e.prototype.setNewStoryName=function(e){this.storyNameResolve(e)},e.prototype.saveImportedSite=function(e,t,i){var n=this,r=t.importedSite,a=(void 0===r?{siteAddress:null}:r).siteAddress,s=t.name,l=t.siteConverterSessionId,c=o.get(this.storyServices.story,"importedSite.isMediaFound",!1),d=o.get(this.storyServices.story,"importedSite.isTextFound",!1);if(a&&(this.storyServices.story.importedSite={siteAddress:a,userId:e,isMediaFound:c,isTextFound:d},i)){var u=a+"|"+s+"|"+l;this.analyzeFullSitePromises[u].then(function(e){var t=e.pagesTasks,i=[{url:a,imported:!0}].concat(t.map(function(e){var t=e.url;e.title;return{url:t,imported:!1}}));n.storyServices.story.importedSite.pages=i})}},e.TEXT_TO_SECTION_PROBABILITY_THRESHOLD=.5,e.TEXT_MINIMAL_LENGTH=10,e.LONG_TEXT_MINIMAL_LENGTH=40,e.phasesNames={SiteInfo:"site-info",SiteValidationWixwiz:"site-validation-wixwiz",SiteBusinessInfoImport:"site-business-info-import",SiteFullDataImport:"site-full-data-import"},e.urlToLoadingTime={},e}();t.ImportSiteContent=r;var a=function(){return function(){var e=this;this.startMeasure=function(){e.startTime=performance.now()},this.getStartTime=function(){return parseInt(e.startTime.toFixed(0),10)},this.getLoadingTime=function(){return parseInt((performance.now()-e.startTime).toFixed(0),10)},this.startMeasure()}}();angular.module("siteGeneratorIntroInternal").service("importSiteContent",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(191),r=i(57),a=i(1),s=i(0),l=function(){function e(e,t,i,o,r,a,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I){var P=this;this.consumerMenu=e,this.onstageActionsManager=t,this.overlaySegmentManager=i,this.mediaOverrideManager=o,this.nodeTitleManager=r,this.consumerBiLoggerHelpers=a,this.consumerBiLogger=l,this.applicationState=c,this.CcDialogBuilder=d,this.$translate=u,this.$timeout=p,this.flags=g,this.CONSUMER_DIALOGS=h,this.sectionMedia=m,this.ONSTAGE_EVENTS=f,this.mediaSectionUtils=v,this.mediaTypeResolver=S,this.fontSize=y,this.sectionColors=T,this.nodeFetcher=b,this.sitePartTypes=I,this.menuIsShown=!1,this._actionsMenu=[],this.clicksCount=0,this.isComponentHighlight=function(){return P.isLayoutArgsFitsLayout(P.overlaySegmentManager.lastHoveredArgs,P.component.layout)},this.setFontSizeDebounce=s.debounce(function(e){return P.fontSize.setFontSize(P.node,P.component.field,e)},300),this.populateActionsMenu(),this.setTitleByComponent(),this.unsubscribe=n.PubSub.subscribe(n.events.MEDIA_TYPE_CHANGE,function(){P.setTitleByComponent(),P.populateActionsMenu()})}return e.$inject=["consumerMenu","onstageActionsManager","overlaySegmentManager","mediaOverrideManager","nodeTitleManager","consumerBiLoggerHelpers","consumerBiLogger","applicationState","CcDialogBuilder","$translate","$timeout","flags","CONSUMER_DIALOGS","sectionMedia","ONSTAGE_EVENTS","mediaSectionUtils","mediaTypeResolver","fontSize","sectionColors","nodeFetcher","sitePartTypes"],e.prototype.$onDestroy=function(){this.unsubscribe&&this.unsubscribe(),this.paletteActionsMenu.forEach(function(e){return e.palette=null})},e.prototype.populateActionsMenu=function(){var e=this;this._actionsMenu=this.onstageActionsManager.getMenuActions(this.component.field,this.node),this.shouldRemoveLinkToOption&&(this._actionsMenu=this._actionsMenu.filter(function(t){return t.event!==e.ONSTAGE_EVENTS.MEDIA_LINK_TO}))},Object.defineProperty(e.prototype,"shouldRemoveLinkToOption",{get:function(){var e=this.sectionMedia.getMediaType(this.node),t=this.sectionMedia.getSelectedOption(this.node);return!this.mediaSectionUtils.isImageType(e,t)&&!this.mediaSectionUtils.isSmallImageType(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionsMenu",{get:function(){return this._actionsMenu||this.populateActionsMenu(),this._actionsMenu},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"simpleActionsMenu",{get:function(){return this.actionsMenu.filter(function(e){return e.actionType===o.OnstageActionType.Single})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"complexActionsMenu",{get:function(){var e=this;return this.actionsMenu.filter(function(t){return e.isColorPicker(t.actionType)||e.showResizeText(t.actionType)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paletteActionsMenu",{get:function(){var e=this;return this.actionsMenu.filter(function(t){return e.isColorPicker(t.actionType)})},enumerable:!0,configurable:!0}),e.prototype.isColorPicker=function(e){return e===o.OnstageActionType.ColorPicker},e.prototype.showResizeText=function(e){return e===o.OnstageActionType.ResizeText&&this.nodeFetcher.getNodeSitePart(this.node)===this.sitePartTypes.HEADER},e.prototype.getPallete=function(e,t){if(void 0===t&&(t=!1),e&&e.paletteGetter)return e.palette&&!t||(e.palette=e.paletteGetter(this.component)),e.palette},e.prototype.setColor=function(e,t){if(e){var i=this.getPallete(e).colorList[t];e.name=i,this.runAction(e),this.getPallete(e,!0)}},e.prototype.handleFixColorClick=function(e){this.setColor(e,-1)},e.prototype.handleApplyToAll=function(){this.consumerBiLogger.builder.onstageOsiQuickAction(a.BIOrigins.OSI,"apply-color-to-all",this.component.field.key,this.node.getId(),this.component.field.contentElement.type,this.node.alias),this.sectionColors.applyColorListItemOverrides(this.node)},e.prototype.handleResetItem=function(e){this.consumerBiLogger.contentEditor.resetContentColorClick(this.component.field.key,this.node.getId(),this.node.alias,this.node.getSpecificContentElementType()),this.sectionColors.resetListItemOverrideColor(this.node,this.component.field.key),this.getPallete(e,!0)},e.prototype.getMessage=function(e,t){if(!this.flags.overrideContainerBgColor&&this.getPallete(e).contrastProblem)return this.$translate.instant("overlay.messages.color-not-readable")},e.prototype.getResetMessage=function(){return this.node.isListItemBody()?this.$translate.instant("overlay.messages.reset-item.message"):this.$translate.instant("overlay.messages.reset-section.message")},e.prototype.showFixColorMessage=function(e){return this.flags.overrideContainerBgColor&&this.getPallete(e).contrastProblem},e.prototype.showResetMessage=function(){return this.flags.listItemOverrideColor&&!this.sectionColors.isSegmentReadable(this.segment)},e.prototype.showApplyAllMessage=function(){return this.flags.listItemOverrideColor&&this.node.isListItemBody()&&!this.showResetMessage()&&!this.sectionColors.isListItemsIdentical(this.segment)},e.prototype.setTitleByComponent=function(){this.title=this.getLayoutTitle()},e.prototype.getLayoutTitle=function(){if("shoppingCart"===this.component.layout.type)return this.$translate.instant("general.Stores");if("map"===this.component.layout.type)return this.$translate.instant("general.map");if("media"===this.component.field.data.type)return"Logo"===this.component.field.key?this.$translate.instant("general.logo"):"Social.SocialButtons"===this.component.field.key?this.$translate.instant("general.social"):this.flags.sectionMedia?this.mediaTypeResolver.getTypeLabel(this.node):this.mediaOverrideManager.getCurrentSelectedMediaTypeLabel(this.node);var e=this.component.field?this.component.field.data.displayName:this.component.layout.displayName;return e||this.nodeTitleManager.labelBySubtype(this.component.field.data.subType,this.component.field.contentElement.type)},e.prototype.getMenuTooltipOptions=function(){return e.tooltipOptions},e.prototype.getMenuTooltip=function(){if("menu"===this.component.layout.type)return 1===this.consumerMenu.getVisiblePageNodes().length?"section_menu_clicked":"page_menu_clicked"},e.prototype.onPageTooltipLinkClick=function(){this.consumerBiLoggerHelpers.setPanelSource("menu tooltip"),this.applicationState.goToPageManager()},e.prototype.onSectionTooltipLinkClick=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.tooltip.sectionTooltip"),this.CONSUMER_DIALOGS.MENU_TOOLTIP_HELP)},e.prototype.doTooltip=function(e){var t=$(e.target);this.domHasTooltip(t)&&this.activateTooltip(t,e)},e.prototype.domHasTooltip=function(e){return e&&e.tooltipster()&&e.tooltipster().length>0},e.prototype.activateTooltip=function(e,t){var i=e.get(0).getBoundingClientRect(),n=(i.left+i.right)/2;e.tooltipster("option","offsetX",t.clientX-n),e.tooltipster("reposition")},e.prototype.isLayoutArgsFitsLayout=function(e,t){if(e&&this.overlaySegmentManager.isActiveSegmentNodeId(this.segment.getSafeId(),this.segment.contentElement.isSpecialListItem())){if(t){var i=this.leArgList[t.argIndex]||t.isFake&&"media"===t.type&&{type:"media",subType:"image"};return i&&e.contentElementType===this.segment.contentElement.type&&e.type===i.type&&e.subType===i.subType}return!!e}return!1},e.prototype.setPositionClass=function(){var e;return(this.isNotEnoughHeightInComponent()||this.isNotEnoughWidthInComponent())&&(e="ontop"),e&&this.isNotEnoughMarginFromFakeBrowserEdge()?"onbottom":e},e.prototype.isNotEnoughWidthInComponent=function(){var t=this.interactDom;return Array.prototype.reduce.call(t.children,function(e,t){return e+t.clientWidth},0)+2*e.InnerOverlayPadding>this.component.style.width},e.prototype.isNotEnoughHeightInComponent=function(){return this.component.style.height<e.MinComponentHeight},e.prototype.isNotEnoughMarginFromFakeBrowserEdge=function(){var e=this.componentDom,t=this.overlayViewportDom;if(t)return e.getBoundingClientRect().top-t.getBoundingClientRect().top<24},e.prototype.hasActionsMenu=function(){return this.actionsMenu&&!!this.actionsMenu.length},e.prototype.onShowActionsMenu=function(){var e=this;this.menuIsShown=!0,this.onstageActionsManager.setSegment(this.segment),this.paletteActionsMenu.forEach(function(t){e.getPallete(t,!0)}),this.$timeout(function(){e.menuIsShown&&e.consumerBiLogger.contentEditor.onstageQuickActionsTooltipShown(e.component.field.key,e.node.getId(),e.node.alias,e.component.field.contentElement.type)},r.SegmentOverlay.MENU_BI_TIMEOUT)},e.prototype.onHideActionsMenu=function(){this.menuIsShown=!1},e.prototype.runAction=function(e){var t=this;this.onstageActionsManager.executeAction(e,this.component.field,this.node),e.mightChangeMenu&&this.$timeout(function(){t._actionsMenu=null}),this.consumerBiLogger.builder.onstageOsiQuickAction(a.BIOrigins.OSI,e.name,this.component.field.key,this.node.getId(),this.component.field.contentElement.type,this.node.alias)},e.prototype.runDblClickAction=function(){var e=this.onstageActionsManager.getDblClickAction(this.component.field,this.node);this.consumerBiLogger.builder.onstageOsiQuickAction("Double click",e.name,this.component.field.key,this.node.getId(),this.component.field.contentElement.type,this.node.alias),this.onstageActionsManager.runDblClickAction(this.component.field,this.node)},e.prototype.runClickAction=function(e){this.doTooltip(e);var t=this.onstageActionsManager.getClickAction(this.component.field,this.node);this.consumerBiLogger.builder.onstageOsiQuickAction(a.BIOrigins.OSI,t.name,this.component.field.key,this.node.getId(),this.component.field.contentElement.type,this.node.alias),this.onstageActionsManager.runClickAction(this.component.field,this.node)},e.prototype.handleClicks=function(e){this.onstageActionsManager.hasDoubleClickAction(this.component.field,this.node)?this.doSingleOrDoubleClick(e):this.runClickAction(e)},e.prototype.generateOverlayId=function(){return this.node.getId()+"-"+this.component.layout.type},e.prototype.doSingleOrDoubleClick=function(t){var i=this;0===this.clicksCount?(this.clicksCount++,this.singleClickTimeout=this.$timeout(function(){i.runClickAction(t),i.clicksCount=0},e.timeMarginForDblClick)):(this.$timeout.cancel(this.singleClickTimeout),this.runDblClickAction(),this.clicksCount=0)},e.prototype.setFontSize=function(e){this.setFontSizeDebounce(e)},e.tooltipOptions={trigger:"click",timer:7e3,interactive:!0},e.InnerOverlayPadding=6,e.MinComponentHeight=60,e.timeMarginForDblClick=300,e}();t.ComponentOverlay=l,angular.module("siteGeneratorStaticsConsumerAppInternal").component("componentOverlay",{templateUrl:"views/component-overlay.html",controller:l,bindings:{component:"=",node:"=",segment:"=",leArgList:"=?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.scrollInsideContainer=function(e,t,i){e.animate({scrollTop:t},i)},e}();t.domHelpers=new n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.headlessWrapperRequestTry=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getStructureId();return t=this.mainHelper.validateString(t),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:810,adiBuilderType:t,name:e,esi:i,industryId:n,instanceId:o,structureId:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report med.headlessWrapperRequestTry",e.stack)}},e.prototype.headlessWrapperRequestSuccess=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getLoadTime(),a=this.consumerBiLoggerHelpers.getStructureId();return t=this.mainHelper.validateString(t),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:811,adiBuilderType:t,name:e,esi:i,industryId:n,instanceId:o,loadTime:r,structureId:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report med.headlessWrapperRequestSuccess",e.stack)}},e.prototype.headlessWrapperRequestFailed=function(e,t){try{var i=this.consumerBiLoggerHelpers.getAdiBuilderType(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getLoadTime(),s=this.consumerBiLoggerHelpers.getStructureId();return i=this.mainHelper.validateString(i),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:812,adiBuilderType:i,name:e,reason:t,esi:n,industryId:o,instanceId:r,loadTime:a,structureId:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report med.headlessWrapperRequestFailed",e.stack)}},e.prototype.updateSectionStart=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),d=this.mainHelper.validateString(d),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:826,type:e,adiBuilderType:o,esi:r,industryId:a,instanceId:s,msid:l,revision:c,sectionAlias:t,sectionType:i,selectedLayout:n,structureId:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report med.updateSectionStart",e.stack)}},e.prototype.updateSectionSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getLoadTime(),r=this.consumerBiLoggerHelpers.getAdiBuilderType(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:827,type:e,loadTime:o,adiBuilderType:r,esi:a,industryId:s,instanceId:l,msid:c,revision:d,sectionAlias:t,sectionType:i,selectedLayout:n,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report med.updateSectionSuccess",e.stack)}},e}();t.MedConsumerBiLogger=n,window.MedConsumerBiLogger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.loadTestCompleted=function(e){try{var t=this.consumerBiLoggerHelpers.getLoadTime(),i=this.consumerBiLoggerHelpers.getMetaSiteId();return e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(t),this.mainHelper.validateGuid(i),this.mainHelper.log({src:66,evid:30,testName:e,loadTime:t,msid:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report automation.loadTestCompleted",e.stack)}},e}();t.AutomationConsumerBiLogger=n,window.AutomationConsumerBiLogger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.removeTpaPackageSuccess=function(e,t,i,n,o,r){try{var a=this.consumerBiLoggerHelpers.getAdiBuilderType(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),u=this.consumerBiLoggerHelpers.getLoadTime(),p=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(e),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(u),p=this.mainHelper.validateString(p),o=this.mainHelper.validateString(o),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:373,numOfPages:e,adiBuilderType:a,appId:t,appPageType:i,editMode:s,esi:l,industryId:c,instanceId:d,is_columns:n,loadTime:u,msid:p,nodeId:o,revision:g,structureId:h,appInstanceId:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report apps.removeTpaPackageSuccess",e.stack)}},e.prototype.clickOnManageApp=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:450,source:e,appId:t,appName:i,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,revision:c,structureId:d,adiBuilderType:u,appInstanceId:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report apps.clickOnManageApp",e.stack)}},e.prototype.clickOnEditAppTpaSettings=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:453,source:e,appId:t,appName:i,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,revision:c,structureId:d,adiBuilderType:u,appInstanceId:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report apps.clickOnEditAppTpaSettings",e.stack)}},e.prototype.removeTpaStart=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:454,appName:e,adiBuilderType:o,appId:t,appInstanceId:i,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,nodeId:n,revision:d,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report apps.removeTpaStart",e.stack)}},e.prototype.appPanelOpen=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:455,adiBuilderType:e,editMode:t,esi:i,industryId:n,instanceId:o,msid:r,revision:a,structureId:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report apps.appPanelOpen",e.stack)}},e.prototype.appPanelClose=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:456,adiBuilderType:e,editMode:t,esi:i,industryId:n,instanceId:o,msid:r,revision:a,structureId:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report apps.appPanelClose",e.stack)}},e.prototype.addTpaStart=function(e,t){try{var i=this.consumerBiLoggerHelpers.getAdiBuilderType(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(t),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateNumber(l),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:457,appName:e,adiBuilderType:i,appId:t,instanceId:n,editMode:o,esi:r,industryId:a,msid:s,revision:l,structureId:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report apps.addTpaStart",e.stack)}},e.prototype.addNewTpaPageStart=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),n=this.mainHelper.validateString(n),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(u),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:458,adiBuilderType:o,appId:e,appInstanceId:t,appPageType:i,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,nodeId:n,pageId:d,revision:u,structureId:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report apps.addNewTpaPageStart",e.stack)}},e.prototype.manageDropdownListOpenOnHover=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getPageId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:459,adiBuilderType:e,editMode:t,esi:i,industryId:n,instanceId:o,msid:r,pageId:a,revision:s,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report apps.manageDropdownListOpenOnHover",e.stack)}},e}();t.AppsConsumerBiLogger=n,window.AppsConsumerBiLogger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.loadingPhaseInInitStart=function(e,t){try{var i=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getIsNewSite(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(i),n=this.mainHelper.validateString(n),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:1,loadTime:i,loadType:n,phaseName:e,subPhaseName:t,esi:o,industryId:r,instanceId:a,msid:s,structureId:l,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.loadingPhaseInInitStart",e.stack)}},e.prototype.loadingPhaseInInitComplete=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getLoadTime(),o=this.consumerBiLoggerHelpers.getIsNewSite(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:2,intervalLoadTime:e,loadTime:n,loadType:o,phaseName:t,subPhaseName:i,esi:r,industryId:a,instanceId:s,msid:l,structureId:c,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.loadingPhaseInInitComplete",e.stack)}},e.prototype.suggestedDomainIsDisplayed=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:37,adiBuilderType:e,esi:t,industryId:i,instanceId:n,msid:o,revision:r,structureId:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.suggestedDomainIsDisplayed",e.stack)}},e.prototype.suggestedDomainIsDismissed=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:38,adiBuilderType:e,esi:t,industryId:i,instanceId:n,msid:o,revision:r,structureId:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.suggestedDomainIsDismissed",e.stack)}},e.prototype.suggestedDomainApiRequest=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:39,adiBuilderType:e,esi:t,industryId:i,instanceId:n,msid:o,revision:r,structureId:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.suggestedDomainApiRequest",e.stack)}},e.prototype.suggestedDomainApiResponse=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:40,domains:e,adiBuilderType:t,esi:i,industryId:n,instanceId:o,msid:r,revision:a,structureId:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.suggestedDomainApiResponse",e.stack)}},e.prototype.firstTimeStart=function(e){try{var t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),e=this.mainHelper.validateString(e),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:125,esi:t,msid:i,industryId:n,origin:e,structureId:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.firstTimeStart",e.stack)}},e.prototype.firstTimeComplete=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getIntervalLoadTime(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getLoadTime(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(t),d=this.mainHelper.validateString(d),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:134,intervalLoadTime:n,esi:o,industryId:r,instanceId:a,loadTime:s,msid:l,structureId:c,validStory:e,timeInPage:t,adiBuilderType:d,loadingDetails:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.firstTimeComplete",e.stack)}},e.prototype.existingSiteStart=function(e){try{var t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),e=this.mainHelper.validateString(e),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:135,esi:t,industryId:i,instanceId:n,msid:o,origin:e,structureId:r,adiBuilderType:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.existingSiteStart",e.stack)}},e.prototype.existingSiteComplete=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getIntervalLoadTime(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getLoadTime(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateNumber(c),this.mainHelper.validateGuid(d),u=this.mainHelper.validateString(u),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(t),p=this.mainHelper.validateString(p),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(n),this.mainHelper.validateNumber(o),this.mainHelper.log({src:66,evid:139,intervalLoadTime:r,esi:a,industryId:s,instanceId:l,loadTime:c,msid:d,structureId:u,validStory:e,timeInPage:t,adiBuilderType:p,loadingDetails:i,storyGzipSize:n,storySize:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.existingSiteComplete",e.stack)}},e.prototype.undoRedoLastChange=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),e=this.mainHelper.validateString(e),a=this.mainHelper.validateString(a),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:140,instanceId:t,msid:i,structureId:n,industryId:o,esi:r,action:e,adiBuilderType:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.undoRedoLastChange",e.stack)}},e.prototype.undoRedoSucces=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getLoadTime(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:141,instanceId:t,msid:i,structureId:n,industryId:o,esi:r,action:e,loadTime:a,adiBuilderType:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.undoRedoSucces",e.stack)}},e.prototype.topBarHelpClick=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:142,instanceId:e,msid:t,structureId:i,industryId:n,esi:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarHelpClick",e.stack)}},e.prototype.topBarEditBusinessInfoClick=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:143,instanceId:e,msid:t,structureId:i,industryId:n,esi:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarEditBusinessInfoClick",e.stack)}},e.prototype.businessInfoEditBusinessInfoPageView=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:144,instanceId:e,msid:t,structureId:i,industryId:n,esi:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.businessInfoEditBusinessInfoPageView",e.stack)}},e.prototype.businessInfoUpdateChanges=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),l=this.mainHelper.validateString(l),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:145,instanceId:n,msid:o,structureId:r,industryId:a,esi:s,fieldsAdded:e,fieldsRemoved:t,fieldsUpdated:i,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.businessInfoUpdateChanges",e.stack)}},e.prototype.businessInfoUpdateChangesSuccess=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getLoadTime(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:146,instanceId:e,msid:t,structureId:i,industryId:n,esi:o,loadTime:r,adiBuilderType:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.businessInfoUpdateChangesSuccess",e.stack)}},e.prototype.businessInfoClosePage=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:147,instanceId:e,msid:t,structureId:i,industryId:n,esi:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.businessInfoClosePage",e.stack)}},e.prototype.topBarGoToMyDashboard=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:148,instanceId:e,msid:t,structureId:i,industryId:n,esi:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarGoToMyDashboard",e.stack)}},e.prototype.topBarGoToSiteSettings=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:149,instanceId:e,msid:t,structureId:i,industryId:n,esi:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarGoToSiteSettings",e.stack)}},e.prototype.topBarConnectDomainClick=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:150,instanceId:e,msid:t,structureId:i,industryId:n,esi:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarConnectDomainClick",e.stack)}},e.prototype.connectDomainPageView=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),e=this.mainHelper.validateString(e),s=this.mainHelper.validateString(s),t=this.mainHelper.validateString(t),this.mainHelper.log({src:66,evid:151,instanceId:i,msid:n,structureId:o,industryId:r,esi:a,referral:e,adiBuilderType:s,referralAdditionalInfo:t,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.connectDomainPageView",e.stack)}},e.prototype.connectDomainNavigateToDomainSPages=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),e=this.mainHelper.validateString(e),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:152,instanceId:t,msid:i,structureId:n,industryId:o,esi:r,action:e,adiBuilderType:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.connectDomainNavigateToDomainSPages",e.stack)}},e.prototype.connectDomainClosePage=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),e=this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:153,instanceId:t,msid:i,structureId:n,industryId:o,esi:r,adiBuilderType:a,name:e,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.connectDomainClosePage",e.stack)}},e.prototype.topBarViewSiteClick=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:154,instanceId:e,msid:t,structureId:i,industryId:n,esi:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarViewSiteClick",e.stack)}},e.prototype.topBarGoToEditorClick=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:155,origin:e,adiBuilderType:t,esi:i,industryId:n,instanceId:o,msid:r,structureId:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarGoToEditorClick",e.stack)}},e.prototype.goToEditorNotificationPageView=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:156,instanceId:e,msid:t,structureId:i,industryId:n,esi:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.goToEditorNotificationPageView",e.stack)}},e.prototype.goToEditorContinueToProEditorClick=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:157,instanceId:e,msid:t,structureId:i,industryId:n,esi:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.goToEditorContinueToProEditorClick",e.stack)}},e.prototype.goToEditorClosePage=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:158,instanceId:e,msid:t,structureId:i,industryId:n,esi:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.goToEditorClosePage",e.stack)}},e.prototype.topBarPreviewSiteClick=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),e=this.mainHelper.validateString(e),a=this.mainHelper.validateString(a),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:159,instanceId:t,msid:i,structureId:n,industryId:o,esi:r,origin:e,adiBuilderType:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarPreviewSiteClick",e.stack)}},e.prototype.previewSitePageView=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:160,instanceId:e,msid:t,structureId:i,industryId:n,esi:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.previewSitePageView",e.stack)}},e.prototype.previewSiteSwitchToMobileDesktopView=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),t=this.mainHelper.validateString(t),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:161,mode:e,instanceId:i,msid:n,structureId:o,industryId:r,esi:a,viewMode:t,adiBuilderType:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.previewSiteSwitchToMobileDesktopView",e.stack)}},e.prototype.previewSiteClosePage=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),t=this.mainHelper.validateString(t),this.mainHelper.log({src:66,evid:162,mode:e,instanceId:i,msid:n,structureId:o,industryId:r,esi:a,adiBuilderType:s,navigationClick:t,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.previewSiteClosePage",e.stack)}},e.prototype.topBarPublishSiteClick=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:163,mode:e,instanceId:t,msid:i,structureId:n,industryId:o,esi:r,adiBuilderType:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarPublishSiteClick",e.stack)}},e.prototype.publishSiteCongratsPageView=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.log({src:66,evid:164,instanceId:i,msid:n,structureId:o,industryId:r,esi:a,adiBuilderType:s,pageView:e,referralAdditionalInfo:t,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.publishSiteCongratsPageView",e.stack)}},e.prototype.publishSiteClosePage=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),e=this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:165,instanceId:t,msid:i,structureId:n,industryId:o,esi:r,adiBuilderType:a,referralAdditionalInfo:e,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.publishSiteClosePage",e.stack)}},e.prototype.zoomInOut=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(t),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:166,instanceId:i,msid:n,structureId:o,industryId:r,esi:a,zoomType:e,scale:t,adiBuilderType:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.zoomInOut",e.stack)}},e.prototype.loadingError=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getIsNewSite(),o=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:167,instanceId:t,msid:i,err:e,loadType:n,adiBuilderType:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.loadingError",e.stack)}},e.prototype.autosaveStart=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:168,saveToSanta:e,instanceId:t,esi:i,msid:n,revision:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.autosaveStart",e.stack)}},e.prototype.autosaveEnd=function(){try{var e=this.consumerBiLoggerHelpers.getEsi(),t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(e),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(i),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:174,esi:e,instanceId:t,revision:i,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.autosaveEnd",e.stack)}},e.prototype.topBarAddDropdownListOpenOnHover=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getLoadTime(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:177,adiBuilderType:e,esi:t,industryId:i,instanceId:n,loadTime:o,msid:r,structureId:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarAddDropdownListOpenOnHover",e.stack)}},e.prototype.topBarGiveFeedbackClick=function(){try{var e=this.consumerBiLoggerHelpers.getEsi(),t=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:178,esi:e,industryId:t,instanceId:i,msid:n,structureId:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarGiveFeedbackClick",e.stack)}},e.prototype.topBarPreviewSiteSuccess=function(e){try{var t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getLoadTime(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:179,mode:e,esi:t,industryId:i,instanceId:n,msid:o,structureId:r,loadTime:a,adiBuilderType:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarPreviewSiteSuccess",e.stack)}},e.prototype.topBarCreateNewSite=function(){try{var e=this.consumerBiLoggerHelpers.getEsi(),t=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:180,esi:e,industryId:t,instanceId:i,msid:n,structureId:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarCreateNewSite",e.stack)}},e.prototype.topBarSeoPanelGetFoundOnGoogleClick=function(e){try{var t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:181,origin:e,esi:t,industryId:i,instanceId:n,msid:o,structureId:r,adiBuilderType:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarSeoPanelGetFoundOnGoogleClick",e.stack)}},e.prototype.topBarSiteMenuDialogOpen=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:182,adiBuilderType:e,esi:t,industryId:i,instanceId:n,msid:o,structureId:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarSiteMenuDialogOpen",e.stack)}},e.prototype.firstPublishClick=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),e=this.mainHelper.validateString(e),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:183,instanceId:t,msid:i,structureId:n,industryId:o,esi:r,adiBuilderType:a,domainOption:e,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.firstPublishClick",e.stack)}},e.prototype.topBarAccountMenuDialogOpen=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:184,instanceId:e,msid:t,structureId:i,industryId:n,esi:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarAccountMenuDialogOpen",e.stack)}},e.prototype.publishSiteCongratsPageDoneClick=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),e=this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:186,instanceId:i,msid:n,structureId:o,industryId:r,esi:a,adiBuilderType:s,pageView:e,showNextTime:t,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.publishSiteCongratsPageDoneClick",e.stack)}},e.prototype.publishSiteCongratsPageViewSiteClick=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),e=this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:187,instanceId:t,msid:i,structureId:n,industryId:o,esi:r,adiBuilderType:a,pageView:e,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.publishSiteCongratsPageViewSiteClick",e.stack)}},e.prototype.publishSiteCongratsPageSocialClick=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.log({src:66,evid:188,instanceId:i,msid:n,structureId:o,industryId:r,esi:a,adiBuilderType:s,pageView:e,socialButton:t,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.publishSiteCongratsPageSocialClick",e.stack)}},e.prototype.topBarClickOnLinkToOneOfTheAccountPages=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:189,name:e,instanceId:t,msid:i,structureId:n,industryId:o,esi:r,adiBuilderType:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.topBarClickOnLinkToOneOfTheAccountPages",e.stack)}},e.prototype.switchBuilderTypeMobileDesktopClick=function(e,t){try{var i=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:35,source:e,editMode:i,esi:n,industryId:o,instanceId:r,msid:a,selectedBuilder:t,revision:s,structureId:l,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.switchBuilderTypeMobileDesktopClick",e.stack)}},e.prototype.switchBuilderTypeMobileDesktopSuccess=function(e,t){try{var i=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(i),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:36,loadTime:i,source:e,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,selectedBuilder:t,revision:l,structureId:c,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.switchBuilderTypeMobileDesktopSuccess",e.stack)}},e.prototype.onstageOsiQuickAction=function(e,t,i,n,o,r){try{var a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),i=this.mainHelper.validateString(i),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),n=this.mainHelper.validateString(n),u=this.mainHelper.validateString(u),this.mainHelper.validateNumber(p),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:236,origin:e,name:t,editMode:a,esi:s,fieldName:i,industryId:l,instanceId:c,msid:d,nodeId:n,pageId:u,revision:p,sectionAlias:o,sectionType:r,structureId:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.onstageOsiQuickAction",e.stack)}},e.prototype.goToEditorContinueToProEditorSuccess=function(){try{var e=this.consumerBiLoggerHelpers.getLoadTime(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:185,loadTime:e,esi:t,industryId:i,instanceId:n,msid:o,structureId:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.goToEditorContinueToProEditorSuccess",e.stack)}},e.prototype.undoRedoLastChangeFetchFromServer=function(e){try{var t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:451,action:e,esi:t,industryId:i,instanceId:n,msid:o,structureId:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.undoRedoLastChangeFetchFromServer",e.stack)}},e.prototype.undoRedoSuccessRetrieveFromServer=function(e){try{var t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:452,action:e,esi:t,industryId:i,instanceId:n,msid:o,structureId:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.undoRedoSuccessRetrieveFromServer",e.stack)}},e.prototype.siteConverterSectionPresetPickerStart=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:3,index:e,adiBuilderType:t,esi:i,industryId:n,instanceId:o,msid:r,structureId:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.siteConverterSectionPresetPickerStart",e.stack)}},e.prototype.siteConverterSectionPresetPickerSuccess=function(e,t){try{var i=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(i),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(t),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:4,loadTime:i,presetsCalculated:e,index:t,adiBuilderType:n,esi:o,industryId:r,instanceId:a,msid:s,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.siteConverterSectionPresetPickerSuccess",e.stack)}},e.prototype.siteConverterSectionPresetPickerFailed=function(e,t){try{var i=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(i),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(t),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:5,loadTime:i,presetsCalculated:e,index:t,adiBuilderType:n,esi:o,industryId:r,instanceId:a,msid:s,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.siteConverterSectionPresetPickerFailed",e.stack)}},e.prototype.publishSuccess=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getLoadTime(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStructureId();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateNumber(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:24,isFirst:e,adiBuilderType:t,esi:i,industryId:n,instanceId:o,loadTime:r,msid:a,structureId:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.publishSuccess",e.stack)}},e.prototype.pagePresetPreviewNavigationClick=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getAdiBuilderType(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getIntervalLoadTime(),d=this.consumerBiLoggerHelpers.getLoadTime(),u=this.consumerBiLoggerHelpers.getMetaSiteId(),p=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(n),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateNumber(c),this.mainHelper.validateNumber(d),this.mainHelper.validateGuid(u),p=this.mainHelper.validateString(p),o=this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:23,navigationClick:e,colorationLevel:t,colorationMode:i,position:n,adiBuilderType:r,esi:a,industryId:s,instanceId:l,intervalLoadTime:c,loadTime:d,msid:u,structureId:p,presetList:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.pagePresetPreviewNavigationClick",e.stack)}},e.prototype.pagePresetPreviewLoaded=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getIntervalLoadTime(),r=this.consumerBiLoggerHelpers.getLoadTime(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(o),this.mainHelper.validateNumber(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:22,adiBuilderType:e,esi:t,industryId:i,instanceId:n,intervalLoadTime:o,loadTime:r,msid:a,structureId:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.pagePresetPreviewLoaded",e.stack)}},e.prototype.pagePresetPreviewStartsLoading=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getIntervalLoadTime(),r=this.consumerBiLoggerHelpers.getLoadTime(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(o),this.mainHelper.validateNumber(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:21,adiBuilderType:e,esi:t,industryId:i,instanceId:n,intervalLoadTime:o,loadTime:r,msid:a,structureId:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.pagePresetPreviewStartsLoading",e.stack)}},e.prototype.signUpLoginPopUpShown=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:26,origin:e,adiBuilderType:t,esi:i,industryId:n,instanceId:o,msid:r,structureId:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.signUpLoginPopUpShown",e.stack)}},e.prototype.switchViewFromAnonToUserSuccess=function(e,t){try{var i=this.consumerBiLoggerHelpers.getAdiBuilderType(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:27,origin:e,userStatus:t,adiBuilderType:i,esi:n,industryId:o,instanceId:r,msid:a,structureId:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.switchViewFromAnonToUserSuccess",e.stack)}},e.prototype.introQuestionsDialogPageView=function(e,t){try{var i=this.consumerBiLoggerHelpers.getAdiBuilderType(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getMainCategory();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.log({src:66,evid:90,adiBuilderType:i,esi:n,mainCategory:o,origin:e,view:t,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.introQuestionsDialogPageView",e.stack)}},e.prototype.introQuestionsDialogClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getMainCategory();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:91,value:e,action:t,adiBuilderType:o,esi:r,mainCategory:a,origin:i,view:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.introQuestionsDialogClick",e.stack)}},e.prototype.introQuestionsDialogBusinessTypeSelected=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getMainCategory();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:92,name:e,value:t,adiBuilderType:n,esi:o,mainCategory:r,origin:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.introQuestionsDialogBusinessTypeSelected",e.stack)}},e}();t.BuilderConsumerBiLogger=n,window.BuilderConsumerBiLogger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.changeComponentFontSize=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:198,fieldName:e,direction:t,adiBuilderType:n,editMode:o,esi:r,fontSize:i,industryId:a,instanceId:s,msid:l,revision:c,structureId:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.changeComponentFontSize",e.stack)}},e.prototype.changeLogoSize=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(t),this.mainHelper.log({src:66,evid:199,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,editMode:l,nodeId:e,pageId:c,adiBuilderType:d,sizeValue:t,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.changeLogoSize",e.stack)}},e.prototype.panelIsLoaded=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getPanelType(),g=this.consumerBiLoggerHelpers.getObjectType(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),n=this.mainHelper.validateString(n),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:200,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,nodeId:e,sectionType:t,sectionAlias:i,pageId:u,source:n,panelType:p,objectType:g,adiBuilderType:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.panelIsLoaded",e.stack)}},e.prototype.panelClosed=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getPanelType(),p=this.consumerBiLoggerHelpers.getObjectType(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:201,instanceId:n,msid:o,revision:r,structureId:a,industryId:s,esi:l,editMode:c,nodeId:e,sectionType:t,sectionAlias:i,pageId:d,panelType:u,objectType:p,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.panelClosed",e.stack)}},e.prototype.updateField=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getEsi(),u=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),u=this.mainHelper.validateString(u),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),p=this.mainHelper.validateString(p),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),g=this.mainHelper.validateString(g),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:202,instanceId:r,msid:a,revision:s,structureId:l,industryId:c,esi:d,editMode:u,nodeId:e,sectionType:t,sectionAlias:i,pageId:p,fieldName:n,fieldType:o,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.updateField",e.stack)}},e.prototype.valueWasDeleted=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getEsi(),u=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),u=this.mainHelper.validateString(u),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),p=this.mainHelper.validateString(p),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:203,instanceId:r,msid:a,revision:s,structureId:l,industryId:c,esi:d,editMode:u,nodeId:e,sectionType:t,sectionAlias:i,pageId:p,fieldName:n,fieldType:o,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.valueWasDeleted",e.stack)}},e.prototype.clickOnHideUnhideComponent=function(e,t,i,n,o,r,a){try{var s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getIndustryId(),p=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.validateGuid(p),g=this.mainHelper.validateString(g),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),h=this.mainHelper.validateString(h),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),m=this.mainHelper.validateString(m),a=this.mainHelper.validateString(a),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:204,instanceId:s,msid:l,revision:c,structureId:d,industryId:u,esi:p,editMode:g,nodeId:e,sectionType:t,sectionAlias:i,pageId:h,fieldName:n,fieldType:o,action:r,adiBuilderType:m,origin:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnHideUnhideComponent",e.stack)}},e.prototype.componentWasHiddenSuccess=function(e,t,i,n,o,r,a){try{var s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getIndustryId(),p=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.validateGuid(p),g=this.mainHelper.validateString(g),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),h=this.mainHelper.validateString(h),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateNumber(m),f=this.mainHelper.validateString(f),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:205,instanceId:s,msid:l,revision:c,structureId:d,industryId:u,esi:p,editMode:g,nodeId:e,sectionType:t,sectionAlias:i,pageId:h,fieldName:n,fieldType:o,action:r,loadTime:m,adiBuilderType:f,origin:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.componentWasHiddenSuccess",e.stack)}},e.prototype.switchMediaTypeClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),n=this.mainHelper.validateString(n),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:206,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,nodeId:e,sectionType:t,sectionAlias:i,pageId:u,mediaType:n,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.switchMediaTypeClick",e.stack)}},e.prototype.clickOnReplaceOrganizeMedia=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),n=this.mainHelper.validateString(n),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:207,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,nodeId:e,sectionType:t,sectionAlias:i,pageId:u,mediaType:n,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnReplaceOrganizeMedia",e.stack)}},e.prototype.cropImageDialogIsShown=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getObjectType(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:208,instanceId:n,msid:o,revision:r,structureId:a,industryId:s,esi:l,editMode:c,nodeId:e,sectionType:t,sectionAlias:i,pageId:d,objectType:u,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.cropImageDialogIsShown",e.stack)}},e.prototype.imageCropZoomInZoomOut=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getObjectType(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),n=this.mainHelper.validateString(n),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:209,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,nodeId:e,sectionType:t,sectionAlias:i,pageId:u,zoomType:n,objectType:p,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.imageCropZoomInZoomOut",e.stack)}},e.prototype.imageCropSuccess=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getObjectType(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:210,instanceId:n,msid:o,revision:r,structureId:a,industryId:s,esi:l,editMode:c,nodeId:e,sectionType:t,sectionAlias:i,pageId:d,objectType:u,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.imageCropSuccess",e.stack)}},e.prototype.imageCropCancel=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getObjectType(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:211,instanceId:n,msid:o,revision:r,structureId:a,industryId:s,esi:l,editMode:c,nodeId:e,sectionType:t,sectionAlias:i,pageId:d,objectType:u,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.imageCropCancel",e.stack)}},e.prototype.linkDialogIsLoaded=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getPanelType(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),n=this.mainHelper.validateString(n),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:212,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,nodeId:e,sectionType:t,sectionAlias:i,pageId:u,panelType:p,source:n,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.linkDialogIsLoaded",e.stack)}},e.prototype.linkDialogDoneClicked=function(e,t,i,n,o,r,a){try{var s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getIndustryId(),p=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getPanelType(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.validateGuid(p),g=this.mainHelper.validateString(g),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),h=this.mainHelper.validateString(h),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:213,instanceId:s,msid:l,revision:c,structureId:d,industryId:u,esi:p,editMode:g,nodeId:e,sectionType:t,sectionAlias:i,pageId:h,panelType:m,linkTo:n,targetPage:o,place:r,source:a,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.linkDialogDoneClicked",e.stack)}},e.prototype.linkDialogClosed=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getPanelType(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),n=this.mainHelper.validateString(n),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:214,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,nodeId:e,sectionType:t,sectionAlias:i,pageId:u,panelType:p,source:n,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.linkDialogClosed",e.stack)}},e.prototype.clickOnAddDuplicateItemInAList=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),u=this.mainHelper.validateString(u),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),p=this.mainHelper.validateString(p),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:215,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,nodeId:e,pageId:u,sectionType:t,sectionAlias:i,addType:n,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnAddDuplicateItemInAList",e.stack)}},e.prototype.addDuplicateItemSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getLoadTime(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),u=this.mainHelper.validateString(u),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(p),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:216,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,nodeId:e,pageId:u,sectionType:t,sectionAlias:i,addType:n,loadTime:p,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.addDuplicateItemSuccess",e.stack)}},e.prototype.reorderItemInAList=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),d=this.mainHelper.validateString(d),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:217,instanceId:n,msid:o,revision:r,structureId:a,industryId:s,esi:l,editMode:c,nodeId:e,pageId:d,sectionType:t,sectionAlias:i,adiBuilderType:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.reorderItemInAList",e.stack)}},e.prototype.itemReorderSuccess=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getLoadTime(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),d=this.mainHelper.validateString(d),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(u),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:218,instanceId:n,msid:o,revision:r,structureId:a,industryId:s,esi:l,editMode:c,nodeId:e,pageId:d,sectionType:t,sectionAlias:i,loadTime:u,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.itemReorderSuccess",e.stack)}},e.prototype.switchListItemToPage=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),u=this.mainHelper.validateString(u),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),p=this.mainHelper.validateString(p),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:219,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,nodeId:e,originPageId:t,pageId:u,sectionType:i,sectionAlias:n,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.switchListItemToPage",e.stack)}},e.prototype.itemMovedToAnotherPageSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getLoadTime(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),u=this.mainHelper.validateString(u),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(p),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:220,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,nodeId:e,originPageId:t,pageId:u,sectionType:i,sectionAlias:n,loadTime:p,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.itemMovedToAnotherPageSuccess",e.stack)}},e.prototype.galleryLayoutWindowOpened=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getEsi(),u=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),u=this.mainHelper.validateString(u),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),p=this.mainHelper.validateString(p),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:221,instanceId:r,msid:a,revision:s,structureId:l,industryId:c,esi:d,editMode:u,nodeId:e,sectionType:t,sectionAlias:i,pageId:p,noOfSuggestions:n,layoutType:o,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.galleryLayoutWindowOpened",e.stack)}},e.prototype.galleryLayoutChanged=function(e,t,i,n,o,r,a){try{var s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getIndustryId(),p=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.validateGuid(p),g=this.mainHelper.validateString(g),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),h=this.mainHelper.validateString(h),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:222,instanceId:s,msid:l,revision:c,structureId:d,industryId:u,esi:p,editMode:g,nodeId:e,sectionType:t,sectionAlias:i,pageId:h,galleryType:n,noOfSuggestions:o,placeOfSelected:r,layoutType:a,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.galleryLayoutChanged",e.stack)}},e.prototype.textManagerIsLoaded=function(e,t,i,n,o,r,a,s,l){try{var c=this.consumerBiLoggerHelpers.getAdiBuilderType(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getEsi(),p=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),m=this.consumerBiLoggerHelpers.getPageId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),v=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(u),t=this.mainHelper.validateString(t),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),m=this.mainHelper.validateString(m),this.mainHelper.validateNumber(r),this.mainHelper.validateNumber(f),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),v=this.mainHelper.validateString(v),this.mainHelper.validateNumber(l),this.mainHelper.log({src:66,evid:223,textType:e,adiBuilderType:c,editMode:d,esi:u,galleryType:t,industryId:p,instanceId:g,layoutType:i,msid:h,noOfSuggestions:n,nodeId:o,pageId:m,placeOfSelected:r,revision:f,sectionAlias:a,sectionType:s,structureId:v,noOfUserSuggestions:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.textManagerIsLoaded",e.stack)}},e.prototype.galleryLayoutWindowClosed=function(e,t,i,n,o,r){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),u=this.consumerBiLoggerHelpers.getEsi(),p=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getPageId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),this.mainHelper.validateNumber(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(u),p=this.mainHelper.validateString(p),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),g=this.mainHelper.validateString(g),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:224,instanceId:a,msid:s,revision:l,structureId:c,industryId:d,esi:u,editMode:p,nodeId:e,sectionType:t,sectionAlias:i,pageId:g,galleryType:n,noOfSuggestions:o,layoutType:r,adiBuilderType:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.galleryLayoutWindowClosed",e.stack)}},e.prototype.failoverReArrangeSolution=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:225,instanceId:n,msid:o,revision:r,structureId:a,industryId:s,esi:l,editMode:c,nodeId:e,sectionType:t,sectionAlias:i,pageId:d,adiBuilderType:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.failoverReArrangeSolution",e.stack)}},e.prototype.failoverReArrangeLayout=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:226,instanceId:n,msid:o,revision:r,structureId:a,industryId:s,esi:l,editMode:c,nodeId:e,sectionType:t,sectionAlias:i,pageId:d,adiBuilderType:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.failoverReArrangeLayout",e.stack)}},e.prototype.failToFitLayoutCanTFindAProperLayout=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),n=this.mainHelper.validateString(n),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:227,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,nodeId:e,sectionType:t,sectionAlias:i,pageId:u,reason:n,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.failToFitLayoutCanTFindAProperLayout",e.stack)}},e.prototype.fieldWasUpdatedSuccess=function(e,t,i,n,o,r,a,s,l,c,d,u,p,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),m=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),v=this.consumerBiLoggerHelpers.getStructureId(),S=this.consumerBiLoggerHelpers.getIndustryId(),y=this.consumerBiLoggerHelpers.getEsi(),T=this.consumerBiLoggerHelpers.getEditMode(),b=this.consumerBiLoggerHelpers.getPageId(),I=this.consumerBiLoggerHelpers.getLoadTime(),P=this.consumerBiLoggerHelpers.getAdiBuilderType();return h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(m),this.mainHelper.validateNumber(f),v=this.mainHelper.validateString(v),S=this.mainHelper.validateString(S),this.mainHelper.validateGuid(y),T=this.mainHelper.validateString(T),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),b=this.mainHelper.validateString(b),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateNumber(a),this.mainHelper.validateNumber(s),this.mainHelper.validateNumber(I),P=this.mainHelper.validateString(P),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:228,instanceId:h,msid:m,revision:f,structureId:v,industryId:S,esi:y,editMode:T,nodeId:e,sectionType:t,sectionAlias:i,pageId:b,fieldName:n,fieldType:o,fieldValue:r,fieldLength:a,noOfFaces:s,loadTime:I,adiBuilderType:P,isDefaultValue:l,position:c,textOrigin:d,editType:u,bestMatchExists:p,isBestMatch:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.fieldWasUpdatedSuccess",e.stack)}},e.prototype.dataInsertedToTpaAutomatically=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getEsi(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(u),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:229,instanceId:r,msid:a,revision:s,structureId:l,industryId:c,editMode:d,nodeId:e,sectionType:t,sectionAlias:i,esi:u,extraInfo:n,appId:o,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.dataInsertedToTpaAutomatically",e.stack)}},e.prototype.clickOnHideShowOnItemInListItems=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:230,action:e,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,nodeId:t,pageId:c,revision:d,sectionAlias:i,sectionType:n,structureId:u,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnHideShowOnItemInListItems",e.stack)}},e.prototype.clickOnHideShowOnItemInListItemsSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getLoadTime(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),u=this.mainHelper.validateString(u),this.mainHelper.validateNumber(p),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:231,action:e,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,nodeId:t,pageId:c,revision:d,sectionAlias:i,sectionType:n,structureId:u,loadTime:p,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnHideShowOnItemInListItemsSuccess",e.stack)}},e.prototype.richTextClick=function(e,t,i,n,o,r,a,s,l){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getPageId(),v=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(u),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),m=this.mainHelper.validateString(m),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),f=this.mainHelper.validateString(f),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateNumber(l),v=this.mainHelper.validateString(v),this.mainHelper.log({src:66,evid:232,instanceId:c,msid:d,revision:u,structureId:p,industryId:g,esi:h,editMode:m,nodeId:e,sectionType:t,sectionAlias:i,pageId:f,richTextMode:n,richTextType:o,fieldName:r,fieldType:a,fieldValue:s,fieldLength:l,adiBuilderType:v,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.richTextClick",e.stack)}},e.prototype.switchMediaSizeClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getObjectType(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),t=this.mainHelper.validateString(t),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.validateNumber(p),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:234,name:e,adiBuilderType:o,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,nodeId:t,objectType:d,pageId:u,revision:p,sectionAlias:i,sectionType:n,structureId:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.switchMediaSizeClick",e.stack)}},e.prototype.onstageQuickActionsTooltipShown=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),e=this.mainHelper.validateString(e),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:235,editMode:o,esi:r,fieldName:e,industryId:a,instanceId:s,msid:l,nodeId:t,pageId:c,revision:d,sectionAlias:i,sectionType:n,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.onstageQuickActionsTooltipShown",e.stack)}},e.prototype.changeContentColorClick=function(e,t,i,n,o,r){try{var a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),e=this.mainHelper.validateString(e),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),t=this.mainHelper.validateString(t),u=this.mainHelper.validateString(u),this.mainHelper.validateNumber(p),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:237,editMode:a,esi:s,contentName:e,industryId:l,instanceId:c,msid:d,nodeId:t,pageId:u,revision:p,colorLocation:i,colorType:n,sectionAlias:o,sectionType:r,structureId:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.changeContentColorClick",e.stack)}},e.prototype.changeContentColorSuccess=function(e,t,i,n,o,r){try{var a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),e=this.mainHelper.validateString(e),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),t=this.mainHelper.validateString(t),u=this.mainHelper.validateString(u),this.mainHelper.validateNumber(p),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:238,editMode:a,esi:s,contentName:e,industryId:l,instanceId:c,msid:d,nodeId:t,pageId:u,revision:p,colorLocation:i,colorType:n,sectionAlias:o,sectionType:r,structureId:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.changeContentColorSuccess",e.stack)}},e.prototype.resetContentColorClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),e=this.mainHelper.validateString(e),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:239,editMode:o,esi:r,contentName:e,industryId:a,instanceId:s,msid:l,nodeId:t,pageId:c,revision:d,sectionAlias:i,sectionType:n,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.resetContentColorClick",e.stack)}},e.prototype.resetContentColorSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),e=this.mainHelper.validateString(e),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:240,editMode:o,esi:r,contentName:e,industryId:a,instanceId:s,msid:l,nodeId:t,pageId:c,revision:d,sectionAlias:i,sectionType:n,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.resetContentColorSuccess",e.stack)}},e.prototype.replaceMediaWindowIsLoaded=function(e,t,i,n,o,r,a){try{var s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getIndustryId(),p=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.validateGuid(p),g=this.mainHelper.validateString(g),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),h=this.mainHelper.validateString(h),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateNumber(a),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:400,instanceId:s,msid:l,revision:c,structureId:d,industryId:u,esi:p,editMode:g,nodeId:e,sectionType:t,sectionAlias:i,pageId:h,mediaType:n,galleryType:o,origin:r,numTotal:a,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.replaceMediaWindowIsLoaded",e.stack)}},e.prototype.closeMediaWindow=function(e,t,i,n,o,r){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),u=this.consumerBiLoggerHelpers.getEsi(),p=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getPageId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),this.mainHelper.validateNumber(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(u),p=this.mainHelper.validateString(p),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),g=this.mainHelper.validateString(g),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:401,instanceId:a,msid:s,revision:l,structureId:c,industryId:d,esi:u,editMode:p,nodeId:e,sectionType:t,sectionAlias:i,pageId:g,mediaType:n,galleryType:o,origin:r,adiBuilderType:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.closeMediaWindow",e.stack)}},e.prototype.approveChangesInTheMediaWindow=function(e,t,i,n,o,r,a){try{var s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getIndustryId(),p=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.validateGuid(p),g=this.mainHelper.validateString(g),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),h=this.mainHelper.validateString(h),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateNumber(a),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:402,origin:e,instanceId:s,msid:l,revision:c,structureId:d,industryId:u,esi:p,editMode:g,nodeId:t,sectionType:i,sectionAlias:n,pageId:h,mediaType:o,galleryType:r,numTotal:a,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.approveChangesInTheMediaWindow",e.stack)}},e.prototype.mediaSettingsShow=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getEsi(),u=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),u=this.mainHelper.validateString(u),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),p=this.mainHelper.validateString(p),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:411,instanceId:r,msid:a,revision:s,structureId:l,industryId:c,esi:d,editMode:u,nodeId:e,sectionType:t,sectionAlias:i,pageId:p,mediaType:n,galleryType:o,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.mediaSettingsShow",e.stack)}},e.prototype.mediaSettingsFieldWasUpdated=function(e,t,i,n,o,r,a,s,l){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getPageId(),v=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(u),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),m=this.mainHelper.validateString(m),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),f=this.mainHelper.validateString(f),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateNumber(l),v=this.mainHelper.validateString(v),this.mainHelper.log({src:66,evid:412,instanceId:c,msid:d,revision:u,structureId:p,industryId:g,esi:h,editMode:m,nodeId:e,sectionType:t,sectionAlias:i,pageId:f,mediaType:n,galleryType:o,fieldName:r,fieldType:a,fieldValue:s,fieldLength:l,adiBuilderType:v,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.mediaSettingsFieldWasUpdated",e.stack)}},e.prototype.mediaSettingsClosePanel=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getEsi(),u=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),u=this.mainHelper.validateString(u),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),p=this.mainHelper.validateString(p),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:413,instanceId:r,msid:a,revision:s,structureId:l,industryId:c,esi:d,editMode:u,nodeId:e,sectionType:t,sectionAlias:i,pageId:p,mediaType:n,galleryType:o,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.mediaSettingsClosePanel",e.stack)}},e.prototype.imageCropSave=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getObjectType(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),e=this.mainHelper.validateString(e),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:233,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,nodeId:e,objectType:l,pageId:c,revision:d,sectionAlias:t,sectionType:i,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.imageCropSave",e.stack)}},e.prototype.hideComponentFromSite=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:241,action:e,adiBuilderType:o,editMode:r,esi:a,fieldName:t,fieldType:i,industryId:s,instanceId:l,msid:c,origin:n,revision:d,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.hideComponentFromSite",e.stack)}},e.prototype.hideComponentFromSiteSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:242,action:e,adiBuilderType:o,editMode:r,esi:a,fieldName:t,fieldType:i,industryId:s,instanceId:l,msid:c,origin:n,revision:d,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.hideComponentFromSiteSuccess",e.stack)}},e.prototype.changeButtonStyleClick=function(e,t){try{var i=this.consumerBiLoggerHelpers.getObjectType(),n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(e),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:243,objectType:i,adiBuilderType:n,styleIndex:e,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,nodeId:t,pageId:c,revision:d,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.changeButtonStyleClick",e.stack)}},e.prototype.changeButtonStyleSuccess=function(e,t){try{var i=this.consumerBiLoggerHelpers.getObjectType(),n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(e),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:244,objectType:i,adiBuilderType:n,styleIndex:e,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,nodeId:t,pageId:c,revision:d,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.changeButtonStyleSuccess",e.stack)}},e.prototype.popupDialogIsLoaded=function(e,t){try{var i=this.consumerBiLoggerHelpers.getObjectType(),n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return i=this.mainHelper.validateString(i),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),t=this.mainHelper.validateString(t),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:245,objectType:i,name:e,adiBuilderType:n,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,pageId:c,revision:d,source:t,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.popupDialogIsLoaded",e.stack)}},e.prototype.popupDialogIsClosed=function(e,t){try{var i=this.consumerBiLoggerHelpers.getObjectType(),n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return i=this.mainHelper.validateString(i),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),t=this.mainHelper.validateString(t),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:246,objectType:i,name:e,adiBuilderType:n,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,pageId:c,revision:d,source:t,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.popupDialogIsClosed",e.stack)}},e.prototype.changeImageOpacity=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getAdiBuilderType(),a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(t),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),this.mainHelper.validateNumber(p),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:247,isReset:e,opacity:t,adiBuilderType:r,editMode:a,esi:s,industryId:l,instanceId:c,msid:d,nodeId:i,pageId:u,revision:p,sectionAlias:n,sectionType:o,structureId:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.changeImageOpacity",e.stack)}},e.prototype.changeColorBehindImage=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId();return o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(u),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:248,adiBuilderType:o,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,nodeId:e,colorLocation:t,pageId:d,revision:u,sectionAlias:i,sectionType:n,structureId:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.changeColorBehindImage",e.stack)}},e.prototype.textManagerSearchResultsPresented=function(e,t,i,n,o,r){try{var a=this.consumerBiLoggerHelpers.getAdiBuilderType(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),u=this.consumerBiLoggerHelpers.getMetaSiteId(),p=this.consumerBiLoggerHelpers.getObjectType(),g=this.consumerBiLoggerHelpers.getPageId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(t),this.mainHelper.validateNumber(i),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(u),n=this.mainHelper.validateString(n),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),this.mainHelper.validateNumber(h),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:249,textType:e,bestMatchResults:t,results:i,adiBuilderType:a,editMode:s,esi:l,industryId:c,instanceId:d,msid:u,nodeId:n,objectType:p,pageId:g,revision:h,sectionAlias:o,sectionType:r,structureId:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.textManagerSearchResultsPresented",e.stack)}},e.prototype.imageResolutionImproveDialogIsLoaded=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:420,adiBuilderType:n,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,nodeId:e,pageId:c,revision:d,sectionAlias:t,sectionType:i,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.imageResolutionImproveDialogIsLoaded",e.stack)}},e.prototype.imageResolutionImproveDialogApprove=function(e,t,i,n,o,r,a,s){try{var l=this.consumerBiLoggerHelpers.getAdiBuilderType(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),u=this.consumerBiLoggerHelpers.getIndustryId(),p=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.validateGuid(g),r=this.mainHelper.validateString(r),h=this.mainHelper.validateString(h),this.mainHelper.validateNumber(m),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:421,improvedImageUrl:e,originalImageUrl:t,placeholderSize:i,originalImageSize:n,action:o,adiBuilderType:l,editMode:c,esi:d,industryId:u,instanceId:p,msid:g,nodeId:r,pageId:h,revision:m,sectionAlias:a,sectionType:s,structureId:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.imageResolutionImproveDialogApprove",e.stack)}},e.prototype.imageResolutionImproveDialogCancel=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:422,adiBuilderType:n,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,nodeId:e,pageId:c,revision:d,sectionAlias:t,sectionType:i,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.imageResolutionImproveDialogCancel",e.stack)}},e.prototype.imageResolutionImproveToggleClick=function(e,t,i,n,o,r,a){try{var s=this.consumerBiLoggerHelpers.getAdiBuilderType(),l=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),u=this.consumerBiLoggerHelpers.getInstanceId(),p=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getPageId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.validateGuid(p),o=this.mainHelper.validateString(o),g=this.mainHelper.validateString(g),this.mainHelper.validateNumber(h),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),m=this.mainHelper.validateString(m),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:423,originalImageUrl:e,placeholderSize:t,originalImageSize:i,action:n,adiBuilderType:s,editMode:l,esi:c,industryId:d,instanceId:u,msid:p,nodeId:o,pageId:g,revision:h,sectionAlias:r,sectionType:a,structureId:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.imageResolutionImproveToggleClick",e.stack)}},e.prototype.imageResolutionImproveToggleSuccess=function(e,t,i,n,o,r,a,s){try{var l=this.consumerBiLoggerHelpers.getLoadTime(),c=this.consumerBiLoggerHelpers.getAdiBuilderType(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getEsi(),p=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),m=this.consumerBiLoggerHelpers.getPageId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),v=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(l),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(u),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),r=this.mainHelper.validateString(r),m=this.mainHelper.validateString(m),this.mainHelper.validateNumber(f),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),v=this.mainHelper.validateString(v),this.mainHelper.log({src:66,evid:424,improvedImageUrl:e,loadTime:l,originalImageUrl:t,placeholderSize:i,originalImageSize:n,action:o,adiBuilderType:c,editMode:d,esi:u,industryId:p,instanceId:g,msid:h,nodeId:r,pageId:m,revision:f,sectionAlias:a,sectionType:s,structureId:v,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report contentEditor.imageResolutionImproveToggleSuccess",e.stack)}},e}();t.ContentEditorConsumerBiLogger=n,window.ContentEditorConsumerBiLogger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.show=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getEsi(),u=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),u=this.mainHelper.validateString(u),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),p=this.mainHelper.validateString(p),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:47,instanceId:r,msid:a,revision:s,structureId:l,industryId:c,esi:d,editMode:u,nodeId:e,sectionType:t,sectionAlias:i,pageId:p,name:n,origin:o,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report dialogs.show",e.stack)}},e.prototype.approveChanges=function(e,t,i,n,o,r){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),u=this.consumerBiLoggerHelpers.getEsi(),p=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getPageId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),this.mainHelper.validateNumber(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(u),p=this.mainHelper.validateString(p),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),g=this.mainHelper.validateString(g),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),h=this.mainHelper.validateString(h),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:48,instanceId:a,msid:s,revision:l,structureId:c,industryId:d,esi:u,editMode:p,nodeId:e,sectionType:t,sectionAlias:i,pageId:g,name:n,targetName:o,origin:r,adiBuilderType:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report dialogs.approveChanges",e.stack)}},e.prototype.cancel=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getEsi(),u=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),u=this.mainHelper.validateString(u),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),p=this.mainHelper.validateString(p),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),g=this.mainHelper.validateString(g),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:49,instanceId:r,msid:a,revision:s,structureId:l,industryId:c,esi:d,editMode:u,nodeId:e,sectionType:t,sectionAlias:i,pageId:p,name:n,origin:o,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report dialogs.cancel",e.stack)}},e.prototype.upgradeBannerIsDisplayed=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:61,adiBuilderType:t,editMode:i,esi:n,industryId:o,instanceId:r,msid:a,name:e,revision:s,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report dialogs.upgradeBannerIsDisplayed",e.stack)}},e}();t.DialogsConsumerBiLogger=n,window.DialogsConsumerBiLogger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.fullStoryStarted=function(e){try{var t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getMainCategory(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:11,esi:t,mainCategory:i,fullStoryUrl:e,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.fullStoryStarted",e.stack)}},e.prototype.createSiteOnMedClick=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getLoadTime(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:25,adiBuilderType:e,esi:t,industryId:i,instanceId:n,loadTime:o,msid:r,structureId:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.createSiteOnMedClick",e.stack)}},e.prototype.pageView=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getMainCategory(),r=this.consumerBiLoggerHelpers.getWixWizSearchGuid(),a=this.consumerBiLoggerHelpers.getReferralForBI(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(n),t=this.mainHelper.validateString(t),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(i),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:100,tpas:e,esi:n,view:t,mainCategory:o,searchGuid:r,noOfMatches:i,referral:a,adiBuilderType:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.pageView",e.stack)}},e.prototype.businessTypeWasSelected=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getMainCategory(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(r),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:101,esi:r,level:e,name:t,text:i,position:n,suggestList:o,mainCategory:a,adiBuilderType:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.businessTypeWasSelected",e.stack)}},e.prototype.businessTypeTypingClientEvent=function(e,t){try{var i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getMainCategory(),o=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(i),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(t),o=this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:102,esi:i,text:e,mainCategory:n,"returnedResults ":t,adiBuilderType:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.businessTypeTypingClientEvent",e.stack)}},e.prototype.selectBusinessTypePageNavigationClick=function(e,t,i,n,o,r,a){try{var s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getMainCategory(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(s),this.mainHelper.validateGuid(l),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:103,esi:s,msid:l,nextView:e,name:t,text:i,suggestList:n,navButton:o,selectedStructureId:r,selectedIndustryId:a,mainCategory:c,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.selectBusinessTypePageNavigationClick",e.stack)}},e.prototype.servicesSelected=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getMainCategory(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(o),this.mainHelper.validateGuid(r),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:104,esi:o,msid:r,stores:e,bookings:t,userSubscription:i,blog:n,mainCategory:a,adiBuilderType:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.servicesSelected",e.stack)}},e.prototype.selectServicesPageNavigationClick=function(e,t,i,n,o,r){try{var a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getMainCategory(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(a),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:105,esi:a,nextView:e,navButton:t,stores:i,bookings:n,userSubscription:o,blog:r,mainCategory:s,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.selectServicesPageNavigationClick",e.stack)}},e.prototype.typeBusinessNamePageNavigationClick=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getMainCategory(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(n),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:106,esi:n,nextView:e,navButton:t,text:i,mainCategory:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.typeBusinessNamePageNavigationClick",e.stack)}},e.prototype.typeBusinessLocationPageNavigationClick=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getLod(),r=this.consumerBiLoggerHelpers.getMainCategory(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(n),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),o=this.mainHelper.validateString(o),i=this.mainHelper.validateString(i),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:107,esi:n,nextView:e,navButton:t,lod:o,text:i,mainCategory:r,adiBuilderType:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.typeBusinessLocationPageNavigationClick",e.stack)}},e.prototype.approveSearchInformationPageNavigationClick=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getLod(),r=this.consumerBiLoggerHelpers.getMainCategory(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(n),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),o=this.mainHelper.validateString(o),i=this.mainHelper.validateString(i),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:108,esi:n,nextView:e,navButton:t,lod:o,text:i,mainCategory:r,adiBuilderType:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.approveSearchInformationPageNavigationClick",e.stack)}},e.prototype.wixwizSearchResultsGoToTopOfPageClick=function(e,t){try{var i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getWixWizSearchGuid(),o=this.consumerBiLoggerHelpers.getMainCategory(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(t),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:109,esi:i,searchGuid:n,noOfMatches:e,noOfSeenMatches:t,mainCategory:o,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.wixwizSearchResultsGoToTopOfPageClick",e.stack)}},e.prototype.selectInfoCardPageNavigationClick=function(e,t,i,n,o,r,a){try{var s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getWixWizSearchGuid(),c=this.consumerBiLoggerHelpers.getMainCategory(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(s),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(i),this.mainHelper.validateNumber(n),this.mainHelper.validateNumber(o),this.mainHelper.validateNumber(r),this.mainHelper.validateNumber(a),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:110,esi:s,nextView:e,navButton:t,searchGuid:l,noOfMatches:i,noOfSeenMatches:n,position:o,similarityScore:r,locationScore:a,mainCategory:c,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.selectInfoCardPageNavigationClick",e.stack)}},e.prototype.infoCardAddEditRemoveInfo=function(e,t,i,n,o,r){try{var a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getWixWizSearchGuid(),l=this.consumerBiLoggerHelpers.getMainCategory(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(a),this.mainHelper.validateGuid(s),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(i),n=this.mainHelper.validateString(n),l=this.mainHelper.validateString(l),o=this.mainHelper.validateString(o),this.mainHelper.validateNumber(r),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:111,esi:a,searchGuid:s,fieldName:e,fieldType:t,fieldLength:i,action:n,mainCategory:l,origin:o,loadTime:r,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.infoCardAddEditRemoveInfo",e.stack)}},e.prototype.editInfoCardPageNavigationClick=function(e,t){try{var i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getMainCategory(),o=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(i),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:112,esi:i,nextView:e,navButton:t,mainCategory:n,adiBuilderType:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.editInfoCardPageNavigationClick",e.stack)}},e.prototype.businessTypeNotSupported=function(e,t){try{var i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getMainCategory(),o=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(i),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:113,esi:i,name:e,text:t,mainCategory:n,adiBuilderType:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.businessTypeNotSupported",e.stack)}},e.prototype.clickOnSearchButtonInSelectUserPage=function(e,t){try{var i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getMainCategory(),o=this.consumerBiLoggerHelpers.getLod(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),e=this.mainHelper.validateString(e),o=this.mainHelper.validateString(o),t=this.mainHelper.validateString(t),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:115,esi:i,mainCategory:n,text:e,lod:o,address:t,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.clickOnSearchButtonInSelectUserPage",e.stack)}},e.prototype.clickOnReplaceLogoIntroWelcometourBuilder=function(e,t){try{var i=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:117,editMode:i,esi:n,industryId:o,instanceId:r,msid:a,name:e,origin:t,revision:s,structureId:l,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.clickOnReplaceLogoIntroWelcometourBuilder",e.stack)}},e.prototype.genericCategoryDialogIsShown=function(e){try{var t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getMainCategory(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:118,esi:t,mainCategory:i,text:e,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.genericCategoryDialogIsShown",e.stack)}},e.prototype.eventsSchedulePageNavigationClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getMainCategory();return e=this.mainHelper.validateString(e),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:119,endValueExists:e,adiBuilderType:o,esi:r,mainCategory:a,navButton:t,nextView:i,startValueExists:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.eventsSchedulePageNavigationClick",e.stack)}},e.prototype.eventsSchedulePageActionOnPage=function(e,t){try{var i=this.consumerBiLoggerHelpers.getAdiBuilderType(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getMainCategory();return e=this.mainHelper.validateString(e),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),t=this.mainHelper.validateString(t),this.mainHelper.log({src:66,evid:120,name:e,adiBuilderType:i,esi:n,mainCategory:o,actionName:t,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.eventsSchedulePageActionOnPage",e.stack)}},e.prototype.siteConverterPagesNavigationClick=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getMainCategory();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:121,adiBuilderType:n,esi:o,mainCategory:r,navButton:e,nextView:t,view:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.siteConverterPagesNavigationClick",e.stack)}},e.prototype.siteConverterErrorIsShown=function(e,t){try{var i=this.consumerBiLoggerHelpers.getAdiBuilderType(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getMainCategory();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.log({src:66,evid:122,adiBuilderType:i,esi:n,mainCategory:o,name:e,view:t,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.siteConverterErrorIsShown",e.stack)}},e.prototype.siteConverterPhaseInImportStart=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateNumber(t),this.mainHelper.validateGuid(l),i=this.mainHelper.validateString(i),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(n),this.mainHelper.log({src:66,evid:123,url:e,adiBuilderType:o,esi:r,industryId:a,instanceId:s,loadTime:t,msid:l,phaseName:i,structureId:c,totalPages:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.siteConverterPhaseInImportStart",e.stack)}},e.prototype.siteConverterPhaseInImportComplete=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getAdiBuilderType(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getIntervalLoadTime(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateNumber(c),this.mainHelper.validateNumber(i),this.mainHelper.validateGuid(d),n=this.mainHelper.validateString(n),u=this.mainHelper.validateString(u),this.mainHelper.validateNumber(o),this.mainHelper.log({src:66,evid:124,url:e,details:t,adiBuilderType:r,esi:a,industryId:s,instanceId:l,intervalLoadTime:c,loadTime:i,msid:d,phaseName:n,structureId:u,totalPages:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.siteConverterPhaseInImportComplete",e.stack)}},e.prototype.siteConverterSiteJsonParsingStart=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:6,adiBuilderType:e,esi:t,industryId:i,instanceId:n,msid:o,structureId:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.siteConverterSiteJsonParsingStart",e.stack)}},e.prototype.siteConverterSiteJsonParsingSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getLoadTime(),r=this.consumerBiLoggerHelpers.getAdiBuilderType(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(o),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(t),this.mainHelper.validateNumber(i),this.mainHelper.validateNumber(n),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:7,loadTime:o,imagesLeft:e,imagesOrig:t,sectionsLeft:i,sectionsOrig:n,adiBuilderType:r,esi:a,industryId:s,instanceId:l,msid:c,structureId:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.siteConverterSiteJsonParsingSuccess",e.stack)}},e.prototype.siteConverterSiteJsonParsingFailed=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getLoadTime(),r=this.consumerBiLoggerHelpers.getAdiBuilderType(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(o),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(t),this.mainHelper.validateNumber(i),this.mainHelper.validateNumber(n),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:8,loadTime:o,imagesLeft:e,imagesOrig:t,sectionsLeft:i,sectionsOrig:n,adiBuilderType:r,esi:a,industryId:s,instanceId:l,msid:c,structureId:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.siteConverterSiteJsonParsingFailed",e.stack)}},e.prototype.recaptchaIMNotARobotResult=function(e){try{var t=this.consumerBiLoggerHelpers.getEsi();return this.mainHelper.validateGuid(t),e=this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:600,esi:t,result:e,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.recaptchaIMNotARobotResult",e.stack)}},e.prototype.recaptchaPageNavigationClick=function(e){try{var t=this.consumerBiLoggerHelpers.getEsi();return this.mainHelper.validateGuid(t),e=this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:601,esi:t,navButton:e,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.recaptchaPageNavigationClick",e.stack)}},e.prototype.youtubeChannelPageNavigationClick=function(e,t){try{var i=this.consumerBiLoggerHelpers.getAdiBuilderType(),n=this.consumerBiLoggerHelpers.getEsi();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.log({src:66,evid:99,adiBuilderType:i,esi:n,navButton:e,nextView:t,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.youtubeChannelPageNavigationClick",e.stack)}},e}();t.IntroConsumerBiLogger=n,window.IntroConsumerBiLogger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.addPageClick=function(e){try{var t=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getPageId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:349,source:e,editMode:t,esi:i,industryId:n,instanceId:o,msid:r,pageId:a,revision:s,structureId:l,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.addPageClick",e.stack)}},e.prototype.pagesPanelIsLoaded=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:350,instanceId:t,msid:i,revision:n,structureId:o,industryId:r,esi:a,editMode:s,pageId:l,source:e,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.pagesPanelIsLoaded",e.stack)}},e.prototype.addPagePanelIsLoaded=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),this.mainHelper.validateNumber(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:351,instanceId:e,msid:t,revision:i,structureId:n,industryId:o,esi:r,editMode:a,pageId:s,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.addPagePanelIsLoaded",e.stack)}},e.prototype.switchPageTypeInTheAddPagePanel=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),d=this.mainHelper.validateString(d),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:352,instanceId:n,msid:o,revision:r,structureId:a,industryId:s,esi:l,editMode:c,sectionType:e,sectionAlias:t,pageId:d,place:i,adiBuilderType:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.switchPageTypeInTheAddPagePanel",e.stack)}},e.prototype.clickOnDesiredNewPage=function(e,t,i,n,o,r,a){try{var s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getIndustryId(),p=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.validateGuid(p),g=this.mainHelper.validateString(g),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),m=this.mainHelper.validateString(m),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:353,instanceId:s,msid:l,revision:c,structureId:d,industryId:u,esi:p,editMode:g,sectionType:e,sectionAlias:t,pageId:h,place:i,noOfSuggestions:n,placeOfSelected:o,selectedLayout:r,is_columns:a,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnDesiredNewPage",e.stack)}},e.prototype.addNewPageSuccess=function(e,t,i,n,o,r,a,s,l,c,d){try{var u=this.consumerBiLoggerHelpers.getInstanceId(),p=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),v=this.consumerBiLoggerHelpers.getPageId(),S=this.consumerBiLoggerHelpers.getLoadTime(),y=this.consumerBiLoggerHelpers.getAdiBuilderType();return u=this.mainHelper.validateString(u),this.mainHelper.validateGuid(p),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),m=this.mainHelper.validateString(m),this.mainHelper.validateGuid(f),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),v=this.mainHelper.validateString(v),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateNumber(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(S),y=this.mainHelper.validateString(y),this.mainHelper.log({src:66,evid:354,instanceId:u,msid:p,revision:g,structureId:h,industryId:m,esi:f,editMode:e,sectionType:t,sectionAlias:i,pageId:v,nodeId:n,place:o,noOfSuggestions:r,placeOfSelected:a,selectedLayout:s,appId:l,appPageType:c,loadTime:S,is_columns:d,adiBuilderType:y,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.addNewPageSuccess",e.stack)}},e.prototype.addNewPageSuccess2=function(e,t,i,n,o,r,a,s,l,c,d,u){try{var p=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),v=this.consumerBiLoggerHelpers.getEsi(),S=this.consumerBiLoggerHelpers.getPageId(),y=this.consumerBiLoggerHelpers.getAdiBuilderType();return p=this.mainHelper.validateString(p),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),m=this.mainHelper.validateString(m),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(v),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),S=this.mainHelper.validateString(S),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateNumber(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),y=this.mainHelper.validateString(y),this.mainHelper.log({src:66,evid:354,instanceId:p,msid:g,revision:h,structureId:m,industryId:f,esi:v,editMode:e,sectionType:t,sectionAlias:i,pageId:S,nodeId:n,place:o,noOfSuggestions:r,placeOfSelected:a,selectedLayout:s,appId:l,appPageType:c,loadTime:d,is_columns:u,adiBuilderType:y,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.addNewPageSuccess2",e.stack)}},e.prototype.duplicatePage=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:367,instanceId:t,msid:i,revision:n,structureId:o,industryId:r,esi:a,editMode:s,pageId:l,originPageId:e,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.duplicatePage",e.stack)}},e.prototype.hideShowPage=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:356,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,editMode:l,pageId:c,action:e,appId:t,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.hideShowPage",e.stack)}},e.prototype.renamePage=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:357,instanceId:t,msid:i,revision:n,structureId:o,industryId:r,esi:a,editMode:s,pageId:l,appId:e,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.renamePage",e.stack)}},e.prototype.setPageAsSubpageMainPage=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:358,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,editMode:l,pageId:c,direction:e,appId:t,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.setPageAsSubpageMainPage",e.stack)}},e.prototype.clickOnDeletePage=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:359,instanceId:t,msid:i,revision:n,structureId:o,industryId:r,esi:a,editMode:s,pageId:l,appId:e,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnDeletePage",e.stack)}},e.prototype.deletePageSuccess=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),c=this.consumerBiLoggerHelpers.getLoadTime(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:360,instanceId:t,msid:i,revision:n,structureId:o,industryId:r,esi:a,editMode:s,pageId:l,appId:e,loadTime:c,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.deletePageSuccess",e.stack)}},e.prototype.clickOnSetPageAsHomepage=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),this.mainHelper.validateNumber(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:361,instanceId:e,msid:t,revision:i,structureId:n,industryId:o,esi:r,editMode:a,pageId:s,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnSetPageAsHomepage",e.stack)}},e.prototype.seoPanelIsLoaded=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:362,instanceId:t,msid:i,revision:n,structureId:o,industryId:r,esi:a,editMode:s,pageId:l,appId:e,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.seoPanelIsLoaded",e.stack)}},e.prototype.seoPanelFieldWasUpdated=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getEsi(),u=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(o),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:363,instanceId:r,msid:a,revision:s,structureId:l,industryId:c,esi:d,editMode:u,pageId:p,appId:e,fieldName:t,fieldType:i,fieldValue:n,fieldLength:o,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.seoPanelFieldWasUpdated",e.stack)}},e.prototype.transitionBetweenPagesUpdated=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:364,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,editMode:l,pageId:c,transitionType:e,prevTransitionType:t,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.transitionBetweenPagesUpdated",e.stack)}},e.prototype.reorderPage=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(t),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:365,instanceId:n,msid:o,revision:r,structureId:a,industryId:s,esi:l,editMode:c,pageId:d,position:e,prevPosition:t,appId:i,adiBuilderType:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.reorderPage",e.stack)}},e.prototype.pagesPanelWasClosed=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),e=this.mainHelper.validateString(e),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:366,instanceId:t,msid:i,revision:n,structureId:o,industryId:r,esi:a,editMode:s,name:e,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.pagesPanelWasClosed",e.stack)}},e.prototype.duplicatePageSuccess=function(e){try{var t=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getPageId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getLoadTime(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),e=this.mainHelper.validateString(e),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:355,editMode:t,esi:i,industryId:n,instanceId:o,msid:r,originPageId:e,pageId:a,revision:s,structureId:l,loadTime:c,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.duplicatePageSuccess",e.stack)}},e.prototype.clickOnPage=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getPageId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:368,pageName:e,appId:t,source:i,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,pageId:l,revision:c,structureId:d,adiBuilderType:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnPage",e.stack)}},e.prototype.clickOnSettings=function(e){try{var t=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getPageId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:369,pageName:e,editMode:t,esi:i,industryId:n,instanceId:o,msid:r,pageId:a,revision:s,structureId:l,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnSettings",e.stack)}},e.prototype.gotoPageSuccess=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getPageId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getLoadTime(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(u),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:370,pageName:e,appId:t,source:i,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,pageId:l,revision:c,structureId:d,loadTime:u,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.gotoPageSuccess",e.stack)}},e.prototype.addTpaPackageSuccess=function(e,t,i,n,o,r){try{var a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(e),t=this.mainHelper.validateString(t),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(n),this.mainHelper.validateGuid(d),o=this.mainHelper.validateString(o),this.mainHelper.validateNumber(u),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:371,numOfPages:e,appId:t,editMode:a,esi:s,industryId:l,instanceId:c,is_columns:i,loadTime:n,msid:d,nodeId:o,revision:u,structureId:p,adiBuilderType:g,appInstanceId:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.addTpaPackageSuccess",e.stack)}},e.prototype.pagesDropdownListOpenOnHover=function(){try{var e=this.consumerBiLoggerHelpers.getEditMode(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getPageId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:372,editMode:e,esi:t,industryId:i,instanceId:n,msid:o,pageId:r,revision:a,structureId:s,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report pagesManager.pagesDropdownListOpenOnHover",e.stack)}},e}();t.PagesManagerConsumerBiLogger=n,window.PagesManagerConsumerBiLogger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.tpaIntent=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getMetaSiteId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(o),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.log({src:75,evid:12,instance_id:e,msid:o,app_id:t,type:i,initiator:n,adapter:"app-sdk"})}catch(e){this.mainHelper.onError("BISafe: failed to report provisioning.tpaIntent",e.stack)}},e}();t.ProvisioningConsumerBiLogger=n,window.ProvisioningConsumerBiLogger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.colorPanelOpened=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),this.mainHelper.validateNumber(l),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),i=this.mainHelper.validateString(i),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:550,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,revision:l,sectionAlias:e,sectionType:t,structureId:c,origin:i,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.colorPanelOpened",e.stack)}},e.prototype.fontPanelOpened=function(e,t){try{var i=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:553,editMode:i,esi:n,industryId:o,instanceId:r,msid:a,revision:s,sectionAlias:e,sectionType:t,structureId:l,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.fontPanelOpened",e.stack)}},e.prototype.animationPanelOpened=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),this.mainHelper.validateNumber(l),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:556,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,revision:l,sectionAlias:e,sectionType:t,structureId:c,adiBuilderType:d,animationType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.animationPanelOpened",e.stack)}},e.prototype.backgroundPanelOpened=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:561,name:e,origin:t,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,revision:c,sectionAlias:i,sectionType:n,structureId:d,adiBuilderType:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.backgroundPanelOpened",e.stack)}},e.prototype.changeFontSizeClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getDesignId(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:554,sectionType:e,sectionAlias:t,fontSize:i,setId:n,designId:o,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,revision:d,structureId:u,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeFontSizeClick",e.stack)}},e.prototype.changeFontSizeSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getLoadTime(),r=this.consumerBiLoggerHelpers.getDesignId(),a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(o),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(u),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:555,sectionAlias:e,sectionType:t,loadTime:o,fontSize:i,setId:n,designId:r,editMode:a,esi:s,industryId:l,instanceId:c,msid:d,revision:u,structureId:p,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeFontSizeSuccess",e.stack)}},e.prototype.changeColorSuccess=function(e,t){try{var i=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getDesignId(),o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:552,sectionAlias:e,sectionType:t,loadTime:i,designId:n,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,revision:c,structureId:d,adiBuilderType:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeColorSuccess",e.stack)}},e.prototype.changeColorClick=function(e,t){try{var i=this.consumerBiLoggerHelpers.getDesignId(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),this.mainHelper.validateNumber(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:551,sectionAlias:e,sectionType:t,designId:i,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,revision:l,structureId:c,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeColorClick",e.stack)}},e.prototype.changeElementAnimationClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getDesignId(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:557,sectionAlias:e,sectionType:t,name:i,designId:o,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,revision:d,structureId:u,adiBuilderType:p,animationType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeElementAnimationClick",e.stack)}},e.prototype.changeElementAnimationSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getLoadTime(),r=this.consumerBiLoggerHelpers.getDesignId(),a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(o),i=this.mainHelper.validateString(i),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(u),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:558,sectionAlias:e,sectionType:t,loadTime:o,name:i,designId:r,editMode:a,esi:s,industryId:l,instanceId:c,msid:d,revision:u,structureId:p,adiBuilderType:g,animationType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeElementAnimationSuccess",e.stack)}},e.prototype.changeScrollAnimationClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getDesignId(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:559,sectionAlias:e,sectionType:t,alias:i,name:n,designId:o,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,revision:d,structureId:u,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeScrollAnimationClick",e.stack)}},e.prototype.changeScrollAnimationSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getLoadTime(),r=this.consumerBiLoggerHelpers.getDesignId(),a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(o),n=this.mainHelper.validateString(n),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(u),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:560,sectionAlias:e,sectionType:t,alias:i,loadTime:o,name:n,designId:r,editMode:a,esi:s,industryId:l,instanceId:c,msid:d,revision:u,structureId:p,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeScrollAnimationSuccess",e.stack)}},e.prototype.changeBackgroundClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getDesignId(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:562,mediaType:e,sectionType:t,sectionAlias:i,name:n,designId:o,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,revision:d,structureId:u,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeBackgroundClick",e.stack)}},e.prototype.changeBackgroundSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getLoadTime(),r=this.consumerBiLoggerHelpers.getDesignId(),a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(o),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(u),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:563,mediaType:e,loadTime:o,sectionType:t,sectionAlias:i,name:n,designId:r,editMode:a,esi:s,industryId:l,instanceId:c,msid:d,revision:u,structureId:p,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeBackgroundSuccess",e.stack)}},e.prototype.showHideListHeaderBackgroundClick=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getDesignId(),o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:564,sectionType:e,sectionAlias:t,action:i,designId:n,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,revision:c,structureId:d,adiBuilderType:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.showHideListHeaderBackgroundClick",e.stack)}},e.prototype.showHideListHeaderBackgroundSuccess=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getLoadTime(),o=this.consumerBiLoggerHelpers.getDesignId(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(n),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:565,loadTime:n,sectionType:e,sectionAlias:t,action:i,designId:o,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,revision:d,structureId:u,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.showHideListHeaderBackgroundSuccess",e.stack)}},e.prototype.uploadBackgroundClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getDesignId(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(c),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(d),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:566,designId:o,editMode:r,esi:a,industryId:s,instanceId:l,mediaType:e,msid:c,name:t,revision:d,sectionAlias:i,sectionType:n,structureId:u,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.uploadBackgroundClick",e.stack)}},e.prototype.openBackgroundImageSettings=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getDesignId(),o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(c),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:567,designId:n,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,name:e,revision:c,sectionAlias:t,sectionType:i,structureId:d,adiBuilderType:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.openBackgroundImageSettings",e.stack)}},e.prototype.changeBackgroundImagePositionClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getDesignId(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(d),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:568,value:e,designId:o,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,name:t,revision:d,sectionAlias:i,sectionType:n,structureId:u,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeBackgroundImagePositionClick",e.stack)}},e.prototype.changeBackgroundImagePositionSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getLoadTime(),r=this.consumerBiLoggerHelpers.getDesignId(),a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(o),e=this.mainHelper.validateString(e),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(u),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:569,loadTime:o,value:e,designId:r,editMode:a,esi:s,industryId:l,instanceId:c,msid:d,name:t,revision:u,sectionAlias:i,sectionType:n,structureId:p,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeBackgroundImagePositionSuccess",e.stack)}},e.prototype.changeTextAlignmentClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getDesignId(),a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId();return o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),e=this.mainHelper.validateString(e),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(u),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:570,adiBuilderType:o,designId:r,editMode:a,esi:s,textAlign:e,industryId:l,instanceId:c,msid:d,revision:u,sectionAlias:t,sectionType:i,setId:n,structureId:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeTextAlignmentClick",e.stack)}},e.prototype.changeTextAlignmentSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getLoadTime(),r=this.consumerBiLoggerHelpers.getAdiBuilderType(),a=this.consumerBiLoggerHelpers.getDesignId(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),u=this.consumerBiLoggerHelpers.getMetaSiteId(),p=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(u),this.mainHelper.validateNumber(p),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:571,loadTime:o,adiBuilderType:r,designId:a,editMode:s,esi:l,textAlign:e,industryId:c,instanceId:d,msid:u,revision:p,sectionAlias:t,sectionType:i,setId:n,structureId:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeTextAlignmentSuccess",e.stack)}},e.prototype.changeHeaderTransparencyStart=function(e,t){try{var i=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getDesignId(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return i=this.mainHelper.validateString(i),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:572,pageId:i,changeBy:e,value:t,adiBuilderType:n,designId:o,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,revision:d,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeHeaderTransparencyStart",e.stack)}},e.prototype.changeHeaderTransparencySuccess=function(e,t){try{var i=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getLoadTime(),o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getDesignId(),a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId();return i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(n),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(u),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:573,pageId:i,loadTime:n,changeBy:e,value:t,adiBuilderType:o,designId:r,editMode:a,esi:s,industryId:l,instanceId:c,msid:d,revision:u,structureId:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeHeaderTransparencySuccess",e.stack)}},e.prototype.changeTextPositionClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),d=this.mainHelper.validateString(d),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:574,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,revision:c,sectionAlias:e,sectionType:t,setId:i,structureId:d,textPosition:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeTextPositionClick",e.stack)}},e.prototype.changeTextPositionSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),d=this.mainHelper.validateString(d),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:575,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,revision:c,sectionAlias:e,sectionType:t,setId:i,structureId:d,textPosition:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeTextPositionSuccess",e.stack)}},e.prototype.sectionHeightButtonsAreShown=function(e,t){try{var i=this.consumerBiLoggerHelpers.getAdiBuilderType(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId();return i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),this.mainHelper.validateNumber(l),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:576,adiBuilderType:i,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,revision:l,sectionAlias:e,sectionType:t,structureId:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.sectionHeightButtonsAreShown",e.stack)}},e.prototype.sectionHeightButtonsDisappeared=function(e,t){try{var i=this.consumerBiLoggerHelpers.getAdiBuilderType(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId();return i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),this.mainHelper.validateNumber(l),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:577,adiBuilderType:i,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,revision:l,sectionAlias:e,sectionType:t,structureId:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.sectionHeightButtonsDisappeared",e.stack)}},e.prototype.sectionHeightChangeClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(e),t=this.mainHelper.validateString(t),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:578,sectionHeight:e,changeHeightAction:t,adiBuilderType:o,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,revision:d,sectionAlias:i,sectionType:n,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.sectionHeightChangeClick",e.stack)}},e.prototype.sectionHeightChangeSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(e),t=this.mainHelper.validateString(t),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:579,sectionHeight:e,changeHeightAction:t,adiBuilderType:o,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,revision:d,sectionAlias:i,sectionType:n,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.sectionHeightChangeSuccess",e.stack)}},e.prototype.changeSlideshowDurationStart=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId();return n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(c),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:580,adiBuilderType:n,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,name:e,revision:c,sectionAlias:t,sectionType:i,structureId:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeSlideshowDurationStart",e.stack)}},e.prototype.changeSlideshowDurationSuccess=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getLoadTime(),o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(d),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:581,loadTime:n,adiBuilderType:o,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,name:e,revision:d,sectionAlias:t,sectionType:i,structureId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeSlideshowDurationSuccess",e.stack)}},e}();t.SectionDesignConsumerBiLogger=n,window.SectionDesignConsumerBiLogger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.replaceSectionPanelIsLoaded=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:250,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,nodeId:e,sectionType:t,sectionAlias:i,pageId:u,adiBuilderType:p,source:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.replaceSectionPanelIsLoaded",e.stack)}},e.prototype.changeASectionLayout=function(e,t,i,n,o,r,a,s,l,c,d){try{var u=this.consumerBiLoggerHelpers.getInstanceId(),p=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),v=this.consumerBiLoggerHelpers.getEditMode(),S=this.consumerBiLoggerHelpers.getPageId(),y=this.consumerBiLoggerHelpers.getAdiBuilderType();return u=this.mainHelper.validateString(u),this.mainHelper.validateGuid(p),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),m=this.mainHelper.validateString(m),this.mainHelper.validateGuid(f),v=this.mainHelper.validateString(v),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),S=this.mainHelper.validateString(S),this.mainHelper.validateNumber(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),y=this.mainHelper.validateString(y),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:251,instanceId:u,msid:p,revision:g,structureId:h,industryId:m,esi:f,editMode:v,nodeId:e,sectionType:t,sectionAlias:i,pageId:S,noOfSuggestions:n,placeOfSelected:o,selectedLayout:r,appId:a,is_columns:s,adiBuilderType:y,source:l,place:c,noOfRecommendedViewed:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.changeASectionLayout",e.stack)}},e.prototype.changeSectionLayoutSuccess=function(e,t,i,n,o,r,a,s,l,c,d,u){try{var p=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),v=this.consumerBiLoggerHelpers.getEsi(),S=this.consumerBiLoggerHelpers.getPageId(),y=this.consumerBiLoggerHelpers.getAdiBuilderType(),T=this.consumerBiLoggerHelpers.getLoadTime();return p=this.mainHelper.validateString(p),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),m=this.mainHelper.validateString(m),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(v),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),S=this.mainHelper.validateString(S),this.mainHelper.validateNumber(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),c=this.mainHelper.validateString(c),y=this.mainHelper.validateString(y),this.mainHelper.validateNumber(T),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(u),this.mainHelper.log({src:66,evid:252,instanceId:p,msid:g,revision:h,structureId:m,industryId:f,esi:v,editMode:e,nodeId:t,sectionType:i,sectionAlias:n,pageId:S,noOfSuggestions:o,placeOfSelected:r,selectedLayout:a,appId:s,is_columns:l,source:c,adiBuilderType:y,loadTime:T,place:d,noOfRecommendedViewed:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.changeSectionLayoutSuccess",e.stack)}},e.prototype.addSectionPanelIsLoaded=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:253,adiBuilderType:e,instanceId:t,msid:i,revision:n,structureId:o,industryId:r,esi:a,editMode:s,pageId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionPanelIsLoaded",e.stack)}},e.prototype.switchSectionTypeInTheAddSectionPanel=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getPageId();return n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),u=this.mainHelper.validateString(u),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:254,adiBuilderType:n,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,sectionType:e,sectionAlias:t,pageId:u,place:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.switchSectionTypeInTheAddSectionPanel",e.stack)}},e.prototype.addSectionToPage=function(e,t,i,n,o,r,a,s,l,c,d){try{var u=this.consumerBiLoggerHelpers.getInstanceId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),v=this.consumerBiLoggerHelpers.getEsi(),S=this.consumerBiLoggerHelpers.getEditMode(),y=this.consumerBiLoggerHelpers.getPageId();return u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),m=this.mainHelper.validateString(m),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(v),S=this.mainHelper.validateString(S),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),y=this.mainHelper.validateString(y),this.mainHelper.validateNumber(i),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:255,instanceId:u,adiBuilderType:p,msid:g,revision:h,structureId:m,industryId:f,esi:v,editMode:S,sectionType:e,sectionAlias:t,pageId:y,position:i,place:n,noOfSuggestions:o,placeOfSelected:r,selectedLayout:a,addType:s,appId:l,is_columns:c,isLinked:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionToPage",e.stack)}},e.prototype.addSectionToPageSuccess=function(e,t,i,n,o,r,a,s,l,c,d,u,p){try{var g=this.consumerBiLoggerHelpers.getAdiBuilderType(),h=this.consumerBiLoggerHelpers.getInstanceId(),m=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),v=this.consumerBiLoggerHelpers.getStructureId(),S=this.consumerBiLoggerHelpers.getIndustryId(),y=this.consumerBiLoggerHelpers.getEsi(),T=this.consumerBiLoggerHelpers.getPageId(),b=this.consumerBiLoggerHelpers.getLoadTime();return g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(m),this.mainHelper.validateNumber(f),v=this.mainHelper.validateString(v),S=this.mainHelper.validateString(S),this.mainHelper.validateGuid(y),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),T=this.mainHelper.validateString(T),r=this.mainHelper.validateString(r),this.mainHelper.validateNumber(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(b),this.mainHelper.log({src:66,evid:256,adiBuilderType:g,instanceId:h,msid:m,revision:f,structureId:v,industryId:S,esi:y,editMode:e,nodeId:t,position:i,sectionType:n,sectionAlias:o,pageId:T,place:r,noOfSuggestions:a,placeOfSelected:s,selectedLayout:l,addType:c,appId:d,is_columns:u,loadTime:b,isLinked:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionToPageSuccess",e.stack)}},e.prototype.sectionMenuDeleteSectionClick=function(e,t,i,n,o,r){try{var a=this.consumerBiLoggerHelpers.getAdiBuilderType(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getIndustryId(),p=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId();return a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.validateGuid(p),g=this.mainHelper.validateString(g),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),h=this.mainHelper.validateString(h),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:257,adiBuilderType:a,instanceId:s,msid:l,revision:c,structureId:d,industryId:u,esi:p,editMode:g,nodeId:e,sectionType:t,sectionAlias:i,pageId:h,appId:n,origin:o,isLinked:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMenuDeleteSectionClick",e.stack)}},e.prototype.deleteSectionSuccess=function(e,t,i,n,o,r){try{var a=this.consumerBiLoggerHelpers.getAdiBuilderType(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getIndustryId(),p=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getLoadTime();return a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.validateGuid(p),g=this.mainHelper.validateString(g),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),h=this.mainHelper.validateString(h),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(m),o=this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:258,adiBuilderType:a,instanceId:s,msid:l,revision:c,structureId:d,industryId:u,esi:p,editMode:g,nodeId:e,sectionType:t,sectionAlias:i,pageId:h,appId:n,loadTime:m,origin:o,isLinked:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.deleteSectionSuccess",e.stack)}},e.prototype.moveSectionWithinThePageStartDragging=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getEsi(),u=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),u=this.mainHelper.validateString(u),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),p=this.mainHelper.validateString(p),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:259,instanceId:r,msid:a,revision:s,structureId:l,industryId:c,esi:d,editMode:u,nodeId:e,sectionType:t,sectionAlias:i,pageId:p,originPosition:n,appId:o,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.moveSectionWithinThePageStartDragging",e.stack)}},e.prototype.moveSectionWithinThePageClick=function(e,t,i,n,o,r,a){try{var s=this.consumerBiLoggerHelpers.getAdiBuilderType(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId();return s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),m=this.mainHelper.validateString(m),this.mainHelper.validateNumber(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:260,adiBuilderType:s,instanceId:l,msid:c,revision:d,structureId:u,industryId:p,esi:g,editMode:h,nodeId:e,sectionType:t,sectionAlias:i,pageId:m,position:n,originPosition:o,direction:r,appId:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.moveSectionWithinThePageClick",e.stack)}},e.prototype.sectionMovedWithinThePageSuccess=function(e,t,i,n,o,r,a){try{var s=this.consumerBiLoggerHelpers.getAdiBuilderType(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),f=this.consumerBiLoggerHelpers.getLoadTime();return s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),m=this.mainHelper.validateString(m),this.mainHelper.validateNumber(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(f),this.mainHelper.log({src:66,evid:261,adiBuilderType:s,instanceId:l,msid:c,revision:d,structureId:u,industryId:p,esi:g,editMode:h,nodeId:e,sectionType:t,sectionAlias:i,pageId:m,position:n,originPosition:o,direction:r,appId:a,loadTime:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMovedWithinThePageSuccess",e.stack)}},e.prototype.sectionMenuMoveSectionToAnotherPageClick=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getEsi(),u=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId();return o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),u=this.mainHelper.validateString(u),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),p=this.mainHelper.validateString(p),n=this.mainHelper.validateString(n),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:262,adiBuilderType:o,instanceId:r,msid:a,revision:s,structureId:l,industryId:c,esi:d,editMode:u,nodeId:e,sectionType:t,sectionAlias:i,pageId:p,appId:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMenuMoveSectionToAnotherPageClick",e.stack)}},e.prototype.sectionMovedToANewPageSuccess=function(e,t,i,n,o,r,a){try{var s=this.consumerBiLoggerHelpers.getAdiBuilderType(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),f=this.consumerBiLoggerHelpers.getLoadTime();return s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(f),this.mainHelper.log({src:66,evid:263,adiBuilderType:s,instanceId:l,msid:c,revision:d,structureId:u,industryId:p,esi:g,editMode:h,nodeId:e,sectionType:t,sectionAlias:i,pageId:m,originPageId:n,position:o,originPosition:r,appId:a,loadTime:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMovedToANewPageSuccess",e.stack)}},e.prototype.sectionMenuDuplicateSectionClick=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getPageId();return n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),u=this.mainHelper.validateString(u),i=this.mainHelper.validateString(i),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:264,adiBuilderType:n,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,sectionType:e,sectionAlias:t,pageId:u,appId:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMenuDuplicateSectionClick",e.stack)}},e.prototype.sectionDuplicateSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getEsi(),u=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId(),g=this.consumerBiLoggerHelpers.getLoadTime();return o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),u=this.mainHelper.validateString(u),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),p=this.mainHelper.validateString(p),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(g),this.mainHelper.log({src:66,evid:265,adiBuilderType:o,instanceId:r,msid:a,revision:s,structureId:l,industryId:c,esi:d,editMode:u,nodeId:e,sectionType:t,sectionAlias:i,pageId:p,appId:n,loadTime:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionDuplicateSuccess",e.stack)}},e.prototype.showMoreSectionPageLayoutsOnScroll=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getEsi(),u=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId();return o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),u=this.mainHelper.validateString(u),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),p=this.mainHelper.validateString(p),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:266,adiBuilderType:o,instanceId:r,msid:a,revision:s,structureId:l,industryId:c,esi:d,editMode:u,nodeId:e,sectionType:t,sectionAlias:i,pageId:p,context:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.showMoreSectionPageLayoutsOnScroll",e.stack)}},e.prototype.sectionPanelClosed=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getAdiBuilderType(),u=this.consumerBiLoggerHelpers.getPageId();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:267,instanceId:n,msid:o,revision:r,structureId:a,industryId:s,esi:l,editMode:c,nodeId:e,sectionType:t,sectionAlias:i,adiBuilderType:d,pageId:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionPanelClosed",e.stack)}},e.prototype.addSectionClick=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode();return t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:268,adiBuilderType:t,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,editMode:l,source:e,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionClick",e.stack)}},e.prototype.addSectionToPageStartDragging=function(e,t,i,n,o,r,a,s){try{var l=this.consumerBiLoggerHelpers.getAdiBuilderType(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getPageId();return l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(u),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),m=this.mainHelper.validateString(m),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),f=this.mainHelper.validateString(f),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:269,adiBuilderType:l,instanceId:c,msid:d,revision:u,structureId:p,industryId:g,esi:h,editMode:m,sectionType:e,sectionAlias:t,pageId:f,place:i,noOfSuggestions:n,placeOfSelected:o,selectedLayout:r,addType:a,appId:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionToPageStartDragging",e.stack)}},e.prototype.clickOnMoreActionsMenu=function(e,t){try{var i=this.consumerBiLoggerHelpers.getAdiBuilderType(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId();return i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),this.mainHelper.validateNumber(l),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:270,adiBuilderType:i,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,revision:l,sectionAlias:e,sectionType:t,structureId:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.clickOnMoreActionsMenu",e.stack)}},e.prototype.planToAddTpaInWelcomeTour=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getAdiBuilderType(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId();return n=this.mainHelper.validateString(n),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),this.mainHelper.log({src:66,evid:271,adiBuilderType:n,source:e,appId:t,appName:i,esi:o,industryId:r,instanceId:a,msid:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.planToAddTpaInWelcomeTour",e.stack)}},e.prototype.fetchImagesInAddSectionPanel=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getAdiBuilderType(),r=this.consumerBiLoggerHelpers.getEditMode(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId();return o=this.mainHelper.validateString(o),this.mainHelper.validateNumber(e),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(u),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:272,adiBuilderType:o,numOfImages:e,editMode:r,esi:a,industryId:s,instanceId:l,msid:c,pageId:d,place:t,revision:u,sectionAlias:i,sectionType:n,structureId:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.fetchImagesInAddSectionPanel",e.stack)}},e.prototype.expandSectionsListClick=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.log({src:66,evid:273,action:e,adiBuilderType:t,structureId:i,esi:n,industryId:o,instanceId:r,msid:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report sectionManagement.expandSectionsListClick",e.stack)}},e}();t.SectionManagementConsumerBiLogger=n,window.SectionManagementConsumerBiLogger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.designPanelIsLoaded=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),e=this.mainHelper.validateString(e),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:300,instanceId:t,msid:i,revision:n,structureId:o,industryId:r,esi:a,editMode:s,origin:e,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.designPanelIsLoaded",e.stack)}},e.prototype.clickOnDesiredDesign=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getNoOfDesigns(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(t),this.mainHelper.validateNumber(u),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),p=this.mainHelper.validateString(p),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:301,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,prevDesignId:e,designNumber:t,noOfDesigns:u,origin:i,targetDesignId:n,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnDesiredDesign",e.stack)}},e.prototype.designChangeSuccess=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getNoOfDesigns(),p=this.consumerBiLoggerHelpers.getLoadTime(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(t),this.mainHelper.validateNumber(u),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(p),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:302,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,prevDesignId:e,designNumber:t,noOfDesigns:u,origin:i,targetDesignId:n,loadTime:p,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.designChangeSuccess",e.stack)}},e.prototype.customizeDesignPanelIsLoaded=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getDesignId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),this.mainHelper.validateNumber(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:303,instanceId:e,msid:t,revision:i,structureId:n,industryId:o,esi:r,editMode:a,designId:s,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignPanelIsLoaded",e.stack)}},e.prototype.customizeDesignSubPanelIsLoaded=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getDesignId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:304,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,editMode:l,designId:c,name:e,origin:t,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignSubPanelIsLoaded",e.stack)}},e.prototype.clickOnDesiredColorFontSet=function(e,t,i,n){try{var o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getEditMode(),u=this.consumerBiLoggerHelpers.getDesignId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(i),this.mainHelper.validateNumber(n),p=this.mainHelper.validateString(p),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:305,instanceId:o,msid:r,revision:a,structureId:s,industryId:l,esi:c,editMode:d,designId:u,name:e,setId:t,setNumber:i,noOfSets:n,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnDesiredColorFontSet",e.stack)}},e.prototype.colorFontSetChangeSuccess=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getEsi(),u=this.consumerBiLoggerHelpers.getDesignId(),p=this.consumerBiLoggerHelpers.getLoadTime(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),u=this.mainHelper.validateString(u),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(n),this.mainHelper.validateNumber(o),this.mainHelper.validateNumber(p),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:306,instanceId:r,msid:a,revision:s,structureId:l,industryId:c,esi:d,editMode:e,designId:u,name:t,setId:i,setNumber:n,noOfSets:o,loadTime:p,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.colorFontSetChangeSuccess",e.stack)}},e.prototype.clickOnResetDesign=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getDesignId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:307,instanceId:t,msid:i,revision:n,structureId:o,industryId:r,esi:a,editMode:s,designId:l,isAdvanced:e,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnResetDesign",e.stack)}},e.prototype.resetDesignSuccess=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getDesignId(),c=this.consumerBiLoggerHelpers.getLoadTime(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:308,instanceId:t,msid:i,revision:n,structureId:o,industryId:r,esi:a,editMode:s,designId:l,loadTime:c,isAdvanced:e,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.resetDesignSuccess",e.stack)}},e.prototype.designWindowWasClosed=function(e){try{var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),e=this.mainHelper.validateString(e),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:309,instanceId:t,msid:i,revision:n,structureId:o,industryId:r,esi:a,editMode:s,name:e,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.designWindowWasClosed",e.stack)}},e.prototype.customizeDesignColorPaletteMode=function(e){try{var t=this.consumerBiLoggerHelpers.getDesignId(),i=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:310,designId:t,editMode:i,esi:n,industryId:o,instanceId:r,msid:a,revision:s,structureId:l,origin:e,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteMode",e.stack)}},e.prototype.customizeDesignColorPaletteModeChangeColorMainClick=function(){try{var e=this.consumerBiLoggerHelpers.getEditMode(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:311,editMode:e,esi:t,industryId:i,instanceId:n,msid:o,revision:r,structureId:a,adiBuilderType:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeChangeColorMainClick",e.stack)}},e.prototype.customizeDesignColorPaletteModeColorSelect=function(e,t){try{var i=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:312,advancedEdit:e,editMode:i,esi:n,industryId:o,instanceId:r,msid:a,name:t,revision:s,structureId:l,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeColorSelect",e.stack)}},e.prototype.customizeDesignColorPaletteModeAdvancedEditingColorClick=function(){try{var e=this.consumerBiLoggerHelpers.getEditMode(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:313,editMode:e,esi:t,industryId:i,instanceId:n,msid:o,revision:r,structureId:a,adiBuilderType:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeAdvancedEditingColorClick",e.stack)}},e.prototype.clickOnDesiredPaletteFromCustomizePallete=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getDesignId(),a=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),u=this.consumerBiLoggerHelpers.getStoryRevision(),p=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(e),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(t),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(u),this.mainHelper.validateNumber(n),p=this.mainHelper.validateString(p),o=this.mainHelper.validateString(o),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:314,num_of_colors:e,designId:r,editMode:a,esi:s,industryId:l,instanceId:c,msid:d,noOfSets:t,palleteCreator:i,revision:u,setNumber:n,structureId:p,origin:o,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnDesiredPaletteFromCustomizePallete",e.stack)}},e.prototype.openAnimationList=function(){try{var e=this.consumerBiLoggerHelpers.getDesignId(),t=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:315,designId:e,editMode:t,esi:i,industryId:n,instanceId:o,msid:r,revision:a,structureId:s,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.openAnimationList",e.stack)}},e.prototype.changeAnimationClick=function(e){try{var t=this.consumerBiLoggerHelpers.getDesignId(),i=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:316,name:e,designId:t,editMode:i,esi:n,industryId:o,instanceId:r,msid:a,revision:s,structureId:l,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.changeAnimationClick",e.stack)}},e.prototype.changeAnimationSuccess=function(e){try{var t=this.consumerBiLoggerHelpers.getLoadTime(),i=this.consumerBiLoggerHelpers.getDesignId(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),this.mainHelper.validateNumber(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:317,name:e,loadTime:t,designId:i,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,revision:l,structureId:c,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.changeAnimationSuccess",e.stack)}},e.prototype.customizeDesignChangeDarkLightMode=function(e){try{var t=this.consumerBiLoggerHelpers.getDesignId(),i=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:318,name:e,designId:t,editMode:i,esi:n,industryId:o,instanceId:r,msid:a,revision:s,structureId:l,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeDarkLightMode",e.stack)}},e.prototype.customizeDesignChangeDarkLightModeSuccess=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getDesignId(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getLoadTime(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:319,name:e,adiBuilderType:t,designId:i,editMode:n,esi:o,industryId:r,instanceId:a,loadTime:s,msid:l,revision:c,structureId:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeDarkLightModeSuccess",e.stack)}},e.prototype.customizeDesignColorPaletteModeColorSelectSuccess=function(e,t){try{var i=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:320,loadTime:i,advancedEdit:e,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,name:t,revision:l,structureId:c,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeColorSelectSuccess",e.stack)}},e.prototype.customizeDesignColorPaletteModeAdvancedEditingColorClickSuccess=function(){try{var e=this.consumerBiLoggerHelpers.getLoadTime(),t=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:321,loadTime:e,editMode:t,esi:i,industryId:n,instanceId:o,msid:r,revision:a,structureId:s,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeAdvancedEditingColorClickSuccess",e.stack)}},e.prototype.clickOnDesiredPaletteFromCustomizePalleteSuccess=function(e,t,i,n,o,r){try{var a=this.consumerBiLoggerHelpers.getDesignId(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),u=this.consumerBiLoggerHelpers.getMetaSiteId(),p=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(e),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(u),this.mainHelper.validateNumber(t),this.mainHelper.validateNumber(i),n=this.mainHelper.validateString(n),this.mainHelper.validateNumber(p),this.mainHelper.validateNumber(o),g=this.mainHelper.validateString(g),r=this.mainHelper.validateString(r),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:322,loadTime:e,designId:a,editMode:s,esi:l,industryId:c,instanceId:d,msid:u,num_of_colors:t,noOfSets:i,palleteCreator:n,revision:p,setNumber:o,structureId:g,origin:r,adiBuilderType:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess",e.stack)}},e.prototype.customizeDesignChangeScrollAnimationClick=function(e,t){try{var i=this.consumerBiLoggerHelpers.getDesignId(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:323,designId:i,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,name:e,alias:t,revision:l,structureId:c,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeScrollAnimationClick",e.stack)}},e.prototype.customizeDesignChangeScrollAnimationSuccess=function(e,t){try{var i=this.consumerBiLoggerHelpers.getDesignId(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getLoadTime(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(s),this.mainHelper.validateGuid(l),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:324,designId:i,editMode:n,esi:o,industryId:r,instanceId:a,loadTime:s,msid:l,name:e,alias:t,revision:c,structureId:d,adiBuilderType:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeScrollAnimationSuccess",e.stack)}},e.prototype.customizeDesignAdvancedColorsAreHardToReadDisplayed=function(){try{var e=this.consumerBiLoggerHelpers.getEditMode(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:325,editMode:e,esi:t,industryId:i,instanceId:n,msid:o,revision:r,structureId:a,adiBuilderType:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignAdvancedColorsAreHardToReadDisplayed",e.stack)}},e.prototype.customizeDesignAdvancedUserClicksFixColors=function(){try{var e=this.consumerBiLoggerHelpers.getEditMode(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:326,editMode:e,esi:t,industryId:i,instanceId:n,msid:o,revision:r,structureId:a,adiBuilderType:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignAdvancedUserClicksFixColors",e.stack)}},e.prototype.customizeDesignAdvancedFixColorsSuccess=function(){try{var e=this.consumerBiLoggerHelpers.getLoadTime(),t=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:327,loadTime:e,editMode:t,esi:i,industryId:n,instanceId:o,msid:r,revision:a,structureId:s,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignAdvancedFixColorsSuccess",e.stack)}},e.prototype.changeFontSizeClick=function(e,t){try{var i=this.consumerBiLoggerHelpers.getDesignId(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),this.mainHelper.validateNumber(l),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:328,fontSize:e,designId:i,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,revision:l,setId:t,structureId:c,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.changeFontSizeClick",e.stack)}},e.prototype.changeFontSizeSuccess=function(e,t){try{var i=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getDesignId(),o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(i),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),t=this.mainHelper.validateString(t),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:329,loadTime:i,fontSize:e,designId:n,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,revision:c,setId:t,structureId:d,adiBuilderType:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.changeFontSizeSuccess",e.stack)}},e.prototype.customizeDesignOverrideSectionDesignDisplayed=function(e){try{var t=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:330,name:e,editMode:t,esi:i,industryId:n,instanceId:o,msid:r,revision:a,structureId:s,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignOverrideSectionDesignDisplayed",e.stack)}},e.prototype.customizeDesignOverrideSectionDesignClickApply=function(e){try{var t=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:331,name:e,editMode:t,esi:i,industryId:n,instanceId:o,msid:r,revision:a,structureId:s,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignOverrideSectionDesignClickApply",e.stack)}},e.prototype.customizeDesignOverrideSectionDesignApplySuccess=function(e){try{var t=this.consumerBiLoggerHelpers.getLoadTime(),i=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getInstanceId(),a=this.consumerBiLoggerHelpers.getMetaSiteId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(t),e=this.mainHelper.validateString(e),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:332,loadTime:t,name:e,editMode:i,esi:n,industryId:o,instanceId:r,msid:a,revision:s,structureId:l,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignOverrideSectionDesignApplySuccess",e.stack)}},e.prototype.createPaletteFromLogoAlgoStart=function(e){try{var t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:333,origin:e,esi:t,industryId:i,instanceId:n,msid:o,revision:r,structureId:a,adiBuilderType:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.createPaletteFromLogoAlgoStart",e.stack)}},e.prototype.createPaletteFromLogoAlgoSuccess=function(e,t,i,n,o){try{var r=this.consumerBiLoggerHelpers.getDesignId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),u=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(a),s=this.mainHelper.validateString(s),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(o),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:334,loadTime:e,intervalLoadTime:t,name:i,origin:n,designId:r,esi:a,industryId:s,instanceId:l,msid:c,num_of_colors:o,revision:d,structureId:u,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.createPaletteFromLogoAlgoSuccess",e.stack)}},e.prototype.customizeDesignChangeColorationLevel=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getDesignId(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),c=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),this.mainHelper.validateNumber(l),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:335,name:e,adiBuilderType:t,designId:i,editMode:n,esi:o,industryId:r,instanceId:a,msid:s,revision:l,structureId:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeColorationLevel",e.stack)}},e.prototype.customizeDesignChangeColorationLevelSuccess=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getDesignId(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getInstanceId(),s=this.consumerBiLoggerHelpers.getLoadTime(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(s),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:336,name:e,adiBuilderType:t,designId:i,editMode:n,esi:o,industryId:r,instanceId:a,loadTime:s,msid:l,revision:c,structureId:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeColorationLevelSuccess",e.stack)}},e.prototype.designDropdownListOpenOnHover=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getPageId(),s=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(s),l=this.mainHelper.validateString(l),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:337,adiBuilderType:e,editMode:t,esi:i,industryId:n,instanceId:o,msid:r,pageId:a,revision:s,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report siteDesign.designDropdownListOpenOnHover",e.stack)}},e}();t.SiteDesignConsumerBiLogger=n,window.SiteDesignConsumerBiLogger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.show=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:45,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,editMode:l,name:e,type:t,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tips.show",e.stack)}},e.prototype.close=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:46,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,editMode:l,name:e,type:t,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tips.close",e.stack)}},e}();t.TipsConsumerBiLogger=n,window.TipsConsumerBiLogger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.start=function(e){try{var t=this.consumerBiLoggerHelpers.getAssistType(),i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:50,assistType:t,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,editMode:l,name:e,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tour.start",e.stack)}},e.prototype.phaseDuringTour=function(e){try{var t=this.consumerBiLoggerHelpers.getAssistType(),i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getPhaseNumber(),d=this.consumerBiLoggerHelpers.getTotalPhases(),u=this.consumerBiLoggerHelpers.getPhaseName(),p=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),this.mainHelper.validateNumber(c),this.mainHelper.validateNumber(d),u=this.mainHelper.validateString(u),e=this.mainHelper.validateString(e),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:51,assistType:t,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,editMode:l,phaseNumber:c,totalPhases:d,phaseName:u,name:e,designId:p,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tour.phaseDuringTour",e.stack)}},e.prototype.complete=function(e){try{var t=this.consumerBiLoggerHelpers.getAssistType(),i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:52,assistType:t,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,editMode:l,name:e,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tour.complete",e.stack)}},e.prototype.assistantMenuShown=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId(),s=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:53,state:e,origin:t,name:i,instanceId:n,msid:o,revision:r,structureId:a,industryId:s,esi:l,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tour.assistantMenuShown",e.stack)}},e.prototype.skipTour=function(e){try{var t=this.consumerBiLoggerHelpers.getAssistType(),i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),e=this.mainHelper.validateString(e),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:54,assistType:t,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,name:e,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tour.skipTour",e.stack)}},e.prototype.closeAssistant=function(){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),t=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),this.mainHelper.validateNumber(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:55,instanceId:e,msid:t,revision:i,structureId:n,industryId:o,esi:r,adiBuilderType:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tour.closeAssistant",e.stack)}},e.prototype.quitTour=function(e){try{var t=this.consumerBiLoggerHelpers.getAssistType(),i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return t=this.mainHelper.validateString(t),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:56,assistType:t,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,editMode:l,name:e,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tour.quitTour",e.stack)}},e.prototype.firstStepSelectionForMeOrShowMe=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:57,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,editMode:l,button:e,name:t,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tour.firstStepSelectionForMeOrShowMe",e.stack)}},e.prototype.lastStepSelectionKeepOrTryAnother=function(e,t){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),n=this.consumerBiLoggerHelpers.getMetaSiteId(),o=this.consumerBiLoggerHelpers.getStoryRevision(),r=this.consumerBiLoggerHelpers.getStructureId(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getAdiBuilderType();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(s),l=this.mainHelper.validateString(l),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:58,instanceId:i,msid:n,revision:o,structureId:r,industryId:a,esi:s,editMode:l,button:e,name:t,adiBuilderType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tour.lastStepSelectionKeepOrTryAnother",e.stack)}},e.prototype.timeout=function(e,t,i){try{var n=this.consumerBiLoggerHelpers.getLastPhase(),o=this.consumerBiLoggerHelpers.getEditMode(),r=this.consumerBiLoggerHelpers.getEsi(),a=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),u=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(n),this.mainHelper.validateNumber(e),t=this.mainHelper.validateString(t),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),a=this.mainHelper.validateString(a),s=this.mainHelper.validateString(s),this.mainHelper.validateGuid(l),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),u=this.mainHelper.validateString(u),this.mainHelper.log({src:66,evid:59,lastPhase:n,secondsSinceLastPhase:e,button:t,editMode:o,esi:r,industryId:a,instanceId:s,msid:l,name:i,revision:c,structureId:d,adiBuilderType:u,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tour.timeout",e.stack)}},e.prototype.assistantVideoModalLoaded=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:63,origin:e,adiBuilderType:t,esi:i,industryId:n,instanceId:o,msid:r,revision:a,structureId:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tour.assistantVideoModalLoaded",e.stack)}},e.prototype.assistantVideoModalClose=function(){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),t=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),r=this.consumerBiLoggerHelpers.getStoryRevision(),a=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),i=this.mainHelper.validateString(i),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(r),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:64,adiBuilderType:e,esi:t,industryId:i,instanceId:n,msid:o,revision:r,structureId:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tour.assistantVideoModalClose",e.stack)}},e.prototype.smartAssistCardMute=function(e){try{var t=this.consumerBiLoggerHelpers.getAdiBuilderType(),i=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getInstanceId(),r=this.consumerBiLoggerHelpers.getMetaSiteId(),a=this.consumerBiLoggerHelpers.getStoryRevision(),s=this.consumerBiLoggerHelpers.getStructureId();return t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(r),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(a),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:65,adiBuilderType:t,esi:i,industryId:n,instanceId:o,msid:r,name:e,revision:a,structureId:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report tour.smartAssistCardMute",e.stack)}},e}();t.TourConsumerBiLogger=n,window.TourConsumerBiLogger=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.consumerBiLoggerHelpers=e,this.clientTopology=t,this.mainHelper=i}return e.prototype.loginBarSettingLoginBarShow=function(e,t,i,n,o){try{return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),this.mainHelper.log({src:5,evid:647,hosting:e,selection:t,biToken:i,ts:n,viewmode:o})}catch(e){this.mainHelper.onError("BISafe: failed to report members.loginBarSettingLoginBarShow",e.stack)}},e.prototype.loginBarSettingLoginLogoutTextChange=function(e,t,i,n,o){try{return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),this.mainHelper.log({src:5,evid:648,hosting:e,type:t,biToken:i,ts:n,viewmode:o})}catch(e){this.mainHelper.onError("BISafe: failed to report members.loginBarSettingLoginLogoutTextChange",e.stack)}},e.prototype.loginBarSettingGreetingToggle=function(e,t,i,n,o){try{return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:649,hosting:e,toggle_state:t,biToken:i,ts:n,viewmode:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report members.loginBarSettingGreetingToggle",e.stack)}},e.prototype.loginBarSettingChangeLanguage=function(e,t,i,n,o){try{return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:650,hosting:e,language:t,biToken:i,ts:n,viewmode:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report members.loginBarSettingChangeLanguage",e.stack)}},e.prototype.loginBarSettingMemberSignupSettingsClick=function(e,t,i,n){try{return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(t),this.mainHelper.validateNumber(i),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:651,hosting:e,biToken:t,ts:i,viewmode:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report members.loginBarSettingMemberSignupSettingsClick",e.stack)}},e.prototype.memberSignupSettingWhoCanBeAMemberClick=function(e,t,i,n,o){try{return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:652,hosting:e,selection:t,biToken:i,ts:n,viewmode:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report members.memberSignupSettingWhoCanBeAMemberClick",e.stack)}},e.prototype.memberSignupSettingShowFirstClick=function(e,t,i,n,o){try{return e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:653,hosting:e,selection:t,biToken:i,ts:n,viewmode:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report members.memberSignupSettingShowFirstClick",e.stack)}},e.prototype.memberSignupSettingSocialAndCommunityToggle=function(e,t,i,n,o,r){try{return e=this.mainHelper.validateString(e),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:654,hosting:e,toggle_state:t,platform:i,biToken:n,ts:o,viewmode:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report members.memberSignupSettingSocialAndCommunityToggle",e.stack)}},e.prototype.memberSignupSettingPoliciesToggle=function(e,t,i,n,o,r){try{return e=this.mainHelper.validateString(e),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(n),this.mainHelper.validateNumber(o),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:655,hosting:e,toggle_state:t,type:i,biToken:n,ts:o,viewmode:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(e){this.mainHelper.onError("BISafe: failed to report members.memberSignupSettingPoliciesToggle",e.stack)}},e}();t.MembersConsumerBiLogger=n,window.MembersConsumerBiLogger=n},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var r=i(75),a=i(0),s=function(e){function t(t,i,n,o,r,a){var s=e.call(this,t,n,o)||this;return s.clusters=i,s.LayoutUtils=r,s.BoxDecorationTypes=a,s.stripGalleriesTypes=["Strip Image","Strip Slideshow","Strip Showcase","Fullwidth Collage","Strip Video"],s.shortSubtypeToLongForm={t:"title",s:core.ElementSubTypes.Subtitle,lt:core.ElementSubTypes.LongText,b:"button",m:"media"},s.DEFAULT_TEXT_ALIGNMENT="left",s}return n(t,e),t.$inject=["mediaOverride","clusters","applicationParameters","PresetMediaType","LayoutUtils","BoxDecorationTypes"],t.prototype.enhanceWithRealStructure=function(e,t,i){void 0===i&&(i=this.getNode(e));var n=this.calculateRealStructures(t,i),r=n.structure,a=n.onMediaStructure,s=n.cluster;return o({},e,{realStructure:r,realOnMediaStructure:a,cluster:s})},t.prototype.getNumberOfColumns=function(t){return e.prototype._getNumberOfColumns.call(this,this.getLE(t).structure)},t.prototype.getColumns=function(e){return this.getLG(e).columns},t.prototype.getMediaWidth=function(t){if(!(!this.hasMedia(t)||this.isList(t)&&this.isHeaderHidden(t))){if(this.hasSectionBackgroundImage(t))return 940;var i=e.prototype._getMediaWidth.call(this,this.getLE(t).leId),n=this.getVariations(t).media;return n&&n.squareImage?n.size*i:i}},t.prototype.getMediaPosition=function(e){if(!this.hasMedia(e)||!this.hasText(e)||this.hasSectionBackgroundImage(e))return[];var t=this.getFirstCoordinateOfElement(this.getStructure(e),"text"),i=t.rowIndex,n=t.columnIndex,o=this.getFirstCoordinateOfElement(this.getStructure(e),"media"),r=o.rowIndex,a=o.columnIndex;return this._getMediaPositions(i,n,r,a)},t.prototype.getTextPosition=function(e){if(!this.hasMedia(e)||!this.hasText(e))return[];if(this.hasSectionBackgroundImage(e))return["on"];var t=this.getFirstCoordinateOfElement(this.getStructure(e),"text"),i=t.rowIndex,n=t.columnIndex,o=this.getFirstCoordinateOfElement(this.getStructure(e),"media"),r=o.rowIndex,a=o.columnIndex;return this._getTextPositions(i,n,r,a,e.realOnMediaStructure)},t.prototype.hasMedia=function(e){if(this.hasSectionBackgroundImage(e)||this.isList(e)&&this.isHeaderHidden(e))return!0;var t=this.getFirstCoordinateOfElement(this.getStructure(e),"media"),i=t.rowIndex,n=t.columnIndex;return i>-1&&n>-1},t.prototype.hasText=function(e){var t=this.getFirstCoordinateOfElement(this.getStructure(e),"text"),i=t.rowIndex,n=t.columnIndex;return i>-1&&n>-1||!!e.realOnMediaStructure},t.prototype.isMediaStrip=function(e){if(!this.hasMedia(e)||this.isList(e)&&this.isHeaderHidden(e))return!1;if(this.hasSectionBackgroundImage(e))return!0;var t=this.getMediaPreferredOverride(e);if(t){var i=t.name;return this.stripGalleriesTypes.indexOf(i)>-1}return!1},t.prototype.isSideBySide=function(e){var t=this.getLE(e).cluster;return 19===t||21===t},t.prototype.isMediaStretched=function(e){if(!this.hasMedia(e)||this.hasSectionBackgroundImage(e)||this.isList(e)&&this.isHeaderHidden(e))return!1;var t=this.getVariations(e);return!(!t.media||!t.media.imageStretch||0===t.media.imageStretch.bottom&&0===t.media.imageStretch.top&&0===t.media.imageStretch.left&&0===t.media.imageStretch.right)},t.prototype.getHorizontalTextAlignment=function(e){var t=this.getVariations(e),i=this.getLE(e).argList,n=i.find(this.isTextArg),o=this.DEFAULT_TEXT_ALIGNMENT;if(this.hasBoxOnMedia(e)&&(o="center"),n)return a.get(t,[this.shortSubtypeToLongForm[n],"align"],o);var r=i.find(function(e){return"b"===e});return a.get(t,[this.shortSubtypeToLongForm[r],"hPosition"],o)},t.prototype.getMediaObjects=function(e){if(!this.hasMedia(e)&&!this.hasPattern(e))return[];if(this.hasSectionBackgroundImage(e))if(e.headerBg){if(!this.headerHasColorBG(e)&&!this.headerHasPatternBG(e))return"gallery"===e.headerBg.mediaType?e.headerBg.mediaItems:[e.headerBg]}else if(!this.hasColorBG(e)&&!this.hasPatternBG(e))return"gallery"===e.bg.mediaType?e.bg.mediaItems:[e.bg];var t,i=this.getMediaType(e),n=(this.isList(e)?e.node.children.find(function(e){return!e.userHidden}):e.node).contentElement.valuesByMediaType;switch(i){case r.FeatureDetector.MediaTypes.image:case r.FeatureDetector.MediaTypes.video:case r.FeatureDetector.MediaTypes.extVideo:t=[n[i][0]];break;case r.FeatureDetector.MediaTypes.gallery:t=n.image;break;case r.FeatureDetector.MediaTypes.shape:t=[n.shape&&n.shape[0]||n.clipart&&n.clipart[0]];break;default:t=[]}return this.hasPattern(e)&&t.push(e.bg),t},t.prototype.getMediaUrls=function(e){return this.getMediaObjects(e).map(function(e){return e.videoUrl||e.relativeUri})},t.prototype.hasPatternBG=function(e){return this.headerHasPatternBG(e)||e.bg&&"pattern"===e.bg.mediaType},t.prototype.hasColorBG=function(e){return this.headerHasColorBG(e)||e.bg&&"color"===e.bg.mediaType},t.prototype.startsWithMedia=function(e){return!(!this.hasMedia(e)||this.isList(e)&&this.isHeaderHidden(e))&&(!!this.hasSectionBackgroundImage(e)||0===this.getFirstCoordinateOfElement(this.getStructure(e),"media").rowIndex)},t.prototype.endsWithMedia=function(e){return!(!this.hasMedia(e)||this.isList(e)&&this.isHeaderHidden(e))&&(!!this.hasSectionBackgroundImage(e)||this.getLastCoordinateOfElement(e,"media").rowIndex===this.getStructure(e).length-1)},t.prototype.getTextWidth=function(e){for(var t=this.getStructure(e),i=0,n=t.length;i<n;i++){var o=t[i];if(o[0]===o[o.length-1]&&this.isTextOrButtonArg(o[0]))return"full"}return"part"},t.prototype.isList=function(e){return e.preset.data.isList},t.prototype.isListZigZag=function(e){return!!e.preset.data.zigZagState},t.prototype.getOrCreateMediaPreferredOverride=function(e,t){var i=this.getMediaPreferredOverride(e);if(i)return i;var n=this.getOverrides(e,"media");if(!n)return null;var o=this.getContentType(e);n[o]||(n[o]={});var r=n[o];r._preferred||(r._preferred={});var a=r._preferred;return a[0]||(a[0]=t),a[0]},t.prototype.getMediaPreferredOverride=function(e){var t=this.getOverrides(e,"media",this.getContentType(e));return t&&t._preferred&&t._preferred&&t._preferred[0]},t.prototype.isCircularImage=function(e){var t=this.getStyleOverride(e);return t&&"wp3"===t.media},t.prototype.hasShadow=function(e){if(!(!this.hasMedia(e)||this.isList(e)&&this.isHeaderHidden(e))){var t=this.getVariations(e).media,i=t&&t.imageShadow;return!(!i||!i.left&&!i.top)||void 0}},t.prototype.getStyleOverride=function(e){return this.getOverrides(e,"style",this.getContentType(e))},t.prototype.hasBox=function(e){var t=this,i=this.getOverrides(e,"decorations",this.getContentType(e));if(!i)return!1;var n=Object.keys(this.BoxDecorationTypes).map(function(e){return t.BoxDecorationTypes[e]});return Object.keys(i).some(function(e){var t=parseInt(e,10);return!isNaN(t)&&n.indexOf(t)>-1})},t.prototype.hasColumns=function(e){return!!this.getColumns(e)},t.prototype.isColumnBG=function(e){return this.hasColumns(e)&&this.hasMediaColumnBG(e)},t.prototype.hasPattern=function(e){return e.bg&&"pattern"===e.bg.mediaType},t.prototype.hasListHeader=function(e){return!this.isHeaderHidden(e)},t.prototype.getListZigZagType=function(e){var t=e.preset.data.zigZag;return t.cols&&t.rows?"mix":t.cols?"vertical":t.rows?"horizontal":"none"},t.prototype.hasSectionBackgroundImage=function(e){return!!e.bg&&["image","video","gallery"].indexOf(e.bg.mediaType)>-1},t.prototype.hasMediaColumnBG=function(e){var t=this.getColumns(e);if(t&&t.enable&&(t.colSplit||t.rowSplit))return"image"===t.backgroundMode||"imageOrColor"===t.backgroundMode},t.prototype.hasBoxOnMedia=function(e){return e.realOnMediaStructure&&!!e.realOnMediaStructure.length},t.prototype.isTextOrButtonArg=function(e){return this.isTextArg(e)||"b"===e},t.prototype.isTextArg=function(e){return["t","s","lt"].indexOf(e)>-1},t.prototype.getFirstCoordinateOfElement=function(e,t){if(void 0===e)return{rowIndex:-1,columnIndex:-1};for(var i=0,n=e.length;i<n;i++)for(var o=0,r=e[i].length;o<r;o++){var a=e[i][o];if(t===core.ElementTypes.Text&&this.isTextOrButtonArg(a)||t===core.ElementTypes.Media&&"m"===a)return{rowIndex:i,columnIndex:o}}return{rowIndex:-1,columnIndex:-1}},t.prototype.getLastCoordinateOfElement=function(e,t){for(var i=this.getStructure(e),n=i.length-1;n>=0;n--)for(var o=i[n].length-1;o>=0;o--){var r=i[n][o];if(t===core.ElementTypes.Text&&this.isTextOrButtonArg(r)||t===core.ElementTypes.Media&&"m"===r)return{rowIndex:n,columnIndex:o}}return{rowIndex:-1,columnIndex:-1}},t.prototype.getOverrides=function(e,t,i){var n=this.getLE(e).selections,o=n&&n.overrides&&n.overrides[t];return i?o&&o[i]:o},t.prototype.getVariations=function(e){var t=this.getLE(e).cluster,i=this.getOverrides(e,"variations",this.getContentType(e));return i?i[t]:{}},t.prototype.getContentType=function(e){return this.getLG(e).isHeader?e.preset.data.contentType+"ListHeaderList":e.preset.data.contentType},t.prototype.getMediaTypeOverride=function(e){return this.getLE(e).mediaType},t.prototype.getLE=function(e){return this.getLG(e).layouts[0]},t.prototype.getLG=function(e){return e.preset.data.groups[0]},t.prototype.getNode=function(e){return this.isList(e)?e.node.children.find(function(e){return!e.userHidden}):e.node},t.prototype.calculateRealStructures=function(e,t){var i=this.LayoutUtils.transformStructureToStringArray(e,e.structure),n=this.LayoutUtils.transformStructureToStringArray(e,e.onMediaStructure),o=t.contentElement.calculateUnwantedArgs(),r=e.argsSignature.split("#").filter(function(e){return o.find(function(t){return t===e})}),a=this.clusters.calculateFallBackClusterAndStructure(i,n,r,[],!t.isListItem);return{structure:a.structure,onMediaStructure:a.onMediaStructure,cluster:a.cluster}},t.prototype.getStructure=function(e){return e.realStructure},t.prototype.isHeaderHidden=function(e){return this.isList(e)&&e.node.children[0].userHidden},t.prototype.headerHasPatternBG=function(e){return e.headerBg&&"pattern"===e.headerBg.mediaType},t.prototype.headerHasColorBG=function(e){return e.headerBg&&"color"===e.headerBg.mediaType},t}(r.FeatureDetector);t.PresetFeatureDetector=s,angular.module("siteGeneratorStaticsConsumerAppInternal").service("presetFeatureDetector",s)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var r=i(75),a=i(0),s=function(e){function t(t,i,n,o,r,a){var s=e.call(this,t,n,i)||this;return s.selections=o,s.sectionBackgroundService=r,s.BoxDecorationTypes=a,s}return n(t,e),t.$inject=["mediaOverride","PresetMediaType","applicationParameters","selections","sectionBackgroundService","BoxDecorationTypes"],t.prototype.getNumberOfColumns=function(t){return e.prototype._getNumberOfColumns.call(this,t.structure)},t.prototype.getColumns=function(e){return e.columns},t.prototype.getMediaPosition=function(e){if(!this.hasContentMedia(e)||this.hasSectionBackgroundImage(e)||!this.hasText(e))return[];if(this.hasColumns(e))return this.getMediaPositionForColumns(e);var t=this.getFirstCoordinateOfElement(e,"text"),i=t.rowIndex,n=t.columnIndex,o=this.getFirstCoordinateOfElement(e,"media"),r=o.rowIndex,a=o.columnIndex;return this._getMediaPositions(i,n,r,a)},t.prototype.getTextPosition=function(e){if(!this.hasMedia(e)||!this.hasText(e))return[];if(this.hasSectionBackgroundImage(e))return["on"];if(this.hasColumns(e))return this.getTextPositionForColumns(e);var t=this.getFirstCoordinateOfElement(e,"text"),i=t.rowIndex,n=t.columnIndex,o=this.getFirstCoordinateOfElement(e,"media"),r=o.rowIndex,a=o.columnIndex;return this._getTextPositions(i,n,r,a,e.onMediaStructure)},t.prototype.isMediaStrip=function(e){return this.hasContentMedia(e)&&this.mediaOverride.isStripType(e)||this.hasSectionBackgroundImage(e)},t.prototype.isSideBySide=function(e){return 19===e.cluster||21===e.cluster},t.prototype.isMediaStretched=function(e){return this.hasContentMedia(e)&&!!e.getLayoutSelectionStore().getImageStretch(e.containingSegment,e)},t.prototype.getHorizontalTextAlignment=function(e){var t=this.getSectionVariations(e),i=e.argList.find(function(e){return"text"===e.type}),n="left";if(this.hasBoxOnMedia(e)&&(n="center"),i)return a.get(t,[i.subType,"align"],n);var o=e.argList.find(function(e){return"button"===e.type});return a.get(t,[o.subType,"hPosition"],n)},t.prototype.getMediaObjects=function(e){if(!this.hasMedia(e)&&!this.hasPattern(e))return[];var t=[];if((this.hasSectionBackgroundImage(e)||this.hasPattern(e))&&(t=this.sectionBackgroundService.extractBackgroundData(e.containingSegment.node,null,e.containingLG).mediaItems||[]),this.getElementArgIndex(e,"media")>-1){var i=a.find(e.containingSegment.node.contentElement.ceFields,function(e){return"media"===e.type});if(i){t.push(i.value[0]);var n=this.getMediaPreferredOverride(e);n&&this.isImageGallery(n.name)&&t.push.apply(t,i.value.slice(1).map(function(e){return o({},e,{mediaType:"gallery"})}))}}return t},t.prototype.getMediaUrls=function(e){return this.getMediaObjects(e).filter(function(e){return"pattern"!==e.mediaType}).map(function(e){return e.videoUrl||e.relativeUri})},t.prototype.getMediaWidth=function(e){if(this.hasMedia(e)){if(this.hasSectionBackgroundImage(e))return e.width;var t=e.getLayoutBySubType("image");return t?t.width:void 0}},t.prototype.startsWithMedia=function(e){if(this.hasSectionBackgroundImage(e))return!0;if(!this.hasMedia(e))return!1;if(this.hasColumns(e))return!!e.columns.filter(function(e){return e.hasMedia&&e.doesMediaFill}).length;if(1===e.structure[0].length){var t=e.structure[0][0];return"media"===e.argList[t].type}return!1},t.prototype.endsWithMedia=function(e){if(this.hasSectionBackgroundImage(e))return!0;if(!this.hasMedia(e))return!1;if(this.hasColumns(e))return!!e.columns.filter(function(e){return e.hasMedia&&e.doesMediaFill}).length;if(1===e.structure[0].length){var t=e.structure[e.structure.length-1][0];return"media"===e.argList[t].type}return!1},t.prototype.getTextWidth=function(e){for(var t=0,i=e.structure.length;t<i;t++){var n=e.structure[t],o=e.argList[n[0]].type;if(("text"===o||"button"===o)&&n[0]===n[n.length-1])return"full"}return"part"},t.prototype.hasMedia=function(e){return this.hasContentMedia(e)||this.hasSectionBackgroundImage(e)},t.prototype.hasText=function(e){return!!e.argList.find(function(e){return"text"===e.type||"button"===e.type})},t.prototype.isList=function(e){return e.isList},t.prototype.isListZigZag=function(e){return!!e.node.zigZagState},t.prototype.getListZigZagType=function(e){var t=this.selections.getForNode(e.node).zigZag;return t.cols&&t.rows?"mix":t.cols?"vertical":t.rows?"horizontal":"none"},t.prototype.hasBox=function(e){var t=this,i=Object.keys(this.BoxDecorationTypes).map(function(e){return t.BoxDecorationTypes[e]});return!!e.boxTypes&&e.boxTypes.some(function(e){return i.indexOf(e)>-1})},t.prototype.hasColumns=function(e){return!!this.getColumns(e)},t.prototype.isColumnBG=function(e){return this.hasColumns(e)&&this.getColumns(e).some(function(e){return e.doesMediaFill})},t.prototype.hasPattern=function(e){var t=this.sectionBackgroundService.extractBackgroundData(e.containingSegment.node,null,e.containingLG);return t&&"pattern"===t.mediaType},t.prototype.hasListHeader=function(e){return this.isList(e)&&!!e.groups.find(function(e){return"ListHeader"===e.contentType})},t.prototype.isCircularImage=function(e){var t=e.containingSegment.getTypeForLSSWithoutPartition(),i=this.getOverrides(e,"style",t);return i&&"wp3"===i.media},t.prototype.hasShadow=function(e){var t=e.containingLG.getLayoutSelectionStore().getImageShadow(e.containingSegment,e);if(t)return t.left||t.top},t.prototype.hasSectionBackgroundImage=function(e){return["image","video","gallery"].indexOf(this.sectionBackgroundService.getBackground(e.containingSegment.node).mediaType)>-1},t.prototype.hasBoxOnMedia=function(e){return e.onMediaStructure&&!!e.onMediaStructure.length},t.prototype.hasContentMedia=function(e){return this.getElementArgIndex(e,"media")>-1},t.prototype.getFirstCoordinateOfElement=function(e,t){var i=this.getElementArgIndex(e,t);t===core.ElementTypes.Text&&-1===i&&(i=this.getElementArgIndex(e,core.ElementTypes.Button));var n=this.findTypeInStructure(i,e.structure),o=n.rowIndex,r=n.columnIndex;return-1===o&&e.onMediaStructure?this.findTypeInStructure(i,e.onMediaStructure):{rowIndex:o,columnIndex:r}},t.prototype.findTypeInStructure=function(e,t){if(t)for(var i=0,n=t.length;i<n;i++)for(var o=0,r=t[i].length;o<r;o++)if(t[i][o]===e)return{rowIndex:i,columnIndex:o};return{rowIndex:-1,columnIndex:-1}},t.prototype.getMediaPreferredOverride=function(e){var t=this.getOverride(e,"media","_preferred");return t&&t[0]},t.prototype.getOverride=function(e,t,i){return e.getLayoutSelectionStore().getOverride(t,e.containingSegment,i)},t.prototype.getOverrides=function(e,t,i){return e.getLayoutSelectionStore().getOverrideMap()[t][i]},t.prototype.getSectionVariations=function(e){var t=e.containingSegment.getTypeForLSSWithoutPartition(),i=e.containingLG.getLayoutSelectionStore();return a.get(i.variations,[t,e.cluster])},t.prototype.getElementArgIndex=function(e,t){return e.argList.findIndex(function(e){return e.type===t})},t.prototype.getMediaTypeOverride=function(e){return this.getOverrides(e,"media","allowedMediaOverrides")},t.prototype.getTextPositionForColumns=function(e){var t=this.getColumns(e),i=t.findIndex(function(e){return e.hasText}),n=t.findIndex(function(e){return e.hasMedia}),o=[];return i>-1&&n>-1&&(i>n?o.push("right"):o.push("left")),o},t.prototype.getMediaPositionForColumns=function(e){var t=this.getColumns(e),i=t.findIndex(function(e){return e.hasText}),n=t.findIndex(function(e){return e.hasMedia}),o=[];return i>-1&&n>-1&&(n>i?o.push("right"):o.push("left")),o},t}(r.FeatureDetector);t.SectionFeatureDetector=s,angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionFeatureDetector",s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(196),o=i(0),r=function(){function e(e,t,i){this.contentInterpolator=e,this.contentNormalizer=t,this.flags=i}return e.$inject=["contentInterpolator","contentNormalizer","flags"],e.prototype.createMap=function(e){return this.settings=e,this.contentNormalizer.trimAllStringsInObject(this.settings.contentItems),this.initReplacements(),this.sortMapByScore(this.initMap())},e.prototype.initMap=function(){var t=this,i={};return i[e.DefaultSectionKey]={},this.settings.contentItems?(this.settings.contentItems.forEach(function(n){if(n.sectionIds.length>0&&n.sectionIds[0]!==e.DefaultSectionKey)o.forEach(n.sectionIds,function(e){e=t.contentNormalizer.normalizeSectionId(e),o.has(i,e)||(i[e]={});var r=i[e],a=t.calculateItemSignatureScore(n);t.addContent(r,n,a)});else{var r=t.calculateItemSignatureScore(n,!0),a=i[e.DefaultSectionKey];t.addContent(a,n,r)}}),i):i},e.prototype.calculateItemSignatureScore=function(e,t){void 0===t&&(t=!1);var i=e.structureIds&&e.structureIds.length>0,o=e.industryIds&&e.industryIds.length>0;return t?this.scoreDefaultContent(e):i&&o?n.ContentScores.scoreForFullSignature:i&&!o?n.ContentScores.scoreForNoIndustrySignature:!i&&o?n.ContentScores.scoreForNoStructureSignature:n.ContentScores.scoreForNoStructureAndIndustrySignature},e.prototype.scoreDefaultContent=function(e){var t=e.industryIds&&e.industryIds.length>0,i=t&&o.includes(e.industryIds,this.settings.industryId);return t?i?n.ContentScores.scoreForDefaultSpecificIndustry:n.ContentScores.scoreForDefaultIndustry:n.ContentScores.scoreForDefaultContent},e.prototype.getIds=function(e){return e?e.split("-"):[]},e.prototype.addContent=function(e,t,i){var n=this,r={},a=this.flags.includeIdInContentElement?this.getIds(t.id):void 0;o.forEach(t.content,function(t,o){var s=t.map(function(e,t){var o=n.contentInterpolator.interpolateSingleValue(e,n.settings.replacements,n.replacementsWithPlaceholders,n.replacementsWithDefaults);return o.score*=i,n.flags.includeIdInContentElement&&(o.id=a[t]),o}),l=e[o];r[o]=l?l.length:0,e[o]=(l||[]).concat(s)}),this.buildSets(t.sets,e,r)},e.prototype.buildSets=function(e,t,i){o.forEach(e,function(e){var n=o.map(e,function(e,t){return{field:t,index:e+i[t]}});o.forEach(n,function(e){t[e.field][e.index].setItems=n})})},e.prototype.sortMapByScore=function(e){return o.mapValues(e,function(e){return o.mapValues(e,function(e){return o.sortBy(e,function(e){return e.isFinal&&-e.score})})})},e.prototype.initReplacements=function(){this.preprocessReplacements();var e=this.createPlaceholderReplacements();this.replacementsWithPlaceholders=o.merge({},e,this.settings.replacements),this.replacementsWithDefaults=o.merge({},this.settings.defaultReplacements,e,this.settings.replacements)},e.prototype.preprocessReplacements=function(){var e=this;this.settings.replacements&&this.iterateValues(this.settings.replacements,function(t){return e.contentNormalizer.normalizeRichText(t)})},e.prototype.iterateValues=function(e,t){for(var i in e)e.hasOwnProperty(i)&&("object"==typeof e[i]?this.iterateValues(e[i],t):e[i]=t(e[i]))},e.prototype.createPlaceholderReplacements=function(){var e=this;if(!this.settings.placeholders)return{};var t={};return o.forEach(this.settings.placeholders,function(i){var n=i.structureId&&i.structureId===e.settings.structureId;(!i.structureId&&!o.has(t,i.name)||n)&&(o.set(t,i.name,i.default),o.set(t,"placeholder."+i.name,i.default),i.value&&!i.value.startsWith("self.")&&o.set(t,i.value,i.default))}),t},e.DefaultSectionKey="#DEFAULT#",e}();t.ContentMapCreator=r,angular.module("siteGeneratorContentManagerInternal").service("contentMapCreator",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(t,i,n,o,r,a,s,l){var c=this;this.$element=t,this.flags=i,this.$rootScope=n,this.applicationState=o,this.$translate=r,this.previewService=a,this.publishService=s,this.suggestDomainService=l;var d=$(".browser-url");this.$rootScope.$on("switchEditModeStart",function(t,i,n){d.addClass("mobile-browser-url");var o=c.getLength(e.getShortUrl(c.url));if(n&&o<e.MOBILE_BROWSER_URL_WIDTH){var r=c.getLength(c.url)-o;d.css({left:-r,width:"calc(100% + "+r+"px"}),d.addClass("clip-overflow")}else d.css({left:0,width:"100%"}),d.removeClass("clip-overflow")}),this.$rootScope.$on("switchEditModeEnd",function(){c.isInMobileEditMode()||d.removeClass("mobile-browser-url")})}return e.$inject=["$element","flags","$rootScope","applicationState","$translate","previewService","publishService","suggestDomainService"],e.getShortUrl=function(e){return e.replace(/^(?:https?:\/\/)?(?:www\.)?/,"")},e.prototype.isInMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},e.prototype.isDomainConnected=function(){return this.flags.stopExcessiveDSCalls?this.publishService.isDomainConnected():this.previewService.isDomainConnected()},e.prototype.getLength=function(e){$("body").append('<div id="measureTextWidth" class="browser-url-width-measuring-defaults">'+e+"</div>");var t=document.getElementById("measureTextWidth").clientWidth;return $("#measureTextWidth").remove(),t},e.prototype.tooltipOptions=function(){return{interactive:!0,content:this.$translate.instant("tooltips.fake-browser-bar-url",{URL:this.url,shortUrl:e.getShortUrl(this.url)})}},e.MOBILE_BROWSER_URL_WIDTH=149,e}();t.FakeBrowserBar=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(180),o=function(){function e(e,t){if(this.linkDetailsManager=e,this.validation=t,!this.link){var i=this.linkDetailsManager.getBusinessNameAndEmail(),o=i.name,r=i.email;this.link={name:o,email:r,fixedAmount:!1}}this.items=Object.keys(n.Currencies).map(function(e){return{key:e,label:e}}),this.link.currency=this.link.currency||n.Currencies.USD,this.setCurrencyDropDownValue()}return e.$inject=["linkDetailsManager","validation"],Object.defineProperty(e.prototype,"fixedAmountTooltip",{get:function(){return"link-details-paypal.toggle."+(this.link.fixedAmount?"on":"off")},enumerable:!0,configurable:!0}),e.prototype.setCurrencyDropDownValue=function(){var e=this;this.selectedCurrency=this.items.find(function(t){return t.key===e.link.currency})},e.prototype.fixedAmountChanged=function(t){this.link.fixedAmount=t,this.link.fixedAmount&&!this.link.amount&&(this.link.amount=e.DEFAULT_FIXED_AMOUNT)},Object.defineProperty(e.prototype,"validationMessage",{get:function(){return this.validation.isEmail(this.link.email)?!this.link.fixedAmount||this.link.amount>0?void 0:"link-details.paypal.amount.validation":"link-details.email.error"},enumerable:!0,configurable:!0}),e.prototype.changeCurrency=function(e){this.link.currency=e},e.DEFAULT_FIXED_AMOUNT=10,e}();t.LinkDetailsPaypal=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(){this.DEFAULT_DRAG_CONFIG={autoScroll:1,dragClickables:!0,minimumMovement:5,type:"x,y",zIndexBoost:!0}}return e.prototype.wrapConfig=function(e,t){return n.assign({},this.DEFAULT_DRAG_CONFIG,t)},e.prototype.createDraggable=function(e,t){var i=this.wrapConfig(e,t);return Draggable.create(e,i)},e.prototype.removeDraggable=function(e){e&&e.kill()},e}();t.cnDrag=new o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i(17),r=i(1),a=i(0);!function(e){e[e.NEVER=0]="NEVER",e[e.ON_HOVER=1]="ON_HOVER",e[e.ALWAYS=2]="ALWAYS"}(n=t.videoControlOptions||(t.videoControlOptions={}));var s=function(){function e(e,t,i,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b){var I=this;this.CONSUMER_DIALOGS=e,this.$scope=t,this.mediaOverrideManager=i,this.linkDetailsManager=s,this.linkEditorCAB=l,this.consumerMediaUtils=c,this.CcDialogBuilder=d,this.consumerBiLoggerHelpers=u,this.consumerBiLogger=p,this.$translate=g,this.flags=h,this.videoProvidersUtils=m,this.storyServices=f,this.mediaEditorManager=v,this.nodeFetcher=S,this.initService=y,this.applicationState=T,this.overlayManager=b,this.FIELD_CHANGE_DEBOUNCE_IN_MS=500,this.mediaTypes=cc.MediaPreviewType,this.mediaPreviewTypes=[this.mediaTypes.SingleImage,this.mediaTypes.Video,this.mediaTypes.ExtVideo,this.mediaTypes.Shape,this.mediaTypes.Clipart],this.videoControlOptions=[{id:n.NEVER,label:this.$translate.instant("editor.media-settings.ext-video.controls.option.never")},{id:n.ON_HOVER,label:this.$translate.instant("editor.media-settings.ext-video.controls.option.on-hover")}],this.init=function(){var e=I.node||I.nodeFetcher.getCurrentNode();I._node=e.isList()?e.children[0]:e,I.mediaType=I.extractMediaType(I._node),I.mediaValues=I.mediaOverrideManager.getMediaValues(I._node),I.mediaValue=I.mediaOverrideManager.getActiveMediaValue(I._node),I.updateILink(),I.segment=I.mediaEditorManager.getCurrentSegment(),I.segment&&I.segment.shouldAlignImage()&&I.setDropDownOfPosition(),I.mediaType===I.mediaTypes.ExtVideo&&(I.mediaValue.controls||(I.mediaValue.controls=n.ALWAYS),I.setCurrentVideoControlOption(I.mediaValue)),I.consumerBiLoggerHelpers.openedPanelStack.push("media settings"),I.consumerBiLogger.contentEditor.panelIsLoaded(I._node.getId(),I._node.getSpecificContentElementType(),I._node.alias,I.consumerBiLoggerHelpers.popPanelSource())},this.handleMediaChange=function(e,t,i,n){I.consumerMediaUtils.biReplaceMediaApproved(I._node,I.mediaType,t,r.BIOrigins.MediaSettingsPanel),e&&I._node.contentElement.fillValuesByMediaType(),I.init(),I.change({event:I.mediaEditorManager.createEvent(r.BIOrigins.EditPanel,o.IEditEventType.ValueChange,i,n)})},this.handleCancellingOfMediaChange=function(){I.consumerMediaUtils.biReplaceMediaClosed(I._node,I.mediaType,r.BIOrigins.MediaSettingsPanel)},this.changeVideoUrl=a.debounce(function(e,t){try{var i=I.videoProvidersUtils.getVideoThumbnailUrl(e);if(i)I.lastValidVideoUrl=e;else{if(!t)return;I.mediaValue.videoUrl=I.lastValidVideoUrl,i=I.videoProvidersUtils.getVideoThumbnailUrl(I.lastValidVideoUrl)}I.mediaValue.thumbnailUrl="string"==typeof i?i:"",I.videoProvidersUtils.isVimeo(e)?I.mediaValue.uri="/videos/"+I.videoProvidersUtils.getVimeoId(e):delete I.mediaValue.uri,I.handleVideoSettingsChanged()}catch(e){}},this.FIELD_CHANGE_DEBOUNCE_IN_MS),this.disableMediaChangeButton=!1,this.debug=this.flags.debug}return e.$inject=["CONSUMER_DIALOGS","$scope","mediaOverrideManager","linkDetailsManager","linkEditorCAB","consumerMediaUtils","CcDialogBuilder","consumerBiLoggerHelpers","consumerBiLogger","$translate","flags","videoProvidersUtils","storyServices","mediaEditorManager","nodeFetcher","initService","applicationState","overlayManager"],e.prototype.$onInit=function(){this.initService.loaded().then(this.init)},e.prototype.setDropDownOfPosition=function(){var e=this;this.setImageAlignmentOptions(),this.$scope.$watch(function(){return e.segment.getAlignment()},this.setSelectedImageAlignment.bind(this))},e.prototype.setImageAlignmentOptions=function(){this.imageAlignmentOptions=this.mediaOverrideManager.listAlignmentOptions()},e.prototype.setSelectedImageAlignment=function(e){this.selectedImageAlignment=this.mediaOverrideManager.getAlignmentOption(e)},Object.defineProperty(e.prototype,"title",{get:function(){switch(this.mediaType){case this.mediaTypes.SingleImage:return this.$translate.instant("editor.media-settings.image-settings.title");case this.mediaTypes.Video:return this.$translate.instant("editor.media-settings.video-settings.title");case this.mediaTypes.ExtVideo:return this.$translate.instant("editor.media-settings.ext-video-settings.title");case this.mediaTypes.Shape:return this.$translate.instant("editor.media-settings.shape-settings.title");case this.mediaTypes.Clipart:return this.$translate.instant("editor.media-settings.clipart-settings.title")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeButtonText",{get:function(){switch(this.mediaType){case this.mediaTypes.ExtVideo:return this.$translate.instant("editor.media-settings.button-search");default:return this.$translate.instant("editor.media-settings.button-replace")}},enumerable:!0,configurable:!0}),e.prototype.extractMediaType=function(e){return this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(this._node)},e.prototype.setCurrentVideoControlOption=function(e){this.selectedVideoControlOption=this.videoControlOptions[e.controls],this.lastValidVideoUrl=e.videoUrl},e.prototype.openMediaSettingsPanelHelp=function(){var e="help.mediasettings.image";switch(this.mediaType){case this.mediaTypes.SingleImage:e="help.mediasettings.image";break;case this.mediaTypes.Video:e="help.mediasettings.bgVideo";break;case this.mediaTypes.ExtVideo:e="help.mediasettings.extVideo";break;case this.mediaTypes.Shape:e="help.mediasettings.shape";break;case this.mediaTypes.Clipart:e="help.mediasettings.clipart"}this.CcDialogBuilder.showSupportIframe(this.$translate.instant(e),this.CONSUMER_DIALOGS.MEDIA_SETTINGS_PANEL_HELP)},e.prototype.closeMediaSettingsPanel=function(){this.consumerBiLogger.contentEditor.panelClosed(this._node.getId(),this._node.getSpecificContentElementType(),this._node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop(),this.flags.cardsToPanels?this.applicationState.goToBuilder():this.close()},e.prototype.changeMedia=function(){var e=this;if(!this.disableMediaChangeButton){this.disableMediaChangeButton=!0,this.consumerMediaUtils.biReplaceMediaClick(this._node,this.mediaType),this.consumerMediaUtils.biCheckIfReplaceLogoClick(this._node,r.BIOrigins.ClipartSettingsPanel);var t=this.mediaEditorManager.getMediaValueProjection(),i=Object.keys(t)[0],n=this.consumerMediaUtils.getChangeMediaMethod(this._node,this.mediaType),o={contentElement:this._node.contentElement,media:this._node.contentElement.values[i].value};this.consumerBiLoggerHelpers.organizeMediaNode=this._node,this.consumerMediaUtils.biReplaceMediaLoaded(this._node,this.mediaType,r.BIOrigins.MediaSettingsPanel),n(o,this.segment).then(function(n){return e.handleMediaChange(n.isChanged,n.numTotal,t,i)},function(){return e.handleCancellingOfMediaChange()}).finally(function(){e.disableMediaChangeButton=!1})}},e.prototype.handleVideoSettingsChanged=function(){this.change({event:this.mediaEditorManager.createEvent(r.BIOrigins.EditPanel,o.IEditEventType.VideoSettingsChange)})},e.prototype.onChangeMediaTitle=function(e){e.length>core.GENERAL_VALIDATIONS.MAX_MEDIA_TITLE_LENGTH&&(e=e.substr(0,core.GENERAL_VALIDATIONS.MAX_MEDIA_TITLE_LENGTH)),this.mediaValue.Title=e,this.change({event:this.mediaEditorManager.createEvent(r.BIOrigins.EditPanel,o.IEditEventType.MediaTitleChange)})},e.prototype.onChangeMediaDescription=function(e){e.length>core.GENERAL_VALIDATIONS.MAX_MEDIA_DESCRIPTION_LENGTH&&(e=e.substr(0,core.GENERAL_VALIDATIONS.MAX_MEDIA_DESCRIPTION_LENGTH)),this.mediaValue.Description=e,this.change({event:this.mediaEditorManager.createEvent(r.BIOrigins.EditPanel,o.IEditEventType.MediaDescriptionChange)})},e.prototype.showFaces=function(){var e=this.mediaValue,t=a.get(e,"fileInput.face"),i=document.createElement("div"),n=document.createElement("IMG"),o=500/e.height;i.appendChild(n),n.src="https://static.wixstatic.com/"+e.fileUrl,n.style.height="500px",n.style.position="fixed",n.style.overflowY="scroll",n.style.overflowX="scroll",n.style.top="0",n.style.left="0",document.body.appendChild(i),a.each(t,function(e){var t=document.createElement("div");t.style.position="fixed",t.style.top=e.y*o+"px",t.style.left=e.x*o+"px",t.style.height=e.height*o+"px",t.style.width=e.width*o+"px",t.style.border="2px solid red",i.appendChild(t)});var r=function(e){"Escape"===e.key&&document.body.removeChild(i),angular.element(window).unbind("keydown",r)};angular.element(window).keydown(r)},e.prototype.changeVideoControlOption=function(e){this.mediaValue.controls=e.id,this.handleVideoSettingsChanged()},e.prototype.changeLink=function(){var e=this,t={linkDetails:this.mediaValue.Link,node:this._node,biSource:"media"};this.linkEditorCAB.show(t).then(function(t){e.mediaValue.Link=t,e.updateILink(),e.handleVideoSettingsChanged()})},e.prototype.updateILink=function(){this.linkAsILink=this.linkDetailsManager.generateILink(this.mediaValue.Link)},e.prototype.canChangeAlignment=function(){return this.segment&&this.segment.shouldAlignImage()},e.prototype.shouldHideVideoControls=function(){return this.videoProvidersUtils.isVimeo(this.mediaValue.videoUrl)},e.prototype.onAlignmentChange=function(e){var t=a.get(this,"segment.node.contentElement.allValuesByMediaType.image[0].relativeUri");this.segment.updateAlignment(t,e.value),this.change({event:this.mediaEditorManager.createEvent(r.BIOrigins.EditPanel,o.IEditEventType.AlignmentChange,void 0,void 0,{name:this.$translate.instant("editor.media-settings.image-position.title"),type:"dropdown",value:e.value})})},e.prototype.onReturn=function(){var e=this;this.flags.cardsToPanels&&!this.flags.sectionMedia&&($("media-settings-panel .cc-panel-frame > *").hide(),$("media-settings-panel .cc-panel-frame").fadeOut(CcPanelFrame.SHOW_CONTENT_DELAY,function(){e.close()}))},e}();angular.module("siteGeneratorEditorInternal").component("mediaSettingsPanel",{templateUrl:"views/editor/media-settings-panel.html",controller:s,bindings:{change:"&",close:"&",node:"="}})},,,,function(e,t,i){"use strict";i.r(t);var n={mapToQuery:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+"="+encodeURIComponent(e[i]));return t.join("&")},generateGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},o=i(3),r={getItem:function(e){try{return Object(o.a)().localStorage.getItem(e)}catch(e){}},setItem:function(e,t){try{return Object(o.a)().localStorage.setItem(e,t)}catch(e){}}},a={fetch:function(e){return(new(0,Object(o.a)().Image)).src=e}};var s={image:"image",beacon:"beacon",fetch:"fetch"};function l(e){var t=void 0;switch(e){case s.beacon:t=d;break;case s.fetch:t=u;break;case s.image:t=c;break;default:t="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||!Object(o.a)().Image?u:c}return t}function c(e,t){return a.fetch(e+"?"+n.mapToQuery(t))}function d(e,t){var i=e+"?"+n.mapToQuery(t);return new Promise(function(e,t){return function(e){return!("undefined"==typeof navigator||!navigator||!navigator.sendBeacon)&&navigator.sendBeacon(e)}(i)?e(i):t(i)}).catch(function(){return c(e,t)}).catch(function(){return u(e,t)})}function u(e,t){return fetch(e+"?"+n.mapToQuery(t),{credentials:"include",method:"GET"}).then(function(e){if(!e.ok)throw Error(e.status);return e})}var p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var g=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t,this.publisher=i,this.publisher||(this.publisher=l())}return p(e,[{key:"getBaseUrl",value:function(){return this.baseUrl}},{key:"getPublisher",value:function(){return this.publisher}},{key:"report",value:function(e){return e?this.publisher(this.baseUrl,e):null}}]),e}(),h=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t}return h(e,[{key:"isActive",value:function(){return!0}},{key:"export",value:function(){return this.data}}]),e}(),f=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var v=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[],i&&(void 0===i.length?[i]:i).forEach(function(e){return t.addItem(e)})}return f(e,[{key:"clone",value:function(){return new e(this.items.slice())}},{key:"addItem",value:function(e){return this.items.push(e instanceof m?e:new m(e)),this}},{key:"mergeItems",value:function(){for(var e={},t=0;t<this.items.length;t++){var i=this.items[t];if(!i.isActive()){e=null;break}var n=i.export();for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}}]),e}();var S=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{src:72,evid:e,session_id:i,_:(new Date).getTime()}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m),t}();var y=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,13,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,S),t}();function T(e){return Object(o.a)().fedops.apps[e]}var b={init:function(e){Object(o.a)().fedops.apps[e]=Object(o.a)().fedops.apps[e]||{}},getStartLoadTime:function(e){var t=T(e);return t?t.startLoadTime:null},setStartLoadTime:function(e,t){return T(e).startLoadTime=t}},I=function(){return void 0!==Object(o.a)()&&Object(o.a)().location},P={getHost:function(){return I()&&Object(o.a)().location.host},isFedopsDev:function(){return((I()||{}).search||"").indexOf("fedops=dev")>-1}},M={getNavigation:function(){return void 0!==Object(o.a)()&&Object(o.a)().performance?Object(o.a)().performance.navigation:{}},getResources:function(){var e=[];try{return Object(o.a)()&&Object(o.a)().performance&&Object(o.a)().performance.getEntriesByType&&Object(o.a)().performance.getEntriesByType("resource")||e}catch(t){return e}},getTiming:function(){return Object(o.a)()&&Object(o.a)().performance?Object(o.a)().performance.timing:{}},now:function(){return Object(o.a)()&&Object(o.a)().performance&&Object(o.a)().performance.now?Object(o.a)().performance.now():"undefined"!=typeof performance&&performance&&performance.now?performance.now():(new Date).getTime()},mark:function(e){P.isFedopsDev()&&Object(o.a)()&&Object(o.a)().performance&&Object(o.a)().performance.mark&&Object(o.a)().performance.mark(e)},measure:function(e,t,i){P.isFedopsDev()&&Object(o.a)()&&Object(o.a)().performance&&Object(o.a)().performance.measure&&Object(o.a)().performance.measure(e,t,i)}};function E(e){return b.getStartLoadTime(e)||0}var w={appLoadTime:function(e){return M.now()-E(e)},loadStarted:function(e){b.setStartLoadTime(e,M.now())},firstRequestDuration:function(e){return E(e)}},C=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var A=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{duration:Math.floor(w.appLoadTime(e))}));return i.appName=e,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m),C(t,[{key:"setFirstRequestDuration",value:function(){return this.data.frd=Math.floor(w.firstRequestDuration(this.appName)),this}}]),t}();var L=17,B=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,L,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,S),t}(),k=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var H={xmlhttprequest:{count:"countXhr",unsupported:"unsprtXhr",duration:"timeXhr",total:"sizeXhr",longest:"longXhr",http2:"h2Xhr"},script:{count:"countJs",unsupported:"unsprtJs",duration:"timeJs",total:"sizeJs",cached:"cachedJs",http2:"h2Js"},link:{count:"countCss",unsupported:"unsprtCss",duration:"timeCss",total:"sizeCss",cached:"cachedCss",http2:"h2Css"},img:{count:"countImg",unsupported:"unsprtImg",duration:"timeImg",total:"sizeImg",cached:"cachedImages",http2:"h2Images"}},O={link:function(e){return/(.\.css$|.\.css?.)/g.test(e.name)}},_=function(e){return e.responseEnd-e.startTime};function D(e,t){var i=O[t];return e.filter(function(e){return t===e.initiatorType&&(!i||i(e))})}function $(e){return!e.name.match(/http(s)?:\/\/frog.wix.com\//)}function N(e){return function(e){var t=P.getHost();return t&&-1===e.indexOf(t)}(e.name)&&0===e.transferSize&&0===e.requestStart}function x(e){var t=e.filter(function(e){return!N(e)});return Object.keys(H).reduce(function(i,n){var o=D(e,n),r=D(t,n),a=H[n];return i[a.count]=r.length,i[a.duration]=function(e){if(0===e.length)return 0;var t={startTime:1/0,responseEnd:0};return e.forEach(function(e){t.startTime>e.startTime&&(t.startTime=e.startTime),t.responseEnd<e.responseEnd&&(t.responseEnd=e.responseEnd)}),t.responseEnd-t.startTime}(r),i[a.total]=function(e){return e.reduce(function(e,t){return e+t.transferSize},0)}(r),i[a.unsupported]=function(e){var t=e.length;if(0===t)return 0;var i=e.filter(N).length;return Math.round(i/t*100)}(o),i[a.http2]=function(e){if(0===e.length)return 0;var t=!1,i=Math.round(e.filter(function(e){return t=t||"nextHopProtocol"in e,"h2"===e.nextHopProtocol}).length/e.length*100);return t?i:NaN}(o),a.longest&&(i[a.longest]=function(e){if(0===e.length)return 0;var t=e.reduce(function(e,t){return _(t)>=_(e)?t:e});return _(t)}(r)),a.cached&&(i[a.cached]=function(e){if(0===e.length)return 0;var t=e.filter(function(e){return 0===e.transferSize});return Math.round(t.length/e.length*100)}(r)),i},{})}function R(e){return{url:e.name,downloadDuration:e.responseEnd-e.startTime,bytesTransferred:e.transferSize,isHTTP2:"h2"===e.nextHopProtocol}}var F=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,18,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,S),k(t,[{key:"performNetworkAnalysis",value:function(e){if(0===e.length)return null;var t=M.now(),i=e.filter($),n=x(i);n.overhead=M.now()-t;var o=function(e){return Object.keys(e).reduce(function(t,i){var n=parseInt(e[i]);return isNaN(n)||"number"!=typeof n||(t[i]=n),t},{})}(n);if(console.debug&&P.isFedopsDev()){var r=function(e){var t=e.reduce(function(e,t){return N(t)?e.unsupported.push(t):e.supported.push(t),e},{supported:[],unsupported:[]});return Object.keys(H).reduce(function(e,i){return e[i]={},e[i].supported=D(t.supported,i).map(function(e){return R(e)}),e[i].unsupported=D(t.unsupported,i).map(function(e){return R(e)}),e},{})}(i);console.debug("[fedops network analysis] [bytes analysis]\n"+JSON.stringify(o,null,4)),console.debug("[fedops network analysis] [resources breakdown]\n",r)}return o}}]),t}(),U=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var G=function(){function e(t,i,n,r){var a=r.sessionId,s=r.errorHandlerToggle,l=r.disableAutoLoadFinish;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appName=t,this.appVersion=i,this.reporter=n,this.params={sessionId:a},this.errorHandlerToggle=s,this.disableAutoLoadFinish=l,this.dataSource=new v({appName:t}),s&&Object(o.a)().fedopsLoggerErrorHandler.subscribeListener(t,this.reportError.bind(this))}return U(e,[{key:"reportNetworkAnalysis",value:function(){var e=this,t=M.getResources();setTimeout(function(){try{var i=new F(e.sessionId),n=i.performNetworkAnalysis(t);if(!n)return;var o=e.dataSource.clone().addItem(i).addItem(n);e._report(o)}catch(e){console.error("[fedops] Failed to report resource metrics",e)}},1e3)}},{key:"reportError",value:function(e,t,i){var n=void 0;n=this._appLoadedCalled?Object.keys(this._outgoingInteractions)[0]:"[APP LOAD]";var o=this.dataSource.clone().addItem({interactionName:n}).addItem({errorType:t}).addItem({errorInfo:i}).addItem(new B(this.sessionId));n&&this._report(o)}},{key:"_report",value:function(e){return this.reporter.report(e.mergeItems())}},{key:"getAppName",value:function(){return this.appName}},{key:"getAppVersion",value:function(){return this.appVersion}},{key:"getReporter",value:function(){return this.reporter}},{key:"getParam",value:function(e){return this.params[e]}},{key:"_isDisableAutoLoadFinish",value:function(){return this.disableAutoLoadFinish}},{key:"appLoadingPhase",value:function(e){var t=this.dataSource.clone().addItem({name:e}).addItem(new y(this.sessionId)).addItem(new A);return this._report(t)}},{key:"sessionId",get:function(){return this.getParam("sessionId")}}]),e}();var j=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,11,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,S),t}();var V=15,W=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,V,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,S),t}();var z=16,K=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,z,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,S),t}(),q=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var Y=function(e,t){if(e)return e(t)},X=function(e){function t(e,i,n,o){var r=o.sessionId,a=o.errorHandlerToggle,s=o.disableAutoLoadFinish,l=o.interactionTimeout,c=o.timeoutHook,d=o.startHook,u=o.endHook;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var p=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n,{sessionId:r,errorHandlerToggle:a,disableAutoLoadFinish:s}));return p._outgoingInteractions={},p.interactionTimeout=l,p.timeoutHook=c,p.startHook=d,p.endHook=u,p}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,G),q(t,[{key:"appLoaded",value:function(){if(!this._appLoadedCalled){Object(o.a)()&&Object(o.a)().fedops&&"function"==typeof Object(o.a)().fedops.clearLoadTimeout&&Object(o.a)().fedops.clearLoadTimeout();var e=this.dataSource.clone().addItem(new j(this.sessionId)).addItem(new A(this.appName).setFirstRequestDuration());return this._appLoadedCalled=!0,M.mark("[fedops] app-loaded"),M.measure("[fedops] app-loaded","navigationStart","[fedops] app-loaded"),this.reportNetworkAnalysis(),this._report(e)}}},{key:"interactionStarted",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.interactionTimeout,o=i.startHook,r=i.timeoutHook;M.mark(e+" started");var a=this.dataSource.clone().addItem({name:e}).addItem(new W(this.sessionId));return this._outgoingInteractions[e]={timestamp:M.now(),timeout:n||this.interactionTimeout},this._report(a),Y(o||this.startHook,{name:e}),{timeoutId:function(){if(n||t.interactionTimeout)return setTimeout(function(){var i=t.dataSource.clone().addItem({interactionName:e}).addItem({errorType:"timeout"}).addItem(new B(t.sessionId));t._report(i),Y(r||t.timeoutHook,{name:e,timeout:n||t.interactionTimeout})},n||t.interactionTimeout)}()}}},{key:"interactionEnded",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.timeoutId,r=i.endHook;M.mark(e+" ended"),M.measure(e+" duration",e+" started",e+" ended"),n&&clearTimeout(n);var a=Object(o.a)(),s=this._outgoingInteractions[e]||a.fedops&&a.fedops.apps&&a.fedops.apps[t.appName]&&a.fedops.apps[t.appName].interactions&&a.fedops.apps[t.appName].interactions[e],l=s?Math.floor(M.now()-s.timestamp):"";Y(r||this.endHook,{name:e,duration:l,timeout:this._outgoingInteractions[e]&&this._outgoingInteractions[e].timeout});var c=this.dataSource.clone().addItem({name:e}).addItem({duration:l}).addItem(new K(this.sessionId));delete this._outgoingInteractions[e],this._report(c)}},{key:"isDisableAutoLoadFinish",value:function(){return this._isDisableAutoLoadFinish()}}]),t}();var Q=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,14,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,S),t}(),J=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var Z=function(e){function t(e,i,n,o){var r=o.sessionId,a=o.disableAutoLoadFinish;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n,{sessionId:r,disableAutoLoadFinish:a}));return b.init(s.appName),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,G),J(t,[{key:"appLoadStarted",value:function(){w.loadStarted(this.appName);var e=this.dataSource.clone().addItem(new Q(this.sessionId));return this._report(e)}},{key:"isDisableAutoLoadFinish",value:function(){return this._isDisableAutoLoadFinish()}}]),t}(),ee=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var te=function(){function e(t){var i=t.swallowExceptions;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.swallowExceptions=i,this.listeners={},this.instrumentAjax(),this.instrumentSetTimeout(),this.instrumentSetInterval(),this.instrumentAddEventListener(),this.instrumentFetch(),this.instrumentPromise(),this.instrumentGloballyUnhandledError()}return ee(e,[{key:"subscribeListener",value:function(e,t){this.listeners[e]=t}},{key:"removeListener",value:function(e){delete this.listeners[e]}},{key:"instrumentAjax",value:function(){var e=this;if("XMLHttpRequest"in Object(o.a)()){var t=XMLHttpRequest.prototype;this._wrap(t,"open",function(e){return function(t,i){return this.__fedops_xhr={method:t,url:i,status_code:null},e.apply(this,arguments)}},"xhr"),this._wrap(t,"send",function(t){return function(){var i=this;function n(){if(1===i.readyState||4===i.readyState){try{i.__fedops_xhr.status_code=i.status}catch(e){}e._isErrorStatusCode(i.__fedops_xhr.status_code)&&e._reportError(i.__fedops_xhr,"xhr",i.__fedops_xhr.status_code)}}return e._wrap(this,"onload",function(e){return function(){e&&e.apply(this,arguments)}},"xhr"),e._wrap(this,"onerror",function(e){return function(){e&&e.apply(this,arguments)}},"xhr"),e._wrap(this,"onprogress",function(e){return function(){e&&e.apply(this,arguments)}},"xhr"),"onreadystatechange"in i&&"function"==typeof i.onreadystatechange?e._wrap(i,"onreadystatechange",function(e){return function(){return n(),e.apply(this,arguments)}}):i.onreadystatechange=n,t.apply(this,arguments)}},"xhr")}}},{key:"instrumentSetTimeout",value:function(){var e=this;this._wrap(Object(o.a)(),"setTimeout",function(t){return function(i){for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return t.call.apply(t,[this,e._wrapCallback(i,"setTimeout")].concat(o))}})}},{key:"instrumentSetInterval",value:function(){var e=this;this._wrap(Object(o.a)(),"setInterval",function(t){return function(i){for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return t.call.apply(t,[this,e._wrapCallback(i,"setInterval")].concat(o))}})}},{key:"instrumentAddEventListener",value:function(){var e=this;["EventTarget","env()","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","Modalenv()","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"].forEach(function(t){return function(t){var i=Object(o.a)()[t]&&Object(o.a)()[t].prototype;i&&Object.prototype.hasOwnProperty.call(i,"addEventListener")&&(e._wrap(i,"addEventListener",function(t){return function(i,n,o,r){var a=e._wrapCallback(n,"addEventListener");return n&&(n.__fedopsWrapper__=a),t.call(this,i,a,o,r)}}),e._wrap(i,"removeEventListener",function(e){return function(t,i,n,o){return i=i&&(i.__fedopsWrapper__||i),e.call(this,t,i,n,o)}}))}(t)})}},{key:"instrumentRequestAnimationFrame",value:function(){}},{key:"instrumentFetch",value:function(){var e=this;this._wrap(Object(o.a)(),"fetch",function(t){return function(i,n){return t.apply(this,arguments).then(function(t){var o=t.status;if(e._isErrorStatusCode(o)){var r={url:i,method:n?n.method:"GET",status_code:o};e._reportError(r,"fetch",o)}return t})}})}},{key:"instrumentPromise",value:function(){var e=this;Object(o.a)().addEventListener("unhandledrejection",function(t){e._reportError(t,"promise")})}},{key:"instrumentGloballyUnhandledError",value:function(){var e=this;Object(o.a)().addEventListener("error",function(t){e._reportError(t,"env()OnError")})}},{key:"instrumentHistory",value:function(){}},{key:"_wrap",value:function(e,t,i,n){var o=this,r=i(e[t]);e[t]=function(){try{return r.apply(this,arguments)}catch(e){if(o._reportError(e,n),!o.swallowExceptions)throw e}}}},{key:"_wrapCallback",value:function(e,t){var i=this;return function(){try{return e.apply(this,arguments)}catch(e){if(i._reportError(e,t),!i.swallowExceptions)throw e}}}},{key:"_reportError",value:function(e,t,i){var n=this,o=e&&(e.error||e);o.__fedopsHandledError__||(Object.keys(this.listeners).forEach(function(e){n.listeners[e](o,t,i)}),o.__fedopsHandledError__=!0)}},{key:"_isErrorStatusCode",value:function(e){return e>=400||0===e}}]),e}(),ie="fedops.logger.sessionId",ne=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function oe(){var e=void 0!==Object(o.a)()&&Object(o.a)().fedops&&Object(o.a)().fedops.sessionId;return e=(e=e||r.getItem(ie))||n.generateGuid(),r.setItem(ie,e),e}var re=g;var ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return ne(e,[{key:"setAppName",value:function(e){return this.appName=e,this}},{key:"setAppVersion",value:function(e){return this.appVersion=e,this}},{key:"setErrorHandlerToggle",value:function(e){return this.errorHandlerToggle=e,this}},{key:"setSwallowExceptions",value:function(e){return this.swallowExceptions=e,this}},{key:"setAppId",value:function(e){return this.appId=e,this}},{key:"setBaseUrl",value:function(e){return this.baseUrl=e,this}},{key:"setWidgetLogger",value:function(e){return this.isWidgetLogger=e,this}},{key:"setInteractionTimeout",value:function(e){return this.interactionTimeout=e,this}},{key:"setTimeoutHook",value:function(e){return this.timeoutHook=e,this}},{key:"setStartHook",value:function(e){return this.startHook=e,this}},{key:"setEndHook",value:function(e){return this.endHook=e,this}},{key:"setDisableAutoLoadFinish",value:function(e){return this.disableAutoLoadFinish=e,this}},{key:"setNetworkAnalysis",value:function(){return this}},{key:"setPublisher",value:function(e){return this.publisher=e,this}},{key:"build",value:function(){if(!this.appName)return null;this.appVersion||(this.appVersion="0.0.0");var e=this._createReporterInstance(this.baseUrl||"https://frog.wix.com/fed",l(this.publisher)),t=this.errorHandlerToggle,i=this.swallowExceptions,n=this.interactionTimeout,r=this.timeoutHook,a=this.startHook,s=this.endHook,c=this.disableAutoLoadFinish;t&&(Object(o.a)().fedopsLoggerErrorHandler=Object(o.a)().fedopsLoggerErrorHandler||new te({swallowExceptions:i}));return this.isWidgetLogger?new Z(this.appName,this.appVersion,e,{sessionId:oe(),errorHandlerToggle:t,swallowExceptions:i,disableAutoLoadFinish:c}):new X(this.appName,this.appVersion,e,{sessionId:oe(),errorHandlerToggle:t,swallowExceptions:i,disableAutoLoadFinish:c,interactionTimeout:n,timeoutHook:r,startHook:a,endHook:s})}},{key:"_createReporterInstance",value:function(e,t){try{return new re(e,t)}catch(i){return re(e,t)}}}]),e}();function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.baseUrl,n=void 0===i?null:i,r=t.appId,a=void 0===r?null:r,s=t.isWidgetLogger,l=void 0!==s&&s,c=t.errorHandlerToggle,d=void 0!==c&&c,u=t.disableAutoLoadFinish,p=void 0!==u&&u,g=t.swallowExceptions,h=void 0!==g&&g,m=t.interactionTimeout,f=void 0===m?null:m,v=t.timeoutHook,S=void 0===v?null:v,y=t.startHook,T=void 0===y?null:y,b=t.endHook,I=void 0===b?null:b,P=t.networkAnalysis,M=void 0!==P&&P,E=t.publisher,w=void 0===E?null:E,C=void 0!==Object(o.a)()?Object(o.a)().__CI_APP_VERSION__:null;return Object(o.a)().fedops=Object(o.a)().fedops||{},Object(o.a)().fedops.apps=Object(o.a)().fedops.apps||{},(new ae).setAppName(e).setAppVersion(C).setBaseUrl(n).setAppId(a).setErrorHandlerToggle(d).setSwallowExceptions(h).setWidgetLogger(l).setInteractionTimeout(f).setTimeoutHook(S).setStartHook(T).setEndHook(I).setDisableAutoLoadFinish(p).setNetworkAnalysis(M).setPublisher(w).build()}i.d(t,"create",function(){return se})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){i(88).initTemplates(i(328)),i(538),i(580),i(64),i(229),i(6),i(581),i(582),i(583),i(30),i(239),i(584),i(585),i(176),i(240),i(586),i(587),i(589),i(54),i(590),i(27),i(591),i(592),i(593),i(594),i(595),i(596),i(597),i(230),i(66),i(241),i(598),i(599),i(600),i(601),i(602),i(603),i(604),i(605),i(606),i(607),i(608),i(609),i(242),i(610),i(611),i(175),i(236),i(612),i(613),i(614),i(615),i(616),i(617),i(618),i(619),i(243),i(620),i(621),i(622),i(623),i(624),i(625),i(626),i(627),i(628),i(629),i(244),i(630),i(631),i(632),i(633),i(634),i(635),i(636),i(637),i(638),i(639),i(640),i(641),i(642),i(177),i(643),i(644),i(645),i(646),i(647),i(648),i(649),i(650),i(651),i(245),i(246),i(652),i(653),i(654),i(655),i(656),i(657),i(658),i(659),i(181),i(182),i(247),i(660),i(661),i(662),i(663),i(664),i(665),i(71),i(666),i(667),i(668),i(249),i(669),i(183),i(248),i(4),i(670),i(671),i(672),i(673),i(674),i(675),i(676),i(677),i(678),i(679),i(680),i(681),i(682),i(683),i(684),i(685),i(686),i(687),i(688),i(689),i(690),i(691),i(692),i(693),i(694),i(695),i(696),i(697),i(698),i(699),i(250),i(700),i(701),i(185),i(702),i(703),i(704),i(705),i(186),i(708),i(709),i(710),i(711),i(712),i(713),i(714),i(715),i(716),i(717),i(718),i(719),i(722),i(723),i(724),i(725),i(726),i(251),i(187),i(173),i(727),i(39),i(728),i(729),i(730),i(731),i(732),i(733),i(734),i(735),i(736),i(737),i(738),i(739),i(740),i(741),i(742),i(743),i(190),i(744),i(25),i(745),i(746),i(747),i(748),i(749),i(750),i(751),i(752),i(753),i(754),i(755),i(756),i(757),i(758),i(759),i(191),i(72),i(760),i(234),i(761),i(235),i(67),i(762),i(763),i(58),i(764),i(765),i(766),i(767),i(768),i(769),i(770),i(771),i(772),i(73),i(773),i(26),i(38),i(774),i(775),i(776),i(778),i(57),i(253),i(779),i(780),i(781),i(782),i(783),i(784),i(785),i(786),i(787),i(788),i(192),i(789),i(790),i(791),i(792),i(189),i(793),i(794),i(795),i(796),i(797),i(798),i(60),i(799),i(800),i(801),i(802),i(803),i(804),i(805),i(806),i(807),i(808),i(809),i(810),i(811),i(812),i(813),i(814),i(815),i(816),i(817),i(818),i(819),i(820),i(821),i(822),i(823),i(824),i(825),i(826),i(827),i(828),i(829),i(830),i(831),i(832),i(833),i(231),i(232),i(233),i(834),i(14),i(835),i(836),i(837),i(838),i(56),i(839),i(840),i(841),i(842),i(843),i(844),i(845),i(846),i(847),i(848),i(849),i(850),i(851),i(852),i(853),i(854),i(193),i(41),i(59),i(855),i(856),i(857),i(858),i(859),i(860),i(861),i(862),i(863),i(194),i(864),i(865),i(866),i(867),i(868),i(869),i(870),i(871),i(17),i(872),i(873),i(874),i(875),i(876),i(877),i(878),i(44),i(879),i(880),i(68),i(881),i(882),i(883),i(43),i(884),i(885),i(886),i(887),i(888),i(889),i(890),i(891),i(892),i(893),i(894),i(895),i(896),i(897),i(898),i(899),i(900),i(901),i(902),i(903),i(904),i(905),i(906),i(907),i(13),i(1),i(255),i(256),i(257),i(258),i(259),i(260),i(261),i(262),i(263),i(264),i(265),i(266),i(267),i(268),i(269),i(908),i(254),i(909),i(910),i(911),i(912),i(252),i(913),i(914),i(915),i(916),i(917),i(188),i(12),i(171),i(75),i(270),i(918),i(271),i(919),i(920),i(174),i(921),i(179),i(922),i(923),i(924),i(925),i(926),i(927),i(928),i(929),i(20),i(930),i(70),i(196),i(931),i(932),i(933),i(934),i(935),i(180),i(936),i(272),i(937),i(938),i(939),i(940),i(941),i(942),i(943),i(944),i(945),i(946),i(947),i(948),i(949),i(950),i(951),i(952),i(953),i(954),i(955),i(956),i(957),i(958),i(959),i(15),i(18),i(960),i(961),i(962),i(963),i(964),i(965),i(966),i(967),i(968),i(969),i(970),i(971),i(972),i(973),i(974),i(65),i(975),i(976),i(977),i(978),i(979),i(980),i(981),i(982),i(983),i(10),i(273),i(984),i(985),i(986),i(987),i(988),i(989),i(274),i(990),i(991),i(992),i(993),i(994),i(995),i(996),i(997),i(74),i(275),i(998),i(69),i(999),i(1e3),i(195),i(1001),i(1002),i(1003),i(1004),i(1005),i(1006),i(1007),i(1008),i(1009),i(1010),i(1011),i(1012),i(1013),i(1014),i(1015),i(1016),i(276),i(1017),i(55),i(1026),i(1027),i(1028),i(1029),i(1030),i(1031),i(1032),i(1033),i(1034),i(1035),i(1036),i(1037),i(1038),i(1039),i(178),i(184),i(1040),i(1041),i(1042),i(1043),i(1046),i(1047)},function(e,t,i){var n={"./analysis-playground.haml":329,"./animations/double-spinner.haml":330,"./animations/preloader-completed.haml":331,"./animations/preloader-publish-completed.haml":332,"./animations/task-animation.haml":333,"./assistant-tip.haml":334,"./assistant/assistant-bucket-list-tab.haml":335,"./assistant/assistant-menu-bucket-list.haml":336,"./assistant/assistant-menu-bucket.haml":337,"./assistant/assistant-menu-header.haml":338,"./assistant/assistant-menu-new.haml":339,"./assistant/assistant-menu-task-list.haml":340,"./assistant/assistant-menu-task.haml":341,"./assistant/assistant-tab-list.haml":342,"./assistant/assistant-video.haml":343,"./assistant/smart-assist-badge.haml":344,"./assistant/smart-assist-empty-state.haml":345,"./assistant/smart-assist-issue.haml":346,"./assistant/smart-assist-tab.haml":347,"./backdrop-playground.haml":348,"./builder-add.haml":349,"./builder-edit.haml":350,"./builder.haml":351,"./builder/add-section.haml":352,"./builder/app-package.haml":353,"./builder/apps-panel.haml":354,"./builder/business-details-changer.haml":355,"./builder/business-info-modal.haml":356,"./builder/drag-handle.haml":357,"./builder/drag-handle2.haml":358,"./builder/image-upscale-modal.haml":359,"./builder/list-span-tools.haml":360,"./builder/list-span-tools2.haml":361,"./builder/logo-extraction-popup.haml":362,"./builder/page-presets-preview-control.haml":363,"./builder/page-presets-preview.haml":364,"./builder/panel-message.haml":365,"./builder/presets-preview-viewer.haml":366,"./builder/preview-list.haml":367,"./builder/section-height.haml":368,"./builder/switch-color.haml":369,"./builder/switch-preset.haml":370,"./business-card/business-card-editable-builder.haml":371,"./business-card/business-card-editable-intro.haml":372,"./business-card/business-card-editable.haml":373,"./business-card/business-card-social-links.haml":374,"./common/color-circle.haml":375,"./common/display-mode-dropdown.haml":376,"./common/file-upload-select.haml":377,"./common/logo-color-extraction-wizard.haml":378,"./common/palette-preview.haml":379,"./common/tip-message.haml":380,"./component-overlay.haml":381,"./configurator/configuration-field.haml":382,"./configurator/configurator.haml":383,"./cropper-controls.haml":384,"./design/advanced-color-picker.haml":385,"./design/advanced-palette-editing.haml":386,"./design/animation-panel.haml":387,"./design/color-mode-dialog.haml":388,"./design/coloration-mode-selector.haml":389,"./design/coloration-panel-overlay.haml":390,"./design/coloration-panel.haml":391,"./design/design-panel-kit.haml":392,"./design/design-panel.haml":393,"./design/font-panel.haml":394,"./design/font/font-size-slider.haml":395,"./design/font/font-thumbnail.haml":396,"./design/header-design/header-background.haml":397,"./design/header-design/header-type.haml":398,"./design/header-design/logo-size-slider.haml":399,"./design/hex-input.haml":400,"./design/kit-palette.haml":401,"./design/kit-thumbnail-new.haml":402,"./design/kits/template-new-kit.haml":403,"./design/palette-color-dialog.haml":404,"./design/palette-color-picker.haml":405,"./design/palette-color.haml":406,"./design/palette-list.haml":407,"./design/section-animation-panel.haml":408,"./design/section-background-options/section-background-settings-image.haml":409,"./design/section-background-options/section-background-settings.haml":410,"./design/section-background-panel.haml":411,"./design/section-background-upload.haml":412,"./design/section-design/body-section-design-menu.haml":413,"./design/section-design/header-design-menu.haml":414,"./design/section-design/section-design-menu-deprecated.haml":415,"./design/section-design/section-design-menu.haml":416,"./design/section-font-panel.haml":417,"./design/section-override-warning.haml":418,"./design/site-design-menu.haml":419,"./design/slideshow-animation-panel.haml":420,"./digest/digest-presenter.haml":89,"./editor/button-field-editor.haml":421,"./editor/catalog-styles-dialog.haml":422,"./editor/content-element-editor.haml":423,"./editor/design-control.haml":424,"./editor/field-editor.haml":425,"./editor/gallery-picker.haml":426,"./editor/go-to-editor-popup.haml":427,"./editor/goto-editor-dialog.haml":428,"./editor/hide-node-pop-up.haml":429,"./editor/image-positions-control.haml":430,"./editor/image-positions.haml":431,"./editor/link-details-document.haml":432,"./editor/link-details-paypal.haml":433,"./editor/link-details.haml":434,"./editor/link-editor-panel.haml":435,"./editor/list-panel.haml":436,"./editor/login-bar-panel.haml":437,"./editor/media-editor.haml":438,"./editor/media-settings-panel.haml":439,"./editor/media-settings/ext-video-settings.haml":440,"./editor/media-settings/image-focal-point-panel.haml":441,"./editor/media-settings/image-settings.haml":442,"./editor/media-settings/image-upscale-status-message.haml":443,"./editor/media-settings/media-chooser.haml":444,"./editor/media-settings/media-position-panel.haml":445,"./editor/media-settings/media-settings-panel.haml":446,"./editor/media-settings/media-size-dropdown.haml":447,"./editor/members-signup-settings-panel.haml":448,"./editor/name-in-menu-editor.haml":449,"./editor/node-editor.haml":450,"./editor/single-panel.haml":451,"./editor/slide-show-navigation-overlay.haml":452,"./editor/social-panel-inner.haml":453,"./editor/social-panel.haml":454,"./editor/tpa-editor.haml":455,"./editor/tpa-manage-dialog.haml":456,"./first-time-mobile-editor-tooltip.haml":457,"./floating-go-to-editor-link.haml":458,"./floating-stage-controls.haml":459,"./floating-undo-redo.haml":460,"./headless-test.haml":227,"./import-site/import-page-list.haml":461,"./import-site/import-page-panel.haml":462,"./intro-directives.haml":463,"./intro/business-card-header.haml":464,"./intro/business-card-logo.haml":465,"./intro/business-card-static.haml":466,"./intro/intro-blocked-category.haml":467,"./intro/intro-business-dates.haml":468,"./intro/intro-business-location.haml":469,"./intro/intro-business-name.haml":470,"./intro/intro-data-item-field.haml":471,"./intro/intro-edit-user.haml":472,"./intro/intro-event-details.haml":473,"./intro/intro-import-site-confirm.haml":474,"./intro/intro-import-site-content.haml":475,"./intro/intro-search-confirm.haml":476,"./intro/intro-select-user.haml":477,"./intro/intro-service-offer.haml":478,"./list-span-overlay.haml":479,"./loaders/open-site-loader.haml":480,"./logo-color-playground.haml":481,"./main.haml":228,"./page-menu-dialog.haml":482,"./pages-panel.haml":483,"./preview/drop-target-overlay.haml":484,"./preview/empty-page.haml":485,"./preview/fake-browser-bar.haml":486,"./preview/fake-browser-bar2.haml":487,"./preview/fake-browser.haml":488,"./preview/list-with-cfa-menu.haml":489,"./preview/master-page-overlay.haml":490,"./preview/mobile-preview.haml":491,"./preview/overlay.haml":492,"./preview/preview-mode-toggle.haml":493,"./preview/preview.haml":494,"./preview/solution-overlay.haml":495,"./preview/suggest-domain-popup.haml":496,"./progress-bar.haml":497,"./pu2-notification.haml":498,"./publish/publish-choose-domain.haml":499,"./publish/publish-congrats.haml":500,"./publish/publish-connect-domain.haml":501,"./publish/publish-dialog.haml":502,"./segment-overlay.haml":503,"./seo-panel.haml":504,"./simple-spinner.haml":505,"./site-history.haml":90,"./spinner.haml":506,"./suggestion-dropdown.haml":507,"./tester.haml":508,"./text-manager/text-manager-dialog-suggestion.haml":509,"./text-manager/text-manager-dialog.haml":510,"./top-bar/account-menu.haml":511,"./top-bar/add-tab-dropdown/add-tab-dropdown-old.haml":512,"./top-bar/add-tab-dropdown/add-tab-dropdown.haml":513,"./top-bar/back-button.haml":514,"./top-bar/display-mode-inline.haml":515,"./top-bar/manage-tpa.haml":516,"./top-bar/pages-panel-dropdown/pages-panel-dropdown.haml":517,"./top-bar/pages-tab.haml":518,"./top-bar/publish-button-old.haml":519,"./top-bar/publish-button.haml":520,"./top-bar/site-design-dropdown.haml":521,"./top-bar/site-dropdown/go-to-editor-link-old.haml":522,"./top-bar/site-dropdown/go-to-editor-link.haml":523,"./top-bar/site-dropdown/site-dropdown-old.haml":524,"./top-bar/site-dropdown/site-dropdown.haml":525,"./top-bar/switch-edit-mode-dropdown/switch-edit-mode-dropdown.haml":526,"./top-bar/template-translation-dropdown/template-translation-dropdown.haml":527,"./top-bar/top-bar-old.haml":528,"./top-bar/top-bar.haml":529,"./top-bar/undo-redo-controls.haml":530,"./top-bar/upgrade-tab-popup/upgrade-popup-default.haml":531,"./top-bar/upgrade-tab-popup/upgrade-popup-seasonal-campaign.haml":532,"./top-bar/upgrade-tab-popup/upgrade-tab-popup.haml":533,"./top-bar/zoom-controls.haml":534,"./welcome/logo-color-extraction-wizard-new.haml":535,"./welcome/welcome-kits.haml":536,"./welcome/welcome-task-start.haml":537};function o(e){var t=r(e);return i(t)}function r(e){var t=n[e];if(!(t+1)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return t}o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id=328},function(e,t){e.exports="<h1>Blob Analysis tools</h1>\n<div style='display:inline-block; width: 5%'></div>\n<div style='overflow: scroll; border: 1px solid; height: 80%; display: inline-block; width: 90%; padding: 10px'>\n<b>\n<u>\nTasks list(\n</u>\n</b>\n<button id='refreshTasksList' ng-click='$ctrl.refreshTasksList()'>Refresh</button>\n)\n<img height='12' ng-if='$ctrl.refreshingTasks' src='https://www.leapcard.ie/_images/loading.gif' width='12'>\n<br>\n<div style='background-color: #FFFFFF; width: 1400px'>\n<div style='display: flex'>\n<div style='width:2%; display: inline-block'></div>\n<div style='width:12%; display: inline-block'>\n<b>Created at</b>\n</div>\n<div style='width:8%; display: inline-block'>\n<b>Owner</b>\n</div>\n<div style='width:20%; display: inline-block'>\n<b>Analyser</b>\n</div>\n<div style='width:7%; display: inline-block'>\n<b>Status</b>\n</div>\n<div style='width:7%; display: inline-block'>\n<b>Processed</b>\n</div>\n<div style='width:6%; display: inline-block'>\n<b>Download</b>\n</div>\n<div style='width:40%; display: inline-block'>\n<b>Info</b>\n</div>\n</div>\n<div style='height: 250px; overflow: scroll'>\n<div ng-if='!$ctrl.data.onlyMyTasks || task[1].user === $ctrl.data.userName' ng-repeat='task in $ctrl.results track by task[0]' style='display: flex; margin-top: 5px'>\n<div style='width:2%; display: inline-block; text-align: center'>\n<button class='p9b-text-button -small' id='removeTask' ng-click='$ctrl.removeTask(task[0])' ng-if='task[2].status === &#39;done&#39; || task[2].status === &#39;error&#39; || task[2].status === &#39;stale&#39;' style='color: #FF0000'>\nX\n</button>\n</div>\n<div style='width:12%; display: inline-block;'>{{$ctrl.formatDateTimeString(task[1].createdAt)}}</div>\n<div style='width:8%; display: inline-block'>{{task[1].user}}</div>\n<div style='width:20%; display: inline-block'>\n{{task[1].analysisRequestDetails.analyzer}}\n<div ng-if='task[1].userComment != &#39;&#39;' style='font-size: 12px'>\n{{task[1].userComment}}\n</div>\n</div>\n<div style='width:7%; display: inline-block; color: {{$ctrl.getColorByStatus(task[2].status)}}'>{{task[2].status}}</div>\n<div style='width:7%; display: inline-block; '>\n{{task[2].recordsProcessed}}\n<span style='font-size: 10px'>/ {{task[1].analysisRequestDetails.count}}</span>\n</div>\n<div style='width:6%; display: inline-block; text-align: center'>\n<a href='http://www.wix.com/_api/onboarding-bo-server/analyzers/tasks/result?id={{task[0]}}' ng-if='task[2].status === &#39;done&#39;'>\n<img src='http://icons.iconarchive.com/icons/hopstarter/soft-scraps/128/Button-Download-icon.png' width='15'>\n</a>\n</div>\n<div style='width:40%; display: inline-block; font-size: 14px; align-self: top;'>{{$ctrl.getTaskInfoLine(task)}}</div>\n</div>\n</div>\n</div>\n<div class='card-input onlyPremium'>\n<label>Show only my tasks</label>\n<input cc-select-on-focus data-hook='only-premium' enter-to-tab ng-model='$ctrl.data.onlyMyTasks' placeholder='' type='checkbox'>\n</div>\n<br>\n<br>\n<div id='newTask' style='background-color: #FFFFFF; width: 800px'>\n<b2>\n<u>\nNew task\n</u>\n</b2>\n<div class='card-body' name='IntroForm' ng-form>\n<div class='card-input analyzer'>\n<label>Analyzer:</label>\n<select ng-model='$ctrl.data.analyzer' placeholder='Enter analyzer name' style='background-color: #F8F8FF'>\n<option ng-repeat='analyzer in $ctrl.analyzers' value='{{analyzer.name}}'>{{analyzer.name}} - {{analyzer.description}}</option>\n</select>\n</div>\n<div class='card-input count'>\n<label>Count:</label>\n<input cc-select-on-focus data-hook='count' enter-to-tab ng-model='$ctrl.data.count' placeholder='Enter # of records' style='background-color: #F8F8FF' type='text'>\n</div>\n<div class='card-input comment'>\n<label>Comment:</label>\n<input cc-select-on-focus data-hook='comment' enter-to-tab ng-model='$ctrl.data.comment' placeholder='Enter task comment' style='background-color: #F8F8FF' type='text'>\n</div>\n<div class='card-input onlyPremium'>\n<label>Only premium</label>\n<input cc-select-on-focus data-hook='only-premium' enter-to-tab ng-model='$ctrl.data.onlyPremium' placeholder='Only premium' type='checkbox'>\n</div>\n<div class='card-input onlyPublished'>\n<label>Only published</label>\n<input cc-select-on-focus data-hook='only-published' enter-to-tab ng-model='$ctrl.data.onlyPublished' placeholder='Only published' type='checkbox'>\n</div>\n<div class='card-input metasiteIds'>\n<label>Metasite IDs</label>\n<textarea cols='80' data-hook='metasiteIds' ng-model='$ctrl.data.metasiteIds' placeholder='metasite IDs - Remember to remove the CSV header' rows='2' style='background-color: #F8F8FF; font-size: 14px'></textarea>\n</div>\n</div>\n<br>\n<button class='p9-primary -small' id='submitTask' ng-click='$ctrl.submitTask()'>Submit task</button>\n<div style='width:400px; display: inline-block'></div>\n<button class='p9-primary -small' id='superSecret' ng-click='$ctrl.superSecretEnabled = !$ctrl.superSecretEnabled' style='background-color: #FFFFFF'>Super secret button</button>\n<br>\n<br>\n<div class='card-input specialAnalyzerName'>\n<label ng-if='$ctrl.superSecretEnabled'>Analyzer name:</label>\n<input cc-select-on-focus data-hook='specialAnalyzerName' enter-to-tab ng-if='$ctrl.superSecretEnabled' ng-model='$ctrl.data.specialAnalyzerName' placeholder='SpecialAnalyzer' style='background-color: #F8F8FF' type='text'>\n</div>\n<br>\n<textarea cols='160' data-hook='secret' ng-if='$ctrl.superSecretEnabled' ng-model='$ctrl.data.specialAnalyzer' placeholder='Special Analyzer' rows='14' style='background-color: #F8F8FF; font-size: 14px'></textarea>\n</div>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\n</div>\n<div style='display:inline-block; width: 5%'></div>\n<div style='width: 1600px'></div>\n"},function(e,t){e.exports="<div class='double-spinner'>\n<div class='container'>\n<div class='spinners'>\n<div class='fast-spinner'>\n<svg class='wheel background-wheel' xmlns='http://www.w3.org/2000/svg'>\n<circle cx='24' cy='24' r='22'></circle>\n</svg>\n</div>\n<svg class='wheel main-wheel' xmlns='http://www.w3.org/2000/svg'>\n<circle cx='24' cy='24' r='22'></circle>\n</svg>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='preloader-completed'>\n<div class='completed-icon cc-icon-check'></div>\n<div class='completed-icon-mask cc-icon-check'></div>\n<div class='circle'></div>\n</div>\n"},function(e,t){e.exports="<div class='publish-completed-container' data-hook='publish-completed-container' ng-class='{ &#39;in-progress&#39; : $ctrl.inProgress, &#39;completed&#39; : $ctrl.completed, &#39;inverted&#39;: $ctrl.inverted }' ng-show='$ctrl.inProgress || $ctrl.completed'>\n<svg class='circle'>\n<circle class='circle-path'></circle>\n</svg>\n<svg class='checkmark' viewbox='0 0 9.76 9.07'>\n<polyline class='checkmark-path' points='0.36 5.03 3.5 8.29 9.36 0.29'></polyline>\n</svg>\n<svg class='floating f1 star-cross' viewbox='0 0 5.25 5.25'>\n  <line x1='5.25' y1='2.63' y2='2.63'></line>\n  <line x1='2.63' x2='2.62' y2='5.25'></line>\n</svg>\n<svg class='floating f2 star-cross' viewbox='0 0 5.25 5.25'>\n  <line x1='5.25' y1='2.63' y2='2.63'></line>\n  <line x1='2.63' x2='2.62' y2='5.25'></line>\n</svg>\n<svg class='floating f3 small-circle'>\n  <circle></circle>\n</svg>\n<svg class='floating f4 small-circle'>\n  <circle></circle>\n</svg>\n</div>\n"},function(e,t){e.exports="<div class='task-animation flex-center-grow'>\n<div class='task-running-animated' ng-show='$ctrl.isTaskRunning'>{{ ::$ctrl.runningMessage | translate }}</div>\n<div cc-tooltip-options='{{ {offsetY: 24} }}' cc-tooltip-position='bottom' cc-tooltip='menu_saved_text' class='task-finished-message' ng-show='!$ctrl.isTaskRunning &amp;&amp; !$ctrl.hideFinishedMessage'>{{ ::$ctrl.finishedMessage | translate }}</div>\n<preloader-completed ng-show='$ctrl.isTaskFinished'></preloader-completed>\n</div>\n"},function(e,t){e.exports="<div class='assistant-tip' ng-class='$ctrl.componentClass'>\n<div class='header' ng-if='$ctrl.showTitle'>\n<cc-svg-icon icon='coloration:magic-wand'></cc-svg-icon>\n{{$ctrl.titleText}}\n</div>\n<p17-divider ng-if='$ctrl.showDivider'></p17-divider>\n<div class='message' ng-bind-html='$ctrl.text'></div>\n<div class='action'>\n<button adi-automation='assistant tip button' ng-class='$ctrl.buttonClass' ng-click='$ctrl.onAction()'>\n{{$ctrl.actionText}}\n</button>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='assistant-bucket-list-tab'>\n<div class='assistant-bucket-list-tab-header' data-hook='assistant-bucket-list-tab-header' wix-translate-compile='{{:: &#39;assistant-menu.assistant-video-description-smartAssist&#39;}}'></div>\n<div class='assistant-bucket-list-tab-content'>\n<assistant-menu-bucket-list></assistant-menu-bucket-list>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='assistant-menu-bucket-container' data-active-bucket='{{$ctrl.isActiveBucket(bucket)}}' ng-repeat='bucket in $ctrl.bucketList track by bucket.id'>\n<assistant-menu-bucket adi-automation='assistant-bucket-{{::bucket.id}}' bucket-id='bucket.id' description='bucket.description' icon-class='bucket.iconClass' is-collapsed='bucket.collapse' is-skip-expand-animation='bucket.isSkipExpandAnimation' name='bucket.name' task-ids='bucket.taskIds'></assistant-menu-bucket>\n</div>\n"},function(e,t){e.exports="<div adi-automation='assistant-bucket-is-collapsed-{{$ctrl.isCollapsed}}' class='assistant-bucket' ng-class='{&#39;assistant-bucket-collapsed&#39;: $ctrl.isCollapsed, &#39;assistant-bucket-collapse-state-animation&#39;: $ctrl.animatingCollapseState}'>\n<div class='assistant-bucket-header'>\n<div adi-automation='assistant-bucket-header' class='assistant-bucket-header-click-area-mask' data-hook='assistant-menu-bucket-header' ng-click='$ctrl.headerClick()'></div>\n<div class='assistant-bucket-icon-container'>\n<div class='assistant-bucket-icon' data-hook='assistant-menu-bucket-icon' ng-class='$ctrl.iconClass'></div>\n</div>\n<div class='assistant-bucket-name' data-hook='assistant-menu-bucket-name'>\n{{$ctrl.name}}\n</div>\n</div>\n<collapse-expand class='assistant-bucket-content' name='$ctrl.name' ng-if='!$ctrl.isCollapsed' skip-expand-animation='$ctrl.isSkipExpandAnimation'>\n<div class='assistant-bucket-description' data-hook='assistant-menu-bucket-description'>\n{{$ctrl.description}}\n</div>\n<div class='assistant-bucket-task-list-container'>\n<assistant-menu-task-list bucket-id='$ctrl.bucketId' task-ids='$ctrl.taskIds'></assistant-menu-task-list>\n</div>\n</collapse-expand>\n</div>\n"},function(e,t){e.exports="<div class='assistant-menu-header'>\n<div class='assistant-menu-header-close-btn'>\n<i adi-automation='assistant-close-menu' class='cc-icon-close-10' data-hook='assistant-menu-header-close-btn' ng-click='$ctrl.close()'></i>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='assistant-menu-new' data-hook='assistant-menu'>\n<div class='assistant-menu-new-header-container'>\n<assistant-menu-header on-close='$ctrl.close()'></assistant-menu-header>\n</div>\n<div class='assistant-menu-new-tab-list-container'>\n<assistant-tab-list></assistant-tab-list>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='assistant-menu-task-container' ng-hide='$ctrl.isTaskHidden(task)' ng-repeat='task in $ctrl.taskList track by task.id'>\n<assistant-menu-task adi-automation='assistant-task-{{::task.id}}' name='task.name' on-execute='$ctrl.startTask(task.id)' on-skip='$ctrl.skipTask(task.id)' task-id='task.id'></assistant-menu-task>\n</div>\n"},function(e,t){e.exports="<div class='assistant-menu-task assistant-menu-task-task-completed'>\n<div adi-automation='assistant-task-definition' class='assistant-menu-task-definition' data-hook='assistant-menu-task-section' ng-class='::{visited: $ctrl.isTaskVisited()}' ng-click='$ctrl.onExecute()'>\n<div class='assistant-menu-task-icon-container'>\n<div class='assistant-menu-task-icon-border-mask'></div>\n<div class='assistant-menu-task-icon-content'>\n<div class='cc-icon-assistant-bucket-play'></div>\n</div>\n</div>\n<div class='assistant-menu-task-name' data-hook='assistant-menu-task-name'>\n{{$ctrl.name}}\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='assistant-tab-list'>\n<div class='assistant-tab-header-list'>\n<div adi-automation='assistant-bucket-list-tab-header' class='assistant-tab-header' data-hook='assistant-bucket-list-tab-header' ng-class='{&#39;assistant-tab-header-selected selected&#39;: $ctrl.bucketListTabSelected}' ng-click='$ctrl.bucketListTabClick()'>\n{{:: $ctrl.getAssistantBucketHeader() }}\n</div>\n<div adi-automation='assistant-smart-assist-tab-header' class='assistant-tab-header assistant-smart-assist-tab-header' data-hook='assistant-smart-assist-tab-header' ng-class='{&#39;assistant-tab-header-selected selected&#39;: $ctrl.smartAssistTabSelected}' ng-click='$ctrl.smartAssistTabClick()'>\n<span class='smart-assist-tab-label' data-hook='assistant-smart-assist-tab-header-label'>{{:: 'assistant-tab-list.smart-assist-tab-header' | translate }}</span>\n<smart-assist-badge></smart-assist-badge>\n</div>\n</div>\n<div cc-scrollbar class='assistant-tab-content'>\n<div class='assistant-bucket-list-tab-container' ng-if='$ctrl.bucketListTabSelected'>\n<assistant-bucket-list-tab></assistant-bucket-list-tab>\n</div>\n<smart-assist-tab go-to-assistant-bucket='$ctrl.emptyStateButtonClick()' ng-if='$ctrl.smartAssistTabSelected'></smart-assist-tab>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='assistant-video-container' ng-if='$ctrl.assistantVideoService.isShowVideo()'>\n<div class='assistant-video'>\n<i adi-automation='close-video' class='cc-aux-btn cc-icon-circle cc-icon-close-10 close-assistant-video' ng-click='$ctrl.assistantVideoService.close()'></i>\n<iframe allowfullscreen frameborder='0' ng-src='{{ $ctrl.assistantVideoService.getAssistantVideoUrl($ctrl.video) | trustUrl }}'></iframe>\n</div>\n</div>\n"},function(e,t){e.exports="<div adi-automation='smart-assist-badge' class='smart-assist-badge' data-hook='smart-assist-badge' ng-if='!$ctrl.hide'>\n<span>{{ $ctrl.displayedNumOfIssues }}</span>\n</div>\n"},function(e,t){e.exports="<div class='smart-assist-empty-state-container'>\n<div class='illustration' data-hook='smart-assist-empty-state-illustration' ng-class='{&#39;illustration-after-success&#39;: $ctrl.issuesExisted, &#39;illustration-before-success&#39;: !$ctrl.issuesExisted}'></div>\n<div class='title'>\n{{:: $ctrl.issuesExisted ?  'smart-assist.empty-state.after-suggestions.title' : 'smart-assist.empty-state.before-suggestions.title' | translate}}\n</div>\n<div class='description' data-hook='smart-assist-empty-state-description'>\n{{:: $ctrl.issuesExisted ? 'smart-assist.empty-state.after-suggestions.description' : 'smart-assist.empty-state.before-suggestions.description' | translate}}\n</div>\n<button class='tour-button -primary action' data-hook='smart-assist-empty-state-go-to-assistant-bucket' ng-click='$ctrl.goToAssistantBucket()'>\n{{:: 'smart-assist.empty-state.go-to-assistant-bucket' | translate}}\n</button>\n</div>\n"},function(e,t){e.exports="<div class='smart-assist-issue'>\n<i adi-automation='smart-assist-issue-mute-btn' class='cc-icon-close-10' data-hook='smart-assist-issue-mute-btn' ng-click='$ctrl.onMute()' ng-if='!$ctrl.isHideMute'></i>\n<div class='smart-assist-issue-details'>\n<div class='smart-assist-issue-icon' data-hook='smart-assist-issue-icon' ng-class='&#39;{{:: $ctrl.icon}}&#39;'></div>\n<div class='smart-assist-issue-content'>\n<div class='smart-assist-issue-text' data-hook='smart-assist-issue-text' wix-translate-compile='{{:: $ctrl.text }}'></div>\n<div class='smart-assist-issue-actions-container'>\n<div adi-automation='smart-assist-issue-fix-button' class='smart-assist-issue-button smart-assist-issue-fix-button' data-hook='smart-assist-fix-button' ng-click='$ctrl.onFix()'>\n{{:: $ctrl.getFixIssueText() }}\n</div>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div adi-automation='smart-assist-tab' class='smart-assist-tab' ng-if='!$ctrl.flags.smartAssistTpa'>\n<div class='smart-assist-tab-conainer'>\n<smart-assist-empty-state data-hook='smart-assist-empty-state' go-to-assistant-bucket='$ctrl.goToAssistantBucket()' ng-if='$ctrl.displayEmptyState'></smart-assist-empty-state>\n<div class='smart-assist-issue-list' ng-if='!$ctrl.displayEmptyState'>\n<div class='smart-assist-divider-general-container' ng-if='$ctrl.generalIssuesExist'>\n<div class='smart-assist-divider-general' data-hook='smart-assist-divider-general'>\n{{::'smart-assist.dividers.general' | translate }}\n</div>\n<collapse-expand class='smart-assist-issue-container' ng-if='!$ctrl.isMuted(issue)' ng-repeat='issue in $ctrl.generalDividerList track by issue.id' skip-expand-animation='true'>\n<smart-assist-issue adi-automation='issue-container-general' data-hook='smart-assist-issue-{{:: issue.id}}' fix-issue-text='$ctrl.getFixIssueText(issue)' icon='issue.icon' is-hide-mute='issue.isHideMute' on-fix='issue.fix()' on-mute='$ctrl.onMuteIssue(issue)' text='issue.text'></smart-assist-issue>\n</collapse-expand>\n</div>\n<div ng-if='$ctrl.pageRelatedIssuesExist'>\n<div class='smart-assist-divider-page' data-hook='smart-assist-divider-page' ng-if='!$ctrl.allPageIssuesAreComplete(pageDivider)' ng-repeat='pageDivider in $ctrl.pageDividerList track by pageDivider.pageId'>\n{{:: 'smart-assist.dividers.page' | translate: {pageName: pageDivider.pageName} }}\n<div class='smart-assist-divider-section' data-hook='smart-assist-divider-section' ng-if='!$ctrl.allSectionIssuesAreComplete(sectionDivider)' ng-repeat='sectionDivider in pageDivider.sections track by sectionDivider.sectionPosition' skip-expand-animation='true'>\n{{:: 'smart-assist.dividers.section' | translate: {sectionName: sectionDivider.sectionName} }}\n<collapse-expand class='smart-assist-issue-container' ng-if='!$ctrl.isMuted(issue)' ng-repeat='issue in sectionDivider.issues track by issue.id' skip-expand-animation='true'>\n<smart-assist-issue adi-automation='issue-container-{{:: pageDivider.pageName}}-{{:: sectionDivider.sectionName}}' data-hook='smart-assist-issue-{{:: issue.id}}' fix-issue-text='$ctrl.getFixIssueText(issue)' icon='issue.icon' is-hide-mute='issue.isHideMute' on-fix='issue.fix()' on-mute='$ctrl.onMuteIssue(issue)' text='issue.text'></smart-assist-issue>\n</collapse-expand>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div adi-automation='smart-assist-tab' class='smart-assist-tab' ng-if='$ctrl.flags.smartAssistTpa'>\n<div class='smart-assist-tab-header' data-hook='assistant-bucket-list-tab-header' ng-if='!$ctrl.displayEmptyState' wix-translate-compile='{{:: &#39;assistant-tab-list.smart-assist-tab-body-title&#39;}}'></div>\n<div class='smart-assist-tab-conainer'>\n<smart-assist-empty-state data-hook='smart-assist-empty-state' go-to-assistant-bucket='$ctrl.goToAssistantBucket()' ng-if='$ctrl.displayEmptyState'></smart-assist-empty-state>\n<div class='smart-assist-issue-list' ng-if='!$ctrl.displayEmptyState'>\n<div>\n<div class='smart-assist-divider-page-container' ng-if='$ctrl.containerIssuesExist(pageContainerDivider.containerName)' ng-repeat='pageContainerDivider in $ctrl.pageContainerDividerList'>\n<span ng-if='$ctrl.containerIssuesExist(pageContainerDivider.containerName)'>{{::'smart-assist.divider.' + pageContainerDivider.containerName | translate }}</span>\n<div class='smart-assist-divider-page' data-hook='smart-assist-divider-page' ng-if='!$ctrl.allPageIssuesAreComplete(pageDivider)' ng-repeat='pageDivider in pageContainerDivider.pageDividerList track by pageDivider.pageId'>\n<div class='smart-assist-divider-section' data-hook='smart-assist-divider-section' ng-if='!$ctrl.allSectionIssuesAreComplete(sectionDivider)' ng-repeat='sectionDivider in pageDivider.sections track by sectionDivider.sectionPosition' skip-expand-animation='true'>\n{{:: $ctrl.getSubtitleDivider(pageContainerDivider.containerName, pageDivider, sectionDivider) }}\n<collapse-expand class='smart-assist-issue-container' ng-if='!$ctrl.isMuted(issue)' ng-repeat='issue in sectionDivider.issues track by issue.id' skip-expand-animation='true'>\n<smart-assist-issue adi-automation='{{$ctrl.getAutomationId(pageDivider, issue)}}' data-hook='smart-assist-issue-{{issue.id}}' fix-issue-text='$ctrl.getFixIssueText(issue)' icon='issue.icon' is-hide-mute='issue.isHideMute' on-fix='issue.fix()' on-mute='$ctrl.onMuteIssue(issue)' text='issue.text'></smart-assist-issue>\n</collapse-expand>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div id='backdrop' style='position: fixed;height: 100%;width: 100%;'></div>\n<nav style='position: relative'>\n<button id='next'>Next</button>\n<button id='back'>Back</button>\n<button id='skip'>Skip</button>\n<button id='wait'>Wait</button>\n<button id='blank'>Blank</button>\n<button id='idle'>Idle</button>\n</nav>\n"},function(e,t){e.exports="<div class='builder-add'>\n<h1>Add ce</h1>\n<a ui-sref='^'>Back</a>\n<div ng-repeat='ce in builderAdd.getAvailable()'>\n<button ng-click='builderAdd.add(ce)'>{{builderAdd.getCaption(ce)}}</button>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='builder-add'>\n<node-editor child-id='$ctrl.childId' data-hook='node-editor' node-id='$ctrl.contentId'></node-editor>\n</div>\n"},function(e,t){e.exports="<div class='builder' ng-class='{&#39;preview-mode&#39; : $builder.isPreview()}' ng-if='$builder.renderBuilder' ng-show='$builder.showBuilder' state-class=''>\n<top-bar-old data-hook='top-bar' ng-hide='!$builder.shouldShowTopBar()' ng-if='!$builder.flags.newTopBar &amp;&amp; !$builder.flags.headlessApiPerf'></top-bar-old>\n<top-bar data-hook='top-bar' ng-class='{&#39;preview-top-bar&#39;: $builder.isInPreviewMode, &#39;bring-to-front&#39;: $builder.shouldBringTopBarToFront()}' ng-hide='!$builder.flags.newPreviewMode &amp;&amp; $builder.isPreview()' ng-if='$builder.flags.newTopBar &amp;&amp; !$builder.flags.headlessApiPerf' top-bar-state='$builder.getTopBarState()'></top-bar>\n<div class='stage' ng-class='{&#39;animated&#39;: !$builder.isPreview()}'>\n<div class='builder-panel-inner' ng-style='{width: $builder.panelWidth + &#39;px&#39;}' ui-view='builder-panel'></div>\n<preview></preview>\n<preview-mode-toggle ng-if='$builder.shouldShowPreviewToggle()'></preview-mode-toggle>\n<div class='mobile-preview-wrapper' ng-if='$builder.isMobilePreviewDisplay()'>\n<mobile-preview page='{{$builder.getMobilePreviewPageId()}}' preview-url='{{$builder.getMobilePreviewUrl()}}'></mobile-preview>\n</div>\n<page-presets-preview-debug-control ng-if='$builder.flags.debugPagePresetsPreview'></page-presets-preview-debug-control>\n</div>\n<floating-undo-redo class='not-in-preview' ng-class='{&#39;animated&#39;: !$builder.isPreview()}' ng-if='!$builder.flags.newTopBar &amp;&amp; !$builder.flags.disableUndoRedoAndAutoSave &amp;&amp; $builder.applicationState.isInMobileEditMode()'></floating-undo-redo>\n<floating-stage-controls class='not-in-preview' ng-class='{&#39;animated&#39;: !$builder.isPreview()}' ng-if='!$builder.flags.newTopBar &amp;&amp; !$builder.applicationState.isInMobileEditMode()'></floating-stage-controls>\n<floating-go-to-editor-link class='not-in-preview' ng-class='{&#39;animated&#39;: !$builder.isPreview()}' ng-if='$builder.showFloatingGotoEditor()'></floating-go-to-editor-link>\n<div class='builder-overlay'></div>\n<logo-extraction-popup data-hook='logo-extraction-popup' ng-if='$builder.logoExtractionPopupService.shouldShowPopup()'></logo-extraction-popup>\n<prediction-tip ng-if='$builder.flags.debug &amp;&amp; $builder.flags.predictionModel'></prediction-tip>\n</div>\n"},function(e,t){e.exports="<div class='builder-left-panel'>\n<div class='add-section'>\n<p16-panel-header label='{{($ctrl.pageMode ? &#39;builder.add-page&#39; : &#39;builder.add-section&#39;) | translate }}' on-close='$ctrl.back()' on-help='$ctrl.onHelp()' show-close-button='true' show-help-button='true'></p16-panel-header>\n<div class='content'>\n<div class='section-list-wrap'>\n<div cc-scrollbar class='section-list'>\n<div class='remaining-suggested-sections' ng-show='false'>{{$ctrl.remainingSuggestedSections}}</div>\n<span class='section-subtitle' ng-if='$ctrl.recommendedSections &amp;&amp; $ctrl.recommendedSections.length'>{{::'builder.add-section-recommended' | translate }}</span>\n<div adi-automation='{{::section.ceType}}' class='section-button-container tour-element-recommended-section' data-hook='section' ng-class='{selected: $ctrl.isSectionSelected(section)}' ng-repeat='section in $ctrl.recommendedSections track by section.id'>\n<div class='section-button' data-hook='section-button' ng-class='{&#39;already-used&#39;: $ctrl.isOnPage(section)}' ng-click='$ctrl.setSelectedSection(section, true)'>\n<span cc-tooltip-options='{{:: {content: $ctrl.sectionAlias(section)} }}' cc-tooltip='section-name'>{{ $ctrl.sectionAlias(section) }}</span>\n<div class='already-used-check cc-icon-check'></div>\n</div>\n</div>\n<span class='section-subtitle' ng-if='$ctrl.otherSections &amp;&amp; $ctrl.otherSections.length'>{{::'builder.add-section-others' | translate }}</span>\n<div adi-automation='{{::section.ceType}}' class='section-button-container' data-hook='section' ng-class='{selected: $ctrl.isSectionSelected(section)}' ng-repeat='section in $ctrl.otherSections track by section.id'>\n<div class='section-button' data-hook='section-button' ng-class='{&#39;already-used&#39;: $ctrl.isOnPage(section)}' ng-click='$ctrl.setSelectedSection(section, true)'>\n<span cc-tooltip-options='{{:: {content: $ctrl.sectionAlias(section)} }}' cc-tooltip='section-name'>{{ $ctrl.sectionAlias(section) }}</span>\n<div class='already-used-check cc-icon-check'></div>\n</div>\n</div>\n<span class='more-sections' ng-click='$ctrl.toggleMoreSections()' ng-if='!$ctrl.showMoreSections &amp;&amp; $ctrl.moreSections &amp;&amp; $ctrl.moreSections.length'>\n{{::'builder.add-section-see-all' | translate }}\n<div class='cc-icon-arrow-down'></div>\n</span>\n<div adi-automation='{{::section.ceType}}' class='section-button-container' data-hook='section' ng-class='{selected: $ctrl.isSectionSelected(section)}' ng-if='$ctrl.showMoreSections' ng-repeat='section in $ctrl.moreSections track by section.id'>\n<div class='section-button' data-hook='section-button' ng-class='{&#39;already-used&#39;: $ctrl.isOnPage(section)}' ng-click='$ctrl.setSelectedSection(section, true)'>\n<span cc-tooltip-options='{{:: {content: $ctrl.sectionAlias(section)} }}' cc-tooltip='section-name'>{{ $ctrl.sectionAlias(section) }}</span>\n<div class='already-used-check cc-icon-check'></div>\n</div>\n</div>\n<span class='more-sections less-sections' ng-click='$ctrl.toggleMoreSections()' ng-if='$ctrl.showMoreSections &amp;&amp; $ctrl.moreSections &amp;&amp; $ctrl.moreSections.length'>\n{{::'builder.add-section-see-less' | translate }}\n<div class='cc-icon-arrow-up'></div>\n</span>\n</div>\n</div>\n<div class='preview-list-wrap'>\n<preview-list data-page-mode='$ctrl.pageMode' data-page-name='$ctrl.pageName' draggable='!$ctrl.pageMode' intent='$ctrl.addSectionIntent' ng-if='$ctrl.nodes' nodes='$ctrl.nodes' reload-after-add='$ctrl.reloadAfterAddingSection($nodeId)' selected-section='$ctrl.selectedSection' strategy='$ctrl.addSectionStrategy'></preview-list>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div adi-automation='{{::$ctrl.app.ceType}}-app' class='app animate-if' ng-if='$ctrl.flags.widgetAppsPanel ? !$ctrl.isAppInstalled() : !$ctrl.app.isInstalled' ng-style='::{background: $ctrl.getBackground($ctrl.app)}'>\n<div class='action-box action-box-not-installed'>\n<div class='always-visible'>\n<div class='app-title' data-hook='app-title'>{{$ctrl.title}}</div>\n<div class='app-description' data-hook='app-description' ng-bind-html='$ctrl.description'></div>\n</div>\n<button class='p9-primary -medium' data-hook='add-app-button' ng-click='$ctrl.onAddClick()'>\n{{::'general.add' | translate}}\n</button>\n</div>\n</div>\n<div adi-automation='{{::$ctrl.app.ceType}}-app' class='app animate-if installed' ng-if='$ctrl.flags.widgetAppsPanel &amp;&amp; $ctrl.isAppInstalled()'>\n<div class='action-box action-box-installed centered-content'>\n<div class='app-title' data-hook='app-title'>{{$ctrl.title}}</div>\n<div class='centered-content'>\n<button class='p9-primary -medium' data-hook='open-app-button' ng-click='$ctrl.onOpenAppClick()' ng-if='!$ctrl.shouldOpenManagementOnOpenApp'>\n{{:: 'builder.apps-panel.open-app' | translate}}\n</button>\n<button adi-automation='add-more-button' class='p9a-secondary -inverse -medium' ng-click='$ctrl.onAddClick()' ng-if='$ctrl.app.isWidget'>\n{{:: 'builder.apps-panel.add-more' | translate}}\n</button>\n<button class='p9-primary -medium' data-hook='open-app-button' manage-tpa-button-before-opening='$ctrl.beforeOpeningMng()' manage-tpa-button-origin='{{::$ctrl.origin}}' manage-tpa-button='$ctrl.app.ceType' ng-if='$ctrl.shouldOpenManagementOnOpenApp'>\n{{:: 'builder.apps-panel.open-app' | translate}}\n</button>\n<button class='p9b-text-button -medium remove' data-hook='remove-app-button' ng-click='$ctrl.onDeleteClick()' ng-if='$ctrl.shouldShowDeleteButton'>\n{{:: 'builder.apps-panel.remove' | translate}}\n</button>\n</div>\n</div>\n</div>\n<div adi-automation='{{::$ctrl.app.ceType}}-app' class='app animate-if' ng-if='!$ctrl.flags.widgetAppsPanel &amp;&amp; $ctrl.app.isInstalled' ng-style='::{background: $ctrl.getBackground($ctrl.app)}'>\n<div class='action-box action-box-installed centered-content'>\n<div class='app-title' data-hook='app-title'>{{$ctrl.title}}</div>\n<div class='centered-content'>\n<button class='p9-primary -medium' data-hook='open-app-button' ng-click='$ctrl.onOpenAppClick()' ng-if='!$ctrl.shouldOpenManagementOnOpenApp'>\n{{:: 'builder.apps-panel.open-app' | translate}}\n</button>\n<button class='p9-primary -medium' data-hook='open-app-button' manage-tpa-button-before-opening='$ctrl.beforeOpeningMng()' manage-tpa-button-origin='{{::$ctrl.origin}}' manage-tpa-button='$ctrl.app.ceType' ng-if='$ctrl.shouldOpenManagementOnOpenApp'>\n{{:: 'builder.apps-panel.open-app' | translate}}\n</button>\n<button class='p9b-text-button -medium remove' data-hook='remove-app-button' ng-click='$ctrl.onDeleteClick()' ng-if='$ctrl.shouldShowDeleteButton'>\n{{:: 'builder.apps-panel.remove' | translate}}\n</button>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<coloration-panel-overlay class='apps-panel-loader' loader-text='{{:: &#39;builder.apps-panel.loader&#39; | translate}}' show-backdrop='$ctrl.showLoader' show-loader='$ctrl.showLoader'></coloration-panel-overlay>\n<cc-panel-frame class='-with-corners' label='{{&#39;builder.apps-panel.title&#39;|translate}}' on-close='$ctrl.close()' on-help='$ctrl.help()' show-close-button='true' show-help-button='true'>\n<cc-panel-fixed-top>\n<c11-paragraph class='c11-paragraph' compile=':: &#39;builder.apps-panel.subtitle&#39; | translate' data-hook='apps-panel-subtitle'></c11-paragraph>\n</cc-panel-fixed-top>\n<cc-panel-body class='centered-content'>\n<div class='apps' ng-repeat='app in $ctrl.apps'>\n<app-package app='app' before-opening-mng='$ctrl.pagesPanelManager.goToTpaPage(app.ceType)' description='{{::&#39;builder.apps-panel.app.description.&#39; + app.ceType | translate}}' is-app-installed='$ctrl.appsManager.isAppInstalled2(app)' ng-if='$ctrl.flags.widgetAppsPanel' on-add-click='$ctrl.addApp(app)' on-delete-click='$ctrl.removeApp(app)' on-open-app-click='app.onOpenAppClick($ctrl.origin)' origin='{{::$ctrl.origin}}' should-open-management-on-open-app='app.openManagement' should-show-delete-button='!$ctrl.appsManager.isDeletable(app.ceType)' title='{{::&#39;builder.apps-panel.app.title.&#39; + app.ceType | translate}}'></app-package>\n<app-package app='app' before-opening-mng='$ctrl.pagesPanelManager.goToTpaPage(app.ceType)' description='{{::&#39;builder.apps-panel.app.description.&#39; + app.ceType | translate}}' ng-if='!$ctrl.flags.widgetAppsPanel' on-add-click='$ctrl.addApp(app)' on-delete-click='$ctrl.removeApp(app)' on-open-app-click='$ctrl.onOpenAppClick(app.ceType)' origin='{{::$ctrl.origin}}' should-open-management-on-open-app='$ctrl.appsManager.shouldOpenManagementOnOpenApp(app.ceType)' should-show-delete-button='!$ctrl.appsManager.isDeletable(app.ceType)' title='{{::&#39;builder.apps-panel.app.title.&#39; + app.ceType | translate}}'></app-package>\n</div>\n<footer class='footer' ng-if='!$ctrl.anonService.isAnonymousUser()'>\n<div class='footer-description'>{{::'builder.apps-panel.footer.text' | translate}}</div>\n<button class='footer-link p9b-text-button' data-hook='go-to-editor-link' ng-click='$ctrl.goToEditor()'>\n{{::'builder.apps-panel.footer.link' | translate}}\n</button>\n</footer>\n</cc-panel-body>\n</cc-panel-frame>\n"},function(e,t){e.exports="<div class='business-details-changer'>\n<button class='close-button' data-hook='close-dialog' ng-click='$ctrl.closeDialog()'>\n<i class='cc-icon-close-12'></i>\n</button>\n<div class='nav' data-hook='step-navigator'>\n<button class='dot' data-hook='step-indicator' ng-class='{active: $ctrl.step === step}' ng-click='$ctrl.onDotClick(step)' ng-disabled='step === 1 &amp;&amp; !$ctrl.validCategory' ng-repeat='step in [0, 1]'></button>\n</div>\n<div class='title'>\n<div class='main-title'>{{:: 'business-details-changer.main-title' | translate}}</div>\n<div animate-on-change='{{&quot;business-details-changer.secondary-title.step-&quot; + $ctrl.step +  &quot;.title&quot; | translate}}' class='secondary-title'></div>\n</div>\n<div class='steps-container-outer'>\n<div class='steps-container' ng-class='&quot;step-&quot; + $ctrl.step'>\n<div class='category'>\n<category-search ac-options-container-class='business-details-changer-options thin-scrollbar' default-categories='$ctrl.defaultCategories' dont-store-matches='true' hide-generic-suggestions='true' hide-no-category-matches='true' is-dropdown-suggestions-hidden='$ctrl.shouldHideDropDown' is-reset-term='$ctrl.isResetItem(term, matches)' ng-if='$ctrl.showCategorySearch' on-example-click='$ctrl._onExampleClick(term)' on-search-changed='$ctrl.onSearchChanged(term, matches, result)' on-select-from-empty-list='$ctrl.onSelectFromEmptyList(item, index)' on-submit='$ctrl.onNext()' pre-suggestions-by-vertical='[]' valid-category='$ctrl.validCategory'></category-search>\n</div>\n<div class='business-name'>\n<form class='b01-big-text-field' ng-submit='$ctrl.onFinish()'>\n<cc-svg-icon add-cc-svg-icon-class='false' class='input-icon no-hover' icon='osi:edit'></cc-svg-icon>\n<input autocomplete='off' cc-select-on-focus data-hook='business-name-input' name='{{$ctrl.businessInputName}}' ng-model='$ctrl.name' placeholder='{{:: &quot;intro.business-name.input-placeholder&quot; | translate}}' type='text'>\n</form>\n</div>\n</div>\n</div>\n<div class='actions'>\n<button class='p9-primary -medium faded' data-hook='next-button' ng-class='{&quot;-disabled&quot;: !$ctrl.validCategory}' ng-click='$ctrl.onNext()' ng-disabled='!$ctrl.validCategory' ng-if='$ctrl.step == 0'>\n{{::'general.next' | translate}}\n</button>\n<button class='p9-primary -medium faded' data-hook='finish-button' ng-click='$ctrl.onFinish()' ng-if='$ctrl.step == 1'>\n{{::'general.done' | translate}}\n</button>\n</div>\n</div>\n"},function(e,t){e.exports="<button class='cc-icon-close-24 close-button' ng-click='$ctrl.cancel()'></button>\n<business-card-editable data='$ctrl.editableIntroData' view='builder'></business-card-editable>\n<div class='footer'>\n<div class='actions'>\n<button class='p9b-text-button' data-hook='cancel-modal-button' ng-click='$ctrl.cancel()'>Cancel</button>\n<button class='p9-primary' data-hook='close-modal-button' ng-click='$ctrl.apply()'>Done</button>\n</div>\n<i class='cc-icon-info'></i>\n<div class='info'>Info will automatically sync into your website - in all the right places</div>\n</div>\n"},function(e,t){e.exports="<div class='handle-container'>\n<button cc-tooltip-position='left' cc-tooltip='overlay_move_up' class='p9c-primary -icon-only arrow up' ng-click='$ctrl.upClick({event: event})' ng-disabled='$ctrl.arrowUpDisabled'>\n<i class='cc-icon-arrow-up' ng-disabled='$ctrl.arrowUpDisabled'></i>\n</button>\n<a class='p9c-primary -icon-only handle' cn-canceled='$ctrl.dragCanceled({event: event})' cn-disable-if='$ctrl.dragDisabled' cn-dragend='$ctrl.dragEnd({event: event})' cn-draggable='$ctrl.draggable' cn-dragstart='$ctrl.dragStart({event: event})' cn-drop='$ctrl.drop({event: event})' ghost-selector='.draggable-ghost [data-hook=&#39;draggable-ghost&#39;]' ng-disabled='$ctrl.dragDisabled'>\n<i class='cc-icon-drag-small' ng-click='$ctrl.dragHandleClick()' ng-disabled='$ctrl.dragDisabled'></i>\n</a>\n<button cc-tooltip-position='left' cc-tooltip='overlay_move_down' class='p9c-primary -icon-only arrow down' ng-click='$ctrl.downClick({event: event})' ng-disabled='$ctrl.arrowDownDisabled'>\n<i class='cc-icon-arrow-down' ng-disabled='$ctrl.arrowDownDisabled'></i>\n</button>\n</div>\n"},function(e,t){e.exports="<div class='handle-container'>\n<button cc-tooltip-position='left' cc-tooltip='overlay_move_up' class='p9c-primary -icon-only arrow up' ng-click='$ctrl.upClick({event: event})' ng-disabled='$ctrl.arrowUpDisabled'>\n<i class='cc-icon-arrow-up' ng-disabled='$ctrl.arrowUpDisabled'></i>\n</button>\n<button cc-tooltip-position='left' cc-tooltip='overlay_move_down' class='p9c-primary -icon-only arrow down' ng-click='$ctrl.downClick({event: event})' ng-disabled='$ctrl.arrowDownDisabled'>\n<i class='cc-icon-arrow-down' ng-disabled='$ctrl.arrowDownDisabled'></i>\n</button>\n</div>\n"},function(e,t){e.exports="<md-dialog class='image-upscale-modal-md-dialog'>\n<div class='image-upscale-modal' data-hook='image-upscale-modal' ng-class='{ &#39;first-time-loading&#39;: $ctrl.isFirstTimeLoading }' ng-click='$event.stopPropagation();'>\n<div class='image-upscale-modal-img-container'>\n<double-spinner ng-if='$ctrl.isLoading'></double-spinner>\n<img data-hook='image-upscale-modal-img' image-load-handler image-object-fit-resizer ng-style=':: { width: $ctrl.imageWidth, height: $ctrl.imageHeight, &#39;object-fit&#39;: $ctrl.objectFit }' on-image-loaded='$ctrl.onImageLoaded()' on-image-replaced='$ctrl.onImageReplaced()' src='{{$ctrl.imageUrl}}'>\n<div class='image-upscale-modal-img-backdrop' ng-if='$ctrl.isLoading &amp;&amp; !$ctrl.isFirstTimeLoading'></div>\n</div>\n<div class='image-upscale-modal-actions-container'>\n<div class='round-toolbox-left-controls'>\n<div class='image-upscale-modal-actions-content'>\n{{:: 'image-upscale-modal.enhance-description' | translate}}\n</div>\n<p15-toggle class='image-upscale-modal-toggle-upscale' data-hook='image-upscale-modal-toggle-btn' on-value-change='$ctrl.onToggleUpscaleMethod()' value='$ctrl.isSuperUpscaled'></p15-toggle>\n</div>\n<div class='round-toolbox-right-controls'>\n<button class='rounded-toolbox-button p9a-secondary common-controls-svg-font-icons-close-8' data-hook='image-upscale-modal-cancel-btn' ng-click='$ctrl.onCancel()'></button>\n<button class='rounded-toolbox-button p9a-secondary common-controls-svg-font-icons-check' data-hook='image-upscale-modal-apply-btn' ng-click='$ctrl.onApply()'></button>\n</div>\n</div>\n</div>\n</md-dialog>\n"},function(e,t){e.exports="<div class='list-span-tools'>\n<div class='dynamic-layer' data-hook='buttons-strip' ng-show='$ctrl.sectionHeightUIService.stateIsChangeHeight() || $ctrl.shouldShowButtons()'>\n<div class='spacer-elastic'></div>\n<div class='overlay-tools-center'>\n<div class='vertical-menu switch-and-tpa-menu'>\n<div class='column left-menu' ng-if='$ctrl.shouldShowButtons() &amp;&amp; !$ctrl.showChangeSectionHeight()'>\n<button cc-tooltip-position='top' cc-tooltip='{{ $ctrl.getEditButtonTooltip() }}' class='stage-btn round edit' data-hook='edit-button' ng-class='{&#39;-active&#39;: $ctrl.applicationState.isInEditMode() &amp;&amp; !$ctrl.stateIsHover()}' ng-click='$ctrl.onToggleEditMode()' ng-show='$ctrl.isEdit'>{{ $ctrl.isTpa() ? 'tpa.settings' : 'builder.edit-section-button' | translate}}</button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_change_preset' class='stage-btn round tour-element-switch-layout edit' data-hook='change-layout-button' ng-class='{&#39;-active&#39;: $ctrl.applicationState.isSwitchPresetMode() &amp;&amp; $ctrl.isContentFocused()}' ng-click='$ctrl.onTogglePresetState()' ng-show='$ctrl.isDesigns'>{{::$ctrl.getSwitchButtonText() | translate}}</button>\n<button cc-tooltip='{{ $ctrl.getTpaTooltip() }}' class='stage-btn round manage' data-hook='manage-tpa-button' manage-tpa-button-origin='ADI-section' manage-tpa-button-tpa-node='$ctrl.contentDesignatedListSpan.node' manage-tpa-button='$ctrl.getTpaType()' ng-if='$ctrl.isManage'>{{::'builder.manage-tpa-button' | translate}}</button>\n</div>\n</div>\n</div>\n<div class='spacer-elastic'>\n<div class='vertical-menu debug-actions-panel' ng-if='$ctrl.isHeader() &amp;&amp; $ctrl.flags.debugHeaderColumns'>\n<div class='row'>\n<button class='stage-btn round edit' ng-click='$ctrl.headerUseColumnsClicked()' ng-if='$ctrl.flags.debugHeaderColumns'>{{ ($ctrl.isHeaderColumnsEnabled() ? '*' : '') + 'Columns' }}</button>\n<button class='stage-btn round edit' ng-click='$ctrl.headerColumnsFullWidthClicked()' ng-if='$ctrl.flags.debugHeaderColumns'>{{ ($ctrl.isHeaderColumnsFullWidthEnabled() ? '*' : '') + 'Full width' }}</button>\n</div>\n</div>\n<div class='vertical-menu more-actions-panel' ng-if='$ctrl.isOnBody() &amp;&amp; !$ctrl.isMobileEditMode() &amp;&amp; !$ctrl.showChangeSectionHeight()'>\n<div class='column'>\n<button cc-tooltip-position='top' cc-tooltip='overlay_gear' class='stage-btn cc-icon-actions cc-icon-circle tour-more-actions-panel' data-hook='more-actions' ng-click='$ctrl.toggleShowMoreActions()' ng-if='$ctrl.showActions()'></button>\n<div class='more-actions-menu' ng-if='$ctrl.showMoreActions' ng-mouseenter='$ctrl.mamMouseEnter()' ng-mouseleave='$ctrl.mamMouseLeave()'>\n<button class='stage-btn cc-icon-close-12 cc-icon-circle cc-icon-white close-more-actions-btn' data-hook='close-more-actions' ng-click='$ctrl.toggleShowMoreActions()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_delete' class='stage-btn cc-icon-delete cc-icon-circle' ng-click='$ctrl.onDelete()' ng-hide='!$ctrl.canManipulate()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_move_page' class='stage-btn cc-icon-move-to cc-icon-circle' ng-click='$ctrl.moveAwayFlow()' ng-disabled='!$ctrl.canMoveAwayFlow()' ng-hide='!$ctrl.canManipulate()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_duplicate_section' class='stage-btn cc-icon-duplicate cc-icon-circle' ng-click='$ctrl.duplicateSection()' ng-hide='!$ctrl.canDuplicate()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_duplicate_section' class='stage-btn cc-icon-replace cc-icon-circle' ng-click='$ctrl.incrementColor()' ng-hide='!$ctrl.showSectionColorButton()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_enlarge_section_height' class='stage-btn cc-icon-arrow-up cc-icon-circle' ng-click='$ctrl.changeSectionHeight(true)' ng-hide='!$ctrl.showChangeSectionHeight()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_shrink_section_height' class='stage-btn cc-icon-arrow-down cc-icon-circle' ng-click='$ctrl.changeSectionHeight(false)' ng-hide='!$ctrl.showChangeSectionHeight()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_print_additional_height' class='stage-btn cc-icon-pause cc-icon-circle' ng-click='$ctrl.printAdditionalHeight()' ng-hide='!$ctrl.showPrintAdditionalHeightButton()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_change_column_position' class='stage-btn cc-icon-intro-next-arrow cc-icon-circle' ng-click='$ctrl.moveColumn()' ng-hide='!$ctrl.showMoveColumnButton()'></button>\n</div>\n</div>\n</div>\n<section-height adi-automation='section-height' change-section-height='$ctrl.changeSectionHeight(toBigger, totalClicks)' is-change-height-disabled='$ctrl.isChangeHeightDisabled(isDisabled)' ng-if='$ctrl.showChangeSectionHeight() &amp;&amp; $ctrl.isContentFocused() &amp;&amp; !$ctrl.isMobileEditMode()' node='$ctrl.contentDesignatedListSpan.node' set-change-height-state='$ctrl.setChangeHeightState()'></section-height>\n<drag-handle arrow-down-disabled='!$ctrl.canMove(true)' arrow-up-disabled='!$ctrl.canMove(false)' class='stage-btn tour-drag-handle' data-hook='drag-handle' drag-disabled='!$ctrl.isDragEnabled()' list-span='$ctrl.contentDesignatedListSpan' ng-if='$ctrl.shouldShowDragHandle() &amp;&amp; !$ctrl.isMobileEditMode() &amp;&amp; !$ctrl.showChangeSectionHeight()'></drag-handle>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='list-span-tools'>\n<div class='dynamic-layer' data-hook='buttons-strip' ng-show='$ctrl.sectionHeightUIService.stateIsChangeHeight() || $ctrl.shouldShowButtons() || $ctrl.shouldShowDragHandle()'>\n<div class='spacer-elastic'></div>\n<div class='overlay-tools-center'>\n<div class='vertical-menu switch-and-tpa-menu'>\n<div class='column left-menu' ng-if='($ctrl.shouldShowButtons() &amp;&amp; !$ctrl.showChangeSectionHeight()) || $ctrl.showChangeSectionHeight()'>\n<section-height adi-automation='section-height' change-section-height='$ctrl.changeSectionHeight(toBigger, totalClicks)' is-change-height-disabled='$ctrl.isChangeHeightDisabled(isDisabled)' ng-if='$ctrl.showChangeSectionHeight() &amp;&amp; $ctrl.isContentFocused() &amp;&amp; !$ctrl.isMobileEditMode()' node='$ctrl.contentDesignatedListSpan.node' set-change-height-state='$ctrl.setChangeHeightState()'></section-height>\n<cc-popover class='overlay-actions' data-hook='overlay-actions' margin-distance='20' window-margin-bottom='30'>\n<cc-popover-trigger data-hook='component-overlay-actions-menu-trigger'>\n<div class='overlay-trigger-container'>\n<div class='overlay-title' data-hook='component-overlay-title'>{{ $ctrl.getSectionName() }}</div>\n<div adi-automation='osi-comp-' class='overlay-actions-button' data-hook='overlay-actions-icon'>\n<cc-svg-icon data-hook='component-overlay-actions-icon-edit' icon='osi:edit'></cc-svg-icon>\n</div>\n</div>\n</cc-popover-trigger>\n<cc-popover-content>\n<cc-menu-item data-hook='edit-button' label='{{&#39;overlay.actions.edit&#39; | translate}}' ng-click='$ctrl.onToggleEditMode()' svg-icon='osi:edit'></cc-menu-item>\n<cc-menu-item data-hook='change-layout-button' label='{{&#39;overlay.actions.designs&#39; | translate}}' ng-click='$ctrl.onTogglePresetState()' svg-icon='osi:edit'></cc-menu-item>\n<cc-menu-item data-hook='manage-tpa-button' label='{{&#39;builder.manage-tpa-button&#39; | translate}}' manage-tpa-button-origin='ADI-section' manage-tpa-button-tpa-node='$ctrl.contentDesignatedListSpan.node' manage-tpa-button='$ctrl.getTpaType()' ng-if='$ctrl.isManage' svg-icon='osi:edit'></cc-menu-item>\n</cc-popover-content>\n</cc-popover>\n</div>\n</div>\n</div>\n<div class='spacer-elastic'>\n<div class='vertical-menu debug-actions-panel' ng-if='$ctrl.isHeader() &amp;&amp; $ctrl.flags.debugHeaderColumns'>\n<div class='row'>\n<button class='stage-btn round edit' ng-click='$ctrl.headerUseColumnsClicked()' ng-if='$ctrl.flags.debugHeaderColumns'>{{ ($ctrl.isHeaderColumnsEnabled() ? '*' : '') + 'Columns' }}</button>\n<button class='stage-btn round edit' ng-click='$ctrl.headerColumnsFullWidthClicked()' ng-if='$ctrl.flags.debugHeaderColumns'>{{ ($ctrl.isHeaderColumnsFullWidthEnabled() ? '*' : '') + 'Full width' }}</button>\n</div>\n</div>\n<div class='vertical-menu more-actions-panel' ng-if='$ctrl.isOnBody() &amp;&amp; !$ctrl.isMobileEditMode() &amp;&amp; !$ctrl.showChangeSectionHeight()'>\n<div class='column'>\n<button cc-tooltip-position='top' cc-tooltip='overlay_gear' class='stage-btn cc-icon-actions cc-icon-circle tour-more-actions-panel' data-hook='more-actions' ng-click='$ctrl.toggleShowMoreActions($event)' ng-if='$ctrl.showActions()' ng-mouseenter='$ctrl.openShowMoreActionsMenu()' ng-mouseleave='$ctrl.closeShowMoreActionsMenu()'></button>\n<div class='more-actions-menu' ng-if='$ctrl.showMoreActions' ng-mouseenter='$ctrl.mamMouseEnter()' ng-mouseleave='$ctrl.closeShowMoreActionsMenu()'>\n<button class='stage-btn cc-icon-close-12 cc-icon-circle cc-icon-white close-more-actions-btn' data-hook='close-more-actions' ng-click='$ctrl.toggleShowMoreActions()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_delete' class='stage-btn cc-icon-delete cc-icon-circle' ng-click='$ctrl.onDelete($event)' ng-hide='!$ctrl.canManipulate()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_move_page' class='stage-btn cc-icon-move-to cc-icon-circle' ng-click='$ctrl.moveAwayFlow($event)' ng-disabled='!$ctrl.canMoveAwayFlow()' ng-hide='!$ctrl.canManipulate()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_duplicate_section' class='stage-btn cc-icon-duplicate cc-icon-circle' ng-click='$ctrl.duplicateSection($event)' ng-hide='!$ctrl.canDuplicate()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_duplicate_section' class='stage-btn cc-icon-replace cc-icon-circle' ng-click='$ctrl.incrementColor($event)' ng-hide='!$ctrl.showSectionColorButton()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_enlarge_section_height' class='stage-btn cc-icon-arrow-up cc-icon-circle' ng-click='$ctrl.changeSectionHeight($event, true)' ng-hide='!$ctrl.showChangeSectionHeight()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_shrink_section_height' class='stage-btn cc-icon-arrow-down cc-icon-circle' ng-click='$ctrl.changeSectionHeight(false)' ng-hide='!$ctrl.showChangeSectionHeight()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_print_additional_height' class='stage-btn cc-icon-pause cc-icon-circle' ng-click='$ctrl.printAdditionalHeight($event)' ng-hide='!$ctrl.showPrintAdditionalHeightButton()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_change_column_position' class='stage-btn cc-icon-intro-next-arrow cc-icon-circle' ng-click='$ctrl.moveColumn($event)' ng-hide='!$ctrl.showMoveColumnButton()'></button>\n</div>\n</div>\n</div>\n<drag-handle2 arrow-down-disabled='!$ctrl.canMove(true)' arrow-up-disabled='!$ctrl.canMove(false)' class='stage-btn tour-drag-handle' data-hook='drag-handle' drag-disabled='true' list-span='$ctrl.contentDesignatedListSpan' ng-if='$ctrl.shouldShowDragHandle() &amp;&amp; !$ctrl.isMobileEditMode() &amp;&amp; !$ctrl.showChangeSectionHeight()'></drag-handle2>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='logo-extraction-popup'>\n<div class='popup-tooltip-arrow'></div>\n<logo-color-extraction-wizard auto-start-prepare-palette='false' context='builder' enable-replace-logo='false' first-step='$ctrl.getFirstStep()' get-prepare-palette-promise='$ctrl.getPreparePalettePromise(logoOrigin)' logo-persistence='$ctrl.getPersistenceHandler()' on-create-palette-click='$ctrl.createLogoPaletteClick(logoExtractorStep)' on-done='$ctrl.onDone(logoColoration)' on-save-palette-click='$ctrl.saveLogoPaletteClick(logoColoration)' on-skip-click='$ctrl.skipLogoPaletteClick(logoExtractorStep)'></logo-color-extraction-wizard>\n</div>\n"},function(e,t){e.exports="<div class='page-presets-preview-control'>\n<div class='page-presets-preview-control-content-section'>\n<div class='page-presets-preview-control-title'>\n{{:: 'page-preset-previews.title' | translate}}\n</div>\n<div class='page-presets-preview-control-description' ng-bind-html=':: &#39;page-preset-previews.description&#39; | translate'></div>\n<div class='page-presets-preview-control-skip' data-hook='page-presets-preview-control-skip-btn' ng-click='$ctrl.onSkipClick()'>\n{{:: 'page-preset-previews.skip' | translate}}\n</div>\n</div>\n<div class='page-presets-preview-container'>\n<page-presets-preview page-config-list='$ctrl.pageConfigList' page-nodes='$ctrl.pageNodes' scale1200='$ctrl.scale1200'></page-presets-preview>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='page-preset-preview-list'>\n<div class='page-preset-preview-placeholders-container' ng-if='$ctrl.pageAlternatives.length === 0'>\n<div class='page-preset-preview-placeholder' ng-repeat='skeleton in $ctrl.pageConfigList' ng-style='{ width: $ctrl.width + &#39;px&#39; }'></div>\n</div>\n<div class='page-preset-preview-outer-container' ng-mouseenter='$ctrl.enterPresetHoverMode(pageAlternative)' ng-mouseleave='$ctrl.leavePresetHoverMode(pageAlternative)' ng-repeat='pageAlternative in $ctrl.pageAlternatives'>\n<div class='apply-page-preset-container' ng-click='$ctrl.onClick(pageAlternative)' ng-if='!$ctrl.isPPPSupportPreview()'>\n<div class='apply-page-preset-cfa'>\n{{:: 'page-preset-previews.edit-site' | translate}}\n</div>\n</div>\n<div class='apply-page-preset-container center-buttons' ng-if='$ctrl.isPPPSupportPreview()'>\n<div class='apply-page-preset-button preview-button' data-hook='preview-mode-cfa' ng-click='$ctrl.onPreviewButtonClick(pageAlternative)'>\n{{:: 'page-preset-previews.preview' | translate}}\n</div>\n<div class='apply-page-preset-button edit-button' data-hook='edit-mode-cfa' ng-click='$ctrl.onEditButtonClick(pageAlternative)'>\n{{:: 'page-preset-previews.edit-site' | translate}}\n</div>\n</div>\n<div auto-scroll='{ isAutoScrolling: $ctrl.isPageAutoScrolling(pageAlternative), maxScroll: $ctrl.MAX_SCROLL_PREVIEW, startScrollAnimationDuration: 1000, stopScrollAnimationDuration: 700 }' cc-scrollbar class='page-preset-preview-scroll-container' ng-click='$ctrl.onClickPPPContainer(pageAlternative)' ng-style='{ width: $ctrl.width + &#39;px&#39; }' preview-slideshow-player='{ isPlaying: $ctrl.isPagePlayingSlideshow(pageAlternative) }'>\n<div class='page-preset-preview-content-container'>\n<presets-preview-viewer preset-previews='pageAlternative.presetPreviews' scale='$ctrl.scale' tpa-presets-width='$ctrl.width'></presets-preview-viewer>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="\x3c!-- / in edit mobile we see wierd gradient, I didnt see its being used, when merging largerStage delete this gradient --\x3e\n<div class='panel-message-gradient' ng-if=':: !$ctrl.flags.largerStage'></div>\n<div class='panel-message' ng-transclude=''></div>\n"},function(e,t){e.exports="<div ng-repeat='presetPreview in $ctrl.presetPreviews'>\n<preset-preview data-hook='presets-preview-viewer-element' flags='presetPreview.flags' ng-if='!presetPreview.isTpa' preset-preview='presetPreview' scale='$ctrl.scale'></preset-preview>\n<tpa-preview data-hook='presets-preview-viewer-element' is-inverted='presetPreview.isInverted' ng-class='{&#39;full-width&#39;: presetPreview.preset.data.isFullWidth, &#39;centered-image&#39;: presetPreview.preset.data.presetImageUrl}' ng-if='presetPreview.isTpa' ng-style='{ width: $ctrl.tpaPresetsWidth + &#39;px&#39; }' tpa-fit-to-width='$ctrl.tpaPresetsWidth' tpa-preset='presetPreview.preset'></tpa-preview>\n</div>\n"},function(e,t){e.exports="<div class='preview-list-container' is-done-loading='{{$ctrl.isDoneLoading}}'>\n<div cc-scrollbar class='preview-list' data-hook='preview-list-container'>\n<div class='page-blank' ng-if='$ctrl.pageMode &amp;&amp; $ctrl.showBlankPage'>\n<div class='browser-toolbar'></div>\n<div class='page-blank-label'>\n{{:: 'general.blank' | translate }}\n</div>\n<div class='browser-bottom'></div>\n<div class='page-blank-overlay' ng-click='$ctrl.createBlankPage()'>\n<div class='page-blank-overlay-title'>{{::$ctrl.overlayTitle}}</div>\n</div>\n</div>\n<div adi-automation='{{::preview.preset.id || &#39;0&#39;}}' class='preview-section sections faded' cn-canceled='$ctrl.onCanceled(event)' cn-disable-if='!$ctrl.draggable || $ctrl.pageMode' cn-dragend='$ctrl.onDragEnd(event)' cn-draggable='preview' cn-dragstart='$ctrl.onDragStart(event, draggable)' cn-drop='$ctrl.onDrop(event, draggable)' data-hook='preset-preview' ghost-selector='&gt; [data-hook=&#39;draggable-preview&#39;]' ng-class='{selected: $ctrl.isSelected(preview), &#39;mobile-width&#39;: $ctrl.applicationState.isInMobileEditMode()}' ng-if='!$ctrl.showBlankPage' ng-repeat='preview in $ctrl.previews' preset-preview='preview' section-ready>\n<div class='preview-section-container'>\n<div class='preview-recommended' ng-if='preview.isRecommended'>RECOMMENDED</div>\n<div class='preview-section-loading' ng-class='{selected: $ctrl.isSelected(preview), &#39;smaller-border&#39;: $ctrl.isSelected(preview) &amp;&amp; $ctrl.applicationState.isInMobileEditMode(), &#39;smaller-dimensions&#39;: $ctrl.applicationState.isInMobileEditMode(), &#39;page-mode&#39;: $ctrl.pageMode}' ng-mouseenter='$ctrl.onHoverPreview($event, true)' ng-mouseleave='$ctrl.onHoverPreview($event, false)'>\n<div class='preview-linked-message' ng-if='preview.sourcePageName'>{{:: 'builder.preview-linked-page-content' | translate }} {{preview.sourcePageName}}</div>\n<div class='preview-flag-message' ng-if='$ctrl.headerPresetUtils.shouldShowFixLabel(preview, $ctrl.isMobile)'>{{:: 'builder.preview-flags.fix' | translate }}</div>\n<div class='preview-flag-message' ng-if='preview.flags[0] === &#39;slideShowPreset&#39;'>{{:: 'builder.preview-flags.slideshow' | translate }}</div>\n<div class='preview-linked-message-bottom-left' ng-click='$ctrl.printBgOpacityData(preview)' ng-if='$ctrl.flags.sectionMedia &amp;&amp; $ctrl.flags.debug'>Opacity</div>\n<div class='preview-linked-message' ng-if='preview.sourceName &amp;&amp; !preview.sourcePageName'>{{:: 'builder.preview-linked-content' | translate }} {{preview.sourceName}}</div>\n<div class='preview-linked-message' ng-click='$ctrl.printPrettyAlgoInfo(preview)' ng-if=':: $ctrl.flags.prettyAlgo &amp;&amp; $ctrl.flags.debug'>\n<p>\n{{:: preview.prettyAlgo.score}}\n</p>\n<p ng-repeat='ruleName in ::$ctrl.prettyAlgoGetRuleNames(preview)'>\n{{:: ruleName}}\n</p>\n</div>\n<div class='browser-toolbar' ng-if='$ctrl.pageMode'></div>\n<div class='preview-content'>\n<preset-preview data-hook='draggable-preview' flags='preview.flags' is-selected='$ctrl.isSelected(preview)' ng-if='!preview.isTpa' on-before-render='$ctrl.onPresetPreviewBeforeRender(preview)' preset-preview='$ctrl.wrapWithSiblingsIfNeeded(preview)' preview-position='$ctrl.draggable &amp;&amp; $ctrl.overlayManager.dropTargetId' scale='$ctrl.scale'></preset-preview>\n<tpa-preview data-hook='draggable-preview' is-inverted='preview.isInverted' ng-class='{&#39;full-width&#39;: preview.preset.data.isFullWidth}' ng-if='preview.isTpa' tpa-fit-to-width='300' tpa-preset='preview.preset'></tpa-preview>\n</div>\n<div class='browser-bottom' ng-if='$ctrl.pageMode'></div>\n<div class='preview-overlay' data-hook='preview-overlay' ng-class='{&#39;slide-show-preset&#39;: $ctrl.slideShowPresetUtils.debugSlideShowPreset(preview)}' ng-click='$ctrl.selectPreset(preview, $event)' ng-if='!$ctrl.isSelected(preview)' preset-type='{{preview.node.contentElementType + &#39; &#39; + preview.node.alias}}'>\n<div class='preview-overlay-title'>{{::$ctrl.overlayTitle}}</div>\n<div class='info' ng-click='$event.stopPropagation();$ctrl.debugInfo(preview);' ng-if=':: $ctrl.isDebugMode()'></div>\n</div>\n<span data-hook='selected-overlay' ng-if='$ctrl.isSelected(preview)'>\n<div class='preview-overlay-selected'>\n<cc-svg-icon data-hook='selected-icon' icon='coloration:selected' is-corner-icon='true'></cc-svg-icon>\n<div class='info' ng-click='$event.stopPropagation();$ctrl.debugInfo(preview);' ng-if=':: $ctrl.isDebugMode()'></div>\n</div>\n</span>\n</div>\n</div>\n<div class='customize-design-container' data-hook='customize-design' ng-class='{&#39;transition-delay&#39;: $ctrl.unsettingPreviewIsInView, &#39;selected&#39;: $ctrl.isSelected(preview)}' ng-if='::$ctrl.shouldShowCustomizeDesignDropdown(preview)' ng-show='$ctrl.isSelected(preview)'>\n<div class='customize-design' ng-if='$ctrl.isSelected(preview)'>\n<div class='customize-design-button p9-primary -small' data-hook='customize-design-button' ng-click='$ctrl.goToColorationPanel(preview)' ng-mouseenter='$ctrl.showSectionDesignMenu(preview)' ng-mouseleave='$ctrl.hideSectionDesignMenu()'>\n<cc-svg-icon class='change-colors-icon' data-hook='change-tpa-colors-button-icon' icon='design:color' ng-show='$ctrl.flags.invertTpaPalette &amp;&amp; preview.isTpa'></cc-svg-icon>\n{{ $ctrl.getPresetButtonText(preview) }}\n<div class='cc-icon-arrow-down' data-hook='customize-design-button-arrow-down' ng-hide='$ctrl.flags.invertTpaPalette &amp;&amp; preview.isTpa'></div>\n<section-design-menu-deprecated item='preview' ng-if='!$ctrl.flags.mergedHeader &amp;&amp; $ctrl.isMenuVisible' on-option-clicked='$ctrl.hideSectionDesignMenu()'></section-design-menu-deprecated>\n<section-design-menu item='preview' ng-if='$ctrl.flags.mergedHeader &amp;&amp; $ctrl.isMenuVisible' on-design-updated='$ctrl.handleCurrentPreviewUpdate' on-option-clicked='$ctrl.hideSectionDesignMenu()' site-part='$ctrl.getSitePart(preview)'></section-design-menu>\n</div>\n<p17-divider></p17-divider>\n</div>\n</div>\n</div>\n<div class='preview-section-placeholder preview-section' ng-class='{&#39;mobile-width&#39;: $ctrl.applicationState.isInMobileEditMode()}'>\n<div class='placeholders faded stagger darkest-stage-background placeholder-opacity faded' ng-class='$ctrl.getPlaceholderClassName()' ng-if=':: $ctrl.isShowPlaceholdersInPresets' ng-repeat='placeholder in $ctrl.placeholders' ng-style=':: $ctrl.getPlaceholderBackgroundColor()'></div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='vertical-menu more-actions-panel' data-hook='change-height-toolbar'>\n<div class='column change-height-toolbar'>\n<div adi-automation='section-height-close' class='action-button close'>\n<div class='cc-icon-close-8' data-hook='close-change-height' ng-click='$ctrl.setChangeSectionHeightState(); $ctrl.closeSectionHeight();'></div>\n</div>\n<div adi-automation='section-height-plus-button' class='action-button plus' ng-class='{&#39;disabled&#39;: $ctrl.isChangeSectionHeightDisabled($ctrl.plusName, $ctrl.node)}' ng-click='$ctrl.resizeSectionHeight(true, $ctrl.node, $event)'>\n<cc-svg-icon cc-tooltip-position='top' cc-tooltip='overlay_enlarge_section_height' data-hook='change-height-plus' icon='primitives:plus'></cc-svg-icon>\n</div>\n<div adi-automation='section-height-minus-button' class='action-button minus' ng-class='{&#39;disabled&#39;: $ctrl.isChangeSectionHeightDisabled($ctrl.minusName, $ctrl.node)}' ng-click='$ctrl.resizeSectionHeight(false, $ctrl.node, $event)'>\n<cc-svg-icon cc-tooltip-position='top' cc-tooltip='overlay_shrink_section_height' data-hook='change-height-minus' icon='primitives:minus'></cc-svg-icon>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<cc-panel-frame class='-with-p16a-header -with-corners' label='{{:: &#39;builder.switch-color.panel-headline-text&#39; | translate}}' on-close='$ctrl.close()' on-help='$ctrl.help()' on-return='$ctrl.back()' show-close-button='true' show-content-delay='$ctrl.flags.cardsToPanels ? 0 : undefined' show-header='!$ctrl.flags.cardsToPanels' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<p16-panel-header label='{{:: &#39;builder.switch-color.panel-headline-text&#39; | translate}}' ng-if='$ctrl.flags.cardsToPanels'></p16-panel-header>\n<div class='c11-paragraph' compile=':: $ctrl.titleParagraph' data-hook='title-paragraph'></div>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='preview-list-wrap'>\n<preview-list current='$ctrl.current' draggable='false' intent='$ctrl.switchColorIntent' load-callback='$ctrl.loadCallback({total})' ng-if='$ctrl.nodes' nodes='$ctrl.nodes' strategy='$ctrl.switchColorStrategy'></preview-list>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n"},function(e,t){e.exports="<div class='simple-overlay panel-frame-zIndex' ng-if='$ctrl.stateIsChangeHeight()'></div>\n<cc-panel-frame class='-with-corners' label='{{&#39;builder.section-design.panel-headline-text&#39; + $ctrl.partSuffix|translate}}' on-close='$ctrl.back()' on-help='$ctrl.flags.cardsToPanels ? $ctrl.bOnHelp() : $ctrl.help()' on-return='$ctrl.onReturn()' show-close-button='true' show-help-button='true' show-nested='$ctrl.showNested'>\n<cc-panel-fixed-top>\n<c11-paragraph class='c11-paragraph' compile=':: $ctrl.getHeaderParagraphText()' data-hook='paragraph'></c11-paragraph>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='preview-list-wrap'>\n<preview-list current='$ctrl.current' draggable='false' intent='$ctrl.switchPresetIntent' ng-if='$ctrl.nodes' nodes='$ctrl.nodes' strategy='$ctrl.switchPresetStrategy'></preview-list>\n</div>\n</cc-panel-body>\n<cc-panel-nested ng-if='$ctrl.flags.cardsToPanels'>\n<media-settings-panel-new data-hook='media-settings-panel' ng-if='$ctrl.applicationState.isInPresetSectionMedia() || $ctrl.applicationState.isInSectionBackgroundPanel()'></media-settings-panel-new>\n<switch-color data-hook='switch-color' ng-if='$ctrl.applicationState.isSectionColorsMode()'></switch-color>\n<section-font-panel data-hook='section-font-panel' ng-if='$ctrl.applicationState.isInSectionFontPanel()'></section-font-panel>\n<section-animation-panel data-hook='section-animation-panel' ng-if='$ctrl.applicationState.isInSectionAnimationPanel()'></section-animation-panel>\n<slideshow-animation-panel data-hook='slideshow-animation-panel' ng-if='$ctrl.applicationState.isInSlideShowAnimationPanel()'></slideshow-animation-panel>\n</cc-panel-nested>\n</cc-panel-frame>\n"},function(e,t){e.exports="<div class='business-card-editable'>\n<div class='card-inputs-container' name='BIForm' ng-form>\n<div class='column'>\n<div class='card-input name'>\n<label>NAME</label>\n<input data-hook='company-name' field-track='$ctrl.onFieldChanged(&quot;company name&quot;, &quot;text&quot;, $old, $value)' ng-keypress='$ctrl.blurEventTargetOnEnter($event)' ng-model='$ctrl.data.name' placeholder='{{::&#39;business_card.name.placeholder&#39; | translate}}' type='text'>\n<p17-divider class='cc-control-divider'></p17-divider>\n</div>\n<div class='card-logo-builder'>\n<div class='text'>WEBSITE LOGO</div>\n<business-card-logo data-hook='identify-logo' is-uploading='$ctrl.logoManager.uploadingLogo' origin='$ctrl.getOrigin()' upload-error='$ctrl.logoManager.hasUploadError' url='$ctrl.logoManager.getMediaUrl()'></business-card-logo>\n</div>\n</div>\n<div class='column'>\n<div class='card-input'>\n<label>EMAIL</label>\n<input autocomplete='off' class='business-email' data-hook='email' field-track='$ctrl.onFieldChanged(&quot;email&quot;, &quot;text&quot;, $old, $value)' name='email' ng-keypress='$ctrl.blurEventTargetOnEnter($event)' ng-model='$ctrl.data.contactDetails.email' ng-pattern='$ctrl.$translate.instant(&#39;regex.email_format&#39;)' placeholder='{{::&#39;business_card.email.placeholder&#39; | translate}}' type='text'>\n<div class='email-invalid-tooltip' data-hook='email-invalid-tooltip' ng-if='BIForm.email.$error.pattern'>\n<cc-validation tooltip='intro_card_email_invalid'></cc-validation>\n</div>\n<p17-divider class='cc-control-divider'></p17-divider>\n</div>\n<div class='card-input address'>\n<label>ADDRESS</label>\n<textarea data-hook='address' field-track='$ctrl.onFieldChanged(&quot;address&quot;, &quot;text&quot;, $old, $value)' ng-attr-placeholder='{{::&#39;business_card.address.placeholder&#39; | translate}}' ng-model='$ctrl.data.contactDetails.address.fullAddress' rows='3'></textarea>\n<p17-divider class='cc-control-divider'></p17-divider>\n</div>\n<div class='card-input'>\n<label>PHONE</label>\n<input data-hook='phone' field-track='$ctrl.onFieldChanged(&quot;phone&quot;, &quot;text&quot;, $old, $value)' ng-keypress='$ctrl.blurEventTargetOnEnter($event)' ng-model='$ctrl.data.contactDetails.phone' placeholder='{{::&#39;business_card.phone.placeholder&#39; | translate}}' type='text'>\n<p17-divider class='cc-control-divider'></p17-divider>\n</div>\n<div class='card-input fax'>\n<label>FAX</label>\n<input data-hook='fax' field-track='$ctrl.onFieldChanged(&quot;fax&quot;, &quot;text&quot;, $old, $value)' ng-keypress='$ctrl.blurEventTargetOnEnter($event)' ng-model='$ctrl.data.contactDetails.fax' placeholder='{{::&#39;business_card.fax.placeholder&#39; | translate}}' type='text'>\n<p17-divider class='cc-control-divider'></p17-divider>\n</div>\n</div>\n<div class='column'>\n<ng-include src='&#39;views/business-card/business-card-social-links.html&#39;'></ng-include>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='card-header'>\n<business-card-header banner-url='$ctrl.bannerUrl || $ctrl.logoUrl' logo-url='$ctrl.logoManager.getMediaUrl()' style='height: 102px'></business-card-header>\n<business-card-logo class='card-logo' data-hook='identify-logo' enable-edit='true' is-uploading='$ctrl.logoManager.uploadingLogo' on-delete='$ctrl.logoManager.deleteLogo()' on-edit='$ctrl.logoManager.uploadLogo(file)' origin='$ctrl.getOrigin()' upload-error='$ctrl.logoManager.hasUploadError' url='$ctrl.logoManager.getMediaUrl()'></business-card-logo>\n</div>\n<div class='card-body' name='IntroForm' ng-form>\n<div class='card-input name'>\n<label>{{::'business_card.name.label' | translate }}</label>\n<input cc-select-on-focus data-hook='company-name' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;company name&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.name' placeholder='{{::&#39;business_card.name.placeholder&#39; | translate}}' type='text'>\n</div>\n<div class='card-inputs-container'>\n<div class='column'>\n<div class='card-input'>\n<label>{{::'business_card.contact-email.label' | translate }}</label>\n<input autocomplete='off' cc-select-on-focus class='business-email' data-hook='email' enter-to-tab field-track='$ctrl.onFieldChanged(&#39;email&#39;, &#39;text&#39;, $old, $value)' name='email' ng-model='$ctrl.data.contactDetails.email' ng-pattern='$ctrl.$translate.instant(&#39;regex.email_format&#39;)' placeholder='{{::&#39;business_card.email.placeholder&#39; | translate}}' type='text'>\n<div class='email-invalid-tooltip' data-hook='email-invalid-tooltip' ng-if='IntroForm.email.$error.pattern'>\n<cc-validation tooltip='intro_card_email_invalid'></cc-validation>\n</div>\n</div>\n<div class='card-input address'>\n<label>{{::'business_card.address.label' | translate }}</label>\n<textarea cc-select-on-focus data-hook='address' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;address&quot;, &quot;text&quot;, $old, $value)' intro-address-formatter ng-attr-placeholder='{{::&#39;business_card.address.placeholder&#39; | translate}}' ng-model='$ctrl.data.contactDetails.address.fullAddress' rows='3'></textarea>\n</div>\n<div class='card-input'>\n<label>{{::'business_card.phone.label' | translate }}</label>\n<input cc-select-on-focus data-hook='phone' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;phone&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.contactDetails.phone' placeholder='{{::&#39;business_card.phone.placeholder&#39; | translate}}' type='text'>\n</div>\n<div class='card-input fax'>\n<label>{{::'business_card.fax.label' | translate }}</label>\n<input cc-select-on-focus data-hook='fax' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;fax&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.contactDetails.fax' placeholder='{{::&#39;business_card.fax.placeholder&#39; | translate}}' type='text'>\n</div>\n</div>\n<div class='column'>\n<div class='card-input' ng-if='$ctrl.flags.introWebsiteAddressField'>\n<label class='website-field-label'>\n{{::'business_card.website.label' | translate}}\n<i cc-tooltip-custom-class='tooltip-margin-top' cc-tooltip-position='top' cc-tooltip='intro_website_help' class='cc-icon-info'></i>\n</label>\n<input autocomplete='off' cc-select-on-focus data-hook='website' enter-to-tab field-track='$ctrl.onFieldChanged(&#39;website&#39;, &#39;text&#39;, $old, $value)' name='website' ng-class='{&#39;website_address_input_when_error&#39;: !$ctrl.isWebsiteAddressValid }' ng-keyup='$ctrl.handleProblemsInWebsiteAddress()' ng-model='$ctrl.data.contactDetails.website' placeholder='{{::&#39;business_card.website_address.placeholder&#39; | translate}}' type='text'>\n<div class='website-address-invalid-tooltip' data-hook='website-address-invalid-tooltip' ng-if='!$ctrl.isWebsiteAddressValid'>\n<cc-validation tooltip='intro_card_website_address_invalid'></cc-validation>\n</div>\n</div>\n<ng-include src='&#39;views/business-card/business-card-social-links.html&#39;'></ng-include>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='business-card-editable intro-view' ng-if='$ctrl.view === &#39;intro&#39;' ng-include='&#39;views/business-card/business-card-editable-intro.html&#39;'></div>\n<div class='business-card-editable builder-view' ng-if='$ctrl.view === &#39;builder&#39;' ng-include='&#39;views/business-card/business-card-editable-builder.html&#39;'></div>\n"},function(e,t){e.exports="<div class='card-input social'>\n<label>{{::'business_card.social-media.label' | translate}}</label>\n<div class='social-link-wrapper' ng-repeat='link in $ctrl.data.socialLinks track by $index'>\n<input cc-select-on-focus data-hook='social-link' enter-to-tab field-track='$ctrl.onFieldChanged(link.platform, &quot;social&quot;, $old, $value)' focus-if='$ctrl.focusedSocial === link' ng-attr-placeholder='{{::&#39;business_card.social.placeholder&#39; | translate}}' ng-blur='showError = true; $ctrl.focusedSocial = null;' ng-change='$ctrl.onSocialChanged(link)' ng-class='{&#39;invalid-social-link&#39; : showError !== link &amp;&amp; $ctrl.isLinkInvalid(link)}' ng-focus='showError = false' ng-model-options='{debounce: {&#39;default&#39;: 500, &#39;blur&#39;: 0}}' ng-model='link.url' type='text'>\n<div cc-tooltip-position='top' cc-tooltip='intro_card_url_invalid' class='social-link-validation cc-icon-negative-validation'></div>\n<div cc-tooltip-position='top' cc-tooltip='intro_delete' class='social-link-delete cc-icon-delete' ng-click='$ctrl.deleteSocialLink(link)'></div>\n<p17-divider class='cc-control-divider'></p17-divider>\n</div>\n<div class='add-social' data-hook='add-social' ng-click='$ctrl.addEmptySocialLink()' ng-if='$ctrl.enableAddSocialLink()'>\n<div class='add-social-icon cc-icon-add-small cc-icon-circle -small'></div>\n<div class='add-social-label'>{{::'business_card.add-social-network.label' | translate}}</div>\n</div>\n</div>\n"},function(e,t){e.exports="<span class='color-circle-container' ng-class='$ctrl.size'>\n<div class='color-circle' data-hook='color-circle' ng-class='&#39;color-circle-number-{{$ctrl.number}}&#39;' ng-style='{&#39;background-color&#39;: $ctrl.color}'></div>\n</span>\n"},function(e,t){e.exports="<div class='display-mode-dropdown flex-center-grow drop-down -accent-hover-text' ng-mouseenter='$ctrl.showDropDown()' ng-mouseleave='$ctrl.hideDropDown()'>\n<span ng-class='$ctrl.iconType()'></span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow' ng-show='$ctrl.isShowDropDown()'>\n<ul class='sub-menu'>\n<li class='sub-menu-item text-with-icon' data-hook='desktop-edit-mode-button' ng-class='{&quot;active&quot;: $ctrl.currentEditMode() === &quot;desktop&quot;}' ng-click='$ctrl.switchToDesktopEditMode()'>\n<span class='switch-edit-mode-item'>\n<span class='sub-menu-icon cc-icon-switch-to-desktop'></span>\n<span class='sub-menu-label'>{{::'builder.edit_mode.desktop' | translate}}</span>\n</span>\n</li>\n<li class='sub-menu-item text-with-icon' data-hook='mobile-edit-mode-button' ng-class='{&quot;active&quot;: $ctrl.currentEditMode() === &quot;mobile&quot;}' ng-click='$ctrl.switchToMobileEditMode()'>\n<span class='switch-edit-mode-item'>\n<span class='sub-menu-icon cc-icon-switch-to-mobile'></span>\n{{::'builder.edit_mode.mobile' | translate}}\n</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<input accept='image/png ,image/gif, image/jpg' data-hook='file-upload' style='display:none' type='file'>\n"},function(e,t){e.exports="<div ng-style='{display: &#39;none&#39;, top: &#39;300px&#39;, position: &#39;fixed&#39;, left: &#39;50%&#39;}'>\n<button ng-click='$ctrl.setCurrentStep(3000)'>1</button>\n<button ng-click='$ctrl.setCurrentStep(3100)'>2</button>\n<button ng-click='$ctrl.setCurrentStep(3200)'>3</button>\n</div>\n<div class='logo-color-extraction-wizard'>\n<div ng-repeat='step in $ctrl.allSteps'>\n<button class='close-button' data-hook='close-wizard' ng-click='$ctrl.clickSecondaryButton(step)' ng-if='$ctrl.showStep(step)'>\n<i class='cc-icon-close-12'></i>\n</button>\n<div class='texts'>\n<div class='tour-step-title' ng-bind-html=':: $ctrl.getTitle(step) | translate' ng-class='[&#39;text&#39; + step, $ctrl.getFadeClass(step)]' ng-if='$ctrl.showStepTexts(step)'></div>\n<div class='tour-step-content' ng-bind-html=':: $ctrl.getContent(step) | translate' ng-class='[&#39;text&#39; + step, $ctrl.getFadeClass(step)]' ng-if='$ctrl.showStepTexts(step)'></div>\n</div>\n<div class='buttons tour-step-actions -centered'>\n<div class='buttons-position'>\n<button adi-automation='logo-extractor-skip' class='fade-down cc-x-height' data-hook='secondary-button' ng-class='$ctrl.getButtonClasses(false)' ng-click='$ctrl.clickSecondaryButton(step)' ng-disabled='$ctrl.stepButtonWasClicked[step] || $ctrl.logoManager.uploadingLogo' ng-if='$ctrl.showSecondaryButton(step)'>\n<span class='cc-x-height' ng-bind-html=':: $ctrl.getSecondaryButtonText(step) | translate'></span>\n</button>\n<button adi-automation='logo-extractor-create-palette' class='fade-down cc-x-height -primary' data-hook='primary-button' ng-class='$ctrl.getButtonClasses(true)' ng-click='$ctrl.clickPrimaryButton(step)' ng-disabled='$ctrl.stepButtonWasClicked[step] || $ctrl.logoManager.uploadingLogo' ng-if='$ctrl.showPrimaryButton(step)'>\n<span class='cc-x-height' ng-bind-html=':: $ctrl.getPrimaryButtonText(step) | translate'></span>\n</button>\n</div>\n</div>\n</div>\n<business-card-logo data-hook='logo-replacer' enable-edit='$ctrl.enableEdit()' is-uploading='$ctrl.logoManager.uploadingLogo' just-replace-button='true' ng-class='{&#39;should-i-save-step&#39;: $ctrl.inShouldISaveStep()}' on-edit='$ctrl.logoManager.uploadLogo(file)' origin='$ctrl.logoClickOrigin()' show-wrapping-circle='$ctrl.showWrappingCircle()' upload-error='$ctrl.logoManager.hasUploadError' url='$ctrl.logoManager.getMediaUrl()'></business-card-logo>\n<palette-preview colors='$ctrl.logoColors' data-hook='palette-preview' is-animate='true' is-diminish='true' ng-if='$ctrl.showPalettePreview()' on-done='$ctrl.doneShowingPalettePreview()'></palette-preview>\n</div>\n"},function(e,t){e.exports="<div class='palette-preview' ng-class='{&#39;small&#39;:$ctrl.size === &#39;small&#39;, &#39;animate&#39;: $ctrl.isAnimate, &#39;diminished&#39;: $ctrl.isDiminish &amp;&amp; $ctrl.diminished, &#39;six-colors&#39;: $ctrl.colors.length === 6}'>\n<color-circle color='color' ng-repeat='color in $ctrl.colors' number='$index + 1' size='{{$ctrl.size}}'></color-circle>\n<div class='palette-preview-cursor' ng-class='$ctrl.previewCursorClass()' ng-if='$ctrl.colors &amp;&amp; !$ctrl.diminished &amp;&amp; $ctrl.isAnimate'></div>\n</div>\n"},function(e,t){e.exports="<div class='tip-message' ng-if='$ctrl.isShowPopup'>\n<cc-tip-message description='{{$ctrl.description}}' enable-close='$ctrl.enableClose' on-close-tip='$ctrl.closeTip()' title-icon='$ctrl.titleIcon' title='{{$ctrl.title}}'></cc-tip-message>\n</div>\n"},function(e,t){e.exports="<div cc-tooltip-options='{{:: $ctrl.getMenuTooltipOptions()}}' cc-tooltip-position='top' cc-tooltip='{{:: $ctrl.getMenuTooltip()}}' class='segment-component' component-overlay-position='$ctrl.component' data-hook='component-overlay' data-overlay-id='{{:: $ctrl.generateOverlayId()}}' ng-class='{media: $ctrl.component.layout.type === &#39;media&#39;, highlight: $ctrl.isComponentHighlight(), &#39;component-overlay-no-actions-menu&#39;: !$ctrl.hasActionsMenu()}' ng-click='$ctrl.handleClicks($event); $event.stopPropagation();' ng-dblclick='$event.stopPropagation();' ng-style='$ctrl.component.style'>\n<div class='overlay-interact'>\n<div class='interact-wrap'>\n<div class='overlay-title' data-hook='component-overlay-title' ng-if='!$ctrl.actionsMenu.length'>{{$ctrl.title}}</div>\n<cc-popover class='overlay-actions' data-hook='overlay-actions' margin-distance='20' ng-if='$ctrl.actionsMenu.length' on-trigger-off='$ctrl.onHideActionsMenu()' on-trigger-on='$ctrl.onShowActionsMenu()' window-margin-bottom='30'>\n<cc-popover-trigger data-hook='component-overlay-actions-menu-trigger'>\n<div class='overlay-trigger-container'>\n<div class='overlay-title' data-hook='component-overlay-title'>{{$ctrl.title}}</div>\n<div adi-automation='osi-comp-{{$ctrl.title}}' class='overlay-actions-button' data-hook='overlay-actions-icon'>\n<cc-svg-icon data-hook='component-overlay-actions-icon-edit' icon='osi:edit'></cc-svg-icon>\n</div>\n</div>\n</cc-popover-trigger>\n<cc-popover-content>\n<cc-menu-item data-hook='{{:: action.name}}-button' highlight-color='{{action.style.highlightColor}}' label='{{action.label | translate}}' ng-class='{ &#39;last-item&#39; : $last}' ng-click='$ctrl.runAction(action)' ng-dblclick='$event.stopPropagation()' ng-repeat='action in $ctrl.simpleActionsMenu track by action.name' override-hover-color='{{:: action.style.color}}' svg-icon='{{:: action.icon}}'></cc-menu-item>\n<div ng-repeat='action in $ctrl.complexActionsMenu track by $index'>\n<div ng-if='!$first || $ctrl.simpleActionsMenu.length &gt; 0'>\n<p17-divider></p17-divider>\n<p0-spacer></p0-spacer>\n</div>\n<div ng-if='$ctrl.isColorPicker(action.actionType)'>\n<p27-palette-color-picker adi-automation='color-picker' colors='$ctrl.getPallete(action).hexList' light-icon-index='$ctrl.getPallete(action).lightIconIndex' ng-class='{ &#39;last-item&#39; : $last}' notification-getter='$ctrl.getMessage(action, index)' selected-index='$ctrl.getPallete(action).colorIndex' set-color-callback='$ctrl.setColor(action, index)'></p27-palette-color-picker>\n<div adi-automation='fix-color' class='segment-component-color-message' ng-class='{ &#39;last-item&#39; : $last}' ng-click='$ctrl.handleFixColorClick(action)' ng-if='!$ctrl.flags.listItemOverrideColor &amp;&amp; $ctrl.showFixColorMessage(action)'>\n{{::'overlay.messages.color-not-readable-2' | translate}}\n<br>\n<a>{{::'overlay.messages.color-not-readable-2-fix-color' | translate}}</a>\n</div>\n<div adi-automation='apply-to-all' class='segment-component-color-message positive' ng-class='{ &quot;last-item&quot; : $last}' ng-click='$ctrl.handleApplyToAll(action)' ng-if='$ctrl.showApplyAllMessage()'>\n<a>{{::'overlay.messages.apply-to-all' | translate}}</a>\n</div>\n<div adi-automation='reset-item' class='segment-component-color-message negative' ng-class='{ &quot;last-item&quot; : $last}' ng-click='$ctrl.handleResetItem(action)' ng-if='$ctrl.showResetMessage(action)'>\n{{::$ctrl.getResetMessage()}}\n<a>{{::'overlay.messages.reset-item.click' | translate}}</a>\n</div>\n</div>\n<div ng-if='$ctrl.flags.resizeBusinessName &amp;&amp; $ctrl.showResizeText(action.actionType)'>\n<c27-increase-decrease adi-automation='resize-font' current-index='$ctrl.fontSize.getFontSizeIndex($ctrl.node, $ctrl.component.field)' max-index='$ctrl.fontSize.getFontsLength()-1' ng-class='{ &#39;last-item&#39; : $last}' on-decrease='$ctrl.setFontSize(value)' on-increase='$ctrl.setFontSize(value)'></c27-increase-decrease>\n</div>\n</div>\n</cc-popover-content>\n</cc-popover>\n<div class='interact-wrap-spacer'></div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='configuration-field' ng-style='{marginLeft: $ctrl.getMarginStyle()}'>\n<c2-text-input debounce-delay='1000' disable-toggle='true' label='{{:: $ctrl.configurationKey}}' ng-if=':: $ctrl.isPrimitive()' on-change-value='$ctrl.onValueChange(value)' value='$ctrl.configurationValue'></c2-text-input>\n<div class='configuration-field-group' ng-if=':: !$ctrl.isPrimitive()'>\n<div class='configuration-field-group-title p8-label'>\n{{:: $ctrl.configurationKey}}\n</div>\n<configuration-field conf='[confKey, confValue]' margin='$ctrl.margin + 1' ng-repeat='(confKey, confValue) in $ctrl.configurationValue' on-change='$ctrl.onValueChange(changedValue, changedKey)'></configuration-field>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='configurator tour-step'>\n<div class='configuration-title p8-label'>\n{{:: $ctrl.name }}\n</div>\n<configuration-field conf='[confKey, confValue]' ng-repeat='(confKey, confValue) in $ctrl.conf' on-change='$ctrl.onValueChange(changedKey, changedValue)'></configuration-field>\n</div>\n"},function(e,t){e.exports="<div class='cropper-tool-controls'>\n<div class='controllers'>\n<p5-slider class='round-toolbox-left-controls' max='100' min='0' ng-mousedown='startZoomChange($event)' ng-mouseup='endZoomChange($event)' on-value-change='setZoomValue(value)' step='1' type='{{type}}' units='&#39;%&#39;' value='zoom'></p5-slider>\n<div class='sub-controls round-toolbox-right-controls'>\n<button cc-tooltip='crop_cancel' class='rounded-toolbox-button p9a-secondary common-controls-svg-font-icons-close-8' ng-click='closeCropper(false)'></button>\n<button cc-tooltip='crop_apply' class='rounded-toolbox-button p9a-secondary common-controls-svg-font-icons-check' ng-click='closeCropper(true)'></button>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='advanced-color-picker-inner' ng-class='{&#39;loaded&#39;: $ctrl.loaded}'>\n<color-picker api='$ctrl.api' event-api='$ctrl.eventAPI' ng-model='$ctrl.selectedColor' options='$ctrl.options'></color-picker>\n<div class='color-picker-hue-hor' data-hue ng-mousedown='$ctrl.changeHue($event)'>\n<div class='handle' data-handle></div>\n</div>\n<div class='hex-input-wrapper'>\n<div class='color-picker-swatch' data-hook='swatch' ng-style='{backgroundColor: $ctrl.selectedColor}'></div>\n<label class='hex-value'>{{:: 'design.coloration.basic.hex-value' | translate}}</label>\n<hex-input color='$ctrl.selectedColor' on-text-change='$ctrl.textChange(color)' on-text-changing='$ctrl.textChanging(color)' on-text-fixed='$ctrl.onTextFixed()'></hex-input>\n</div>\n<div class='dialog-buttons'>\n<button class='p9a-secondary -small' data-hook='palette-color-dialog-cancel' ng-click='$ctrl.cancelClick()'>\n<div class='cc-x-height'>{{ ::'general.cancel' | translate }}</div>\n</button>\n<button class='p9-primary -small' data-hook='palette-color-dialog-confirm' ng-class='{&#39;-disabled&#39;: !$ctrl.hexIsValid}' ng-click='$ctrl.confirmClick()' ng-disabled='!$ctrl.hexIsValid'>\n<div class='cc-x-height'>{{ ::'general.apply' | translate }}</div>\n</button>\n</div>\n</div>\n"},function(e,t){e.exports="<coloration-panel-overlay loader-text='{{:: &#39;design.coloration.advanced.readability.loader&#39; | translate}}' show-backdrop='$ctrl.showLoader' show-loader='$ctrl.showLoader'></coloration-panel-overlay>\n<cc-panel-frame class='-with-p16a-header -with-corners' data-hook='advanced-palette-editing-panel' label='{{:: &#39;design.coloration.advanced.panelheader&#39; | translate}}' ng-class='{&#39;-colors-not-readable&#39;: $ctrl.areColorsReadable === false}' on-close='$ctrl.closePanel()' on-help='$ctrl.openHelp()' on-return='$ctrl.backToColoration()' show-close-button='true' show-footer='true' show-header='!$ctrl.flags.cardsToPanels' show-help-button='false' show-return-button='true'>\n<cc-panel-fixed-top>\n<p16-panel-header data-hook='panel-title' label='{{:: &#39;design.coloration.advanced.panelheader&#39; | translate}}'></p16-panel-header>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='advanced-editing-header'>\n<div class='advanced-editing-title'>\n<span class='advanced-editing-title-text' data-hook='advanced-editing-title-text'>{{:: 'design.coloration.advanced.title' | translate }}</span>\n<div cc-tooltip='design_advanced_colors_reset' class='p9b-text-button cc-x-height advanced-editing-reset' data-hook='advanced-editing-reset' ng-click='$ctrl.resetColors()' ng-show='$ctrl.shouldShowReset()'>\n{{:: 'design.coloration.advanced.reset' | translate }}\n</div>\n</div>\n<div class='advanced-editing-description' data-hook='advanced-editing-description'>\n{{:: 'design.coloration.advanced.description' | translate }}\n</div>\n</div>\n<div class='palette-colors'>\n<palette-color color='$ctrl.colors.mainColor' label='{{:: &#39;design.coloration.advanced.main.color&#39; | translate }}' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.mainColor)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.secondaryColor' label='{{:: &#39;design.coloration.advanced.secondary.color&#39; | translate }}' ng-if='$ctrl.colors.secondaryColor' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.secondaryColor)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.thirdColor' label='{{:: &#39;design.coloration.advanced.third.color&#39; | translate }}' ng-if='$ctrl.colors.thirdColor' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.thirdColor)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.fourthColor' label='{{:: &#39;design.coloration.advanced.fourth.color&#39; | translate }}' ng-if='$ctrl.colors.fourthColor' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.fourthColor)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.white' label='{{:: &#39;design.coloration.advanced.light.color&#39; | translate }}' ng-if='$ctrl.colors.white' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.white)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.black' label='{{:: &#39;design.coloration.advanced.dark.color&#39; | translate }}' ng-if='$ctrl.colors.black' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.black)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n</div>\n</cc-panel-body>\n<cc-panel-footer>\n<div class='readability-expert'>\n<cc-svg-icon icon='coloration:positive-validation-outline-small' ng-show='$ctrl.areColorsReadable'></cc-svg-icon>\n<div class='readability-expert-message -positive' ng-show='$ctrl.areColorsReadable'>\n<div class='message-line'>{{:: 'design.coloration.advanced.readability.positive' | translate }}</div>\n<button cc-tooltip='design_coloration_readability_positive' class='p9b-text-button -medium'>\n{{:: 'design.coloration.advanced.readability.learn.more' | translate }}\n</button>\n</div>\n<div class='readability-expert-message -negative' ng-show='$ctrl.areColorsReadable === false'>\n<div class='message-line'>{{:: 'design.coloration.advanced.readability.negative' | translate }}</div>\n<button cc-tooltip-options='{{ {offsetX: 24} }}' cc-tooltip='design_coloration_readability_negative' class='p9b-text-button -medium'>\n{{:: 'design.coloration.advanced.readability.learn.more' | translate }}\n</button>\n</div>\n</div>\n<button class='fix-readability p9-primary -small -with-icon' data-hook='fix-readability-button' ng-click='$ctrl.fixColors()' ng-show='$ctrl.areColorsReadable === false'>\n<cc-svg-icon icon='coloration:magic-wand'></cc-svg-icon>\n<span>{{:: 'design.coloration.advanced.readability.fix' | translate }}</span>\n</button>\n</cc-panel-footer>\n</cc-panel-frame>\n"},function(e,t){e.exports="<cc-panel-frame class='-with-p16a-header animation-panel -with-corners' label='{{ ::&#39;design.animations.panel-title&#39; | translate }}' on-close='$ctrl.closePanel()' on-help='$ctrl.onHelp()' on-return='$ctrl.backToDesignKit()' show-close-button='true' show-content-delay='100' show-header='!$ctrl.flags.cardsToPanels' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<p16-panel-header label='{{:: &#39;design.animations.panel-title&#39; | translate}}' ng-if='$ctrl.flags.cardsToPanels'></p16-panel-header>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<double-spinner ng-if='$ctrl.flags.removeSpinnerAsStageReady &amp;&amp; !$ctrl.ready'></double-spinner>\n<div class='animation-panel-content' ng-if='$ctrl.ready'>\n<p6-control-header class='animation-panel-label' help-tooltip='animation_animation_type_help' hide-toggle-button='true' label=':: &#39;design.animations.component-animation.title&#39; | translate' show-help-button='true'></p6-control-header>\n<div class='cc-primitives-in-row flex-wrap animation-thumbnails' data-hook='animation-thumbnails'>\n<c20-graphic-radio icon='&#39;animation:&#39; + pattern.iconClass' is-selected='pattern == $ctrl.activeAnimationPattern' label='pattern.label' ng-mouseenter='$ctrl.previewAnimationPattern(pattern)' ng-repeat='pattern in $ctrl.animationPatterns' on-click='$ctrl.setAnimationPattern(pattern)' selected-icon='&#39;animation:&#39; + pattern.iconClass + &#39;Selected&#39;'></c20-graphic-radio>\n</div>\n<div ng-if='$ctrl.showScrollTypeEffect'>\n<section-override-warning data-hook='animation-section-override' on-override-sections='$ctrl.overrideAnimationPatternOnSections()' override-message=':: &#39;builder.section-override-warning.animations&#39; | translate' show='$ctrl.askOverrideAnimationPatternSections'></section-override-warning>\n<p17-divider></p17-divider>\n<p6-control-header class='animation-panel-label -separated-label' help-tooltip='animation_scroll_effects_help' hide-toggle-button='true' label=':: &#39;design.animations.scroll-type.title&#39; | translate' show-help-button='true'></p6-control-header>\n<p3-dropdown-list class='transition-dropdown-list' container-class='scroll-type-dropdown-container' data-hook='scroll-type-dropdown' items='$ctrl.scrollTypeOptions' label-key='label' on-selection-change='$ctrl.setScrollType(item.value)' track-by-key='value' value='$ctrl.activeScrollType'></p3-dropdown-list>\n</div>\n<section-override-warning data-hook='scroll-type-section-override' divider='true' on-override-sections='$ctrl.overrideScrollTypeOnSections()' override-message=':: &#39;builder.section-override-warning.scroll-type&#39; | translate' show='$ctrl.askOverrideScrollTypeSections'></section-override-warning>\n<p6-control-header class='animation-panel-label -separated-label' help-tooltip='animation_page_transition_help' hide-toggle-button='true' label=':: &#39;design.animations.page-transition.title&#39; | translate' show-help-button='true'></p6-control-header>\n<p3-dropdown-list class='transition-dropdown-list' container-class='page-transition-dropdown-container' data-hook='page-transition-dropdown' items='$ctrl.pagesTransitionNames' label-key='label' on-selection-change='$ctrl.setPagesTransition(item.value)' track-by-key='value' value='$ctrl.activePagesTransition'></p3-dropdown-list>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n"},function(e,t){e.exports="<md-dialog adi-automation='color mode dialog' aria-label='Choose Coloration Mode dialog' class='color-mode-dialog' ng-class='[&#39;top&#39;,&#39;bottom&#39;]'>\n<div class='dialog-arrow'></div>\n<div class='dialog-inner'>\n<p16-panel-header label='{{::&#39;design.coloration.color-mode-selector-new.dialog.title&#39; | translate}}' ng-class='{&#39;show-return-button&#39;: $ctrl.showReturnButton}' on-close='$ctrl.onClose()' show-close-button='true'></p16-panel-header>\n<c20-graphic-radio-control adi-automation='color mode toggles' help-tool-tip='brightness' label='{{:: &#39;design.coloration.color-mode-selector-new.dialog.mode-title&#39; | translate}}' on-select='$ctrl.onModeChange(item)' radio-items='$ctrl.modes' selected-radio='$ctrl.activeMode' show-help-button='true' size='small'></c20-graphic-radio-control>\n<p17-divider ng-if='$ctrl.isNewColoration'></p17-divider>\n<c20-graphic-radio-control adi-automation='coloration level toggles' help-tool-tip='saturation' label='{{:: &#39;design.coloration.color-mode-selector-new.dialog.coloration-level-title&#39; | translate}}' ng-if='$ctrl.isNewColoration' on-select='$ctrl.onColorationLevelChange(item)' radio-items='$ctrl.levels' selected-radio='$ctrl.activeLevel' show-help-button='true' size='small'></c20-graphic-radio-control>\n</div>\n</md-dialog>\n"},function(e,t){e.exports="<p3-dropdown-list data-hook='coloration-mode-selector-dropdown' help-tooltip='design_coloration_mode_toggle' items='$ctrl.dropdownItems' label-key='label' no-hover='true' on-selection-change='$ctrl.onDropdownSelectionChange(item)' track-by-key='value' value='$ctrl.dropdownValue'></p3-dropdown-list>\n"},function(e,t){e.exports="<div class='overlay-backdrop' data-hook='backdrop' ng-class='{&#39;loading&#39;: $ctrl.showLoader}' ng-show='$ctrl.showBackdrop'>\n<div class='coloration-panel-loader' data-hook='loader' ng-show='$ctrl.showLoader'>\n<div class='spinner-icon'>\n<cc-svg-icon icon='coloration:replace'></cc-svg-icon>\n</div>\n<div class='text' ng-bind-html='$ctrl.loaderText'></div>\n</div>\n</div>\n"},function(e,t){e.exports="<coloration-panel-overlay loader-text='{{:: &#39;design.coloration.basic.loader.text&#39; | translate}}' show-backdrop='$ctrl.showBackdrop' show-loader='$ctrl.showLoader'></coloration-panel-overlay>\n<double-spinner ng-if='$ctrl.flags.removeSpinnerAsStageReady &amp;&amp; !$ctrl.isReadyToBeDisplayed'></double-spinner>\n<cc-panel-frame class='-with-p16a-header -with-corners' data-hook='coloration-panel' help-tooltip='design_coloration_help' label='{{:: &#39;design.coloration.basic.panelheadernew&#39; | translate}}' ng-if='$ctrl.isReadyToBeDisplayed' on-close='$ctrl.closePanel()' on-help='$ctrl.openHelp()' on-return='$ctrl.backToDesignKit()' show-close-button='true' show-content-delay='100' show-header='!$ctrl.flags.cardsToPanels' show-nested='$ctrl.applicationState.isColorationAdvancedMode()' show-return-button='true' show-scroll='false'>\n<cc-panel-fixed-top>\n<p16-panel-header data-hook='panel-title' label='{{:: &#39;design.coloration.basic.panelheadernew&#39; | translate}}'></p16-panel-header>\n<div class='coloration-panel-content'>\n<div class='coloration-panel-your-palette align-left' data-hook='coloration-panel-your-palette'>\n<p6-control-header hide-toggle-button='true' label=':: &#39;design.coloration.basic.palettetitle&#39; | translate' show-help-button='false'></p6-control-header>\n<p21-color-tag color='{{$ctrl.mainColor}}' data-main-color icon='edit' ng-class='{&#39;loading&#39;: $ctrl.showLoader}' on-click='$ctrl.changeMainColor(color)' show-icon='true' size='md' tooltip='design_coloration_main_color'></p21-color-tag>\n</div>\n<p17-divider></p17-divider>\n</div>\n<c3-dropdown-list button-text=':: &#39;design.coloration.color-mode-selector-new.button-edit&#39; | translate' class='gray-label' disable-toggle='true' dont-open-for-one='true' items='$ctrl.dropdownItems' label-key='label' label='{{:: &#39;design.coloration.color-mode-selector-new.mode-title&#39; | translate}}' no-hover='true' on-button-click='$ctrl.changeColorationMode()' show-button='true' show-titles='true' value='$ctrl.dropdownItems[0]'>\n<div class='coloration-panel-light-dark-mode'>\n<coloration-mode-selector></coloration-mode-selector>\n</div>\n</c3-dropdown-list>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='coloration-panel-content'>\n<div class='palettes-top-spacer'></div>\n<div class='logo-palette' data-hook='logo-palette-section' ng-if='$ctrl.isLogoPaletteAvailable()'>\n<p6-control-header help-tooltip='design_coloration_logo_palette' hide-toggle-button='true' label=':: &#39;design.coloration.basic.logoPalette.title&#39; | translate' show-help-button='true'></p6-control-header>\n<kit-palette data-hook='logo-palette' is-selectable='true' is-selected='$ctrl.isLogoPaletteSelected()' kit-colors='$ctrl.getLogoColors()' ng-class='{&#39;-selected&#39;: $ctrl.isLogoPaletteSelected()}' ng-click='$ctrl.selectLogoPalette()'></kit-palette>\n<div class='palettes-top-spacer'></div>\n</div>\n<p6-control-header help-tooltip='design_coloration_palette_list' hide-toggle-button='true' label=':: &#39;design.coloration.basic.palettes.title&#39; | translate' show-help-button='true'></p6-control-header>\n<palette-list on-list-shown='$ctrl.onPaletteListShown(withAnimation)' on-palette-selected='$ctrl.populateDropdownItems()'></palette-list>\n</div>\n</cc-panel-body>\n<cc-panel-nested ng-if='$ctrl.flags.cardsToPanels'>\n<advanced-palette-editing></advanced-palette-editing>\n</cc-panel-nested>\n<cc-panel-footer>\n<button class='p9-primary cc-x-height' data-hook='go-to-advanced' ng-click='$ctrl.goToAdvancedPaletteEditing()'>\n{{:: 'design.coloration.basic.change-palette-colors' | translate}}\n</button>\n</cc-panel-footer>\n</cc-panel-frame>\n"},function(e,t){e.exports="<cc-panel-frame class='-with-p16a-header -with-corners' data-hook='cc-panel-frame' label='{{$ctrl.getKitName()}}' on-close='$ctrl.close()' on-help='$ctrl.onHelp()' on-reset='$ctrl.onReset()' on-return='$ctrl.backToDesign()' show-close-button='true' show-help-button='true' show-reset-button='$ctrl.kitHasOverrides()' show-return-button='true'>\n<div class='design-panel-content-new' ng-if='$ctrl.isLoaded'>\n<div class='design-subpanel color-palette-panel'>\n<div class='p8-label'>{{:: 'design.coloration.palette.title' | translate }}</div>\n<div class='color-palette'>\n<kit-palette data-hook='color-palette' kit-colors='$ctrl.kitColors' ng-click='$ctrl.openNewColorationPanel()'></kit-palette>\n<button cc-tooltip='design_coloration_palette_edit' class='edit-palette-icon-button p9a-secondary -icon-only' data-hook='color-palette-edit-button-six-colors' ng-click='$ctrl.openNewColorationPanel()' ng-if='$ctrl.is6ColorsPalette()'>\n<i class='cc-icon-edit'></i>\n</button>\n<button cc-tooltip='design_coloration_palette_edit' class='p9a-secondary -controlbtn' data-hook='color-palette-edit-button' ng-click='$ctrl.openNewColorationPanel()' ng-if='!$ctrl.is6ColorsPalette()'>\n{{:: 'design.coloration.palette.edit' | translate }}\n</button>\n</div>\n</div>\n<p17-divider></p17-divider>\n<div class='design-subpanel'>\n<div class='p8-label'>{{:: 'design.fonts.title' | translate }}</div>\n<div class='font-container'>\n<font-thumbnail font-data='$ctrl.selectedFontData' has-background='false' ng-click='$ctrl.goToFontsPanel()'></font-thumbnail>\n<button cc-tooltip='design_change_font' class='p9a-secondary -controlbtn font-edit-button' ng-click='$ctrl.goToFontsPanel()'>{{:: 'design.kit.font.edit' | translate }}</button>\n</div>\n</div>\n<p17-divider></p17-divider>\n<div class='design-subpanel animations-container'>\n<div class='p8-label'>{{:: 'design.animations.title' | translate }}</div>\n<div animation-name='{{$ctrl.getActiveAnimation()}}' class='animations-thumbnail -with-button' data-hook='animations-control'>\n<div class='icon-container' ng-click='$ctrl.goToAnimationPanel()'>\n<c20-graphic-radio icon='&#39;animation:&#39; + $ctrl.getActiveAnimation()' label='icon'></c20-graphic-radio>\n<span class='animation-label' data-hook='animation-label'>\n{{$ctrl.getActiveAnimation()}}\n</span>\n</div>\n<button cc-tooltip='design_change_animation' class='p9a-secondary -controlbtn' data-hook='animation-edit-button' ng-click='$ctrl.goToAnimationPanel()'>\n{{:: 'design.coloration.palette.edit' | translate }}\n</button>\n</div>\n</div>\n</div>\n</cc-panel-frame>\n"},function(e,t){e.exports="<cc-panel-frame class='-with-corners' data-hook='panel-frame' label='{{:: &#39;builder.design-panel.title&#39; | translate }}' on-close='$ctrl.closeDesignPanel()' on-help='$ctrl.flags.cardsToPanels ? $ctrl.bOnHelp() : $ctrl.openDesignPanelHelp()' on-return='$ctrl.onReturn()' show-close-button='true' show-help-button='!$ctrl.flags.cardsToPanels || $ctrl.bShowHelp()' show-nested='$ctrl.showNested'>\n<cc-panel-fixed-top>\n<c11-paragraph html=':: &#39;builder.design_description&#39; | translate'></c11-paragraph>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<double-spinner ng-if='$ctrl.flags.removeSpinnerAsStageReady &amp;&amp; !$ctrl.storyLoaded'></double-spinner>\n<div class='kits'>\n<div adi-automation='{{::kit.displayName}}' class='kit-option clickable' data-hook='kit' ng-class='{&#39;transition-delay&#39;: $ctrl.unsettingKitIsInView, selected: $ctrl.isActiveKit(kit)}' ng-click='!$ctrl.isActiveKit(kit) &amp;&amp; $ctrl.setKit(kit, $index)' ng-init='$last &amp;&amp; $ctrl.scrollToSelectedKit(&#39;immediate&#39;)' ng-repeat='kit in ::$ctrl.colorThemeKits' ng-style='{backgroundColor: $ctrl.getKitDisplayColor(kit)}'>\n<kit-thumbnail-new adi-automation='{{kit.displayName}}' kit='kit' ng-class='{selected: $ctrl.isActiveKit(kit)}'></kit-thumbnail-new>\n<div class='customize-design' ng-if='$ctrl.isActiveKit(kit)'>\n<div adi-automation='customize-button' class='customize-design-button p9-primary -small' data-hook='customize-button' ng-mouseenter='$ctrl.showSiteDesignMenu()' ng-mouseleave='$ctrl.hideSiteDesignMenu()'>\n{{::'design.kit.customize-design'|translate}}\n<div class='cc-icon-arrow-down'></div>\n<site-design-menu data-hook='site-design-menu' kit='kit' ng-if='$ctrl.isActiveKit(kit) &amp;&amp; $ctrl.isMenuVisible' on-option-clicked='$ctrl.hideSiteDesignMenu()'></site-design-menu>\n</div>\n<p17-divider></p17-divider>\n</div>\n</div>\n</div>\n</cc-panel-body>\n<cc-panel-nested>\n<coloration-panel data-hook='coloration-panel' ng-if='$ctrl.applicationState.isColorationMode() || $ctrl.applicationState.isColorationAdvancedMode()'></coloration-panel>\n<font-panel data-hook='font-panel' ng-if='$ctrl.applicationState.isFontMode()'></font-panel>\n<animation-panel data-hook='animation-panel' ng-if='$ctrl.applicationState.isAnimationMode()'></animation-panel>\n</cc-panel-nested>\n</cc-panel-frame>\n"},function(e,t){e.exports="<cc-panel-frame class='-with-p16a-header font-panel -with-corners' label=' {{ ::&#39;design.fonts.panel-title&#39; | translate }}' on-close='$ctrl.closePanel()' on-help='$ctrl.showHelp()' on-return='$ctrl.backToDesignKit()' show-close-button='true' show-content-delay='$ctrl.showContentDelay' show-header='!$ctrl.flags.cardsToPanels' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<p16-panel-header label='{{:: &#39;design.fonts.panel-title&#39; | translate}}' ng-if='$ctrl.flags.cardsToPanels'></p16-panel-header>\n<c11-paragraph html=':: &#39;design.fonts.site-tip&#39; | translate'></c11-paragraph>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<double-spinner ng-if='$ctrl.flags.removeSpinnerAsStageReady &amp;&amp; !$ctrl.ready'></double-spinner>\n<div class='font-panel-content' ng-if='$ctrl.ready'>\n<div class='font-item' data-hook='font-item' ng-init='$last &amp;&amp; $ctrl.scrollToSelectedFont(&#39;immediate&#39;)' ng-repeat='kit in $ctrl.fontOptions'>\n<font-thumbnail font-data='kit' font-scale='$ctrl.getFontScale(kit)' is-selectable='!$ctrl.isSelectedKit(kit)' is-selected='$ctrl.isSelectedKit(kit)' on-click='$ctrl.setFontKit(kit, $index)'></font-thumbnail>\n<div class='selected-section' ng-if='$ctrl.isSelectedKit(kit)'>\n<font-size-slider on-set-value='$ctrl.setFontSize(value)' value='$ctrl.selectedFontSize'></font-size-slider>\n<section-override-warning data-hook='font-size-section-override' on-override-sections='$ctrl.overrideFontSizeOnSections()' override-message=':: &#39;builder.section-override-warning.font-size&#39; | translate' show='$ctrl.askOverrideFontSizeSections'></section-override-warning>\n<p17-divider></p17-divider>\n</div>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n"},function(e,t){e.exports="<c16-slider category-labels='$ctrl.categoryLabels' category-title='{{:: &#39;general.size&#39; | translate }}' clickable-icons='true' horizontal='true' icon-after='design:font-size-large' icon-before='design:font-size-small' max='$ctrl.maxFontSize' min='$ctrl.minFontSize' on-value-change='$ctrl.onFontSizeChange(value)' on-value-settle='$ctrl.setFontSize(value)' show-divider='false' slider-type='p5a' step='1' stepper='true' value='$ctrl.value'></c16-slider>\n"},function(e,t){e.exports="<div class='font-thumbnail' data-hook='font-thumbnail' ng-class='{ &quot;selected&quot; : $ctrl.isSelected, &quot;selectable&quot;: $ctrl.isSelectable, &quot;has-background&quot;: $ctrl.hasBackground, &quot;background-lg&quot;: $ctrl.hasBackground &amp;&amp; $ctrl.largeBg }' ng-click='$ctrl.onClick({value: $ctrl.fontData})' ng-style='$ctrl.getThumbnailStyle()'>\n<div class='font-name' data-hook='font-title' ng-style='::$ctrl.getNameFontStyle()'>{{ ::$ctrl.fontData.name.title }}</div>\n<div class='font-description' data-hook='font-description' ng-style='::$ctrl.getDescriptionFontStyle()'>{{ ::$ctrl.fontData.description.title }}</div>\n<cc-svg-icon data-hook='font-selected' icon='coloration:selected' is-corner-icon='true' ng-if='$ctrl.isSelected'></cc-svg-icon>\n</div>\n"},function(e,t){e.exports="<div class='header-background' data-hook='header-background' ng-if='$ctrl.shouldShowHeaderBackground'>\n<p6-control-header hide-toggle-button='true' label=':: &#39;design.header.bgcolor.title&#39; | translate'></p6-control-header>\n<c11-paragraph class='c11-paragraph' compile='$ctrl.description' data-hook='title-paragraph'></c11-paragraph>\n<palette-color-picker colors-size='xs' colors='$ctrl.colors' on-color-selected='$ctrl.onColorSelected(selection)' selected-color='$ctrl.current'></palette-color-picker>\n</div>\n"},function(e,t){e.exports="<div class='header-type cc-primitives-in-row flex-wrap radios'>\n<p6-control-header hide-toggle-button='true' label=':: &#39;design.header.type.title&#39; | translate'></p6-control-header>\n<c20-graphic-radio adi-automation='header-type' data-hook='header-type-solid' hover-img-url='::$ctrl.getHoverImgURL(&#39;solid&#39;)' icon='::&#39;header-design:solid&#39;' is-selected='$ctrl.isSolid' label='::&#39;design.header.type.solid&#39; | translate' on-click='$ctrl.setSolid()'></c20-graphic-radio>\n<c20-graphic-radio adi-automation='header-type' data-hook='header-type-transparent' disabled-icon='&#39;header-design:transparent-disabled&#39;' hover-img-url='$ctrl.getHoverImgURL($ctrl.enableTransparent ? &#39;transparent&#39; : &#39;transparent-disabled&#39;)' icon='::&#39;header-design:transparent&#39;' is-selected='$ctrl.isTransparent' label='::&#39;design.header.type.transparent&#39; | translate' ng-disabled='!$ctrl.enableTransparent' on-click='$ctrl.setTransparent()' tooltip='{{(!$ctrl.enableTransparent ? &#39;design_header_type_transparent_disabled&#39; : $ctrl.isCurrentPageHomepage ? &#39;design_header_type_transparent_home&#39; : &#39;design_header_type_transparent_non_home&#39;)}}'></c20-graphic-radio>\n<c20-graphic-radio adi-automation='header-type' data-hook='header-type-fixed' hover-img-url='::$ctrl.getHoverImgURL(&#39;fixed&#39;)' icon='::&#39;header-design:fixed&#39;' is-selected='$ctrl.isFixed' label='::&#39;design.header.type.fixed&#39; | translate' on-click='$ctrl.setFixed()' tooltip='design_header_type_fixed'></c20-graphic-radio>\n</div>\n"},function(e,t){e.exports="<c16-slider label='{{ &#39;design.header.logo-size.label&#39; | translate: {sizeLabel: $ctrl.sizeLabel} }}' max='$ctrl.maxLogoSize' min='$ctrl.minLogoSize' on-value-change='$ctrl.setLogoSize(value)' step='1' stepper='true' value='$ctrl.value'></c16-slider>\n"},function(e,t){e.exports="<p1-text-input class='palette-color-input' data-hook='hex-input-input' max-length='8' on-blur='$ctrl.setColor()' on-change-value='$ctrl.colorChange(value)' on-focus='$ctrl.selectColorText($event)' select-on-focus='false' value='$ctrl.editableColor.value'></p1-text-input>\n"},function(e,t){e.exports="<p24-palette colors='$ctrl.colors' is-selectable='$ctrl.isSelectable' is-selected='$ctrl.isSelected'></p24-palette>\n"},function(e,t){e.exports="<ng-include src='::$ctrl.thumbnailTemplate()'></ng-include>\n"},function(e,t){e.exports="<div class='thumbnail-bg' ng-style='::$ctrl.getBackgroundStyle()'>\n<div class='thumbnail-box'>\n<label class='default-text' data-hook='kit-thumbnail-label' ng-style='::$ctrl.getFontStyle()'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n<div class='thumbnail-hover'>\n<div class='thumbnail-hover-bg' ng-style='{backgroundColor: $ctrl.getHoverBackgroundColor()}'></div>\n<div class='thumbnail-color-palette'>\n<div class='color-element' ng-repeat='color in $ctrl.thumbnailColorPalette track by $index' ng-style='{backgroundColor: color}'></div>\n</div>\n<label class='thumbnail-hover-text' ng-style='{color: $ctrl.getHoverTextColor()}'>{{ $ctrl.getThemeDescription() }}</label>\n</div>\n"},function(e,t){e.exports="<md-dialog aria-label='Choose Color dialog' class='colors-dialog' ng-class='[$ctrl.layout, {&#39;has-paragraph&#39;: $ctrl.getParagraph()}]'>\n<div class='dialog-arrow'></div>\n<div class='dialog-inner'>\n<p16-panel-header label='{{::&#39;design.coloration.customize-palette.title&#39; | translate: {colorTypeName: $ctrl.colorTypeName} }}' ng-class='{&#39;show-return-button&#39;: $ctrl.showReturnButton}' on-close='$ctrl.onClose()' on-return='$ctrl.onReturn()' show-close-button='true' show-return-button='$ctrl.showReturnButton'></p16-panel-header>\n<c11-paragraph html='$ctrl.getParagraph()' ng-show='$ctrl.getParagraph()'></c11-paragraph>\n<palette-color-picker colors='$ctrl.colors' data-hook='palette-color-picker' ng-if='!$ctrl.isAdvancedMode()' on-color-selected='$ctrl.colorSelected(selection)' on-placeholder-click='$ctrl.placeholderClick()' selected-color='$ctrl.selectedColor' show-add-color='true'></palette-color-picker>\n<advanced-color-picker data-hook='advanced-color-picker' ng-if='$ctrl.isAdvancedMode()' on-cancel='$ctrl.onClose()' on-color-selected='$ctrl.colorSelected(selection)' selected-color='$ctrl.selectedColor' show-buttons='true'></advanced-color-picker>\n</div>\n</md-dialog>\n"},function(e,t){e.exports="<div class='colors-container'>\n<div class='color-wrapper' ng-repeat='selection in $ctrl.colors track by $index'>\n<p21-color-tag color='{{selection.color}}' is-selected='$ctrl.isSelected(selection)' on-click='$ctrl.colorClick(selection)' size='{{$ctrl.colorsSize || &#39;sm&#39;}}'></p21-color-tag>\n</div>\n<div class='color-wrapper' ng-if='$ctrl.showAddColor'>\n<p21-color-tag is-placeholder='true' on-click='$ctrl.placeholderClick()' size='{{$ctrl.colorsSize || &#39;sm&#39;}}' tooltip='design_coloration_add_color'></p21-color-tag>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='palette-color-container'>\n<p21-color-tag color='{{$ctrl.color}}' on-click='$ctrl.onIconClick({$event: $event, color: $ctrl.color})' show-icon='true' size='md'></p21-color-tag>\n<div class='palette-color-info'>\n<div class='palette-color-label' data-hook='palette-color-label'>\n{{:: $ctrl.label}}\n</div>\n<hex-input color='$ctrl.color' on-text-change='$ctrl.onTextChange()'></hex-input>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='palette-list' ng-class='{&#39;animate-palettes&#39;: $ctrl.showAnimation}'>\n<kit-palette data-hook='palette-list-item' is-selectable='true' is-selected='$ctrl.isCustomSelected' kit-colors='$ctrl.visibleCustomPalette.colors' ng-class='{&#39;-selected&#39;: $ctrl.isCustomSelected}' ng-click='$ctrl.selectCustom()' ng-if='!!$ctrl.customPalette'></kit-palette>\n<kit-palette data-hook='palette-list-item' is-selectable='true' is-selected='$index === $ctrl.selectedIndex' kit-colors='palette.colors' list-enter-end='$ctrl.handleListAnimationEnd()' ng-class='{&#39;-selected&#39;: $index === $ctrl.selectedIndex}' ng-click='$ctrl.select($index)' ng-repeat='palette in $ctrl.visiblePalettes track by ($index + palette.colors.mainColor)'></kit-palette>\n</div>\n"},function(e,t){e.exports="<cc-panel-frame class='-with-p16a-header animation-panel -with-corners' label='{{ ::&#39;design.animations.section-panel-title&#39; | translate }}' on-close='$ctrl.closePanel()' on-help='$ctrl.showSectionAnimationHelp()' on-return='$ctrl.back()' show-close-button='true' show-content-delay='$ctrl.flags.cardsToPanels ? 0 : undefined' show-header='!$ctrl.flags.cardsToPanels' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<p16-panel-header label='{{:: &#39;design.animations.section-panel-title&#39; | translate}}' ng-if='$ctrl.flags.cardsToPanels'></p16-panel-header>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='animation-panel-content'>\n<c11-paragraph class='c11-paragraph section-explanation' compile=':: &#39;design.animations.section-tip&#39; | translate' data-hook='title-paragraph'></c11-paragraph>\n<p6-control-header class='animation-panel-label' hide-toggle-button='true' label=':: &#39;design.animations.component-animation.title&#39; | translate'></p6-control-header>\n<div class='cc-primitives-in-row flex-wrap animation-thumbnails -section' data-hook='animation-thumbnails'>\n<c20-graphic-radio icon='&#39;animation:&#39; + pattern.iconClass' is-selected='pattern == $ctrl.activeAnimationPattern' label='pattern.label' ng-mouseenter='$ctrl.previewAnimationPattern(pattern)' ng-repeat='pattern in $ctrl.animationPatterns' on-click='$ctrl.setAnimationPattern(pattern)' selected-icon='&#39;animation:&#39; + pattern.iconClass + &#39;Selected&#39;'></c20-graphic-radio>\n</div>\n<div ng-if='$ctrl.scrollTypeChangeable'>\n<p17-divider></p17-divider>\n<p6-control-header class='animation-panel-label -separated-label' hide-toggle-button='true' label=':: &#39;design.animations.scroll-type.title&#39; | translate'></p6-control-header>\n<p3-dropdown-list class='transition-dropdown-list' container-class='scroll-type-dropdown-container' data-hook='scroll-type-dropdown' items='$ctrl.scrollTypeOptions' label-key='label' on-selection-change='$ctrl.setScrollType(item.value)' track-by-key='value' value='$ctrl.activeScrollType'></p3-dropdown-list>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n"},function(e,t){e.exports="<div class='image-settings'>\n<p6-control-header hide-toggle-button='true' label=':: &#39;builder.section-background.background-settings.image.title&#39; | translate'></p6-control-header>\n<div class='c11-paragraph' data-hook='parallax-paragraph' ng-if='$ctrl.shouldShowParallaxParagraph'>\n<span wix-translate-compile='builder.section-background.background-settings.image.parallax-paragraph'></span>\n</div>\n<div class='cc-primitives-in-row flex-wrap radios' data-hook='animation-thumbnails'>\n<c20-graphic-radio icon='&#39;background-options:&#39; + option.iconClass' is-selected='option.key == $ctrl.activeAligmentOption' label='option.label' ng-repeat='option in $ctrl.options' on-click='$ctrl.setAligmentOption(option)' selected-icon='&#39;background-options:&#39; + option.iconClass + &#39;Selected&#39;'></c20-graphic-radio>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='background-settings p4-action-menu'>\n<div class='close-button' data-hook='close' ng-click='$ctrl.onClose()'>\n<i class='cc-icon-close-12'></i>\n</div>\n<section-background-settings-image data-hook='image-settings' ng-if='$ctrl.isImage()'></section-background-settings-image>\n</div>\n"},function(e,t){e.exports="<cc-panel-frame adi-automation='{{:: $ctrl.automationAttribute }}' class='-with-p16a-header -with-corners' label='{{:: $ctrl.label}}' on-close='$ctrl.closePanel()' on-help='$ctrl.onHelp()' on-return='$ctrl.goToPrevState()' scroll-disabled='$ctrl.shouldShowBackdrop' show-close-button='true' show-header='!$ctrl.flags.cardsToPanels' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<p16-panel-header label='{{::$ctrl.label}}' ng-if='$ctrl.flags.cardsToPanels'></p16-panel-header>\n<div class='c11-paragraph' data-hook='panel-paragraph-text'>\n{{'builder.section-background.panel-paragraph-text' | translate}}\n</div>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='background-panel' data-hook='background-panel' ng-class='{&#39;show-background-off&#39;: !$ctrl.showBackground}'>\n<div class='background-items'>\n<div adi-automation='background-item' class='background-item' data-hook='background' ng-class='{&#39;-selected&#39;: background.isSelected, &#39;-with-label&#39;: background.label}' ng-repeat='background in $ctrl.backgrounds track by $id(background)'>\n<p25-background-preview data='background.data' is-selected='background.isSelected' on-click='$ctrl.selectBackground(background)' size='&#39;big&#39;'>\n<p17-divider></p17-divider>\n</p25-background-preview>\n</div>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n"},function(e,t){e.exports="<div class='hover-area' ng-mouseenter='$ctrl.showUploadPopup()' ng-mouseleave='$ctrl.hideUploadPopup()'>\n<div class='upload-background-button p9-primary' data-hook='upload-background-button' ng-class='{&#39;-with-menu-opened&#39;: $ctrl.displayUploadPopup}'>\n{{:: 'builder.section-background.upload-button' | translate}}\n<div class='upload-background-icon cc-icon-arrow-up'></div>\n</div>\n<div class='upload-background-menu-container' ng-if='$ctrl.displayUploadPopup'>\n<div class='upload-background-menu p4-action-menu' data-hook='upload-background-menu'>\n<cc-menu-item data-hook='upload-gallery-background' label='{{:: &#39;builder.section-background.upload.gallery&#39; | translate}}' ng-click='$ctrl.handleClick($ctrl.mediaTypes.MultipleImages)' svg-icon='background-preview:upload-gallery'></cc-menu-item>\n<cc-menu-item data-hook='upload-video-background' label='{{:: &#39;builder.section-background.upload.video&#39; | translate}}' ng-click='$ctrl.handleClick($ctrl.mediaTypes.Video)' svg-icon='background-preview:upload-video'></cc-menu-item>\n<cc-menu-item data-hook='upload-image-background' label='{{:: &#39;builder.section-background.upload.image&#39; | translate}}' ng-click='$ctrl.handleClick($ctrl.mediaTypes.SingleImage)' svg-icon='background-preview:upload-image'></cc-menu-item>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='body-section-design-menu'>\n<cc-menu-item data-hook='media-button' label='{{:: &quot;builder.section-design.menu.media&quot; | translate }}' ng-click='$ctrl.openMediaPanel()' ng-if='$ctrl.flags.sectionMedia &amp;&amp; $ctrl.showMedia' svg-icon='design:media'></cc-menu-item>\n<cc-menu-item data-hook='color-button' label='{{::&quot;builder.section-design.menu.color&quot; | translate }}' ng-click='$ctrl.openColorPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:color'></cc-menu-item>\n<cc-menu-item data-hook='font-button' label='{{ ::$ctrl.fontPanelTitle}}' ng-click='$ctrl.openFontPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:font'></cc-menu-item>\n<cc-menu-item data-hook='height-button' label='{{::&quot;builder.section-design.menu.height&quot; | translate }}' ng-click='$ctrl.openHeightPanel($event)' ng-if='$ctrl.isHeightSupported()' svg-icon='design:height'></cc-menu-item>\n<cc-menu-item data-hook='animations-button' label='{{::&quot;builder.section-design.menu.animations&quot; | translate }}' ng-click='$ctrl.openAnimationPanel()' ng-if='!$ctrl.isHeader &amp;&amp; !$ctrl.isSlideShow()' svg-icon='design:animations'></cc-menu-item>\n<cc-menu-item data-hook='animations-button' label='{{::&quot;builder.section-design.menu.animations&quot; | translate }}' ng-click='$ctrl.openSlideshowAnimationPanel()' ng-if='!$ctrl.isHeader &amp;&amp; $ctrl.isSlideShow() &amp;&amp; $ctrl.isSlideShowTransition()' svg-icon='design:animations'></cc-menu-item>\n</div>\n"},function(e,t){e.exports="<div class='header-design-menu' data-hook='header-design-menu'>\n<header-type data-hook='header-type' ng-if='$ctrl.showHeaderType' on-updated='$ctrl.handleTypeUpdate'></header-type>\n<p17-divider ng-if='$ctrl.showHeaderType'></p17-divider>\n<header-background adi-automation='header-background' colors-source='$ctrl.colorsSource' on-updated='$ctrl.handleBackgroundUpdate()' site-part='$ctrl.sitePart'></header-background>\n</div>\n"},function(e,t){e.exports="<div aria-describedby='list-item-menu' aria-label='{{ $ctrl.item.label }}' class='section-design-menu p4-action-menu' data-hook='section-design-menu' ng-class='{&#39;top&#39;: $ctrl.isAllMenuVisible === false, &#39;notready&#39;: $ctrl.notReady()}' role='menu' tabindex='-1'>\n<cc-menu-item data-hook='background-button' label='{{:: &quot;builder.section-design.menu.background&quot; | translate }}' ng-click='$ctrl.openBackgroundPanel()' ng-if='$ctrl.flags.sectionMedia &amp;&amp; $ctrl.showBackground &amp;&amp; !$ctrl.isListNode' svg-icon='design:background'></cc-menu-item>\n<cc-menu-item data-hook='background-button' label='{{:: &quot;builder.section-design.menu.background&quot; | translate }}' ng-click='$ctrl.openListBackgroundPanel()' ng-if='$ctrl.flags.sectionMedia &amp;&amp; $ctrl.showBackground &amp;&amp; $ctrl.isListNode &amp;&amp; !$ctrl.listBackgroundOptions' svg-icon='design:background'></cc-menu-item>\n<div class='section-list' ng-if='$ctrl.flags.sectionMedia &amp;&amp; $ctrl.showBackground &amp;&amp; $ctrl.listBackgroundOptions'>\n<div class='p4-item just-text'>{{::\"builder.section-design.menu.background\" | translate }}</div>\n<cc-menu-item data-hook='headerbg-button' label='{{:: &quot;builder.section-design.menu.headerbg&quot; | translate }}' ng-click='$ctrl.openHeaderBackgroundPanel()' svg-icon-from-inline='true' svg-icon-hover='design:headerbg_hover' svg-icon='design:headerbg'></cc-menu-item>\n<cc-menu-item data-hook='listbg-button' label='{{:: &quot;builder.section-design.menu.listbg&quot; | translate }}' ng-click='$ctrl.openListBackgroundPanel()' svg-icon-from-inline='true' svg-icon-hover='design:listbg_hover' svg-icon='design:listbg'></cc-menu-item>\n<p17-divider></p17-divider>\n</div>\n<cc-menu-item data-hook='color-button' label='{{::&quot;builder.section-design.menu.color&quot; | translate }}' ng-click='$ctrl.openColorPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:color'></cc-menu-item>\n<cc-menu-item data-hook='font-button' label='{{ ::$ctrl.fontPanelTitle}}' ng-click='$ctrl.openFontPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:font'></cc-menu-item>\n<cc-menu-item data-hook='animations-button' label='{{::&quot;builder.section-design.menu.animations&quot; | translate }}' ng-click='$ctrl.openAnimationPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:animations'></cc-menu-item>\n</div>\n"},function(e,t){e.exports="<div aria-describedby='list-item-menu' aria-label='{{ $ctrl.item.label }}' class='section-design-menu p4-action-menu' data-hook='section-design-menu' ng-class='{&#39;top&#39;: $ctrl.isAllMenuVisible === false, &#39;notready&#39;: $ctrl.notReady(), &#39;header&#39;: $ctrl.isHeader || $ctrl.isFooter}' role='menu' tabindex='-1'>\n<body-section-design-menu item='::$ctrl.item' ng-if='::!$ctrl.isHeader &amp;&amp; !$ctrl.isFooter' on-option-clicked='$ctrl.onOptionClicked()'></body-section-design-menu>\n<header-design-menu ng-if='::$ctrl.isHeader || $ctrl.isFooter' on-design-updated='$ctrl.onDesignUpdated' site-part='$ctrl.sitePart'></header-design-menu>\n</div>\n"},function(e,t){e.exports="<cc-panel-frame class='-with-p16a-header section-font-panel -with-corners' label='{{ ::$ctrl.panelTitle}}' on-close='$ctrl.closePanel()' on-help='$ctrl.showHelp()' on-return='$ctrl.backToSectionDesign()' show-close-button='true' show-content-delay='$ctrl.flags.cardsToPanels ? 0 : undefined' show-header='!$ctrl.flags.cardsToPanels' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<p16-panel-header label='{{:: $ctrl.panelTitle}}' ng-if='$ctrl.flags.cardsToPanels'></p16-panel-header>\n<c11-paragraph class='c11-paragraph' compile='$ctrl.panelDescription' data-hook='title-paragraph'></c11-paragraph>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='font-panel-content' ng-if='$ctrl.ready'>\n<font-thumbnail font-data='$ctrl.selectedFont' font-scale='$ctrl.selectedFontSize' is-selectable='false' large-bg='true'></font-thumbnail>\n<font-size-slider on-set-value='$ctrl.setFontSize(value)' value='$ctrl.selectedFontSize'></font-size-slider>\n<div data-hook='text-position-controls' ng-if='$ctrl.showVerticalPositionControls'>\n<p0-spacer size='large'></p0-spacer>\n<div class='p8-label'>{{ ::'design.fonts.position-on-media' | translate }}</div>\n<p0-spacer></p0-spacer>\n<div class='cc-primitives-in-row'>\n<div class='rectangles-container'>\n<p26-image-position letter-of-selected='T' on-position-clicked='$ctrl.positionClicked(index)' rectangles-count-each-row='3' rectangles-count='9' selected-rectangle='$ctrl.selectedPositionIndex'></p26-image-position>\n</div>\n</div>\n</div>\n<p0-spacer></p0-spacer>\n<p17-divider ng-if='$ctrl.showVerticalPositionControls'>)</p17-divider>\n<div data-hook='alignment-toolbar'>\n<p0-spacer size='large'></p0-spacer>\n<div class='p8-label'>{{ ::'design.fonts.text-alignment.label' | translate }}</div>\n<p0-spacer></p0-spacer>\n<div class='cc-primitives-in-row flex-wrap'>\n<c20-graphic-radio adi-automation='Section Alignment Left' complex='false' data-hook='alignment-option-left-{{$ctrl.isAlignmentSelected(&#39;left&#39;) ? &#39;selected&#39; : &#39;unselected&#39;}}' icon='&#39;alignment:AlignLeft&#39;' is-selected='$ctrl.isAlignmentSelected(&#39;left&#39;)' label='::&#39;design.fonts.text-alignment.left&#39; | translate' on-click='$ctrl.alignSection(&#39;left&#39;)' small='true'></c20-graphic-radio>\n<p0-spacer is-horizontal='true' size='medium'></p0-spacer>\n<c20-graphic-radio adi-automation='Section Alignment Center' complex='false' data-hook='alignment-option-center-{{$ctrl.isAlignmentSelected(&#39;center&#39;) ? &#39;selected&#39; : &#39;unselected&#39;}}' icon='&#39;alignment:AlignCenter&#39;' is-selected='$ctrl.isAlignmentSelected(&#39;center&#39;)' label='::&#39;design.fonts.text-alignment.center&#39; | translate' on-click='$ctrl.alignSection(&#39;center&#39;)' small='true'></c20-graphic-radio>\n<p0-spacer is-horizontal='true' size='medium'></p0-spacer>\n<c20-graphic-radio adi-automation='Section Alignment Right' complex='false' data-hook='alignment-option-right-{{$ctrl.isAlignmentSelected(&#39;right&#39;) ? &#39;selected&#39; : &#39;unselected&#39;}}' icon='&#39;alignment:AlignRight&#39;' is-selected='$ctrl.isAlignmentSelected(&#39;right&#39;)' label='::&#39;design.fonts.text-alignment.right&#39; | translate' on-click='$ctrl.alignSection(&#39;right&#39;)' small='true'></c20-graphic-radio>\n</div>\n</div>\n<p0-spacer></p0-spacer>\n<p17-divider ng-if='$ctrl.showSplitParagraph()'>)</p17-divider>\n<div data-hook='paragraph-split-toolbar' ng-if='$ctrl.showSplitParagraph()'>\n<p0-spacer size='large'></p0-spacer>\n<div class='p8-label'>{{ ::'design.fonts.split-parapraph.title' | translate }}</div>\n<p0-spacer></p0-spacer>\n<div class='cc-primitives-in-row flex-wrap'>\n<c20-graphic-radio adi-automation='split paragraph split' complex='false' data-hook='split-parapraph-split {{$ctrl.isSplitParagraph ? &#39;selected&#39; : &#39;unselected&#39;}}' icon='&#39;split:ParagraphSplit&#39;' is-selected='$ctrl.isSplitParagraph' label='::&#39;design.fonts.paragraph-columns.split&#39; | translate' on-click='$ctrl.setSplitParagraph(true)' small='true'></c20-graphic-radio>\n<p0-spacer is-horizontal='true' size='medium'></p0-spacer>\n<c20-graphic-radio adi-automation='split paragraph merge' complex='false' data-hook='split-parapraph-merge {{$ctrl.isSplitParagraph ? &#39;unselected&#39; : &#39;selected&#39;}}' icon='&#39;split:ParagraphMerge&#39;' is-selected='!$ctrl.isSplitParagraph' label='::&#39;design.fonts.paragraph-columns.merge&#39; | translate' on-click='$ctrl.setSplitParagraph(false)' small='true'></c20-graphic-radio>\n</div>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n"},function(e,t){e.exports="<div class='style-d section-override-warning-container' data-hook='section-override-warning-body' ng-if='$ctrl.show'>\n<p class='c11-paragraph'>\n<span compile='$ctrl.overrideMessage + $ctrl.$translate.instant(&#39;builder.section-override-warning.replace-sections&#39;)' data-hook='initial-message' ng-if='$ctrl.showOverrideQuery()'></span>\n<span data-hook='success-message' ng-if='$ctrl.showSuccess()'>\n<i class='cc-icon-checkbox-check confirm'></i>\n{{ :: 'builder.section-override-warning.success' | translate }}\n</span>\n</p>\n<p17-divider ng-if='$ctrl.divider'></p17-divider>\n</div>\n"},function(e,t){e.exports="<div aria-describedby='list-item-menu' aria-label='{{ $ctrl.item.label }}' class='site-design-menu p4-action-menu' data-hook='site-design-menu' ng-class='{&#39;top&#39;: $ctrl.isAllMenuVisible === false, &#39;notready&#39;: $ctrl.notReady()}' role='menu' tabindex='-1'>\n<cc-menu-item data-hook='color-button' label='{{::&#39;design.colors.title&#39; | translate }}' ng-click='$ctrl.openColorPanel()' svg-icon='design:color'></cc-menu-item>\n<cc-menu-item data-hook='font-button' label='{{::&#39;design.fonts.title&#39; | translate }}' ng-click='$ctrl.openFontPanel()' svg-icon='design:font'></cc-menu-item>\n<cc-menu-item data-hook='animations-button' label='{{::&#39;design.animations.title&#39; | translate }}' ng-click='$ctrl.openAnimationPanel()' svg-icon='design:animations'></cc-menu-item>\n<p17-divider ng-if='$ctrl.kitHasOverrides()'></p17-divider>\n<cc-menu-item data-hook='reset-button' label='{{:: &#39;design.kit.reset.button&#39; | translate }}' ng-click='$ctrl.onReset()' ng-if='$ctrl.kitHasOverrides()' svg-icon='design:reset'></cc-menu-item>\n</div>\n"},function(e,t){e.exports="<cc-panel-frame class='slideshow-animation-panel -with-p16a-header animation-panel' label='{{ ::&#39;design.animations.section-panel-title&#39; | translate }}' on-close='$ctrl.closePanel()' on-help='$ctrl.showSectionAnimationHelp()' on-return='$ctrl.back()' show-close-button='true' show-content-delay='$ctrl.flags.cardsToPanels ? 0 : undefined' show-header='!$ctrl.flags.cardsToPanels' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<p16-panel-header label='{{:: &#39;design.animations.section-panel-title&#39; | translate}}' ng-if='$ctrl.flags.cardsToPanels'></p16-panel-header>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='animation-panel-content'>\n<c11-paragraph class='c11-paragraph section-explanation' compile=':: &#39;design.animations.preview&#39; | translate' data-hook='title-paragraph'></c11-paragraph>\n<p6-control-header class='animation-panel-label' hide-toggle-button='true' label=':: &#39;design.animations.slideshow-animation.title&#39; | translate'></p6-control-header>\n<div class='cc-primitives-in-row flex-wrap animation-thumbnails -section' data-hook='animation-thumbnails'>\n<c20-graphic-radio icon='&#39;animation:&#39; + pattern.iconClass' is-selected='pattern == $ctrl.activeAnimationPattern' label='pattern.label' ng-repeat='pattern in $ctrl.animationPatterns' on-click='$ctrl.setAnimationPattern(pattern)' selected-icon='&#39;animation:&#39; + pattern.selectedIconClass'></c20-graphic-radio>\n</div>\n<P17-DIVIDER class='slideshow-transition-time'></P17-DIVIDER>\n<div class='transition-time-slider'>\n<div class='transition-time-slider-label p8-label' data-hook='transitionTime'>{{ 'design.animations.slideshow-transition-time.label' | translate: {transitionTime: $ctrl.getTransitionTime()} }}</div>\n<p5-slider class='transition-time-slider-control' max='6' min='2' on-value-change='$ctrl.setTransitionTime(value)' on-value-settle='$ctrl.valueSettle(value)' step='1' stepper='false' type='p5a' value='$ctrl.transition.time'></p5-slider>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n"},function(e,t){e.exports="<cc-button-editor-link active='$ctrl.active' adi-automation='{{::$ctrl.adiAutomation}}' data-hook='field-button' debounce-delay='::$ctrl.debounceDelay' disable-toggle='$ctrl.disableToggle' focused='$ctrl.focused' is-linked='$ctrl.buttons[0].iconVisible' label='{{::$ctrl.label}}' ng-if='::!$ctrl.isMultiButton' on-edit-link='$ctrl.onEditLink()' on-text-change='$ctrl.onChangeButtonText(value)' on-toggle='$ctrl.handleToggle(visibility)' text='$ctrl.buttons[0].value'></cc-button-editor-link>\n<c6-list active='$ctrl.active' add-new-title='Add Secondary Button' adi-automation='{{::$ctrl.adiAutomation}}' data-hook='field-button-list' debounce-delay='::$ctrl.debounceDelay' disable-list-link='!$ctrl.addButtonActive' disable-toggle='false' focused='$ctrl.focused' item-type='p10l' items='$ctrl.buttons' label='{{::$ctrl.label}}' ng-if='::$ctrl.isMultiButton' on-add-new='$ctrl.addButton()' on-delete='$ctrl.removeButton(index)' on-edit='$ctrl.handleOnEditLink(index)' on-order-change='$ctrl.handleOnOrderChange(event.fromIndex, event.toIndex)' on-text-change='$ctrl.onChangeButtonText(value, index)' on-toggle='$ctrl.handleToggle(visibility)'></c6-list>\n"},function(e,t){e.exports="<div class='catalog-styles-dialog'>\n<cc-panel-frame label='{{::&#39;editor.catalog-styles.&#39; + $ctrl.catalogType + &#39;.title&#39; | translate}}' on-close='$ctrl.close()' show-close-button='true'>\n<cc-panel-fixed-top>\n<div class='c11-paragraph'>{{::'editor.catalog-styles.' + $ctrl.catalogType + '.description' | translate}}</div>\n</cc-panel-fixed-top>\n<div class='catalog'>\n<div ng-repeat='catalogId in $ctrl.catalogIds track by $index'>\n<div adi-automation='catalog-id-{{:: catalogId}}' class='catalog-item' ng-click='$ctrl.setCatalogItem(catalogId, $index)'>\n<div class='icon-wrapper' ng-if='$ctrl.isActiveCatalogItem(catalogId)'>\n<cc-svg-icon class='-small' data-hook='selected-icon' icon='coloration:selected' is-corner-icon='true'></cc-svg-icon>\n</div>\n<catalog-styles-preview catalog-id='catalogId' catalog-type='$ctrl.catalogType' ng-class='{ last: $index===$ctrl.catalogIds.length-1 }' text='$ctrl.text'></catalog-styles-preview>\n</div>\n</div>\n</div>\n</cc-panel-frame>\n</div>\n"},function(e,t){e.exports="<div class='content-element-editor' ng-mouseleave='$ctrl.resetLastHoveredField()'>\n<field-editor child-id=':: $ctrl.childId' data-click-arg='$ctrl.clickArg' data-highlight-arg='$ctrl.highlightArg' data-hook='editor-field' field-editor-focus field='field' ng-attr-node-id='{{:: $ctrl.nodeId}}' ng-click='$ctrl.onClicked(field)' ng-mouseenter='$ctrl.onMouseEnter(field)' ng-repeat='field in $ctrl.fields' node='$ctrl.node' on-field-toggle='$ctrl.onFieldToggle(field)' on-value-change='$ctrl.temporaryHighlight(field)' toggle-disabled='field.lastActiveField'></field-editor>\n<div class='p9b-text-button cc-control-padding' data-hook='button-item-to-page' ng-click='$ctrl.onItemToPage($ctrl.node);' ng-if='$ctrl.onItemToPage &amp;&amp; $ctrl.isItem &amp;&amp; !$ctrl.isInMobileEditMode()'>{{::'builder.page-from-item' | translate}}</div>\n</div>\n"},function(e,t){e.exports="<div class='design-contorl'>\n<div auto-scroll='{ isAutoScrolling: $ctrl.showPreviewAnimation, maxHeight: 200, startScrollAnimationDuration: 1000, stopScrollAnimationDuration: 700, containerOffset: 1 }' class='preset-viewer' ng-class='{&#39;mobile-width&#39;: $ctrl.isMobile}' preview-slideshow-player='{ isPlaying: $ctrl.showPreviewAnimation }'>\n<div class='preview-flag-message' data-hook='fixed-header-lable' ng-if='$ctrl.headerPresetUtils.shouldShowFixLabel($ctrl.presetPreviews[0], $ctrl.isMobile)'>{{:: 'builder.preview-flags.fix' | translate }}</div>\n<div class='preview-flag-message' data-hook='slideshow-lable' ng-if='$ctrl.presetPreviews[0].flags[0] === &#39;slideShowPreset&#39;'>{{:: 'builder.preview-flags.slideshow' | translate }}</div>\n<preset-preview data-hook='design-control-preview-viewer' flags='$ctrl.presetPreviews[0].flags' is-selected='true' ng-click='$ctrl.applicationState.goToSwitchPresetMode()' ng-mouseenter='$ctrl.previewMouseEnter()' ng-mouseleave='$ctrl.previewMouseLeave()' preset-preview='$ctrl.presetPreviews' scale=':: $ctrl.scale'></preset-preview>\n</div>\n<div class='design-contorl-actions'>\n<button class='p9-primary -medium design-contorl-button change-layout -with-icon' data-hook='change-design-button' ng-click='$ctrl.applicationState.goToSwitchPresetMode()'>\n<i class='change-layout-icon cc-icon-show-eye'></i>\n{{ ::'builder.layout-control.change-design' | translate }}\n</button>\n<button class='p9a-secondary -with-icon -medium design-contorl-button customize-button' data-hook='customize-design-button' ng-if='::(!$ctrl.isMobile &amp;&amp; $ctrl.presetSitePart !== &#39;footer&#39;)' ng-mouseenter='$ctrl.showSectionDesignMenu()' ng-mouseleave='$ctrl.hideSectionDesignMenu()'>\n<div class='cc-x-height'>{{ ::'builder.layout-control.customize' | translate }}</div>\n<div class='customize-arrow cc-icon-arrow-down'></div>\n<section-design-menu data-hook='section-design-menu' item='$ctrl.presetPreviews[0]' ng-if='$ctrl.isMenuVisible' on-design-updated='$ctrl.handleCurrentPreviewUpdate' on-option-clicked='$ctrl.hideSectionDesignMenu()' site-part='$ctrl.presetSitePart'></section-design-menu>\n</button>\n</div>\n<p17-divider></p17-divider>\n</div>\n"},function(e,t){e.exports="<div class='field-wrapper' field-title='{{::$ctrl.fieldTitle}}' ng-class='{&#39;highlight&#39;: $ctrl.isHighlighted, &#39;blink&#39;: $ctrl.blink}'>\n<c2-text-input action-label='::$ctrl.getFieldActionLabel()' action-tooltip='{{::$ctrl.getTextManagerTooltip()}}' active='$ctrl.field.active' adi-automation='{{::$ctrl.getAutomationLabel()}}' autocomplete-media='::$ctrl.isMediaAutocomplete' autocomplete='::$ctrl.field.suggestedContent' change-value-on-blur='true' data-hook='field-text-input' debounce-delay='::$ctrl.debounceDelay' disable-select-all-on-focus='$ctrl.disableSelectAllOnFocus' disable-toggle='$ctrl.toggleDisabled' focused='$ctrl.field.focused' force-toggle='true' help-tooltip='{{::$ctrl.fieldData.helpTooltip}}' is-disabled='$ctrl.isInMobileEditMode' label='{{::$ctrl.fieldTitle}}' mobile='$ctrl.isInMobileEditMode' ng-if='::$ctrl.fieldEditorConfiguration.isTextInput($ctrl.fieldData)' on-action='$ctrl.openTextManager()' on-change-value='$ctrl.onChange(value)' on-focus='$ctrl.onFieldFocused()' on-toggle='$ctrl.onMaskChange(visibility)' on-tooltip-link-click='$ctrl.goToDesktopContentPanel()' should-focus-on-change-value='$ctrl.shouldFocusOnChangeValue' show-action='$ctrl.isTextManagerEnabled() &amp;&amp; $ctrl.field.active' value-tooltip='{{::$ctrl.isInMobileEditMode ? &#39;mobile_text_field_disabled&#39; : null }}' value='$ctrl.textInputValue'></c2-text-input>\n<c2-text-input action-label='::$ctrl.getFieldActionLabel()' action-tooltip='{{::$ctrl.getTextManagerTooltip()}}' active='$ctrl.field.active' adi-automation='{{::$ctrl.getAutomationLabel()}}' change-value-on-blur='true' data-hook='field-long-text-input' debounce-delay='::$ctrl.debounceDelay' disable-select-all-on-focus='$ctrl.disableSelectAllOnFocus' disable-toggle='$ctrl.toggleDisabled' focused='$ctrl.field.focused' help-tooltip='{{::$ctrl.fieldData.helpTooltip}}' is-disabled='$ctrl.isInMobileEditMode' label='{{::$ctrl.fieldTitle}}' long='true' ng-if='::$ctrl.fieldEditorConfiguration.isLongTextInput($ctrl.fieldData)' on-action='$ctrl.openTextManager()' on-change-value='$ctrl.onChange(value)' on-focus='$ctrl.onFieldFocused()' on-toggle='$ctrl.onMaskChange(visibility)' should-focus-on-change-value='$ctrl.shouldFocusOnChangeValue' show-action='$ctrl.isTextManagerEnabled() &amp;&amp; $ctrl.field.active' value='$ctrl.fieldData.value'></c2-text-input>\n<c23-rich-text-input action-label='::$ctrl.getFieldActionLabel()' action-tooltip='{{::$ctrl.getTextManagerTooltip()}}' active='$ctrl.field.active' adi-automation='{{::$ctrl.getAutomationLabel()}}' change-value-on-blur='true' data-hook='field-rich-text-input' debounce-delay='::$ctrl.debounceDelay' default-formatting='$ctrl.designKitFormatting' disable-select-all-on-focus='$ctrl.disableSelectAllOnFocus' disable-toggle='$ctrl.toggleDisabled' displayed-r-t-t-sections='::$ctrl.displayedRTTSections' focus-on-init='true' focused='$ctrl.field.focused' force-focus='$ctrl.forceFocus' is-disabled='$ctrl.isInMobileEditMode' is-empty-value='$ctrl.isEmptyValue(value)' label='{{::$ctrl.fieldTitle}}' links-manager='$ctrl.richTextLinksManager' max-rows-on-blur='::$ctrl.maxRowsOnBlur' ng-if='::$ctrl.fieldEditorConfiguration.isRichTextInput($ctrl.fieldData)' ng-mouseenter='$ctrl.onFieldMouseEnter()' ng-mouseleave='$ctrl.onFieldMouseLeave()' on-action='$ctrl.openTextManager()' on-change-value='$ctrl.onChange(value, true)' on-focus='$ctrl.onFieldFocused()' on-link-command='$ctrl.onRichTextLinkCommand(linkId)' on-run-command='$ctrl.onRichTextCommand(command, state)' on-toggle='$ctrl.onMaskChange(visibility)' should-focus-on-change-value='$ctrl.shouldFocusOnChangeValue' show-action='$ctrl.isTextManagerEnabled() &amp;&amp; ($ctrl.field.active &amp;&amp; $ctrl.fieldMouseEnter || $ctrl.showTextManagerLink)' styles-manager='$ctrl.richTextStylesManager' value='$ctrl.richTextValue'></c23-rich-text-input>\n<cc-button-editor active='$ctrl.field.active' adi-automation='{{::$ctrl.getAutomationLabel()}}' data-hook='field-button' debounce-delay='::$ctrl.debounceDelay' disable-toggle='$ctrl.toggleDisabled' focused='$ctrl.field.focused' label='{{::$ctrl.fieldTitle}}' link='$ctrl.field.data.linkAsILink' ng-if='::(!$ctrl.flags.newButtonControl &amp;&amp; !$ctrl.flags.twoButtonSection &amp;&amp; $ctrl.fieldEditorConfiguration.isButtonInput($ctrl.fieldData))' on-edit-link='$ctrl.onLinkItemEdit()' on-text-change='$ctrl.onChange(value)' on-toggle='$ctrl.onMaskChange(visibility)' text='$ctrl.fieldData.value.callToAction'></cc-button-editor>\n<button-field-editor adi-automation='{{::$ctrl.getAutomationLabel()}}' data-hook='field-button' debounce-delay='::$ctrl.debounceDelay' disable-toggle='$ctrl.toggleDisabled' field='$ctrl.field' is-header-footer='$ctrl.node.contentElementType === &quot;GeneralDescription&quot;' is-list-item='$ctrl.node.isListItemBody()' label='{{::$ctrl.fieldTitle}}' ng-if='::($ctrl.flags.twoButtonSection &amp;&amp; $ctrl.fieldEditorConfiguration.isButtonInput($ctrl.fieldData))' on-change='$ctrl.onChange(value)' on-edit-link='$ctrl.onLinkItemEdit(buttonNumber)' on-toggle='$ctrl.onMaskChange(visibility)'></button-field-editor>\n<media-editor active='$ctrl.field.active' adi-automation='{{::$ctrl.getAutomationLabel()}}' content-element='$ctrl.field.contentElement' data-hook='media-editor' field='$ctrl.field' media-tooltip='{{$ctrl.isInMobileEditMode ? &quot;mobile_media_edit_disabled&quot; : null}}' media='$ctrl.fieldData.value' ng-if='::$ctrl.fieldEditorConfiguration.isMedia($ctrl.fieldData)' node='$ctrl.node' on-media-change='$ctrl.onChange(value, richText, whatChanged)' on-toggle='$ctrl.onMaskChange(visibility)' on-tooltip-link-click='$ctrl.goToDesktopContentPanel()' toggle-disabled='$ctrl.mediaToggleDisabled || $ctrl.toggleDisabled'></media-editor>\n<c8b-label-graphic active='$ctrl.field.active' adi-automation='{{::$ctrl.getAutomationLabel()}}' data-hook='social-buttons' disable-toggle='$ctrl.toggleDisabled' help-tooltip='{{::$ctrl.fieldData.helpTooltip}}' item-validator='$ctrl.socialLinksValidator.validateSocialLink(item)' items='$ctrl.socialItems' label='{{::&#39;builder.field-editor.social-title&#39; | translate }}' ng-if='::$ctrl.fieldEditorConfiguration.isSocialInput($ctrl.fieldData)' on-item-click='$ctrl.onSocialItemClick()' on-toggle='$ctrl.onMaskChange(visibility)' paragraph='::$ctrl.socialButtonsParagraph()' show-validation='true' validation-tooltip='social_validation'></c8b-label-graphic>\n<c19-toggle adi-automation='{{::$ctrl.getAutomationLabel()}}' data-hook='field-toggle' disable-toggle='$ctrl.toggleDisabled' help-tooltip='{{::$ctrl.fieldData.helpTooltip}}' label='{{::$ctrl.fieldTitle}}' ng-if='::$ctrl.fieldEditorConfiguration.isBoolean($ctrl.fieldData)' on-value-change='$ctrl.onMaskChange(value)' type='{{::$ctrl.fieldEditorConfiguration.isCheckbox($ctrl.fieldData) ? ($ctrl.isInMobileEditMode ? &#39;c19m&#39; : &#39;c19b&#39;) : &#39;c19a&#39; }}' value='$ctrl.field.active'></c19-toggle>\n<c2-text-input data-hook='field-text-secondary-input' disable-toggle='true' is-disabled='true' mobile='true' ng-if='$ctrl.field.active' ng-repeat='extraValue in $ctrl.getExtraTextInputValues($ctrl.fieldData)' no-header='true' value-tooltip='mobile_text_field_disabled' value='::$ctrl.getTextValue(extraValue)'></c2-text-input>\n<div class='error c11-paragraph' data-hook='email-invalid-error' ng-if='$ctrl.field.active &amp;&amp; !$ctrl.isValid &amp;&amp; !!$ctrl.errorMessage'>{{ $ctrl.errorMessage }}</div>\n<div class='login-field-container' data-hook='field-login' ng-if='::$ctrl.shouldShowLoginField()'>\n<div class='login-field-elements'>\n<p6-control-header class='login-field-label' help-tooltip='members-area.field-editor.button' hide-toggle-button='true' label='::$ctrl.fieldTitle' show-help-button='true'></p6-control-header>\n<button class='-controlbtn p9a-secondary edit-button' ng-click='$ctrl.openLoginBarPanel()'>{{::'members-area.edit-field.button-label' | translate }}</button>\n</div>\n<p17-divider></p17-divider>\n</div>\n</div>\n"},function(e,t){e.exports="<md-dialog aria-describedby='galleries' aria-label='Galleries' class='cc-md-dialog gallery-picker md-transition-in' role='dialog' tabindex='-1'>\n<div class='gallery-picker-container cc-container'>\n<p16-panel-header label='{{::&#39;general.galleries&#39; | translate }}' on-close='onSelect()' show-close-button='true'></p16-panel-header>\n<div class='gallery-picker-list'>\n<div class='gallery-picker-list-item {{item.cssKey}}' ng-class='{selected: item.selected}' ng-click='onSelect(item)' ng-repeat='item in galleries'>\n<div class='gallery-picker-list-item-name p8-label'>{{getDisplayName(item)}}</div>\n</div>\n</div>\n</div>\n</md-dialog>\n"},function(e,t){e.exports="<div class='go-to-editor-popup'>\n<div class='go-to-editor-popup-close'>\n<i class='cc-icon-close-24' data-hook='close-button' ng-click='$ctrl.cancel()'></i>\n</div>\n<div class='go-to-editor-popup-content'>\n<div class='go-to-editor-popup-title' data-hook='title'>\n{{:: 'go-to-editor-popup.title' | translate}}\n</div>\n<div class='go-to-editor-popup-list-editor-features'>\n<div class='go-to-editor-popup-editor-feature'>\n<div class='go-to-editor-popup-editor-feature-circle'></div>\n<div class='go-to-editor-popup-editor-feature-content' data-hook='editor-feature1'>\n{{:: 'go-to-editor-popup.editor-feature1' | translate}}\n</div>\n</div>\n<div class='go-to-editor-popup-editor-feature'>\n<div class='go-to-editor-popup-editor-feature-circle'></div>\n<div class='go-to-editor-popup-editor-feature-content' data-hook='editor-feature2'>\n{{:: 'go-to-editor-popup.editor-feature2' | translate}}\n</div>\n</div>\n<div class='go-to-editor-popup-editor-feature'>\n<div class='go-to-editor-popup-editor-feature-circle'></div>\n<div class='go-to-editor-popup-editor-feature-content' data-hook='editor-feature3'>\n{{:: 'go-to-editor-popup.editor-feature3' | translate}}\n</div>\n</div>\n<div class='go-to-editor-popup-editor-feature'>\n<div class='go-to-editor-popup-editor-feature-circle'></div>\n<div class='go-to-editor-popup-editor-feature-content' data-hook='editor-feature4'>\n{{:: 'go-to-editor-popup.editor-feature4' | translate}}\n</div>\n</div>\n</div>\n<div class='divider-wrapper'>\n<p17-divider></p17-divider>\n</div>\n<div class='go-to-editor-popup-warning' data-hook='warning'>\n<i class='cc-icon-info go-to-editor-popup-warning-icon'></i>\n<div class='go-to-editor-popup-warning-text'>\n{{:: 'go-to-editor-popup.warning' | translate}}\n</div>\n</div>\n<div class='go-to-editor-popup-list-action-buttons'>\n<div class='go-to-editor-popup-action-button-wrapper'>\n<div class='go-to-editor-popup-action-button p9-primary' data-hook='cancel-button' ng-click='$ctrl.cancel()'>\n{{:: 'go-to-editor-popup.cancel' | translate}}\n</div>\n</div>\n<div class='go-to-editor-popup-action-button-wrapper'>\n<div class='go-to-editor-popup-action-button p9a-secondary' data-hook='go-to-editor-button' ng-click='$ctrl.handleGoToEditor()'>\n{{:: 'go-to-editor-popup.go-to-editor' | translate}}\n</div>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='goto-editor'>\n<div class='side-image'>\n<figure class='image-container'>\n<img relative-src='images/popups/goto-editor/header.png'>\n<video autoplay loop ng-attr-poster='{{$ctrl.wixAngularTopology.staticsUrl + &#39;/images/popups/goto-editor/fallback-still.png&#39;}}' ng-attr-src='{{$ctrl.wixAngularTopology.staticsUrl + &#39;/videos/popups/goto-editor/Editor_anim.mp4&#39;}}'></video>\n<img relative-src='images/popups/goto-editor/map.png'>\n</figure>\n</div>\n<div class='content'>\n<button class='cc-icon-close-24 close-button' ng-click='$ctrl.cancel()'></button>\n<h1 class='cc-popup-heading'>{{::'popups.change-to-editor.title' | translate }}</h1>\n<p class='cc-popup-text subtitle'>{{::'popups.change-to-editor.subtitle' | translate }}</p>\n<ul class='features'>\n<li class='feature'>\n<span>{{::'popups.change-to-editor.bullets.1' | translate }}</span>\n</li>\n<li class='feature'>\n<span>{{::'popups.change-to-editor.bullets.2-new' | translate }}</span>\n</li>\n<li class='feature'>\n<span>{{::'popups.change-to-editor.bullets.3-new' | translate }}</span>\n</li>\n</ul>\n<div class='notification'>\n<i class='cc-icon-info'></i>\n<p class='cc-popup-text'>{{::'popups.change-to-editor.warning-new' | translate }}</p>\n</div><button class='p9a-secondary cc-x-height -inverse' ng-click='$ctrl.cancel()'>{{::'popups.change-to-editor.cancel' | translate }}</button><button class='cc-popup-accept p9-primary cc-x-height' ng-click='$ctrl.goToEditor()'>{{::'popups.change-to-editor.go-to-editor' | translate }}</button></div>\n</div>\n"},function(e,t){e.exports="<md-dialog class='cc-md-dialog md-transition-in' role='dialog'>\n<div class='cc-generic-popup'>\n<h2 class='cc-popup-heading'>{{heading}}</h2>\n<p class='cc-popup-text'>{{ text }}</p>\n<button class='cc-popup-accept p9-primary -medium' ng-click='hide()'>Ok</button>\n<button class='p9b-text-button -medium' ng-click='cancel()' ng-if='showCancelButton'>Cancel</button>\n</div>\n</md-dialog>\n"},function(e,t){e.exports="<div class='image-positions-control'>\n<p6-control-header active='true' class='image-position-label' hide-toggle-button='true' label='$ctrl.getLabelTitle()'></p6-control-header>\n<image-positions on-alignment-changed='$ctrl.onAlignmentChanged({value})' selected-position-image='{{$ctrl.selectedPositionImage}}' selected-position-index='{{$ctrl.selectedPositionIndex}}' selected-position-name='{{$ctrl.selectedPositionName}}'></image-positions>\n<p17-divider></p17-divider>\n</div>\n"},function(e,t){e.exports="<div class='image-position-toggle' data-hook='image-position-toggle' ng-click='$ctrl.toggleDropDown()'>\n<span>\n<cc-svg-icon class='selected-icon' data-hook='selected-icon' icon='{{ $ctrl.selectedPositionImage }}' is-corner-icon='true'></cc-svg-icon>\n</span>\n<span class='position-name capitalize'>{{ $ctrl.selectedPositionName }}</span>\n<p6-control-header class='animation-panel-label' hide-toggle-button='true'></p6-control-header>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n</div>\n<div class='background-settings p4-action-menu image-positions' ng-show='$ctrl.isShowDropDown()'>\n<c26-image-position body='{{:: $ctrl.getHeaderBody()}}' footer-content-text='{{:: $ctrl.getFooterTextForParallax()}}' footer-link='$ctrl.goToPreview()' header-title='{{ $ctrl.getHeaderTitle()}}' on-close='$ctrl.hideDropDown()' on-position-clicked='$ctrl.positionClicked({index})' rectangles-count-each-row='3' rectangles-count='9' selected-rectangle='{{ $ctrl.selectedPositionIndex}}' show-footer='$ctrl.shouldShowParallaxParagraph'></c26-image-position>\n</div>\n"},function(e,t){e.exports="<div class='link-details-document-inner'>\n<div class='no-file' data-hook='no-file-section' ng-if='!$ctrl.hasFile'>\n<div class='document-placeholder'></div>\n</div>\n<div class='replace-file-section' data-hook='replace-file-section' ng-if='$ctrl.hasFile'>\n<div class='p8-label'>{{::'link-details.document.text' | translate}}</div>\n<div class='file-name-label' data-hook='file-name-label' ng-bind='$ctrl.draft.name'></div>\n</div>\n<div class='open-file-button-wrapper' ng-class='{&#39;has-file&#39;: $ctrl.hasFile}'>\n<button class='p9a-secondary -medium cc-x-height' data-hook='open-file-button' ng-click='$ctrl.openFileDialog()'>\n<div class='cc-x-height'>{{:: $ctrl.file ? 'link-details.document.replace-file.button' : 'link-details.document.select-file.button' | translate}}</div>\n</button>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='link-details-paypal'>\n<c2-text-input adi-automation='email-input' data-hook='email' disable-toggle='true' label='{{::&#39;link-details.paypal.email.label&#39; | translate}}' placeholder='::&#39;link-details.paypal.email.placeholder&#39; | translate' value='$ctrl.link.email'></c2-text-input>\n<c19-toggle adi-automation='fixed-amount-toggle' data-hook='fixed-amount-toggle' help-tooltip='{{$ctrl.fixedAmountTooltip}}' label='{{::&#39;link-details.paypal.toggle.label&#39; | translate}}' on-value-change='$ctrl.fixedAmountChanged(value)' show-help-button='true' value='$ctrl.link.fixedAmount'></c19-toggle>\n<div class='fix-amount-panel' data-hook='fix-amount-panel'>\n<div class='currency-wrapper' data-hook='currency-wrapper'>\n<c3-dropdown-list automation='currency' data-hook='currency' disable-toggle='true' items='$ctrl.items' label-key='label' label='{{::&#39;link-details.paypal.currency.label&#39; | translate}}' on-selection-change='$ctrl.changeCurrency(item.key)' value='$ctrl.selectedCurrency'></c3-dropdown-list>\n</div>\n<div class='amount-wrapper'>\n<c2-text-input adi-automation='amount-input' data-hook='amount-input' disable-toggle='true' label='{{::&#39;link-details.paypal.amount.label&#39; | translate}}' ng-if='$ctrl.link.fixedAmount' type='number' value='$ctrl.link.amount'></c2-text-input>\n</div>\n</div>\n<div class='validation-message' data-hook='validation-message' ng-if='$ctrl.validationMessage'>{{ $ctrl.validationMessage |  translate}}</div>\n</div>\n"},function(e,t){e.exports="<div class='ld-wrapper'>\n<div class='ld-left-panel'>\n<div class='cc-link-details-left-container'>\n<p13-radio-buttons data-hook='link-type-radio' items='$ctrl.linkOptions' on-value-change='$ctrl.currentLinkType=value;$ctrl.onLinkOptionChanged();' value='$ctrl.currentLinkType'></p13-radio-buttons>\n</div>\n</div>\n<p17-vertical-divider></p17-vertical-divider>\n<div class='ld-right-panel'>\n<div class='details'>\n<div class='none' data-hook='none-section' ng-if='$ctrl.isOptionNone'>\n<div class='none-placeholder'></div>\n<div class='none-text'>{{::'link-details.none.text' | translate}}</div>\n</div>\n<div class='page' data-hook='page-section' ng-if='$ctrl.isOptionPage'>\n<div ng-if='$ctrl.pages.length &gt; 1'>\n<c3-dropdown-list data-hook='pages-dropdown' disable-toggle='true' items='$ctrl.pages' label-key='displayName' label='{{::&quot;link-details.page.select-page.text&quot; | translate}}' on-selection-change='$ctrl.onPageSelectionChanged(item)' track-by-key='id' value='$ctrl.currentPage'></c3-dropdown-list>\n</div>\n<c3-dropdown-list data-hook='anchors-dropdown' disable-toggle='true' items='$ctrl.anchors' label-key='alias' label='{{::&quot;link-details.page.select-anchor.text&quot; | translate}}' on-selection-change='$ctrl.onAnchorSelectionChanged(item)' track-by-key='$$hashKey' value='$ctrl.currentAnchor'></c3-dropdown-list>\n</div>\n<div class='web' data-hook='web-section' ng-if='$ctrl.isOptionWeb'>\n<c2-text-input data-hook='web-text-input' disable-toggle='true' is-disabled='false' label='{{::&quot;link-details.web.text&quot; | translate}}' on-change-value='$ctrl.draft.targetUrl=value;$ctrl.validate()' placeholder='::&quot;link-details.web.placeholder&quot; | translate' value='$ctrl.draft.targetUrl'></c2-text-input>\n<div class='validation-message' ng-if='!$ctrl.isValid'>{{::'link-details.web.error' |  translate}}</div>\n</div>\n<div class='document' data-hook='document-section' ng-if='$ctrl.isOptionDocument'>\n<link-details-document file='$ctrl.draft.file' on-file-change='$ctrl.onFileChange(result)'></link-details-document>\n</div>\n<div class='email' data-hook='email-section' ng-if='$ctrl.isOptionEmail'>\n<c2-text-input data-hook='email-text-input' disable-toggle='true' is-disabled='false' label='{{::&quot;link-details.email.text&quot; | translate}}' on-change-value='$ctrl.draft.targetEmail=value;$ctrl.validate()' placeholder='::&quot;link-details.email.placeholder&quot; | translate' value='$ctrl.draft.targetEmail'></c2-text-input>\n<div class='validation-message' ng-if='!$ctrl.isValid'>{{::'link-details.email.error' |  translate}}</div>\n</div>\n<div class='phone' data-hook='phone-section' ng-if='$ctrl.isOptionPhone'>\n<c2-text-input data-hook='phone-text-input' disable-toggle='true' is-disabled='false' label='{{::&quot;link-details.phone.text&quot; | translate }}' placeholder='::&quot;link-details.phone.placeholder&quot; | translate' value='$ctrl.draft.targetPhone'></c2-text-input>\n<div class='validation-message' ng-if='!$ctrl.isValid'>{{::'link-details.phone.error' |  translate}}</div>\n</div>\n<span class='info-text' ng-if='$ctrl.isOptionPhone'>\n<c11-paragraph class='info-text' html='::&quot;link-details.phone.help.text&quot; | translate'></c11-paragraph>\n<button class='p9b-text-button -small' ng-click='$ctrl.openPhoneHelp()'>{{::'link-details.phone.help.cta' | translate}}</button>\n</span>\n<div class='paypal' data-hook='paypal-section' ng-if='$ctrl.isOptionPaypal'>\n<link-details-paypal link='$ctrl.draft.paypal'></link-details-paypal>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<cc-panel-frame class='link-editor-panel' data-hook='link-details' label='{{::&#39;link-details.dialog.header&#39; | translate}}' on-close='$ctrl.close()' on-help='$ctrl.help()' show-close-button='true' show-help-button='true'>\n<link-details-holder>\n<div class='cc-link-details-divider'></div>\n<link-details is-valid='$ctrl.isValid' node='$ctrl.node' value='$ctrl.linkDetails'></link-details>\n<div class='cc-link-details-divider'></div>\n<div class='ld-actions-row'>\n<button adi-automation='{{::&#39;link-details.dialog.cancel&#39; | translate}}' class='p9b-text-button -medium' data-hook='link-editor-cancel' ng-click='$ctrl.close()'>\n{{::'link-details.dialog.cancel' | translate}}\n</button>\n<button adi-automation='{{::&#39;link-details.dialog.ok&#39; | translate}}' class='ld-accept p9-primary -medium' data-hook='link-editor-done' ng-class='{&#39;-disabled&#39;: !$ctrl.isValid }' ng-click='$ctrl.save()' ng-disabled='!$ctrl.isValid'>\n<span class='cc-x-height'>\n{{::'link-details.dialog.ok' | translate}}\n</span>\n</button>\n</div>\n</link-details-holder>\n</cc-panel-frame>\n"},function(e,t){e.exports="<div class='simple-overlay panel-frame-zIndex' ng-if='$ctrl.flags.largerStage &amp;&amp; $ctrl.stateIsChangeHeight()'></div>\n<cc-panel-frame data-hook='panel-frame' label='{{::$ctrl.title}}' ng-class='{&#39;small-margin&#39;: $ctrl.applicationState.isInMobileEditMode(), &#39;-with-p16a-header -with-corners&#39;: $ctrl.flags.cardsToPanels, &#39;-with-panel-message&#39;: $ctrl.showPanelMessage()}' on-close='$ctrl.closeListPanel()' on-help='$ctrl.flags.cardsToPanels ? $ctrl.bOnHelp() : $ctrl.openListPanelHelp()' on-return='$ctrl.onReturn()' show-close-button='true' show-footer='$ctrl.showPanelMessage()' show-help-button='true' show-nested='$ctrl.showNested' show-return-button='$ctrl.flags.cardsToPanels &amp;&amp; !!$ctrl.editedNode'>\n<cc-panel-body>\n<design-control data-hook='list-design-control' ng-if='$ctrl.flags.largerStage'></design-control>\n<name-in-menu-editor adi-automation='show-name' data-hook='name-in-menu-editor' ng-if='$ctrl.showNameInMenuEditor()' node='$ctrl.node'></name-in-menu-editor>\n<content-element-editor data-hook='list-header' index='0' is-item='false' ng-if='$ctrl.showHeader' node='$ctrl.header' on-any-field-toggle='$ctrl.onAnyFieldToggle()'></content-element-editor>\n<c6-list data-hook='list' disable-list-link='$ctrl.applicationState.isInMobileEditMode()' enable-delete-on-single-item='true' help-tooltip='slideshow-transition-help' item-type='{{$ctrl.applicationState.isInMobileEditMode() ? &#39;p10m&#39; : &#39;&#39;}}' items='$ctrl.listItems' label='{{ ::$ctrl.getListItemsLabel()}}' on-add-new='$ctrl.onAdd()' on-delete='$ctrl.onDelete(item)' on-duplicate='$ctrl.onDuplicate(item)' on-edit='$ctrl.onEdit(item)' on-item-click='$ctrl.onItemClick(item)' on-item-double-click='$ctrl.onItemDoubleClick(item)' on-item-to-page='$ctrl.itemToPage(item)' on-order-change='$ctrl.onOrderChange(event)' on-toggle='$ctrl.onToggle(item)' override-label='::$ctrl.getOverrideLabel()' show-help-button='$ctrl.isShowSlideShowTooltip()'></c6-list>\n<content-element-editor data-hook='list-footer' index='0' is-item='false' ng-if='$ctrl.showFooter' node='$ctrl.footer' on-any-element-toggle='$ctrl.onAnyFieldToggle()'></content-element-editor>\n<div class='extra-margin-bottom' ng-if='$ctrl.applicationState.isInMobileEditMode()'></div>\n</cc-panel-body>\n<cc-panel-nested ng-if='$ctrl.flags.cardsToPanels'>\n<single-panel is-item='true' ng-if='!!$ctrl.editedNode' node='$ctrl.editedNode' on-item-to-page='$ctrl.onItemToPage($ctrl.editedNode)'></single-panel>\n<media-settings-panel-new data-hook='media-settings-panel' ng-if='$ctrl.shouldShowMediaSettings()'></media-settings-panel-new>\n<switch-color data-hook='switch-color' ng-if='$ctrl.flags.largerStage &amp;&amp; $ctrl.applicationState.isInSectionColorPanel()'></switch-color>\n<section-font-panel data-hook='section-font-panel' ng-if='$ctrl.flags.largerStage &amp;&amp; $ctrl.applicationState.isInSectionFontPanel()'></section-font-panel>\n<section-animation-panel data-hook='section-animation-panel' ng-if='$ctrl.flags.largerStage &amp;&amp; $ctrl.applicationState.isInSectionAnimationPanel()'></section-animation-panel>\n<slideshow-animation-panel data-hook='slideshow-animation-panel' ng-if='$ctrl.flags.largerStage &amp;&amp; $ctrl.applicationState.isInSlideShowAnimationPanel()'></slideshow-animation-panel>\n</cc-panel-nested>\n<cc-panel-footer>\n<panel-message class='content-panel-mobile-message panel-icon' data-hook='panel-message'>\n<div class='cc-icon-mobile-edit-notice'></div>\n{{::'builder.mobile-panel-edit-notice' | translate}}\n</panel-message>\n</cc-panel-footer>\n</cc-panel-frame>\n<panel-message class='content-panel-mobile-message panel-icon' data-hook='panel-message' ng-if='!$ctrl.flags.cardsToPanels &amp;&amp; $ctrl.applicationState.isInMobileEditMode()'>\n<div class='cc-icon-mobile-edit-notice'></div>\n{{::'builder.mobile-panel-edit-notice' | translate}}\n</panel-message>\n"},function(e,t){e.exports="<cc-panel-frame class='signup-panel -with-p16a-header -with-corners' on-close='$ctrl.closePanel()' on-help='$ctrl.onHelp()' show-close-button='true' show-content-delay='100' show-header='false' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<p16-panel-header label='{{:: &#39;members-area.login-bar-panel.title&#39; | translate}}'></p16-panel-header>\n<c11-paragraph html=':: &#39;members-area.login-bar-panel.description&#39; | translate'></c11-paragraph>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<c3-dropdown-list disable-toggle='true' items='$ctrl.showOptions' label-key='label' label='{{:: &#39;members-area.login-bar-panel.login-bar-show.label&#39; | translate}}' track-by-key='value' value='$ctrl.showValue'></c3-dropdown-list>\n<c3-dropdown-list disable-toggle='true' items='$ctrl.additionalTextOptions' label-key='label' label='{{:: &#39;members-area.login-bar-panel.additional-text.label&#39; | translate}}' ng-if='$ctrl.hasAdditionalText' track-by-key='value' value='$ctrl.additionalTextValue'></c3-dropdown-list>\n</cc-panel-body>\n<cc-panel-footer>\n<button class='cc-x-height p9a-secondary -inverse add-page-button' ng-click='$ctrl.openSignupSettings()'>\n<span class='cc-x-height'>{{::'members-area.login-bar-panel.signup-settings-button.label' | translate}}</span>\n</button>\n</cc-panel-footer>\n</cc-panel-frame>\n"},function(e,t){e.exports="<c4-media-preview active='$ctrl.active' current-tab='$ctrl.currentTab' data-hook='media-preview' disable-media-change-button='$ctrl.disableMediaChangeButton' disable-toggle='$ctrl.isToggleDisabled()' dont-crop-toggle-text='{{::&#39;editor.media-settings.ms-options.uncropped&#39; | translate}}' dont-crop='$ctrl.imageFitMode' image-crop='$ctrl.isImageCropEnabled' label='{{ $ctrl.label }}' media-tooltip='{{$ctrl.mediaTooltip}}' media='$ctrl.media' ng-if='!$ctrl.showNewMediaControl()' on-change-gallery='$ctrl.changeGallery()' on-crop='$ctrl.openCropper()' on-dont-crop-change='$ctrl.onDontCropChange(value)' on-info='!$ctrl.disableMediaChangeButton &amp;&amp; $ctrl.openSettingsPanel()' on-media-change='$ctrl.mediaChange(mediaType)' on-media-type-change='$ctrl.mediaTypeChange(mediaType)' on-toggle='$ctrl.toggle(visibility)' on-tooltip-link-click='$ctrl.onTooltipLinkClick()' show-dont-crop='$ctrl.flags.sectionMedia &amp;&amp; !$ctrl.applicationState.isInMobileEditMode() &amp;&amp; !$ctrl.node.isListHeader()' tab-labels='$ctrl.tabLabels' type='{{::$ctrl.isInMobileEditMode ? &#39;c4m&#39; : &#39;c4&#39; }}' visible-tabs='$ctrl.visibleMediaTypes'></c4-media-preview>\n<c3-dropdown-list data-hook='aligment-dropdown' disable-toggle='true' items='$ctrl.imageAlignmentOptions' label-key='label' label='{{::&#39;builder.media-editor.image-position.title&#39; | translate}}' ng-if='$ctrl.canChangeAlignment() &amp;&amp; !$ctrl.showNewMediaControl()' on-selection-change='$ctrl.onAlignmentChange(item)' track-by-key='value' value='$ctrl.selectedImageAlignment'></c3-dropdown-list>\n<c24-media-preview active='$ctrl.active' current-media='$ctrl.currentMedia' current-tab='$ctrl.currentTab' customize-button-text='{{::&#39;builder.media-editor.edit-replace-button&#39; | translate}}' data-hook='new-media-preview' disable-media-change-button='$ctrl.disableMediaChangeButton' disable-toggle='$ctrl.isToggleDisabled()' label='{{::$ctrl.label}}' ng-if='$ctrl.showNewMediaControl()' on-change-gallery='$ctrl.changeGallery()' on-customize='$ctrl.onReplace()' on-media-change='$ctrl.mediaChange(mediaType)' on-toggle='$ctrl.toggle(visibility)' replace-button-text='{{::&#39;general.replace&#39; | translate}}' show-customize='true' show-header='true' show-tabs='false' size='{{$ctrl.flags.cardsToPanels ? &#39;big&#39; : &#39;small&#39;}}'></c24-media-preview>\n<div class='c11-paragraph style-d' ng-if='$ctrl.hasZeroOpacity()'>\n<p class='c11-paragraph'>\n<span compile='$ctrl.$translate.instant(&#39;builder.media-editor.opacity-warning&#39;)' data-hook='opacity-warning'></span>\n</p>\n</div>\n"},function(e,t){e.exports="<cc-panel-frame class='media-settings-panel' data-hook='settings-panel-frame' label='{{$ctrl.title}}' ng-class='{&#39;-with-p16a-header&#39;: $ctrl.flags.cardsToPanels}' on-close='$ctrl.closeMediaSettingsPanel()' on-help='$ctrl.openMediaSettingsPanelHelp()' on-return='$ctrl.onReturn()' show-close-button='true' show-help-button='true' show-return-button='$ctrl.flags.cardsToPanels'>\n<c4-media-preview current-tab='$ctrl.mediaType' data-hook='settings-media-preview' disable-media-change-button='$ctrl.disableMediaChangeButton' image-crop='false' media='$ctrl.mediaValues' on-media-change='$ctrl.changeMedia()' replace-button-text='{{$ctrl.changeButtonText}}' show-tabs='false' visible-tabs='$ctrl.mediaPreviewTypes'></c4-media-preview>\n<c3-dropdown-list disable-toggle='true' items='$ctrl.imageAlignmentOptions' label-key='label' label='{{::&#39;editor.media-settings.image-position.title&#39; | translate}}' ng-if='$ctrl.canChangeAlignment()' on-selection-change='$ctrl.onAlignmentChange(item)' track-by-key='value' value='$ctrl.selectedImageAlignment'></c3-dropdown-list>\n<c2-text-input change-value-on-blur='true' class='is-image-panel' data-hook='settings-media-title' debounce-delay='1000' disable-toggle='true' label='{{::&#39;editor.media-settings.media-title.title&#39; | translate}}' ng-if='$ctrl.mediaType !== $ctrl.mediaTypes.Video &amp;&amp; $ctrl.mediaType !== $ctrl.mediaTypes.ExtVideo' on-change-value='$ctrl.onChangeMediaTitle(value)' placeholder=':: &#39;editor.media-settings.title-placeholder&#39; | translate' value='$ctrl.mediaValue.Title'></c2-text-input>\n<c2-text-input change-value-on-blur='true' class='is-bg-video-panel' data-hook='settings-media-title' disable-toggle='true' label='{{::&#39;editor.media-settings.media-title.title&#39; | translate}}' ng-if='$ctrl.mediaType === $ctrl.mediaTypes.Video' on-change-value='$ctrl.onChangeMediaTitle(value)' placeholder=':: &#39;editor.media-settings.title-placeholder&#39; | translate' value='$ctrl.mediaValue.Title'></c2-text-input>\n<c2-text-input change-value-on-blur='true' class='is-image-panel' data-hook='settings-media-description' debounce-delay='1000' disable-toggle='true' label='{{::&#39;editor.media-settings.description.title&#39; | translate}}' long='true' ng-if='$ctrl.mediaType === $ctrl.mediaTypes.SingleImage' on-change-value='$ctrl.onChangeMediaDescription(value)' placeholder=':: &#39;editor.media-settings.description-placeholder&#39; | translate' value='$ctrl.mediaValue.Description'></c2-text-input>\n<c2-text-input change-value-on-blur='true' class='is-bg-video-panel' data-hook='settings-media-description' disable-toggle='true' label='{{::&#39;editor.media-settings.description.title&#39; | translate}}' long='true' ng-if='$ctrl.mediaType === $ctrl.mediaTypes.Video' on-change-value='$ctrl.onChangeMediaDescription(value)' placeholder=':: &#39;editor.media-settings.description-placeholder&#39; | translate' value='$ctrl.mediaValue.Description'></c2-text-input>\n<c5-link-input class='is-image-panel' data-hook='settings-media-title' disable-toggle='true' label='link' link='$ctrl.linkAsILink' ng-if='$ctrl.mediaType === $ctrl.mediaTypes.SingleImage' on-edit-link='$ctrl.changeLink()'></c5-link-input>\n<c5-link-input class='is-bg-video-panel' data-hook='settings-media-title' disable-toggle='true' label='link' link='$ctrl.linkAsILink' ng-if='$ctrl.mediaType === $ctrl.mediaTypes.Video' on-edit-link='$ctrl.changeLink()'></c5-link-input>\n<c5-link-input class='is-shape-panel' data-hook='settings-media-title' disable-toggle='true' label='link' link='$ctrl.linkAsILink' ng-if='$ctrl.mediaType === $ctrl.mediaTypes.Shape' on-edit-link='$ctrl.changeLink()'></c5-link-input>\n<c5-link-input class='is-clipart-panel' data-hook='settings-media-title' disable-toggle='true' label='link' link='$ctrl.linkAsILink' ng-if='$ctrl.mediaType === $ctrl.mediaTypes.Clipart' on-edit-link='$ctrl.changeLink()'></c5-link-input>\n<c2-text-input adi-automation='media-settings-video-url' change-value-on-blur='true' class='is-video-panel' data-hook='settings-media-url' disable-toggle='true' label='{{&#39;editor.media-settings.video-url.title&#39; | translate}}' ng-if='$ctrl.mediaType === $ctrl.mediaTypes.ExtVideo' on-blur='$ctrl.changeVideoUrl(value, true)' on-change-value='$ctrl.changeVideoUrl(value)' placeholder='&#39;Set link to your video&#39;' value='$ctrl.mediaValue.videoUrl'></c2-text-input>\n<c19-toggle adi-automation='media-settings-autoplay' class='is-video-panel' label='{{&#39;editor.media-settings.autoplay.title&#39; | translate}}' ng-if='$ctrl.mediaType === $ctrl.mediaTypes.ExtVideo' on-value-change='$ctrl.handleVideoSettingsChanged(value)' type='c19a' value='$ctrl.mediaValue.playmode.autoplay'></c19-toggle>\n<c19-toggle adi-automation='media-settings-play-in-loop' class='is-video-panel' label='{{&#39;editor.media-settings.loop.title&#39; | translate}}' ng-if='$ctrl.mediaType === $ctrl.mediaTypes.ExtVideo' on-value-change='$ctrl.handleVideoSettingsChanged(value)' type='c19a' value='$ctrl.mediaValue.playmode.loop'></c19-toggle>\n<c3-dropdown-list adi-automation='media-settings-video-controls' automation='media-settings-video' disable-toggle='true' items='$ctrl.videoControlOptions' label-key='label' label='{{&#39;editor.media-settings.show-video-controls.title&#39; | translate}}' ng-if='$ctrl.mediaType === $ctrl.mediaTypes.ExtVideo &amp;&amp; !$ctrl.shouldHideVideoControls()' on-selection-change='$ctrl.changeVideoControlOption(item)' track-by-key='id' value='$ctrl.selectedVideoControlOption'></c3-dropdown-list>\n<button class='p9-primary cc-x-height' ng-click='$ctrl.showFaces()' ng-if='$ctrl.debug'>show faces</button>\n</cc-panel-frame>\n"},function(e,t){e.exports="<div class='ext-video-settings'>\n<c2-text-input adi-automation='media-settings-video-url' change-value-on-blur='true' data-hook='settings-media-url' disable-toggle='true' label='{{:: &#39;editor.media-settings.ext-video.video-url.label&#39; | translate}}' on-blur='$ctrl.changeVideoUrl(value, true)' on-change-value='$ctrl.changeVideoUrl(value)' placeholder='&#39;editor.media-settings.ext-video.video-url.placeholder&#39; | translate' value='$ctrl.mediaValue.videoUrl'></c2-text-input>\n<c19-toggle adi-automation='media-settings-autoplay' label='{{:: &#39;editor.media-settings.ext-video.autoplay.label&#39; | translate }}' on-value-change='$ctrl.handleVideoSettingsChanged(value)' type='c19a' value='$ctrl.mediaValue.playmode.autoplay'></c19-toggle>\n<c19-toggle adi-automation='media-settings-play-in-loop' label='{{:: &#39;editor.media-settings.ext-video.loop.label&#39; | translate }}' on-value-change='$ctrl.handleVideoSettingsChanged(value)' type='c19a' value='$ctrl.mediaValue.playmode.loop'></c19-toggle>\n<c3-dropdown-list automation='media-settings-video-controls' disable-toggle='true' items='$ctrl.videoControlOptions' label-key='label' label='{{:: &#39;editor.media-settings.ext-video.controls.label&#39; | translate }}' ng-if='!$ctrl.shouldHideVideoControls()' on-selection-change='$ctrl.changeVideoControlOption(item)' track-by-key='id' value='$ctrl.selectedVideoControlOption'></c3-dropdown-list>\n</div>\n"},function(e,t){e.exports="<div class='image-focal-point-panel'>\n<div>\n<div cc-tooltip-options='{{:: $ctrl.tooltipOptions}}' cc-tooltip-position='top' cc-tooltip='{{:: $ctrl.tooltipName}}' class='focal-point-drag-handle' ng-mousedown='$ctrl.drag($event)' ng-mouseover='$ctrl.hideTooltip()' ng-mouseup='$ctrl.drop()'></div>\n<img class='focal-point-panel-image' image-load-handler ng-src='{{:: $ctrl.imageUrl}}' on-image-loaded='$ctrl.onImageLoaded()'>\n</div>\n<div class='controls'>\n<button class='p9b-text-button -medium' ng-click='$ctrl.onClose()'>\n{{:: 'general.cancel'|translate}}\n</button>\n<button class='p9-primary -small' ng-click='$ctrl.onDone()'>\n{{:: 'general.done'|translate}}\n</button>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='image-settings'>\n<c2-text-input adi-automation='image-settings-title' change-value-on-blur='true' class='is-image-panel' data-hook='settings-media-title' debounce-delay='1000' disable-toggle='true' label='{{:: &#39;editor.media-settings.title-label&#39; | translate}}' on-change-value='$ctrl.onChangeMediaTitle(value)' placeholder=':: &#39;editor.media-settings.title-placeholder&#39; | translate' value='$ctrl.mediaValue.Title'></c2-text-input>\n<c2-text-input adi-automation='image-settings-description' change-value-on-blur='true' data-hook='settings-media-description' debounce-delay='1000' disable-toggle='true' label='{{:: &#39;editor.media-settings.description-label&#39; | translate}}' long='true' ng-if='$ctrl.showDescription' on-change-value='$ctrl.onChangeMediaDescription(value)' placeholder=':: &#39;editor.media-settings.description-placeholder&#39; | translate' value='$ctrl.mediaValue.Description'></c2-text-input>\n<c5-link-input adi-automation='image-settings-link' data-hook='settings-media-link' disable-toggle='true' label='{{:: &#39;editor.media-settings.link-label&#39; | translate}}' link='$ctrl.linkAsILink' on-edit-link='$ctrl.changeLink()'></c5-link-input>\n</div>\n"},function(e,t){e.exports="<div class='image-upscale-fix-message c11-paragraph style-d' data-hook='image-upscale-fix-message' ng-if='$ctrl.displayFixMessage'>\n<div class='c11-paragraph -content-with-button'>\n<div>\n{{:: 'editor.media-settings.image-upscale-message.fix-title' | translate}}\n</div>\n<button class='p9-primary -controlbtn' data-hook='image-upscale-fix-button' ng-click='$ctrl.changeImageUpscale()'>\n{{:: 'editor.media-settings.image-upscale-message.fix-btn' | translate}}\n</button>\n</div>\n</div>\n<div class='image-upscale-revert-message c11-paragraph style-d' data-hook='image-upscale-revert-message' ng-if='$ctrl.displayRevertMessage'>\n<div class='c11-paragraph -content-with-button'>\n<div>\n{{:: 'editor.media-settings.image-upscale-message.revert-title' | translate}}\n</div>\n<button class='p9-primary -controlbtn' data-hook='image-upscale-revert-button' ng-click='$ctrl.changeImageUpscale()'>\n{{:: 'editor.media-settings.image-upscale-message.revert-btn' | translate}}\n</button>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='media-chooser'>\n<c24-media-preview active='true' color-button-text='{{:: &#39;editor.media-settings.gallery.change-color&#39; | translate}}' current-media='$ctrl.media' current-tab='$ctrl.currentMediaType' data-hook='media-preview' disable-media-change-button='$ctrl.disableMediaChangeButton' label='{{:: &#39;editor.media-settings.media-type&#39; | translate}}' on-color-click='$ctrl.onColorClick()' on-media-change='$ctrl.onReplaceClick(mediaType)' on-media-type-change='$ctrl.onMediaTypeChanged(mediaType)' organize-media-button-text='{{:: &#39;editor.media-settings.gallery.organize-media&#39; | translate}}' replace-button-text='{{::&#39;general.replace&#39; | translate}}' show-header='false' show-tabs='true' size='big' tab-labels='$ctrl.tabLabels' visible-tabs='$ctrl.visibleMediaTypes'></c24-media-preview>\n</div>\n"},function(e,t){e.exports="<c26-image-position body='{{:: &#39;builder.section-background.background-settings.image.body&#39; | translate }}' header-title='{{:: &#39;builder.section-background.background-settings.image.lower-title&#39; | translate }}' on-close='$ctrl.onClose()' on-position-clicked='$ctrl.onSelectedPositionClick(index)' rectangles-count-each-row='3' rectangles-count='9' selected-rectangle='{{$ctrl.selectedPosition}}'></c26-image-position>\n"},function(e,t){e.exports="<cc-panel-frame class='-with-p16a-header -with-corners' label='{{:: &#39;editor.media-settings.title&#39; | translate}}' on-close='$ctrl.closePanel()' on-help='$ctrl.onHelp()' on-return='$ctrl.goToPrevState()' show-close-button='true' show-content-delay='$ctrl.flags.cardsToPanels ? 0 : undefined' show-header='!$ctrl.flags.cardsToPanels' show-help-button='true' show-nested='$ctrl.showNested' show-return-button='true'>\n<cc-panel-fixed-top>\n<p16-panel-header label='{{:: &#39;editor.media-settings.title&#39; | translate}}' ng-if='$ctrl.flags.cardsToPanels'></p16-panel-header>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<media-chooser data-hook='media-chooser' media-size='$ctrl.currentMediaSize' ng-if='$ctrl.node' node='$ctrl.node' on-media-change='$ctrl.onMediaChange()' on-media-type-change='$ctrl.onMediaTypeChange(mediaType)'></media-chooser>\n<image-upscale-status-message data-hook='image-upscale-status-message' ng-if='$ctrl.flags.superRes &amp;&amp; $ctrl.node' node='$ctrl.node'></image-upscale-status-message>\n<c16-slider category-labels='$ctrl.categoryLabels' category-title='{{:: &#39;general.size&#39; | translate }}' clickable-icons='true' data-hook='logo-size-slider' debounce-delay='250' horizontal='true' icon-after='design:logo-resize-big' icon-before='design:logo-resize-small' max='2' min='-2' ng-if='$ctrl.showLogoSize()' on-value-change='$ctrl.onLogoSizeChange(value)' show-divider='true' slider-type='p5a' step='1' stepper='true' value='$ctrl.logoSize'></c16-slider>\n<media-size-dropdown adi-automation='media-size-dropdown-container' automation='media-size' class='media-size-dropdown' data-hook='media-size-dropdown' media-type='$ctrl.currentMediaType' ng-if='$ctrl.node &amp;&amp; $ctrl.showMediaSize()' node='$ctrl.node' on-button-click='$ctrl.onMediaSizeAction(mediaSize)' on-media-size-change='$ctrl.onMediaSizeChange(mediaSize)'></media-size-dropdown>\n<image-settings data-hook='image-settings' media-value='$ctrl.activeMedia' ng-if='$ctrl.showImageSettings()' node='$ctrl.node' show-description='$ctrl.isImageType()'></image-settings>\n<ext-video-settings data-hook='ext-video-settings' media-value='$ctrl.activeMedia' ng-if='$ctrl.showVideoSettings()'></ext-video-settings>\n<c16-slider adi-automation='media-opacity-slider' automation='media-opacity' data-hook='media-opacity-slider' label='{{:: &#39;editor.media-settings.media-opacity.label&#39; | translate}}' max='100' min='0' ng-if='$ctrl.node &amp;&amp; $ctrl.showMediaOpacity()' on-value-change='$ctrl.onMediaOpacityChange(value)' show-divider='true' step='1' stepper='false' value='$ctrl.opacity'></c16-slider>\n<c20-graphic-radio-control class='bg-color-container' data-hook='media-bg-color-palette' label='{{:: &#39;editor.media-settings.media-background.label&#39; | translate}}' ng-if='$ctrl.showMediaBgColor()' on-select='$ctrl.setMediaBgColor(item)' radio-items='$ctrl.colorItems' selected-radio='$ctrl.bgColor' size='small'></c20-graphic-radio-control>\n<div class='c11-paragraph style-d' data-hook='media-bg-warning' ng-if='$ctrl.showMediaBgColor() &amp;&amp; $ctrl.opacity === 100'>\n<p class='c11-paragraph'>\n<span compile=':: &#39;builder.media-editor.media-bg-warning&#39; | translate' data-hook='opacity-warning'></span>\n</p>\n</div>\n<c3-dropdown-list data-hook='scroll-type-dropdown' disable-toggle='true' dont-open-for-one='true' items='$ctrl.scrollTypeOptions' label-key='label' label='{{:: &#39;design.animations.scroll-type.title&#39; | translate}}' ng-if='$ctrl.showScrollEffect()' on-selection-change='$ctrl.setScrollType(item.value)' value='$ctrl.activeScrollType'></c3-dropdown-list>\n</cc-panel-body>\n<cc-panel-nested>\n<section-background-panel data-hook='section-background-panel' ng-if='$ctrl.flags.cardsToPanels &amp;&amp; $ctrl.isMediaTypePattern()'></section-background-panel>\n</cc-panel-nested>\n</cc-panel-frame>\n"},function(e,t){e.exports="<c3-dropdown-list automation='{{$ctrl.automation}}' button-text='$ctrl.mediaSizeButtonText' button-tooltip='$ctrl.mediaSizeButtonTooltip' data-hook='media-size-dropdown-list' disable-toggle='true' dont-open-for-one='true' items='$ctrl.mediaSizeItems' label-key='label' label='{{:: &#39;editor.media-settings.media-size.label&#39; | translate}}' ng-if='$ctrl.mediaSizeItems.length &gt; 0' no-hover='$ctrl.hasSingleOption()' on-button-click='$ctrl.onMediaSizeButtonClick()' on-selection-change='$ctrl.onMediaSizeChanged(item)' show-button='$ctrl.showMediaSizeButton' value='$ctrl.selectedMediaSize'></c3-dropdown-list>\n<c11-paragraph class='c11-paragraph' compile=':: &#39;editor.media-settings.for-more-layouts&#39; | translate' data-hook='paragraph' ng-if='$ctrl.hasSingleOption()'></c11-paragraph>\n"},function(e,t){e.exports="<cc-panel-frame class='signup-panel -with-p16a-header -with-corners' on-close='$ctrl.closePanel()' on-help='$ctrl.onHelp()' on-return='$ctrl.onReturn()' show-close-button='true' show-content-delay='100' show-header='false' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<p16-panel-header label='{{:: &#39;members-area.signup-settings-panel.title&#39; | translate}}'></p16-panel-header>\n<c11-paragraph html=':: &#39;members-area.signup-settings-panel.description&#39; | translate'></c11-paragraph>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<c3-dropdown-list disable-toggle='true' items='$ctrl.whoCanBeMemberOptions' label-key='label' label='{{:: &#39;members-area.signup-settings-panel.who-can-be-member.label&#39; | translate}}' on-selection-change='$ctrl.whoCanBeMemberChange(item.key)' track-by-key='key' value='$ctrl.whoCanBeMember'></c3-dropdown-list>\n<c3-dropdown-list disable-toggle='true' items='$ctrl.showFirstOptions' label-key='label' label='{{:: &#39;members-area.signup-settings-panel.which-option-show-first.label&#39; | translate}}' on-selection-change='$ctrl.whichOptionShowFirstChange(item.key)' track-by-key='key' value='$ctrl.whichOptionShowFirst'></c3-dropdown-list>\n<c6-list class='members-list-items members-signup-margin' item-label-property='label' item-type='p10c' items='$ctrl.loginVendorsListItems' label='{{:: &#39;members-area.signup-settings-panel.allow-social-login.label&#39; | translate}}' on-toggle='$ctrl.onSocialToggle(item)'></c6-list>\n<c5-link-input active='policy.active' class='members-signup-margin' data-hook='link-input-{{policy.key}}' disable-toggle='false' help-tooltip='{{$ctrl.getTooltip(policy.key)}}' hide-link-on-toggle='true' label='{{:: &#39;members-area.signup-settings-panel.&#39; + policy.key + &#39;.label&#39; | translate }}' link='$ctrl.policiesLinks[policy.key]' ng-repeat='policy in $ctrl.policies' on-edit-link='$ctrl.onClickLink(policy.key)' on-toggle='$ctrl.onPolicyToggle(policy.key)' show-help-button='true'></c5-link-input>\n</cc-panel-body>\n</cc-panel-frame>\n"},function(e,t){e.exports="<c2-text-input active='$ctrl.isActive()' change-value-on-blur='true' data-hook='name-in-menu-text-input' dont-auto-toggle-when-empty='true' help-tooltip='section_name_in_menu' label='{{::&#39;builder.section-name-in-menu.title&#39; | translate }}' on-blur='$ctrl.onBlur()' on-change-value='$ctrl.onChangeValue(value)' on-toggle='$ctrl.onToggle()' placeholder='$ctrl.defaultName' show-help-button='true' value='$ctrl.value'></c2-text-input>\n"},function(e,t){e.exports="<div class='node-editor' data-hook='node-editor-wrapper' ng-class='{ &quot;-is-nested-visible&quot;: $ctrl.showNested || $ctrl.showMediaSettings, &quot;-is-subnested-visible&quot;: $ctrl.showNested &amp;&amp; $ctrl.showMediaSettings }' ng-if='::$ctrl.node &amp;&amp; !$ctrl.isTpa()'>\n<single-panel data-hook='single-panel' is-item='false' ng-if='::($ctrl.node &amp;&amp; !$ctrl.isList)' node='$ctrl.node'></single-panel>\n<list-panel data-hook='list-panel' ng-if='::($ctrl.node &amp;&amp; $ctrl.isList)' node='$ctrl.node' on-item-to-page='$ctrl.makeIntoPage()'></list-panel>\n<div class='nested-panel' data-hook='nested-panel' ng-if='$ctrl.showNested &amp;&amp; !$ctrl.flags.cardsToPanels'>\n<single-panel child-id='$ctrl.childId' is-item='true' ng-if='$ctrl.isItemEditor' node='$ctrl.editedNode' on-item-to-page='$ctrl.makeIntoPage($ctrl.editedNode)'></single-panel>\n<social-panel edited-node='$ctrl.editedNode' is-item='false' ng-if='$ctrl.isSocialEditor'></social-panel>\n</div>\n</div>\n<media-settings-panel change='$ctrl.fullUpdateViewer(event)' class='node-editor' close='$ctrl.hideMediaSettingsEditor()' ng-class='{ &quot;-is-third-panel&quot;: $ctrl.showNested }' ng-if='$ctrl.applicationState.isMediaSettingsActive()' node='$ctrl.editedNode || $ctrl.node'></media-settings-panel>\n<div class='node-editor' ng-if='::($ctrl.node &amp;&amp; $ctrl.isTpa())'>\n<tpa-editor data-hook='tpa-editor' ng-class='$ctrl.getNodeTypeForCss()' node='$ctrl.node'></tpa-editor>\n</div>\n<double-spinner ng-if='::($ctrl.flags.removeSpinnerAsStageReady &amp;&amp; !$ctrl.node)'></double-spinner>\n"},function(e,t){e.exports="<div class='simple-overlay panel-frame-zIndex' ng-if='$ctrl.flags.largerStage &amp;&amp; $ctrl.stateIsChangeHeight()'></div>\n<cc-panel-frame data-hook='panel-frame' label='{{$ctrl.title}}' ng-class='{&#39;small-margin&#39;: $ctrl.applicationState.isInMobileEditMode(), &#39;-with-p16a-header -with-corners&#39;: $ctrl.flags.cardsToPanels, &#39;-with-panel-message&#39;: $ctrl.showPanelMessage()}' on-close='$ctrl.closeSinglePanel()' on-help='$ctrl.flags.cardsToPanels ? $ctrl.bOnHelp() : $ctrl.openSinglePanelHelp()' on-return='$ctrl.onReturn()' show-close-button='true' show-content-delay='$ctrl.showContentDelay' show-footer='$ctrl.showFooter()' show-header=':: $ctrl.shouldShowHeader()' show-help-button='true' show-nested='$ctrl.showNested' show-return-button='$ctrl.shouldShowReturn()'>\n<cc-panel-fixed-top ng-if='$ctrl.flags.cardsToPanels &amp;&amp; $ctrl.isItem'>\n<p16-panel-header label='{{::$ctrl.title}}'></p16-panel-header>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<design-control data-hook='design-control' ng-if='$ctrl.flags.largerStage &amp;&amp; !$ctrl.isListItem'></design-control>\n<name-in-menu-editor adi-automation='show-name' data-hook='name-in-menu-editor' ng-if='::$ctrl.showNameInMenuEditor()' node='$ctrl.node'></name-in-menu-editor>\n<content-element-editor child-id=':: $ctrl.childId' data-hook='ce-editor' is-item=':: $ctrl.isItem' ng-if='!$ctrl.flags.headlessApiPerf' node='$ctrl.node' on-item-to-page='$ctrl.onItemToPage()'></content-element-editor>\n<div class='extra-margin-bottom' ng-if='$ctrl.applicationState.isInMobileEditMode()'></div>\n</cc-panel-body>\n<cc-panel-nested ng-if='$ctrl.flags.cardsToPanels &amp;&amp; !$ctrl.applicationState.isInMobileEditMode()'>\n<social-panel edited-node='$ctrl.editedNode' is-item='false' ng-if='$ctrl.editedNode'></social-panel>\n<media-settings-panel-new data-hook='media-settings-panel' ng-if='$ctrl.shouldShowMediaSettings()'></media-settings-panel-new>\n<login-bar-panel data-hook='login-bar-panel' ng-if='$ctrl.shouldShowLoginBar()'></login-bar-panel>\n<switch-color data-hook='switch-color' ng-if='$ctrl.flags.largerStage &amp;&amp; $ctrl.applicationState.isInSectionColorPanel()'></switch-color>\n<section-font-panel data-hook='section-font-panel' ng-if='$ctrl.flags.largerStage &amp;&amp; $ctrl.applicationState.isInSectionFontPanel()'></section-font-panel>\n<section-animation-panel data-hook='section-animation-panel' ng-if='$ctrl.flags.largerStage &amp;&amp; $ctrl.applicationState.isInSectionAnimationPanel()'></section-animation-panel>\n<slideshow-animation-panel data-hook='slideshow-animation-panel' ng-if='$ctrl.flags.largerStage &amp;&amp; $ctrl.applicationState.isInSlideShowAnimationPanel()'></slideshow-animation-panel>\n</cc-panel-nested>\n<cc-panel-footer ng-class='{&#39;item-footer&#39;: $ctrl.isItem}'>\n<c10-item-navigation count='$ctrl.totalItems' current='$ctrl.currentItem' next-tooltip='next_item' ng-if='$ctrl.isItem' previous-tooltip='previous_item'></c10-item-navigation>\n<panel-message class='content-panel-mobile-message panel-icon' data-hook='panel-message' ng-if='$ctrl.showPanelMessage()'>\n<div class='cc-icon-mobile-edit-notice'></div>\n{{::'builder.mobile-panel-edit-notice' | translate}}\n</panel-message>\n</cc-panel-footer>\n</cc-panel-frame>\n<panel-message class='content-panel-mobile-message panel-icon' data-hook='panel-message' ng-if='!$ctrl.flags.cardsToPanels &amp;&amp; $ctrl.applicationState.isInMobileEditMode() &amp;&amp; !$ctrl.isNested'>\n<div class='cc-icon-mobile-edit-notice'></div>\n{{::'builder.mobile-panel-edit-notice' | translate}}\n</panel-message>\n"},function(e,t){e.exports="<div class='overlay-slides-navigation segment-slides-navigation' ng-click='$event.stopPropagation();' ng-if='$ctrl.isShowOverlay()'>\n<div class='cc-aux-menu -left'>\n<button adi-automation='slideshow navigation left' class='cc-aux-btn' ng-click='$ctrl.navigateInSlides($event, $ctrl.prevSlide)'>\n<i class='cc-icon-arrow-left'></i>\n</button>\n</div>\n<span>{{$ctrl.getNavigationMessage()}}</span>\n<div class='cc-aux-menu -right'>\n<button adi-automation='slideshow navigation right' class='cc-aux-btn' ng-click='$ctrl.navigateInSlides($event, $ctrl.nextSlide)'>\n<i class='cc-icon-arrow-right'></i>\n</button>\n</div>\n</div>\n"},function(e,t){e.exports="<div cc-scrollbar class='existing-socials'>\n<c6-list add-new-title='' edit-in-place='true' enable-delete-on-single-item='true' invalid-tooltip='$ctrl.getInvalidtooltipName' is-draggable='$ctrl.isDraggable' item-icon-property='icon' item-label-property='url' item-type='p10d' item-validator='$ctrl.itemValidator({item: item})' items='$ctrl.data' label-filter='$ctrl.labelFilter' no-duplicate='true' no-hide='$ctrl.noHide' no-item-to-page='true' on-delete='$ctrl.removePlatform(item)' on-edit='$ctrl.onEdit(item)' on-toggle='$ctrl.onToggle(item)'></c6-list>\n</div>\n<div class='social add-social-panel' ng-if='$ctrl.canAddSocialLink()'>\n<i class='social-icon' ng-class='$ctrl.getIconClassForNewSocialUrl()'></i>\n<p1-text-input data-hook='new-social-link-input' on-blur='$ctrl.onNewPlatform()' on-submit='$ctrl.onNewPlatform()' placeholder='::&#39;builder.social-panel.link-input.placeholder&#39; | translate' value='$ctrl.newSocialUrl'></p1-text-input>\n</div>\n"},function(e,t){e.exports="<cc-panel-frame data-hook='panel-frame' label='{{$ctrl.title}}' on-close='$ctrl.closeSocialPanel()' on-help='$ctrl.openSocialPanelHelp()' show-close-button='true' show-content-delay='0' show-header='!$ctrl.flags.cardsToPanels' show-help-button='true'>\n<cc-panel-fixed-top data-hook='subtitle' ng-if='$ctrl.flags.cardsToPanels'>\n<p16-panel-header label='{{::$ctrl.title}}'></p16-panel-header>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<social-panel-inner data='$ctrl.socialLinks' item-validator='$ctrl.socialLinksValidator.validateSocialLink(item)' no-hide='false' node='$ctrl.node'></social-panel-inner>\n</cc-panel-body>\n</cc-panel-frame>\n"},function(e,t){e.exports="<iframe frameborder='0' ng-src='{{$ctrl.iFrameUrl | trustUrl}}' scrolling='no'></iframe>\n"},function(e,t){e.exports="<md-dialog aria-describedby='tpa-manage-dialog' aria-label='tpa-manage-dialog' class='tpa-manage-dialog md-transition-in' ng-class='[{ &#39;-fullscreen&#39;: $ctrl.fullScreen , &#39;-no-header&#39;: !$ctrl.showHeader}, &#39;-type-&#39; + $ctrl.type]' role='dialog' tabindex='-1'>\n<iframe ng-if='$ctrl.fullScreen' ng-src='{{$ctrl.manageUrl | trustUrl}}'></iframe>\n<cc-panel-frame adi-automation='manage-{{::$ctrl.type}}' label='{{$ctrl.title}}' ng-if='!$ctrl.fullScreen' on-close='$ctrl.close()' on-help='$ctrl.help()' show-close-button='true' show-header='$ctrl.showHeader' show-help-button='true'>\n<iframe ng-src='{{$ctrl.manageUrl | trustUrl}}'></iframe>\n</cc-panel-frame>\n</md-dialog>\n"},function(e,t){e.exports="<div class='cc-generic-popup first-time-mobile-editor-tooltip'>\n<div class='cc-popup-header'>\n<div class='cc-aux-menu'>\n<button class='cc-aux-btn cc-icon-close-10' ng-click='$ctrl.onHide()'></button>\n</div>\n</div>\n<img class='cc-popup-icon' relative-src='images/popups/{{$ctrl.icon}}'>\n<div class='text-h4 cc-popup-heading' compile='$ctrl.heading'></div>\n<p class='cc-popup-text' compile='$ctrl.text'></p>\n<div class='cc-popup-footer cc-multi-page-popup-footer'>\n<button class='cc-x-height p9-primary -medium' ng-click='$ctrl.onAction()'>\n<span class='cc-x-height'>{{ $ctrl.buttonText }}</span>\n</button>\n</div>\n</div>\n"},function(e,t){e.exports="<div cc-tooltip-position='left' cc-tooltip='floating-go-to-editor-link' class='floating-go-to-editor-link' data-hook='floating-go-to-editor-link' ng-class='$ctrl.isLeftPanelOpen ? &#39;floating-go-to-editor-link-left-panel-is-open&#39; : &#39;floating-go-to-editor-link-left-panel-is-closed&#39;' ng-click='$ctrl.onLinkClick()'>\n<div class='floating-go-to-editor-link-small-text' data-hook='floating-go-to-editor-link-small-text'>\n{{:: 'floating-go-to-editor-link.advanced-editor' | translate}}\n</div>\n<div class='floating-go-to-editor-link-large-text' data-hook='floating-go-to-editor-link-large-text'>\n{{:: 'floating-go-to-editor-link.use-advanced-editor' | translate}}\n</div>\n</div>\n"},function(e,t){e.exports="<div class='floating-stage-controls' data-hook='floating-stage-controls' ng-class='$ctrl.isLeftPanelOpen ? &#39;floating-stage-controls-left-panel-is-open&#39; : &#39;floating-stage-controls-left-panel-is-closed&#39;' ng-hide='$ctrl.showChangeSectionHeight()' ng-if='$ctrl.shouldShowButtons()'>\n<div class='floating-stage-controls-undo-redo' ng-if='!$ctrl.flags.disableUndoRedo'>\n<div cc-tooltip-position='top' cc-tooltip='menu_undo'>\n<div adi-automation='undo-btn' class='floating-stage-controls-large-icon cc-icon-undo' data-hook='floating-stage-controls-undo-btn' ng-click='$ctrl.onUndo()' ng-disabled='!$ctrl.canUndo'></div>\n<div adi-automation='undo-btn' class='floating-stage-controls-small-icon cc-icon-undo-small' data-hook='floating-stage-controls-undo-btn-small' ng-click='$ctrl.onUndo()' ng-disabled='!$ctrl.canUndo'></div>\n</div>\n<div cc-tooltip-position='top' cc-tooltip='menu_redo'>\n<div adi-automation='redo-btn' class='floating-stage-controls-large-icon cc-icon-redo' data-hook='floating-stage-controls-redo-btn' ng-click='$ctrl.onRedo()' ng-disabled='!$ctrl.canRedo'></div>\n<div adi-automation='redo-btn' class='floating-stage-controls-small-icon cc-icon-redo-small' data-hook='floating-stage-controls-redo-btn-small' ng-click='$ctrl.onRedo()' ng-disabled='!$ctrl.canRedo'></div>\n</div>\n</div>\n<div class='floating-stage-controls-divider' ng-if='!$ctrl.flags.disableUndoRedo'>\n<div class='floating-stage-controls-divider-content'></div>\n</div>\n<div class='floating-stage-controls-zoom'>\n<div cc-tooltip-position='top' cc-tooltip='zoom_out' title='zoom out'>\n<div adi-automation='zoom out btn' class='floating-stage-controls-large-icon cc-icon-zoom-out' data-hook='floating-stage-controls-zoom-out-btn' ng-click='$ctrl.onZoomOut()' ng-disabled='!$ctrl.canZoomOut'></div>\n<div adi-automation='zoom out btn' class='floating-stage-controls-small-icon cc-icon-zoom-out-small' data-hook='floating-stage-controls-zoom-out-btn-small' ng-click='$ctrl.onZoomOut()' ng-disabled='!$ctrl.canZoomOut'></div>\n</div>\n<div cc-tooltip-options='{{ {offsetX: -3} }}' cc-tooltip-position='top' cc-tooltip='zoom_in' title='zoom in'>\n<div adi-automation='zoom in btn' class='floating-stage-controls-large-icon cc-icon-zoom-in' data-hook='floating-stage-controls-zoom-in-btn' ng-click='$ctrl.onZoomIn()' ng-disabled='!$ctrl.canZoomIn'></div>\n<div adi-automation='zoom in btn' class='floating-stage-controls-small-icon cc-icon-zoom-in-small' data-hook='floating-stage-controls-zoom-in-btn-small' ng-click='$ctrl.onZoomIn()' ng-disabled='!$ctrl.canZoomIn'></div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='floating-button-box undo-redo -second-top-bar' ng-class='{&#39;no-zoom&#39;: $ctrl.applicationState.isInMobileEditMode()}'>\n<div cc-tooltip-position='left' cc-tooltip='menu_undo'>\n<div class='cc-icon-undo cc-icon-circle' data-hook='undo' ng-click='$ctrl.onClickUndo()' ng-disabled='!$ctrl.canUndo()'></div>\n</div>\n<div cc-tooltip-position='right' cc-tooltip='menu_redo'>\n<div class='cc-icon-redo cc-icon-circle' data-hook='redo' ng-click='$ctrl.onClickRedo()' ng-disabled='!$ctrl.canRedo()'></div>\n</div>\n</div>\n"},function(e,t){e.exports="<ul class='import-page-list'>\n<li ng-repeat='item in $ctrl.items'>\n<div class='import-page-list-item'>\n<i class='cc-icon-subpage' disabled='disabled'></i>\n<div class='import-page-list-item-label'>\n<div class='import-page-page-title'>{{ item.title }}</div>\n<div class='import-page-page-url'>\n<bdi>{{ item.page.url }}</bdi>\n</div>\n</div>\n<div class='import-page-list-item-icon'>\n<i cc-tooltip='import-site.import-page.already-imported' class='cc-icon-check' ng-if='item.readyForImport &amp;&amp; item.page.imported'></i>\n<i class='cc-icon-add-small cc-icon-circle' ng-click='$ctrl.handleImport(item)' ng-if='item.readyForImport &amp;&amp; !item.page.imported'></i>\n</div>\n</div>\n<import-page-list items='item.subItems' ng-if='item.subItems.length &gt; 0' on-import='$ctrl.handleImport(itemForImport)'></import-page-list>\n</li>\n</ul>\n"},function(e,t){e.exports="<cc-panel-frame class='-with-p16a-header -with-corners' data-hook='import-page-panel' label='{{:: &#39;import-site.import-page.panel-header&#39; | translate}}' on-close='$ctrl.close()' show-close-button='true'>\n<cc-panel-body>\n<div class='import-page-panel-content'>\n<div class='import-page-description'>\n{{::'import-site.import-page.description' | translate:{ site:$ctrl.siteUrl} }}\n</div>\n<div class='import-page-loader' data-hook='loader' ng-show='$ctrl.showLoader'>\n<div class='spinner-icon'>\n<cc-svg-icon icon='coloration:replace'></cc-svg-icon>\n</div>\n<div class='text' ng-bind-html=':: &#39;import-site.import-page.loader&#39; | translate'></div>\n</div>\n<import-page-list items='$ctrl.importedMenuItems' on-import='$ctrl.importPage(itemForImport)'></import-page-list>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n"},function(e,t){e.exports=""},function(e,t){e.exports="<svg height='100%' preserveAspectRatio='none' viewBox='0 0 91 91' width='100%'>\n<image filter='url(#intro-image-blur)' height='100%' width='100%' xlink:href=''></image>\n</svg>\n"},function(e,t){e.exports="<div class='logo'>\n<file-upload-select data-hook='logo-upload-file' ng-if='!$ctrl.useMediaManager' on-select='$ctrl.onEdit({file : $file})'></file-upload-select>\n<div class='intro-bch-logo-image' data-hook='logo-image' ng-click='$ctrl.enableEdit &amp;&amp; $ctrl.clickOnInputFile()' ng-style='{&#39;background-image&#39;: $ctrl.url &amp;&amp; !$ctrl.isUploading ? &#39;url(&#39; + $ctrl.url + &#39;)&#39; : &#39;&#39;}'>\n<div class='logo-wrapping-circle' ng-if='$ctrl.showWrappingCircle'></div>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.isUploading'></cc-svg-icon>\n</div>\n<div class='intro-bch-edit' data-hook='edit-panel' ng-class='{&#39;is-uploading&#39;: $ctrl.isUploading &amp;&amp; !$ctrl.uploadError, &#39;fade-down&#39;: $ctrl.justReplaceButton, &#39;delay-entrance&#39;: $ctrl.justReplaceButton}' ng-if='$ctrl.enableEdit'>\n<input ng-click='$ctrl.openMediaManager()' ng-if='$ctrl.useMediaManager' type='button'>\n<div class='intro-logo-button intro-logo-add-button p9b-text-button -small' data-hook='add-button' ng-click='$ctrl.clickOnInputFile()' ng-if='$ctrl.logoIsPlaceholder() &amp;&amp; !$ctrl.isUploading'>\n<cc-svg-icon class='intro-logo-add-icon' icon='coloration:add-small'></cc-svg-icon>\n{{::'intro.logo.add' | translate}}\n</div>\n<div class='intro-logo-button intro-logo-edit-label p9b-text-button -small' data-hook='edit-label' ng-if='!$ctrl.logoIsPlaceholder() &amp;&amp; !$ctrl.justReplaceButton &amp;&amp; !$ctrl.isUploading'>\n<cc-svg-icon class='intro-logo-edit-icon' icon='coloration:edit'></cc-svg-icon>\n{{::'intro.logo.edit' | translate}}\n</div>\n<div class='intro-logo-edit-actions' ng-if='!$ctrl.logoIsPlaceholder() &amp;&amp; !$ctrl.justReplaceButton &amp;&amp; !$ctrl.isUploading'>\n<div class='intro-logo-button intro-logo-replace-button p9b-text-button -small' data-hook='replace-button' ng-click='$ctrl.clickOnInputFile()'>\n{{::'intro.logo.replace' | translate}}\n</div>\n<div class='intro-logo-button intro-logo-remove-button p9b-text-button -small' data-hook='delete-button' ng-click='$ctrl.onDelete()'>\n{{::'intro.logo.remove' | translate}}\n</div>\n</div>\n<div class='intro-logo-extractor-actions fade-down' ng-if='$ctrl.justReplaceButton &amp;&amp; !$ctrl.isUploading'>\n<div class='intro-logo-button intro-logo-replace-button p9b-text-button -small' data-hook='just-replace-button' ng-click='$ctrl.clickOnInputFile()'>\n{{::'intro.logo.replaceLogo' | translate}}\n</div>\n</div>\n<div class='intro-logo-button p9b-text-button -small fade-down' data-hook='uploading-logo-text' ng-if='$ctrl.isUploading'>\n{{::'intro.logo.uploading' | translate}}\n</div>\n<div class='intro-bch-logo-error' ng-show='$ctrl.uploadError'>{{:: 'intro.logo.error' | translate}}</div>\n</div>\n</div>\n"},function(e,t){e.exports="<business-card-header class='intro-bcs-header' logo-url='$ctrl.logoUrl'></business-card-header>\n<div class='intro-bcs-logo' ng-style='{&#39;background-image&#39;: &#39;url(&#39; + $ctrl.logoUrl + &#39;)&#39;}'></div>\n<div class='intro-bcs-name'>{{$ctrl.data.name}}</div>\n<div class='intro-bcs-email'>{{$ctrl.data.contactDetails.email || '&nbsp;'}}</div>\n<div class='intro-bcs-phone'>{{$ctrl.data.contactDetails.phone || '&nbsp;'}}</div>\n<div class='intro-bcs-address'>{{$ctrl.data.contactDetails.address.fullAddress}}</div>\n<div class='a05-forward-button intro-bcs-button cc-x-height'>\n<span>{{::'intro.select-user.select-button' | translate }}</span>\n</div>\n"},function(e,t){e.exports="<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<div class='blocked-title' data-hook='blocked-message' translate='intro.blocked-category.title'></div>\n<div class='blocked-icon'></div>\n<div class='blocked-description'>\n<div data-hook='blocked-message-desc' translate='intro.blocked-category.description'></div>\n<a class='p9a-secondary -inverse blocked-link' data-hook='blocked-message-link' ng-click='$ctrl.onNext()' ng-href='{{ $ctrl.blockedRedirectUrl }}' target='_blank'>\n<span class='button-text' translate='intro.blocked-category.back-button'></span>\n</a>\n</div>\n<button class='intro-box-back a02-text-button' data-hook='back' ng-click='$ctrl.back()' ng-style='$ctrl.backStyle' type='button'>\n<i class='cc-icon-intro-next-arrow'></i>\n<span class='button-text' translate='intro.back-button'></span>\n</button>\n</div>\n"},function(e,t){e.exports="<div class='intro-box-content' ng-style='$ctrl.contentPosition' os-utils></div>\n<div class='intro-box-content' ng-style='$ctrl.contentPosition' os-utils>\n<div class='label t04a-label' data-hook='input-label' translate='intro.optional-label'></div>\n<form class='b01-big-text-field' ng-submit='$ctrl.next()'>\n<label data-hook='input-title' translate='intro.business-dates.input-label'></label>\n<div class='error-message' ng-if='$ctrl.wrongStartDate()' translate='intro.business-dates.wrong-start-date'></div>\n<div class='error-message' ng-if='$ctrl.wrongEndDate()' translate='intro.business-dates.wrong-end-date'></div>\n<div class='date' data-hook='date' ng-repeat='date in $ctrl.dates track by $index'>\n<div class='date-label t04a-label' ng-if='$ctrl.hasEndDate()' translate='{{$ctrl.dateLabel($index)}}'></div>\n<div class='date-inputs'>\n<div class='date-picker'>\n<i class='cc-icon-booking'></i>\n<div class='like-input placeholder' data-hook='date-picker' ng-click='$ctrl.onDateClicked($event, $index)' ng-if='!$ctrl.dates[$index]' translate='intro.business-dates.date-placeholder'></div>\n<div class='like-input' data-hook='date-picker' ng-click='$ctrl.onDateClicked($event, $index)' ng-if='$ctrl.dates[$index]'>\n{{$ctrl.dates[$index] | date:'MM/dd/yyyy'}}\n</div>\n</div>\n<div class='time-picker'>\n<i class='cc-icon-time'></i>\n<md-select class='intro-select' data-hook='time-picker' intro-md-select md-container-class='intro-md-select cc-md-select' md-on-close='$ctrl.onTimeClosed($event, $index)' ng-change='$ctrl.timeChanged($index, $ctrl.selectedTimes[$index])' ng-click='$ctrl.onTimeClicked($event, $index)' ng-model='$ctrl.selectedTimes[$index]' placeholder='Choose Time'>\n<md-option ng-bind='time.display' ng-repeat='time in $ctrl.optionalTimes track by time.value' ng-value='time.value'></md-option>\n</md-select>\n</div>\n<button class='remove cc-icon-close-12' data-hook='remove-date' ng-click='$ctrl.removeDate($index)' ng-if='date' type='button'></button>\n</div>\n</div>\n<div class='timezone' data-hook='timezone' ng-if='$ctrl.hasStartDate()'>\n<span class='t04a-label' ng-bind='$ctrl.timezone'></span>\n<button class='p9b-text-button' ng-click='$ctrl.onTimezoneClicked()' translate='intro.business-dates.change-timezone' type='button'></button>\n<md-select class='intro-select' data-hook='timezone-select' intro-md-select md-container-class='intro-md-select cc-md-select' ng-change='$ctrl.timezoneChanged()' ng-model='$ctrl.timezone'>\n<md-option adi-automation='{{zone.key}}' ng-bind='zone.displayName' ng-repeat='zone in $ctrl.timezones track by zone.key' ng-value='zone.key'></md-option>\n</md-select>\n</div>\n<div class='add-date' ng-if='$ctrl.hasStartDate() &amp;&amp; !$ctrl.hasEndDate()'>\n<button class='p9b-text-button' data-hook='add-date' ng-click='$ctrl.addDate()' type='button'>\n<div class='cc-icon-add-small'></div>\n<span translate='intro.business-dates.add-date'></span>\n</button>\n</div>\n<intro-box-buttons back='$ctrl.back()'></intro-box-buttons>\n</form>\n</div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-click='$ctrl.skip()' type='button'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n"},function(e,t){e.exports="<div class='intro-box-content' ng-style='$ctrl.contentPosition' os-utils>\n<div class='label t04a-label' data-hook='input-label' ng-if='$ctrl.isOptional' translate='intro.optional-label'></div>\n<form class='b01-big-text-field' ng-submit='$ctrl.next()'>\n<label data-hook='input-title' translate='{{::$ctrl.getLocationTitle()}}'></label>\n<input autocomplete='off' cc-select-on-focus data-hook='business-location-input' focus-if='$ctrl.loaded &amp;&amp; !$os.isIE' force-selection='!$ctrl.isOptional' g-places-autocomplete intro-g-places-autocomplete='$ctrl.introPlacesOptions' ng-blur='$ctrl.hidePlaceholder = false' ng-click='$ctrl.hidePlaceholder = true' ng-model='$ctrl.address' options='$ctrl.placesOptions' placeholder='{{$ctrl.placeholder | translate}}'>\n<intro-box-buttons back='$ctrl.back()' is-next-disabled='!$ctrl.isValid()'></intro-box-buttons>\n</form>\n<div class='t03b-small-line intro-compiled-text' data-hook='input-subline' ng-if='!$ctrl.isOptional' wix-translate-compile='intro.business-location.subline'></div>\n</div>\n<div class='search-tip-title' data-hook='search-tip' ng-if='$ctrl.isOptional' ng-style='$ctrl.boxTipStyle' translate='intro.business-location.search-tip'></div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-click='$ctrl.skip()' type='button'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n"},function(e,t){e.exports="<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<form class='b01-big-text-field' ng-submit='$ctrl.next()'>\n<label data-hook='input-title' translate='{{::$ctrl.getBusinessNameTitle()}}'></label>\n<input autocomplete='off' cc-select-on-focus data-hook='business-name-input' focus-if='$ctrl.loaded' ng-model='$ctrl.name' type='text'>\n<intro-box-buttons back='$ctrl.back()' is-next-disabled='!$ctrl.name'></intro-box-buttons>\n</form>\n</div>\n"},function(e,t){e.exports="<div class='label'>{{label | uppercase}}</div>\n<input class='value' ng-readonly='isEditable!==&#39;true&#39;' value='{{value}}'>\n"},function(e,t){e.exports="<div cc-scrollbar class='intro-edit-user'>\n<div class='card-title'>\n<div class='t01a-title'>{{::'business_card.title' | translate }}</div>\n</div>\n<div class='edit-user-form'>\n<business-card-editable data='$ctrl.introData' field-changed='$ctrl.onFieldChanged($value)' uploading-logo='$ctrl.logoManager.uploadingLogo'></business-card-editable>\n<intro-box-buttons back='$ctrl.back()' is-next-disabled='$ctrl.logoManager.uploadingLogo' next='$ctrl.next()'></intro-box-buttons>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='card-title'>\n<div class='t01a-title' translate='business_card.title'></div>\n</div>\n<div class='intro-card-summary intro-view'>\n<img class='card-header' relative-src='images/intro/event-details-header.jpg'>\n<div class='card-body'>\n<div class='card-input name'>\n<label data-hook='name-label' translate='intro.event-details.name-label'></label>\n<input cc-select-on-focus data-hook='name-input' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;name&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.name' placeholder='{{::&#39;intro.event-details.name-placeholder&#39; | translate}}' type='text'>\n</div>\n<div class='card-input description'>\n<label data-hook='description-label' maxlength='300' translate='intro.event-details.description-label'></label>\n<input cc-select-on-focus data-hook='description-input' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;description&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.description' placeholder='{{::&#39;intro.event-details.description-placeholder&#39; | translate}}' type='text'>\n</div>\n<div class='card-inputs-container'>\n<div class='column'>\n<div class='card-input'>\n<label data-hook='address-label' translate='intro.event-details.address-label'></label>\n<div class='input-value' data-hook='address-input' ng-if='!$ctrl.addressToDisplay'>{{ 'intro.event-details.location-tbd' | translate }}</div>\n<div class='input-value' data-hook='address-input' ng-if='$ctrl.addressToDisplay'>{{ $ctrl.addressToDisplay }}</div>\n<a class='p9b-text-button' data-hook='address-change' ng-click='$ctrl.changeLocation()' translate='intro.change-link'></a>\n</div>\n<div class='card-input'>\n<label data-hook='dates-label' translate='intro.event-details.dates-label'></label>\n<div class='input-value' data-hook='from-date' ng-if='!$ctrl.fromDate'>{{ 'intro.event-details.date-tbd' | translate }}</div>\n<div class='input-value' data-hook='from-date' ng-if='$ctrl.fromDate &amp;&amp; !$ctrl.toDate'>{{ 'intro.event-details.date' | translate: {date: $ctrl.fromDate, time: $ctrl.fromTime} }}</div>\n<div class='input-value' data-hook='from-date' ng-if='$ctrl.fromDate &amp;&amp; $ctrl.toDate'>{{ 'intro.event-details.from-date' | translate: {date: $ctrl.fromDate, time: $ctrl.fromTime} }}</div>\n<div class='input-value' data-hook='to-date' ng-if='$ctrl.toDate'>{{ 'intro.event-details.to-date' | translate: {date: $ctrl.toDate, time: $ctrl.toTime} }}</div>\n<div class='input-value' data-hook='timezone' ng-if='$ctrl.timezoneToDisplay'>{{ $ctrl.timezoneToDisplay }}</div>\n<a class='p9b-text-button' data-hook='dates-change' ng-click='$ctrl.changeDates()' translate='intro.change-link'></a>\n</div>\n</div>\n<div class='column'>\n<ng-include src='&#39;views/business-card/business-card-social-links.html&#39;'></ng-include>\n</div>\n</div>\n</div>\n<intro-box-buttons back='$ctrl.back()' next='$ctrl.next()'></intro-box-buttons>\n</div>\n"},function(e,t){e.exports="<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<div class='title' data-hook='search-confirm-message'>\n{{::'intro.category-search.import-site-confirm.title' | translate }}\n</div>\n<div class='description'>\n<span translate='intro.category-search.import-site-confirm.body'></span>\n</div>\n<div class='validate-confirm'>\n<span translate='intro.category-search.import-site-confirm.validate-content'></span>\n</div>\n<intro-box-buttons back='$ctrl.back()' focus-next='true' next='$ctrl.next()'></intro-box-buttons>\n</div>\n"},function(e,t){e.exports="<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<div class='label t04a-label optional' translate='intro.optional-label'></div>\n<form class='search-form b01-big-text-field' data-hook='type-form' ng-submit='$ctrl.next()'>\n<div class='import-site-content-title' translate='intro.import-site-content.title'></div>\n<input autocomplete='off' class='b02-small-text-field' data-hook='business-website-input' focus-if ng-keyup='$ctrl.handleProblemsInWebsiteAddress()' ng-model='$ctrl.address' placeholder='{{::&#39;intro.import-site-content.address-message&#39; | translate}}' type='text'>\n<i class='cc-icon-search'></i>\n<span class='message' ng-class='{&#39;is-error&#39;: !$ctrl.isWebsiteAddressValid || $ctrl.isError}' translate='{{$ctrl.tipMessage}}'></span>\n<intro-box-buttons back='$ctrl.back()' is-hide-tooltip='$ctrl.isHideTooltip' is-in-process='$ctrl.isInProcess' is-next-disabled='$ctrl.isNextDisabled' tooltip-position='$ctrl.nextButtonTooltipPosition' tooltip-title='$ctrl.nextButtonTooltipTitle'></intro-box-buttons>\n</form>\n<div class='t03b-small-line intro-compiled-text' data-hook='input-subline'>\n<div class='link-button' data-hook='no-import-site-skip' ng-click='$ctrl.skip()' translate='new-intro.import-content.skip-button-name'></div>\n<span translate='new-intro.import-content.skip-content'></span>\n</div>\n</div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-click='$ctrl.skip()' type='button'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n"},function(e,t){e.exports="<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<div class='title' data-hook='search-confirm-message'>\n{{::'intro.search-confirm.title-old' | translate:{ businessName:$ctrl.businessName} }}\n</div>\n<div class='description'>\n<span translate='intro.search-confirm.details1'></span>\n<span translate='intro.search-confirm.details2'></span>\n</div>\n<intro-box-buttons back='$ctrl.back()' focus-next='true' next='$ctrl.next()'></intro-box-buttons>\n</div>\n<div class='subline' translate='intro.search-confirm.subline'></div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-click='$ctrl.skip()'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n"},function(e,t){e.exports="<div cc-scrollbar class='intro-su' data-hook='scroll-container' intro-scrollbar ng-class='{&quot;intro-su-empty&quot;: $ctrl.results.length === 0}'>\n<button class='stage-btn round cc-icon-intro-back-arrow intro-su-top' data-hook='back-to-top' ng-click='$ctrl.onGoToTopClicked()' type='button'></button>\n<div class='intro-su-left'></div>\n<div class='intro-su-center'>\n<div class='t01a-title intro-su-title' translate='{{$ctrl.title}}'></div>\n<div class='t03a-small intro-su-subtitle'>\n<span>{{$ctrl.getResultsLength()}}</span>\n<span wix-translate-compile='{{$ctrl.resultsText}}'></span>\n</div>\n<form class='intro-su-inputs'>\n<input autocomplete='off' class='b02-small-text-field intro-su-name' data-hook='business-name-input' focus-if ng-model='$ctrl.name' type='text'>\n<span class='input-su-in'>in</span>\n<input autocomplete='off' class='b02-small-text-field intro-su-address' data-hook='business-location-input' focus-if force-selection='true' g-places-autocomplete ng-model='$ctrl.address' options='{types: [&quot;geocode&quot;]}' type='text'>\n<button class='intro-su-search cc-icon-search-intro' data-hook='search-button' ng-click='$ctrl.search()'></button>\n</form>\n<div class='intro-su-cards'>\n<business-card-static class='intro-su-bcs' data-hook='suggested-business' data='result' ng-click='$ctrl.next(result);' ng-repeat='result in $ctrl.results'></business-card-static>\n</div>\n</div>\n<div class='intro-su-right'></div>\n</div>\n<div class='a01-buttons start'>\n<span class='static-back-button skip-icon'></span>\n<button data-hook='back' ng-attr-type='button' ng-click='$ctrl.back()'>\n<i class='cc-icon-intro-next-arrow skip-icon-reverse'></i>\n<span class='button-text' translate='intro.back-button'></span>\n</button>\n</div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-attr-type='button' ng-click='$ctrl.skip()'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n"},function(e,t){e.exports="<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<div class='label t04a-label' translate='intro.optional-label'></div>\n<form ng-submit='$ctrl.next()'>\n<div class='service-offer-title' translate='intro.service.title'></div>\n<div class='service-offer-option' data-hook='service-offer-{{::offer.type}}' ng-if='::$ctrl.shouldShowOffer(offer.type)' ng-repeat='offer in $ctrl.offers track by $index'>\n<label class='g01-checkbox'>\n<input focus-if='$index === 0' ng-change='$ctrl.onOfferChanged(offer)' ng-model='offer.checked' type='checkbox'>\n<span>{{::'intro.contentExperiment.service.' + offer.type | translate}}</span>\n</label>\n</div>\n<intro-box-buttons back='$ctrl.back()' focus-next='true'></intro-box-buttons>\n</form>\n</div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-click='$ctrl.skip()' type='button'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n"},function(e,t){e.exports="<div class='list-span-overlay' data-hook='focus-list-span' ng-class='{&#39;tpa-span&#39;: $ctrl.isTpa(), &#39;has-presets&#39;: $ctrl.hasPresets(), &#39;selected&#39;: $ctrl.flags.largerStage &amp;&amp; $ctrl.isShowSegmentOverlay()}' ng-click='$ctrl.handleListSpanOverlayClick()' ng-dblclick='$ctrl.handleListSpanOverlayDblClick()'>\n<list-span-tools2 content-designated-list-span='$ctrl.getHoveredListSpan()' ng-class='{&#39;no-transition&#39;: true}' ng-if='$ctrl.flags.largerStage &amp;&amp; $ctrl.isHovered()' state='hover'></list-span-tools2>\n<list-span-tools2 content-designated-list-span='$ctrl.getFocusedListSpan()' ng-class='{&#39;no-transition&#39;: !$overlay.shouldAddTransition()}' ng-if='$ctrl.flags.largerStage &amp;&amp; $ctrl.isFocused()' state='focus'></list-span-tools2>\n<div class='layout-group-overlay' data-hook='layout-group-overlay' layout-group-overlay-position='lg' ng-if='$ctrl.isShowSegmentOverlay() &amp;&amp; !$ctrl.slideShowService.isSlideShowLG(lg)' ng-repeat='lg in $ctrl.listSpan.groups'>\n<segment-overlay adi-automation='osi-comp-node-id-{{:: segment.node ? segment.node.id : &#39;&#39;}}' columns='lg.columns' ng-if='!$ctrl.assistantManager.isInActiveTask() &amp;&amp; !$ctrl.stateIsChangeHeight()' ng-repeat='segment in lg.segments track by segment.node.id' segment='segment'></segment-overlay>\n</div>\n<div class='layout-group-overlay layout-group-slideshow-overlay' data-hook='layout-group-slideshow-overlay' layout-group-overlay-position='lg' ng-if='$ctrl.isShowSegmentOverlay() &amp;&amp; $ctrl.slideShowService.isSlideShowLG(lg)' ng-repeat='lg in $ctrl.getSlideshowLG()'>\n<segment-overlay adi-automation='osi-comp-node-slideshow-id-{{:: segment.node ? segment.node.id : &#39;&#39;}}' columns='lg.columns' ng-if='!$ctrl.assistantManager.isInActiveTask() &amp;&amp; !$ctrl.stateIsChangeHeight()' ng-repeat='segment in lg.segments track by segment.node.id' segment='segment'></segment-overlay>\n</div>\n</div>\n<button cc-tooltip-position='top' cc-tooltip='overlay_plus' class='stage-btn insert insert-above cc-icon-add-large' ng-click='$ctrl.onAdd(false); $event.stopPropagation();' ng-if='$ctrl.canAddSection &amp;&amp; $ctrl.listSpan.sitePart !== &#39;header&#39; &amp;&amp; !$ctrl.showChangeSectionHeight()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_plus' class='stage-btn insert insert-below cc-icon-add-large' ng-click='$ctrl.onAdd(true); $event.stopPropagation();' ng-if='$ctrl.canAddSection &amp;&amp; $ctrl.listSpan.sitePart !== &#39;footer&#39; &amp;&amp; !$ctrl.showChangeSectionHeight()'></button>\n<div class='list-span-overlay-debug-info' ng-click='$ctrl.printPrettyAlgoInfo()' ng-if=':: $ctrl.flags.prettyAlgo &amp;&amp; $ctrl.flags.debug'>\n<p>\nScore: {{:: $ctrl.getPrettyAlgoScore()}}\n</p>\n<p>\nRules:\n<ul>\n<li ng-repeat='ruleName in ::$ctrl.prettyAlgoGetRuleNames()'>\n{{:: ruleName}}\n</li>\n</ul>\n</p>\n</div>\n<div class='list-span-overlay-debug-info list-span-overlay-opacity-debug' ng-click='$ctrl.printSiteConverterDebugData()' ng-if='$ctrl.flags.debugWizSiteConverter'>SiteConverter</div>\n"},function(e,t){e.exports="<div class='container'>\n<div class='site-loader-animation-gif'></div>\n<div class='site-loader-text text-t2'>{{ ::'builder.open-site-loader.video-title' | translate }}</div>\n</div>\n"},function(e,t){e.exports="<cc-panel-frame>\n<h2>Logo Color Extraction</h2>\n<p0-spacer></p0-spacer>\n<div ng-repeat='image in $ctrl.listOfLogos' style='background: repeating-linear-gradient(45deg, #EEE, #EEE 5px, #CCC 5px, #CCC 10px); width: 1500px'>\n<img logoonload='$ctrl.calcPalette(image)' ng-src='{{ image.url }}'>\n<div ng-style='{&#39;background-color&#39;:image.palette[0]}' style='padding: 20px; display: inline-block'>\n<img ng-src='{{ image.url }}'>\n</div>\n<p24-palette colors='image.palette'></p24-palette>\n<p0-spacer></p0-spacer>\n</div>\n</cc-panel-frame>\n"},function(e,t){e.exports="<md-dialog aria-label='List dialog' class='p4-action-menu page-menu-dialog md-transition-in' data-hook='page-menu-dialog' ng-style='{top: $ctrl.position.top, left: $ctrl.position.left}' role='menu'>\n<cc-menu-item data-hook='{{item.dataHook}}' icon='{{item.icon}}' label='{{item.label}}' manage-tpa-button-origin='item.manageTpaButtonOrigin' manage-tpa-button='item.manageTpaButton' ng-click='item.onClick()' ng-hide='item.isHidden()' ng-repeat='item in $ctrl.menuItems'></cc-menu-item>\n</md-dialog>\n"},function(e,t){e.exports="<script id='nodes_renderer_item.html' type='text/ng-template'>\n<li class='menu-item sub-page' data-nodrag='{{!$ctrl.canReorderPage(item)}}' ng-class='{&#39;not-managed-page&#39; : !$ctrl.canReorderPage(item)}' ng-include='&#39;nodes_renderer.html&#39;' ng-repeat='item in item.children track by item.id' ui-tree-node></li>\n<\/script>\n<script id='nodes_renderer.html' type='text/ng-template'>\n<div class='tree-node' ng-class='{&#39;selected-page&#39;: $ctrl.isSelectedPage(item.id), &#39;highlight&#39;: $ctrl.isSettingsActive(item.id), &#39;hidden-page&#39;: item.hide, &#39;edit-mode&#39;: renameForm.$visible, &#39;disabled-page&#39;: $ctrl.isDisabledPage(item.id)}' ng-click='$ctrl.goToPage(item);' ng-keypress='true'>\n<div class='icon cc-icon-subpage' disabled='disabled'></div>\n<div class='drag-area' ng-class='$ctrl.isInMobileEditMode() ? &#39;extra-margin disabled-drag-pointer&#39; : &#39;&#39;' ng-if='$ctrl.canReorderPage(item)' ui-tree-handle>\n<div class='icon cc-icon-drag-small' ng-if='!$ctrl.isInMobileEditMode()'></div>\n</div>\n<form blur='submit' class='page-name-form' editable-form name='renameForm' ng-class='{&#39;disabled-page&#39;:$ctrl.isDisabledPage(item.id)}'>\n<div buttons='no' class='menu-name page-name' e-form='renameForm' e-ng-keydown='$ctrl.handleNodesRendererKeydown($event, item)' e-ng-keyup='$ctrl.handleNodesRendererKeyup($event, item)' e-placeholder='{{::&#39;pages_panel.rename-page.input.placeholder&#39; | translate}}' e-required editable-text='item.name' ng-dblclick='$ctrl.showRenameForm($event, renameForm, item)' onaftersave='$ctrl.afterRename(this, item)'>{{item.name}}</div>\n</form>\n<div class='icon custom-icon' ng-class='$ctrl.iconName(item)'></div>\n<div class='indications'>\n<div cc-tooltip-position='bottom' cc-tooltip='{{$ctrl.getInfoTip(item)}}' class='icon infotip-button cc-icon-info' ng-if='$ctrl.hasInfoTip(item)'></div>\n<div cc-tooltip-position='top' cc-tooltip='settings' class='icon settings-button cc-icon-settings' data-hook='page-settings' ng-click='$ctrl.openActionsDialog($event, item, renameForm);' ng-if='$ctrl.canManagePage(item) &amp;&amp; !$ctrl.isInMobileEditMode()'></div>\n<div class='icon cc-icon-hide-eye' ng-click='$ctrl.canManagePage(item, false) &amp;&amp; $ctrl.togglePageVisibility(item.id)' ng-if='$ctrl.isHiddenPage(item.id) &amp;&amp; !$ctrl.isInMobileEditMode()'></div>\n</div>\n</div>\n<div class='c11-paragraph seo-error' ng-if='item.error'>\n<span translate='pages_panel.page-name.error'></span>\n</div>\n<ul class='menu-list' data-nodrop-enabled='true' ng-if='$ctrl.isContainerOfUnmanageable(item)' ng-include='&#39;nodes_renderer_item.html&#39;' ng-model='item.children' ui-tree-nodes=''></ul>\n<ul class='menu-list' ng-if='!$ctrl.isContainerOfUnmanageable(item)' ng-include='&#39;nodes_renderer_item.html&#39;' ng-model='item.children' ui-tree-nodes=''></ul>\n<\/script>\n<div class='pages-panel-inner' data-hook='split-true'>\n<cc-panel-frame class='-with-corners' label='{{::&#39;pages_panel.title&#39; | translate}}' ng-class='{&#39;small-margin-important&#39;: $ctrl.isInMobileEditMode(), &#39;-with-panel-message&#39;: $ctrl.showPanelMessage()}' on-close='$ctrl.closePagesPanel()' on-help='$ctrl.flags.cardsToPanels ? $ctrl.bOnHelp() : $ctrl.openPagesPanelHelp()' on-return='$ctrl.onReturn()' show-close-button='true' show-footer='$ctrl.showFooter()' show-help-button='true' show-nested='$ctrl.showNestedPanel()'>\n<cc-panel-body class='pages-panel-wrapper-inner'>\n<double-spinner ng-if='$ctrl.flags.removeSpinnerAsStageReady &amp;&amp; !$ctrl.initServiceLoaded'></double-spinner>\n<div class='menu-list-container' data-drag-enabled='!$ctrl.isInMobileEditMode()' data-max-depth='2' empty-placeholder-enabled='false' ng-class='{&#39;extra-margin-bottom&#39;: $ctrl.isInMobileEditMode()}' ng-if='!$ctrl.flags.removeSpinnerAsStageReady || $ctrl.initServiceLoaded' ui-tree='$ctrl.treeOptions'>\n<ul class='menu-list menu-list-primary' ng-model='$ctrl.menuItems' ui-tree-nodes>\n<li class='menu-item' data-hook='page-item-{{item.id}}' ng-include='&#39;nodes_renderer.html&#39;' ng-repeat='item in $ctrl.getMenuItems($ctrl.isInMobileEditMode()) track by item.id' ui-tree-node></li>\n<li class='menu-item' data-hook='page-item-{{item.id}}' ng-class='{&#39;not-managed-page&#39; : !$ctrl.canManagePage(item)}' ng-include='&#39;nodes_renderer.html&#39;' ng-repeat='item in $ctrl.getMenuItems($ctrl.isInMobileEditMode(), false) track by item.id'></li>\n</ul>\n</div>\n</cc-panel-body>\n<cc-panel-nested ng-if='$ctrl.showNestedPanel()'>\n<members-signup-settings-panel></members-signup-settings-panel>\n</cc-panel-nested>\n<cc-panel-footer>\n<div class='pages-panel-footer-buttons'>\n<button class='cc-x-height add-page-button' commented-ng-class='{&#39;p9a-secondary -inverse&#39;: !$ctrl.showImportPageButton, &#39;p9-primary&#39;: $ctrl.showImportPageButton}' data-hook='add-page-panel' ng-class=' $ctrl.showImportPageButton ? &#39;p9-primary&#39; : &#39;p9a-secondary -inverse&#39; ' ng-click='$ctrl.addPage()' ng-if='!$ctrl.isInMobileEditMode() &amp;&amp; (!$ctrl.flags.removeSpinnerAsStageReady || $ctrl.initServiceLoaded)'>\n<span class='cc-x-height'>{{::'pages_panel.add-page.desktop' | translate}}</span>\n</button>\n<button class='cc-x-height p9a-secondary -inverse import-page-button' data-hool='import-page' ng-click='$ctrl.importPage()' ng-if='$ctrl.showImportPageButton'>\n<span class='cc-x-height'>{{::'pages_panel.import-page' | translate}}</span>\n</button>\n</div>\n<panel-message class='panel-icon content-panel-mobile-message' data-hook='panel-message' ng-if='$ctrl.showPanelMessage()'>\n<div class='cc-icon-mobile-edit-notice'></div>\n<div class='mobile-message'>\n{{::'pages_panel.add-page.mobile.text' | translate}}\n<a class='link-to-desktop' data-hook='link-to-desktop-edit-mode' ng-click='$ctrl.goToDesktopEditMode()'>\n{{::'pages_panel.add-page.mobile.target' | translate}}\n</a>\n</div>\n</panel-message>\n</cc-panel-footer>\n</cc-panel-frame>\n<panel-message class='panel-icon' data-hook='panel-message' ng-if='!$ctrl.flags.cardsToPanels &amp;&amp; $ctrl.isInMobileEditMode()'>\n<div class='cc-icon-mobile-edit-notice'></div>\n<div class='mobile-message'>\n{{::'pages_panel.add-page.mobile.text' | translate}}\n<a class='link-to-desktop' data-hook='link-to-desktop-edit-mode' ng-click='$ctrl.goToDesktopEditMode()'>\n{{::'pages_panel.add-page.mobile.target' | translate}}\n</a>\n</div>\n</panel-message>\n</div>\n<div class='seo-panel' ui-view></div>\n"},function(e,t){e.exports="<ul class='wrapper'>\n<li class='inner-block'>\n<span>{{ $ctrl.dragText }}</span>\n</li>\n</ul>\n"},function(e,t){e.exports="<div class='drop-area' data-hook='empty-page-overlay' dnd-drop='$ctrl.onDrop()' dnd-list='[]' ng-click='$ctrl.onAdd()'>\n<div class='empty-indicator'>\n<button cc-tooltip-position='top' cc-tooltip='overlay_plus' class='stage-btn insert cc-icon-add-large' ng-show='!$ctrl.isOnAddState()'></button>\n<div class='title' translate='{{$ctrl.isOnAddState()? &#39;builder.empty-page-title-active&#39;: &#39;builder.empty-page-title&#39;}}'></div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='browser-toolbar' data-hook='fake-browser-bar' ng-class='{&quot;mobile-toolbar&quot;: $ctrl.applicationState.isInMobileEditMode()}'>\n<span class='browser-address-bar'>\n<div class='browser-url-wrapper'>\n<div class='browser-url' data-hook='url' ng-attr-cc-tooltip-options='{{ $ctrl.isInMobileEditMode() &amp;&amp; $ctrl.tooltipOptions() }}' ng-attr-cc-tooltip-position='{{ $ctrl.isInMobileEditMode() &amp;&amp; &quot;top&quot; }}' ng-attr-cc-tooltip='{{ $ctrl.isInMobileEditMode() &amp;&amp; &quot;user_web_address&quot; }}' ng-class='{&quot;cursor-pointer&quot;: $ctrl.isInMobileEditMode()}'>{{ $ctrl.url }}</div>\n</div>\n</span>\n<button cc-tooltip-position='top' cc-tooltip='overlay_connect_domain' class='browser-label' data-hook='label' ng-click='$ctrl.onBarClick()' ng-if='!$ctrl.isDomainConnected() &amp;&amp; $ctrl.label'>{{ $ctrl.label }}</button>\n</div>\n<progress-bar>;</progress-bar>\n"},function(e,t){e.exports="<div class='fake-browser-bar-internal2' data-hook='fake-browser-bar' ng-class='{&quot;mobile-mode&quot;: $ctrl.isMobileMode, &quot;small-bar&quot;: $ctrl.getWidth() === &quot;small&quot;}'>\n<suggest-domain-popup class='suggest-domain-popup' ng-class='{&quot;assistant-connect-domain&quot;: $ctrl.suggestDomainService.isDisplayPopup()}' ng-if='$ctrl.flags.suggestDomain &amp;&amp; !$ctrl.isMobileMode &amp;&amp; $ctrl.zoomedIn()'></suggest-domain-popup>\n<div class='fake-browser-bar-left' ng-class='{&quot;assistant-connect-domain&quot;: !$ctrl.suggestDomainService.isDisplayPopup()}'>\n<span class='browser-url2' data-hook='fake-browser-domain'>{{ $ctrl.getUrl() }}</span>\n<span cc-tooltip-position='top' cc-tooltip='overlay_connect_domain' class='browser-label2 clickable' data-hook='fake-browser-connect-domain' ng-click='$ctrl.onBarClick()' ng-if='!$ctrl.isDomainConnected() &amp;&amp; $ctrl.label &amp;&amp; $ctrl.isAppReady'>{{ $ctrl.label }}</span>\n</div>\n<div class='fake-browser-bar-center'>\n<div class='current-page' data-hook='fake-browser-pages-dropdown' ng-class='{&quot;clickable&quot;: $ctrl.shouldShowPagesDropDown }' ng-click='$ctrl.onManageClick()' ng-if='$ctrl.currentPageName'>\n<span data-hook='fake-current-page'>{{ $ctrl.currentPageName }}</span>\n<i class='cc-icon-arrow-down' ng-if='$ctrl.shouldShowPagesDropDown'></i>\n</div>\n</div>\n<div class='fake-browser-bar-right' ng-if='$ctrl.isAppReady'>\n<div class='fake-browser-go-to-editor-container'>\n<div cc-tooltip-position='top' cc-tooltip='floating-go-to-editor-link' class='fake-browser-go-to-editor clickable' data-hook='fake-browser-go-to-editor' ng-click='$ctrl.goToEditor()' ng-if='$ctrl.showGoToEditor()'>\n<span class='fake-browser-go-to-editor-large-label'>{{ ::'builder.fake-browser.use-advanced-editor' | translate }}</span>\n<span class='fake-browser-go-to-editor-small-label'>{{ ::'floating-go-to-editor-link.advanced-editor' | translate }}</span>\n</div>\n</div>\n<zoom-controls class='fake-browser-zoom-control' toggle-mode='true'></zoom-controls>\n</div>\n</div>\n<progress-bar>;</progress-bar>\n"},function(e,t){e.exports="<div class='browser-wrapper' data-hook='browser-wrapper' ng-class='{ preview: $ctrl.isPreviewDisplay() }' ng-style='$ctrl.extraWidthIfDefined()'>\n<div class='stage-cover'></div>\n<fake-browser-bar label='{{ ::$ctrl.getBarLabel() }}' ng-if='!$ctrl.flags.newTopBar &amp;&amp; !$ctrl.isPreviewDisplay()' on-bar-click='$ctrl.openConnectDomainDialog($event)' url='{{ $ctrl.getSiteUrl() }}'></fake-browser-bar>\n<fake-browser-bar2 fake-browser-size='$ctrl.fakeBrowserWidth' label='{{:: &#39;builder.fake-browser2.choose-domain&#39; | translate }}' ng-if='$ctrl.flags.newTopBar &amp;&amp; !$ctrl.isPreviewDisplay()' on-bar-click='$ctrl.openConnectDomainDialog($event)' url='{{ $ctrl.getSiteUrl() }}'></fake-browser-bar2>\n<div ng-class='{&#39;mobile-preview-wrapper&#39;:$ctrl.isPreviewDisplay() &amp;&amp; $ctrl.isInMobileEditMode()}'>\n<div ng-class='{&#39;mobile-preview&#39;:$ctrl.isPreviewDisplay() &amp;&amp; $ctrl.isInMobileEditMode()}'>\n<div class='mobile-frame previewMode' ng-if='$ctrl.isPreviewDisplay() &amp;&amp; $ctrl.isInMobileEditMode()'>\n<div class='mobile-frame-top'></div>\n<div class='site-shadow'></div>\n<div class='mobile-frame-bottom'></div>\n</div>\n<div ng-class='{&#39;mobile-preview-container&#39;:$ctrl.isPreviewDisplay() &amp;&amp; $ctrl.isInMobileEditMode()}' ng-style='$ctrl.getWidthWithScrollbar()'>\n<viewer class='inner-wrapper' ng-class='{&#39;preview&#39;: $ctrl.isPreviewDisplay()}' ng-style='$ctrl.extraWidthIfDefined()'></viewer>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div cc-scrollbar class='items thin-scrollbar'>\n<div class='item' ng-class='{&#39;selected&#39;: item.selected}' ng-click='$ctrl.onItemClick({id: item.id, closeCallback: $ctrl.closeCallback})' ng-repeat='item in $ctrl.items'>\n<span>{{ item.label }}</span>\n<i class='cc-icon-check' ng-if='item.selected'></i>\n</div>\n</div>\n<div class='footer-cfa' ng-click='$ctrl.onCfaClick({ closeCallback: $ctrl.closeCallback })'>{{ $ctrl.cfaLabel }}</div>\n"},function(e,t){e.exports="<div class='overlay-master-page' ng-if='!$ctrl.applicationState.isInMobileEditMode()'>\n<div adi-automation='master-page-{{::nodeLayout.node.contentElementType}}-overlay' adjust-to-scale base-height='nodeLayout.layout.height' base-left='$ctrl.getLeftPosition(nodeLayout.layout.left)' base-top='nodeLayout.layout.top' base-width='nodeLayout.layout.width' class='segment-component' data-hook='component-overlay' ng-click='$ctrl.handleOverlayClick(nodeLayout)' ng-repeat='nodeLayout in $ctrl.childrenData track by key'>\n<div class='overlay-interact'>\n<div class='interact-wrap'>\n<cc-popover adi-automation='overlay-actions' class='overlay-actions' data-hook='overlay-actions' margin-distance='20' on-trigger-off='$ctrl.onHideActionsMenu(nodeLayout.node)' on-trigger-on='$ctrl.onShowActionsMenu(nodeLayout.node)' position='top' window-margin-bottom='30'>\n<cc-popover-trigger data-hook='component-overlay-actions-menu-trigger'>\n<div adi-automation='{{::nodeLayout.node.contentElementType}}-popover-container' class='overlay-trigger-container'>\n<div class='overlay-title' data-hook='component-overlay-title'>{{$ctrl.getTitle(nodeLayout.node)}}</div>\n<div adi-automation='osi-comp-{{::nodeLayout.node.contentElementType}}' class='overlay-actions-button' data-hook='overlay-actions-icon'>\n<cc-svg-icon data-hook='component-overlay-actions-icon-edit' icon='osi:edit'></cc-svg-icon>\n</div>\n</div>\n</cc-popover-trigger>\n<cc-popover-content>\n<cc-menu-item adi-automation='{{::nodeLayout.node.contentElementType}}-{{:: action.name}}-button' data-hook='{{:: action.name}}-button' label='{{:: action.label | translate}}' ng-class='{ &#39;last-item&#39; : $last}' ng-click='$ctrl.runAction(action, nodeLayout)' ng-repeat='action in $ctrl.getSimpleActions(nodeLayout.node) track by action.name' svg-icon='{{:: action.icon}}'></cc-menu-item>\n<div ng-repeat='action in $ctrl.getComplexActions(nodeLayout.node) track by action.name'>\n<div>\n<p17-divider></p17-divider>\n<p0-spacer></p0-spacer>\n</div>\n<cc-menu-item adi-automation='{{::nodeLayout.node.contentElementType}}-{{:: action.name}}-button' data-hook='{{:: action.name}}-button' label='{{:: action.label | translate}}' ng-class='{&#39;premium&#39;: action.event === $ctrl.ONSTAGE_EVENTS.UPGRADE_CHAT, &#39;last-item&#39; : $last}' ng-click='$ctrl.runAction(action, nodeLayout)' svg-icon='{{:: action.icon}}'></cc-menu-item>\n</div>\n</cc-popover-content>\n</cc-popover>\n</div>\n</div>\n</div>\n</div>\n<div class='overlay-master-page' ng-if='$ctrl.applicationState.isInMobileEditMode()'>\n<div class='component-overlay' data-hook='component-overlay' ng-repeat='nodeLayout in $ctrl.childrenData track by key'>\n<div adi-automation='master-page-{{::nodeLayout.node.contentElementType}}-overlay' adjust-to-scale base-height='nodeLayout.layout.height' base-left='nodeLayout.layout.left' base-top='nodeLayout.layout.top' base-width='nodeLayout.layout.width' class='transparent-overlay' data-hook='master-page-{{::nodeLayout.node.contentElementType}}-overlay' ng-class='{&#39;round-overlay&#39;: $ctrl.isChat(nodeLayout.node.contentElementType)}' ng-click='$ctrl.openMobileTooltip(nodeLayout.node.contentElementType)'></div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='mobile-preview'>\n<div class='mobile-frame previewMode'>\n<div class='mobile-frame-top'></div>\n<div class='site-shadow'></div>\n<div class='mobile-frame-bottom'></div>\n</div>\n<div class='mobile-preview-container'>\n<iframe ng-src='{{$ctrl.getPreviewUrl() | trustUrl}}' ng-style='$ctrl.getWidthWithScrollbar()'></iframe>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='overlay-backdrop overlay-backdrop-transparent' data-hook='overlay-backdrop' ng-click='$overlay.overlayBackdropClicked()' ng-show='$overlay.isShowOverlayBackdrop()'></div>\n<div class='overlay-viewport' ng-show='!$overlay.isPreviewDisplay()'>\n<div class='hover-highlight' ng-if='!$overlay.stateIsChangeHeight()' overlay-highlight-style='hover'></div>\n<div class='active-highlight' ng-if='!$overlay.stateIsChangeHeight()' overlay-highlight-style='active'></div>\n<div class='overlay-on-top' ng-if='!$overlay.flags.headlessApiPerf' ng-mouseleave='$overlay.onMouseLeave($event)'>\n<list-span-tools content-designated-list-span='$overlay.getFocusedListSpan()' ng-class='{&#39;no-transition&#39;: !$overlay.shouldAddTransition()}' ng-if='!$overlay.flags.largerStage &amp;&amp; $overlay.showFocusedListSpan' state='focus'></list-span-tools>\n<list-span-tools content-designated-list-span='$overlay.getHoveredListSpan()' ng-class='{&#39;no-transition&#39;: true}' ng-if='!$overlay.flags.largerStage &amp;&amp; $overlay.showHoveredListSpan' state='hover'></list-span-tools>\n<div class='overlay-padding' data-hook='site-overlay'>\n<div class='overlay-container'>\n<solution-overlay adjust-to-scale='$overlay.height(&quot;header&quot;)' class='header-overlay' data-hook='overlay-header' ng-if='$overlay.data(&quot;header&quot;)' render-data='$overlay.data(&quot;header&quot;)'></solution-overlay>\n<solution-overlay adjust-to-scale='$overlay.height(&quot;body&quot;)' data-hook='overlay-body' ng-if='$overlay.data(&quot;body&quot;)' render-data='$overlay.data(&quot;body&quot;)'></solution-overlay>\n<solution-overlay adjust-to-scale='$overlay.height(&quot;footer&quot;)' class='footer-overlay' data-hook='overlay-footer' ng-if='$overlay.data(&quot;footer&quot;)' render-data='$overlay.data(&quot;footer&quot;)'></solution-overlay>\n<master-page-overlay adi-automation='master-page-overlay' adjust-to-scale base-width='{{$overlay.getPageWidth()}}' ng-if='!$overlay.isOnAddState()'></master-page-overlay>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div cc-tooltip-position='left' cc-tooltip='close_preview' class='cc-icon-close-12 cc-icon-circle cc-icon-white tour-element-preview-back' ng-click='$ctrl.onStopPreview()'></div>\n<div class='mode-toggles-container'>\n<div adi-automation='preview desktop mode' cc-tooltip-position='left' cc-tooltip='preview_toggle_desktop' class='cc-icon-desktop' ng-click='$ctrl.hideMobilePreview()' ng-disabled='!$ctrl.isMobilePreview()'></div>\n<div adi-automation='preview mobile mode' cc-tooltip-position='left' cc-tooltip='preview_toggle_mobile' class='cc-icon-mobile' ng-click='$ctrl.openMobilePreview()' ng-disabled='$ctrl.isMobilePreview()'></div>\n</div>\n"},function(e,t){e.exports="<div class='preview-container'>\n<div class='preview-padding' ng-style='{ &#39;flex-basis&#39;: $ctrl.getPanelWidth() }'></div>\n<div class='preview-content' id='preview-content'>\n<div class='simple-overlay' ng-if='$ctrl.stateIsChangeHeight()'></div>\n<div class='preset-preview-container'>\n<div class='draggable-ghost'>\n<preset-preview data-hook='draggable-ghost' ng-if='$ctrl.presetPreview' preset-preview='$ctrl.presetPreview' scale='0.24' static='true'></preset-preview>\n</div>\n</div>\n<overlay overlay-load></overlay>\n<fake-browser></fake-browser>\n</div>\n</div>\n"},function(e,t){e.exports="<empty-page adjust-to-scale base-height='{{$solutionOverlay.dropTargetHeight}}' base-width='{{$solutionOverlay.dropTargetWidth}}' class='animate-if' ng-if='!$solutionOverlay.renderData.fakeData &amp;&amp; !$solutionOverlay.isOnBodyEditState() &amp;&amp; $solutionOverlay.isInDesktopEditMode &amp;&amp; $solutionOverlay.isBodySitePart() &amp;&amp; $solutionOverlay.overlayManager.isCurrentPageEmpty'></empty-page>\n<list-span-overlay class='list-span-overlay-wrapper' list-span-overlay-position='listSpan' list-span='listSpan' ng-click='$solutionOverlay.isAddMode() &amp;&amp; $solutionOverlay.handleSolutionOverlayClick(listSpan)' ng-if='$solutionOverlay.renderData &amp;&amp; !$solutionOverlay.renderData.fakeData' ng-mouseenter='$solutionOverlay.handleSolutionOverlayMouseEnter(listSpan)' ng-mouseleave='$solutionOverlay.handleSolutionOverlayMouseLeave(listSpan)' ng-repeat='listSpan in $solutionOverlay.renderData.listSpans track by listSpan.node.getId()'></list-span-overlay>\n<div class='fake-overlay' ng-click='$solutionOverlay.fakeOverlayClicked($solutionOverlay.renderData.fakeData)' ng-if='$solutionOverlay.renderData &amp;&amp; $solutionOverlay.renderData.fakeData'></div>\n<drop-target-overlay adjust-to-scale='' base-height='{{$solutionOverlay.dropTargetHeight}}' base-width='{{$solutionOverlay.dropTargetWidth}}' class='drop-target-overlay-wrapper' ng-if='$solutionOverlay.isBodySitePart() &amp;&amp; !$solutionOverlay.renderData.fakeData' ng-show='$solutionOverlay.shouldShowDropStrip()'></drop-target-overlay>\n"},function(e,t){e.exports="<div class='sugget-domain' data-hook='suggest-domain' ng-if='$ctrl.isVisible'>\n<div class='sugget-domain-text' data-hook='suggest-domain-label' ng-bind-html='$ctrl.label'></div>\n<div class='suggest-domain-right'>\n<div class='sugget-domain-cta' data-hook='suggest-domain-cta' ng-click='$ctrl.openConnectDomainDialog()'>{{:: \"builder.fake-browser.suggest-domain-button\" | translate}}</div>\n<div class='sugget-domain-close' data-hook='suggest-domain-close' ng-click='$ctrl.handleClose()'>\n<i class='cc-icon-close-10'></i>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='loading-progress-bar' data-hook='progress-bar'></div>\n"},function(e,t){e.exports="<div class='pu2-notification'>\n<span class='pu2-message' title='{{ $message }}'>\n{{ $message }}\n<button class='p9b-text-button -medium' ng-click='action(); $close();' ng-show='action' title='Click to {{ actionName.toLowerCase() }}'>\n{{ actionName }}\n</button>\n</span>\n<div class='pu2-close' ng-click='$close()'>\n<i class='cc-icon-close-8'></i>\n</div>\n</div>\n"},function(e,t){e.exports="<form class='publish publish-choose-domain' name='chooseDomain'>\n<div class='main-title'>{{::'popups.publish-choose-domain.heading' | translate }}</div>\n<div class='secondary-title'>{{::'popups.publish-choose-domain.subtitle' | translate }}</div>\n<div class='options'>\n<div class='options-inner'>\n<div class='option first-option'>\n<label>\n<input checked class='native-radio-button' name='domain' ng-model='$ctrl.domainModel' type='radio' value='free-domain'>\n<div class='customized-radio-button'>\n<div class='selected-bullet'></div>\n</div>\n<div class='option-right-part option-free' ng-class='{selected: $ctrl.domainModel===&#39;free-domain&#39;}'>\n<div class='option-title'>{{::'popups.publish-choose-domain.option1.text' | translate }}</div>\n<div class='browser-toolbar'>\n<div class='white-area'>\n<span class='browser-address-bar site-name-prefix'>http://{{$ctrl.username}}.wixsite.com/</span>\n<input class='site-name' focus-if ng-change='$ctrl.onChangeSiteName()' ng-disabled='$ctrl.domainModel===&#39;own-domain&#39;' ng-model='$ctrl.siteName' required value='mysite'>\n<span cc-tooltip-custom-class='publish-modal-tooltip' cc-tooltip-position='top' cc-tooltip='{{$ctrl.invalidSiteNameTooltip}}' class='invalid-name-tooltip' id='invalid-name-tooltip'></span>\n</div>\n</div>\n</div>\n</label>\n</div>\n<div class='option second-option'>\n<label>\n<input class='native-radio-button' name='domain' ng-model='$ctrl.domainModel' type='radio' value='own-domain'>\n<div class='customized-radio-button'>\n<div class='selected-bullet'></div>\n</div>\n<div class='option-right-part option-customized' ng-class='{selected: $ctrl.domainModel===&#39;own-domain&#39;}'>\n<div class='option-title'>{{::'popups.publish-choose-domain.option2.text' | translate }}</div>\n<div class='option-example'>ex. www.mystunningsite.com</div>\n</div>\n</label>\n</div>\n</div>\n</div>\n<button class='p9-primary next-button' data-hook='publish-continue' ng-class='{&#39;-grey&#39; : !$ctrl.siteNameValidation.success}' ng-click='$ctrl.nextStep()' ng-disabled='!$ctrl.siteNameValidation.success'>{{::'popups.publish-choose-domain.button' | translate }}</button>\n</form>\n<button class='cc-icon-help-25x14 help-button' ng-click='$ctrl.openChooseDomainHelp()'></button>\n<button class='cc-icon-close-24 close-button' ng-click='$ctrl.closeChooseDomainDialog()'></button>\n"},function(e,t){e.exports="<form class='publish publish-congrats' name='congrats'>\n<div class='main-title' data-hook='title' ng-if='$parent.userHasChosenConnectADomain &amp;&amp; $parent.firstPublish'>{{::'popups.publish-congrats.heading-first-publish' | translate }}</div>\n<div class='main-title' data-hook='title' ng-if='!$parent.userHasChosenConnectADomain || !$parent.firstPublish'>{{::'popups.publish-congrats.heading' | translate }}</div>\n<div class='middle'>\n<div class='middle-child address-part'>\n<div class='part-title' data-hook='subtitle' ng-if='$parent.userHasChosenConnectADomain &amp;&amp; $parent.firstPublish'>{{::'popups.publish-congrats.left.heading-first-publish' | translate }}</div>\n<div class='part-title' data-hook='subtitle' ng-if='!$parent.userHasChosenConnectADomain || !$parent.firstPublish'>{{::'popups.publish-congrats.left.heading' | translate }}</div>\n<div class='browser-toolbar'>\n<span class='browser-address-bar'>{{$ctrl.publicUrl}}</span>\n<a class='p9b-text-button view-site-button' data-hook='cta1' href='{{$ctrl.publicUrl}}' ng-click='$ctrl.onViewSite()' target='_blank'>{{::'popups.publish-congrats.left.button' | translate }}</a>\n</div>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<button class='p9b-text-button cc-x-height' data-hook='cta2' ng-click='$ctrl.goToManagePremium()' ng-if='$ctrl.rightPart.state.startsWith(&#39;three-actions-&#39;) '>\n<div class='cc-x-height'>{{::'popups.publish-congrats.connect-your-own-domain.button' | translate }}</div>\n</button>\n</div>\n<p17-vertical-divider></p17-vertical-divider>\n<div class='middle-child changeable-right-part one-action' ng-if='$ctrl.rightPart.state===&#39;one-action&#39;'>\n<div class='part-title' data-hook='box-title'>{{::'popups.publish-congrats.right.heading' | translate }}</div>\n<div class='part-subtitle' data-hook='box-subtitle' ng-class='{ &#39;-sale-accent&#39;: $ctrl.saleService.isSale() }'>{{::'popups.publish-congrats.right.subtitle' | translate }}</div>\n<div class='part-text' data-hook='box-text' ng-if='!$ctrl.saleService.isSale()'>{{::'popups.publish-congrats.right.text' | translate }}</div>\n<div class='part-text' ng-bind-html=':: &#39;popups.publish-congrats.right.sale-text&#39; | translate:{ text:$ctrl.saleService.getSaleDiscount()} ' ng-if='$ctrl.saleService.isSale()'></div>\n<div class='upgrade-button p9b-text-button' data-hook='cta2' ng-click='$ctrl.goToManagePremium()'>{{::'popups.publish-congrats.right.button' | translate }}</div>\n</div>\n<div class='middle-child changeable-right-part three-actions' ng-if='$ctrl.rightPart.state.startsWith(&#39;three-actions-&#39;) '>\n<div class='part-title' data-hook='box-title'>{{::'popups.publish-congrats.right.heading' | translate }}</div>\n<div class='part-subtitle' data-hook='right-part-subtitle'>{{$ctrl.rightPart[$ctrl.rightPart.state].subtitle}}</div>\n<div class='action-option' ng-repeat='action in $ctrl.rightPart[$ctrl.rightPart.state].actions'>\n<i class='option-icon' ng-class='action.iconClassName' ng-if='action.iconClassName'></i>\n<img class='option-icon' ng-if='action.iconSrc' relative-src='{{action.iconSrc}}'>\n<div class='option-text-part'>\n<div class='option-description' data-hook='action-description'>{{action.description}}</div>\n<a class='option-link p9b-text-button' data-hook='action-link' href='{{action.linkUrl}}' ng-hide='action.social' target='_blank'>{{action.linkText}}</a>\n<a class='option-link p9b-text-button' data-hook='action-link-share' ng-attr-socialshare-hashtags='{{action.socialHashtags}}' ng-attr-socialshare-via='{{action.socialVia}}' ng-click='$ctrl.onSocialShare(action.social)' ng-if='action.social' socialshare socialshare-popup-height='397' socialshare-popup-width='587' socialshare-provider='{{action.social}}' socialshare-text='{{action.socialText}}' socialshare-url='{{action.socialUrl}}'>{{action.linkText}}</a>\n</div>\n</div>\n</div>\n</div>\n<div class='bottom'>\n<label data-hook='help-text'>\n<input class='checkbox' ng-model='$ctrl.dontShowValue' type='checkbox'>{{::'general.dont-show-again' | translate }}</input>\n</label>\n<button class='p9-primary next-button' data-hook='cta3' ng-click='$ctrl.continueEditing()'>{{::'popups.publish-congrats.button' | translate }}</button>\n</div>\n</form>\n<button class='cc-icon-help-25x14 help-button' ng-click='$ctrl.openCongratsHelp()'></button>\n<button class='cc-icon-close-24 close-button' ng-click='$ctrl.closeCongratsDialog()'></button>\n"},function(e,t){e.exports="<div class='publish publish-connect-domain'>\n<div class='main-title'>{{::'popups.publish-connect-domain.heading' | translate }}</div>\n<div class='secondary-title'>{{::'popups.publish-connect-domain.subtitle' | translate }}</div>\n<div class='options'>\n<div class='option p9b-text-button' data-hook='new-domain-button' ng-click='$ctrl.goToNewDomain()' ng-mouseenter='$ctrl.hover1 = true' ng-mouseleave='$ctrl.hover1 = false'>\n<button class='option-text' ng-if='!$ctrl.domain'>{{::'popups.publish-connect-domain.option1.text' | translate }}</button>\n<button class='option-text' ng-bind-html='&#39;popups.new-publish-connect-domain.option1.text&#39; | translate:{domain: $ctrl.domain}' ng-if='$ctrl.domain'></button>\n<i class='arrow-link' ng-class='{&#39;cc-icon-arrow-right&#39;: !$ctrl.hover1, &#39;cc-icon-new-tab&#39;: $ctrl.hover1}'></i>\n</div>\n<hr class='separator'>\n<div class='option p9b-text-button' data-hook='connect-domain-button' ng-click='$ctrl.goToConnectDomain()' ng-mouseenter='$ctrl.hover2 = true' ng-mouseleave='$ctrl.hover2 = false'>\n<button class='option-text'>{{::'popups.publish-connect-domain.option2.text' | translate }}</button>\n<i class='arrow-link' ng-class='{&#39;cc-icon-arrow-right&#39;: !$ctrl.hover2, &#39;cc-icon-new-tab&#39;: $ctrl.hover2}'></i>\n</div>\n</div>\n<button class='cc-x-height p9a-secondary -inverse cancel-button' data-hook='skip-to-congrats' ng-click='$ctrl.onCancel()'>\n<span class='cc-x-height'>{{::'popups.publish-connect-domain.button' | translate }}</span>\n</button>\n</div>\n<button class='cc-icon-help-25x14 help-button' ng-click='$ctrl.openConnectDomainHelp()'></button>\n<button class='cc-icon-close-24 close-button' ng-click='$ctrl.onClose()'></button>\n"},function(e,t){e.exports="<div class='publish-dialog'>\n<publish-choose-domain data-hook='choose-domain' ng-if='$ctrl.state === &#39;choose&#39;' on-close='$ctrl.closeDialogAndCancelPublish()' set-state='$ctrl.setState($value)'></publish-choose-domain>\n<publish-connect-domain data-hook='connect-domain' domain='{{$ctrl.domain}}' ng-if='$ctrl.state === &#39;connect&#39;' referral='{{$ctrl.referralString}}' source='{{$ctrl.source}}'></publish-connect-domain>\n<publish-congrats data-hook='congrats' ng-if='$ctrl.state === &#39;congrats&#39;' referral='{{$ctrl.referralString}}'></publish-congrats>\n</div>\n"},function(e,t){e.exports="<div class='segment-overlay' columns='$ctrl.columns' ng-class='{active: $ctrl.isSectionActive(),&#39;highlight&#39;: $ctrl.isSegmentHighlight(),&#39;listitem&#39;: $ctrl.isListItem}' ng-click='$ctrl.doClickOnSegmentOverlay($event)' ng-mouseenter='$ctrl.onMouseEnterSegment()' ng-mouseleave='$ctrl.onMouseLeaveSegment()' ng-style='$ctrl.style' segment-overlay-position='$ctrl.segment'>\n<div class='overlay-interact' ng-if='$ctrl.isListItem'>\n<div class='interact-wrap'>\n<cc-popover class='overlay-actions' data-hook='overlay-actions' margin-distance='20' on-trigger-off='$ctrl.onHideActionsMenu()' on-trigger-on='$ctrl.onShowActionsMenu()' window-margin-bottom='30'>\n<cc-popover-trigger data-hook='segment-overlay-actions-menu-trigger'>\n<div class='overlay-trigger-container'>\n<div class='overlay-title segment-title' data-hook='segment-overlay-title'>{{$ctrl.getTitle()}}</div>\n<div class='overlay-actions-button' data-hook='overlay-actions-icon'>\n<cc-svg-icon data-hook='segment-overlay-actions-icon-edit' icon='osi:edit'></cc-svg-icon>\n</div>\n</div>\n</cc-popover-trigger>\n<cc-popover-content>\n<cc-menu-item data-hook='{{:: action.name}}-button' label='{{:: action.label | translate}}' ng-class='{ &#39;last-item&#39; : $last}' ng-click='$ctrl.runAction($event, action, $ctrl.node)' ng-repeat='action in $ctrl.listActionsMenu track by action.name' svg-icon='{{:: action.icon}}'></cc-menu-item>\n</cc-popover-content>\n</cc-popover>\n</div>\n</div>\n<slide-show-navigation-overlay ng-if='$ctrl.isShowSlideShowOverlay()' node='$ctrl.node'></slide-show-navigation-overlay>\n<component-overlay component='component' le-arg-list='$ctrl.leArgList' ng-if='!$ctrl.segment.node.isTpaNode()' ng-repeat='component in $ctrl.components track by component.field.key' node='$ctrl.node' segment='$ctrl.segment'></component-overlay>\n<div class='segment-component tpa-component component-overlay-no-actions-menu' component-overlay-position='component' manage-tpa-button-origin='ADI: segment component' manage-tpa-button-tpa-node='$ctrl.getTpaNode(component)' manage-tpa-button='$ctrl.getTpaType(component)' ng-repeat='component in $ctrl.tpaComponents track by component.type'>\n<div class='overlay-interact'>\n<div class='interact-wrap'>\n<div class='overlay-title tpa-overlay-title'>{{$ctrl.getLayoutTitle(component)}}</div>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<cc-panel-frame class='-with-corners' data-hook='panel-frame' label='{{$ctrl.state.displayName.value}} {{::&#39;builder.seo-panel.title&#39; | translate}}' on-close='$ctrl.closeSeoPanel()' on-help='$ctrl.openSeoPanelHelp()' show-close-button='true' show-help-button='true'>\n<div class='seo'>\n<c2-text-input change-value-on-blur='true' disable-toggle='true' help-tooltip='{{$ctrl.config.title.helpTooltip}}' is-show-validator-error='false' label='{{::&#39;builder.seo-panel.page-title.label&#39; | translate}}' on-blur='$ctrl.updateValueAndSaveForm(&#39;pageTitleSEO&#39;)' placeholder='$ctrl.defaults.pageTitleSEO' show-help-button='true' validation='$ctrl.config.title.validation' value='$ctrl.state.pageTitleSEO.value'></c2-text-input>\n<div ng-show='!$ctrl.seoErrorHandler.pageTitleSEO.isValid'>\n<div class='c11-paragraph seo-error'>{{ ::'seo_panel.title.validation' | translate }}</div>\n</div>\n<c2-text-input change-value-on-blur='true' disable-toggle='true' help-tooltip='{{$ctrl.config.description.helpTooltip}}' is-show-validator-error='false' label='{{::&#39;builder.seo-panel.description.label&#39; | translate}}' long='true' on-blur='$ctrl.saveForm(&#39;descriptionSEO&#39;)' placeholder='$ctrl.config.description.placeholder' show-help-button='true' validation='$ctrl.config.description.validation' value='$ctrl.state.descriptionSEO.value'></c2-text-input>\n<div ng-show='!$ctrl.seoErrorHandler.descriptionSEO.isValid'>\n<div class='c11-paragraph seo-error'>{{ ::'seo_panel.description.validation' | translate }}</div>\n</div>\n<c2-text-input change-value-on-blur='true' disable-toggle='true' help-tooltip='{{$ctrl.config.keywords.helpTooltip}}' is-show-validator-error='false' label='{{::&#39;builder.seo-panel.keywords.label&#39; | translate}}' long='true' on-blur='$ctrl.saveForm(&#39;metaKeywordsSEO&#39;)' placeholder='$ctrl.config.keywords.placeholder' show-help-button='true' validation='$ctrl.config.keywords.validation' value='$ctrl.state.metaKeywordsSEO.value'></c2-text-input>\n<div ng-show='!$ctrl.seoErrorHandler.metaKeywordsSEO.isValid'>\n<div class='c11-paragraph seo-error'>{{ ::'seo_panel.keywords.validation' | translate }}</div>\n</div>\n<c11-paragraph class='style-d' html=':: &#39;seo_panel.keywords.launch.note&#39; | translate'></c11-paragraph>\n<c14-checkbox item='$ctrl.indexableCheckbox' on-toggle='$ctrl.saveForm(&#39;indexable&#39;)'></c14-checkbox>\n<c2-text-input change-value-on-blur='true' class='seo-page-url' data-hook='seo-url' disable-toggle='true' help-tooltip='{{$ctrl.config.url.helpTooltip}}' is-disabled='false' is-show-validator-error='false' label='{{::&#39;builder.seo-panel.page-url.label&#39; | translate}}' on-blur='$ctrl.updateValueAndSaveForm(&#39;pageUriSEO&#39;)' prefix='http://www.../' show-help-button='true' validation='$ctrl.config.url.validation' value='$ctrl.state.pageUriSEO.value'></c2-text-input>\n<div ng-show='!$ctrl.seoErrorHandler.pageUriSEO.isValid'>\n<div class='c11-paragraph seo-error' data-hook='seo-url-error-message'>{{ ::'seo_panel.url.validation' | translate }}</div>\n</div>\n<div class='seo-wiz-container'>\n<div class='title'>{{ ::'seo_panel.keywords.launch.title' | translate }}</div>\n<div class='description text-t2'>{{ ::'seo_panel.keywords.launch.description' | translate }}</div>\n<a class='p9a-secondary cc-x-height -medium' data-hook='seo-wiz-link' href='{{::$ctrl.wixSEOWizUrl()}}' ng-click='$ctrl.onSEOWizClick()' target='_blank'>{{ ::'seo_panel.keywords.launch.button' | translate }}</a>\n</div>\n</div>\n</cc-panel-frame>\n"},function(e,t){e.exports="<div class='spinner' ng-class='{fatalError: isFatalError(), &#39;solid-background&#39;: isSolidBackground()}'>\n<div class='preloader-container'>\n<div class='preloader-animation'></div>\n<div class='preloader-message text-t1'>{{message}}</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='spinner' ng-class='{firstTime: isFirstTime() || buildHomePagePhase, fatalError: isFatalError(), &#39;solid-background&#39;: isSolidBackground()}'>\n<div class='preloader-container' ng-if='isLightSpinner &amp;&amp; !isLightSpinnerSvg' ng-show='!buildHomePagePhase &amp;&amp; showAnimations()'>\n<div class='preloader-animation'></div>\n<div class='preloader-message text-t1'>{{getMessage()}}</div>\n</div>\n<div class='preloader-container' ng-if='isLightSpinnerSvg &amp;&amp; !isLightSpinner' ng-show='!buildHomePagePhase &amp;&amp; showAnimations()'>\n<div class='box'>\n<div class='fast-spinner'>\n<svg class='wheel background-wheel' xmlns='http://www.w3.org/2000/svg'>\n<circle cx='24' cy='24' r='22'></circle>\n</svg>\n</div>\n<svg class='wheel main-wheel' xmlns='http://www.w3.org/2000/svg'>\n<circle cx='24' cy='24' r='22'></circle>\n</svg>\n</div>\n<div class='preloader-message text-t1'>{{getMessage()}}</div>\n</div>\n<div class='onboarding-preloader-circles' ng-if='!isLightSpinner &amp;&amp; !isLightSpinnerSvg' ng-show='!buildHomePagePhase &amp;&amp; showAnimations()'>\n<div class='onboarding-preloader-container onboarding-preloader-container1'>\n<div class='onboarding-preloader-circle onboarding-preloader-circle1'></div>\n<div class='onboarding-preloader-circle onboarding-preloader-circle2'></div>\n<div class='onboarding-preloader-circle onboarding-preloader-circle3'></div>\n</div>\n<div class='onboarding-preloader-container onboarding-preloader-container2'>\n<p class='msg'>{{getMessage()}}</p>\n</div>\n</div>\n<div class='onboarding-homepage-progress' ng-if='isSpinning' ng-show='buildHomePagePhase'>\n<div class='title'>{{getMessage()}}</div>\n<div class='progress-bar-spinner'>\n<div class='complete' ng-style='getProgressStyle()'></div>\n</div>\n<div class='subtitle'>{{subtitle}}</div>\n</div>\n</div>\n"},function(e,t){e.exports="<ul class='suggestion-dropdown'>\n<li class='suggestion' ng-click='vm.onTermSelected({suggestion: suggestion})' ng-repeat='suggestion in vm.suggestions'>\n<div data-term='{{suggestion.term}}'>{{vm.splitByTerm(suggestion.term, vm.term).prefix}}<span class=\"highlighted-text\">{{vm.splitByTerm(suggestion.term, vm.term).term}}</span>{{vm.splitByTerm(suggestion.term, vm.term).extension}}</div>\n</li>\n</ul>\n"},function(e,t){e.exports="<open-site-loader></open-site-loader>\n"},function(e,t){e.exports="<div class='text-suggestion' ng-class='{&#39;text-suggestion-overflow&#39;: $ctrl.isOverflown(), &#39;text-suggestion-expanded&#39;: $ctrl.isExpanded}'>\n<div class='best-match' ng-if='$ctrl.type === &#39;recommended&#39;'>\n<span cc-tooltip-custom-class='best-match-tooltip' cc-tooltip-position='top' cc-tooltip='best_match'>{{:: 'text-manager-dialog.best-match-label' | translate}}</span>\n</div>\n<div class='text-suggestion-source'>{{::$ctrl.source}}</div>\n<div class='text-suggestion-value' ng-bind-html='$ctrl.textAsHtml'></div>\n<div class='text-suggestion-expand' ng-click='$ctrl.toggleExpand()'>\n<div class='text-suggestion-expand-icon cc-icon-arrow-down'></div>\n</div>\n<div class='text-suggestion-actions'>\n<button class='text-suggestion-action p9b-text-button -medium -controlbtn' ng-click='$ctrl.replaceText($ctrl.text)'>\n{{:: 'text-manager-dialog.actions.replace' | translate}}\n</button>\n<button class='text-suggestion-action p9b-text-button -medium -controlbtn' ng-click='$ctrl.appendText($ctrl.text)'>\n{{:: 'text-manager-dialog.actions.append' | translate}}\n</button>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='text-manager-dialog'>\n<cc-panel-frame class='-with-p16a-header' label='{{:: &#39;text-manager.dialog.title&#39; | translate}}' on-close='$ctrl.closeDialog()' show-close-button='true' show-content-delay='0' show-scroll='true'>\n<cc-panel-fixed-top>\n<div class='text-manager-dialog-description'>\n{{:: $ctrl.getDescription() | translate }}\n</div>\n<p1-text-input class='text-manager-search-input' focused='true' left-icon-name='&#39;cc-icon-search&#39;' ng-class='{&#39;typing-text&#39;: $ctrl.searchValue}' on-keyup='$ctrl.searchedTextChange($ctrl.searchValue)' placeholder='::&#39;text-manager-dialog.search-placeholder&#39; | translate' right-icon-clicked='$ctrl.deleteSearchedText()' right-icon-name='$ctrl.getCloseIcon()' value='$ctrl.searchValue'></p1-text-input>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<tip-message description='{{::$ctrl.$translate.instant(&#39;text-manager-dialog.best-match-description&#39;)}}' enable-close='true' max-appearances-count='1' ng-if='$ctrl.recommendedTexts.length &gt; 0' on-close-tip='$ctrl.closeTip()' tip-key='text-manager-tip' title-icon='&#39;cc-icon-best-match&#39;' title='{{::$ctrl.$translate.instant(&#39;text-manager-dialog.best-match-text&#39;)}}'></tip-message>\n<text-manager-dialog-suggestion ng-repeat='contentText in $ctrl.getResults()' on-append='$ctrl.appendText(contentText.text, contentText.type, $index, contentText.source)' on-replace='$ctrl.replaceText(contentText.text, contentText.type, $index, contentText.source)' source='contentText.source' text-as-html='contentText.boldText' text='contentText.text' type='contentText.type'></text-manager-dialog-suggestion>\n<div class='text-manager-empty-search-results' ng-show='$ctrl.searchedResults.length === 0'>\n<div class='text-manager-empty-search-results-icon'></div>\n<div class='text-manager-empty-search-results-text'>\n{{:: 'text-manager-dialog.no-text-found' | translate }}\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n</div>\n"},function(e,t){e.exports="<div class='top-bar-tab drop-down tab-margin-right -accent-hover-text' data-hook='account-tab-drop-down-section'>\n<div class='flex-center-grow' ng-click='$ctrl.showDropdown()' ng-mouseenter='$ctrl.showDropdown()' ng-mouseleave='$ctrl.hideDropdown()'>\n<div class='account-avatar default-avatar' ng-if='$ctrl.showDefaultProfileImage()'></div>\n<img class='account-avatar' ng-if='!$ctrl.showDefaultProfileImage()' ng-src='{{ $ctrl.accountDetails.profileImage }}'>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow open-from-right-corner account-container' data-hook='account-menu' ng-show='$ctrl.shouldShowAccountDropdown()'>\n<div class='account-header' ng-click='$ctrl.onSettingsClick()'>\n<div class='account-avatar-large default-avatar' ng-if='$ctrl.showDefaultProfileImage()'></div>\n<img class='account-avatar-large' ng-if='!$ctrl.showDefaultProfileImage()' ng-src='{{ $ctrl.accountDetails.profileImage }}'>\n<div class='details-container'>\n<div class='fullName'>{{ $ctrl.accountDetails.fullName }}</div>\n<div class='email'>{{ $ctrl.accountDetails.email }}</div>\n</div>\n</img>\n</div>\n<div class='account-divider'></div>\n<ul class='sub-menu'>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-colors-button'>\n<span adi-automation='account-menu-my-sites' class='sub-menu-label' ng-click='$ctrl.onMySitesClick()'>{{::'builder.account.my-sites' | translate }}</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-colors-button'>\n<span adi-automation='account-menu-account-settings' class='sub-menu-label' ng-click='$ctrl.onSettingsClick()'>{{::'builder.account.settings' | translate }}</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-fonts-button'>\n<span adi-automation='account-menu-billing-payments' class='sub-menu-label' ng-click='$ctrl.onPaymentsClick()'>{{::'builder.account.billing' | translate }}</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-animations-button'>\n<span adi-automation='account-menu-create-new-site' class='sub-menu-label' ng-click='$ctrl.onNewSiteClick()'>{{::'builder.site-menu.start-new-site' | translate }}</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-animations-button'>\n<span adi-automation='account-menu-give-feedback' class='sub-menu-label' ng-click='$ctrl.onFeedbackClick()'>{{::'builder.site-menu.feedback' | translate }}</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div adi-automation='topbar-add-dropdown' class='flex-center-grow drop-down add-tab add-tab-dropdown' data-hook='second-top-bar-add-section' ng-click='$ctrl.showAddSectionDropdown()' ng-mouseenter='$ctrl.showAddSectionDropdown()' ng-mouseleave='$ctrl.hideAddSectionDropdown()'>\n<span>{{::'general.add' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow add-tab-dropdown' data-hook='add-dropdown-menu' ng-attr-style='{{$ctrl.getAddSectionDropdownStyle()}}' ng-show='$ctrl.shouldShowDropDownDesign()'>\n<ul class='sub-menu'>\n<li class='sub-menu-item text-with-icon' data-hook='add-section-button' ng-class='$ctrl.getCssClassesForAddSectionTab()' ng-click='$ctrl.onClickAddSection()'>\n<span>\n<span class='sub-menu-icon cc-icon-section'></span>\n<span class='sub-menu-label'>{{::'builder.top-bar.add-section' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item text-with-icon' data-hook='add-page-button' ng-click='$ctrl.onClickAddPage()'>\n<span>\n<span class='sub-menu-icon cc-icon-page'></span>\n<span class='sub-menu-label'>{{::'general.page' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item text-with-icon' data-hook='add-imported-page-button' ng-click='$ctrl.onClickAddImportedPage()' ng-if=':: $ctrl.isImportPageAvailable'>\n<span>\n<span class='sub-menu-icon cc-icon-import'></span>\n<span class='sub-menu-label'>{{::'general.imported-page' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding divider-container'>\n<span class='sub-menu-divider'></span>\n</li>\n<li adi-automation='add-app-button' class='sub-menu-item text-with-icon' data-hook='add-app-button' ng-click='$ctrl.onClickAddApp()'>\n<span>\n<span class='sub-menu-icon cc-icon-app'></span>\n<span class='sub-menu-label'>{{::'builder.top-bar.add-app' | translate }}</span>\n</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='top-bar-tab tab-margin-right -accent-hover-text'>\n<div adi-automation='topbar-add-dropdown' class='flex-center-grow drop-down add-tab add-tab-dropdown' data-hook='second-top-bar-add-section' ng-click='$ctrl.showAddSectionDropdown()' ng-mouseenter='$ctrl.showAddSectionDropdown()' ng-mouseleave='$ctrl.hideAddSectionDropdown()'>\n<span>{{::'general.add' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow add-tab-dropdown' data-hook='add-dropdown-menu' ng-attr-style='{{$ctrl.getAddSectionDropdownStyle()}}' ng-show='$ctrl.shouldShowDropDownDesign()'>\n<ul class='sub-menu'>\n<li class='sub-menu-item text-with-icon' data-hook='add-section-button' ng-class='$ctrl.getCssClassesForAddSectionTab()' ng-click='$ctrl.onClickAddSection()'>\n<span>\n<span class='sub-menu-icon cc-icon-section'></span>\n<span class='sub-menu-label'>{{::'builder.top-bar.add-section' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item text-with-icon' data-hook='add-page-button' ng-click='$ctrl.onClickAddPage()'>\n<span>\n<span class='sub-menu-icon cc-icon-page'></span>\n<span class='sub-menu-label'>{{::'general.page' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item text-with-icon' data-hook='add-imported-page-button' ng-click='$ctrl.onClickAddImportedPage()' ng-if=':: $ctrl.isImportPageAvailable'>\n<span>\n<span class='sub-menu-icon cc-icon-import'></span>\n<span class='sub-menu-label'>{{::'general.imported-page' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding divider-container'>\n<span class='sub-menu-divider'></span>\n</li>\n<li adi-automation='add-app-button' class='sub-menu-item text-with-icon' data-hook='add-app-button' ng-click='$ctrl.onClickAddApp()'>\n<span>\n<span class='sub-menu-icon cc-icon-app'></span>\n<span class='sub-menu-label'>{{::'builder.top-bar.add-app' | translate }}</span>\n</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='top-bar-tab tab-margin-right tab-with-underline -accent-hover-text top-bar-back-button' data-hook='top-bar-back-button' ng-click='$ctrl.onClickBackButton()'>\n<div class='flex-center-grow'>\n<i class='cc-icon-drag-here-arrow back-icon'></i>\n<span>{{:: 'builder.back-button' | translate }}</span>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='pair-of-icons more-space'>\n<div cc-tooltip-position='top' cc-tooltip='preview_toggle_mobile'>\n<div class='display-mode-item cc-icon-switch-to-mobile' data-hook='floating-stage-controls-redo-btn' ng-class='{&quot;-active -underline&quot;: $ctrl.mode === &quot;mobile&quot;}' ng-click='$ctrl.onSelect({mode: &quot;mobile&quot;})'></div>\n</div>\n<div cc-tooltip-position='top' cc-tooltip='preview_toggle_desktop'>\n<div class='display-mode-item cc-icon-switch-to-desktop' data-hook='floating-stage-controls-undo-btn' ng-class='{&quot;-active -underline&quot;: $ctrl.mode === &quot;desktop&quot;}' ng-click='$ctrl.onSelect({mode: &quot;desktop&quot;})'></div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='top-bar-tab tab-margin-right tab-with-underline -accent-hover-text' data-hook='manage-single-tpa' manage-tpa-button-origin='ADI-topbar-single' manage-tpa-button-tpa-node='$ctrl.getRelevantTPANode(&#39;{{ $ctrl.singleTpaType() }}&#39;)' manage-tpa-button='$ctrl.singleTpaType()' ng-if='$ctrl.showSingleTpa() &amp;&amp; !$ctrl.alwaysDropdown'>\n<div class='flex-center-grow'>\n<span>{{:: 'builder.manage-tpa-button' | translate }} {{$ctrl.singleTpa().menuItem.nameAsObject}}</span>\n</div>\n</div>\n<div class='top-bar-tab tab-margin-right drop-down -accent-hover-text' ng-if='$ctrl.showMultiTpa() || ($ctrl.alwaysDropdown &amp;&amp; $ctrl.hasTpa())' ng-mouseenter='$ctrl.showDropdown()' ng-mouseleave='$ctrl.hideDropdown()'>\n<div class='flex-center-grow'>\n<span class='top-bar-show-in-large-screen' data-hook='manage-multiple-apps-button'>{{::'builder.manage-apps' | translate }}</span>\n<span class='top-bar-show-in-small-screen' data-hook='manage-multiple-apps-button'>{{::'builder.manage' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow' ng-show='$ctrl.shouldShowManageDropDown()' ng-style='$ctrl.getManageDropdownStyle()'>\n<ul class='sub-menu' data-hook='manage-multiple-apps-sub-menu'>\n<li class='sub-menu-item text-with-icon' manage-tpa-button-origin='ADI-topbar-multiple' manage-tpa-button-tpa-node='$ctrl.getRelevantTPANode(&#39;{{ tpaNaiveType }}&#39;)' manage-tpa-button='tpaNaiveType' ng-repeat='(tpaNaiveType, manageableTPA) in $ctrl.getManageableTPAs()'>\n<span>\n<span class='sub-menu-icon' ng-class='manageableTPA.menuItem.icon'></span>\n<span class='sub-menu-label'>{{::'builder.manage-tpa-sub-menu.label.' + manageableTPA.menuItem.nameAsObject.toLowerCase() | translate}}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding divider-container'>\n<span class='sub-menu-divider'></span>\n</li>\n<li class='sub-menu-item text-with-icon'>\n<span ng-click='$ctrl.onAllAppsClick()'>\n<span class='sub-menu-icon cc-icon-app'></span>\n<span class='sub-menu-label'>{{::'builder.manage-tpa-sub-menu.label.all-apps' | translate}}</span>\n</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='flex-center-grow'>\n<div class='drop-down pages-dropdown pages-panel-dropdown' data-hook='second-top-bar-pages-panel' ng-class='$ctrl.getCssClassesForPageTab()' ng-click='$ctrl.handlePagesDropDownClick($event)'>\n<span>\n{{::\"general.page\" | translate }}:&nbsp;\n</span>\n<span class='page-tab-title cc-ellipsis' data-hook='page-tab-title' ng-if='!$ctrl.flags.mergedHeader'>\n{{$ctrl.getSelectedPageName()}}\n</span>\n<span class='page-tab-title' data-hook='page-tab-title' ng-if='$ctrl.flags.mergedHeader'>\n<span class='cc-ellipsis'>{{$ctrl.getSelectedPageName()}}</span>\n<i class='top-bar-menu-home-icon cc-icon-home' data-hook='home-icon' ng-if='$ctrl.shouldShowHomeIcon()'></i>\n</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow pages-dropdown' ng-style='$ctrl.getPagesDropdownStyle()'>\n<ul cc-scrollbar class='sub-menu'>\n<li class='sub-menu-item' ng-click='$ctrl.goToPage(item, $event)' ng-repeat='item in ::$ctrl.menuService.menuItems | filter: { page:true } track by item.id'>\n<span class='cc-ellipsis sub-menu-label' ng-class='{&#39;-selected&#39;: $ctrl.pagesManager.isSelectedPage(item.id) }'>\n{{ item.name }}\n<i class='icon cc-icon-hide-eye' ng-if='item.hide'></i>\n</span>\n<ul>\n<li class='sub-menu-item -child' ng-click='$ctrl.goToPage(child, $event)' ng-repeat='child in ::item.children | filter: { page:true } track by child.id'>\n<span class='cc-ellipsis sub-menu-label' ng-class='{&#39;-selected&#39;: $ctrl.pagesManager.isSelectedPage(child.id) }'>\n{{ child.name }}\n<i class='icon cc-icon-hide-eye' ng-if='child.hide'></i>\n</span>\n</li>\n</ul>\n</li>\n</ul>\n<div class='manage-pages-div' data-hook='manage-pages'>\n<button class='p9-primary -small cc-x-height manage-pages' ng-click='$ctrl.onClickPages()'>\n<div class='cc-x-height'>{{::\"dropdown.manage-pages\" | translate }}</div>\n</button>\n</div>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='top-bar-tab tab-margin-right -accent-hover-text' data-hook='second-top-bar-pages-panel' ng-click='$ctrl.onClickPages()'>\n<div class='flex-center-grow'>\n<div class='pages-container' ng-class='{&#39;active&#39;: $ctrl.isPagesPanelOpen()}'>\n<i class='cc-icon-pages'></i>\n<span>{{:: 'builder.pages' | translate }}</span>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div cc-tooltip-position='bottom' cc-tooltip='menu_publish' class='publish-button' ng-class='{ &#39;publish-button-loader&#39;: $ctrl.isPublishing || $ctrl.isPublishingFinished, &#39;inverted&#39;: $ctrl.isColorsInverted }' ng-click='$ctrl.onClickPublish($event)'>\n<div class='flex-center-grow'>\n<span>{{::'builder.publish' | translate }}</span>\n<preloader-publish-completed completed='$ctrl.isPublishingFinished &amp;&amp; $ctrl.showPublishAnimation' in-progress='$ctrl.isPublishing' inverted='!$ctrl.isColorsInverted'></preloader-publish-completed>\n</div>\n</div>\n"},function(e,t){e.exports="<div cc-tooltip-position='bottom' cc-tooltip='menu_publish' class='publish-button' ng-class='{ &#39;publish-button-loader&#39;: $ctrl.isPublishing || $ctrl.isPublishingFinished, &#39;inverted&#39;: $ctrl.isColorsInverted }' ng-click='$ctrl.onClickPublish($event)'>\n<div class='flex-center-grow'>\n<span>{{::'builder.publish' | translate }}</span>\n<preloader-publish-completed completed='$ctrl.isPublishingFinished &amp;&amp; $ctrl.showPublishAnimation' in-progress='$ctrl.isPublishing' inverted='!$ctrl.isColorsInverted'></preloader-publish-completed>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='top-bar-tab tab-margin-right drop-down -accent-hover-text' data-hook='design-tab-drop-down-section'>\n<div class='flex-center-grow' ng-click='$ctrl.showSiteDesignDropdown()' ng-mouseenter='$ctrl.showSiteDesignDropdown()' ng-mouseleave='$ctrl.hideSiteDesignDropdown()'>\n<span>{{::'builder.design-label' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow design-tab-dropdown' data-hook='site-design-dropdown-menu' ng-attr-style='{{$ctrl.getSiteDesignDropdownStyle()}}' ng-show='$ctrl.shouldShowDropDownDesign()'>\n<ul class='sub-menu'>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-themes-button' ng-click='$ctrl.onClickDesign()'>\n<span>\n<span class='sub-menu-icon cc-icon-themes'></span>\n<span class='sub-menu-label'>{{::'design.themes.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding divider-container'>\n<span class='sub-menu-divider'></span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-colors-button' ng-click='$ctrl.openNewColorationPanel()'>\n<span>\n<span class='sub-menu-icon cc-icon-colours margin-style'></span>\n<span class='sub-menu-label'>{{::'design.colors.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-fonts-button' ng-click='$ctrl.openFonts()'>\n<span>\n<span class='sub-menu-icon cc-icon-fonts margin-style'></span>\n<span class='sub-menu-label'>{{::'design.fonts.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-animations-button' ng-click='$ctrl.openAnimationPanel()'>\n<span>\n<span class='sub-menu-icon cc-icon-animations margin-style'></span>\n<span class='sub-menu-label'>{{::'design.animations.title' | translate }}</span>\n</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='go-to-editor-link'>\n<div class='go-to-editor-link-content'>\n<div class='go-to-editor-link-title' data-hook='go-to-editor-link-title' ng-bind-html=':: &#39;go-to-editor-link.title&#39; | translate'></div>\n<div class='go-to-editor-link-sub-title' data-hook='go-to-editor-link-sub-title' ng-bind-html=':: &#39;go-to-editor-link.sub-title&#39; | translate'></div>\n<div class='go-to-editor-link-button-container'>\n<div class='go-to-editor-link-button p9-primary -controlbtn' data-hook='go-to-editor-link-button' ng-bind-html=':: &#39;go-to-editor-link.button&#39; | translate' ng-click='$ctrl.goToEditor()'></div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='go-to-editor-link'>\n<div class='go-to-editor-link-content'>\n<div class='go-to-editor-link-title' data-hook='go-to-editor-link-title' ng-bind-html=':: &#39;go-to-editor-link.title&#39; | translate'></div>\n<div class='go-to-editor-link-sub-title' data-hook='go-to-editor-link-sub-title' ng-bind-html=':: &#39;go-to-editor-link.sub-title-new&#39; | translate'></div>\n<div class='go-to-editor-link-button-container'>\n<div class='go-to-editor-link-button p9-primary -controlbtn' data-hook='go-to-editor-link-button' ng-bind-html=':: &#39;go-to-editor-link.button-new&#39; | translate' ng-click='$ctrl.goToEditor()'></div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='drop-down site-tab flex-center-grow' data-hook='site-tab' ng-mouseenter='$ctrl.showDropDown()' ng-mouseleave='$ctrl.hideDropDown()'>\n<span>{{::'builder.site' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow' ng-attr-style='{{$ctrl.getInlineCustomStyle()}}' ng-show='$ctrl.isShowDropDown()'>\n<ul class='sub-menu' ng-show='$ctrl.getMetadata()'>\n<li class='sub-menu-item business-info' data-hook='business-info' ng-click='$ctrl.onClickMyBusinessInfo($event)' ng-if='$ctrl.showBusinessInfo'>\n<span class='sub-menu-label'>{{::'builder.site-menu.my-business-info' | translate }}</span>\n</li>\n<li class='sub-menu-item my-dashboard' data-hook='my-dashboard' ng-click='$ctrl.onClickMyDashboard()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.my-dashboard' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item site-settings' data-hook='site-settings' ng-click='$ctrl.onClickSiteSettings()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.settings' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item connect-domain' data-hook='connect-domain' ng-click='$ctrl.onClickConnectDomain($event)'>\n<span class='sub-menu-label'>{{::'builder.site-menu.connect-domain' | translate }}</span>\n</li>\n<li adi-automation='site-dropdown-seo-wiz' class='sub-menu-item seo-wiz' data-hook='seo-wiz' ng-click='$ctrl.onClickSEOWiz()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.seo-wiz' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item new-site' data-hook='new-site' ng-click='$ctrl.onClickStartNewSite()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.start-new-site' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item view-site' data-hook='view-site' ng-click='$ctrl.onClickViewLiveSite()' ng-if='$ctrl.isSitePublished()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.view-live' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item feedback' data-hook='feedback' ng-click='$ctrl.onClickFeedback()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.feedback' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li ng-if='!$ctrl.applicationState.isInMobileEditMode()'>\n<go-to-editor-link-old></go-to-editor-link-old>\n</li>\n</ul>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='drop-down site-tab flex-center-grow' data-hook='site-tab' ng-mouseenter='$ctrl.showDropDown()' ng-mouseleave='$ctrl.hideDropDown()'>\n<span>{{::'builder.site' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow' ng-attr-style='{{$ctrl.getInlineCustomStyle()}}' ng-show='$ctrl.isShowDropDown()'>\n<ul class='sub-menu' ng-show='$ctrl.getMetadata()'>\n<li class='sub-menu-item business-info' data-hook='business-info' ng-click='$ctrl.onClickMyBusinessInfo($event)' ng-if='$ctrl.showBusinessInfo'>\n<span class='sub-menu-label'>{{::'builder.site-menu.my-business-info' | translate }}</span>\n</li>\n<li class='sub-menu-item my-dashboard' data-hook='my-dashboard' ng-click='$ctrl.onClickMyDashboard()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.site-dashboard' | translate }}\n</span>\n</li>\n<li class='sub-menu-item site-settings' data-hook='site-settings' ng-click='$ctrl.onClickSiteSettings()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.settings' | translate }}\n</span>\n</li>\n<li class='sub-menu-item site-settings' data-hook='site-history' ng-click='$ctrl.onClickSiteHistory()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.history' | translate }}\n</span>\n</li>\n<li class='sub-menu-item connect-domain bold-sub-menu-item' data-hook='connect-domain' ng-click='$ctrl.onClickConnectDomain($event)'>\n<span class='sub-menu-label'>{{::'builder.site-menu.connect-domain' | translate }}</span>\n</li>\n<li adi-automation='site-dropdown-seo-wiz' class='sub-menu-item seo-wiz' data-hook='seo-wiz' ng-click='$ctrl.onClickSEOWiz()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.seo-wiz' | translate }}\n</span>\n</li>\n<li class='sub-menu-item view-site' data-hook='view-site' ng-click='$ctrl.onClickViewLiveSite()' ng-if='$ctrl.isSitePublished()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.view-published-site' | translate }}\n</span>\n</li>\n<li class='sub-menu-item sub-menu-full-width'>\n<span class='sub-menu-divider'></span>\n</li>\n<li adi-automation='account-menu-my-sites' class='sub-menu-item' ng-click='$ctrl.onMySitesClick()'>\n<span class='sub-menu-label'>\n{{::'builder.account.my-sites' | translate }}\n</span>\n</li>\n<li adi-automation='account-menu-create-new-site' class='sub-menu-item' ng-click='$ctrl.onNewSiteClick()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.start-new-site' | translate }}\n</span>\n</li>\n<li adi-automation='account-menu-give-feedback' class='sub-menu-item' ng-click='$ctrl.onClickFeedback()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.feedback' | translate }}\n</span>\n</li>\n<li adi-automation='site-dropdown-news' class='sub-menu-item' ng-click='$ctrl.onClickNews()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.news' | translate }}\n</span>\n</li>\n<div data-hook='go-to-editor-from-settings' ng-if='!$ctrl.applicationState.isInMobileEditMode()'>\n<go-to-editor-link></go-to-editor-link>\n</div>\n</ul>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<display-mode-dropdown mode='$ctrl.currentEditMode()' on-select='$ctrl.handleDisplayModeSelect(mode)'></display-mode-dropdown>\n"},function(e,t){e.exports="<div class='flex-center-grow drop-down edit-mode-selection-tab edit-mode-selection-dropdown' ng-mouseenter='$ctrl.showDropDown()' ng-mouseleave='$ctrl.hideDropDown()'>\n<span class='cc-icon-assistant-bucket-connect-domain'></span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow' ng-show='$ctrl.isShowDropDown()'>\n<ul class='sub-menu'>\n<li class='sub-menu-item text-with-icon' data-hook='translation-send-button' ng-click='$ctrl.sendContentElementsEN()'>\n<span class='switch-edit-mode-item'>\n<span class='sub-menu-label'>{{::'builder.template-translation-drop-down.send-translation' | translate}}</span>\n</span>\n</li>\n<li class='sub-menu-item text-with-icon' data-hook='translation-get-button' ng-click='$ctrl.createTranslatedTemplate(language.locale)' ng-repeat='language in $ctrl.availableLanguages track by ($index)'>\n<span class='switch-edit-mode-item'>\n<span class='sub-menu-label'>\n{{::'builder.template-translation-drop-down.preview-translation'| translate}}\n{{::language.locale | uppercase}} | {{::language.progress}}%\n</span>\n</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='wix-logo-icon wix-logo-old-design cc-icon-wix-logo' ng-click='$ctrl.switchToNewTopBar()' ng-show='!$ctrl.isPreviewDisplay()'></div>\n<task-animation class='loading' is-task-finished='$ctrl.shouldShowButtons()' is-task-running='!$ctrl.shouldShowButtons()' ng-if='!$ctrl.shouldShowButtons()' running-message='builder.loading'></task-animation>\n<div class='top-bar-sections -no-padding' ng-show='!$ctrl.isPreviewDisplay()'>\n<div class='top-bar-section' ng-if='$ctrl.shouldShowButtons()'>\n<pages-panel-dropdown active-tab='$ctrl.activeTab' class='dropdown-with-underline top-bar-tab tab-margin-right -accent-hover-text'></pages-panel-dropdown>\n<div class='top-bar-tab drop-down design-tab tab-margin-right -accent-hover-text' data-hook='design-tab-drop-down-section' ng-class='{&#39;active&#39;: $ctrl.activeTab === &#39;design&#39;}' ng-click='$ctrl.showSiteDesignDropdown()' ng-if='$ctrl.isInDesktopEditMode()' ng-mouseenter='$ctrl.showSiteDesignDropdown()' ng-mouseleave='$ctrl.hideSiteDesignDropdown()'>\n<div class='flex-center-grow'>\n<span>{{::'builder.design' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow design-tab-dropdown' data-hook='site-design-dropdown-menu' ng-attr-style='{{$ctrl.getSiteDesignDropdownStyle()}}' ng-show='$ctrl.shouldShowDropDownDesign()'>\n<ul class='sub-menu'>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-themes-button' ng-click='$ctrl.onClickDesign()'>\n<span>\n<span class='sub-menu-icon cc-icon-themes'></span>\n<span class='sub-menu-label'>{{::'design.themes.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding divider-container'>\n<span class='sub-menu-divider'></span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-colors-button' ng-click='$ctrl.openNewColorationPanel()'>\n<span>\n<span class='sub-menu-icon cc-icon-colours margin-style'></span>\n<span class='sub-menu-label'>{{::'design.colors.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-fonts-button' ng-click='$ctrl.openFonts()'>\n<span>\n<span class='sub-menu-icon cc-icon-fonts margin-style'></span>\n<span class='sub-menu-label'>{{::'design.fonts.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-animations-button' ng-click='$ctrl.openAnimationPanel()'>\n<span>\n<span class='sub-menu-icon cc-icon-animations margin-style'></span>\n<span class='sub-menu-label'>{{::'design.animations.title' | translate }}</span>\n</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<add-tab-dropdown-old active-tab='$ctrl.activeTab' class='top-bar-tab tab-margin-right -accent-hover-text' ng-if='$ctrl.isInDesktopEditMode()'></add-tab-dropdown-old>\n<div class='top-bar-tab divider design-section-divider tab-margin-right' ng-if='($ctrl.showSingleTpa() || $ctrl.showMultiTpa()) &amp;&amp; !$ctrl.mobileMode'></div>\n<div class='top-bar-tab tab-with-underline manage-single-tpa -accent-hover-text' data-hook='manage-single-tpa' manage-tpa-button-origin='ADI-topbar-single' manage-tpa-button-tpa-node='$ctrl.getRelevantTPANode(&#39;{{ $ctrl.singleTpaType() }}&#39;)' manage-tpa-button='$ctrl.singleTpaType()' ng-if='$ctrl.showSingleTpa()'>\n<div class='flex-center-grow'>\n<span>{{:: 'builder.manage-tpa-button' | translate }} {{$ctrl.singleTpa().menuItem.nameAsObject}}</span>\n</div>\n</div>\n<div class='top-bar-tab drop-down manage-multiple-tpa -accent-hover-text' ng-if='$ctrl.showMultiTpa()' ng-mouseenter='$ctrl.showManageDropdown()' ng-mouseleave='$ctrl.hideManageDropdown()'>\n<div class='flex-center-grow'>\n<span data-hook='manage-multiple-apps-button'>{{::'builder.manage-apps' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow' ng-show='$ctrl.shouldShowManageDropDown()' ng-style='$ctrl.getManageDropdownStyle()'>\n<ul class='sub-menu' data-hook='manage-multiple-apps-sub-menu'>\n<li class='sub-menu-item text-with-icon' manage-tpa-button-origin='ADI-topbar-multiple' manage-tpa-button-tpa-node='$ctrl.getRelevantTPANode(&#39;{{ tpaNaiveType }}&#39;)' manage-tpa-button='tpaNaiveType' ng-repeat='(tpaNaiveType, manageableTPA) in $ctrl.getManageableTPAs()'>\n<span>\n<span class='sub-menu-icon' ng-class='manageableTPA.menuItem.icon'></span>\n<span class='sub-menu-label'>{{::'builder.manage-tpa-sub-menu.label.' + manageableTPA.menuItem.nameAsObject.toLowerCase() | translate}}</span>\n</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class='top-bar-section' ng-if='$ctrl.shouldShowButtons()'>\n<div class='top-bar-tab drop-down' ng-if='$ctrl.debugFeatures()'>\n<div class='flex-center-grow' ng-mouseenter='$ctrl.shouldShowStartOver = true' ng-mouseleave='$ctrl.shouldShowStartOver = false'>\nDebug\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow' ng-show='$ctrl.shouldShowStartOver'>\n<ul class='sub-menu'>\n<li class='sub-menu-item' ng-click='$ctrl.startOver()'>Start Over</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<task-animation class='top-bar-tab wix-saving-old-design -attached-to-logo' data-hook='simple-saving-indicator' finished-message='builder.saved' hide-finished-message='$ctrl.flags.disableAutoSave' is-task-finished='$ctrl.showSavedMessage' is-task-running='$ctrl.showSavingMessage' ng-if='!$ctrl.anonService.isAnonymousUser()' running-message='builder.saving'></task-animation>\n<div cc-tooltip-position='bottom' cc-tooltip='menu_save' class='top-bar-tab tab-with-underline wix-saving-old-design -accent-hover-text' data-hook='topbar-manual-save' ng-click='$ctrl.onManualSave()' ng-if='$ctrl.isManualSave()'>\n<div class='flex-center-grow'>\n<span>{{::'builder.save' | translate }}</span>\n</div>\n</div>\n<switch-edit-mode-dropdown adi-automation='switch-edit-mode-dropdown' class='top-bar-tab drop-down tab-margin-right -accent-hover-text'></switch-edit-mode-dropdown>\n<template-translation-dropdown adi-automation='template-translation-dropdown' class='top-bar-tab drop-down tab-margin-right -accent-hover-text' ng-if='$ctrl.flags.templateTranslation'></template-translation-dropdown>\n<div class='top-bar-tab divider switch-edit-mode-divider'></div>\n<div class='top-bar-tab tab-with-underline help-tab tab-margin-right tab-margin-left -accent-hover-text' data-hook='help-tab' ng-click='$ctrl.openMainHelp()'>\n<div class='flex-center-grow'>\n<span class='top-bar-help-text'>{{::'general.help' | translate }}</span>\n<span class='top-bar-help-symbol cc-icon-help-12x7'></span>\n</div>\n</div>\n<upgrade-tab-popup class='top-bar-tab tab-margin-right tab-margin-left upgrade-tab-popup' meta-site-id='$ctrl.storyServices.metaSiteId' ng-if='!$ctrl.anonService.isAnonymousUser()'></upgrade-tab-popup>\n<div class='top-bar-tab divider site-upgrade-divider' ng-if='!$ctrl.anonService.isAnonymousUser()'></div>\n<div class='top-bar-tab divider site-upgrade-divider space' ng-if='$ctrl.anonService.isAnonymousUser()'></div>\n<site-dropdown-old class='top-bar-tab tab-margin-right -accent-hover-text' data-hook='site-dropdown' ng-if='!$ctrl.anonService.isAnonymousUser()'></site-dropdown-old>\n<div cc-tooltip-position='bottom' cc-tooltip='menu_preview' class='top-bar-tab tab-with-underline preview-tab tab-margin-right -accent-hover-text' data-hook='topbar-preview' ng-click='$ctrl.onClickPreview()'>\n<div class='flex-center-grow'>\n<span>{{::'builder.preview' | translate }}</span>\n</div>\n</div>\n<div class='top-bar-tab publish-tab tab-margin-right' ng-if='$ctrl.shouldShowPublish()'>\n<publish-button-old data-hook='topbar-publish'></publish-button-old>\n</div>\n<div class='top-bar-tab save-tab button-tab tab-margin-right -invert' data-hook='topbar-save' ng-click='$ctrl.onClickSave()' ng-if='$ctrl.anonService.isAnonymousUser()'>\n<div class='flex-center-grow'>\n<span>{{::'builder.save' | translate }}</span>\n</div>\n</div>\n<div class='top-bar-tab save-tab button-tab tab-margin-right -invert' data-hook='save-as-template' ng-click='$ctrl.onSaveAsTemplate()' ng-if='$ctrl.isTemplatesUser()'>\n<div class='flex-center-grow'>\n<span>{{::'builder.save-as-template' | translate }}</span>\n</div>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='wix-logo-icon wix-logo-old-design cc-icon-wix-logo' ng-click='$ctrl.switchToOldTopBar()'></div>\n<task-animation class='loading' is-task-finished='$ctrl.shouldShowButtons()' is-task-running='!$ctrl.shouldShowButtons()' ng-if='!$ctrl.shouldShowButtons()' running-message='builder.loading'></task-animation>\n<div class='top-bar-sections -no-padding'>\n<div class='top-bar-section' ng-if='$ctrl.shouldShowButtons()'>\n<back-button ng-if='$ctrl.getComponentsList().backButton'></back-button>\n<pages-tab ng-if='$ctrl.getComponentsList().pages'></pages-tab>\n<add-tab-dropdown ng-if='$ctrl.getComponentsList().add'></add-tab-dropdown>\n<site-design-dropdown ng-if='$ctrl.getComponentsList().design'></site-design-dropdown>\n<manage-tpa always-dropdown='false' class='top-bar-show-in-large-screen' ng-if='$ctrl.getComponentsList().tpa'></manage-tpa>\n<manage-tpa always-dropdown='true' class='top-bar-show-in-small-screen' ng-if='$ctrl.getComponentsList().tpa'></manage-tpa>\n<div class='top-bar-tab divider tab-margin-right' ng-if='$ctrl.getComponentsList().tpaDivider'></div>\n<zoom-controls class='top-bar-tab tab-margin-right' ng-if='$ctrl.getComponentsList().zoom'></zoom-controls>\n<div class='top-bar-tab divider tab-margin-right' ng-if='$ctrl.getComponentsList().zoom'></div>\n<undo-redo-controls class='top-bar-tab tab-margin-right not-clickable' ng-if='$ctrl.getComponentsList().undoRedo'></undo-redo-controls>\n<task-animation class='top-bar-tab not-clickable' data-hook='simple-saving-indicator' finished-message='builder.saved' hide-finished-message='$ctrl.flags.disableAutoSave' is-task-finished='$ctrl.showSavedMessage' is-task-running='$ctrl.showSavingMessage' ng-if='$ctrl.getComponentsList().autoSave' running-message='builder.saving'></task-animation>\n<div cc-tooltip-position='bottom' cc-tooltip='menu_save' class='manual-save top-bar-tab tab-with-underline -accent-hover-text' data-hook='topbar-manual-save' ng-click='$ctrl.onManualSave()' ng-if='$ctrl.isManualSave()'>\n<div class='flex-center-grow'>\n<span>{{::'builder.save' | translate }}</span>\n</div>\n</div>\n</div>\n<div class='top-bar-section' ng-if='$ctrl.shouldShowButtons()'>\n<switch-edit-mode-dropdown adi-automation='switch-edit-mode-dropdown' class='top-bar-tab drop-down tab-margin-right -accent-hover-text' ng-class='{&#39;switch-mode-ppp-preview&#39;: $ctrl.isPPPPreview()}'></switch-edit-mode-dropdown>\n<div class='top-bar-tab divider tab-margin-right' ng-if='$ctrl.getComponentsList().upgrade'></div>\n<div class='top-bar-tab drop-down' ng-if='$ctrl.debugFeatures()'>\n<div class='flex-center-grow' ng-mouseenter='$ctrl.shouldShowStartOver = true' ng-mouseleave='$ctrl.shouldShowStartOver = false'>\nDebug\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow' ng-show='$ctrl.shouldShowStartOver'>\n<ul class='sub-menu'>\n<li class='sub-menu-item' ng-click='$ctrl.startOver()'>Start Over</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<div class='top-bar-tab tab-with-underline help-tab tab-margin-right -accent-hover-text' data-hook='help-tab' ng-click='$ctrl.openMainHelp()' ng-if='$ctrl.getComponentsList().help'>\n<div class='flex-center-grow'>\n<span class='top-bar-show-in-large-screen'>{{::'general.help' | translate }}</span>\n<span class='top-bar-show-in-small-screen help-icon cc-icon-help-12x7'></span>\n</div>\n</div>\n<site-dropdown class='top-bar-tab tab-margin-right -accent-hover-text' data-hook='site-dropdown' ng-if='$ctrl.getComponentsList().settings'></site-dropdown>\n<div class='top-bar-tab tab-margin-right' ng-if='$ctrl.getComponentsList().message'>\n<span class='message'>{{ ::'builder.top-bar.preview.from-intro-msg' | translate }}</span>\n</div>\n<template-translation-dropdown adi-automation='template-translation-dropdown' class='top-bar-tab drop-down tab-margin-right -accent-hover-text' ng-if='$ctrl.flags.templateTranslation'></template-translation-dropdown>\n<div class='top-bar-tab divider tab-margin-right' ng-if='$ctrl.getComponentsList().upgrade'></div>\n<upgrade-tab-popup class='top-bar-tab tab-margin-right upgrade-tab-popup' meta-site-id='$ctrl.storyServices.metaSiteId' ng-if='$ctrl.getComponentsList().upgrade'></upgrade-tab-popup>\n<div cc-tooltip-position='bottom' cc-tooltip='menu_preview' class='top-bar-tab tab-with-underline preview-tab tab-margin-right -accent-hover-text' data-hook='topbar-preview' ng-click='$ctrl.onClickPreview()' ng-if='$ctrl.getComponentsList().preview'>\n<div class='flex-center-grow'>\n<span>{{::'builder.preview' | translate }}</span>\n</div>\n</div>\n<div adi-automation='edit site' class='top-bar-tab tab-margin-right edit-tab -invert tour-element-preview-back' data-hook='topbar-edit-site' ng-click='$ctrl.handleGoToEditClick()' ng-if='$ctrl.getComponentsList().editSite'>\n<div class='flex-center-grow'>\n<span ng-class='{&#39;edit-site-ppp-preview&#39;: $ctrl.isPPPPreview()}'>{{::'page-preset-previews.preview-mode.edit-site' | translate }}</span>\n</div>\n</div>\n<div class='top-bar-tab publish-tab tab-margin-right-small' ng-if='$ctrl.getComponentsList().publish'>\n<publish-button data-hook='topbar-publish'></publish-button>\n</div>\n<div class='top-bar-tab button-tab tab-margin-right -invert' data-hook='topbar-save' ng-click='$ctrl.onClickSave()' ng-if='$ctrl.getComponentsList().anonSave'>\n<div class='flex-center-grow'>\n<span>{{::'builder.save' | translate }}</span>\n</div>\n</div>\n<div class='top-bar-tab save-tab button-tab tab-margin-right -invert' data-hook='save-as-template' ng-click='$ctrl.onSaveAsTemplate()' ng-if='$ctrl.isTemplatesUser()'>\n<div class='flex-center-grow'>\n<span>{{::'builder.save-as-template' | translate }}</span>\n</div>\n</div>\n<account-menu ng-if='$ctrl.getComponentsList().account'></account-menu>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='pair-of-icons'>\n<div cc-tooltip-position='top' cc-tooltip='menu_undo'>\n<div adi-automation='undo-btn' class='cc-icon-undo clickable' data-hook='floating-stage-controls-undo-btn' ng-click='$ctrl.onUndo()' ng-disabled='!$ctrl.canUndo'></div>\n</div>\n<div cc-tooltip-position='top' cc-tooltip='menu_redo'>\n<div adi-automation='redo-btn' class='cc-icon-redo clickable with-padding' data-hook='floating-stage-controls-redo-btn' ng-click='$ctrl.onRedo()' ng-disabled='!$ctrl.canRedo'></div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='upgrade-drop-down'>\n<div class='upgrade-drop-down-content'>\n<div class='upgrade-drop-down-title'>{{::'builder.upgrade-dropdown.title' | translate }}</div>\n<ul class='upgrade-drop-down-list'>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-1' | translate }}\n</li>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-2' | translate }}\n</li>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-3' | translate }}\n</li>\n</ul>\n<div class='buttons'>\n<a class='upgrade-drop-down-button p9a-secondary -inverse -purple -small' data-hook='compare-plans-button' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade-direct-left' target='_blank'>{{::'builder.upgrade-dropdown.compare-plans' | translate }}</a>\n<a class='upgrade-drop-down-button p9-primary -purple -small' data-hook='upgrade-button' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade-direct-right' target='_blank'>{{::'builder.upgrade-dropdown.get-yearly-unlimited' | translate }}</a>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='upgrade-drop-down' ng-class='&#39;-sale&#39; + ($ctrl.discount || &#39;&#39;)'>\n<div class='upgrade-drop-down-content'>\n<div class='upgrade-drop-down-title' ng-bind-html='::&#39;builder.upgrade-dropdown.sale-title&#39; | translate:{ text:$ctrl.discount}'></div>\n<ul class='upgrade-drop-down-list'>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-1' | translate }}\n</li>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-2' | translate }}\n</li>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-3' | translate }}\n</li>\n</ul>\n<div class='buttons'>\n<a class='upgrade-drop-down-button p9a-secondary -inverse -purple -small' data-hook='compare-plans-button' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade-direct-left' target='_blank'>{{::'builder.upgrade-dropdown.compare-plans' | translate }}</a>\n<a class='upgrade-drop-down-button p9-primary -purple -small' data-hook='upgrade-button' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade-direct-right' target='_blank'>{{::'builder.upgrade-dropdown.upgrade-save' | translate:{ text:$ctrl.discount} }}</a>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<div class='flex-center-grow drop-down upgrade-tab' data-hook='upgrade-tab' ng-mouseenter='$ctrl.showDropDown()' ng-mouseleave='$ctrl.hideDropDown()'>\n<a class='upgrade-tab-text' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade-direct' target='_blank'>{{::'builder.upgrade' | translate }}</a>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow upgrade-tab-sub-menu' ng-show='$ctrl.isShowDropDown()'>\n<upgrade-popup-default data-hook='top-bar-upgrade-popup-default' meta-site-id='$ctrl.metaSiteId' ng-if='!$ctrl.saleService.isSale()'></upgrade-popup-default>\n<upgrade-popup-seasonal-campaign data-hook='top-bar-upgrade-popup-seasonal-campaign' discount='$ctrl.saleService.getSaleDiscount()' meta-site-id='$ctrl.metaSiteId' ng-if='$ctrl.saleService.isSale()'></upgrade-popup-seasonal-campaign>\n</div>\n</div>\n</div>\n"},function(e,t){e.exports="<span ng-if='$ctrl.toggleMode'>\n<span cc-tooltip-position='top' cc-tooltip='zoom_out' title='zoom out'>\n<div adi-automation='zoom out btn' class='cc-icon-zoom-out clickable' data-hook='floating-stage-controls-zoom-out-btn' ng-click='$ctrl.onZoomOut()' ng-show='$ctrl.canZoomOut'></div>\n</span>\n<span cc-tooltip-options='{{ {offsetX: -3} }}' cc-tooltip-position='top' cc-tooltip='zoom_in' title='zoom in'>\n<div adi-automation='zoom in btn' class='cc-icon-zoom-in clickable' data-hook='floating-stage-controls-zoom-in-btn' ng-click='$ctrl.onZoomIn()' ng-show='$ctrl.canZoomIn &amp;&amp; !$ctrl.canZoomOut'></div>\n</span>\n</span>\n<div class='pair-of-icons' ng-if='!$ctrl.toggleMode'>\n<div cc-tooltip-position='top' cc-tooltip='zoom_out' title='zoom out'>\n<div adi-automation='zoom out btn' class='cc-icon-zoom-out clickable' data-hook='floating-stage-controls-zoom-out-btn' ng-click='$ctrl.onZoomOut()' ng-disabled='!$ctrl.canZoomOut'></div>\n</div>\n<div cc-tooltip-options='{{ {offsetX: -3} }}' cc-tooltip-position='top' cc-tooltip='zoom_in' title='zoom in'>\n<div adi-automation='zoom in btn' class='cc-icon-zoom-in clickable' data-hook='floating-stage-controls-zoom-in-btn' ng-click='$ctrl.onZoomIn()' ng-disabled='!$ctrl.canZoomIn'></div>\n</div>\n</div>\n"},function(e,t){e.exports="<div ng-repeat='step in $ctrl.allSteps'>\n<intro-step-layout align-right-to='title' ng-if='$ctrl.showStep(step)'>\n<left>\n<div class='diptych-label' data-hook='input-label' ng-bind-html=':: $ctrl.getTitle(step) | translate'></div>\n<div class='diptych-sublabel' ng-bind-html=':: $ctrl.getContent(step) | translate' ng-if='::$ctrl.isShowContent(step, &#39;sublabel&#39;)'></div>\n</left>\n<right>\n<div ng-style='{display: &#39;none&#39;, top: &#39;300px&#39;, position: &#39;fixed&#39;, left: &#39;50%&#39;}'>\n<button ng-click='$ctrl.setCurrentStep(3000)'>1</button>\n<button ng-click='$ctrl.setCurrentStep(3100)'>2</button>\n<button ng-click='$ctrl.setCurrentStep(3200)'>3</button>\n</div>\n<div class='logo-color-extraction-wizard'>\n<button class='close-button' data-hook='close-wizard' ng-click='$ctrl.clickSecondaryButton(step)' ng-if='$ctrl.showStep(step)'>\n<i class='cc-icon-close-12'></i>\n</button>\n<business-card-logo-new data-hook='logo-replacer' enable-edit='$ctrl.enableEdit()' is-uploading='$ctrl.logoManager.uploadingLogo' just-replace-button='true' ng-class='{&#39;should-i-save-step&#39;: $ctrl.inShouldISaveStep()}' on-edit='$ctrl.logoManager.uploadLogo(file)' origin='$ctrl.logoClickOrigin()' show-wrapping-circle='$ctrl.showWrappingCircle()' upload-error='$ctrl.logoManager.hasUploadError' url='$ctrl.logoManager.getMediaUrl()'></business-card-logo-new>\n<palette-preview colors='$ctrl.logoColors' data-hook='palette-preview' is-animate='$ctrl.isAnimateColors(step)' ng-if='$ctrl.showPalettePreview()' on-done='$ctrl.doneShowingPalettePreview()' size='small'></palette-preview>\n<div class='description' ng-bind-html=':: $ctrl.getContent(step) | translate' ng-if='::$ctrl.isShowContent(step, &#39;description&#39;)'></div>\n</div>\n</right>\n<skip-action>\n<button adi-automation='logo-extractor-skip' class='empty-button' data-hook='secondary-button' ng-attr-type='button' ng-class='{&#39;-disabled&#39;: $ctrl.stepButtonWasClicked[step] || $ctrl.logoManager.uploadingLogo}' ng-click='$ctrl.clickSecondaryButton(step)' ng-disabled='$ctrl.stepButtonWasClicked[step] || $ctrl.logoManager.uploadingLogo' ng-if='$ctrl.showSecondaryButton(step)'>\n<span class='button-text skip-button' translate='{{:: $ctrl.getSecondaryButtonText(step) | translate}}'></span>\n</button>\n</skip-action>\n<next-action>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.isLoading'></cc-svg-icon>\n<button adi-automation='logo-extractor-create-palette' class='p9-primary next-button' data-hook='primary-button' ng-attr-type='button' ng-class='{&#39;-disabled&#39;: $ctrl.stepButtonWasClicked[step] || $ctrl.logoManager.uploadingLogo}' ng-click='$ctrl.clickPrimaryButton(step)' ng-disabled='$ctrl.stepButtonWasClicked[step] || $ctrl.logoManager.uploadingLogo' ng-if='$ctrl.showPrimaryButton(step)'>\n<span class='button-text' translate='{{::$ctrl.getPrimaryButtonText(step) | translate}}'></span>\n</button>\n</next-action>\n</intro-step-layout>\n</div>\n"},function(e,t){e.exports="<intro-step-layout align-right-to='center' ng-class='{&#39;large-intro-stage&#39;: $ctrl.flags.introShowMoreKits}'>\n<left>\n<div class='diptych-label' compile='::&#39;new-tour.welcome2.step2000.title&#39; | translate' data-hook='input-label'></div>\n<div class='diptych-sublabel' compile='::&#39;new-tour.welcome2.step2000.content&#39; | translate' data-hook='input-label'></div>\n</left>\n<right>\n<div class='arrows' ng-if='$ctrl.flags.introShowMoreKits'>\n<cc-svg-icon class='no-hover arrow-left' icon='primitives:intro-arrow' ng-class='{&#39;disabled&#39;: $ctrl.scrollLeftDisabled}' ng-click='$ctrl.scrollLeft($event)' ng-disabled='$ctrl.scrollLeftDisabled'></cc-svg-icon>\n<cc-svg-icon class='no-hover arrow-right' icon='primitives:intro-arrow' ng-class='{&#39;disabled&#39;: $ctrl.scrollRightDisabled}' ng-click='$ctrl.scrollRight($event)' ng-disabled='$ctrl.scrollRightDisabled'></cc-svg-icon>\n</div>\n<div class='kits clearfix' ng-if='!$ctrl.flags.introShowMoreKits'>\n<div class='tour-step-welcome-design-picker-item' ng-class='{selected: kit.id === $ctrl.selectedKitId}' ng-click='$ctrl.selectKit(kit.id)' ng-repeat='kit in $ctrl.kits | limitTo:6'>\n<kit-thumbnail-new adi-automation='{{kit.displayName}}' kit='kit'></kit-thumbnail-new>\n</div>\n</div>\n<div class='kits clearfix' ng-if='$ctrl.flags.introShowMoreKits'>\n<div class='tour-step-welcome-design-picker-item' ng-class='{selected: kit.id === $ctrl.selectedKitId}' ng-click='$ctrl.selectKit(kit.id)' ng-repeat='kit in $ctrl.kits'>\n<kit-thumbnail-new adi-automation='{{kit.displayName}}' kit='kit'></kit-thumbnail-new>\n</div>\n</div>\n</right>\n<next-action>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.isLoading'></cc-svg-icon>\n<button adi-automation='welcome-task-kit-continue' class='p9-primary next-button' ng-class='{&#39;-disabled&#39;: !$ctrl.selectedKitId}' ng-click='$ctrl.onKitContinueClick()' ng-disabled='!$ctrl.selectedKitId' ng-if='!$ctrl.isLoading'>\n<span ng-bind-html='::&#39;tour.button.continue&#39; | translate'></span>\n</button>\n</next-action>\n</intro-step-layout>\n"},function(e,t){e.exports="<div style='position: fixed; left: 200px; top: 120px; z-index: 2; display: none'>\n<button ng-click='$ctrl.goToInternalStep(1000)'>A</button>\n<button ng-click='$ctrl.goToInternalStep(2000)'>B</button>\n<button ng-click='$ctrl.goToInternalStep(3000)'>C</button>\n</div>\n<div class='welcome-start-step'>\n<div class='welcome-start-changing-section' ng-switch='$ctrl.currentStep'>\n<div class='welcome-task-start-substep welcome-task-start-substep-2000' ng-switch-when='2000'>\n<div ng-include='&#39;views/welcome/welcome-kits.html&#39;'></div>\n</div>\n<div class='welcome-task-start-substep welcome-task-start-substep-3000' ng-switch-when='3000'>\n<logo-color-extraction-wizard-new context='tour' enable-replace-logo='true' get-prepare-palette-promise='$ctrl.getPreparePalettePromise(logoOrigin)' logo-persistence=':: $ctrl.logoPersistence' on-create-palette-click='$ctrl.createLogoPaletteClick()' on-done='$ctrl.goToCreateHomepageConfirmationStep(logoColoration)' on-save-palette-click='$ctrl.saveLogoPaletteClick(logoColoration)' on-skip-click='$ctrl.skipLogoPaletteClick(logoExtractorStep)' update-logo-in-model='$ctrl.updateLogoInModel()'></logo-color-extraction-wizard-new>\n</div>\n</div>\n</div>\n"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.assign(window,{core:window.core||{},ob:window.ob||{}}),i(91),i(539),i(541),i(542),i(171),i(543),i(544),i(545);var n=i(172);angular.module("siteGeneratorBuilderInternal").service("headless",n.default);var o=i(575),r=i(227);angular.module("siteGeneratorBuilderInternal").component("headlessTest",{template:r,controller:o.default});var a=i(576);angular.module("siteGeneratorBuilderInternal").factory("consumerBiLoggerSanitizer",function(){return a})},function(e,t,i){"use strict";function n(e,t){function i(e){var t=e[0],i=t.compile;return angular.extend(t.scope,{menuContainerClass:"@?mdMenuContainerClass"}),t.compile=function(){var e=i.apply(this,arguments);return function(t,i,n){var o=i.find("md-virtual-repeat-container"),r=n.mdMenuContainerClass?n.mdMenuContainerClass:"";o.addClass(r),e.apply(this,arguments)}},e}t.changeBusinessDetails&&(e.decorator("mdAutocompleteDirective",i),i.$inject=["$delegate"])}n.$inject=["$provide","flagsProvider"],Object.defineProperty(t,"__esModule",{value:!0}),i(540),angular.module("siteGeneratorCommon",["siteGeneratorStaticsConsumerTranslations","siteGeneratorStaticsPreload","adiAppCore","commonControlsApp","smartAssist","textRepository","organizeMediaDialog","onboardingServerJsApiApp","siteGeneratorStaticsMetadataApp","wixAngular","wixAngularStorage","LocalStorageModule","cgNotify"]),angular.module("adiIntroCommon",[]),angular.module("adiIntroInternal",[]),angular.module("adiIntroAppInternal",["adiIntroCommon","adiIntroInternal","adiIntroTemplates"]),angular.module("siteGeneratorIntroInternal",["adiAppCore"]),angular.module("siteGeneratorContentManagerInternal",[]),angular.module("siteGeneratorLocationManagerInternal",[]),angular.module("siteGeneratorTourManagerInternal",[]),angular.module("siteGeneratorBuilderInternal",[]),angular.module("siteGeneratorEditorInternal",[]),angular.module("siteGeneratorPresetInternal",[]),angular.module("siteGeneratorStaticsConsumerAppInternal",["siteGeneratorCommon","siteGeneratorContentManagerInternal","siteGeneratorLocationManagerInternal","siteGeneratorTourManagerInternal","siteGeneratorBuilderInternal","siteGeneratorIntroInternal","adiIntroAppInternal","siteGeneratorEditorInternal","siteGeneratorPresetInternal"]),angular.module("siteGeneratorStaticsConsumerAppConfig",["siteGeneratorStaticsConsumerAppInternal","siteGeneratorIntroInternal","adiIntroAppInternal","ui.router","siteGeneratorStaticsConsumerAppFlags"]),angular.module("siteGeneratorStaticsConsumerDebug",[]),angular.module("siteGeneratorStaticsConsumerApp",["wix.ab-translate","siteGeneratorStaticsConsumerAppConfig","exceptionOverwrite","ui.router","google.places","ui.tree","xeditable","720kb.socialshare","ngAnimate","ngMessages","ngMaterial","dndLists","cgNotify","wix.common.bi","color.picker"]).config(["$translateProvider","abTranslateProvider","experimentManagerProvider",function(e,t,i){var n=e.preferredLanguage(),o=e.translations()[n],r=t.abTranslate.default(i.experiments,o);e.translations(n,r),e.use(n)}]).config(n).controller("AppCtrl",["$scope","assistantManager","flags","$injector","nodeFetcher","initService",function(e,t,i,n,o,r){var a=this,s=function(){a.isTpa=o.isCurrentNodeTpa()};(this.$onInit=function(){r.loaded().then(function(){s()})},e.$on("$stateChangeSuccess",function(e,t){var i=t.url.split("/").filter(function(e){return""!==e});i.length>0&&(a.state=i[0]),s()}),e.$watch(function(){return t.isInActiveTask()},function(e){return a.isAssistantOn=e}),this.flags=i,i.debug)&&n.get("configuratorManager").init()}])},function(e,t){angular.module("siteGeneratorStaticsConsumerAppFlags",[]).config(["clientTopology","experimentManagerProvider","experimentParserProvider","flagsProvider","ccFlagsProvider",function(e,t,i,n,o){var r=void 0!==e.experiments,a=r?Object.keys(e.experiments):[];r&&t.setExperiments(e.experiments),a.forEach(function(e){var r=t.getExperimentValue(e),a=i.getFlagData(e,r);n[a.name]=a.value,o[a.name]=a.value});var s=window.location.href.split("#").map(function(e){return e.split("?")[1]}).filter(function(e){return e}).join("&");(s=s.match("^&+$")?"":s)&&s.split("&").map(function(e){var t=e.split("="),i=t[0],r=t[1];void 0===r&&(r=!0),"true"!==r&&"false"!==r||(r="true"===r),n[i]=r,o[i]=r}),n.newIntroDesignAnon&&(n.newIntroDesign=!0),n.disableUndoRedoAndAutoSave&&(n.disableUndoRedo=!0,n.disableAutoSave=!0),n.dataFlags=t.isExperimentEnabled("specs.ob.dataFlags")}])},function(e,t,i){"use strict";var n=window.ob=window.ob||{};!function(e){e.INTRO_STATES={INTRO:"intro",INTRO_CATEGORY_SEARCH:"intro.category-search",INTRO_BLOCKED_CATEGORY:"intro.blocked-category",INTRO_SERVICES_OFFER:"intro.service-offer",INTRO_IMPORT_SITE_CONTENT:"intro.import-site-content",INTRO_BUSINESS_NAME:"intro.business-name",INTRO_BUSINESS_LOCATION:"intro.business-location",INTRO_BUSINESS_DATES:"intro.business-dates",INTRO_EVENT_DETAILS:"intro.event-details",INTRO_SEARCH_CONFIRM:"intro.search-confirm",INTRO_IMPORT_SITE_CONFIRM:"intro.import-site-confirm",INTRO_SELECT_USER:"intro.select-user",INTRO_EDIT_USER:"intro.edit-user",INTRO_RECAPTCHA:"intro.recaptcha",INTRO_YOUTUBE_CHANNEL:"intro.youtube-channel"},e.onRoutEnter=function(t,i,n,o){o!==e.INTRO_STATES.INTRO_CATEGORY_SEARCH&&o!==e.INTRO_STATES.INTRO_RECAPTCHA&&o!==e.INTRO_STATES.INTRO_BLOCKED_CATEGORY&&n.AnonymousFlowEnabled&&!i.hasSession&&t.goToIntroCategorySearch()}}(M||(M={})),window.intro=M,function(e){e.BusinessCategoryIds={"0a375f98cd5e0709300307cb|a4def3d162781f1e96ee1956":["Maintenance Tutorials"],"6201379b79ae02103b8afed3|a4def3d162781f1e96ee1956":["Nature Film Release","Nature Film Coming Soon"],"e8e9dfeb51a3de02e02d18a3|a4def3d162781f1e96ee1956":["Game Show Release","Game Show Coming Soon"],"05304077275b997197ad1349|a4def3d162781f1e96ee1956":["Talk Show Release","Talk Show Coming Soon"],"9dfc2e7b8728e1f0689e5517|a4def3d162781f1e96ee1956":["Reality TV Show Release","Reality TV Show Coming Soon"],"793bbfab7dda1e9e00828b21|a4def3d162781f1e96ee1956":["Western Film Release","Western Film Coming Soon"],"1b899bf147031d13e845f269|a4def3d162781f1e96ee1956":["War Film Release","War Film Coming Soon"],"5804f384c781ce1960408136|a4def3d162781f1e96ee1956":["Sports Film Release","Sports Film Coming Soon"],"ecfe83d6fe85ea3e50d3e35b|a4def3d162781f1e96ee1956":["Sci-Fi Film Release","Sci-Fi Film Coming Soon"],"6244f21e5bccdbc8971e42e7|a4def3d162781f1e96ee1956":["Romantic Film Release","Romantic Film Coming Soon"],"677a9d6a7959e7bda1b73d03|a4def3d162781f1e96ee1956":["News Film Release","News Film Coming Soon"],"98d377b673c40d4dc9d096d8|a4def3d162781f1e96ee1956":["Musical Film Release","Musical Film Coming Soon"],"676166d2cbe32deb1935f4b3|a4def3d162781f1e96ee1956":["Horror Film Release","Horror Film Coming Soon"],"4b1010aef8d7d114a7c23774|a4def3d162781f1e96ee1956":["History Film Release","History Film Coming Soon"],"64f0c07b0ca68d9f6daa6c9b|a4def3d162781f1e96ee1956":["Fantasy Film Release","Fantasy Film Coming Soon"],"6d5d6551f9662c28a04f921b|a4def3d162781f1e96ee1956":["Dramatic Film Release","Dramatic Film Coming Soon"],"873685f13a710d1b85f75ea7|a4def3d162781f1e96ee1956":["Documentary Film Release","Documentary Film Coming Soon"],"1ce61ada707328245639c1d9|a4def3d162781f1e96ee1956":["Instructional Film Release","Instructional Film Coming Soon","Educational Videos"],"c3cc5f40cea06b3f18fccf33|a4def3d162781f1e96ee1956":["Crime Film Release","Crime Film Coming Soon"],"61fc9a08346a5521a23931a0|a4def3d162781f1e96ee1956":["Comedy Film Release","Comedy Film Coming Soon"],"1409d7b5501e76ff76bccb59|a4def3d162781f1e96ee1956":["Animated Film Release","Animated Film Coming Soon"],"c866690d767f2ab3e6aad483|a4def3d162781f1e96ee1956":["Adventure Film Release","Adventure Film Coming Soon"],"a9c60784fe911026fd95da93|a4def3d162781f1e96ee1956":["Action Film Release","Action Film Coming Soon"],"b75c188b9cca9868ec12f5cd|a4def3d162781f1e96ee1956":["Personal Film Release","Personal Film Coming Soon"],"d160fb8c5f74fa03c42a8237|a4def3d162781f1e96ee1956":["World Music Video"],"56b57d84149bb7576d8d9549|a4def3d162781f1e96ee1956":["Rock Music Video"],"1c5be3fa9836cb451e2cbdad|a4def3d162781f1e96ee1956":["Reggae Music Video"],"75d7674bed75736c13849c4c|a4def3d162781f1e96ee1956":["R&B Music Video"],"a2b51b698b3df87d34cb92db|a4def3d162781f1e96ee1956":["Pop Music Video"],"5983b861c14f3fb64d28223d|a4def3d162781f1e96ee1956":["Latin Music Video"],"50c274987982e7528ad6a0a4|a4def3d162781f1e96ee1956":["Jazz Music Video"],"159934465beb41044cd96065|a4def3d162781f1e96ee1956":["Indie Music Video"],"d76607cc28ce4c782fc64e1e|a4def3d162781f1e96ee1956":["Hip Hop Music Video"],"6b845e2edb70fe7d1055eddb|a4def3d162781f1e96ee1956":["Electronic Music Video"],"0977905b91c611a49b399645|a4def3d162781f1e96ee1956":["Country Music Video","Banjo Lesson Videos"],"8c53f2d630df0dfe199f271d|a4def3d162781f1e96ee1956":["Classical Music Video","Classical Instrument Lesson Videos"],"88b56978690cff09a18247c1|a4def3d162781f1e96ee1956":["Music Video"],"8c4956f97c598a290eecb608|a4def3d162781f1e96ee1956":["Casting Agency","Casting Director"],"f2a506932ffe6ce79d2daf7c|a4def3d162781f1e96ee1956":["Singing Videos"],"e0235c44640bfa8f264ccde2|a4def3d162781f1e96ee1956":["Dancing Videos"],"33f52ab8212c789c8e6363d8|a4def3d162781f1e96ee1956":["Beauty Videos"],"1bc4097af1d4907daadf2cd1|a4def3d162781f1e96ee1956":["Cooking Videos"],"661c50553252c18a10807143|a4def3d162781f1e96ee1956":["Gaming Videos"],"e1e196e07453fd7cc298d685|a4def3d162781f1e96ee1956":["Meditation Videos"],"2731a34ef2fe1d287c26869c|a4def3d162781f1e96ee1956":["Pilates Videos"],"92ddb10e7059f7749cd45db1|a4def3d162781f1e96ee1956":["Yoga Videos"],"5fd15df9a305148cdf19519a|a4def3d162781f1e96ee1956":["Physical Fitness Program"],"0e72b2a150d4b1ffad033c6a|a4def3d162781f1e96ee1956":["Technology Tutorials"],"eae1f66a171752beec00e1dc|a4def3d162781f1e96ee1956":["Car Tutorials"],"8144e0f66cb89c74fa97dc8d|a4def3d162781f1e96ee1956":["Woodwind Instrument Lesson Videos"],"74b34e71b96f72dd94777135|a4def3d162781f1e96ee1956":["Violin Lesson Videos"],"a36d06339108914145893a40|a4def3d162781f1e96ee1956":["Tuba Lesson Videos"],"c685a9e33ca18ca2f0b8499a|a4def3d162781f1e96ee1956":["Trumpet Lesson Videos"],"3471ae92dd9fd7c88b77661a|a4def3d162781f1e96ee1956":["String Instrument Lesson Videos"],"6d9cba186f6d05501f76f855|a4def3d162781f1e96ee1956":["Saxophone Lesson Videos"],"cfd1f8d321e613d71384ff30|a4def3d162781f1e96ee1956":["Piano Lesson Videos"],"242942961606f7d63f0f8051|a4def3d162781f1e96ee1956":["Percussion Instrument Lesson Videos"],"2af02da2c6c0bb2545358f81|a4def3d162781f1e96ee1956":["Organ Lesson Videos"],"27f6903ca7e3541e8df7d619|a4def3d162781f1e96ee1956":["Oboe Lesson Videos"],"84b99f2c8237165f87cda608|a4def3d162781f1e96ee1956":["Guitar Lesson Videos"],"411201edae34ec441551d9b9|a4def3d162781f1e96ee1956":["Flute Lesson Videos"],"1067ea161da95b70cedcb749|a4def3d162781f1e96ee1956":["Keyboard Lesson Videos"],"cb3747389d1dd8b51d1bd2b9|a4def3d162781f1e96ee1956":["Drums Lesson Videos"],"52d02604deb4c399271b410f|a4def3d162781f1e96ee1956":["Clarinet Lesson Videos"],"aa23342d1ca53d1876c473fd|a4def3d162781f1e96ee1956":["Cello Lesson Videos"],"6c2187be3c5b3b79e134c978|a4def3d162781f1e96ee1956":["Brass Instrument Lesson Videos"],"b78021beaa0bec3d2095a7a7|a4def3d162781f1e96ee1956":["Bassoon Lesson Videos"],"fbcee9beb67423a8a10b684f|a4def3d162781f1e96ee1956":["Bass Guitar Lesson Videos"],"53131daf050c893df1427113|a4def3d162781f1e96ee1956":["Accordion Lesson Videos"],"9ae489697fe8f69572c8a4db|a4def3d162781f1e96ee1956":["Music Lesson Videos"],"c963797950432a1a33b4e6b5|a4def3d162781f1e96ee1956":["Healthy Lifestyle Videos"],"5d89811ed01b7836cb03e0dc|a4def3d162781f1e96ee1956":["Film Student Portfolio","Videographer","Cinematographer"],"cd8729318924b8cec834a584|a4def3d162781f1e96ee1956":["Lighting and Rigging Company","Lighting and Rigging Technician"],"cb037fabb49429c301ddbddc|a4def3d162781f1e96ee1956":["Location Management Company","Location Manager"],"c6d4706894a4639b006c9c96|a4def3d162781f1e96ee1956":["Screenwriter"],"18acdc1f830ad065fb3855cb|a4def3d162781f1e96ee1956":["Stunt Performer"],"fb51462411cb89e0424cf886|a4def3d162781f1e96ee1956":["Production Design Agency"],"ce5ee0e29c1a76f1361c3a52|a4def3d162781f1e96ee1956":["Wedding & Events Video Company","Wedding & Events Videographer"],"2de6367f95c10fe699e6f60a|a4def3d162781f1e96ee1956":["Film Editor"],"ff467dc0618868b8686ab6a0|72e1e5106f07cecc6118594d":["First Communion"],"dae5521297b842d084c2a323|72e1e5106f07cecc6118594d":["Thanksgiving Party"],"e552929f498a62a98ba5a3f7|72e1e5106f07cecc6118594d":["Garage Sale"],"86647f3959a95da0d01b4ce1|72e1e5106f07cecc6118594d":["Bake Sale"],"49f6c2f24d9963a64357e23d|72e1e5106f07cecc6118594d":["Community Event"],"6af7cc1dfdc9b3188860f7d2|72e1e5106f07cecc6118594d":["Rally"],"bdfd6123b78ba6d75b56948f|72e1e5106f07cecc6118594d":["Business Dinner","Lunch & Learn"],"a474d921c915743229c023a9)|72e1e5106f07cecc6118594d":["Team Building Activity"],"6d789ff6f3e6441c4ab61fc6|72e1e5106f07cecc6118594d":["Kindergarten Graduation"],"f46a52ff1b200a44d6d2cf32|72e1e5106f07cecc6118594d":["Jazz Festival","Jazz Concert"],"8eb097e2b6da2432b72979e6|72e1e5106f07cecc6118594d":["Reunion"],"3fc5b2f667f5bff161d9a830|72e1e5106f07cecc6118594d":["Festival"],"a561e567739d6c5e167dd931|72e1e5106f07cecc6118594d":["Color Run"],"f577ad2502b05abc017c6719|72e1e5106f07cecc6118594d":["Yoga Event"],"062b881aa98542115be627c5|72e1e5106f07cecc6118594d":["Triathlon"],"0c09fa9e5c92a549e5d8f7ea|72e1e5106f07cecc6118594d":["Fitness Event"],"dd40bdb5aa4f1f4b01631cc2|72e1e5106f07cecc6118594d":["Meetup"],"d74be3f8696fb6f0c8e03397|72e1e5106f07cecc6118594d":["Bitcoin Meetup"],"9b721a6ae2292d23982c52c7|72e1e5106f07cecc6118594d":["Movie Premiere","Award Ceremony"],"296fe01647ad3a719c62e491|72e1e5106f07cecc6118594d":["Book Launch"],"5bcfed93f5b01fc3b763c389|72e1e5106f07cecc6118594d":["Masquerade"],"1572d599fb21e196e1d025ad|72e1e5106f07cecc6118594d":["Dinner Party"],"fa88f132ec8072be3e405e93|72e1e5106f07cecc6118594d":["Cocktail Party","Holiday Party"],"0bf42735763b5b482737de33|72e1e5106f07cecc6118594d":["Theatrical Performance"],"0f0505d6cd59359ac1622a6f|72e1e5106f07cecc6118594d":["Destination Wedding"],"86d10658547a7bed37f19208|72e1e5106f07cecc6118594d":["Birthday Party"],"3820738a40e58d1a876bcfc6|72e1e5106f07cecc6118594d":["Event","Save The Date"],"e67b96b94032d874d15c3cc2|72e1e5106f07cecc6118594d":["Promotional Event","Trade Show"],"23e6c60935419e2732a37720|72e1e5106f07cecc6118594d":["Corporate Event","Business Conference"],"3e1e5fc1b08831cc76d7a49a|72e1e5106f07cecc6118594d":["Student Orientation"],"c68957eacb2f68e9d6fd845f|72e1e5106f07cecc6118594d":["Orientation","Networking Event"],"3278c5b2f87b16a681fb354b|72e1e5106f07cecc6118594d":["Baptism"],"8b2dbaf9716ee08ac2028939|72e1e5106f07cecc6118594d":["Bar Mitzvah"],"9a888244f403212ccff7b6dd|72e1e5106f07cecc6118594d":["Grand Opening"],"ffc31798c6f62c75b0011f31|72e1e5106f07cecc6118594d":["Gala"],"b5669a8c6c16e58d95c07131|72e1e5106f07cecc6118594d":["Fourth of July Party"],"38d99f20aaf10ea07a1e9c2f|72e1e5106f07cecc6118594d":["Halloween Party"],"069b4d56303557fd09146ad8|72e1e5106f07cecc6118594d":["Christmas Party"],"cf3c92633b07cf46a80fcb61|72e1e5106f07cecc6118594d":["Graduation"],"ef3f849736779700d5270213|72e1e5106f07cecc6118594d":["Baby Shower"],"b26ac8f5197d483df862b217|72e1e5106f07cecc6118594d":["Wedding Save The Date","Wedding"],"9b4f31e4074251ea86190a36|72e1e5106f07cecc6118594d":["Fundraising Event"],"63f2c45f1db6ecffe4354482|72e1e5106f07cecc6118594d":["Music Festival"],"e97fb2ba8917d20dd0b56c5d|72e1e5106f07cecc6118594d":["Food Festival"],"f9254c6e3acbddd29eac21f7|72e1e5106f07cecc6118594d":["Bridal Shower"],"2b2cc9b9c39ed71dc2a86297|72e1e5106f07cecc6118594d":["Jack and Jill Party","Party"],"c0c2fa79870437a2022edcd4|72e1e5106f07cecc6118594d":["Bachelorette Party"],"ee5461760bbcbd83e49e45ae|72e1e5106f07cecc6118594d":["Bachelor Party"],"7113fb8b7ad2b9ca673fb634|72e1e5106f07cecc6118594d":["Women's Race"],"a28225f2dc09e104b02a4031|72e1e5106f07cecc6118594d":["Race"],"861c25dff819d7012cddca79|72e1e5106f07cecc6118594d":["Gallery Event"],"5960328755ad514967c32bac|72e1e5106f07cecc6118594d":["Pool Party"],"e0235c44640bfa8f264ccde2|72e1e5106f07cecc6118594d":["Dance Performance"],"2f51db3d3e5557a992a38f2b|72e1e5106f07cecc6118594d":["Country Concert"],"a2b51b698b3df87d34cb92db|72e1e5106f07cecc6118594d":["Pop Concert"],"75d7674bed75736c13849c4c|72e1e5106f07cecc6118594d":["R&B Concert"],"1c5be3fa9836cb451e2cbdad|72e1e5106f07cecc6118594d":["Reggae Concert"],"8319c81cf81f45eaaff9a041|72e1e5106f07cecc6118594d":["Opera Concert"],"d160fb8c5f74fa03c42a8237|72e1e5106f07cecc6118594d":["World Music Concert"],"5983b861c14f3fb64d28223d|72e1e5106f07cecc6118594d":["Latin Music Concert"],"896acefaeb443d01f691c978|72e1e5106f07cecc6118594d":["Electronic Concert"],"56b57d84149bb7576d8d9549|72e1e5106f07cecc6118594d":["Rock Concert"],"0b093ca0001bd666ed74cd1c|72e1e5106f07cecc6118594d":["Concert"],"9e9227a5331edf7055628855|72e1e5106f07cecc6118594d":["Classical Music Concert"],"afe23dccbb76850e2db52aae|72e1e5106f07cecc6118594d":["Performance"],"b95e0b911f45222c20f7a2c0|72e1e5106f07cecc6118594d":["Women's Conference"],"048c5d5f0c5b82c1d7de96da|72e1e5106f07cecc6118594d":["Conference"],"bd232ea45da3f093ca7bef2c|72e1e5106f07cecc6118594d":["Engagement Party"],"0646805d3d19e3d6d0598e1f|76794a3aba43f3872dc8fffd":["Fantasy Sports Forum"],"c752ffa3a65a48233c4b4c0d|76794a3aba43f3872dc8fffd":["Money Saving Forum","Business Forum","Forex Forum"],"e23b705a1ee19e4040582207|76794a3aba43f3872dc8fffd":["Architectural Forum"],"6cdf0084539bdc4b14766ffb|76794a3aba43f3872dc8fffd":["Design Forum"],"2425027cb83cba8b1ce84a4f|76794a3aba43f3872dc8fffd":["Beauty Forum"],"9b1ebdc2a2db1cd105e15e16|76794a3aba43f3872dc8fffd":["Fashion Forum"],"e51e6808f8a9fb02fd086d7d|76794a3aba43f3872dc8fffd":["Relationship Forum"],"cf51e7f7238a39cbae0efb91|76794a3aba43f3872dc8fffd":["Music Forum"],"36e3f8a3f92d475495fd2282|76794a3aba43f3872dc8fffd":["Wedding Forum"],"a1573d776ca3657ad977e867|76794a3aba43f3872dc8fffd":["Medical Forum"],"0a375f98cd5e0709300307cb|76794a3aba43f3872dc8fffd":["DIY Forum"],"8fd91c081dc84ddc472694bd|76794a3aba43f3872dc8fffd":["Interior Design Forum"],"1b99ddaa1e1be2546196e37a|76794a3aba43f3872dc8fffd":["Pregnancy Forum"],"756fc13e2661c96530a0e8e6|76794a3aba43f3872dc8fffd":["Holiday Forum"],"29e05c2a8e05162a7083ee4b|76794a3aba43f3872dc8fffd":["Parenting Forum"],"3c9f40294eaeba1b3da4ac2e|76794a3aba43f3872dc8fffd":["Entertainment Forum"],"48347af720adb587a286adee|76794a3aba43f3872dc8fffd":["Pet Forum"],"a0512671ab2681883359b854|76794a3aba43f3872dc8fffd":["Food Forum"],"680c5dc12a86ef3186c917d3|76794a3aba43f3872dc8fffd":["Health Forum"],"cb037fabb49429c301ddbddc|76794a3aba43f3872dc8fffd":["Travel Forum"],"0b7d96701f1e7e64edc6f506|76794a3aba43f3872dc8fffd":["Hunting Forum"],"2731a34ef2fe1d287c26869c|76794a3aba43f3872dc8fffd":["Pilates Forum"],"92ddb10e7059f7749cd45db1)|76794a3aba43f3872dc8fffd":["Yoga Forum"],"3141bbacaf6a9dd3c40bbc7a|76794a3aba43f3872dc8fffd":["Sports Forum"],"bd92073ebb8434c3391471af|76794a3aba43f3872dc8fffd":["Elder Care Forum"],"9e7ea28faf4e7ab40885ed3c|76794a3aba43f3872dc8fffd":["Political Forum"],"dc6489c9e4cb7896019aeecf|76794a3aba43f3872dc8fffd":["Social Forum"],"0f4d9b38bd12695a031bbd8f|76794a3aba43f3872dc8fffd":["Photography Forum"],"9775a021fc617add84878b9d|76794a3aba43f3872dc8fffd":["Advertising Forum"],"b1cfefca6cf60c3a5242b974|76794a3aba43f3872dc8fffd":["Tech Forum"],"d9afb557af9390741c5ce35b|76794a3aba43f3872dc8fffd":["Education Forum"],"9b19d7e94cccae8b611dda8b|76794a3aba43f3872dc8fffd":["Minecraft Forum"],"661c50553252c18a10807143|76794a3aba43f3872dc8fffd":["Gaming Forum"],"84c7367d71a21b8d9ca09480|76794a3aba43f3872dc8fffd":["Coaching Forum"],"f5bf218b530fca6bfcf37272|76794a3aba43f3872dc8fffd":["Agriculture Forum"],"566fe71416a2157a85f712f8|76794a3aba43f3872dc8fffd":["Islam Forum"],"8d0080cece24e80efc3d64d7|76794a3aba43f3872dc8fffd":["Christianity Forum"],"25ba0d305c886cf1434c9e61|76794a3aba43f3872dc8fffd":["Law Forum"],"37e020bd06d5b145b636cc1d|76794a3aba43f3872dc8fffd":["Judaism Forum"],"fb9891451b4bab5e0a8043d2|76794a3aba43f3872dc8fffd":["Job Forum"],"500a3666614ffdaee665af40|76794a3aba43f3872dc8fffd":["Real Estate Forum"],"d557f60d88b5faf6bc596ab9|76794a3aba43f3872dc8fffd":["Automobile Forum"],"9b549be25f14dfb0cfff9de6|76794a3aba43f3872dc8fffd":["Arts Forum"],"c6d4706894a4639b006c9c96|76794a3aba43f3872dc8fffd":["Authors Forum"],"b873456d2c444118efed2c61|76794a3aba43f3872dc8fffd":["Performing Arts Forum"],"1248c826f78d9f1de78d051a|76794a3aba43f3872dc8fffd":["Forum"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d05":["Vegan Food Truck","Vegetarian Food Truck","Crepes Food Truck","Cupcakes Food Truck","Ice Cream Food Truck","Dessert Food Truck","Coffee Food Truck","Juice Food Truck","Dim Sum Food Truck","Doner Kebab Food Truck","Falafel Food Truck","Sandwiches Food Truck","Salad Food Truck","Fish & Chips Food Truck","Fried Chicken Food Truck","Pizza Food Truck","Burger Food Truck","African Food Truck","Kosher Food Truck","Halal Food Truck","Turkish Food Truck","Middle Eastern Food Truck","Brazilian Food Truck","South American Food Truck","Jamaican Food Truck","Cuban Food Truck","Caribbean Food Truck","Mexican Food Truck","Malaysian Food Truck","Indian Food Truck","Thai Food Truck","Chinese Food Truck","Vietnamese Food Truck","Korean Food Truck","Japanese Food Truck","Asian Food Truck","Greek Food Truck","Spanish Food Truck","Italian Food Truck","Mediterranean Food Truck","Tex-mex Food Truck","Hawaiian Food Truck","Cajun Food Truck","Gourmet Food Truck","Fast Food Food Truck","Food Truck","Home Meal Delivery","Food Delivery Service","Doner Kebab Stand","Hot Dog Cart","Ice Cream Cart","Food Cart","Food Court","Cantine","Internet Cafe","Cafeteria","Snack Bar","Salad Bar","Oyster Bar","Soup Bar","Dessert Cafe","Sandwich Cafe","Juice Bar","Ramen Bar","Jamaican Pub","Cuban Bar","Mexican Bar","German Bar","Spanish Bar","Tiki Bar","Irish Pub","Hotel Bar","Piano Bar","Cafe","Taco Stand","French Fries Stand","All You Can Eat Restaurant","Fusion Restaurant","Vegan Restaurant","Vegetarian Restaurant","Family Restaurant","Brunch Restaurant","Breakfast Restaurant","Seafood Restaurant","Seafood Market","Fish Restaurant","Dim Sum Restaurant","Sushi Restaurant","Noodles Restaurant","Doner Restaurant","Hummus Restaurant","Falafel Restaurant","Fish & Chips Restaurant","Tacos Restaurant","Pizza Restaurant","Barbeque Restaurant","Burger Restaurant","Ethiopian Restaurant","Horn African Restaurant","East African Restaurant","South African Restaurant","Central African Restaurant","African Food Restaurant","Kosher Food Restaurant","Israeli Restaurant","Palestinian Restaurant","Syrian Restaurant","Algerian Restaurant","Tunisian Restaurant","Egyptian Restaurant","Libyan Restaurant","Yemen Restaurant","Persian Restaurant","Halal Restaurant","Turkish Restaurant","Moroccan Restaurant","Lebanese Restaurant","Middle Eastern Restaurant","Argentine Restaurant","Brazilian Restaurant","Peruvian Restaurant","South American Restaurant","I-Tal Food Restaurant","Jamaican Restaurant","Cuban Restaurant","Caribbean Restaurant","Guatemalan Restaurant","Mexican Restaurant","Latin American Restaurant","Malaysian Restaurant","Indian Restaurant","Thai Restaurant","Chinese Restaurant","Vietnamese Restaurant","Korean Restaurant","Japanese Restaurant","Asian Restaurant","German Restaurant","Greek Restaurant","Spanish Restaurant","Italian Restaurant","French Restaurant","Mediterranean Restaurant","Eastern European Restaurant","European Restaurant","British Food Restaurant","Tex-Mex Restaurant","Hawaiian Restaurant","Cajun Restaurant","African American Restaurant","Restaurant","American Restaurant","Steak House","Pastry Chef","Private Chef","Chef","Dairy Products Distributor"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d13":["British Pub"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d06":["Olive Oil Distributor"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d07":["Olive oil shop"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d08":["Donuts Shop"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d09":["Cupcake Shop"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d10":["Italian Deli"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d11":["Halal Grocery Store"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d12":["Bar"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d14":["Brewery"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d15":["Cocktail Bar"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d16":["sports bar"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d17":["wine bar"],"f9b2c722c83ab893929ddd3f|d87632e3733a0aa8ead89d18":["Wedding Bakery"],"629e1bb039a3b42a3cc3a099|ac8eb72e03a52e533dd93cac":["Farm Accommodations","Boathouse","Resort Village","Guesthouse","Motel","Villa","Accommodation","Lodge","Budget hotel","Self Catering Cottage","Homestay","Ski Resort","Luxury Hotel","Boutique Hotel","Hotel","Resort","Golf Resort","Dude Ranch","Tent Lodgings","Cabin Accommodations","Camping Site","Glamping Site","Hostel","Apartment Rental","Bed and Breakfast","Seaside B&B","Riad","Pousada","Townhouse","Beach Hotel","Spa Hotel","Business Hotel","Eco Hotel","Design Hotel","Beachside Apartment Rentals","Cottage"]}}(n||(n={})),function(e){e.TimeZones=[{key:"Pacific/Niue",displayName:"(GMT-11:00) Niue"},{key:"Pacific/Pago_Pago",displayName:"(GMT-11:00) Pago Pago"},{key:"Pacific/Honolulu",displayName:"(GMT-10:00) Hawaii Time"},{key:"Pacific/Rarotonga",displayName:"(GMT-10:00) Rarotonga"},{key:"Pacific/Tahiti",displayName:"(GMT-10:00) Tahiti"},{key:"Pacific/Marquesas",displayName:"(GMT-09:30) Marquesas"},{key:"America/Anchorage",displayName:"(GMT-09:00) Alaska Time"},{key:"Pacific/Gambier",displayName:"(GMT-09:00) Gambier"},{key:"America/Los_Angeles",displayName:"(GMT-08:00) Pacific Time"},{key:"America/Tijuana",displayName:"(GMT-08:00) Pacific Time - Tijuana"},{key:"America/Vancouver",displayName:"(GMT-08:00) Pacific Time - Vancouver"},{key:"America/Whitehorse",displayName:"(GMT-08:00) Pacific Time - Whitehorse"},{key:"Pacific/Pitcairn",displayName:"(GMT-08:00) Pitcairn"},{key:"America/Dawson_Creek",displayName:"(GMT-07:00) Mountain Time - Dawson Creek"},{key:"America/Denver",displayName:"(GMT-07:00) Mountain Time"},{key:"America/Edmonton",displayName:"(GMT-07:00) Mountain Time - Edmonton"},{key:"America/Hermosillo",displayName:"(GMT-07:00) Mountain Time - Hermosillo"},{key:"America/Mazatlan",displayName:"(GMT-07:00) Mountain Time - Chihuahua, Mazatlan"},{key:"America/Phoenix",displayName:"(GMT-07:00) Mountain Time - Arizona"},{key:"America/Yellowknife",displayName:"(GMT-07:00) Mountain Time - Yellowknife"},{key:"America/Belize",displayName:"(GMT-06:00) Belize"},{key:"America/Chicago",displayName:"(GMT-06:00) Central Time"},{key:"America/Costa_Rica",displayName:"(GMT-06:00) Costa Rica"},{key:"America/El_Salvador",displayName:"(GMT-06:00) El Salvador"},{key:"America/Guatemala",displayName:"(GMT-06:00) Guatemala"},{key:"America/Managua",displayName:"(GMT-06:00) Managua"},{key:"America/Mexico_City",displayName:"(GMT-06:00) Central Time - Mexico City"},{key:"America/Regina",displayName:"(GMT-06:00) Central Time - Regina"},{key:"America/Tegucigalpa",displayName:"(GMT-06:00) Central Time - Tegucigalpa"},{key:"America/Winnipeg",displayName:"(GMT-06:00) Central Time - Winnipeg"},{key:"Pacific/Galapagos",displayName:"(GMT-06:00) Galapagos"},{key:"America/Bogota",displayName:"(GMT-05:00) Bogota"},{key:"America/Cancun",displayName:"(GMT-05:00) America Cancun"},{key:"America/Guayaquil",displayName:"(GMT-05:00) Guayaquil"},{key:"America/Havana",displayName:"(GMT-05:00) Havana"},{key:"America/Iqaluit",displayName:"(GMT-05:00) Eastern Time - Iqaluit"},{key:"America/Jamaica",displayName:"(GMT-05:00) Jamaica"},{key:"America/Lima",displayName:"(GMT-05:00) Lima"},{key:"America/Montreal",displayName:"(GMT-05:00) Eastern Time - Montreal"},{key:"America/Nassau",displayName:"(GMT-05:00) Nassau"},{key:"America/New_York",displayName:"(GMT-05:00) Eastern Time"},{key:"America/Panama",displayName:"(GMT-05:00) Panama"},{key:"America/Port-au-Prince",displayName:"(GMT-05:00) Port-au-Prince"},{key:"America/Rio_Branco",displayName:"(GMT-05:00) Rio Branco"},{key:"America/Toronto",displayName:"(GMT-05:00) Eastern Time - Toronto"},{key:"Pacific/Easter",displayName:"(GMT-05:00) Easter Island"},{key:"America/Caracas",displayName:"(GMT-04:30) Caracas"},{key:"America/Asuncion",displayName:"(GMT-04:00) Asuncion"},{key:"America/Barbados",displayName:"(GMT-04:00) Barbados"},{key:"America/Boa_Vista",displayName:"(GMT-04:00) Boa Vista"},{key:"America/Campo_Grande",displayName:"(GMT-04:00) Campo Grande"},{key:"America/Cuiaba",displayName:"(GMT-04:00) Cuiaba"},{key:"America/Curacao",displayName:"(GMT-04:00) Curacao"},{key:"America/Grand_Turk",displayName:"(GMT-04:00) Grand Turk"},{key:"America/Guyana",displayName:"(GMT-04:00) Guyana"},{key:"America/Halifax",displayName:"(GMT-04:00) Atlantic Time - Halifax"},{key:"America/La_Paz",displayName:"(GMT-04:00) La Paz"},{key:"America/Manaus",displayName:"(GMT-04:00) Manaus"},{key:"America/Martinique",displayName:"(GMT-04:00) Martinique"},{key:"America/Port_of_Spain",displayName:"(GMT-04:00) Port of Spain"},{key:"America/Porto_Velho",displayName:"(GMT-04:00) Porto Velho"},{key:"America/Puerto_Rico",displayName:"(GMT-04:00) Puerto Rico"},{key:"America/Santo_Domingo",displayName:"(GMT-04:00) Santo Domingo"},{key:"America/Thule",displayName:"(GMT-04:00) Thule"},{key:"Atlantic/Bermuda",displayName:"(GMT-04:00) Bermuda"},{key:"America/St_Johns",displayName:"(GMT-03:30) Newfoundland Time - St. Johns"},{key:"America/Araguaina",displayName:"(GMT-03:00) Araguaina"},{key:"America/Argentina/Buenos_Aires",displayName:"(GMT-03:00) Buenos Aires"},{key:"America/Bahia",displayName:"(GMT-03:00) Salvador"},{key:"America/Belem",displayName:"(GMT-03:00) Belem"},{key:"America/Cayenne",displayName:"(GMT-03:00) Cayenne"},{key:"America/Fortaleza",displayName:"(GMT-03:00) Fortaleza"},{key:"America/Godthab",displayName:"(GMT-03:00) Godthab"},{key:"America/Maceio",displayName:"(GMT-03:00) Maceio"},{key:"America/Miquelon",displayName:"(GMT-03:00) Miquelon"},{key:"America/Montevideo",displayName:"(GMT-03:00) Montevideo"},{key:"America/Paramaribo",displayName:"(GMT-03:00) Paramaribo"},{key:"America/Recife",displayName:"(GMT-03:00) Recife"},{key:"America/Santiago",displayName:"(GMT-03:00) Santiago"},{key:"America/Sao_Paulo",displayName:"(GMT-03:00) Sao Paulo"},{key:"Antarctica/Palmer",displayName:"(GMT-03:00) Palmer"},{key:"Antarctica/Rothera",displayName:"(GMT-03:00) Rothera"},{key:"Atlantic/Stanley",displayName:"(GMT-03:00) Stanley"},{key:"America/Noronha",displayName:"(GMT-02:00) Noronha"},{key:"Atlantic/South_Georgia",displayName:"(GMT-02:00) South Georgia"},{key:"America/Scoresbysund",displayName:"(GMT-01:00) Scoresbysund"},{key:"Atlantic/Azores",displayName:"(GMT-01:00) Azores"},{key:"Atlantic/Cape_Verde",displayName:"(GMT-01:00) Cape Verde"},{key:"Africa/Abidjan",displayName:"(GMT+00:00) Abidjan"},{key:"Africa/Accra",displayName:"(GMT+00:00) Accra"},{key:"Africa/Bissau",displayName:"(GMT+00:00) Bissau"},{key:"Africa/Casablanca",displayName:"(GMT+00:00) Casablanca"},{key:"Africa/El_Aaiun",displayName:"(GMT+00:00) El Aaiun"},{key:"Africa/Monrovia",displayName:"(GMT+00:00) Monrovia"},{key:"America/Danmarkshavn",displayName:"(GMT+00:00) Danmarkshavn"},{key:"Atlantic/Canary",displayName:"(GMT+00:00) Canary Islands"},{key:"Atlantic/Faroe",displayName:"(GMT+00:00) Faeroe"},{key:"Atlantic/Reykjavik",displayName:"(GMT+00:00) Reykjavik"},{key:"Etc/GMT",displayName:"(GMT+00:00) GMT (no daylight saving)"},{key:"Europe/Dublin",displayName:"(GMT+00:00) Dublin"},{key:"Europe/Lisbon",displayName:"(GMT+00:00) Lisbon"},{key:"Europe/London",displayName:"(GMT+00:00) London"},{key:"Africa/Algiers",displayName:"(GMT+01:00) Algiers"},{key:"Africa/Ceuta",displayName:"(GMT+01:00) Ceuta"},{key:"Africa/Lagos",displayName:"(GMT+01:00) Lagos"},{key:"Africa/Ndjamena",displayName:"(GMT+01:00) Ndjamena"},{key:"Africa/Tunis",displayName:"(GMT+01:00) Tunis"},{key:"Africa/Windhoek",displayName:"(GMT+01:00) Windhoek"},{key:"Europe/Amsterdam",displayName:"(GMT+01:00) Amsterdam"},{key:"Europe/Andorra",displayName:"(GMT+01:00) Andorra"},{key:"Europe/Belgrade",displayName:"(GMT+01:00) Central European Time - Belgrade"},{key:"Europe/Berlin",displayName:"(GMT+01:00) Berlin"},{key:"Europe/Brussels",displayName:"(GMT+01:00) Brussels"},{key:"Europe/Budapest",displayName:"(GMT+01:00) Budapest"},{key:"Europe/Copenhagen",displayName:"(GMT+01:00) Copenhagen"},{key:"Europe/Gibraltar",displayName:"(GMT+01:00) Gibraltar"},{key:"Europe/Luxembourg",displayName:"(GMT+01:00) Luxembourg"},{key:"Europe/Madrid",displayName:"(GMT+01:00) Madrid"},{key:"Europe/Malta",displayName:"(GMT+01:00) Malta"},{key:"Europe/Monaco",displayName:"(GMT+01:00) Monaco"},{key:"Europe/Oslo",displayName:"(GMT+01:00) Oslo"},{key:"Europe/Paris",displayName:"(GMT+01:00) Paris"},{key:"Europe/Prague",displayName:"(GMT+01:00) Central European Time - Prague"},{key:"Europe/Rome",displayName:"(GMT+01:00) Rome"},{key:"Europe/Stockholm",displayName:"(GMT+01:00) Stockholm"},{key:"Europe/Tirane",displayName:"(GMT+01:00) Tirane"},{key:"Europe/Vienna",displayName:"(GMT+01:00) Vienna"},{key:"Europe/Warsaw",displayName:"(GMT+01:00) Warsaw"},{key:"Europe/Zurich",displayName:"(GMT+01:00) Zurich"},{key:"Africa/Cairo",displayName:"(GMT+02:00) Cairo"},{key:"Africa/Johannesburg",displayName:"(GMT+02:00) Johannesburg"},{key:"Africa/Maputo",displayName:"(GMT+02:00) Maputo"},{key:"Africa/Tripoli",displayName:"(GMT+02:00) Tripoli"},{key:"Asia/Amman",displayName:"(GMT+02:00) Amman"},{key:"Asia/Beirut",displayName:"(GMT+02:00) Beirut"},{key:"Asia/Damascus",displayName:"(GMT+02:00) Damascus"},{key:"Asia/Gaza",displayName:"(GMT+02:00) Gaza"},{key:"Asia/Jerusalem",displayName:"(GMT+02:00) Jerusalem"},{key:"Asia/Nicosia",displayName:"(GMT+02:00) Nicosia"},{key:"Europe/Athens",displayName:"(GMT+02:00) Athens"},{key:"Europe/Bucharest",displayName:"(GMT+02:00) Bucharest"},{key:"Europe/Chisinau",displayName:"(GMT+02:00) Chisinau"},{key:"Europe/Helsinki",displayName:"(GMT+02:00) Helsinki"},{key:"Europe/Istanbul",displayName:"(GMT+02:00) Istanbul"},{key:"Europe/Kaliningrad",displayName:"(GMT+02:00) Moscow-01 - Kaliningrad"},{key:"Europe/Kiev",displayName:"(GMT+02:00) Kiev"},{key:"Europe/Riga",displayName:"(GMT+02:00) Riga"},{key:"Europe/Sofia",displayName:"(GMT+02:00) Sofia"},{key:"Europe/Tallinn",displayName:"(GMT+02:00) Tallinn"},{key:"Europe/Vilnius",displayName:"(GMT+02:00) Vilnius"},{key:"Africa/Khartoum",displayName:"(GMT+03:00) Khartoum"},{key:"Africa/Nairobi",displayName:"(GMT+03:00) Nairobi"},{key:"Antarctica/Syowa",displayName:"(GMT+03:00) Syowa"},{key:"Asia/Baghdad",displayName:"(GMT+03:00) Baghdad"},{key:"Asia/Qatar",displayName:"(GMT+03:00) Qatar"},{key:"Asia/Riyadh",displayName:"(GMT+03:00) Riyadh"},{key:"Europe/Minsk",displayName:"(GMT+03:00) Minsk"},{key:"Europe/Moscow",displayName:"(GMT+03:00) Moscow+00"},{key:"Asia/Baku",displayName:"(GMT+04:00) Baku"},{key:"Asia/Dubai",displayName:"(GMT+04:00) Dubai"},{key:"Asia/Tbilisi",displayName:"(GMT+04:00) Tbilisi"},{key:"Asia/Yerevan",displayName:"(GMT+04:00) Yerevan"},{key:"Europe/Samara",displayName:"(GMT+04:00) Moscow+00 - Samara"},{key:"Indian/Mahe",displayName:"(GMT+04:00) Mahe"},{key:"Indian/Mauritius",displayName:"(GMT+04:00) Mauritius"},{key:"Indian/Reunion",displayName:"(GMT+04:00) Reunion"},{key:"Asia/Kabul",displayName:"(GMT+04:30) Kabul"},{key:"Antarctica/Mawson",displayName:"(GMT+05:00) Mawson"},{key:"Asia/Aqtau",displayName:"(GMT+05:00) Aqtau"},{key:"Asia/Aqtobe",displayName:"(GMT+05:00) Aqtobe"},{key:"Asia/Ashgabat",displayName:"(GMT+05:00) Ashgabat"},{key:"Asia/Dushanbe",displayName:"(GMT+05:00) Dushanbe"},{key:"Asia/Karachi",displayName:"(GMT+05:00) Karachi"},{key:"Asia/Tashkent",displayName:"(GMT+05:00) Tashkent"},{key:"Asia/Yekaterinburg",displayName:"(GMT+05:00) Moscow+02 - Yekaterinburg"},{key:"Indian/Kerguelen",displayName:"(GMT+05:00) Kerguelen"},{key:"Indian/Maldives",displayName:"(GMT+05:00) Maldives"},{key:"Asia/Calcutta",displayName:"(GMT+05:30) India Standard Time"},{key:"Asia/Colombo",displayName:"(GMT+05:30) Colombo"},{key:"Asia/Katmandu",displayName:"(GMT+05:45) Katmandu"},{key:"Antarctica/Vostok",displayName:"(GMT+06:00) Vostok"},{key:"Asia/Almaty",displayName:"(GMT+06:00) Almaty"},{key:"Asia/Bishkek",displayName:"(GMT+06:00) Bishkek"},{key:"Asia/Dhaka",displayName:"(GMT+06:00) Dhaka"},{key:"Asia/Omsk",displayName:"(GMT+06:00) Moscow+03 - Omsk, Novosibirsk"},{key:"Asia/Thimphu",displayName:"(GMT+06:00) Thimphu"},{key:"Indian/Chagos",displayName:"(GMT+06:00) Chagos"},{key:"Asia/Rangoon",displayName:"(GMT+06:30) Rangoon"},{key:"Indian/Cocos",displayName:"(GMT+06:30) Cocos"},{key:"Antarctica/Davis",displayName:"(GMT+07:00) Davis"},{key:"Asia/Bangkok",displayName:"(GMT+07:00) Bangkok"},{key:"Asia/Hovd",displayName:"(GMT+07:00) Hovd"},{key:"Asia/Jakarta",displayName:"(GMT+07:00) Jakarta"},{key:"Asia/Krasnoyarsk",displayName:"(GMT+07:00) Moscow+04 - Krasnoyarsk"},{key:"Asia/Saigon",displayName:"(GMT+07:00) Hanoi"},{key:"Indian/Christmas",displayName:"(GMT+07:00) Christmas"},{key:"Antarctica/Casey",displayName:"(GMT+08:00) Casey"},{key:"Asia/Brunei",displayName:"(GMT+08:00) Brunei"},{key:"Asia/Choibalsan",displayName:"(GMT+08:00) Choibalsan"},{key:"Asia/Hong_Kong",displayName:"(GMT+08:00) Hong Kong"},{key:"Asia/Irkutsk",displayName:"(GMT+08:00) Moscow+05 - Irkutsk"},{key:"Asia/Kuala_Lumpur",displayName:"(GMT+08:00) Kuala Lumpur"},{key:"Asia/Macau",displayName:"(GMT+08:00) Macau"},{key:"Asia/Makassar",displayName:"(GMT+08:00) Makassar"},{key:"Asia/Manila",displayName:"(GMT+08:00) Manila"},{key:"Asia/Shanghai",displayName:"(GMT+08:00) China Time - Beijing"},{key:"Asia/Singapore",displayName:"(GMT+08:00) Singapore"},{key:"Asia/Taipei",displayName:"(GMT+08:00) Taipei"},{key:"Asia/Ulaanbaatar",displayName:"(GMT+08:00) Ulaanbaatar"},{key:"Australia/Perth",displayName:"(GMT+08:00) Western Time - Perth"},{key:"Asia/Dili",displayName:"(GMT+09:00) Dili"},{key:"Asia/Jayapura",displayName:"(GMT+09:00) Jayapura"},{key:"Asia/Pyongyang",displayName:"(GMT+09:00) Pyongyang"},{key:"Asia/Seoul",displayName:"(GMT+09:00) Seoul"},{key:"Asia/Tokyo",displayName:"(GMT+09:00) Tokyo"},{key:"Asia/Yakutsk",displayName:"(GMT+09:00) Moscow+06 - Yakutsk"},{key:"Pacific/Palau",displayName:"(GMT+09:00) Palau"},{key:"Australia/Adelaide",displayName:"(GMT+09:30) Central Time - Adelaide"},{key:"Australia/Darwin",displayName:"(GMT+09:30) Central Time - Darwin"},{key:"Antarctica/DumontDUrville",displayName:"(GMT+10:00) Dumont D'Urville"},{key:"Asia/Magadan",displayName:"(GMT+10:00) Moscow+08 - Magadan"},{key:"Asia/Vladivostok",displayName:"(GMT+10:00) Moscow+07 - Yuzhno-Sakhalinsk"},{key:"Australia/Brisbane",displayName:"(GMT+10:00) Eastern Time - Brisbane"},{key:"Australia/Hobart",displayName:"(GMT+10:00) Eastern Time - Hobart"},{key:"Australia/Sydney",displayName:"(GMT+10:00) Eastern Time - Melbourne, Sydney"},{key:"Pacific/Chuuk",displayName:"(GMT+10:00) Truk"},{key:"Pacific/Guam",displayName:"(GMT+10:00) Guam"},{key:"Pacific/Port_Moresby",displayName:"(GMT+10:00) Port Moresby"},{key:"Pacific/Efate",displayName:"(GMT+11:00) Efate"},{key:"Pacific/Guadalcanal",displayName:"(GMT+11:00) Guadalcanal"},{key:"Pacific/Kosrae",displayName:"(GMT+11:00) Kosrae"},{key:"Pacific/Noumea",displayName:"(GMT+11:00) Noumea"},{key:"Pacific/Pohnpei",displayName:"(GMT+11:00) Ponape"},{key:"Pacific/Norfolk",displayName:"(GMT+11:30) Norfolk"},{key:"Asia/Kamchatka",displayName:"(GMT+12:00) Moscow+08 - Petropavlovsk-Kamchatskiy"},{key:"Pacific/Auckland",displayName:"(GMT+12:00) Auckland"},{key:"Pacific/Fiji",displayName:"(GMT+12:00) Fiji"},{key:"Pacific/Funafuti",displayName:"(GMT+12:00) Funafuti"},{key:"Pacific/Kwajalein",displayName:"(GMT+12:00) Kwajalein"},{key:"Pacific/Majuro",displayName:"(GMT+12:00) Majuro"},{key:"Pacific/Nauru",displayName:"(GMT+12:00) Nauru"},{key:"Pacific/Tarawa",displayName:"(GMT+12:00) Tarawa"},{key:"Pacific/Wake",displayName:"(GMT+12:00) Wake"},{key:"Pacific/Wallis",displayName:"(GMT+12:00) Wallis"},{key:"Pacific/Apia",displayName:"(GMT+13:00) Apia"},{key:"Pacific/Enderbury",displayName:"(GMT+13:00) Enderbury"},{key:"Pacific/Fakaofo",displayName:"(GMT+13:00) Fakaofo"},{key:"Pacific/Tongatapu",displayName:"(GMT+13:00) Tongatapu"},{key:"Pacific/Kiritimati",displayName:"(GMT+14:00) Kiritimati"}]}(n||(n={}));var o=function(){function e(){}return e.prototype.queryParams=function(){var e={},t=window.location.href.split("?").filter(function(e,t){return 0!==t});return _.flatten(_.map(t,function(e){return e.split("#")[0].split("&")})).forEach(function(t){var i=t.split("=");e[i[0]]=i[1]}),e},e.prototype.getQueryStringValueByKey=function(e){var t=this.queryParams();return t.hasOwnProperty(e)?t[e]:""},e}();angular.module("adiIntroCommon").service("urlParser",o),function(e){var t=function(){function t(i,n,o,r,a,s,l,c,d,u,p,g){this.$scope=i,this.logoManager=n,this.socialLinkManager=o,this.consumerBiLogger=r,this.userDetailsApi=a,this.miscUtils=s,this.applicationParameters=l,this.validation=c,this.$translate=d,this.flags=u,this.osUtils=p,this.prepareData();var h={persistence:new e.IntroLogoPersistence(this.data.media,this.miscUtils,g,u),onFieldChanged:this.onFieldChanged.bind(this),usePlaceholderOnDelete:!0,app:"intro"};this.logoManager.setContext(h),null==t.logoManagerInstance&&(t.logoManagerInstance=this.logoManager),this.handleProblemsInWebsiteAddress(),this.flags.youTubeChannel&&this.data.videoStructure&&!this.flags.MED&&(this.bannerUrl=this.getBannerFromDataOrLogo())}return t.$inject=["$scope","logoManager","socialLinkManager","consumerBiLogger","userDetailsApi","miscUtils","applicationParameters","validation","$translate","flags","osUtils","clientTopology"],t.prototype.getBannerFromDataOrLogo=function(){if(this.data.media.photos)return _.last(this.data.media.photos).url},t.getBusinessCardDataModel=function(e){return{logo:t.logoManagerInstance.getMediaUrl(),businessName:e.name,email:e.contactDetails.email||"",fullAddress:e.contactDetails.address?e.contactDetails.address.fullAddress:"",phone:e.contactDetails.phone||"",fax:e.contactDetails.fax||"",website:e.contactDetails.website||"",socialLinks:_.cloneDeep(e.socialLinks)}},t.prototype.$postLink=function(){t.initializedBusinessCardValues=t.getBusinessCardDataModel(this.data)},t.prototype.prepareData=function(){var e=this;this.view=this.$scope.view||"intro",this.data.contactDetails=this.data.contactDetails||{},this.data.socialLinks=this.data.socialLinks||[],this.data.media=this.data.media||{},this.normalizeAddress(),this.data.contactDetails.email||this.userDetailsApi.getUserDetails().then(function(t){return e.data.contactDetails.email=t.email})},t.prototype.normalizeAddress=function(){this.data.contactDetails.address=this.data.contactDetails.address||{};var e=this.data.contactDetails.address.fullAddress;this.data.contactDetails.address.fullAddress=_.isString(e)?e.trim():""},t.prototype.getOrigin=function(){return this.view},t.prototype.showWebsiteAddressError=function(){this.isWebsiteAddressValid=!1},t.prototype.hideWebsiteAddressError=function(){this.isWebsiteAddressValid=!0},t.prototype.handleProblemsInWebsiteAddress=function(){this.validation.isWebsite(this.data.contactDetails.website)?this.hideWebsiteAddressError():this.showWebsiteAddressError()},t.prototype.addEmptySocialLink=function(){var e={platform:"",url:""};this.data.socialLinks.push(e),this.osUtils.isIE||(this.focusedSocial=e)},t.prototype.deleteSocialLink=function(e){var t=this.data.socialLinks.indexOf(e);t>=0&&this.data.socialLinks.splice(t,1),this.onFieldChanged(e.platform,"social",e.url,"")},t.prototype.onSocialChanged=function(e){e.platform=this.socialLinkManager.getPlatformNameByUrl(e.url),this.flags.newIntroDesign&&(e.icon=this.socialLinkManager.getPlatformIconClass(e.platform,!0))},t.prototype.enableAddSocialLink=function(){var e=this.flags.introWebsiteAddressField?t.maxLinksForWebsiteAddressFlag:this.applicationParameters.maxSocialLinks;return(this.data.socialLinks||[]).length<e},t.prototype.isLinkInvalid=function(e){return!e.platform&&e.url},t.prototype.onFieldChanged=function(e,t,i,n,o){if(n!==i){var r=n?n.length:0,a="edit";a=n?a:"remove",a=i?a:"add",this.consumerBiLogger.intro.infoCardAddEditRemoveInfo(e,t,r,a,this.view,o||null)}},t.prototype.blurEventTargetOnEnter=function(e){"Enter"!==e.key&&13!==e.which||e.target.blur()},t.prototype.$onDestroy=function(){t.logoManagerInstance.cleanUp(),t.logoManagerInstance.doneWithThisContext()},t}();t.maxLinksForWebsiteAddressFlag=6,t.logoManagerInstance=null,t.fieldToIntroManagerPath={logo:"media.logos[0].url",businessName:"name",email:"contactDetails.email",fullAddress:"contactDetails.address.fullAddress",phone:"contactDetails.phone",fax:"contactDetails.fax",website:"contactDetails.website",socialLinks:"socialLinks"},e.BusinessCardEditable=t,angular.module("adiIntroCommon").component("businessCardEditable",{controller:t,templateUrl:"views/business-card/business-card-editable.html",bindings:{data:"=",view:"@?"}}).filter("socialIcon",["socialLinkManager",function(e){return function(t){return"social:"+(!!t&&t!==e.invalidPlatformName&&t!==SocialLinkManager.VALID_CUSTOM_LINK?t:"generic").toLowerCase()}}])}(M||(M={}));var r=function(){function e(e,t,i){this.$element=e,this.$scope=t,this.$timeout=i}return e.$inject=["$element","$scope","$timeout"],e.prototype.$postLink=function(){var e=this;this.$element.find("input").on("change",function(t){var i=t.target.files[0];i&&e.$timeout(function(){e.onSelect({$file:i}),t.target.value=null},0,!1)})},e}();angular.module("adiIntroCommon").component("fileUploadSelect",{bindings:{onSelect:"&"},templateUrl:"views/common/file-upload-select.html",controller:r});var a=function(){function e(){}return e.prototype.handleClick=function(){this.onClick&&this.onClick()},e}();angular.module("adiIntroCommon").component("introSkipButton",{bindings:{onClick:"&"},templateUrl:"views/common/intro-skip-button.html",controller:a});var s=function(){function e(){}return e.prototype.handleClick=function(){this.onClick&&this.onClick()},e}();angular.module("adiIntroCommon").component("introBackButton",{bindings:{onClick:"&"},templateUrl:"views/common/intro-back-button.html",controller:s});var l=function(){function e(){}return e.prototype.handleClick=function(){this.onClick&&this.onClick()},e}();angular.module("adiIntroCommon").component("introNextButton",{bindings:{onClick:"&",isDisabled:"<?",focusIf:"<?"},templateUrl:"views/common/intro-next-button.html",controller:l});var c=function(){function e(t,i,n,o,r){var a=this;this.flags=i,this.$element=n,this.cmsApi=o,this.$translate=r,this.businessTypeInput=e.BUSINESS_TYPE_INPUT,this.lastSearchedCategories=[],this.relatedResultsTitle={isTitle:!0,term:""},this.showRelatedResultsTitle=!0,this.searchChanged=!1,this.isTitleHovered=!1,this.lastShowGenericPopUpState=!1,this.isValidTerm=function(){return!a.lastSearchedTerm||"string"==typeof a.lastSearchedTerm&&a.cmsApi.sanitize(a.lastSearchedTerm).length>0},this.inSearch=function(){return!a.result&&a.lastSearchedTerm&&a.isValidTerm()},this.isEmptySearch=function(){return a.inSearch()&&0===a.lastSearchedCategories.length},this.shouldShowGenericPopover=function(){return a.inSearch()&&(0===a.lastSearchedCategories.length||a.lastSearchedCategories[0]===a.relatedResultsTitle)},this.isListLoaded=function(){return a.showResults};var s=this.$translate.instant("intro.category-search.related-results-label");this.relatedResultsTitle.term=this.flags.newIntroDesign?s.toUpperCase():s,this.flags.MED&&(this.showRelatedResultsTitle=!1,t.$watch("$ctrl.inputFocused()",function(e,t){e!==t&&angular.element(window).triggerHandler("resize")})),this.flags.changeBusinessDetails&&null!=this.searchTerm||(this.searchTerm="")}return e.$inject=["$scope","flags","$element","cmsApi","$translate"],e.prototype.getPreSuggestionsByVertical=function(){if(!this.preSuggestionsByVertical)return[];var e=this.preSuggestionsByVertical[this.vertical]||M.IntroCategorySearch.DEFAULT_PRE_SUGGESTIONS;return this.flags.MED&&this.flags.betterBusinessCategoryPage?e.slice(0,4):e},e.prototype._onExampleClick=function(e){var t=e.target.textContent.trim();this.searchTerm=t,angular.element("[name=businessTypeInput]").focus(),this.onExampleClick({term:t})},e.prototype._onSelectFromEmptyList=function(e,t){this.onSelectFromEmptyList({item:e,index:t}),this.result=e},e.prototype.getHighlightText=function(e){return e.isTitle?"":this.searchTerm.replace(/&/g,"&amp;")},e.prototype._onSearchChanged=function(e,t){var i=_.findIndex(t,function(e){return e.isTitle}),n=i>=0?t.slice(0,i):t,o=(e.replace?e:"").replace(/[-+\/.;()'&]/gi,""),r=_.findIndex(n,function(e){return e.term&&e.term.toLowerCase()===o.toLowerCase()});r>=0?(t[r].isExactMatch=!0,this.result=n[r]):this.result&&this.getDisplayText(this.result)!==e&&(this.result=null),this.searchChanged&&(this.validCategory=!!this.result),this.searchChanged=!0,this.lastShowGenericPopUpState=!!this.shouldShowGenericPopover(),this.lastSearchedCategories=t,this.isResetTerm&&this.isResetTerm({term:e,matches:t})?(this.lastSearchedTerm="",this.result=null,this.searchTerm=""):this.lastSearchedTerm=e,""!==e?this.showResults=!0:this.validCategory=!1,this.onSearchChanged({term:e,matches:t,result:this.result})},e.prototype.itemClicked=function(e,t){t&&e.stopPropagation()},e.prototype._onSelectedFromList=function(e){var t,i=this;if(this.selected&&(t=this.lastSearchedCategories.indexOf(this.selected),this.selected.prefix?this.searchTerm=this.selected.prefix+" ":this.result=this.selected,this.validCategory=!!this.result),this.lastSearchedTerm.toLowerCase()!==e.toLowerCase())return this.search(e).then(function(t){return t.filter(function(t){return i.getDisplayText(t)!==e})});this.onSelectedFromList({term:e,index:t})},e.prototype.transformData=function(e){var t=function(e,t,i){return _.includes(_.keys(e),t)&&(e[i]=_.cloneDeep(e[t]),delete e[t]),e};e&&e.results&&e.results.forEach(function(e){return t(e,"displayName","term")}),e&&e.relatedResults&&e.relatedResults.forEach(function(e){return t(e,"displayName","term")})},e.prototype.search=function(t,i,n){var o=this;return void 0===t&&(t=this.searchTerm||""),void 0===i&&(i=200),void 0===n&&(n=200),this.cmsApi.elasticSearch(t,i,n).then(function(t){o.transformData(t);var i=t.results.slice(0,e.RESULTS_LIMIT),n=o.flags.AdiFuzzinessSupport?e.RESULTS_THRESHOLD_NEW:e.RESULTS_THRESHOLD;if(i.length<n&&t.relatedResults.length>0){var r=t.relatedResults.map(function(e){return e.isRelated=!0,e});return i.concat(o.showRelatedResultsTitle?[o.relatedResultsTitle]:[],r)}return i})},e.prototype.getDisplayText=function(e){return e.prefix?e.prefix+"...":e.term},e.prototype.relatedResultsEnter=function(e){this.isTitleHovered=!!e},e.prototype.relatedResultsLeave=function(){this.isTitleHovered=!1},e.prototype.inputElm=function(){return this._inputElm&&0!==this._inputElm.length||(this._inputElm=this.$element.find("input")),this._inputElm},e.prototype.blurInput=function(){this.inputElm().blur()},e.prototype.inputEmptyAndUnfocused=function(){return this.inputEmpty()&&!this.inputFocused()},e.prototype.inputEmpty=function(){return""===this.inputElm().val()},e.prototype.inputFocused=function(){var e=this.inputElm();return e&&e[0]===document.activeElement},e}();c.RESULTS_THRESHOLD=7,c.RESULTS_THRESHOLD_NEW=8,c.RESULTS_LIMIT=200,c.BUSINESS_TYPE_INPUT="businessTypeInput",angular.module("adiIntroCommon").component("categorySearch",{templateUrl:"views/common/category-search.html",controller:c,bindings:{preSuggestionsByVertical:"<?",defaultCategories:"<?",validCategory:"<",result:"<",lastSearchedTerm:"<",searchTerm:"<",vertical:"<?",isDropdownSuggestionsHidden:"<?",onSelectFromEmptyList:"&",onExampleClick:"&",onSearchChanged:"&",onSelectedFromList:"&",onSubmit:"&",isResetTerm:"&?",acOptionsContainerClass:"@?",hideNoCategoryMatches:"<?",hideGenericSuggestions:"<?",dontStoreMatches:"<?"}});var d=function(){function e(e,t){var i=this;this.$translate=e,this.flags=t,this.deepGet=function(e,t){var n;"string"==typeof t?n=t.split("."):t instanceof Array&&(n=t);var o=[];return i.getByKeys(e,n,o),o},this.getByKeys=function(e,t,n){if("object"!=typeof e)return null;var o=e[t[0]];o&&(t.length>1?i.getByKeys(o,t.slice(1),n):n.push(o));var r=Object.keys(e);r.length&&r.forEach(function(o){i.getByKeys(e[o],t,n)})}}return e.$inject=["$translate","flags"],e.prototype.translateIfPossible=function(e){var t=this.$translate.instant(e);return t===e?"":t},e.prototype.shuffleArray=function(e){Math.seedrandom(Date.now());for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[i],e[i]=n}return e},e.prototype.minBy=function(e,t){var i=this,n={};e.forEach(function(e){n[e[t]]=e});var o=_.min(e.map(function(e){var n;if(t instanceof Function?n=t(e):"string"==typeof t?n=e[t]:console.error("key should be a function or string"),i.flags.lodash4&&"number"!=typeof n)throw new Error("_.min expectes array of numbers and value is not a number: "+n);return n}));return n[o]},e.prototype.JSONClone=function(e){return JSON.parse(JSON.stringify(e))},e.prototype.getRandomItem=function(e){return e[_.random(e.lemgth-1)]},e.prototype.softFilter=function(e,t){var i=e.filter(t);return i.length?i:e},e.prototype.keyBy=function(e,t){return e.reduce(function(e,i){return e[i[t]]=i,e},{})},e.prototype.isArraysOfObjectsEqualByOrderAndKeys=function(e,t,i){return!(!i||!i.length)&&e.every(function(e,n){return i.every(function(i){return e[i]===t[n][i]})})},e}();angular.module("adiIntroAppInternal").service("miscUtils",d).filter("externalImage",["clientTopology",function(e){return function(t){return""+e.staticsUrl+t}}]),function(e){e.preSuggestionsByVertical={business:["consulting-firm","non-profit-organization","coaching-professional","cleaning-service","marketing-agency"],Stores:["online-clothing-store","online-jewelry-store","online-home-goods-store","online-health-food-store","online-hair-extensions-store"],"portfolio-cv":["portfolio","artist","actor","resume","cv"],photography:["event-photographer","photography-portfolio","fashion-photography-studio","photographer","photography-studio"],music:["dj","recording-studio","musician","rock-band","hip-hop-artist"],"health-wellness":["make-up-artist","massage-therapist","salon","skin-care-clinic","nutritionist"],Blog:["fashion-blog","news-blog","blogger","health-blog","business-blog"],Blog2:["fashion-blog","news-blog","blogger","health-blog","business-blog"],other:["non-profit-organization","school","charity","author","blogger"],design:["graphic-designer","artist","portfolio","architecture-firm","design-studio"],singleEvent:["wedding","conference","birthday-party","meetup","marathon"]},e.preSuggestionsByVerticalByFlag={},e.DEFAULT_PRE_SUGGESTIONS=["travel-agency","elementary-school","real-estate-agency","online-sporting-goods-store","make-up-artist"],e.DEFAULT_CATEGORY={industryId:"9e0d43c23f82998a6ac269b5",structureId:"e51e11f3597e0c565deb792f",term:"Local Business",key:"local-business"},e.GENERAL_CATEGORIES={General:[e.DEFAULT_CATEGORY,{industryId:"087d714d5f85b09c65b51e28",structureId:"073bd83d054dcff87fa0ef50",term:"Online Store",key:"online-store"},{industryId:"e79e5765052b89b579c9a4c2",structureId:"40dc538a8a6c3e2dae342922",term:"Other",key:"other"}],Blog:[{term:"General Blog",key:"general-blog",industryId:"904e7e089b4bda2f8f8846e6",structureId:"b0a520919b99728bae200018"}],Blog2:[{term:"General Blog",key:"general-blog",industryId:"904e7e089b4bda2f8f8846e6",structureId:"b0a520919b99728bae200018"}],"portfolio-cv":[{term:"Portfolio & CV",key:"portfolio-and-cv",industryId:"c4e29ccec1b3103f4caa52f0",structureId:"3a6327d9c3946eefcfe6d513"}],design:[{term:"Design Business",key:"design-business",industryId:"a16519bdf44907db3cd5a989",structureId:"f19b3125657d6a267d2c47d8"}],music:[{term:"Music Business",key:"music-business",industryId:"88b56978690cff09a18247c1",structureId:"df2149e0b7ea38029c3b9640"}],photography:[{term:"Photographer",key:"photographer",industryId:"f540e5a65f637e7cd869f5b9",structureId:"be6f1d8dc988d56f886ed440"}],"health-wellness":[{term:"Beauty Business",key:"beauty-business",industryId:"2425027cb83cba8b1ce84a4f",structureId:"190a5ffad4f67ad6e22ad08d"}]},e.generalCategoriesByFlag={introNewOtherCategory:{General:[e.GENERAL_CATEGORIES.General[0],e.GENERAL_CATEGORIES.General[1],{industryId:"e79e5765052b89b579c9a4c2",structureId:"86639912f37c3faf0a75d740",term:"Other"}]}},angular.module("adiIntroInternal").run(["flags","$translate",function(t,i){for(var n in e.GENERAL_CATEGORIES)e.GENERAL_CATEGORIES.hasOwnProperty(n)&&e.GENERAL_CATEGORIES[n].forEach(function(e){t.staticTextsWithTranslate&&(e.term=i.instant("intro.general-categories.general."+e.key)),delete e.key})}]).constant("introAnimationData",function(){return(t={})[e.INTRO_STATES.INTRO_CATEGORY_SEARCH]={contentHeight:325},t[e.INTRO_STATES.INTRO_BLOCKED_CATEGORY]={contentHeight:274},t[e.INTRO_STATES.INTRO_SERVICES_OFFER]={contentHeight:295},t[e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT]={contentHeight:168},t[e.INTRO_STATES.INTRO_BUSINESS_NAME]={contentHeight:90},t[e.INTRO_STATES.INTRO_YOUTUBE_CHANNEL]={contentHeight:90},t[e.INTRO_STATES.INTRO_BUSINESS_LOCATION]={contentHeight:260},t[e.INTRO_STATES.INTRO_BUSINESS_DATES]={contentHeight:260},t[e.INTRO_STATES.INTRO_SEARCH_CONFIRM]={contentHeight:180},t[e.INTRO_STATES.INTRO_IMPORT_SITE_CONFIRM]={contentHeight:180},t[e.INTRO_STATES.INTRO_RECAPTCHA]={contentHeight:180},t;var t}()),function(e){e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e[e.SundayLastDayOfWeek=7]="SundayLastDayOfWeek"}(e.WeekDay||(e.WeekDay={}))}(M||(M={})),function(){function e(e,t,i,n){var o,r={PLATFORM_SEARCH:"/_api/any2wix-server/platformsearch",GET_BUSINESS_INFO:"/_api/any2wix-server/analyzeplatforms"},a={FACTUAL:"factual",FACEBOOK:"facebook",GOOGLE_PLACES:"google_places",YELP:"yelp"};function s(e){var t=[{providerResultsKey:"unified_search",platform:"unified"},{providerResultsKey:"factual_search",platform:a.FACTUAL},{providerResultsKey:"googleplus_search",platform:a.GOOGLE_PLUS},{providerResultsKey:"googleplaces_search",platform:a.GOOGLE_PLACES},{providerResultsKey:"yelp_search",platform:a.YELP},{providerResultsKey:"youtube_search",platform:a.YOUTUBE},{providerResultsKey:"facebook_search",platform:a.FACEBOOK}];return e=e.data,_.reduce(t,function(t,i){var n=_.map(e[i.providerResultsKey],function(e){var t={platform:i.platform};return _.assign({},e,t)});return t.concat(n)},[])}function l(e){var t="platforms.0.general_info.site_title",i="platforms.0.general_info.short_description",n="platforms.0.contact_details.website",o="platforms.0.general_info.logo",r="platforms.0.general_info.cover_photo",a="platforms.0.photos_albums",s=[{fieldName:"Name",type:"text",value:_.get(e.data,t)},{fieldName:"Description",type:"text",value:_.get(e.data,i)},{fieldName:"Url",type:"link",value:_.get(e.data,n)},{fieldName:"Logo",type:"logo",value:_.get(e.data,o)},{fieldName:"Cover",type:"img",value:_.get(e.data,r)},{fieldName:"Photos",type:"images",value:_.get(e.data,a)}];return s=_.map(s,function(e){return _.includes(["logo","img"],e.type)?_.defaults(e,{value:"https://web.vmc3.com/projects/bufs/branch/coastguard/logos/NoLogo.jpg"}):_.defaults(e,{value:""})})}return n.introTestNoFactual&&delete a.FACTUAL,{PLATFORMS:a,searchBusiness:function(t,i){var n={searchParams:t,platforms:i=i||_.values(a),esi:o};return e.post(r.PLATFORM_SEARCH,n).then(function(e){return e.data})},setSessionId:function(e){o=e},searchBusinessFlatten:function(t,i){_.isEmpty(i)&&(i=_.values(a));var n={searchParams:t,platforms:i};return e.post(r.PLATFORM_SEARCH,n).then(s)},analyzeBusinessByUrls:function(t){var i={urls:t,requestOrigin:"onboarding"};return e.post(r.GET_BUSINESS_INFO,i).then(l)},saveBusinessImagesToWixMedia:function(e){var n={tags:["_imported","_site_builder"],mediaType:"picture"},o=_.map(e,function(e){return _.assign({},n,{url:e})}),r=t.uploadPrivateImages(o);return i.all(r)},getExtendedBusinessData:function(t,i,n){var a={businessQuery:t,urls:i,requestOrigin:"onboarding",searchId:n,esi:o};return e.post(r.GET_BUSINESS_INFO,a).then(function(e){return _.find(e.data.platforms,function(e){return"unified_fields"===e.platform_name})})}}}e.$inject=["$http","wixMediaPlatform","$q","flags"],angular.module("adiIntroInternal").factory("wixWizIntegration",e)}(),function(e){var t=function(){function t(e,t){this.socialLinkManager=e,this.flags=t}return t.$inject=["socialLinkManager","flags"],t.prototype.parseExtendedData=function(e){return e?{name:_.get(e.general_info,"site_title.value"),generalInfo:this.parseGeneralInfo(e.general_info),contactDetails:this.parseContactDetails(e.contact_details),socialLinks:this.parseSocialLinks(e),reviews:this.parseReviews(e.reviews),media:{logos:this.parseLogos(_.get(e,"general_info.logos")),cover:{description:"",url:_.get(e,"general_info.cover_photo.value")},photos:this.parsePhotos(e)}}:{}},t.prototype.parseLogos=function(e){return e?e.map(function(e){return{description:"",url:e.value}}):[]},t.prototype.parseContactDetails=function(e){return e?{email:_.get(e,"email.value"),phone:_.get(e,"phone.value"),fax:_.get(e,"fax.value"),website:_.get(e,"website.value"),address:this.parseBusinessAddress(e.address),openingHours:this.parseOpeningHours(e.open_hours_new)}:{}},t.prototype.parseGeneralInfo=function(e){return{shortDescription:_.get(e,"short_description.value"),longDescription:_.get(e,"long_description.value"),missionStatement:_.get(e,"mission.value"),products:_.get(e,"products.value"),generalInfo:_.get(e,"general_info.value"),companyOverview:_.get(e,"company_overview.value"),bio:_.get(e,"bio.value"),publicTransport:_.get(e,"public_transport.value"),dateFounded:this.parseStartInfo(_.get(e,"start_info")),categories:this.parseCategories(_.get(e,"category"),_.get(e,"sub_category")),parking:this.parseParking(_.get(e,"parking"))}},t.prototype.parseStartInfo=function(e){if(!e||!e.value)return null;var t=e.value.date;return t?t.year&&t.month&&t.day?new Date(t.year,t.month-1,t.day):t.year&&t.month?new Date(t.year,t.month-1):t.year?new Date(t.year):null:null},t.prototype.filterCategories=function(e){var t=["community","local business","company","automotive","commercial & industrial","shopping/retail","point of interest","points of interest","food","establishment","social"];return _.uniq(_.filter(e,function(e){return!_.includes(t,e.toLowerCase())}))},t.prototype.extractCategories=function(e){return e&&e.value?e.source&&e.source.toLowerCase().startsWith("yelp")?[]:e.value.split(",").map(function(e){return e.trim()}):[]},t.prototype.parseParking=function(e){return e&&e.value?{lot:e.value.lot>0,street:e.value.street>0,valet:e.value.valet>0}:null},t.prototype.parseCategories=function(e,t){var i=this,n=this.extractCategories(e),o=t&&t.value?_.map(t.value,function(e){return _.get(e,"name")}):[];return n=_.map(n.concat(o),function(e){return i.normalizeCategory(e)}),_.take(this.filterCategories(n),3)},t.prototype.normalizeCategory=function(e){return(this.flags.lodash4?_.upperFirst:_.capitalize)(e.replace(/_/g," "))},t.prototype.parseReviews=function(e){var t=Array.isArray(e)?e[0]:e;return t&&t.value?_.map(t.value,function(e){return{author:e.author_name,photoUrl:e.author_photo,message:e.text,datetime:new Date(e.time),rating:e.rating}}).filter(function(e){return e.rating>=4}):[]},t.prototype.parseBusinessAddress=function(e){return e?{fullAddress:_.get(e,"full_addr"),country:_.get(e,"country"),city:_.get(e,"city"),zipcode:_.get(e,"zipcode"),state:_.get(e,"state"),street:_.get(e,"street"),location:e.lat&&e.lng?{lat:e.lat,lng:e.lng}:null}:null},t.prototype.parseOpeningHours=function(e){var t=this;return e&&e.value&&e.value.days?_.map(e.value.days,function(e){return{day:t.parseWeekDay(e.day),from:t.parseHour(e.from_hour),to:t.parseHour(e.to_hour)}}):[]},t.prototype.parseHour=function(e){if(!e)return null;var t=e.trim().split(":"),i=t[0],n=t[1];return{hour:parseInt(i,10),minute:parseInt(n,10)}},t.prototype.parseWeekDay=function(t){if(!t)return null;switch((t=t.trim()).toLowerCase()){case"sun":return e.WeekDay.Sunday;case"mon":return e.WeekDay.Monday;case"tue":return e.WeekDay.Tuesday;case"wed":case"wen":return e.WeekDay.Wednesday;case"thu":return e.WeekDay.Thursday;case"fri":return e.WeekDay.Friday;case"sat":return e.WeekDay.Saturday}},t.prototype.parseSocialLinks=function(e){var t=e.social_links?angular.copy(e.social_links):[],i=_.get(e,"official_website_data.social_links",[]);return t=t.concat(i),this.extractSocialLinks(t)},t.prototype.extractSocialLinks=function(e){var t=this,i=new Set;return _.reduce(e,function(e,n){if(n.url){var o=t.socialLinkManager.getPlatformNameByUrl(n.url);o&&!i.has(o)&&(e.push({platform:o,url:n.url}),i.add(o))}else console.error("got social "+JSON.stringify(n)+" without a link field!");return e},[])},t.prototype.parsePhotos=function(e){var t=this.parseFacebookPhotos(e.photos_albums),i=this.parseWebsitePhotos(_.get(e,"official_website_data.photos"));return t.concat(i)},t.prototype.parseWebsitePhotos=function(e){return e&&0!==e.length?_.map(e,function(e){return{source:t.PhotoSourceWebsite,url:e.photo_url,description:e.description}}):[]},t.prototype.parseFacebookPhotos=function(e){if(!e||0===e.length)return[];var i=[];return _.forEach(e,function(e){_.forEach(e.value,function(e){i=i.concat(_.map(e.photos,function(e){return{source:t.PhotoSourceFacebook,url:e.photo_url,description:e.description}}))})}),i},t}();t.PhotoSourceFacebook="facebook",t.PhotoSourceWebsite="website",e.WixWizDataParser=t,angular.module("adiIntroInternal").service("wixWizDataParser",t)}(M||(M={})),function(e){var t=function(){function e(e,t,i,n,o,r,a,s,l){this.wixWizIntegration=e,this.wixWizDataParser=t,this.mediaApi=i,this.miscUtils=n,this.socialLinkManager=o,this.wixmpServices=r,this.$q=a,this.$timeout=s,this.wixMediaPlatform=l}return e.$inject=["wixWizIntegration","wixWizDataParser","mediaApi","miscUtils","socialLinkManager","wixmpServices","$q","$timeout","wixMediaPlatform"],e.prototype.toSearchQuery=function(e){var t={name:e.name,email:e.contactDetails?e.contactDetails.email:"",phone:e.contactDetails?e.contactDetails.phone:"",category:e.category};return e.indifferentLocation?t.no_address=!0:e.ipBasedLocation||(t.address=e.userLocation),t},e.prototype.fromSearchResult=function(e){return{name:e.text,contactDetails:{phone:e.phone,email:e.email,fax:e.fax,address:{fullAddress:e.address?e.address.full_addr:""}},socialLinks:[{platform:this.socialLinkManager.PLATFORM_FACEBOOK,url:e.facebook},{platform:this.socialLinkManager.PLATFORM_GOOGLE_PLUS,url:e.googleplus},{platform:this.socialLinkManager.PLATFORM_TWITTER,url:e.twitter},{platform:this.socialLinkManager.PLATFORM_YELP,url:e.yelp}],media:{logos:[{description:"",url:e.image}]},urls:e.urls,nameSimilarityRank:+e.name_similarity_rank,distance:+e.distance}},e.prototype.search=function(e){var t=this,i=this.toSearchQuery(e);return this.wixWizIntegration.searchBusiness(i).then(function(e){return{results:e.unified_search.map(function(e){return t.fromSearchResult(e)}),searchId:e.searchId}})},e.prototype.searchResult=function(e,t){var i=this;return this.wixWizIntegration.getExtendedBusinessData(e.name,e.urls,t).then(function(e){return i.wixWizDataParser.parseExtendedData(e)})},e.prototype.uploadMedia=function(e){var t=this;if(_.isEmpty(e))return this.$q.when({});var i=this.$q.defer(),n=this.saveBusinessImagesToWixMediaLoose(e),o=n.length,r=[];return n.map(function(e,n){return e.then(function(e){r[n]=t.miscUtils.mediaGalleryAdapter.convertToMediaObject(e.data),--o||i.resolve(r)},function(e){return r[n]=null,--o||i.resolve(r),t.$q.when({})})}),i.promise},e.prototype.saveBusinessImagesToWixMediaLoose=function(e){var t={tags:["_imported","_site_builder"],mediaType:"picture"},i=_.map(e,function(e){return _.assign({},t,{url:e})});return this.wixMediaPlatform.uploadPrivateImages(i)},e.prototype.uploadMediaToFolder=function(e,t,i,n){if(_.isEmpty(t))return this.$q.when({});var o={name:(i||"My Business")+(n?" - "+n:""),urls:t};return this.mediaApi.upload(e,[o]).then(function(e){return!!e.folders&&!!e.folders[0]&&e.folders[0].id})},e.prototype.getMediasFromFolder=function(t,i,n){var o=this;void 0===n&&(n=0);var r=this.$q.defer();return this.wixmpServices.getImagesByFolderId(t).then(function(a){a.length===i.length||n>=e.MAX_DOWNLOAD_TRYS?r.resolve(a):o.$timeout(function(){o.getMediasFromFolder(t,i,++n).then(function(e){r.resolve(e)})},e.RETRY_DELAY_MS)}),r.promise},e}();t.MAX_DOWNLOAD_TRYS=30,t.RETRY_DELAY_MS=500,e.WixWizDataManager=t,angular.module("adiIntroInternal").service("wixWizDataManager",t)}(M||(M={})),function(e){var t=function(){function t(e,t,i,n,o,r,a,s,l,c){var d=this;this.$rootScope=e,this.applicationParameters=t,this.localStorageService=i,this.wixWizDataManager=n,this.flags=o,this.validation=r,this.userService=a,this.introDataManipulation=s,this.userDetailsApi=l,this.$translate=c,this.isWixWizError=!1,this.selectedOfferByType=function(e){return _.find(d.data.serviceOffer,{type:e})},this.prepareGeneralCategories(),this.preparePreSuggestionsByVertical()}return t.$inject=["$rootScope","applicationParameters","localStorageService","wixWizDataManager","flags","validation","userService","introDataManipulation","userDetailsApi","$translate"],t.prototype.prepareDataForBuilder=function(){this.data.name||(this.data.name=this.$translate.instant("intro.business-name.empty")),this.data.contactDetails=this.data.contactDetails||{},this.validation.isWebsite(this.data.contactDetails.website)||(this.data.contactDetails.website=""),this.data.category||(this.data.category=_.clone(e.DEFAULT_CATEGORY)),this.data.socialLinks&&(this.data.socialLinks=this.data.socialLinks.filter(function(e){return!!e.url&&e.platform}))},t.prototype.prepareGeneralCategories=function(){var t=this;this.generalCategories=angular.copy(e.GENERAL_CATEGORIES),_.each(e.generalCategoriesByFlag,function(e,i){t.flags[i]&&_.assign(t.generalCategories,angular.copy(e))})},t.prototype.preparePreSuggestionsByVertical=function(){var t=this;this.preSuggestionsByVertical=angular.copy(e.preSuggestionsByVertical),_.each(e.preSuggestionsByVerticalByFlag,function(e,i){t.flags[i]&&_.assign(t.preSuggestionsByVertical,angular.copy(e))})},t.prototype.init=function(e){var i,n=this;this.flags.blog2&&"Blog"===e&&(e="Blog2"),this.vertical=e,this.data=this.createBaseData(),(i=this.localStorageService.get(t.INTRO_STORAGE_KEY))&&this.isStorageInvalid(i)?this.localStorageService.remove(t.INTRO_STORAGE_KEY):i&&(i.dates&&(i.dates=i.dates.map(function(e){return e?new Date(e):e})),angular.extend(this.data,i));var o=this.selectedOfferByType(this.vertical);o&&(o.checked=!0),this.introDataWatch||(this.introDataWatch=this.$rootScope.$watch(function(){return n.data},function(){return n.localStorageService.set(t.INTRO_STORAGE_KEY,n.data)},!0)),this.flags.youTubeChannel&&(this.data.videoStructure=void 0)},t.prototype.isStorageInvalid=function(e){var i=this.flags.blog2?"Blog":"Blog2";if(_.find(e.serviceOffer,function(e){return e.type===i}))return!0;var n=this.data.uuid&&e.uuid&&this.data.uuid!==e.uuid,o=this.data.createdOn&&e.createdOn?this.data.createdOn-e.createdOn:0;return n||o/1e3/60/60/24>=t.INTRO_STORAGE_EXPIRY_DAYS},t.prototype.reset=function(){this.data={},this.localStorageService.remove(t.INTRO_STORAGE_KEY),this.introDataWatch&&(this.introDataWatch(),this.introDataWatch=null)},t.prototype.getStoryId=function(){return this.data.storyId},t.prototype.setStoryId=function(e){this.data.storyId=e},Object.defineProperty(t.prototype,"siteProperties",{get:function(){var e={email:this.data.contactDetails&&this.data.contactDetails.email?this.data.contactDetails.email:"",fax:this.data.contactDetails&&this.data.contactDetails.fax?this.data.contactDetails.fax:"",phone:this.data.contactDetails&&this.data.contactDetails.phone?this.data.contactDetails.phone:"",logo:this.data.media&&this.data.media.logos&&this.data.media.logos[0]&&this.data.media.logos[0].data?this.data.media.logos[0].data.relativeUri:"",name:this.data.name?this.data.name:"",address:{street:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.street?this.data.contactDetails.address.street:"",city:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.city?this.data.contactDetails.address.city:"",state:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.state?this.data.contactDetails.address.state:"",country:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.country?this.data.contactDetails.address.country:"",zip:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.zipcode?this.data.contactDetails.address.zipcode:""}};return _.merge(e.address,this.getAddressForSiteProperties()),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logoDimensions",{get:function(){return{width:_.get(this.data,"media.logos[0].data.width",0),height:_.get(this.data,"media.logos[0].data.height",0)}},enumerable:!0,configurable:!0}),t.prototype.getAddressForSiteProperties=function(){var e=this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.fullAddress,t=this.hasAddress&&this.data.userLocation.formatted_address;return this.hasAddress&&this.getFullAddress(this.data.userLocation)===e?{googleFormattedAddress:t}:{fullAddress:e}},t.prototype.createBaseData=function(){var e=this,t=_.filter(this.applicationParameters.tpaTypes,function(t){var i=t.sectionUnderFlag;return(!e.flags.blog2||"Blog"!==t.type)&&("Members"!==t.type&&(!0===t.inConsumer&&(!i||e.flags[i])))});return{name:"",uuid:this.userService.getUUID(),createdOn:(new Date).getTime(),socialLinks:[],serviceOffer:t.map(function(e){return{type:e.type,checked:function(e){return function(e){return"Chat"===e}(e)}(e.type)}}),dates:[],lastSearchedTerm:"",validCategory:!1}},t.prototype.addressShouldBecomeMultiline=function(e){if(e.formatted_address.length<=25)return!1;var t=Array.prototype.concat.apply([],e.address_components.map(function(e){return e.types}));return!(_.difference(["street_number","route","locality"],t).length>0)&&(e.address_components&&e.address_components.length>1)},t.prototype.formatMultiLineAddress=function(e){var t={num:"street_number",street:"route",city:"locality",state:"administrative_area_level_2",country:"country",zip:"postal_code"},i=["num"," ","street","\n","city",", ","state"," ","zip","\n","country"],n=_.map(i,function(i){if("\n, ".indexOf(i)>-1)return i;var n=_.find(e,function(e){return e.types.indexOf(t[i])>-1});return n?n["country"===i?"long_name":"short_name"]:" "});return"United States"===n[i.indexOf("country")]?n[i.indexOf("country")]="USA":n[i.indexOf("state")]="",n.join("")},t.prototype.cleanAddress=function(e){return e.split("\n").filter(function(e){return""!==e.replace(/,/g,"").trim()}).map(function(e){return e.trim().replace(/\s+/g," ")}).join("\n")},t.prototype.getFullAddress=function(e){var t;return t=this.addressShouldBecomeMultiline(e)?this.formatMultiLineAddress(e.address_components):e.formatted_address,this.cleanAddress(t)},t.prototype.setAddress=function(e){var t={};e&&e.geometry&&(t.location={lat:e.geometry.location.lat,lng:e.geometry.location.lng}),e&&e.formatted_address&&(t.fullAddress=this.getFullAddress(e)),this.data.contactDetails||(this.data.contactDetails={}),this.data.contactDetails.address=t},t.prototype.merge=function(e){_.assign(this.data,e)},t.prototype.mergeSearchResult=function(e){_.assign(this.data,this.data.searchResults[e])},t.prototype.searchUsers=function(){var e=this;this.startWixWizAction();var t=this.wixWizDataManager.search(this.data).then(function(t){e.data.searchResults=t.results,e.wixWizSearchId=t.searchId});return this.handleWixWizResponse(t,!0)},t.prototype.getExtendedUserByPathsToNotUpdate=function(e){return this.wixWizDataManager.searchResult(e,this.wixWizSearchId).then(function(t){return{dataModel:_.assign({},t,{searchUrls:e.urls})}})},t.prototype.getExtendedUser=function(e){var t=this;this.startWixWizAction();var i=this.wixWizDataManager.searchResult(e,this.wixWizSearchId).then(function(i){if(_.assign(t.data,i,{searchUrls:e.urls}),!t.data.contactDetails.email)return t.userDetailsApi.getUserDetails().then(function(e){t.data.contactDetails.email=e.email})});return this.handleWixWizResponse(i)},t.prototype.updateDataByModelAndUserValuesPaths=function(e,t){var i=this.introDataManipulation.getUserValuesFromIntroData(this.data,t);_.assign(this.data,e),this.introDataManipulation.restoreUserValues(this.data,i)},Object.defineProperty(t.prototype,"hasAddress",{get:function(){return this.data.userLocation&&"object"==typeof this.data.userLocation},enumerable:!0,configurable:!0}),t.prototype.getCategoryNoError=function(){return this.data.category?this.data.category:_.clone(e.DEFAULT_CATEGORY)},t.prototype.getLod=function(){if(!this.hasAddress)return null;var e,t=this.data.userLocation;if(t&&t.address_components.length>0){var i=t.address_components[0].types[0];"locality"===i||"premise"===i?e="city":"street_number"===i?e="streetNum":i.indexOf("administrative_area_level")>=0?e="state":"country"===i?e="country":"route"===i&&(e="street")}return e},t.prototype.getBusinessCategoryResultByTerm=function(e){var t=_.findKey(n.BusinessCategoryIds,function(t){return t.indexOf(e)>-1});if(t){var i=t.split("|"),o=i[0],r=i[1];return{term:e,structureId:r,industryId:o}}},t.prototype.startWixWizAction=function(){this.isWixWizError=!1},t.prototype.handleWixWizResponse=function(e,t){var i=this;return void 0===t&&(t=!1),e.catch(function(){t&&(i.data.searchResults=[]),i.isWixWizError=!0})},t.prototype.isSocialLinksExists=function(){var e=!1;return _.isArray(this.data.socialLinks)&&this.data.socialLinks.forEach(function(t){if(!_.isEmpty(t.url))return e=!0,!1}),e},t.prototype.isLogoExists=function(){return!!_.get(this.data,"media.logos[0].url")&&!!_.get(this.data,"media.displayLogo")},t.prototype.isBusinessTagLineExists=function(){return _.get(this.data,"generalInfo.categories.length")>0},t.prototype.isEmailExists=function(){return!!_.get(this.data,"contactDetails.email")},t.prototype.isPhoneExists=function(){return!!_.get(this.data,"contactDetails.phone")},t.prototype.isFaxExists=function(){return!!_.get(this.data,"contactDetails.fax")},t.prototype.isAddressExists=function(){return!!_.get(this.data,"contactDetails.address.fullAddress")},t.prototype.website=function(){return _.get(this.data,"contactDetails.website")},t.prototype.isWebSiteExists=function(){return!!_.get(this.data,"contactDetails.website")},t}();t.INTRO_STORAGE_KEY="introData",t.INTRO_STORAGE_EXPIRY_DAYS=2,e.IntroManager=t,angular.module("adiIntroInternal").service("introManager",t)}(M||(M={}));var u,p=function(){function e(e){var t=this;this.grecaptcha=e,e.then(function(e){t.captcha=e})}return e.$inject=["grecaptcha"],e.prototype.getResponse=function(){return!!this.captcha&&this.captcha.getResponse()},e.prototype.create=function(e,t,i){this.grecaptcha.then(function(n){n.render("recaptcha-widget",{sitekey:"6LdtOAwTAAAAACLjEoxRBtqtm0RccjIFsLRrq6Wg",theme:"light",callback:e,"expired-callback":t,"error-callback":i})})},e.prototype.reload=function(){this.grecaptcha.then(function(e){e.reset()})},e.prototype.recaptchaParams=function(){return{recaptcha_response_field:this.getResponse()}},e}();angular.module("adiIntroInternal").service("captcha",p).factory("grecaptcha",["$q","$window",function(e,t){var i=e.defer();return t.onLoadRecaptchaCallback=function(){i.resolve(t.grecaptcha)},t.grecaptcha&&t.grecaptcha.render&&i.resolve(t.grecaptcha),i.promise}]),function(e){var t=function(){function t(e,i,n,o,r,a,s,l,c,d,u,p,g,h){var m=this;this.$state=i,this.$q=n,this.$log=o,this.introAnimationData=r,this.IntroAnimationElement=a,this.FakeIntroAnimationElement=s,this.introWindow=l,this.introAnimationAdapter=c,this.introEventsEmitter=d,this.introManager=u,this.introDataManipulation=p,this.$window=g,this.flags=h,this.disposable={},this.isFirstTime=function(){return!m.lastAction},this.next=this.stateAction("next"),this.skip=this.stateAction("skip"),this.back=this.stateAction("back"),this.wait=function(){return m.hideContent().then(function(){return m.playAnimation("wait")})},this.showContent=function(){return m.contentElement?m.contentElement.show():m.$q.when()},this.onResize=_.debounce(function(){var e=m.$state.current.name;if(m.introAnimationData[e]){var t=m.introWindow.getAnimationBoxDimensions(m.currentContentHeight);m.$q.all([m.hideContent(),m.introAnimationAdapter.resize(t)]).then(function(){m.backdropBoxPosition=t,m.contentBoxPosition=m.introWindow.getContentPosition(m.backdropBoxPosition,m.currentContentHeight),m.showContent(),angular.element(m.$window).trigger("resize")})}},t.RESIZE_DEBOUNCE),this.previousState=i.current.name,this.beforeStateChangeWatcher=e.$on("$stateChangeStart",function(e,t,i,n){return m.beforeStateChanged(e,t.name,n.name)}),this.afterStateChangeWatcher=e.$on("$stateChangeSuccess",function(e,t,i,n){return m.afterStateChanged(t.name,n.name)}),!this.flags.newIntroDesign&&this.introWindow.on("resize",this.onResize)}return t.$inject=["$rootScope","$state","$q","$log","introAnimationData","IntroAnimationElement","FakeIntroAnimationElement","introWindow","introAnimationAdapter","introEventsEmitter","introManager","introDataManipulation","$window","flags"],t.prototype.init=function(e,t,i){var n=this,o=this.flags.MED?this.FakeIntroAnimationElement:this.IntroAnimationElement;this.contentElement=o(t),this.animationElement=o(e),this.loadingElement=o(i);var r=this.$state.current.name;return this.introAnimationData[r]&&(this.currentContentHeight=this.introAnimationData[r].contentHeight,this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.contentBoxPosition=this.introWindow.getContentPosition(this.backdropBoxPosition,this.currentContentHeight)),this.introAnimationAdapter.init(e,this.backdropBoxPosition).then(function(){return n.showContent()})},t.prototype.dispose=function(){this.beforeStateChangeWatcher&&this.beforeStateChangeWatcher(),this.afterStateChangeWatcher&&this.afterStateChangeWatcher(),this.disposable={},this.contentElement=null,this.animationElement=null,!this.flags.newIntroDesign&&this.introWindow.off("resize",this.onResize),this.introAnimationAdapter.dispose()},t.prototype.stateAction=function(t){var i=this;return function(n){i.lastUserAction=t,n===e.INTRO_FINISHED?(i.lastAction="next",i.notifyStateChanged(i.$state.current.name,e.INTRO_FINISHED,"before")):i.$state.go(n)}},t.prototype.hideContent=function(e){if(!this.contentElement||this.contentElement.hidden)return this.$q.when();var t=[this.contentElement.hide()];return e&&t.push(this.animationElement.hide()),this.$q.all(t)},t.prototype.showBackdrop=function(){return this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.introAnimationAdapter.play("next",this.backdropBoxPosition)},t.prototype.scale=function(e){return this.currentContentHeight=e,this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.contentBoxPosition=this.introWindow.getContentPosition(this.backdropBoxPosition,this.currentContentHeight),this.introAnimationAdapter.scale(this.backdropBoxPosition)},t.prototype.isIntroState=function(t){return t&&t.startsWith(e.INTRO_STATES.INTRO)},t.prototype.beforeStateChanged=function(e,t,i){this.isIntroState(i)&&this.isIntroState(t)&&(this.lastAction=this.lastUserAction||this.guessAnimation(t,i),this.notifyStateChanged(i,t,"before"),this.lastUserAction=null)},t.prototype.afterStateChanged=function(t,i){var n=this;if(this.previousState=i,this.isIntroState(i))if(this.isIntroState(t)){var o=void 0;this.introAnimationData[t]?(this.currentContentHeight=this.introAnimationData[t].contentHeight,o=this.playAnimation(this.guessAnimation(t,i),t)):(this.currentContentHeight=null,o=this.playAnimation("blank")),this.flags.newIntroDesign&&(o=o||this.$q.when()),o.then(function(){return n.showContent()}).then(function(){return n.notifyStateChanged(i,t,"after")})}else this.notifyStateChanged(i,e.INTRO_FINISHED,"after")},t.prototype.notifyStateChanged=function(t,i,n){var o,r=this.introManager.data,a=this.lastAction;switch(t){case e.INTRO_STATES.INTRO:break;case e.INTRO_STATES.INTRO_CATEGORY_SEARCH:o={name:t,category:r.category};break;case e.INTRO_STATES.INTRO_BLOCKED_CATEGORY:case e.INTRO_STATES.INTRO_SERVICES_OFFER:case e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT:break;case e.INTRO_STATES.INTRO_BUSINESS_NAME:o={name:t,businessName:r.name};break;case e.INTRO_STATES.INTRO_BUSINESS_LOCATION:o={name:t,hasAddress:this.introManager.hasAddress,userLocation:r.userLocation,ipBasedLocation:r.ipBasedLocation,indifferentLocation:r.indifferentLocation};break;case e.INTRO_STATES.INTRO_BUSINESS_DATES:o={name:t,dates:this.introManager.data.dates};break;case e.INTRO_STATES.INTRO_EVENT_DETAILS:case e.INTRO_STATES.INTRO_SEARCH_CONFIRM:case e.INTRO_STATES.INTRO_SELECT_USER:case e.INTRO_STATES.INTRO_IMPORT_SITE_CONFIRM:case e.INTRO_STATES.INTRO_YOUTUBE_CHANNEL:break;case e.INTRO_STATES.INTRO_EDIT_USER:o={name:t,userValues:this.introDataManipulation.getUserValuesOfBusinessData(this.introManager.data)};break;case e.INTRO_STATES.INTRO_RECAPTCHA:break;default:this.$log.error('Intro: state changed from unknown state: "'+t+'"')}o&&this.introEventsEmitter.notifyStepChange(o,i,a,n)},t.prototype.guessAnimation=function(e,t){var i=Object.keys(this.introAnimationData);return!this.introAnimationData[t]||i.indexOf(e)<i.indexOf(t)?"back":"back"===this.lastAction?"next":this.lastAction?this.lastAction:"next"},t.prototype.guessLastNavigation=function(e,t){void 0===e&&(e=this.$state.current.name),void 0===t&&(t=this.previousState);var i=this.$state.get().map(function(e){return e.name}).filter(function(e){return e});return-1===i.indexOf(t)?"next":i.indexOf(e)<i.indexOf(t)?"back":i.indexOf(e)>i.indexOf(t)?"next":void 0},t.prototype.playAnimation=function(e,t){return t?(this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.contentBoxPosition=this.introWindow.getContentPosition(this.backdropBoxPosition,this.currentContentHeight)):(this.backdropBoxPosition=null,this.contentBoxPosition=null),this.introAnimationAdapter.play(e,this.backdropBoxPosition)},t}();t.RESIZE_DEBOUNCE=500,e.IntroStep=t,angular.module("adiIntroInternal").service("introStep",t)}(M||(M={})),function(e){e.CategoryTypes={SingleEvent:"singleEvent",Photographer:"photographer",WixVideo:"wixVideo"};var t=function(){function t(t){var i,n,o=this;this.flags=t,this.PHOTOGRAPHER_STRUCTURE_IDS=["fa28a6f03dbe530a8a8c6fcc","c280f2565940817f4edc48fe","70d8036f281d1ce612272b6a","cba925039ed9d3d360590d31","f1b75b7b719f5ed5b5bdc41f","fc57b1629c4ff302fb03e79c","228113fd238f42db1cf7160a","c5c1f3c63915119ed5c7feff","4c41f36c745880e6e42c5838","b5ab898f0afbfec00845808e","54004a861a39c4a3eb57d114","6faf46a50ee4aa0fff4e1135","02b40f8270007a792c300561","481a36b3eeb98dbfc2f904a6","94d4b55ce16bd162b833e148","88337e3560e889b475d492a7","0f04c68cffed335f82caabfa","3278ba04c3340b40d058ed5f","f764b4a56aca6b9f42c3ec3a","0fdf8f7c1fd0fb710ecb8826","320bc14e388b60c6ab499242","9b888a944e35417b0916e075","be6f1d8dc988d56f886ed440","137221e480f86fbd3c80436a","afee35922f1083c84a62b114","87de0335f09ebc252139974c","7d9f2f2d93d10adfb06b97f8","0d9c96444715ddf86b7dae9c"],this.SINGLE_EVENT_STRUCTURE_IDS=["86614cf07e4b4b958c17799e","53ccd6d3ed28056652523bf8","4115b4b3648e14a3d30fc868","d0a23df9f1f222e74ee14792","8ad09c40cd032d6f157c3061","8f92fe0b3e5ac39b968ed30a","66ab3cd9ab82187cba6d438a","3118118a1e2e5ef4539a51f3","64019cca29a74c24d67ceb8e","2634908fb29b65cc063198ae","59922f2d4d214b6def6bdb1c","93762d8e11ff81ded43e0d01","a1b4f8164a1a626a7eab7242","2b2732a277096b81176a53e0","039e2da6322d72456c116493","2597ed3258e7803bf2df1d3a","befcaf30ac3c975eff7c8018","9f963f4ae9923320f3d0df74","d24103ac38dad574c915c6d4","6366bb29a125a48254d64d8f","c3315453c35066966a2a2b6e","3edc74db8e5c9df30f410797","ff34af892529b6245eee17ef","1ab0758e82c7e024d6bc00fb","82e7dd0419f621c370d802cd","2ccd9638ebbeffef7087609f","96752dbe194b85d9648d5b49","661faae4694aff347897a3c6","7f46632f92b9f8f5c1afa658"],this.BUSINESS_NAME_TITLES=((i={DEFAULT:"input-label"})[e.CategoryTypes.SingleEvent]="label-singleEvent",i.b0a520919b99728bae200018="label-blog-website",i["25cee88a72dcbb6573f2d4b4"]="label-band",i.ab472419552a627ae17a6248="label-band",i["78dd91ce2f03d612f7d21d67"]="label-business",i["56457787d0958454ae07ba9d"]="label-business",i.ef0e83f2dd3e5f2de57ed162="label-business",i["02c27dfb52b10a2442c8b9db"]="label-choir",i["4dafcb6d45599002d5ca8c73"]="label-business",i.bd3e888b9611b0defe9346f5="label-band",i.ca997711954ac38e4c80b6cb="label-stagename",i["548727a6f23ccfaa7480dab6"]="label-business",i.e34f3d3221e0000ef9c482be="label-business",i.ddcf01985bb895180fddde3b="label-business",i.e7c71df1ba825a34be9150a7="label-business",i["082f23d3239e001fa382569e"]="label-artist-or-band",i.fc78cd8fe36ec98750f48598="label-artist-or-band",i["17117225096faf1aeb06cf43"]="label-artist-or-band",i["85ce4978795e86d267591938"]="label-artist-or-band",i["0d5622380c498d071bbef24d"]="label-artist",i.e5dda168311d4b74264a0c24="label-band2",i.f5feb80464366af988623685="label-business",i.a28c5e5ea1945e5fa4ca1728="label-business",i.ede0e37e9de8c82c420ad0b5="label-business",i["2722ab4c0feb9fa6fdcc1c6b"]="label-business",i["7bd6f744207891da991c722b"]="label-business",i.e5aec35bbc5fc88b438724cf="label-business",i.fa6f57e9df0b2c3dfa39cce9="label-business",i["0d9c96444715ddf86b7dae9c"]="label-business",i["6796cebe34d21cca1400d748"]="label-business",i["21c70c386045175cb342045a"]="label-business",i.e67d552f50a50029ed406a50="label-business",i["494592c679c0d50b9d48a03e"]="label-business",i.a8c41ae5ef3d8694abd189b1="label-business",i["7de435a5405481f73e84a8cd"]="label-fullname",i),this.LOCATION_TITLES=((n={DEFAULT:"input-label"})[e.CategoryTypes.SingleEvent]="label-singleEvent",n),this.valueForCategory=function(e,t){return function(i){var n=o.categoryType(i);return t+(e[i.structureId]||e[n]||e.DEFAULT)}},this.businessNameTitle=this.valueForCategory(this.BUSINESS_NAME_TITLES,"intro.business-name."),this.locationTitle=this.valueForCategory(this.LOCATION_TITLES,"intro.business-location."),this.flags.wixEvents&&(this.BUSINESS_NAME_TITLES.fa28a6f03dbe530a8a8c6fcc="label-"+e.CategoryTypes.SingleEvent,this.LOCATION_TITLES.fa28a6f03dbe530a8a8c6fcc="label-"+e.CategoryTypes.SingleEvent)}return t.$inject=["flags"],t.prototype.categoryType=function(t){return t?this.flags.wixEvents&&this.SINGLE_EVENT_STRUCTURE_IDS.indexOf(t.structureId)>=0?e.CategoryTypes.SingleEvent:this.PHOTOGRAPHER_STRUCTURE_IDS.indexOf(t.structureId)>=0?e.CategoryTypes.Photographer:null:""},t}();e.IntroContentTpa=t,angular.module("adiIntroInternal").service("introContentTpa",t)}(M||(M={})),function(e){e[e.None=0]="None",e[e.Reference=1]="Reference",e[e.Visibility=2]="Visibility"}(u||(u={}));var g=function(){function e(e,t,i,n){this.modelTree=e,this.introManager=t,this.applicationParameters=i,this.flags=n}return e.$inject=["modelTree","introManager","applicationParameters","flags"],e.prototype.updateReferenceFieldsVisibility=function(e,t,i,n,o){n[e]=t,this.modelTree.updateReferenceFieldsVisibility(i,e,o)},e.prototype.updateFieldVisibility=function(e,t,i,n,o){i.argsMatchingPolicy[e]=t,n===u.Visibility&&this.modelTree.updateFieldsVisibility(i,null,e,t,o)},e.prototype.getMaskType=function(e){var t=e&&"GeneralDescription"===e.getContentElementType(),i=t&&"footer"!==e.containerPageId,n=t&&"footer"===e.containerPageId,o=e&&e.contentElementType;return i?o="Header":n&&(o="Footer"),o},e.prototype.update=function(e){var t=this,i=this.getMaskType(e),n=e.getReferenceFields();this.maskConfiguration[i].fields.forEach(function(i){i.typeUpdate===u.Reference?t.updateReferenceFieldsVisibility(i.key,i.condition(),e,n,i.forceDefaultValue):t.updateFieldVisibility(i.key,i.condition(),e,i.typeUpdate,i.forceDefaultValue)})},Object.defineProperty(e.prototype,"maskConfiguration",{get:function(){var e=this,t={Header:{fields:[{key:"MainEmail",condition:function(){return!1},typeUpdate:u.Visibility,forceDefaultValue:!1},{key:"Contact.phone number",condition:function(){return!1},typeUpdate:u.Reference,forceDefaultValue:!0},{key:"Logo",condition:function(){return e.introManager.isLogoExists()},typeUpdate:u.None},{key:"BusinessName",condition:function(){return!e.introManager.isLogoExists()},typeUpdate:u.Visibility,forceDefaultValue:!1},{key:"BusinessTagline",condition:function(){return!1},typeUpdate:u.None},{key:"Social.SocialButtons",condition:function(){return e.introManager.isSocialLinksExists()},typeUpdate:u.Reference,forceDefaultValue:!0}]},Footer:{fields:[{key:"Contact.fax",condition:function(){return!1},typeUpdate:u.Reference,forceDefaultValue:!1},{key:"MainEmail",condition:function(){return!1},typeUpdate:u.Visibility,forceDefaultValue:!1},{key:"Contact.phone number",condition:function(){return e.introManager.isPhoneExists()},typeUpdate:u.Reference,forceDefaultValue:!1},{key:"Logo",condition:function(){return!1},typeUpdate:u.None},{key:"BusinessName",condition:function(){return!1},typeUpdate:u.Visibility,forceDefaultValue:!1},{key:"BusinessTagline",condition:function(){return!1},typeUpdate:u.None},{key:"Social.SocialButtons",condition:function(){return!e.introManager.isSocialLinksExists()},typeUpdate:u.Reference,forceDefaultValue:!0},{key:"CopyrightMessage",condition:function(){return!0},typeUpdate:u.Visibility,forceDefaultValue:!0},{key:"Contact.address for display",condition:function(){return!1},typeUpdate:u.Reference,forceDefaultValue:!1}]},Contact:{fields:[{key:"Social.SocialButtons",condition:function(){return!0},typeUpdate:u.Reference,forceDefaultValue:!0},{key:"address for display",condition:function(){return!0},typeUpdate:u.Visibility},{key:"address for google map",condition:function(){return!0},typeUpdate:u.Visibility}]}};return this.flags.subscribeInFooter&&t.Footer.fields.push({key:"Subscribe",condition:function(){var t=e.introManager.data.serviceOffer&&e.introManager.data.serviceOffer.find(function(t){return t.type===e.applicationParameters.tpaTypes.GetSubscribers.type});return!!t&&t.checked},typeUpdate:u.Visibility,forceDefaultValue:!1}),t},enumerable:!0,configurable:!0}),e}();angular.module("adiIntroInternal").service("fieldsMasks",g),function(e){var t=function(){function e(e){this.$q=e,this.hidden=!1}return e.$inject=["$q"],e.prototype.hide=function(){return this.$q.when()},e.prototype.show=function(){return this.$q.when()},e}();e.FakeIntroAnimationElement=t,angular.module("adiIntroInternal").factory("FakeIntroAnimationElement",["$q",function(e){return function(){return new t(e)}}])}(M||(M={})),function(e){var t=function(){function e(e,t,i){this.$q=e,this.flags=t,this.backdropAnimations=i,this.lastAnimating=e.when()}return e.$inject=["$q","flags","backdropAnimations"],e.prototype.init=function(e,t){return this.backdropAnimations.init(e[0],t)},e.prototype.play=function(e,t){return void 0===e&&(e="next"),this.lastAnimating=this.backdropAnimations.play(e,t),this.lastAnimating},e.prototype.wait=function(){return this.play("wait")},e.prototype.resize=function(e){var t=this;return this.lastAnimating.then(function(){return t.backdropAnimations.resize(e)})},e.prototype.scale=function(e){return this.backdropAnimations.scale(e)},e.prototype.dispose=function(){this.backdropAnimations.dispose()},e}();e.IntroAnimationAdapter=t,angular.module("adiIntroInternal").service("introAnimationAdapter",t)}(M||(M={})),function(e){var t=function(){function e(e,t,i){this.$q=e,this.$timeout=t,this.element=i,this.hidden=!1}return e.$inject=["$q","$timeout","element"],e.prototype.hide=function(){var e=this;this.element.css("opacity",0);var t=this.$q.defer();return this.$timeout(function(){e.hidden=!0,t.resolve()},500),t.promise},e.prototype.show=function(){return this.element.css("opacity",1),this.hidden=!1,this.$q.when()},e}();e.IntroAnimationElement=t,angular.module("adiIntroInternal").factory("IntroAnimationElement",["$q","$timeout",function(e,i){return function(n){return new t(e,i,n)}}])}(M||(M={})),function(e){e.INTRO_FINISHED="intro.finished";var t=function(){function e(){var e=this;this.stepChangeListeners=[],this.notifyStepChange=function(t,i,n,o){e.stepChangeListeners.map(function(e){return e(t,i,n,o)})}}return e.prototype.listenStepChange=function(e){var t=this,i=this.stepChangeListeners.push(e)-1;return function(){t.stepChangeListeners[i]=function(){}}},e}();e.IntroEventsEmitter=t,angular.module("adiIntroInternal").service("introEventsEmitter",t)}(M||(M={})),function(e){var t=function(){function e(e,t,i,n){this.mediaObj=e,this.miscUtils=t,this.clientTopology=i,this.flags=n}return e.prototype.init=function(){this.mediaObj.displayLogo=!0,this.mediaObj.logos=this.mediaObj.logos||[],this.mediaObj.logos[0]=this.mediaObj.logos[0]||{}},e.prototype.getLogoURL=function(){var e=this.mediaObj.logos[0].data,t=e&&e.relativeUri;if(t){var i=(window.devicePixelRatio||1)*(this.flags.MED?105:127);return this.clientTopology.mediaUrl+"/"+t+"/v1/fill/w_"+i+",h_"+i+",al_c,q_90/"+t}return this.mediaObj.logos[0].url},e.prototype.setLogo=function(e){this.mediaObj.displayLogo=!0;var t={source:"facebook",url:e.serverResponse.data.originalUrl,localFile:e.serverResponse,data:null,description:""};this.mediaObj.logos[0]=t,t.data=this.miscUtils.mediaGalleryAdapter.convertToMediaObject(t.localFile.data),t.data.mediaType="clipart"},e.prototype.hideLogo=function(){this.mediaObj.displayLogo=!1},e.prototype.isLogoVisible=function(){return this.mediaObj.displayLogo},e.prototype.cleanUp=function(){for(;this.mediaObj&&this.mediaObj.logos[0]&&!this.mediaObj.logos[0].url;)this.mediaObj.logos.shift()},e}();e.IntroLogoPersistence=t}(M||(M={})),function(e){var t=function(){function t(e,t,i,n){this.mediaApi=e,this.introManager=t,this.$q=i,this.storyServices=n}return t.$inject=["mediaApi","introManager","$q","storyServices"],t.prototype.upload=function(i,n){var o=this;if(!this.introManager.data.media||!this.introManager.data.media.photos||0===this.introManager.data.media.photos.length)return this.$q.when();var r=[],a=[];_.forEach(this.introManager.data.media.photos,function(t){t.source===e.WixWizDataParser.PhotoSourceFacebook?r.push(t.url):t.source===e.WixWizDataParser.PhotoSourceWebsite&&a.push(t.url)});var s=t.MaxImagesToUpload/2,l=t.MaxImagesToUpload/2;r.length<a.length?(s=Math.min(r.length,s),l=t.MaxImagesToUpload-s):(l=Math.min(a.length,l),s=t.MaxImagesToUpload-l);var c={name:n,urls:_.take(r,s).concat(_.take(a,l))};return this.mediaApi.upload(i,[c]).then(function(e){o.storyServices.story.privateMediaFolderId=e&&e.folders&&e.folders.length>0?e.folders[0].id:""})},t}();t.MaxImagesToUpload=100,e.IntroMediaUploader=t,angular.module("adiIntroInternal").service("introMediaUploader",t)}(M||(M={})),function(e){var t=function(){function t(e,t){var i=this;this.socialLinkManager=e,this.flags=t,this.createSocialButtons=function(e){return _.filter(e,function(e){return!!e.url}).map(function(e){var t=e.platform?e.platform:i.socialLinkManager.invalidPlatformName,n=i.socialLinkManager.getPlatformByName(t)||i.socialLinkManager.getPlatformByName(i.socialLinkManager.invalidPlatformName);return{platform:e.platform,Title:e.platform,mediaType:"icon",width:200,height:200,relativeUri:n.lightRelativeUri,Link:{targetUrl:i.makeValidURL(e.url)}}})}}return t.$inject=["socialLinkManager","flags"],t.prototype.makeValidURL=function(e){return e.startsWith("http")||(e="http://"+e),e},t.prototype.createMediaItem=function(e){return{fileName:"Two Flamingos",relativeUri:"0d5a8583187a44688b918f91298eba80.jpg",width:1920,height:1280,Title:"Two Flamingos",Description:"",Link:{},mediaType:"image"}},t.prototype.isValidContactDescription=function(e,t){if(!t)return!1;var i=t,n=i.parking&&(i.parking.lot||i.parking.street||i.parking.valet),o=!!i.publicTransport;return n||o},t.prototype.formatContactDescription=function(e){var t="";return e.parking&&(e.parking.lot||e.parking.street||e.parking.valet)&&(t+=this.formatParking(e.parking)),e.publicTransport&&(t+=this.formatPublicTransport(e.publicTransport)),t},t.prototype.formatPublicTransport=function(e){return"To reach us via public transit: "+e},t.prototype.formatParking=function(e){var t="Should you be arriving by car, we offer ",i=(this.flags.lodash4?_[String("strictSumBy")]:_[String("sum")])(_.values(e),function(e){return e?1:0}),n=0;return e.valet&&(t+=this.addSentencePart("valet parking",0===n,2===i),i--,n++),e.lot&&(t+=this.addSentencePart("a parking lot with parking for our customers",0===n,2===i),i--,n++),e.street&&(t+=this.addSentencePart("street parking",0===n,2===i)),t+"."},t.prototype.addSentencePart=function(e,t,i){return t?e:(i?", ":" and ")+e},t.prototype.formatCategories=function(e){return e?e.join(" · "):null},t.prototype.isValidOpeningHours=function(e,t){return!(!t||0===t.length)&&_.some(t,function(e){return e&&e.day&&e.from&&e.to})},t.prototype.formatOpeningHours=function(t){var i=this;if(!t)return null;t=t.map(function(t){return t.day===e.WeekDay.Sunday&&(t.day=e.WeekDay.SundayLastDayOfWeek),t});var n=_.groupBy(t,"day");return Object.keys(n).map(function(e){var t=n[e].map(function(e){return e&&e.from&&e.to?i.formatHour(e.from)+" - "+i.formatHour(e.to):null}).filter(function(e){return!!e}).join(", ");return i.formatDay(parseInt(e,10))+": "+t}).join("\n")},t.prototype.formatHour=function(e){var t=e.hour>12?(e.hour-12).toString():e.hour.toString();return(t+=":"+(0===e.minute?"00":e.minute))+(e.hour>12?"pm":"am")},t.prototype.formatDay=function(t){switch(t){case e.WeekDay.Monday:return"Mon";case e.WeekDay.Tuesday:return"Tue";case e.WeekDay.Wednesday:return"Wed";case e.WeekDay.Thursday:return"Thu";case e.WeekDay.Friday:return"Fri";case e.WeekDay.Saturday:return"Sat";case e.WeekDay.Sunday:case e.WeekDay.SundayLastDayOfWeek:return"Sun"}},t.prototype.formatYear=function(e){return e&&e.getFullYear?e.getFullYear().toString():""},t.prototype.formatCopyrightMessage=function(e){return"©"+(new Date).getFullYear()+" by "+e+". Proudly created with Wix.com"},t.prototype.formatReview=function(e){if(!e)return e;var i=_.words(e);return i.length>t.MaxReviewWords?i.splice(0,t.MaxReviewWords)+"...":e},t.prototype.formatSocialLinks=function(e){var t=[];return e&&(t=e.map(function(e){return{platform:e.platform,url:e.Link.targetUrl}})),t},t}();t.MaxReviewWords=150,e.IntroDataFormatter=t,angular.module("adiIntroInternal").service("introDataFormatter",t)}(M||(M={})),function(e){var t=function(){function t(){}return t.prototype.getUserValuesFromIntroData=function(e,t){return _.map(t,function(t){return"socialLinks"===t?{path:t,value:_.cloneDeep(_.filter(e.socialLinks,function(e){return!0===e.constForWixWiz}))}:{path:t,value:_.get(e,t)}})},t.prototype.isNewPlatform=function(e,t){return!_.find(e,function(e){return e.platform===t})},t.prototype.restoreUserValues=function(e,t){var i=this;_.each(t,function(t,n){"socialLinks"===t.path?_.each(t.value,function(t){i.isNewPlatform(e.socialLinks,t.platform)?e.socialLinks.push(_.cloneDeep(t)):_.map(e.socialLinks,function(e){return e.platform===t.platform&&(e.url=t.url),e})}):_.set(e,t.path,t.value)})},t.prototype.getFieldsToNotOverride=function(t,i,n){var o=this.getDiffBetweenTwoObjects(i,n),r=o.socialLinks;this.markSocialLinksToNotOverride(t,r);var a=_.map(o,function(t,i){return e.BusinessCardEditable.fieldToIntroManagerPath[i]});return a.push(e.BusinessCardEditable.fieldToIntroManagerPath.businessName),a},t.prototype.getDiffBetweenTwoObjects=function(e,t){return function e(t,i){return _.transform(t,function(t,n,o){_.isEqual(n,i[o])||(t[o]=_.isObject(n)&&_.isObject(i[o])?e(n,i[o]):n)})}(e,t)},t.prototype.getUserValuesOfBusinessData=function(t){var i=e.BusinessCardEditable.getBusinessCardDataModel(t),n=e.BusinessCardEditable.initializedBusinessCardValues;return this.getFieldsToNotOverride(t,i,n)},t.prototype.markSocialLinksToNotOverride=function(e,t){var i=e.socialLinks;_.each(t,function(e){e&&_.each(i,function(t){t.url===e.url&&(t.constForWixWiz=!0)})})},t}();e.IntroDataManipulation=t,angular.module("adiIntroInternal").service("introDataManipulation",t)}(M||(M={})),function(e){var t=function(){function e(e,t){var i=this;this.$window=e,this.clientTopology=t,this.on=function(e,t){return i.$window.addEventListener(e,t)},this.off=function(e,t){return i.$window.removeEventListener(e,t)},this.trigger=function(e){return angular.element(i.$window).trigger(e)},this.formattedDate=function(e){return Intl.DateTimeFormat(i.clientTopology.locale).format(e)},this.formattedTime=function(e){return Intl.DateTimeFormat(i.clientTopology.locale,{hour:"numeric",minute:"numeric"}).format(e)},this.userTimezone=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone}}return e.$inject=["$window","clientTopology"],e.prototype.back=function(){this.$window.history.go(-1)},e.prototype.getWindowDimensions=function(){return{windowWidth:this.$window.innerWidth,windowHeight:this.$window.innerHeight}},e.prototype.getAnimationBoxDimensions=function(t){var i=this.getWindowDimensions(),n=i.windowWidth,o=i.windowHeight,r=Math.floor(.42*n);r=Math.max(r,714),r=Math.min(r,806);var a=e.CONTENT_WIDTH,s=Math.floor(.7*(r-a)+t);return{y:Math.floor((o-s)/2),x:Math.floor((n-r)/2),width:r,height:s}},e.prototype.getContentPosition=function(t,i){var n=this.getWindowDimensions(),o=n.windowWidth,r=n.windowHeight,a=e.CONTENT_WIDTH;return{x:Math.floor((o-a)/2),y:Math.floor((r-i)/2),spacing:(t.width-a)/2}},e}();t.CONTENT_WIDTH=522,e.IntroWindow=t,angular.module("adiIntroInternal").service("introWindow",t)}(M||(M={}));var h=function(){function e(e){this.siteConverterConf=e,this.CONVERT_URL_REGEX=/^(?:(?:https?:)?\/\/)?(.*?)\/?$/}return e.$inject=["siteConverterConf"],e.prototype.areMediasYoutubeOrVimeo=function(e,t){var i=this;return this.isListSection(e)?e.list.some(function(e){return i.isYoutubeOrVimeo(e,t)}):this.isYoutubeOrVimeo(e,t)},e.prototype.isYoutubeOrVimeo=function(e,t){return e.media&&e.media.some(function(e){return t.test(e.src)})},e.prototype.isSingleBlockSection=function(e){return"single"===e.type},e.prototype.isListSection=function(e){return"list"===e.type},e.prototype.isHeaderSection=function(e){return"header"===e.type},e.prototype.isPresetPreview=function(e){return!!e.solution},e.prototype.isGrid=function(e){return"grid"===e.list_type},e.prototype.isSlideshow=function(e){return e&&"slideshow"===e.list_type},e.prototype.isHorizontalList=function(e){return e&&"horizontal"===e.list_type},e.prototype.isVerticalList=function(e){return e&&"vertical"===e.list_type},e.prototype.hasNoText=function(e){return!e.title&&this.hasNoExtraText(e)},e.prototype.hasNoExtraText=function(e){return!e.subtitle&&!e.paragraph},e.prototype.hasMediaWithoutLink=function(e){return this.hasMedia(e)&&!e.media.link},e.prototype.hasMedia=function(e){return e.media&&e.media.length},e.prototype.isFixedPositioned=function(e){return"fixed"===_.get(e,"position.type")},e.prototype.isHorizontalListPreset=function(e){return e.preset.data.itemsInRow>1},e.prototype.isVerticalListPreset=function(e){return!e.preset.data.itemsInRow||1===e.preset.data.itemsInRow},e.prototype.isStripGalleryPreset=function(e){return!0},e.prototype.isGridGalleryPreset=function(e){return!0},e.prototype.getHorizontalListPresets=function(e){var t=this;return e.filter(function(e){return t.isHorizontalListPreset(e)})},e.prototype.getVerticalListPresets=function(e){var t=this;return e.filter(function(e){return t.isVerticalListPreset(e)})},e.prototype.getStripGalleryPresets=function(e){var t=this;return e.filter(function(e){return t.isStripGalleryPreset(e)})},e.prototype.getGridGalleryPresets=function(e){var t=this;return e.filter(function(e){return t.isGridGalleryPreset(e)})},e.prototype.isSideList=function(e,t){return e.position&&e.position.width<t.pages[0].dimension.width/2},e.prototype.isListOfImages=function(e){var t=this;return e.list.every(function(e){return t.isMainlyMedia(e)})},e.prototype.isMainlyMedia=function(e){return this.hasNoExtraText(e)&&!this.hasButton(e)&&this.hasMediaWithoutLink(e)},e.prototype.hasButton=function(e){return!!e.button},e.prototype.shouldTransformListToGallery=function(e){return this.isListSection(e)&&this.isListOfImages(e)&&!this.isSlideshow(e)&&!this.isHorizontalList(e)},Object.defineProperty(e.prototype,"disallowedPlatforms",{get:function(){return["wix","weebly","shopify","jimdo","squarespace","godaddy","webflow","wordpress","wordpress.com","1&1","web","bigcommerce","thegrid","sitebuilder"]},enumerable:!0,configurable:!0}),e.prototype.transformListToGallery=function(e){return{type:"single",media:_.flattenDeep(e.list.map(function(e){return e.media.filter(function(e){return!e.background}).map(function(t){return t.title=e.title,t})})),mediaDisplayType:"gallery",migratedListType:e.list_type}},e.prototype.cleanRichText=function(e){var t=$("<div />").html(e).children();return t.length>0?t.text():name},e.prototype.hasOnlySmallMedia=function(e){var t=this;return this.isListSection(e)?e.list&&e.list.every(function(e){return t.singleSectionHasSmallMedia(e)}):!!this.isSingleBlockSection(e)&&this.singleSectionHasSmallMedia(e)},e.prototype.isSectionEmpty=function(e){var t=this;return this.isListSection(e)?e.list&&e.list.every(function(e){return t.isSingleSectionEmpty(e)}):!this.isSingleBlockSection(e)||this.isSingleSectionEmpty(e)},e.prototype.isSingleSectionEmpty=function(e){return this.hasNoText(e)&&!this.hasMedia(e)&&!this.hasButton(e)},e.prototype.singleSectionHasSmallMedia=function(e){var t=this;return e.media&&e.media.every(function(e){return Math.min(e.realWidth,e.width)<=t.siteConverterConf.SMALL_IMAGE_WIDTH_HIGH_BOUNDARY})},e.prototype.convertUrlToCanonicalForm=function(e){return e.match(this.CONVERT_URL_REGEX)[1]},e}();angular.module("adiIntroInternal").service("wizUtils",h);var m=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},v=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v){this.$q=e,this.introManager=t,this.wizWebsiteLoader=i,this.mediaOverride=n,this.contentElementGenerator=o,this.miscUtils=r,this.defaultSections=a,this.$injector=s,this.flags=l,this.wizUtils=c,this.wixWizDataManager=d,this.imageScore=u,this.consumerBiLogger=p,this.consumerBiLoggerHelpers=g,this.siteConverterLogs=h,this.siteConverterConf=m,this.fontCustomizationService=f,this.storyServices=v,this.isActivelyConvertingSite=!1,this.lastConvertionSuccess=null,this.FullSiteDataTimeoutResponse=4e4,this.importSiteBlacklistDomains=[],this.siteConverterProgressSteps=["builder.progress-bar.step-message.sc-adding-header-and-footer","builder.progress-bar.step-message.sc-arranging-text-images","builder.progress-bar.step-message.sc-adding-site-colors","builder.progress-bar.step-message.sc-adding-site-fonts"],this.flags.wizSiteConverter&&(this.flags.textManager=!0),this.loggerId=Math.round(1e3*Math.random())}return e.$inject=["$q","introManager","wizWebsiteLoader","mediaOverride","contentElementGenerator","miscUtils","defaultSections","$injector","flags","wizUtils","wixWizDataManager","imageScore","consumerBiLogger","consumerBiLoggerHelpers","siteConverterLogs","siteConverterConf","fontCustomizationService","storyServices"],e.prototype.uploadMedia=function(e,t,i){return this.log("uploading media",this.storyName),this.wizContentManager.uploadMedia(e,i,this.storyName,t)},e.prototype.waitForMediaUpload=function(e){return this.log("waiting for media upload"),this.wizContentManager.prepareMedia(e)},e.prototype.uploadImportedData=function(e,t,i,n,o){var r=this,a=e.parsedData;this.isActivelyConvertingSite||this.startLoading();var s=a,l=_.cloneDeep(a);this.siteConverterLogs.groupStart("Wiz JSON Parsing"),this.wizContentManager=this.$injector.get("wizContentManager"),this.log("wixwiz data, before processing",s),this.flags.debugWizSiteConverter&&(window.siteConverter={before:s.pages[0].sections});var c=l.pages[0].images.length,d=l.pages[0].sections.length;return this.consumerBiLogger.intro.siteConverterSiteJsonParsingStart(),Promise.resolve().then(function(){return r.wizContentManager.setCurrentUrl(t)}).then(function(){return r.removeLowConfidenceSections(l)}).then(function(){return r.uploadMedia(t,i,l)}).then(function(){return r.waitForMediaUpload(t)}).then(function(e){r.log("uploaded media",{mediaToUpload:c,successfullyUploaded:e&&e.length}),r.mediaItems=e}).then(function(){return r.runPreTransforms(l)}).then(function(e){return r.runAsyncTransforms(e)}).then(function(e){if(!r.shouldContinueToConvertSite(e))throw r.log("not converting site, NOGO",e),"not converting site";return e}).then(function(e){return r.runPostTransforms(e,n)}).then(function(e){return r.takeTopSections(e)}).then(function(e){return r.setImportedSite(e)}).then(function(){return r.enablePrequisiteFlags()}).then(function(){r.consumerBiLogger.intro.siteConverterSiteJsonParsingSuccess(r.mediaItems&&r.mediaItems.length,c,l.pages[0].sections.length,d),r.doneLoading()}).catch(function(e){if(r.consumerBiLogger.intro.siteConverterSiteJsonParsingFailed(r.mediaItems&&r.mediaItems.length,c,l.pages[0].sections.length,d),r.errorInLoading(e),o)throw e})},e.prototype.preloadFullSiteData=function(e,t){this.consumerBiLoggerHelpers.resetLoadTime(),this.siteConverterLogs.trace(this.siteConverterLogs.defaultLoggerId,"requesting wixwiz fullsite data");var i=this.$injector.get("importSiteContent");this.preloadedFullSiteDataPromise={url:e,title:t,promise:i.analyzeFullSite(e,t,this.introManager.data.siteConverterSessionId,this.FullSiteDataTimeoutResponse).then(function(e){return e})}},e.prototype.enablePrequisiteFlags=function(){this.log("enabling prequisite flags",n.deepClone(this.flags),this.flags),this.flags.presetSettings=!0,this.flags.presetsSlideShow=!0,this.flags.coreNewVideoValidation=!0},e.prototype.isImportUrlAllowed=function(e){return!_.find(this.importSiteBlacklistDomains,function(t){return e.indexOf(t)>-1})},e.prototype.postloadFullSiteData=function(e,t){var i=this;this.preloadedFullSiteDataPromise&&this.isImportUrlAllowed(e)&&this.preloadedFullSiteDataPromise.promise.then(function(n){return i.uploadImportedData(n,e,t,!0,!1)}).catch(function(e){i.log("error in getFullSiteData",e),i.errorInLoading(e)})},e.prototype.startLoading=function(){this.isActivelyConvertingSite=!0,this.lastConvertionSuccess=null,this.loadPromise=this.$q.defer()},e.prototype.doneLoading=function(){this.siteConverterLogs.groupEnd(),this.loadPromise.resolve()},e.prototype.errorInLoading=function(e){this.siteConverterLogs.groupEnd(),this.isActivelyConvertingSite=!1,this.lastConvertionSuccess=!1,this.loadPromise.reject(e)},e.prototype.waitForSiteConverter=function(e){return this.storyName=e,this.loadPromise.promise},e.prototype.setPlatformAllowed=function(e){this.platformAllowed=e},e.prototype.isPlatformAllowed=function(){return this.platformAllowed},e.prototype.setImportedSite=function(e){this.log("wixwiz data, after processing",e),this.lastLoadedSite=e,this.flags.debugWizSiteConverter&&window.siteConverter&&(window.siteConverter.after=e.pages[0].sections)},e.prototype.shouldContinueToConvertSite=function(e){return e.pages[0].sections.length>=this.siteConverterConf.MINIMUM_VIABLE_SECTIONS},e.prototype.runPreTransforms=function(e){this.siteConverterLogs.groupStart("preTransforms"),this.log("running preTransforms");var t=this.transform(e,[this.setRealMediaWidth,this.removeExcessSections,this.removeFixedPositionedSections,this.removeBadMedia,this.removeSingleSectionsWithButtonOnly,this.removeSingleSectionsWithShortParagraphOnly,this.changeSlideshowWithSmallMediaToHorizontalList,this.removeEmptySections]);return this.siteConverterLogs.groupEnd(),t},e.prototype.removeEmptySections=function(e){var t=this;return e.pages[0].sections=e.pages[0].sections.filter(function(e){return!t.wizUtils.isSectionEmpty(e)}),e},e.prototype.changeSlideshowWithSmallMediaToHorizontalList=function(e){var t=this;return this.log("checking slideshow image size"),e.pages[0].sections.filter(this.wizUtils.isSlideshow).forEach(function(e){t.wizUtils.hasOnlySmallMedia(e)?(e.list_type="horizontal",t.siteConverterLogs.trace(t.siteConverterLogs.defaultLoggerId,"small image slideshow, changing to horizontal",e)):t.siteConverterLogs.trace(t.siteConverterLogs.defaultLoggerId,"big image slideshow, not changing")}),e},e.prototype.runAsyncTransforms=function(e){return m(this,void 0,void 0,function(){var t=this;return f(this,function(i){switch(i.label){case 0:return this.siteConverterLogs.groupStart("asyncTransforms"),this.log("running asyncTransforms"),[4,_[String("sequencePromises")]([this.selectSectionMedia],function(i){return e=i.call(t,e)})];case 1:return i.sent(),this.siteConverterLogs.groupEnd(),[2,e]}})})},e.prototype.runPostTransforms=function(e,t){this.siteConverterLogs.groupStart("postTransforms"),this.log("running postTransforms");var i=this.transform(e,[this.handleTexts,this.transformListWithOnlyImagesToGallery,this.handleMediaInAllListSections,t?this.prepareFirstSectionAsWelcome:function(e){return e},this.ensureFirstSectionHasMedia,this.removeEmptySections]);return this.siteConverterLogs.groupEnd(),i},e.prototype.transform=function(e,t){var i=this;try{t.forEach(function(t){e=t.call(i,e)})}catch(e){this.siteConverterLogs.trace(this.siteConverterLogs.defaultLoggerId,"SiteConverter: error",e)}return e},e.prototype.populateSectionWithCMSMedia=function(e){var t=this.generateWelcomeCE();e.media=t.getFieldValueByType("media","image",!0)},e.prototype.generateWelcomeCE=function(){return this.contentElementGenerator.generate(this.defaultSections.getSectionOfceType("Welcome"),0)},e.prototype.generateWelcomeWizSection=function(){var e=this.generateWelcomeCE();return{type:"single",title:"",subtitle:e.getFieldValueByType("text","subTitle",!0),paragraph:e.getFieldValueByType("text","longText",!0),media:e.getFieldValueByType("media","image",!0)}},e.prototype.hasOnlyButton=function(e){return!e.media&&!e.paragraph&&!e.title&&!e.subtitle&&e.button},e.prototype.hasOnlyShortParagraph=function(t){return!t.button&&!t.media&&!t.title&&!t.subtitle&&t.paragraph&&t.paragraph.length<e.MINIMUM_PARAGRAPH_LENGTH},e.prototype.getSite=function(){return this.lastLoadedSite},e.prototype.isConvertingSite=function(){return this.flags.wizSiteConverter&&this.isActivelyConvertingSite},e.prototype.wasLastConvertionSuccessfull=function(){return this.lastConvertionSuccess},e.prototype.setFinishedConvertingSite=function(){this.isActivelyConvertingSite=!1,this.lastConvertionSuccess=!0},e.prototype.siteFinishingTouches=function(){this.log("running finishing touches"),this.reduceFontSize(),this.setWelcomeSectionTitle()},e.prototype.setPrivateFolderMediaId=function(){this.storyServices.story.privateMediaFolderId=this.wizContentManager.getCurrentMediaFolderId()},e.prototype.setWelcomeSectionTitle=function(){var e=this,t=_.first(this.getSite().pages[0].sections.filter(function(t){return e.wizUtils.isSingleBlockSection(t)||e.wizUtils.isListSection(t)}));this.wizUtils.hasNoText(t)&&(this.log("no text, populating title"),t.rawTitle="",t.title=this.introManager.data.name?"Welcome to "+this.introManager.data.name:"Welcome!")},e.prototype.reduceFontSize=function(){this.log("reducing font size",this.siteConverterConf.DEFAULT_FONT_SIZE),this.fontCustomizationService.setFontSizeAllSite(this.siteConverterConf.DEFAULT_FONT_SIZE)},e.prototype.removeSingleSectionsWithShortParagraphOnly=function(e){var t=this,i=e.pages[0].sections.length;e.pages.forEach(function(e){return e.sections=e.sections.filter(function(e){return!(t.wizUtils.isSingleBlockSection(e)&&t.hasOnlyShortParagraph(e))})});var n=e.pages[0].sections.length;return this.log("removed single sections with short paragraph only",{before:i,after:n}),e},e.prototype.handleListSectionByMedia=function(e){var t=e.list.filter(function(e){return e.media&&!!e.media.length}),i=t.length;i&&i<e.list.length&&(this.halfOrMoreHasMedia(i,e.list.length)&&i>=2?e.list=t:(this.log("less than half of the list items have a media, reseting media for all",e),e.list=e.list.map(function(e){return e.media=[],e})))},e.prototype.handleMediaInAllListSections=function(e){var t=this;return this.log("handling list section media"),e.pages.forEach(function(e){e.sections.filter(function(e){return t.wizUtils.isListSection(e)}).forEach(function(e){t.handleListSectionByMedia(e)})}),e},e.prototype.removeSingleSectionsWithButtonOnly=function(e){var t=this,i=e.pages[0].sections.length;e.pages.forEach(function(e){return e.sections=e.sections.filter(function(e){return!(t.wizUtils.isSingleBlockSection(e)&&t.hasOnlyButton(e))})});var n=e.pages[0].sections.length;return this.log("removed single sections with button only",{before:i,after:n}),e},e.prototype.prepareFirstSectionAsWelcome=function(e){var t=this;this.log("preparing first section as welcome");var i=_.first(e.pages[0].sections.filter(function(e){return t.wizUtils.isSingleBlockSection(e)||t.wizUtils.isListSection(e)}));return this.wizUtils.isListSection(i)&&!this.wizUtils.isSlideshow(i)&&(this.log("adding a welcome section from the CMS"),e.pages[0].sections.unshift(this.generateWelcomeWizSection())),e},e.prototype.ensureFirstSectionHasMedia=function(e){var t=this;this.log("ensure first section has media");var i=_.first(e.pages[0].sections.filter(function(e){return t.wizUtils.isSingleBlockSection(e)||t.wizUtils.isListSection(e)}));return this.wizUtils.hasMedia(i)||(this.log("no media, populating from CMS"),this.populateSectionWithCMSMedia(i)),e},e.prototype.transformListWithOnlyImagesToGallery=function(e){var t=this;this.log("checking if we should transform a list with only images to gallery");var i=this.miscUtils.JSONClone(e);return i.pages.forEach(function(e){e.sections=e.sections.map(function(e){return t.wizUtils.shouldTransformListToGallery(e)?(t.log("transforming list to gallery",e),t.wizUtils.transformListToGallery(e)):e})}),i},e.prototype.removeFixedPositionedSections=function(e){var t=this,i=e.pages[0].sections.length;e.pages.forEach(function(e){e.sections=e.sections.filter(function(e){return!t.wizUtils.isFixedPositioned(e)})});var n=e.pages[0].sections.length;return this.log("removed fixed position elements",{before:i,after:n}),e},e.prototype.composeNodeTitle=function(e,t,i){if(e&&e.contentElement&&e.contentElement.values){var n=this.getCEValueBySubType(e,"title");if(n&&n.value&&e.argsMatchingPolicy[n.name])return this.wizUtils.cleanRichText(n.value)}return i+" "+(t+1)},e.prototype.getCEValueBySubType=function(e,t){return this.flags.lodash4?_.find(e.contentElement.values,["subType",t]):_[String("find")](e.contentElement.values,{subType:t})},e.prototype.createContactPage=function(){return this.$injector.get("wizContentManager").contactPage},e.prototype.setRealMediaWidth=function(e){var t=this;return e.pages[0].sections.forEach(function(e){t.wizUtils.isListSection(e)?e.list.forEach(function(e){t.setRealMediaWidthForSingle(e)}):t.wizUtils.isSingleBlockSection(e)&&t.setRealMediaWidthForSingle(e)}),this.log("set real media width"),e},e.prototype.setRealMediaWidthForSingle=function(e){var t=this;e.media&&e.media.forEach(function(e){var i=t.getUploadedImage(e.src);e.realHeight=i?i.height:e.height,e.realWidth=i?i.width:e.width})},e.prototype.removeExcessSections=function(e){var t=this,i=e.pages[0].sections.length;e.pages[0].sections=e.pages[0].sections.filter(function(e){return t.wizUtils.isSingleBlockSection(e)||t.wizUtils.isListSection(e)});var n=e.pages[0].sections.length;return this.log("removed excess sections",{before:i,after:n}),e},e.prototype.removeBadMedia=function(e){return this.log("removing bad media"),e},e.prototype.handleTexts=function(e){var t=this;return e.pages[0].sections.forEach(function(e){t.wizUtils.isListSection(e)?e.list.forEach(function(e){return t.handleSingleSectionTexts(e)}):t.wizUtils.isSingleBlockSection(e)&&t.handleSingleSectionTexts(e)}),e},e.prototype.handleSingleSectionTexts=function(e){if(e.title){var t=e.title.split(" "),i=t.slice(0,this.siteConverterConf.TITLE_MAX_WORDS).join(" "),n=t.slice(this.siteConverterConf.TITLE_MAX_WORDS).join(" ");e.title=i,e.paragraph=n+" "+(e.paragraph||""),e.rawParagraph=n+" "+(e.rawParagraph||""),e.rawTitle=""}e.rawTitle&&(e.rawParagraph=e.rawTitle+" "+(e.rawParagraph||""))},e.prototype.selectSectionMedia=function(e){return m(this,void 0,void 0,function(){var t,i=this;return f(this,function(n){switch(n.label){case 0:return this.log("selecting section media by score"),t=_.flatten(e.pages[0].sections.map(function(e){return i.wizUtils.isListSection(e)?i.selectListSectionMedia(e):i.wizUtils.isSingleBlockSection(e)?i.selectSingleSectionMedia(e):Promise.resolve()})),[4,Promise.all(t)];case 1:return n.sent(),[2,e]}})})},e.prototype.selectListSectionMedia=function(e){var t=this,i=this.wizUtils.hasOnlySmallMedia(e);return e.list.map(function(e){return t.selectSingleSectionMedia(e,i)})},e.prototype.selectSingleSectionMedia=function(e,t){return void 0===t&&(t=!1),m(this,void 0,void 0,function(){var i,n,o=this;return f(this,function(r){switch(r.label){case 0:return(i=e.media)?[4,Promise.all(this.scoreMediaItems(i,e,t)).then(function(e){o.log("scoredMediaItems",{scoredMediaItems:e});var t=(e=_.filter(e)).filter(function(e){return e.score>0});if(o.log("valid media items",{validMediaItems:t}),!t.length)return[];if(1===t.length)return o.log("only one valid media item, returning it"),[t[0].mediaItem];var i=o.getLargestMediaOfSameSize(t);return o.log("largest medias",{largestMediaOfSameSize:i}),i})]:(this.log("no media found",{section:e}),[2]);case 1:return n=r.sent(),e.media=n,[2]}})})},e.prototype.getUploadedImage=function(e){return this.mediaItems.filter(function(t){return t.sourceUrl===e})[0]},e.prototype.scoreMediaItems=function(e,t,i){var n=this;this.log("scoring media",{mediaItems:e,wizSection:t});var o=e.filter(function(e){return"image"===e.type}).map(function(e){return m(n,void 0,void 0,function(){var t,n;return f(this,function(o){switch(o.label){case 0:return t=this.getUploadedImage(e.src),this.log("uploaded media item",{uploadedMediaItem:t}),t?(this.log("scoring image",{uploadedMediaItem:t,mediaItem:e}),n={mediaItem:e},[4,this.imageScore.imageScoreFromImageUrl("https://static.wixstatic.com/"+t.fileUrl,i)]):[2];case 1:return[2,(n.score=o.sent(),n.size=t.width*t.height,n)]}})})}),r=e.filter(function(e){return"video"===e.type}).map(function(e){return{mediaItem:e,score:1,size:e.width*e.height}});return o.concat(r)},e.prototype.removeLowConfidenceSections=function(e){var t=this,i=e.pages[0].sections.length;e.pages[0].sections=e.pages[0].sections.filter(function(e){return t.wizUtils.isListSection(e)?(e.list=e.list.filter(function(e){return void 0===e.confidence||e.confidence>=t.siteConverterConf.SECTION_CONFIDENCE_LEVEL_THRESHOLD}),e.list.length>0):!!t.wizUtils.isSingleBlockSection(e)&&(void 0===e.confidence||e.confidence>=t.siteConverterConf.SECTION_CONFIDENCE_LEVEL_THRESHOLD)});var n=e.pages[0].sections.length;return this.log("removed low confidenceSections",{before:i,after:n}),e},e.prototype.getLargestMediaOfSameSize=function(e){return this.log("getting largest media items"),_.takeWhile(e.sort(function(e,t){return t.size-e.size}),function(e,t,i){return 0===t||e.size===i[t-1].size}).map(function(e){return e.mediaItem})},e.prototype.takeTopSections=function(t){return t.pages[0].sections=t.pages[0].sections.slice(0,e.MAX_SECTIONS),this.log("taking top sections",t.pages[0].sections),t},e.prototype.halfOrMoreHasMedia=function(e,t){return e>=t/2},e.prototype.log=function(e){for(var t,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(t=this.siteConverterLogs).trace.apply(t,[this.loggerId,e].concat(i))},e}();v.MINIMUM_PARAGRAPH_LENGTH=50,v.MAX_SECTIONS=10,angular.module("adiIntroInternal").service("wizWebsite",v);var S=function(){function e(e,t,i){this.$http=e,this.$log=t,this.$q=i}return e.$inject=["$http","$log","$q"],e.prototype.load=function(e){var t=this,i=this.$q.defer();return this.$http.get("http://www.wixstaging.com/_api/wixwiz-algo-server/analyzesite?adi=true&ashtml=false&isExternal=true&url="+e).then(function(e){e.data.error?(t.$log.error("SiteConverter Error: Toffee returned error object"),i.reject(e.data.error)):i.resolve(e.data)},function(e){i.reject(e)}),i.promise},e}();angular.module("adiIntroInternal").service("wizWebsiteLoader",S);var y;m=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};!function(e){var t=function(){function e(e,t){this.cmsApi=e,this.introManager=t}return e.$inject=["cmsApi","introManager"],e.prototype.isStructureContainsVideo=function(e){return m(this,void 0,void 0,function(){var t;return f(this,function(i){switch(i.label){case 0:return[4,this.cmsApi.getStructureInfo(e)];case 1:return t=i.sent(),[2,_.some(t.pages[0].sections,function(e){return e.ceType===core.TpaWidgetTypes.Video_Widget})]}})})},e.prototype.fetchChannel=function(e){return m(this,void 0,void 0,function(){return f(this,function(t){return[2,new YoutubeFeedChannelService(e).getYoutubeChannelData()]})})},e.prototype.getChannelUrl=function(){return this.introManager.data.socialLinks&&this.introManager.data.socialLinks.length&&this.introManager.data.socialLinks[0].platform===e.PhotoSourceYoutube?this.introManager.data.socialLinks[0].url:""},e.prototype.introHasYoutubeChannel=function(){return this.getChannelUrl()&&this.isValidUrl(this.introManager.data.socialLinks[0].url)},e.prototype.isValidUrl=function(e){return new YoutubeFeedChannelService(e).isValidYtChannelId},e.prototype.createChannel=function(e){var t=new YoutubeFeedChannelService(e);return t.createVODChannel().then(function(e){return{channelId:e,serviceInstanse:t}}).catch(function(){return Promise.reject({serviceInstanse:t})})},e}();t.PhotoSourceYoutube="youtube",e.YoutubeChannelManager=t,angular.module("adiIntroInternal").service("youtubeChannelManager",t)}(M||(M={})),function(e){var t=function(){function e(e,t){var i=this;this.flags=e,this.$log=t,this.styles={},this.ifLog=function(e){return i.flags.debugWizSiteConverter?e:_.noop},this.ifLogExtraDebug=function(e){return i.flags.debugWizSiteConverterExtra?e:_.noop},this.defaultLoggerId=1e3,this.trace=this.ifLog(this.log),this.debug=this.ifLogExtraDebug(this.log),this.groupStart=function(e){return console.groupCollapsed("SC: "+e)},this.groupEnd=function(){return console.groupEnd()}}return e.$inject=["flags","$log"],e.prototype.log=function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var o,r=this.style(e);(o=this.$log).info.apply(o,["%cSC>> "+t,r].concat(i))},e.prototype.style=function(e){return this.styles[e]||(this.styles[e]="color: #"+((1<<24)*Math.random()|0).toString(16)),this.styles[e]},e}();e.SiteConverterLogs=t,angular.module("adiIntroInternal").service("siteConverterLogs",t)}(y||(y={})),function(e){var t=function(){function e(e){this.urlParser=e}return e.$inject=["urlParser"],Object.defineProperty(e.prototype,"term",{get:function(){return decodeURIComponent(this.urlParser.getQueryStringValueByKey(e.termArgKey))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"structureId",{get:function(){return this.urlParser.getQueryStringValueByKey(e.structureIdArgKey)||"e51e11f3597e0c565deb792f"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"industryId",{get:function(){return this.urlParser.getQueryStringValueByKey(e.industryIdArgKey)||"9e0d43c23f82998a6ac269b5"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){var t=this.urlParser.getQueryStringValueByKey(e.verticalArgKey);if(t)return e.verticalQueryMap[t]||t},enumerable:!0,configurable:!0}),e}();t.termArgKey="categoryName",t.structureIdArgKey="structureId",t.industryIdArgKey="industryId",t.verticalArgKey="vertical",t.verticalQueryMap={"online-store":"Stores",blog:"Blog",booking:"Bookings"},e.IntroArguments=t,angular.module("adiIntroInternal").service("introArguments",t)}(M||(M={})),angular.module("adiIntroCommon").directive("focusIf",["$timeout",function(e){return{restrict:"A",link:function(e,t,i){var n=function(e){e&&t[0].focus()};i.focusIf?e.$watch(i.focusIf,n):n(!0)}}}]),angular.module("adiIntroCommon").directive("adiAutomation",function(){return{restrict:"A",scope:!1,link:function(e,t,i){i.$observe("adiAutomation",function(e){e&&angular.element(t).attr("adi-automation-label",e.toLowerCase().replace(/\s+/g,"-"))})}}});var T=function(){function e(){this.require="ngModel",this.scope={fieldTrack:"&"}}return e.prototype.link=function(e,t,i,n){var o=this;["input","textarea"].forEach(function(i){var r=t[0].tagName.toLowerCase()===i?t:t.find(i);r.on("focus",function(){return o.onFocus(n)}),r.on("blur",function(){return o.onBlur(n,e.fieldTrack)})})},e.prototype.onFocus=function(e){this.lastKnownValue=e.$viewValue},e.prototype.onBlur=function(e,t){var i=e.$viewValue;i!==this.lastKnownValue&&t({$old:this.lastKnownValue,$value:i}),this.lastKnownValue=i},e}();angular.module("adiIntroCommon").directive("fieldTrack",function(){return new T}),function(e){var t=function(){function e(){}return e.prototype.isMatchSelectable=function(e){return e&&!e.isTitle},e.prototype.onMatchesChange=function(e,t,i){e.$watch(function(){return t.matches},function(e,t){e!==t&&i(e)})},e.prototype.onKeyDown=function(e,t){var i=e.keydown;e.keydown=function(n){i.apply(e,[n]),t(n)}},e}();e.IntroMdBase=t}(M||(M={}));var b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return i.$timeout=t,i.restrict="A",i.require="mdAutocomplete",i}return b(t,e),t.$inject=["$timeout"],t.prototype.link=function(e,t,i,n){var o=this;this.$timeout(function(){return o.initPlaceholder(n,t,i)}),this.onMatchesChange(e,n,function(t){o.updatePlaceholder(e,n,t[0]||null)}),this.onKeyDown(n,function(t){o.onPlaceholderKeydown(e,n,t.keyCode)})},t.prototype.initPlaceholder=function(e,i,n){var o=this,r=angular.element('<input class="'+t.MD_PLACEHOLDER_CLASS+" "+n.introMdPlaceholder+'" tabindex="-1" />')[0];r.style.opacity="0";var a=i[0].querySelector("input");a.parentNode.insertBefore(r,a.nextSibling),a.addEventListener("keyup",function(){r.value.indexOf(a.value)<0&&(r.value="")});var s=e.select;e.select=function(t){s.apply(e,[t]),r.value=""},this.updatePlaceholder=function(e,t,i){if(o.isMatchSelectable(i)){var s=a.value,l=n.mdItemText?e.$eval(n.mdItemText,((c={})[t.itemName]=i,c)):i;r.value=o.getPlaceholderText(s,l),r.style.opacity="1"}else r.value="";var c}},t.prototype.getPlaceholderText=function(e,t){var i=t.toLowerCase().indexOf(e.replace(/^\s+/,"").toLowerCase()),n=i+e.replace(/^\s+/,"").length;return e+(i>=0?t.substr(n):"")},t.prototype.onPlaceholderKeydown=function(e,t,i){if(9===i){var n=t.scope.searchText,o=t.matches[0];n&&this.isMatchSelectable(o)&&t.select(0)}},t}(e.IntroMdBase);t.MD_PLACEHOLDER_CLASS="intro-md-placeholder",angular.module("adiIntroAppInternal").directive("introMdPlaceholder",["$timeout",function(e){return new t(e)}])}(M||(M={})),function(e){var t=function(){function e(){this.restrict="A"}return e.prototype.handleMouseEvents=function(e){return!1},e.prototype.unhandleMouseEvents=function(e){e.off("mouseenter.intro"),e.off("mouseleave.intro")},e.prototype.link=function(t,i,n){var o=this,r=!1;n.$observe(e.MD_ITEM_DISABLED,function(t){if(t||r){for(var n=i[0];n&&"li"!==n.tagName.toLowerCase();)n=n.parentElement;var a=angular.element(n);t?(a.addClass(e.MD_ITEM_DISABLED_CLASS),o.handleMouseEvents(a),r=!0):(a.removeClass(e.MD_ITEM_DISABLED_CLASS),o.unhandleMouseEvents(a),r=!1)}})},e}();t.MD_ITEM_DISABLED="introMdItemDisabled",t.MD_ITEM_DISABLED_CLASS="intro-md-item-disabled",angular.module("adiIntroAppInternal").directive("introMdItemDisabled",function(){return new t})}(M||(M={}));b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){var t=function(t){function i(i,n,o,r,a){var s=t.call(this)||this;return s.flags=i,s.introWindow=n,s.introStep=o,s.$timeout=r,s.$mdUtil=a,s.restrict="A",s.require="mdAutocomplete",s.isLoaded=!0,s.onResize=_.debounce(function(){return s.toggleVisibility(!1)},e.IntroStep.RESIZE_DEBOUNCE),s}return b(i,t),i.$inject=["flags","introWindow","introStep","$timeout","$mdUtil"],i.prototype.removeDropMask=function(){this._disableScrollAround=this.$mdUtil.disableScrollAround,this.$mdUtil.disableScrollAround=angular.noop},i.prototype.onDestroy=function(){this.$mdUtil.disableScrollAround=this._disableScrollAround,this.introWindow.off("resize",this.onResize)},i.prototype.toggleVisibility=function(e){var t=this,n=angular.element(i.CLASS_SUGGESTIONS);n[0]&&(e&&this.isLoaded?this.$timeout(function(){n[0].style.opacity="1",t.introWindow.trigger("resize")},0,!1):n[0].style.opacity="0")},i.prototype.updateAutoCompleteHiddenState=function(e,t,i,n){e.$eval(i.mdListHiddenChanged,{$hidden:t}),i.hiddenOverride&&(n.hidden=0===n.matches.length||e.$eval(i.hiddenOverride))},i.prototype.link=function(e,t,n,o){var r=this;this.removeDropMask(),n.introMdDisableOnResize||this.introWindow.on("resize",this.onResize),n.introMdDisableSuggestListMouseUp&&(o.mouseUp=angular.noop),e.$watch(function(){return r.introStep.contentBoxPosition},function(){return r.toggleVisibility(!0)}),e.$on("$destroy",function(){return r.onDestroy()}),e.$watch(function(){return o.hidden},function(t){r.updateAutoCompleteHiddenState(e,t,n,o)}),e.$watch(function(){return e.$ctrl.isTitleHovered},function(e,t){$(i.CLASS_SUGGESTIONS_UL).toggleClass("onRelatedResult",e)});var a=angular.element(i.CLASS_SUGGESTIONS);a.addClass(i.CLASS_SCROLLER),this.$timeout(function(){r.flags.changeBusinessDetails&&e.$eval(n.dontStoreMatches)||(o.matches=r.introStep.disposable.categoriesMatches||[]),r.updateAutoCompleteHiddenState(e,0===o.matches.length,n,o)},500),a.perfectScrollbar({minScrollbarLength:43,suppressScrollX:!0}),n.introMdOnSelect&&e.$watch(function(){return o.scope.selectedItem},function(t,i){null!==t&&i!==t&&r.handleMdOnSelect(o,t,e,n)}),n.introMdLoaded&&(this.isLoaded=!1,this.$timeout(function(){return e.$watch(n.introMdLoaded,function(e){r.isLoaded=e,r.toggleVisibility(e)})})),this.onMatchesChange(e,o,function(t){var i=o.scope.searchText;e.$eval(n.mdSearchChanged,{$term:i,$matches:t}),r.introStep.disposable.categoriesMatches=t,r.$timeout(function(){o.index=-1,a.scrollTop(0),a.perfectScrollbar("update")})}),this.onKeyDown(o,function(e){switch(e.keyCode){case 13:r.onEnterKeyDown(e,o);break;case 38:case 40:r.onArrowKeyDown(o,e,a)}}),this.flags.newIntroDesign&&e.$watch(function(){return e.$eval(n.hiddenOverride)},function(e){r.flags.changeBusinessDetails?o.hidden=_.isUndefined(e)?0===o.matches.length:e:o.hidden=e})},i.prototype.handleMdOnSelect=function(e,t,i,n){var o,r=i.$eval(n.mdItemText,((o={})[e.itemName]=t,o));this.$timeout(function(){var t=i.$eval(n.introMdOnSelect,{$term:r});t&&t.then(function(t){return e.matches=t})})},i.prototype.onArrowKeyDown=function(e,t,i){var n=e.index;n>=0&&(this.isMatchSelectable(e.matches[n])||(e.index=n+(38===t.keyCode?-1:1)),_.each(e.matches,function(e){e.isExactMatch=!1}),this.fixTheScroll(i,e.index))},i.prototype.onEnterKeyDown=function(e,t){var i=t.index;i<0||(e.preventDefault(),this.isMatchSelectable(t.matches[i])?t.scope.selectedItem&&t.select(i):t.select(0))},i.prototype.fixTheScroll=function(e,t){},i}(e.IntroMdBase);t.CLASS_SUGGESTIONS_UL=".md-autocomplete-suggestions",t.CLASS_SUGGESTIONS=".md-virtual-repeat-scroller",t.CLASS_SCROLLER="intro-md-aucotomplete-scroller",angular.module("adiIntroInternal").directive("introMdAutocomplete",["flags","introWindow","introStep","$timeout","$mdUtil",function(e,i,n,o,r){return new t(e,i,n,o,r)}])}(M||(M={})),function(e){var t=function(){function e(){this.restrict="A"}return e.prototype.link=function(e,t,i){angular.element("._md-select-menu-container md-content").perfectScrollbar({minScrollbarLength:43})},e}();angular.module("adiIntroInternal").directive("introMdSelect",function(){return new t})}(M||(M={})),angular.module("adiIntroInternal").directive("introGPlacesAutocomplete",["$parse",function(e){return{restrict:"A",require:"^ngModel",link:function(t,i,n,o){var r=e(n.introGPlacesAutocomplete)(t);o.$formatters.push(function(e){var t=e;return Array.isArray(r.displayKeys)&&_.isObject(o.$modelValue)&&(t=r.displayKeys.map(function(e){return o.$modelValue[e]}).join(", ")),t})}}}]),function(e){var t=function(){function e(){this.require="ngModel"}return e.prototype.link=function(e,t,i,n){"textarea"===t[0].tagName.toLowerCase()&&t.on("keydown paste",function(e){})},e}();e.IntroAddressFormatter=t,angular.module("adiIntroInternal").directive("introAddressFormatter",function(){return new t})}(M||(M={})),function(e){var t=function(){function e(e,t){this.introStep=e,this.flags=t}return Object.defineProperty(e.prototype,"contentPosition",{get:function(){return this.introStep.contentBoxPosition?{top:this.introStep.contentBoxPosition.y,left:this.introStep.contentBoxPosition.x}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backButtonStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-right":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextButtonStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-left":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxTipStyle",{get:function(){return this.introStep.backdropBoxPosition?{top:this.introStep.backdropBoxPosition.y+this.introStep.backdropBoxPosition.height,left:this.introStep.backdropBoxPosition.x,width:this.introStep.backdropBoxPosition.width}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loaded",{get:function(){return this.flags.newIntroDesign||this.introStep.contentElement&&!this.introStep.contentElement.hidden},enumerable:!0,configurable:!0}),e}();e.IntroQuestionsBase=t}(M||(M={})),function(e){var t=function(){function t(t,i,n,o,r,a,s,l,c,d,u,p){var g=this;if(this.$rootScope=t,this.$element=i,this.$state=n,this.$window=o,this.introStep=r,this.urlParser=a,this.flags=c,this.introManager=d,this.$injector=u,this.introArguments=p,this.verticalQueryMap={"online-store":"Stores",blog:"Blog",booking:"Bookings"},this.introManager.init(this.getVertical()),n.current.name===e.INTRO_STATES.INTRO)if(this.hasCategorySearchArguments())this.useCategorySearchArguments(),n.go(e.INTRO_STATES.INTRO_SERVICES_OFFER);else{var h=e.INTRO_STATES.INTRO_CATEGORY_SEARCH;n.go(h)}l({label:"site-generator-statics-consumer",spec:"specs.ob.FullStory",onReady:function(e){return s.intro.fullStoryStarted(e)}}),this.registerKeyDown(),this.updateLastNavigation(),this.beforeStateChangeWatcher=t.$on("$stateChangeStart",function(e,t,i,n){return g.updateLastNavigation()}),this.afterStateChangeWatcher=t.$on("$stateChangeSuccess",function(e,t,i,n){return g.updateLastNavigation()})}return t.$inject=["$rootScope","$element","$state","$window","introStep","urlParser","consumerBiLogger","fullStoryLoader","flags","introManager","$injector","introArguments"],t.prototype.getVertical=function(){if(this.flags.introRedirectToServiceOffer)return this.introArguments.vertical;var e=void 0,t=this.urlParser.queryParams();return t.vertical&&(e=this.verticalQueryMap[t.vertical]||t.vertical),e},t.prototype.hasCategorySearchArguments=function(){return Boolean(this.flags.introRedirectToServiceOffer&&this.introArguments.term&&this.introArguments.structureId&&this.introArguments.industryId)},t.prototype.useCategorySearchArguments=function(){this.introManager.data.category={term:this.introArguments.term,structureId:this.introArguments.structureId,industryId:this.introArguments.industryId,block:void 0,manualAliases:void 0}},t.prototype.registerKeyDown=function(){var e=this;this.keyDownHandler=_.debounce(function(t){if((t.metaKey||t.ctrlKey)&&t.shiftKey&&t.altKey){var i=String.fromCharCode(t.keyCode);"M"!==i&&"J"!==i||(e.flags.emptyPage=e.flags.emptyPage||"J"===i,t.preventDefault(),function(){e.introManager.data.category=e.introManager.data.category||{};var t=e.introManager.data.category.structureId=e.introManager.data.category.structureId||"40dc538a8a6c3e2dae342922",i=e.introManager.data.category.industryId=e.introManager.data.category.industryId||"e79e5765052b89b579c9a4c2";e.introManager.data.name=e.introManager.data.name||"quickStory",e.$injector.get("applicationState").goToBuilderDeepLink(t,i,"quickStory")}())}},500),angular.element(this.$window).keydown(this.keyDownHandler)},t.prototype.updateLastNavigation=function(){this.lastNavigation="back"===this.introStep.guessLastNavigation()?"is-back":"is-next"},t.prototype.backDropEnabled=function(){return!this.flags.newIntroDesign},t.prototype.$postLink=function(){var e=this.$element.find('[data-hook="animation-backdrop"]'),t=this.$element.find('[data-hook="animation-content"]'),i=this.$element.find('[data-hook="loading"]');!this.flags.newIntroDesign&&this.introStep.init(e,t,i)},t.prototype.$onDestroy=function(){angular.element(this.$window).unbind("keydown",this.keyDownHandler),this.introStep.dispose()},t}();e.Intro=t,angular.module("adiIntroInternal").component("intro",{controller:t,templateUrl:"views/intro/intro.html"})}(M||(M={})),function(e){var t=function(){function e(e){this.introStep=e}return e.$inject=["introStep"],Object.defineProperty(e.prototype,"backStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-right":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-left":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),e.prototype.onBack=function(){this.back&&this.back()},e.prototype.onNext=function(){this.next&&this.next()},e}();angular.module("adiIntroInternal").component("introBoxButtons",{controller:t,templateUrl:"views/intro/intro-box-buttons.html",bindings:{next:"&?",back:"&?",isInProcess:"=?",tooltipTitle:"=?",tooltipPosition:"=?",isHideTooltip:"<?",focusNext:"=?",isNextDisabled:"=?"}})}(M||(M={}));b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();var I=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};m=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};!function(e){var t=function(t){function i(e,i,n,o,r,a,s,l,c,d,u,p,g,h){var m=t.call(this,e,i)||this;m.$translate=n,m.$element=o,m.$scope=r,m.introWindow=a,m.applicationParameters=s,m.consumerBiLogger=l,m.introManager=c,m.introContentTpa=d,m.cmsApi=u,m.validation=p,m.clientTopology=g,m.youtubeChannelManager=h,m.lastSearchedCategories=[],m.relatedResultsTitle={isTitle:!0,term:""},m.showRelatedResultsTitle=!0,m.searchTerm="",m.searchChanged=!1,m.lastShowGenericPopUpState=!1,m.isTitleHovered=!1,m.isValidTerm=function(){return!m.lastSearchedTerm||"string"==typeof m.lastSearchedTerm&&m.cmsApi.sanitize(m.lastSearchedTerm).length>0},m.inSearch=function(){return!m.result&&m.lastSearchedTerm&&m.isValidTerm()},m.isEmptySearch=function(){return m.inSearch()&&0===m.lastSearchedCategories.length},m.shouldShowGenericPopover=function(){return m.inSearch()&&(0===m.lastSearchedCategories.length||m.lastSearchedCategories[0]===m.relatedResultsTitle)},m.isListLoaded=function(){return m.showResults},m.thinResult=function(e){return _.pick(e,"industryId","structureId","term","block","redirectUrl","experiment")},m.preSuggestionsByVertical=m.introManager.preSuggestionsByVertical,m.defaultCategories=m.introManager.generalCategories.General,m.CURRENT_LOCALE_BLOCKS=["pt","de","fr","es"].indexOf(m.clientTopology.locale)>-1,m.introManager.vertical&&m.introManager.generalCategories[m.introManager.vertical]&&(m.defaultCategories=[].concat(m.introManager.generalCategories[m.introManager.vertical],m.defaultCategories));var f=m.$translate.instant("intro.category-search.related-results-label");return m.relatedResultsTitle.term=m.flags.newIntroDesign?f.toUpperCase():f,m.validCategory=m.introManager.data.validCategory,m.result&&(m.selected=m.result,m.searchTerm=m.result.term,m.lastSearchedTerm=m.result.term),m.flags.MED&&(m.showRelatedResultsTitle=!1,r.$watch("$ctrl.inputFocused()",function(e,t){e!==t&&angular.element(window).triggerHandler("resize")})),m}return b(i,t),i.$inject=["introStep","flags","$translate","$element","$scope","introWindow","applicationParameters","consumerBiLogger","introManager","introContentTpa","cmsApi","validation","clientTopology","youtubeChannelManager"],i.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_CATEGORY_SEARCH,null)},i.prototype.getPreSuggestionsByVertical=function(){var e=this.preSuggestionsByVertical[this.introManager.vertical]||i.DEFAULT_PRE_SUGGESTIONS;return this.flags.MED&&this.flags.betterBusinessCategoryPage?e.slice(0,4):e},i.prototype.isSameCategory=function(e,t){return e.industryId===t.industryId&&e.structureId===t.structureId},i.prototype.isValidCategory=function(){return this.result&&(!this.isSameCategory(this.result,e.DEFAULT_CATEGORY)||this.result.term===e.DEFAULT_CATEGORY.term)},Object.defineProperty(i.prototype,"result",{get:function(){return this.introManager.data.category},set:function(e){this.introManager.data.category=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"genericPopoverPosition",{get:function(){return this.introStep.backdropBoxPosition?{bottom:this.introWindow.getWindowDimensions().windowHeight-(this.introStep.backdropBoxPosition.y+this.introStep.backdropBoxPosition.height)+12,left:this.introStep.contentBoxPosition.x+e.IntroWindow.CONTENT_WIDTH+58}:null},enumerable:!0,configurable:!0}),i.prototype.onExampleClick=function(e){var t=e.target.textContent.trim();this.introManager.data.selectionSource="example list",this.consumerBiLogger.intro.businessTypeWasSelected("category",t,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),0,this.introManager.data.selectionSource),this.searchTerm=t,angular.element("[name=businessTypeInput]").focus()},i.prototype.getVerticalTranslation=function(e){var t=this.introManager.vertical;if(!t)return this.$translate.instant(e);var i=e+"-"+t,n=this.$translate.instant(i);return n&&n!==i?n:this.$translate.instant(e)},i.prototype.next=function(){return m(this,void 0,void 0,function(){var e,t;return f(this,function(i){switch(i.label){case 0:return this.result?(e=this.nextStep(),this.updateIntroLastSearchedTerm(),this.introManager.data.validCategory=!0,this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick(e,this.result.term,this.lastSearchedTerm,this.introManager.data.selectionSource,"next",this.result.structureId,this.result.industryId),this.prepareToProceed(),this.showResults=!1,this.isDropdownSuggestionsHidden=!0,this.introStep.next(e),!this.flags.MED&&this.flags.youTubeChannel&&this.result.structureId?[4,this.youtubeChannelManager.isStructureContainsVideo(this.result.structureId)]:[3,2]):[2];case 1:t=i.sent(),this.introManager.data.videoStructure=t,i.label=2;case 2:return[2]}})})},i.prototype.updateIntroLastSearchedTerm=function(){this.introManager.data.lastSearchedTerm=this.searchTerm||this.result&&this.result.term||""},i.prototype.nextStep=function(){if(this.flags.MED&&this.isBlocked(this.result)&&!this.CURRENT_LOCALE_BLOCKS){var t=this.introManager.getBusinessCategoryResultByTerm(this.result.term);this.result=t?I({},this.result,t,{block:!1}):_.clone(e.DEFAULT_CATEGORY)}return this.flags.MED&&!this.CURRENT_LOCALE_BLOCKS||!this.isBlocked(this.result)?this.flags.MED||!this.flags.AnonymousFlowEnabled||this.clientTopology.hasSession||this.flags.newIntroDesign&&!this.flags.newIntroDesignAnon?this.isSingleEvent(this.result)?e.INTRO_STATES.INTRO_BUSINESS_NAME:e.INTRO_STATES.INTRO_SERVICES_OFFER:e.INTRO_STATES.INTRO_RECAPTCHA:e.INTRO_STATES.INTRO_BLOCKED_CATEGORY},i.prototype.isBlocked=function(e){return e.block||(!this.flags.wixEvents||this.flags.MED)&&this.isSingleEvent(e)||this.experimentBlock(e)},i.prototype.experimentBlock=function(e){return!!e.experiment&&!this.flags[e.experiment]},i.prototype.isSingleEvent=function(t){return this.introContentTpa.categoryType(t)===e.CategoryTypes.SingleEvent},i.prototype.skip=function(){var t;t=this.flags.MED||!this.flags.AnonymousFlowEnabled||this.clientTopology.hasSession||this.flags.newIntroDesign&&!this.flags.newIntroDesignAnon?e.INTRO_STATES.INTRO_SERVICES_OFFER:e.INTRO_STATES.INTRO_RECAPTCHA;var i=_.clone(e.DEFAULT_CATEGORY);this.introManager.data.validCategory=!this.searchTerm||this.isValidCategory(),this.result=i,this.updateIntroLastSearchedTerm(),this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick(t,this.result.term,this.lastSearchedTerm,this.introManager.data.selectionSource,"skip",this.result.structureId,this.result.industryId),this.prepareToProceed(),this.introStep.skip(t)},i.prototype.onSelectFromEmptyList=function(e,t){this.introManager.data.selectionSource="no matches list",this.result=e,this.consumerBiLogger.intro.businessTypeWasSelected("category",e.term,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),t,this.introManager.data.selectionSource),this.next()},i.prototype.getHighlightText=function(e){return e.isTitle?"":this.searchTerm.replace(/&/g,"&amp;")},i.prototype.onSearchChanged=function(e,t){this.lastSearchedTerm!==e&&this.consumerBiLogger.intro.businessTypeTypingClientEvent(this.sanitizePersonallyIdentifiableInfo(e),t.length);var i=_.findIndex(t,function(e){return e.isTitle}),n=i>=0?t.slice(0,i):t,o=(e.replace?e:"").replace(/[-+\/.;()'&]/gi,""),r=_.findIndex(n,function(e){return e.term&&e.term.toLowerCase()===o.toLowerCase()});r>=0?(t[r].isExactMatch=!0,this.introManager.data.selectionSource="match_text",this.result=n[r]):this.result&&this.getDisplayText(this.result)!==e&&(this.result=null),this.searchChanged&&(this.introManager.data.validCategory=!!this.result,this.validCategory=this.introManager.data.validCategory),this.searchChanged=!0,this.lastShowGenericPopUpState=!!this.shouldShowGenericPopover(),this.lastSearchedCategories=t,this.lastSearchedTerm=e,!!this.shouldShowGenericPopover()&&!this.lastShowGenericPopUpState&&this.consumerBiLogger.intro.genericCategoryDialogIsShown(e),""!==e?this.showResults=!0:this.validCategory=!1,this.updateIntroLastSearchedTerm()},i.prototype.itemClicked=function(e,t){t&&e.stopPropagation()},i.prototype.onSelectedFromList=function(e){var t=this;if(this.introManager.data.selectionSource="category list",this.selected){var i=this.lastSearchedCategories.indexOf(this.selected);this.selected.prefix?(this.searchTerm=this.selected.prefix+" ",this.consumerBiLogger.intro.businessTypeWasSelected("group",this.selected.term,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),i,this.introManager.data.selectionSource)):(this.result=this.selected,this.consumerBiLogger.intro.businessTypeWasSelected("category",this.selected.term,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),i,this.introManager.data.selectionSource)),this.validCategory=!!this.result}if(this.updateIntroLastSearchedTerm(),this.lastSearchedTerm.toLowerCase()!==e.toLowerCase())return this.search(e).then(function(i){return i.filter(function(i){return t.getDisplayText(i)!==e})});this.next()},i.prototype.sanitizePersonallyIdentifiableInfo=function(e){if(this.validation.isEmail(e)){var t=e.indexOf("@");if(t>0)return e.substring(0,t)}return e},i.prototype.transformData=function(e){var t=function(e,t,i){return _.includes(_.keys(e),t)&&(e[i]=_.cloneDeep(e[t]),delete e[t]),e};e&&e.results&&e.results.forEach(function(e){return t(e,"displayName","term")}),e&&e.relatedResults&&e.relatedResults.forEach(function(e){return t(e,"displayName","term")})},i.prototype.search=function(e,t,n){var o=this;return void 0===e&&(e=this.searchTerm),void 0===t&&(t=200),void 0===n&&(n=200),this.cmsApi.elasticSearch(e,t,n).then(function(e){o.transformData(e);var t=e.results.slice(0,i.RESULTS_LIMIT),n=o.flags.AdiFuzzinessSupport?i.RESULTS_THRESHOLD_NEW:i.RESULTS_THRESHOLD;if(t.length<n&&e.relatedResults.length>0){var r=e.relatedResults.map(function(e){return e.isRelated=!0,e});return t.concat(o.showRelatedResultsTitle?[o.relatedResultsTitle]:[],r)}return t})},i.prototype.getDisplayText=function(e){return e.prefix?e.prefix+"...":e.term},i.prototype.relatedResultsEnter=function(e){this.isTitleHovered=!!e},i.prototype.relatedResultsLeave=function(){this.isTitleHovered=!1},i.prototype.checkFuzzy=function(e){return!e.isRelated&&-1===e.term.toLowerCase().indexOf(this.searchTerm.toLowerCase())},i.prototype.inputElm=function(){return this._inputElm&&0!==this._inputElm.length||(this._inputElm=this.$element.find("input")),this._inputElm},i.prototype.blurInput=function(){this.inputElm().blur()},i.prototype.inputEmptyAndUnfocused=function(){return this.inputEmpty()&&!this.inputFocused()},i.prototype.inputEmpty=function(){return""===this.inputElm().val()},i.prototype.inputFocused=function(){var e=this.inputElm();return e&&e[0]===document.activeElement},i.prototype.prepareToProceed=function(){this.result=this.result?this.thinResult(this.result):_.clone(e.DEFAULT_CATEGORY),this.updateServiceOffers(this.result)},i.prototype.updateServiceOffers=function(e){var t=_.find(this.applicationParameters.tpaTypes,function(t){return _.includes(t.structureIds,e.structureId)});if(t){var i=this.introManager.selectedOfferByType(t.type);i&&(i.checked=!1)}},i.prototype._onSelectFromEmptyList=function(e,t){this.result=e,this.introManager.data.selectionSource="no matches list",this.consumerBiLogger.intro.businessTypeWasSelected("category",e.term,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),t,this.introManager.data.selectionSource),this.next()},i.prototype._onExampleClick=function(e){this.introManager.data.selectionSource="example list",this.consumerBiLogger.intro.businessTypeWasSelected("category",e,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),0,this.introManager.data.selectionSource)},i.prototype._onSearchChanged=function(e,t,i){this.result=i,this.lastSearchedTerm!==e&&this.consumerBiLogger.intro.businessTypeTypingClientEvent(this.sanitizePersonallyIdentifiableInfo(e),t.length),this.searchChanged&&(this.introManager.data.validCategory=!!i,this.validCategory=this.introManager.data.validCategory),this.searchChanged=!0,!!this.shouldShowGenericPopover()&&!this.lastShowGenericPopUpState&&this.consumerBiLogger.intro.genericCategoryDialogIsShown(e),this.updateIntroLastSearchedTerm()},i}(e.IntroQuestionsBase);t.RESULTS_THRESHOLD=7,t.RESULTS_THRESHOLD_NEW=8,t.RESULTS_LIMIT=200,t.DEFAULT_PRE_SUGGESTIONS=e.DEFAULT_PRE_SUGGESTIONS,e.IntroCategorySearch=t,angular.module("adiIntroInternal").component("introCategorySearch",{controller:t,templateUrl:"views/intro/intro-category-search.html"})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("introCategorySearchNew",{controller:e.IntroCategorySearch,templateUrl:"views/intro/intro-category-search-new.html"})}(M||(M={}));b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){var t=function(t){function i(e,i,n,o,r,a,s,l,c,d,u,p,g,h){var m=t.call(this,e,i)||this;return m.$http=n,m.$timeout=o,m.introManager=r,m.consumerBiLogger=a,m.ccFlags=s,m.$translate=l,m.introContentTpa=c,m.captcha=d,m.$scope=u,m.clientTopology=p,m.experimentManager=g,m.experimentParser=h,(m.flags.MED||!m.flags.AnonymousFlowEnabled||m.clientTopology.hasSession)&&m.introStep.next(m.getNextPage()),m}return b(i,t),i.$inject=["introStep","flags","$http","$timeout","introManager","consumerBiLogger","ccFlags","$translate","introContentTpa","captcha","$scope","clientTopology","experimentManager","experimentParser"],i.prototype.$onInit=function(){var t=this;this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_RECAPTCHA,null),this.userIsValid=!1,this.$timeout(function(){return t.captcha.create(function(e){return t.$scope.$apply(function(){t.userValid(e),t.sendBIOnReCaptchaResult("success")})},function(){return t.$scope.$apply(function(){t.userNotValid(),t.sendBIOnReCaptchaResult("expired")})},function(){return t.$scope.$apply(function(){t.userNotValid(),t.sendBIOnReCaptchaResult("error")})})})},i.prototype.sendBIOnReCaptchaResult=function(e){this.consumerBiLogger.intro.recaptchaIMNotARobotResult(e)},i.prototype.isSingleEvent=function(t){return this.introContentTpa.categoryType(t)===e.CategoryTypes.SingleEvent},i.prototype.getNextPage=function(){return this.isSingleEvent(this.introManager.data.lastSearchedTerm)?e.INTRO_STATES.INTRO_BUSINESS_NAME:e.INTRO_STATES.INTRO_SERVICES_OFFER},i.prototype.addExperiments=function(){var e=this;this.experimentManager.$$queryPetri({scope:i.EXPERIMENTS_SCOPE}).then(function(t){_.each(t,function(t,i){var n=e.experimentParser.getFlagData(i,t);e.flags[n.name]=n.value,e.ccFlags[n.name]=n.value}),e.flags.newIntroDesignAnon&&(e.flags.newIntroDesign=!0),e.flags.blog2=!1})},i.prototype.next=function(){var e=this;this.consumerBiLogger.intro.recaptchaPageNavigationClick("next"),this.$http.get("/_api/wix-html-login-webapp/issue/session?reCaptcha="+this.key).then(function(t){if(200===t.status){e.clientTopology.hasSession=!0,e.clientTopology.isAnonymous=!0,e.addExperiments();var i=e.getNextPage();return e.introStep.next(i),i}})},i.prototype.back=function(){this.consumerBiLogger.intro.recaptchaPageNavigationClick("back"),this.introStep.back(e.INTRO_STATES.INTRO_CATEGORY_SEARCH)},i.prototype.getTitle=function(){return this.$translate.instant("intro.recaptcha.title")},i.prototype.getTerms=function(){return this.$translate.instant("intro.recaptcha.terms")},i.prototype.userValid=function(e){this.userIsValid=!0,this.key=e},i.prototype.userNotValid=function(){this.userIsValid=!1,this.key=""},i}(e.IntroQuestionsBase);t.EXPERIMENTS_SCOPE="onboarding-server",e.IntroReCaptcha=t,angular.module("adiIntroInternal").component("introRecaptcha",{controller:t,templateUrl:"views/intro/intro-recaptcha.html"})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("introRecaptchaNew",{controller:e.IntroReCaptcha,templateUrl:"views/intro/intro-recaptcha-new.html"})}(M||(M={})),function(e){var t=function(){function e(e,t,i){this.$q=e,this.$timeout=t,this.scaling=!1,this.showButtons=!0,this.showResults=!i}return e.prototype.startScale=function(){var e=this.$q.defer();return this.showResults=!1,this.showButtons=!1,this.scaling=!0,this.$timeout(function(){return e.resolve()}),e.promise},e.prototype.endScale=function(){this.showResults=!0,this.showButtons=!0,this.scaling=!1},e}();e.IntroVisualIndications=t}(M||(M={}));b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){var t=function(t){function i(e,i,n,o,r){var a=t.call(this,e,i)||this;return a.introContentTpa=n,a.introManager=o,a.consumerBiLogger=r,a.selected=o.data.category,a}return b(i,t),i.$inject=["introStep","flags","introContentTpa","introManager","consumerBiLogger"],i.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_BLOCKED_CATEGORY,null)},Object.defineProperty(i.prototype,"blockedRedirectUrl",{get:function(){return this.flags.wixEvents&&this.introContentTpa.categoryType(this.selected)===e.CategoryTypes.SingleEvent?"https://www.wix.com/website/templates/html/events":this.selected.redirectUrl?this.selected.redirectUrl:"https://www.wix.com/website/templates/html"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"backStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-right":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"nextStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-left":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),i.prototype.onNext=function(){this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick("pro editor",this.selected.term,this.selected.term,this.introManager.data.selectionSource,"escape",this.selected.structureId,this.selected.industryId)},i.prototype.handleMEDNext=function(){this.introManager.data.category=_.clone(e.DEFAULT_CATEGORY);var t=e.INTRO_STATES.INTRO_SERVICES_OFFER;this.introStep.next(t)},i.prototype.back=function(){this.introStep.back(e.INTRO_STATES.INTRO_CATEGORY_SEARCH)},i}(e.IntroQuestionsBase);e.IntroBlockedCategory=t,angular.module("adiIntroInternal").component("introBlockedCategory",{controller:t,templateUrl:"views/intro/intro-blocked-category.html"})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("introBlockedCategoryNew",{controller:e.IntroBlockedCategory,templateUrl:"views/intro/intro-blocked-category-new.html"})}(M||(M={}));var P;b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){var t=function(t){function i(i,n,o,r,a,s){var l=t.call(this,i,n)||this;(l.introContentTpa=o,l.consumerBiLogger=r,l.applicationParameters=a,l.introManager=s,l.storesSelectedState=function(){return l.serviceSelectedState(l.applicationParameters.tpaTypes.Stores.type)},l.bookingsSelectedState=function(){return l.serviceSelectedState(l.applicationParameters.tpaTypes.Bookings.type)},l.getSubscribersSelectedState=function(){return l.serviceSelectedState(l.applicationParameters.tpaTypes.GetSubscribers.type)},l.blogSelectedState=function(){return l.serviceSelectedState(l.flags.blog2?l.applicationParameters.tpaTypes.Blog2.type:l.applicationParameters.tpaTypes.Blog.type)},l.introManager.data.category||(l.introManager.data.category=_.clone(e.DEFAULT_CATEGORY)),l.selectedCategoryType()===e.CategoryTypes.Photographer)&&(l.offers.find(function(e){return e.type===l.applicationParameters.tpaTypes.Stores.type}).checked=!1);return l}return b(i,t),i.$inject=["introStep","flags","introContentTpa","consumerBiLogger","applicationParameters","introManager"],i.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_SERVICES_OFFER,null)},i.prototype.onOfferChanged=function(){this.consumerBiLogger.intro.servicesSelected(this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState())},i.prototype.anyOfferCheckd=function(){return this.offers.some(function(e){return e.checked})},i.prototype.selectedCategoryType=function(){return!!this.introManager.data.category&&this.introContentTpa.categoryType(this.introManager.data.category)},i.prototype.shouldShowOffer=function(t){if(this.selectedCategoryType()===e.CategoryTypes.Photographer&&t===this.applicationParameters.tpaTypes.Stores.type)return!1;if(t===this.applicationParameters.tpaTypes.Chat.type)return!1;var i=this.introManager.data.category.structureId,n=_.find(this.applicationParameters.tpaTypes,{type:t});return t!==this.introManager.vertical&&!_.includes(n.structureIds,i)},Object.defineProperty(i.prototype,"offers",{get:function(){return this.introManager.data.serviceOffer},enumerable:!0,configurable:!0}),i.prototype.next=function(){this.consumerBiLogger.intro.selectServicesPageNavigationClick(e.INTRO_STATES.INTRO_BUSINESS_NAME,"next",this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState()),this.introStep.next(e.INTRO_STATES.INTRO_BUSINESS_NAME)},i.prototype.skip=function(){this.consumerBiLogger.intro.selectServicesPageNavigationClick(e.INTRO_STATES.INTRO_BUSINESS_NAME,"skip",this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState()),this.introStep.skip(e.INTRO_STATES.INTRO_BUSINESS_NAME)},i.prototype.back=function(){var t=e.INTRO_STATES.INTRO_CATEGORY_SEARCH;this.consumerBiLogger.intro.selectServicesPageNavigationClick(t,"back",this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState()),this.introStep.back(t)},i.prototype.serviceSelectedState=function(e){var t=_.find(this.offers,function(t){return t.type===e});return this.shouldShowOffer(e)?t&&t.checked.toString():"true (default)"},i}(e.IntroQuestionsBase);e.IntroServiceOffer=t,angular.module("adiIntroInternal").component("introServiceOffer",{controller:t,templateUrl:"views/intro/intro-service-offer.html"})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("introServiceOfferNew",{controller:e.IntroServiceOffer,templateUrl:"views/intro/intro-service-offer-new.html"})}(M||(M={})),function(e){var t=function(){function e(e){this.$transclude=e}return e.$inject=["$transclude"],e.prototype.isUsed=function(e){return this.$transclude.isSlotFilled(e)},e.prototype.getRightClass=function(){return this.alignRightTo&&this.alignRightTo+"-align"||""},e}();e.IntroStepLayout=t,angular.module("adiIntroInternal").component("introStepLayout",{bindings:{onSelect:"&",alignRightTo:"@?"},transclude:{left:"?left",right:"?right",nextAction:"?nextAction",skipAction:"?skipAction",backAction:"?backAction"},templateUrl:"views/intro/intro-step-layout.html",controller:t})}(M||(M={})),function(e){e[e.Next=0]="Next",e[e.Error=1]="Error",e[e.Skip=2]="Skip"}(P||(P={})),function(e){var t=function(){return function(e,t){this.type=e,this.message=t}}(),i=function(){function i(t,i,n,o,r,a,s,l,c,d,u,p,g,h){this.introStep=t,this.flags=i,this.consumerBiLogger=n,this.applicationParameters=o,this.validation=r,this.importSiteContent=a,this.cmsApi=s,this.$timeout=l,this.$q=c,this.wizWebsite=d,this.$translate=u,this.introContentTpa=p,this.wizUtils=g,this.introManager=h,this.address="",this.isNextDisabled=!0,this.isInProcess=!1,this.isHideTooltip=!0,this.nextButtonTooltipTitle="web-address-is-not-valid",this.nextButtonTooltipPosition="top",this.BusinessInfoTimeoutResponse=1e4,this.isImportEnabled=!0,this.currentStep=e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT,this.importDetails={WixSite:"wix site",NotWixSite:"non-wix site",ContentImported:"content-imported",SiteNotFound:"site-not-found",AddressNotExist:"address-does-not-exist",WixwizError:"wixwiz-error"},this.initData(),this.handleProblemsInWebsiteAddress(),this.introManager.data.referrer=e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT}return i.$inject=["introStep","flags","consumerBiLogger","applicationParameters","validation","importSiteContent","cmsApi","$timeout","$q","wizWebsite","$translate","introContentTpa","wizUtils","introManager"],i.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),this.currentStep,null)},i.prototype.initData=function(){this.introManager.data.contactDetails=this.introManager.data.contactDetails||{},this.address=this.introManager.data.contactDetails.website||this.address},i.prototype.showWebsiteAddressError=function(){this.isWebsiteAddressValid=!1,this.isHideTooltip=!1,this.consumerBiLogger.intro.siteConverterErrorIsShown(this.importDetails.AddressNotExist,this.currentStep),this.tipMessage="intro.import-site-content.address-does-not-exist"},i.prototype.hideWebsiteAddressError=function(){this.isWebsiteAddressValid=!0,this.isHideTooltip=!0,this.isError=!1,this.tipMessage=""},i.prototype.handleProblemsInWebsiteAddress=function(){this.validation.isWebsite(this.address)?this.hideWebsiteAddressError():this.showWebsiteAddressError(),this.isNextDisabled=!this.isWebsiteAddressValid},i.prototype.next=function(){var e=this;if(this.isInProcess=!0,this.isError=!1,this.address)return this.introManager.data.contactDetails.website=this.address,console.log("Start importing..."),this.importSiteContentProcess().then(function(){return e.nextStep()}).catch(function(t){return e.handleReject(t)});this.nextStep()},i.prototype.importSiteContentProcess=function(){var e=this,t=this.getValidatedUrl(this.address);return this.getSiteInfo(t).then(function(){return e.getSiteValidation(t)}).then(function(){return e.getBusinessInfo(t)})},i.prototype.getValidatedUrl=function(e){return 0===e.indexOf("http")?e:"http://"+e},i.prototype.buildKey=function(e,t){return e+"-"+t},i.prototype.getSiteInfo=function(e){var i=this;console.log("start: getSiteInfo for "+e);var o=new n.SiteConverterBIParams(this.buildKey(e,"site-info"),"site-info"),r=this.importSiteContent.generateSiteConverterPhaseInImportCallbacks(o);return r.start(),this.importSiteContent.getSiteInfo(e).then(function(n){return console.log("end: getSiteInfo for "+e+"."),n?(console.log("wix site"),r.complete({overrideImportDetailsName:i.importDetails.WixSite}),i.$q.reject(new t(P.Skip))):(console.log("not wix site."),r.complete({overrideImportDetailsName:i.importDetails.NotWixSite}),i.$q.resolve())})},i.prototype.getSiteValidation=function(e){var i=this;console.log("start: getSiteValidation for "+e);var o=new n.SiteConverterBIParams(this.buildKey(e,"site-validation-wixwiz"),"site-validation-wixwiz"),r=this.importSiteContent.generateSiteConverterPhaseInImportCallbacks(o);return r.start(),this.importSiteContent.getSiteValidation(e).then(function(n){if(console.log("end: getSiteValidation for "+e+". httpCode: "+n.httpErrorCode+', details: "'+n.statusLine+'"'),i.introManager.data.siteConverterSessionId=n.siteConverterSessionId,n.platform=n.platform&&n.platform.toLowerCase(),i.importSiteContent.isPlatformAllowed=!_.includes(i.wizUtils.disallowedPlatforms,n.platform),i.isImportEnabled=i.importSiteContent.isPlatformAllowed||i.flags.textManager,i.flags.debugWizSiteConverter&&!i.isImportEnabled&&(i.isImportEnabled=!0,console.log("forcing platform allowed",n.platform)),i.wizWebsite.setPlatformAllowed(i.isImportEnabled),200!==n.httpErrorCode||n.isParked){console.log("ERROR: getSiteValidation"),r.complete({overrideImportDetailsName:i.buildBiDetails(i.importDetails.SiteNotFound,"")});var o=i.$translate.instant("intro.import-site-content.address-could-not-found");return i.consumerBiLogger.intro.siteConverterErrorIsShown("Site is not found",i.currentStep),i.$q.reject(new t(P.Error,o))}return r.complete({overrideImportDetailsName:i.buildBiDetails(i.importDetails.ContentImported,n.platform)}),i.$q.resolve()})},i.prototype.buildBiDetails=function(e,t){return"status="+e+";platform="+t+";"},i.prototype.getBusinessInfo=function(e){var t=this;console.log("start: getBusinessInfo for "+e);var i=new n.SiteConverterBIParams(this.buildKey(e,"site-business-info-import"),"site-business-info-import"),o=this.importSiteContent.generateSiteConverterPhaseInImportCallbacks(i);return o.start(),this.importSiteContent.getBusinessInfo(e,this.introManager.data.name,this.introManager.data.siteConverterSessionId,this.BusinessInfoTimeoutResponse).then(function(i){return console.log("End: getBusinessInfo for "+e,i),o.complete({overrideImportDetailsName:t.importDetails.ContentImported}),t.updateIntroData(e,i),t.$q.resolve()}).catch(function(){return console.log("ERROR: getBusinessInfo for "+e),o.complete({overrideImportDetailsName:t.importDetails.WixwizError}),t.$q.resolve()})},i.prototype.updateIntroData=function(e,t){this.introManager.data.socialLinks=[],_.merge(this.introManager.data,new n.BusinessInfoResponse,t),this.introManager.data.contactDetails.website=e,t.generalInfo.logo&&!_.endsWith(t.generalInfo.logo.toLowerCase(),".svg")&&(this.initMedia(),this.addLogo(t.generalInfo.logo))},i.prototype.addLogo=function(e){var t=this,i=new Image;i.onload=function(){console.log("logo url is valid: "+e),t.introManager.data.media.displayLogo=!0,t.introManager.data.media.logos.unshift({description:"logo",url:e})},i.onerror=function(){console.log("ERROR: logo url is not valid: "+e)},i.src=e},i.prototype.initMedia=function(){this.introManager.data.media=this.introManager.data.media||{};this.introManager.data.media.logos=[{}]},i.prototype.handleReject=function(e){void 0===e&&(e=new t(P.Next,"")),e.type===P.Error?(this.isInProcess=!1,this.isNextDisabled=!0,this.isError=!0,this.tipMessage=e.message):e.type===P.Next?this.nextStep():e.type===P.Skip&&this.skip()},i.prototype.nextStep=function(){var t=e.INTRO_STATES.INTRO_IMPORT_SITE_CONFIRM;this.address&&this.isImportEnabled||(t=e.INTRO_STATES.INTRO_BUSINESS_LOCATION),this.consumerBiLogger.intro.siteConverterPagesNavigationClick("next",t,this.currentStep),this.introStep.next(t)},i.prototype.skip=function(){var t=e.INTRO_STATES.INTRO_BUSINESS_LOCATION;this.consumerBiLogger.intro.siteConverterPagesNavigationClick("skip",t,this.currentStep),this.introManager.data.contactDetails.website="",this.introStep.skip(t)},i.prototype.back=function(){var t=e.INTRO_STATES.INTRO_BUSINESS_NAME;this.consumerBiLogger.intro.siteConverterPagesNavigationClick("back",t,this.currentStep),this.introStep.back(t)},Object.defineProperty(i.prototype,"boxTipStyle",{get:function(){return this.introStep.backdropBoxPosition?{top:this.introStep.backdropBoxPosition.y+this.introStep.backdropBoxPosition.height,left:this.introStep.backdropBoxPosition.x,width:this.introStep.backdropBoxPosition.width}:null},enumerable:!0,configurable:!0}),i}();e.IntroImportSiteContent=i,angular.module("adiIntroInternal").component("introImportSiteContent",{controller:i,templateUrl:"views/intro/intro-import-site-content.html"})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("introImportSiteContentNew",{controller:e.IntroImportSiteContent,templateUrl:"views/intro/intro-import-site-content-new.html"})}(M||(M={}));b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),m=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};!function(e){var t=function(t){function i(i,n,o,r,a,s,l,c){var d=t.call(this,i,n)||this;return d.youtubeChannelManager=o,d.introManager=r,d.socialLinkManager=a,d.$scope=s,d.validation=l,d.consumerBiLogger=c,!d.flags.MED&&d.flags.youTubeChannel&&(d.channelUrl=d.youtubeChannelManager.getChannelUrl(),d.$scope.$watch(function(){return d.channelUrl},function(e){d.isValidUrl=d.validation.isWebsite(e),d.isNextDisabled=!d.isValidUrl})),d.consumerBiLogger.intro.pageView(e.CategoryTypes.WixVideo,e.INTRO_STATES.INTRO_YOUTUBE_CHANNEL,null),d}return b(i,t),i.$inject=["introStep","flags","youtubeChannelManager","introManager","socialLinkManager","$scope","validation","consumerBiLogger"],i.prototype.resetSocialLinks=function(){this.introManager.data.socialLinks=[]},i.prototype.next=function(){return m(this,void 0,void 0,function(){var t,i;return f(this,function(n){switch(n.label){case 0:this.isNextDisabled=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),this.youtubeChannelManager.isValidUrl(this.channelUrl)?[4,this.youtubeChannelManager.fetchChannel(this.channelUrl)]:[2,this.skip()];case 2:return t=n.sent(),this.introManager.data.media||(this.introManager.data.media={logos:[]}),this.introManager.data.media.logos=this.media(_.get(t,"snippet.thumbnails.medium.url")),this.introManager.data.media.photos=this.media(_.get(t,"brandingSettings.image.bannerImageUrl")),this.introManager.data.socialLinks=[{platform:this.socialLinkManager.PLATFORM_YOUTUBE,url:this.channelUrl}],this.consumerBiLogger.intro.youtubeChannelPageNavigationClick("next",e.INTRO_STATES.INTRO_BUSINESS_LOCATION),this.goToNextState(),[3,4];case 3:return i=n.sent(),console.error(i),this.isNextDisabled=!1,[3,4];case 4:return[2]}})})},i.prototype.skip=function(){this.consumerBiLogger.intro.youtubeChannelPageNavigationClick("skip",e.INTRO_STATES.INTRO_BUSINESS_LOCATION),this.resetSocialLinks(),this.goToNextState()},i.prototype.goToNextState=function(){this.introStep.next(e.INTRO_STATES.INTRO_BUSINESS_LOCATION)},i.prototype.media=function(t){if(t)return[{source:e.YoutubeChannelManager.PhotoSourceYoutube,url:t,description:"",data:{}}]},i.prototype.back=function(){this.consumerBiLogger.intro.youtubeChannelPageNavigationClick("back",e.INTRO_STATES.INTRO_BUSINESS_NAME),this.introStep.back(e.INTRO_STATES.INTRO_BUSINESS_NAME)},i}(e.IntroQuestionsBase);e.IntroYoutubeChannel=t,angular.module("adiIntroInternal").component("introYoutubeChannel",{controller:t,templateUrl:"views/intro/intro-youtube-channel.html"})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("introYoutubeChannelNew",{controller:e.IntroYoutubeChannel,templateUrl:"views/intro/intro-youtube-channel-new.html"})}(M||(M={}));b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){var t=function(t){function i(e,i,n,o,r,a){var s=t.call(this,e,i)||this;return s.introContentTpa=n,s.consumerBiLogger=o,s.introManager=r,s.$translate=a,s}return b(i,t),i.$inject=["introStep","flags","introContentTpa","consumerBiLogger","introManager","$translate"],i.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_BUSINESS_NAME,null)},Object.defineProperty(i.prototype,"name",{get:function(){return this.introManager.data.name},set:function(e){this.introManager.data.name=e},enumerable:!0,configurable:!0}),i.prototype.canMoveNext=function(){return!this.name},i.prototype.isSiteConverter=function(){return!this.flags.MED&&(this.flags.wizSiteConverter||this.flags.textManager)&&this.introContentTpa.categoryType(this.introManager.data.category)!==e.CategoryTypes.SingleEvent},i.prototype.getNextStep=function(){return!this.flags.MED&&this.flags.youTubeChannel&&this.introManager.data.videoStructure?e.INTRO_STATES.INTRO_YOUTUBE_CHANNEL:this.isSiteConverter()?e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT:e.INTRO_STATES.INTRO_BUSINESS_LOCATION},i.prototype.next=function(){this.name||(this.name=this.$translate.instant("intro.business-name.empty"));var e=this.getNextStep();this.consumerBiLogger.intro.typeBusinessNamePageNavigationClick(e,"next",this.name),this.introStep.next(e)},i.prototype.skip=function(){this.consumerBiLogger.intro.typeBusinessNamePageNavigationClick(e.INTRO_STATES.INTRO_BUSINESS_LOCATION,"skip",this.name),this.name="",this.introStep.next(e.INTRO_STATES.INTRO_BUSINESS_LOCATION)},i.prototype.back=function(){var t=this.introManager.data.category&&this.introContentTpa.categoryType(this.introManager.data.category)===e.CategoryTypes.SingleEvent?e.INTRO_STATES.INTRO_CATEGORY_SEARCH:e.INTRO_STATES.INTRO_SERVICES_OFFER;this.consumerBiLogger.intro.typeBusinessNamePageNavigationClick(t,"back",this.name),this.introStep.back(t)},i.prototype.getBusinessNameTitle=function(){var e=this.introManager.getCategoryNoError(),t=this.introContentTpa.businessNameTitle(e);return this.$translate.instant(this.flags.newIntroDesign?"new-"+t:t)},i}(e.IntroQuestionsBase);e.IntroBusinessName=t,angular.module("adiIntroInternal").component("introBusinessName",{controller:t,templateUrl:"views/intro/intro-business-name.html"})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("introBusinessNameNew",{controller:e.IntroBusinessName,templateUrl:"views/intro/intro-business-name-new.html"})}(M||(M={}));b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){var t=function(t){function i(i,n,o,r,a,s,l){var c=t.call(this,i,n)||this;c.$translate=o,c.introContentTpa=r,c.consumerBiLogger=a,c.introManager=s,c.youtubeChannelManager=l,c.isOptional=!1,c.introPlacesOptions={},c.placesOptions={types:["geocode"]},c.isValid=function(){return c.isOptional||c.introManager.hasAddress};var d=c.introManager.getCategoryNoError();return c.categoryType=r.categoryType(d),c.placeholder=c.placeholderKey(c.categoryType),c.categoryType===e.CategoryTypes.SingleEvent&&(c.isOptional=!0,c.introPlacesOptions.displayKeys=["name","formatted_address"],c.placesOptions.types=["establishment"]),c.introManager.data.referrer=e.INTRO_STATES.INTRO_BUSINESS_LOCATION,c.consumerBiLogger.intro.pageView(c.introContentTpa.categoryType(c.introManager.data.category),e.INTRO_STATES.INTRO_BUSINESS_LOCATION,null),c}return b(i,t),i.$inject=["introStep","flags","$translate","introContentTpa","consumerBiLogger","introManager","youtubeChannelManager"],Object.defineProperty(i.prototype,"address",{get:function(){return this.introManager.data.userLocation},set:function(e){this.introManager.data.userLocation=e,this.flags.wixEvents&&this.introManager.setAddress(this.introManager.data.userLocation)},enumerable:!0,configurable:!0}),i.prototype.getLocationTitle=function(){var e=this.introManager.getCategoryNoError(),t=this.introContentTpa.locationTitle(e);return this.$translate.instant(t)},i.prototype.skip=function(){this.introManager.data.userLocation=null,this.introManager.data.ipBasedLocation=!1,this.introManager.data.indifferentLocation=!1;var e=this.nextStep(!0);delete this.introManager.data.searchResults,this.consumerBiLogger.intro.typeBusinessLocationPageNavigationClick(e,"skip",null),this.introStep.next(e)},i.prototype.nextStep=function(t){return this.categoryType===e.CategoryTypes.SingleEvent?e.INTRO_STATES.INTRO_BUSINESS_DATES:!t||this.introManager.data.indifferentLocation?e.INTRO_STATES.INTRO_SEARCH_CONFIRM:e.INTRO_STATES.INTRO_EDIT_USER},i.prototype.shouldNotAnalyzeAddress=function(){return!this.flags.MED&&this.flags.youTubeChannel&&this.introManager.data.videoStructure&&this.youtubeChannelManager.introHasYoutubeChannel()},i.prototype.next=function(){if(this.shouldNotAnalyzeAddress())return this.introStep.next(this.nextStep(!0));if(this.isValid()){var t=this.introManager.hasAddress?this.introManager.data.userLocation.formatted_address:this.introManager.data.userLocation;this.introManager.data.ipBasedLocation=!1,this.introManager.data.indifferentLocation=!1,this.consumerBiLogger.intro.typeBusinessLocationPageNavigationClick(e.INTRO_STATES.INTRO_SEARCH_CONFIRM,"next",t),this.introStep.next(this.nextStep())}},i.prototype.back=function(){var t=e.INTRO_STATES.INTRO_BUSINESS_NAME;this.flags.MED||this.categoryType===e.CategoryTypes.SingleEvent||!this.flags.wizSiteConverter&&!this.flags.textManager||(t=e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT),this.flags.youTubeChannel&&!this.flags.MED&&this.introManager.data.videoStructure&&(t=e.INTRO_STATES.INTRO_YOUTUBE_CHANNEL),this.consumerBiLogger.intro.typeBusinessLocationPageNavigationClick(t,"back",null),this.introStep.back(t)},i.prototype.placeholderKey=function(e){var t="intro.business-location.input-placeholder";if(!e)return t;var i=t+"-"+e,n=this.$translate.instant(i);return n===i?t:n},i}(e.IntroQuestionsBase);e.IntroBusinessLocation=t,angular.module("adiIntroInternal").component("introBusinessLocation",{controller:t,templateUrl:"views/intro/intro-business-location.html"})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("introBusinessLocationNew",{controller:e.IntroBusinessLocation,templateUrl:"views/intro/intro-business-location-new.html"})}(M||(M={}));b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){var t=0,i=1,o={inTime:function(e,t,i){return void 0===i&&(i=new Date),i&&new Date(i.getFullYear(),i.getMonth(),i.getDate(),e,t)},startDate:function(){return new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+14,19,0,0)},endDate:function(e){return o.inTime(e.getHours()+4,e.getMinutes(),e)}},r=function(r){function a(o,a,s,l,c,d,u){var p=r.call(this,o,a)||this;return p.introWindow=s,p.consumerBiLogger=l,p.introContentTpa=c,p.CcDialogBuilder=d,p.introManager=u,p.optionalTimes=_.range(0,24).reduce(function(e,t,i){return e[2*i]=p.timeItem(t,0),e[2*i+1]=p.timeItem(t,30),e},[]),p.timezones=n.TimeZones,p.hasStartDate=function(){return p.dates&&p.dates[t]},p.hasEndDate=function(){return p.dates&&p.dates[i]},p.wrongStartDate=function(){return p.dates[0]&&p.dates[0]<new Date},p.wrongEndDate=function(){return p.dates[0]&&p.dates[1]&&p.dates[1]<p.dates[0]},p.dateLabel=function(e){return"intro.business-dates.date-label-"+(e===t?"from":"to")},p.startValueExists=function(){return""+!(!p.dates||!p.dates[0])},p.endValueExists=function(){return""+!(!p.dates||!p.dates[1])},p.timesFromDates=function(e){return e.map(function(e){return e?100*e.getHours()+e.getMinutes():null})},u.data.dates&&u.data.dates[t]||(u.data.dates=[null]),p.selectedTimes=p.timesFromDates(p.introManager.data.dates),u.data.timezone||(u.data.timezone=s.userTimezone()),p.consumerBiLogger.intro.pageView(p.introContentTpa.categoryType(p.introManager.data.category),e.INTRO_STATES.INTRO_BUSINESS_DATES,null),p}return b(a,r),a.$inject=["introStep","flags","introWindow","consumerBiLogger","introContentTpa","CcDialogBuilder","introManager"],Object.defineProperty(a.prototype,"dates",{get:function(){return this.introManager.data.dates},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"timezone",{get:function(){return this.introManager.data.timezone},set:function(e){this.introManager.data.timezone=e},enumerable:!0,configurable:!0}),a.prototype.onDateClicked=function(e,t){var i=this;this.consumerBiLogger.intro.eventsSchedulePageActionOnPage((0===t?"start":"end")+" date","click"),this.setDefaults(t);var n=e.target.getBoundingClientRect(),o=n.x,r=n.y,a=n.height,s={parent:angular.element("intro-business-dates"),hasBackdrop:!1,clickOutsideToClose:!0,template:'<md-dialog ng-style="$ctrl.position"><p19-calendar date="$ctrl.currentDate" on-date-change="$ctrl.onDateChange(date)"></p19-calendar></md-dialog>',controller:function(){return{position:{top:r+a,left:o,position:"absolute"},currentDate:i.dates[t],onDateChange:function(e){return i.dateChanged(t,new Date(e))}}},controllerAs:"$ctrl"};this.CcDialogBuilder.show(s)},a.prototype.onTimeClicked=function(e,t){this.consumerBiLogger.intro.eventsSchedulePageActionOnPage((0===t?"start":"end")+" time","click"),this.setDefaults(t)},a.prototype.onTimezoneClicked=function(){angular.element("[data-hook=timezone-select]").click(),this.consumerBiLogger.intro.eventsSchedulePageActionOnPage("timezone","click")},a.prototype.dateChanged=function(e,t){this.consumerBiLogger.intro.eventsSchedulePageActionOnPage((0===e?"start":"end")+" date","choose"),t.setHours(this.dates[e].getHours()),t.setMinutes(this.dates[e].getMinutes()),this.dates[e]=t},a.prototype.timeChanged=function(e,t){this.consumerBiLogger.intro.eventsSchedulePageActionOnPage((0===e?"start":"end")+" time","choose"),this.dates[e].setHours(Math.floor(t/100)),this.dates[e].setMinutes(t%100)},a.prototype.timezoneChanged=function(){this.consumerBiLogger.intro.eventsSchedulePageActionOnPage("timezone","choose")},a.prototype.addDate=function(){this.dates[i]=null,this.setDefaults(i),this.consumerBiLogger.intro.eventsSchedulePageActionOnPage("end date","add")},a.prototype.removeDate=function(e){this.consumerBiLogger.intro.eventsSchedulePageActionOnPage((0===e?"start":"end")+" date","remove"),this.dates.splice(e,1),0===this.dates.length&&(this.dates[t]=null),this.selectedTimes=this.timesFromDates(this.dates)},a.prototype.next=function(){this.consumerBiLogger.intro.eventsSchedulePageNavigationClick(this.endValueExists(),"next",e.INTRO_STATES.INTRO_EVENT_DETAILS,this.startValueExists()),this.introStep.next(e.INTRO_STATES.INTRO_EVENT_DETAILS)},a.prototype.back=function(){this.consumerBiLogger.intro.eventsSchedulePageNavigationClick(this.endValueExists(),"back",e.INTRO_STATES.INTRO_BUSINESS_LOCATION,this.startValueExists()),this.introStep.back(e.INTRO_STATES.INTRO_BUSINESS_LOCATION)},a.prototype.skip=function(){delete this.introManager.data.dates,this.consumerBiLogger.intro.eventsSchedulePageNavigationClick(this.endValueExists(),"skip",e.INTRO_STATES.INTRO_EVENT_DETAILS,this.startValueExists()),this.introStep.next(e.INTRO_STATES.INTRO_EVENT_DETAILS)},a.prototype.setDefaults=function(e){this.dates[e]||(this.dates[e]=0===e?o.startDate():o.endDate(this.dates[t]),this.selectedTimes=this.timesFromDates(this.dates))},a.prototype.timeItem=function(e,t){return{value:100*e+t,display:this.introWindow.formattedTime(o.inTime(e,t))}},a}(e.IntroQuestionsBase);e.IntroBusinessDates=r,angular.module("adiIntroInternal").component("introBusinessDates",{controller:r,templateUrl:"views/intro/intro-business-dates.html"})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("introBusinessDatesNew",{controller:e.IntroBusinessDates,templateUrl:"views/intro/intro-business-dates-new.html"})}(M||(M={}));b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){var t=function(t){function i(e,i,n,o,r,a){var s=t.call(this,e,i)||this;return s.introContentTpa=n,s.consumerBiLogger=o,s.$q=r,s.introManager=a,s.searchingBusinesses=!1,s.isInProcess=!1,s}return b(i,t),i.$inject=["introStep","flags","introContentTpa","consumerBiLogger","$q","introManager"],i.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_SEARCH_CONFIRM,null)},Object.defineProperty(i.prototype,"businessName",{get:function(){return this.introManager.data.name},enumerable:!0,configurable:!0}),i.prototype.skip=function(){this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(e.INTRO_STATES.INTRO_EDIT_USER,"skip",this.introManager.data.name),this.introStep.wait(),this.introManager.data.referrer=e.INTRO_STATES.INTRO_SEARCH_CONFIRM,this.introManager.setAddress(this.introManager.data.userLocation),this.introStep.skip(e.INTRO_STATES.INTRO_EDIT_USER)},i.prototype.next=function(){var t=this;this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(e.INTRO_STATES.INTRO_SELECT_USER,"next",this.introManager.data.name),this.searchingBusinesses=!0;var i=this.introStep.wait(),n=this.introManager.searchUsers();this.flags.newIntroDesign?this.isInProcess=!0:i.then(function(){t.searchingBusinesses&&t.introStep.loadingElement.show()}),this.$q.all([i,n]).catch(function(){t.flags.newIntroDesign&&(t.isInProcess=!1)}).finally(function(){t.searchingBusinesses=!1,t.flags.newIntroDesign||t.introStep.loadingElement.hide(),t.introStep.next(e.INTRO_STATES.INTRO_SELECT_USER)})},i.prototype.isSearchingBusinesses=function(){return this.searchingBusinesses},i.prototype.back=function(){delete this.introManager.data.searchResults,this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(e.INTRO_STATES.INTRO_BUSINESS_LOCATION,"back",this.introManager.data.name),this.introStep.back(e.INTRO_STATES.INTRO_BUSINESS_LOCATION)},i}(e.IntroQuestionsBase);e.IntroSearchConfirm=t,angular.module("adiIntroInternal").component("introSearchConfirm",{controller:t,templateUrl:"views/intro/intro-search-confirm.html"})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("introSearchConfirmNew",{controller:e.IntroSearchConfirm,templateUrl:"views/intro/intro-search-confirm-new.html"})}(M||(M={}));var M;b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){var t=function(t){function i(e,n,o,r,a,s,l,c,d){var u=t.call(this,e,n)||this;return u.consumerBiLogger=o,u.$q=r,u.introManager=a,u.wizWebsite=s,u.introContentTpa=l,u.fullStoryLoader=c,u.importSiteContent=d,u.introManager.data.referrer=i.STEP,u}return b(i,t),i.$inject=["introStep","flags","consumerBiLogger","$q","introManager","wizWebsite","introContentTpa","fullStoryLoader","importSiteContent"],i.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),i.STEP,null),this.wizWebsite.preloadFullSiteData(this.introManager.data.contactDetails.website,this.introManager.data.name)},i.prototype.next=function(){this.flags.debugWizSiteConverter||this.loadFullstory(),this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT,"next",this.introManager.data.name),this.importSite();var t=e.INTRO_STATES.INTRO_EDIT_USER;this.consumerBiLogger.intro.siteConverterPagesNavigationClick("next",t,i.STEP),this.introStep.next(t)},i.prototype.importSite=function(){var e=this.introManager.data.contactDetails.website,t=this.introManager.data.name,i=this.introManager.data.siteConverterSessionId;this.introManager.data.importedSite={userId:null,siteAddress:e},this.flags.textManager&&this.importSiteContent.importTextsFromSite(e,t,i)},i.prototype.back=function(){var t=e.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT;this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(t,"back",this.introManager.data.name),this.consumerBiLogger.intro.siteConverterPagesNavigationClick("back",t,i.STEP),this.introStep.back(t)},i.prototype.skip=function(){var t=e.INTRO_STATES.INTRO_BUSINESS_LOCATION;this.consumerBiLogger.intro.siteConverterPagesNavigationClick("skip",t,i.STEP),this.introManager.data.contactDetails.website="",this.introStep.skip(t)},i.prototype.loadFullstory=function(){var e=this,t={label:"site-generator-statics-consumer",sample:1,onReady:function(t){return e.consumerBiLogger.intro.fullStoryStarted(t)}};this.fullStoryLoader(t)},i}(e.IntroQuestionsBase);t.STEP=e.INTRO_STATES.INTRO_IMPORT_SITE_CONFIRM,e.IntroImportSiteConfirm=t,angular.module("adiIntroInternal").component("introImportSiteConfirm",{controller:t,templateUrl:"views/intro/intro-import-site-confirm.html"})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("introImportSiteConfirmNew",{controller:e.IntroImportSiteConfirm,templateUrl:"views/intro/intro-import-site-confirm-new.html"})}(M||(M={})),function(e){var t=function(){function t(t,i,n,o,r,a){this.introStep=t,this.$element=i,this.introManager=n,this.introContentTpa=o,this.flags=r,this.consumerBiLogger=a,this.loadingUserInfo=!1,this.title=this.getTitle(),this.resultsText=this.getResultsText(),this.name=this.introManager.data.name,this.address=this.introManager.data.userLocation,this.introManager.data.referrer=e.INTRO_STATES.INTRO_SELECT_USER,this.flags.newIntroDesign||this.setScrollbarListener()}return t.$inject=["introStep","$element","introManager","introContentTpa","flags","consumerBiLogger"],t.prototype.setScrollbarListener=function(){var e=this,t=this.$element.find('[data-hook="back-to-top"]');this.scrollable=this.$element.find('[data-hook="scroll-container"]'),this.locationInput=this.$element.find('[data-hook="business-location-input"]'),this.scrollable.on("scroll",_.throttle(function(){return requestAnimationFrame(function(){return e.updateScrollTopVisibility(t)})},this.flags.newIntroDesign?0:1e3)),this.updateScrollTopVisibility(t)},t.prototype.$onDestroy=function(){this.flags.newIntroDesign&&this.scrollable.off("scroll")},t.prototype.updateScrollTopVisibility=function(e){var t=this;if(void 0===e&&(e=this.back2Top),e&&0!==e.length){var i=this.flags.newIntroDesign?150:400;(this.flags.newIntroDesign?function(){return t.scrollable.scrollTop()>0}:function(){return t.locationInput.offset().top+t.locationInput.outerHeight()<0})()?e.fadeIn(i):e.fadeOut(i)}},t.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_SELECT_USER,this.results.length)},t.prototype.getResultsText=function(){return this.introManager.isWixWizError?"intro.select-user.results-error":0===this.results.length?"intro.select-user.results-none":"intro.select-user.results-"+(this.results.length>1?"multiple":"single")},t.prototype.getResultsLength=function(){return this.results.length>0?this.results.length:""},t.prototype.onGoToTopClicked=function(){this.consumerBiLogger.intro.wixwizSearchResultsGoToTopOfPageClick(this.results.length,null),this.goToTop()},t.prototype.goToTop=function(){this.scrollable.animate({scrollTop:0})},t.prototype.getTitle=function(){var e="intro.select-user.title";return this.introManager.isWixWizError?e="intro.select-user.title-error":0===this.results.length&&(e=this.flags.newIntroDesign?"new-intro.select-user.no-results":"intro.select-user.title-no-results"),e},Object.defineProperty(t.prototype,"subtitle",{get:function(){return this.introManager.isWixWizError?"error":0===this.results.length?"noresults":"someresults"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"results",{get:function(){return this.introManager.data.searchResults||[]},enumerable:!0,configurable:!0}),t.prototype.search=function(){var e=this;this.introManager.data.indifferentLocation=!this.address,this.introManager.data.name=this.name,this.introManager.data.userLocation=this.address,this.consumerBiLogger.intro.clickOnSearchButtonInSelectUserPage(this.name,this.introManager.data.userLocation.formatted_address),this.introManager.searchUsers().finally(function(){e.title=e.getTitle(),e.resultsText=e.getResultsText()})},t.prototype.next=function(t){var i=this;this.flags.newIntroDesign&&(t.isLoading=!0),this.consumerBiLogger.intro.selectInfoCardPageNavigationClick(e.INTRO_STATES.INTRO_SEARCH_CONFIRM,"next",this.results.length,null,this.results.indexOf(t),t.nameSimilarityRank,t.distance),this.loadingUserInfo=!0,this.introManager.getExtendedUser(t).finally(function(){_.get(i.introManager.data,"contactDetails.address.fullAddress")||i.introManager.setAddress(i.introManager.data.userLocation),i.loadingUserInfo=!1,i.introStep.next(e.INTRO_STATES.INTRO_EDIT_USER),i.flags.newIntroDesign&&(t.isLoading=!1)})},t.prototype.skip=function(){this.consumerBiLogger.intro.selectInfoCardPageNavigationClick(e.INTRO_STATES.INTRO_SEARCH_CONFIRM,"skip",this.results.length,null,null,null,null),this.introManager.setAddress(this.introManager.data.userLocation),this.introStep.skip(e.INTRO_STATES.INTRO_EDIT_USER)},t.prototype.back=function(){this.consumerBiLogger.intro.selectInfoCardPageNavigationClick(e.INTRO_STATES.INTRO_SEARCH_CONFIRM,"back",this.results.length,null,null,null,null),this.introStep.back(e.INTRO_STATES.INTRO_SEARCH_CONFIRM)},t.prototype.isLoadingUser=function(){return this.loadingUserInfo},t}();e.IntroSelectUserInfo=t,angular.module("adiIntroInternal").component("introSelectUser",{templateUrl:"views/intro/intro-select-user.html",controller:t,bindings:{}}),angular.module("adiIntroInternal").directive("introScrollbar",["osUtils","flags",function(e,t){return{restrict:"A",scope:{onInit:"&?"},compile:function(i,n){return e.isIE&&i[0].removeAttribute("cc-scrollbar"),t.newIntroDesign?function(e){e.onInit&&e.onInit()}:null}}}])}(M||(M={})),function(e){angular.module("adiIntroInternal").component("introSelectUserNew",{templateUrl:"views/intro/intro-select-user-new.html",controller:e.IntroSelectUserInfo,bindings:{}})}(M||(M={})),function(e){var t=function(){function t(e,t,i,n,o,r){this.introManager=e,this.introStep=t,this.introContentTpa=i,this.logoManager=n,this.consumerBiLogger=o,this.flags=r}return t.$inject=["introManager","introStep","introContentTpa","logoManager","consumerBiLogger","flags"],t.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_EDIT_USER,null)},Object.defineProperty(t.prototype,"introData",{get:function(){return this.introManager.data},enumerable:!0,configurable:!0}),t.prototype.next=function(){var t=this;if(this.consumerBiLogger.intro.editInfoCardPageNavigationClick("builder","next"),!this.introManager.data)throw"intro manager did not initialized.";this.introStep.hideContent(!0).then(function(){t.introManager.prepareDataForBuilder(),t.introStep.next(e.INTRO_FINISHED)})},t.prototype.back=function(){var t=e.INTRO_STATES.INTRO_SELECT_USER;this.flags.wizSiteConverter||this.flags.youTubeChannel?t=this.introManager.data.referrer||e.INTRO_STATES.INTRO_BUSINESS_LOCATION:this.introManager.data.userLocation?this.introManager.data.searchResults||(t=e.INTRO_STATES.INTRO_SEARCH_CONFIRM):t=e.INTRO_STATES.INTRO_BUSINESS_LOCATION,this.consumerBiLogger.intro.editInfoCardPageNavigationClick(t,"back"),this.introStep.back(t)},t}();e.IntroEditUserInfo=t,angular.module("adiIntroInternal").component("introEditUser",{templateUrl:"views/intro/intro-edit-user.html",controller:t,bindings:{}})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("introEditUserNew",{templateUrl:"views/intro/intro-edit-user-new.html",controller:e.IntroEditUserInfo,bindings:{}})}(M||(M={})),function(e){var t=function(){function t(t,i,o,r,a,s,l,c,d){var u=this;if(this.introWindow=t,this.introStep=i,this.osUtils=o,this.introContentTpa=r,this.consumerBiLogger=a,this.applicationState=s,this.socialLinkManager=l,this.applicationParameters=c,this.introManager=d,this.back=function(){var t=e.INTRO_STATES.INTRO_BUSINESS_DATES;u.consumerBiLogger.intro.editInfoCardPageNavigationClick(t,"back"),u.introStep.back(t)},this.changeLocation=function(){return u.introStep.back(e.INTRO_STATES.INTRO_BUSINESS_LOCATION)},this.changeDates=function(){return u.introStep.back(e.INTRO_STATES.INTRO_BUSINESS_DATES)},this.enableAddSocialLink=function(){return u.data.socialLinks.length<u.applicationParameters.maxSocialLinks},this.onSocialChanged=function(e){return e.platform=u.socialLinkManager.getPlatformNameByUrl(e.url)},this.isLinkInvalid=function(e){return!e.platform&&e.url},this.data=d.data,"string"==typeof this.data.userLocation?this.addressToDisplay=this.data.userLocation:this.data.userLocation&&(this.addressToDisplay=_.get(this.data,"userLocation.name")||_.get(this.data,"userLocation.formatted_address")),this.data.dates&&this.data.dates[0]&&(this.fromDate=this.introWindow.formattedDate(this.data.dates[0]),this.fromTime=this.introWindow.formattedTime(this.data.dates[0]),this.data.dates[1]&&(this.toDate=this.introWindow.formattedDate(this.data.dates[1]),this.toTime=this.introWindow.formattedTime(this.data.dates[1])),this.data.timezone)){var p=_.find(n.TimeZones,{key:this.data.timezone});this.timezoneToDisplay=p&&p.displayName}}return t.$inject=["introWindow","introStep","osUtils","introContentTpa","consumerBiLogger","applicationState","socialLinkManager","applicationParameters","introManager"],t.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.introContentTpa.categoryType(this.introManager.data.category),e.INTRO_STATES.INTRO_EVENT_DETAILS,null)},t.prototype.next=function(){var t=this;this.consumerBiLogger.intro.editInfoCardPageNavigationClick("builder","next"),this.introStep.hideContent(!0).then(function(){t.introManager.prepareDataForBuilder(),t.introStep.next(e.INTRO_FINISHED),t.applicationState.goToBuilder()})},t.prototype.addEmptySocialLink=function(){var e={platform:"",url:""};this.data.socialLinks.push(e),this.osUtils.isIE||(this.focusedSocial=e)},t.prototype.deleteSocialLink=function(e){this.data.socialLinks=this.data.socialLinks.filter(function(t){return t!==e}),this.onFieldChanged(e.platform,"social",e.url,"")},t.prototype.onFieldChanged=function(e,t,i,n,o){if(n!==i){var r=n?n.length:0,a=i?n?"edit":"remove":"add";this.consumerBiLogger.intro.infoCardAddEditRemoveInfo(e,t,r,a,"intro",o||null)}},t}();e.IntroEventDetails=t,angular.module("adiIntroInternal").component("introEventDetails",{controller:t,templateUrl:"views/intro/intro-event-details.html"})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("introEventDetailsNew",{controller:e.IntroEventDetails,templateUrl:"views/intro/intro-event-details-new.html"})}(M||(M={})),function(e){var t=function(){function e(e,t,i){this.$parse=e,this.clientTopology=t,this.flags=i,this.logoUrl=this.getLogoPlaceholder(),this.flags.youTubeChannel&&!this.flags.MED&&(this.bannerUrl=this.getBannerFromDataOrLogo()),this.showHeader=!!_.isUndefined(this.showHeader)||this.showHeader}return e.$inject=["$parse","clientTopology","flags"],e.prototype.getBannerFromDataOrLogo=function(){return this.$parse("media.photos[0].url")(this.data)||this.logoUrl},e.prototype.getLogoPlaceholder=function(){var e=this.$parse("media.logos[0].url")(this.data);if(!e&&!this.flags.newIntroDesign){var t=Math.floor(4*Math.random())+2;e=this.clientTopology.staticsUrl+"/images/intro/logo-placeholder"+t+".png"}return e},e.prototype.handleSelect=function(){this.onSelected&&this.onSelected()},e.prototype.isPlaceholder=function(){return this.logoUrl&&this.logoUrl.indexOf("/logo-placeholder")>=0},e}();e.BusinessCardStatic=t,angular.module("adiIntroInternal").component("businessCardStatic",{controller:t,templateUrl:"views/intro/business-card-static.html",bindings:{data:"=",onSelected:"&",showHeader:"<?"}})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("businessCardStaticNew",{controller:e.BusinessCardStatic,templateUrl:"views/intro/business-card-static-new.html",bindings:{data:"=",onSelected:"&",showHeader:"<?"}})}(M||(M={})),function(e){var t=function(){function e(e){e.youTubeChannel&&!e.MED&&(this.bannerStyle={backgroundImage:"url("+this.bannerUrl+")"})}return e.$inject=["flags"],e}();angular.module("adiIntroInternal").component("businessCardHeader",{controller:t,templateUrl:"views/intro/business-card-header.html",bindings:{logoUrl:"=",bannerUrl:"<?"}})}(M||(M={})),function(e){var t=function(){function e(e,t,i,n,o,r){this.previewUrls=e,this.consumerBiLogger=t,this.miscUtils=i,this.$element=n,this.$timeout=o,this.flags=r}return e.$inject=["previewUrls","consumerBiLogger","miscUtils","$element","$timeout","flags"],Object.defineProperty(e.prototype,"logoButtonIcon",{get:function(){return"coloration:"+(this.justReplaceButton?"replace":this.logoIsPlaceholder()?"add-small":"edit")},enumerable:!0,configurable:!0}),e.prototype.openMediaManager=function(){var e=this;this.miscUtils.mediaGalleryAdapter.selectLogo().then(function(t){var i=e.previewUrls.getImageThumbnailUrl(t[0].relativeUri,t[0].mediaType);e.onEdit({$url:i,$data:t[0]})})},e.prototype.logoIsPlaceholder=function(){return this.url&&this.url.indexOf("/logo-placeholder")>=0},e.prototype.clickOnInputFile=function(){var e=this;this.inputFileElm||(this.inputFileElm=this.$element.find('[data-hook="file-upload"]')),this.consumerBiLogger.intro.clickOnReplaceLogoIntroWelcometourBuilder(this.origin.startsWith("welcome")?"welcome":"no-tour",this.origin),this.$timeout(function(){e.inputFileElm.click(),e.flags.newIntroDesign&&document.activeElement.blur()})},e.prototype.editLogoClick=function(){(this.enableEdit&&this.logoIsPlaceholder()||this.justReplaceButton)&&this.clickOnInputFile()},e}();e.BusinessCardLogo=t,angular.module("adiIntroInternal").component("businessCardLogo",{controller:t,templateUrl:"views/intro/business-card-logo.html",bindings:{url:"=",origin:"=",enableEdit:"=?",justReplaceButton:"=?",onDelete:"&",onEdit:"&",useMediaManager:"=?",showWrappingCircle:"=?",isUploading:"=",uploadError:"="}})}(M||(M={})),function(e){angular.module("adiIntroInternal").component("businessCardLogoNew",{controller:e.BusinessCardLogo,templateUrl:"views/intro/business-card/business-card-logo-new.html",bindings:{url:"=",origin:"=",enableEdit:"=?",justReplaceButton:"=?",onDelete:"&",onEdit:"&",useMediaManager:"=?",showWrappingCircle:"=?",isUploading:"=",uploadError:"="}})}(M||(M={})),function(e){angular.module("adiIntroCommon").component("businessCardEditableNew",{controller:e.BusinessCardEditable,templateUrl:"views/intro/business-card-editable-new.html",bindings:{data:"=",view:"@?"}})}(M||(M={}));var E=function(){function e(){}return e.prototype.createSprite=function(e){var t=this,i=[];return e.forEach(function(e){switch(e.type){case"circle":_.isUndefined(e.radius)&&console.error("Circle definition missing radius",e),i.push(t.createSpriteCircle(e));break;case"rect":(_.isUndefined(e.width)||_.isUndefined(e.height))&&console.error("Rectangle definition missing width or height",e),i.push(t.createSpriteRect(e))}}),i},e.prototype.drawCircle=function(e,t,i,n,o,r,a){if(void 0===o&&(o="#fff"),void 0===a&&(a=0),e.save(),r){var s=r.from,l=s[0],c=s[1],d=r.to,u=d[0],p=d[1],g=e.createLinearGradient(l,c,u,p);_.forEach(r.stops,function(e){return g.addColorStop(e[0],e[1])}),e.fillStyle=g}else e.fillStyle=o;a&&(e.shadowColor=o,e.shadowBlur=a,e.shadowOffsetX=0,e.shadowOffsetY=0),e.beginPath(),e.arc(i,n,t,0,2*Math.PI),e.fill(),e.closePath(),e.restore()},e.prototype.drawRect=function(e,t,i,n,o,r,a,s){if(void 0===r&&(r="#fff"),void 0===s&&(s=0),e.save(),a){var l=a.from,c=l[0],d=l[1],u=a.to,p=u[0],g=u[1],h=e.createLinearGradient(c,d,p,g);_.forEach(a.stops,function(e){return h.addColorStop(e[0],e[1])}),e.fillStyle=h}else e.fillStyle=r;s&&(e.shadowColor=r,e.shadowBlur=s,e.shadowOffsetX=0,e.shadowOffsetY=0),e.beginPath(),e.rect(n,o,t,i),e.fill(),e.closePath(),e.restore()},e.prototype.createSpriteCircle=function(e){var t=e.name,i=e.group,n=e.type,o=e.radius,r=e.color,a=e.gradient,s=e.blur,l=document.createElement("canvas"),c=l.getContext("2d");return l.width=l.height=2*(o+s),this.drawCircle(c,o,l.width/2,l.height/2,r,a),s&&StackBlur.canvasRGBA(c.canvas,0,0,l.width,l.height,s),{name:t,group:i,type:n,src:l}},e.prototype.createSpriteRect=function(e){var t=e.name,i=e.group,n=e.type,o=e.width,r=e.height,a=e.color,s=e.gradient,l=e.blur,c=document.createElement("canvas"),d=c.getContext("2d");return c.width=2*(o+l),c.height=2*(r+l),this.drawRect(d,o,r,l,l,a,s),l&&StackBlur.canvasRGBA(d.canvas,0,0,c.width,c.height,l),{name:t,group:i,type:n,src:c}},e.prototype.createShadowSprite=function(e,t,i){var n=document.createElement("canvas").getContext("2d"),o=e.height/5,r=e.width,a=o*(t*Math.PI/180);n.canvas.width=r+a+i,n.canvas.height=o+i;var s=this.drawTrapezoid("rgba(27,105,154)",r,o,0,o,a,i),l=this.drawTrapezoid("rgba(27,105,154)",r,o,o/1.68,o-10,a,.75*i);return n.globalAlpha=.06,n.drawImage(s,0,0),n.drawImage(l,0,0),{canvas:n.canvas,width:n.canvas.width,height:n.canvas.height,delta:a}},e.prototype.drawTrapezoid=function(e,t,i,n,o,r,a){var s=document.createElement("canvas").getContext("2d");return s.canvas.width=t+r+a,s.canvas.height=i+a,s.save(),s.translate(a/2,a/2),s.fillStyle=e,s.beginPath(),s.moveTo(r,n),s.lineTo(t,n),s.lineTo(t+r,o),s.lineTo(0,o),s.closePath(),s.fill(),s.restore(),a&&StackBlur.canvasRGBA(s.canvas,0,0,s.canvas.width,s.canvas.height,a),s.canvas},e}();angular.module("adiIntroInternal").service("backdropAnimationsCanvasUtils",E);var w=function(){return function(){this.bg={color:"#67a0bd",gradient:"linear-gradient(to bottom, #6ea2c8 0%, #93c8d9 17%, #93c8d9 26%, #629bb7 58%, #4c7e9e 74%, #487697 80%, #446786 92%)"},this.options={firstTime:{duration:.75},idle:{duration:.6,minDuration:5,maxDuration:10,heightPercentage:.85,offset:{x:10,y:5},mouseOffset:{starIdle4:5,starIdle3:3,starIdle2:1.4,starIdle1:1},amount:{starIdle1:20,starIdle2:7,starIdle3:4,starIdle4:2}},slide:{duration:1,repeat:0},blank:{duration:1.4},wait:{duration:4,notify:2,durationOffset:{star1:2.4,star2:2,star3:1.7,star4:1.4,star5:1.1,line1:2.3,line2:1.9,line3:1},amount:{star1:20,star2:10,star3:7,star4:2,star5:1,line1:2,line2:1,line3:1},distance:3},next:{show:{duration:1},hide:{duration:.8}},back:{show:{duration:.2},hide:{duration:.3}},resize:{hide:{duration:.3},show:{duration:.3}},scale:{duration:.5}},this.spriteData=[{name:"starIdle1",group:"stars",type:"rect",width:4,height:4,color:"rgba(255,255,255,0.15)",blur:0},{name:"starIdle2",group:"stars",type:"rect",width:8,height:8,color:"rgba(255,255,255,0.2)",blur:1},{name:"starIdle3",group:"stars",type:"rect",width:15,height:15,color:"rgba(255,255,255,0.3)",blur:2},{name:"starIdle4",group:"stars",type:"rect",width:30,height:30,color:"rgba(255,255,255,0.2)",blur:1},{name:"star1",group:"stars",type:"rect",width:4,height:4,color:"rgba(255,255,255,0.4)",blur:0},{name:"star2",group:"stars",type:"rect",width:8,height:8,color:"rgba(255,255,255,0.3)",blur:1},{name:"star3",group:"stars",type:"rect",width:15,height:15,color:"rgba(255,255,255,0.5)",blur:1},{name:"star4",group:"stars",type:"rect",width:30,height:30,color:"rgba(255,255,255,0.3)",blur:5},{name:"star5",group:"stars",type:"rect",width:80,height:80,color:"rgba(255,255,255,0.2)",blur:20},{name:"line1",group:"lines",type:"rect",width:200,height:2,gradient:{from:[0,0],to:[200,0],stops:[[0,"rgba(255,255,255,0.3)"],[1,"rgba(255,255,255, 0)"]]},blur:0},{name:"line2",group:"lines",type:"rect",width:300,height:3,gradient:{from:[0,0],to:[300,0],stops:[[0,"rgba(255,255,255,0.4)"],[1,"rgba(255,255,255, 0)"]]},blur:0},{name:"line3",group:"lines",type:"rect",width:400,height:3,gradient:{from:[0,0],to:[400,0],stops:[[0,"rgba(255,255,255,0.6)"],[1,"rgba(255,255,255, 0)"]]},blur:0},{name:"shadow",type:"circle",group:"shadows",radius:60,gradient:{from:[0,0],to:[0,60],stops:[[0,"rgba(0,0,0,1)"],[1,"rgba(0,0,0,0.3)"]]},blur:30}]}}();angular.module("adiIntroInternal").constant("backdropAnimationsConfig",new w);var C=function(){function e(e,t,i){var n=this;this.backdropAnimationsCanvasUtils=e,this.$q=t,this.flags=i,this.shadowOpacity=1,this.horizLineOut=function(e,t){var i=n.$q.defer(),o=e.layers,r=e.timelines,a=e.state,s=a.panel.prevDimensions,l=_.find(o.panelLayers,function(e){return"panel"===e.name}),c=_.find(o.panelLayers,function(e){return"shadow"===e.name});return r.transitionTimeline=r.transitionTimeline||new TimelineMax,r.transitionTimeline.to(l,t,{y:"+="+s.height/2,height:2,ease:Quint.easeIn},0).to(c,t,{alpha:0,height:30,y:"+="+(c.height/2-30),ease:Quint.easeIn},0).eventCallback("onComplete",function(e,t){e.panel.visible=!1,r.transitionTimeline=null,t.resolve()},[a,i]),i.promise},this.vertLineOut=function(e,t){var i=n.$q.defer(),o=e.layers,r=e.timelines,a=e.state,s=a.panel.prevDimensions,l=_.find(o.panelLayers,function(e){return"panel"===e.name}),c=_.find(o.panelLayers,function(e){return"shadow"===e.name});return r.transitionTimeline=r.transitionTimeline||new TimelineMax,r.transitionTimeline.to(l,.7*t,{x:"+="+s.width/2,width:2,ease:Quint.easeIn},0).to(c,.7*t,{x:s.x+s.width/2-15,alpha:0,width:30,height:30,y:"+="+(c.height/2-30),ease:Quint.easeIn},0).eventCallback("onComplete",function(e,t){e.panel.visible=!1,r.transitionTimeline=null,t.resolve()},[a,i]),i.promise},this.horizLineCenterIn=function(e,t){var i=e.layers,o=e.timelines,r=e.state,a=n.$q.defer(),s=r.panel.nextDimensions,l=n.getPanelLayer(s),c=n.getPanelShadowLayer(e,s);return i.panelLayers=[l,c],o.transitionTimeline=o.transitionTimeline||new TimelineMax,o.transitionTimeline.set(l,{x:0,y:0,translateX:s.x+s.width/2,translateY:s.y,width:2,rotate:0,alpha:1}).to(l,.4*t,{bezier:{type:"cubic",values:[{translateX:s.x+s.width/2,translateY:s.y},{translateX:s.x+3*s.width/4,translateY:s.y},{translateX:s.x+s.width,translateY:s.y+s.height/4},{translateX:s.x+s.width,translateY:s.y+s.height/2}]},rotate:Math.PI/2,height:s.width,ease:Cubic.easeOut}).set(l,{translateX:s.x,width:s.width,height:2,rotate:0}).set(c,{height:30,y:"+="+(c.height/2-30)}).to(l,.6*t,{translateY:s.y,height:s.height,ease:Expo.easeInOut},"showPanel").to(c,.6*t,{alpha:n.shadowOpacity,height:c.height,y:"-="+(c.height/2-30),ease:Expo.easeInOut},"showPanel").eventCallback("onComplete",function(e,t){e.panel.visible=!0,o.transitionTimeline=null,t.resolve()},[r,a]),a.promise},this.vertLineRightIn=function(e,t){var i=e.canvas,o=e.layers,r=e.timelines,a=e.state,s=n.$q.defer(),l=a.panel.nextDimensions,c=n.getPanelLayer(l),d=n.getPanelShadowLayer(e,l);return o.panelLayers=[c,d],r.transitionTimeline=r.transitionTimeline||new TimelineMax,r.transitionTimeline.set(c,{x:0,y:0,rotate:0,height:2,alpha:1,translateX:l.x,translateY:l.y}).to(c,.4*t,{bezier:{type:"cubic",values:[{translateX:l.x,translateY:l.y+l.height/2},{translateX:l.x,translateY:l.y+l.height/4},{translateX:l.x+l.width/2,translateY:l.y},{translateX:l.x+l.width,translateY:l.y}]},rotate:Math.PI/2,width:l.height,height:2,ease:Cubic.easeOut}).set(c,{height:l.height,width:2,rotate:0}).set(d,{width:30,x:l.x+1.075*l.width,y:"+="+(d.height/2-30)}).to(c,.6*t,{translateX:l.x,width:l.width,ease:Expo.easeInOut},"showPanel").to(d,.6*t,{alpha:n.shadowOpacity,ease:Cubic.easeIn},"showPanel").to(d,.6*t,{x:(i.width-d.width)/2,y:"-="+(d.height/2-30),width:d.width,ease:Expo.easeInOut},"showPanel").eventCallback("onComplete",function(e,t){e.panel.visible=!0,r.transitionTimeline=null,t.resolve()},[a,s]),s.promise},this.fadeOut=function(e,t,i){var o=n.$q.defer(),r=e.layers,a=e.timelines,s=e.state;return a.transitionTimeline=a.transitionTimeline||new TimelineMax,a.transitionTimeline.to(r.panelLayers,t,{alpha:0,ease:i||Sine.easeOut},0).eventCallback("onComplete",function(e,t){e.panel.visible=!1,a.transitionTimeline=null,r.panelLayers=[],t.resolve()},[s,o]),o.promise},this.cutOut=function(e,t){var i=n.$q.defer(),o=e.layers,r=e.timelines,a=e.state;return r.transitionTimeline=r.transitionTimeline||new TimelineMax,r.transitionTimeline.to(o.panelLayers,.1*t,{},0).eventCallback("onComplete",function(e,t){e.panel.visible=!1,r.transitionTimeline=null,o.panelLayers=[],t.resolve()},[a,i]),i.promise},this.fadeIn=function(e,t,i){var o=e.layers,r=e.timelines,a=e.state,s=n.$q.defer(),l=a.panel.nextDimensions,c=n.getPanelLayer(l),d=n.getPanelShadowLayer(e,l);return o.panelLayers=[c,d],r.transitionTimeline=r.transitionTimeline||new TimelineMax,r.transitionTimeline.to(c,t,{alpha:1,ease:i||Sine.easeOut},0).to(d,t,{alpha:n.shadowOpacity,ease:i||Sine.easeOut},0).eventCallback("onComplete",function(e,t){e.panel.visible=!0,r.transitionTimeline=null,t.resolve()},[a,s]),s.promise},this.scale=function(e,t,i){var o=e.layers,r=e.timelines,a=e.state,s=n.$q.defer(),l=a.panel.nextDimensions,c=_.find(o.panelLayers,function(e){return"panel"===e.name}),d=_.find(o.panelLayers,function(e){return"shadow"===e.name}),u=n.getPanelLayer(l),p=n.getPanelShadowLayer(e,l);return r.transitionTimeline=r.transitionTimeline||new TimelineMax,r.transitionTimeline.to(c,t,_.assign({ease:i||Sine.easeOut},_.pick(u,["x","y","width","height"])),0).to(d,t,_.assign({ease:i||Sine.easeOut},_.pick(p,["x","y","width","height"])),0).eventCallback("onComplete",function(e,t){e.panel.visible=!0,r.transitionTimeline=null,t.resolve()},[a,s]),s.promise},this.floatIn=function(e,t){var i=e.layers,o=e.timelines,r=e.state.panel.nextDimensions,a=n.fadeIn(e,t,Quad.easeIn);return o.transitionTimeline.from(i.panelLayers,t,{x:"-="+r.width/2,ease:Quad.easeOut},0),a},this.floatOut=function(e,t){var i=e.layers,o=e.timelines,r=e.state.panel.prevDimensions,a=n.fadeOut(e,t,Quad.easeInOut);return o.transitionTimeline.to(i.panelLayers,t,{x:"+="+r.width/2,ease:Quad.easeIn},0),a},this.fadeAndScaleIn=function(e,t){var i=e.layers,o=e.timelines,r=e.state.panel.nextDimensions,a=n.fadeIn(e,t,Quint.easeIn);return o.transitionTimeline.from(i.panelLayers,t,{width:"-="+.1*r.width,height:"-="+.1*r.height,x:"+="+.05*r.width,y:"+="+.05*r.height,ease:Quad.easeOut},0),a},this.particlesIn=function(e,t){var i=e.layers,o=e.timelines,r=e.state,a=n.$q.defer(),s=r.panel.nextDimensions,l=s.x,c=s.y,d=s.width,u=s.height,p={width:70,height:70},g={width:70,height:70},h={width:35,height:35},m={width:45,height:45},f={width:60,height:60},v={width:70,height:70},S=[{name:"cube",params:[g.width,g.height,0,0,"#fff"]}],y={},T=[{name:"a",canvas:"cube",x:l+.15*d,y:c+.15*u,width:m.width,height:m.height},{name:"b",canvas:"cube",x:l+.7*d,y:c+.15*u,width:m.width,height:m.height},{name:"c",canvas:"cube",x:l+.9*d,y:c+.3*u,width:m.width,height:m.height},{name:"d",canvas:"cube",x:l+.05*d,y:c+.5*u,width:h.width,height:h.height},{name:"e",canvas:"cube",x:l+.2*d,y:c+.6*u,width:f.width,height:f.height},{name:"g",canvas:"cube",x:l+.7*d,y:c+.55*u,width:h.width,height:h.height},{name:"h",canvas:"cube",x:l+.05*d,y:c+.9*u,width:h.width,height:h.height},{name:"i",canvas:"cube",x:l+.55*d,y:c+.85*u,width:h.width,height:h.height},{name:"j",canvas:"cube",x:l+.1*d,y:c+.7*u,width:v.width,height:v.height},{name:"k",canvas:"cube",x:l+.95*d,y:c+.65*u,width:h.width,height:h.height}];_.forEach(S,function(e){var t,i=n.getNewCanvasCtx(e.params[0],e.params[1]);(t=n.backdropAnimationsCanvasUtils.drawRect).call.apply(t,[n,i].concat(e.params)),y[e.name]=i.canvas});var b=_.map(T,function(e){var t=y[e.canvas];return{x:e.x,y:e.y,width:e.width,height:e.height,alpha:1,name:e.name,image:t}}),I=n.getPanelLayer(r.panel.nextDimensions),P=n.getPanelShadowLayer(e,r.panel.nextDimensions);i.panelLayers=[I,P].concat(b);var M=(n.flags.lodash4?_.keyBy:_[String("indexBy")])(i.panelLayers,"name"),E=Quart.easeOut,w=Quint.easeOut,C=.6*t,A=.4*t;return o.transitionTimeline=o.transitionTimeline||new TimelineMax,o.transitionTimeline.set(I,{width:p.width,height:p.height,alpha:1}).addLabel("particles",0).addLabel("panel","particles+="+C).to(b,C,{alpha:.2,ease:E},"particles+="+.5*C).from(M.a,t,{x:l+.3*d,y:c+.25*u,ease:E},"particles").from(M.b,t,{x:l+.62*d,y:c+.35*u,ease:E},"particles").from(M.c,t,{x:l+.8*d,y:c+.33*u,ease:E},"particles").from(M.d,t,{x:l+.41*d,y:c+.48*u,ease:E},"particles").from(M.e,t,{x:l+.3*d,y:c+.55*u,ease:E},"particles").from(M.g,t,{x:l+.6*d,y:c+.5*u,ease:E},"particles").from(M.h,t,{x:l+.38*d,y:c+.7*u,ease:E},"particles").from(M.i,t,{x:l+.6*d,y:c+.7*u,ease:E},"particles").from(M.j,t,{x:l+.3*d,y:c+.6*u,ease:E},"particles").from(M.k,t,{x:l+.8*d,y:c+.55*u,ease:E},"particles").fromTo(I,C+A/2,{x:l+.46*d,y:c+.42*u},{x:l+.1*d,y:c+.1*u,width:.8*d,height:.8*u,ease:SlowMo.ease.config(.1,.6,!1)},0).to(I,A/2,{x:l,y:c,width:d,height:u,ease:w},C+A/2).to(P,.75*A,{delay:.25*A,alpha:n.shadowOpacity,ease:w},"panel").from(P,A,{height:30,width:30,x:l+d/2-15,ease:w},"panel").eventCallback("onComplete",function(e,t,i,n,o,r){i.panel.visible=!0,e.transitionTimeline=null,t.panelLayers=[o,r],n.resolve()},[o,i,r,a,I,P]),a.promise},this.cornersOut=function(e,t){var i=e.layers,o=e.timelines,r=e.state,a=n.$q.defer(),s=r.panel.prevDimensions,l=s.x,c=s.y,d=s.width,u=s.height,p=r.panel.nextDimensions,g=c+u,h=l+d,m=Expo.easeOut,f=t/2,v=Math.min(d,u),S=Math.sqrt(Math.pow((v-200)/2,2)+Math.pow((v-200)/2,2)),y=Math.asin((u-200)/2/S),T=[{name:"particle",params:[100,100,0,0,"#fff"]},{name:"line",params:[S,2,0,0,"#fff"]}],b=[{name:"particleTL",canvas:"particle",x:l,y:c},{name:"particleTR",canvas:"particle",x:h-100,y:c},{name:"particleBR",canvas:"particle",x:h-100,y:g-100},{name:"particleBL",canvas:"particle",x:l,y:g-100},{name:"lineTL",canvas:"line",x:0,y:0,rotate:y,translateX:l+100,translateY:c+100},{name:"lineTR",canvas:"line",x:0,y:0,rotate:Math.PI-y,translateX:h-100,translateY:c+100},{name:"lineBR",canvas:"line",x:0,y:0,rotate:Math.PI+y,translateX:h-100,translateY:g-100},{name:"lineBL",canvas:"line",x:0,y:0,rotate:2*Math.PI-y,translateX:l+100,translateY:g-100}],I={};_.forEach(T,function(e){var t,i=n.getNewCanvasCtx(e.params[0],e.params[1]);(t=n.backdropAnimationsCanvasUtils.drawRect).call.apply(t,[n,i].concat(e.params)),I[e.name]=i.canvas});var P=_.map(b,function(e){var t=I[e.canvas];return{x:e.x,y:e.y,width:t.width,height:t.height,alpha:1,rotate:e.rotate,translateX:e.translateX,translateY:e.translateY,name:e.name,image:t}});i.panelLayers=i.panelLayers.concat(P);var M=(n.flags.lodash4?_.keyBy:_[String("indexBy")])(i.panelLayers,"name"),E=[M.lineTL,M.lineTR,M.lineBR,M.lineBL],w=[M.particleTL,M.particleTR,M.particleBR,M.particleBL];return o.transitionTimeline=o.transitionTimeline||new TimelineMax,o.transitionTimeline.set(M.panel,{alpha:0,delay:.1}).to(M.shadow,t/4,{alpha:0},"start").fromTo(E,t,{width:.75*S},{width:0,ease:m},"start").to(w,f,{width:16,height:16,ease:m},"start").to(M.particleTR,f,{x:h-16,ease:m},"start").to(M.particleBR,f,{x:h-16,y:g-16,ease:m},"start").to(M.particleBL,f,{y:g-16,ease:m},"start").to(M.lineTL,f,{translateX:l+16,translateY:c+16,ease:m},"start").to(M.lineTR,f,{translateX:h-16,translateY:c+16,ease:m},"start").to(M.lineBR,f,{translateX:h-16,translateY:g-16,ease:m},"start").to(M.lineBL,f,{translateX:l+16,translateY:g-16,ease:m},"start").eventCallback("onComplete",function(e,t,i,n){i.panel.visible=!1,e.transitionTimeline=null,n.resolve()},[o,i,r,a]),_.isEqual(r.panel.prevDimensions,r.panel.nextDimensions)||o.transitionTimeline.to(M.particleTL,.2*t,{x:p.x,y:p.y,ease:Linear.easeNone},t).to(M.particleTR,.2*t,{x:p.x+p.width-16,y:p.y,ease:Linear.easeNone},t).to(M.particleBR,.2*t,{x:p.x+p.width-16,y:p.y+p.height-16,ease:Linear.easeNone},t).to(M.particleBL,.2*t,{x:p.x,y:p.y+p.height-16,ease:Linear.easeNone},t),a.promise},this.cornersIn=function(e,t){var i=e.canvas,o=e.layers,r=e.timelines,a=e.state,s=n.$q.defer(),l=a.panel.nextDimensions,c=l.x,d=l.y,u=l.width,p=l.height,g=d+p,h=c+u,m=Expo.easeInOut,f=t/2,v=[{name:"particle",params:[16,16,0,0,"#fff"]},{name:"hLine",params:[u,1,0,0,"#fff"]},{name:"vLine",params:[1,p,0,0,"#fff"]}],S=[{name:"particleTL",canvas:"particle",x:c,y:d},{name:"particleTR",canvas:"particle",x:h-16,y:d},{name:"particleBR",canvas:"particle",x:h-16,y:g-16},{name:"particleBL",canvas:"particle",x:c,y:g-16},{name:"lineT",canvas:"hLine",x:c+32,y:d+8},{name:"lineR",canvas:"vLine",x:h-8,y:d+32},{name:"lineB",canvas:"hLine",x:h-16,y:g-8},{name:"lineL",canvas:"vLine",x:c+8,y:g-16}],y={};_.forEach(v,function(e){var t,i=n.getNewCanvasCtx(e.params[0],e.params[1]);(t=n.backdropAnimationsCanvasUtils.drawRect).call.apply(t,[n,i].concat(e.params)),y[e.name]=i.canvas});var T=_.map(S,function(e){var t=y[e.canvas];return{x:e.x,y:e.y,width:t.width,height:t.height,alpha:1,name:e.name,image:t}}),b=n.getPanelLayer(a.panel.nextDimensions),I=n.getPanelShadowLayer(e,a.panel.nextDimensions);o.panelLayers=[b,I].concat(T);var P=(n.flags.lodash4?_.keyBy:_[String("indexBy")])(o.panelLayers,"name"),M=[P.lineT,P.lineR,P.lineB,P.lineL];return r.transitionTimeline=r.transitionTimeline||new TimelineMax,r.transitionTimeline.set(M,{width:1,height:1}).to(P.particleTL,f,{x:c+u-16,ease:m},"particles").to(P.particleTR,f,{y:d+p-16,ease:m},"particles").to(P.particleBR,f,{x:c,ease:m},"particles").to(P.particleBL,f,{y:d,ease:m},"particles").to(P.lineT,f,{width:u-32,ease:m},"particles").to(P.lineR,f,{height:p-32,ease:m},"particles").to(P.lineB,f,{x:c+16,width:u-32,ease:m},"particles").to(P.lineL,f,{y:d+16,height:p-32,ease:m},"particles").addLabel("hideLines").to(P.lineT,f,{x:c+u-16,width:0,ease:m},"hideLines").to(P.lineR,f,{y:d+p-16,height:0,ease:m},"hideLines").to(P.lineB,f,{width:0,ease:m},"hideLines").to(P.lineL,f,{height:0,ease:m},"hideLines").fromTo(b,f,{width:u/2,height:p/2,x:c+u/4,y:d+p/4,alpha:.5,immediateRender:!1},{x:c,y:d,width:u,height:p,alpha:1,ease:Expo.easeOut},"hideLines+=0.2").fromTo(I,f,{x:c+u/4,width:u/2,height:p/8},{x:(i.width-I.width)/2,width:I.width,height:I.height,alpha:n.shadowOpacity,ease:Expo.easeOut},"hideLines+=0.2").eventCallback("onComplete",function(e,t,i,n,o,r){i.panel.visible=!0,e.transitionTimeline=null,t.panelLayers=[o,r],n.resolve()},[r,o,a,s,b,I]),s.promise}}return e.$inject=["backdropAnimationsCanvasUtils","$q","flags"],e.prototype.getNewCanvasCtx=function(e,t){var i=document.createElement("canvas"),n=i.getContext("2d");return i.width=e,i.height=t,n},e.prototype.getPanelLayer=function(e){var t=this.getNewCanvasCtx(e.width,e.height);return this.backdropAnimationsCanvasUtils.drawRect(t,e.width,e.height,0,0,"#fff"),{x:e.x,y:e.y,width:e.width,height:e.height,alpha:0,translateX:0,translateY:0,rotate:0,name:"panel",image:t.canvas}},e.prototype.getPanelShadowLayer=function(e,t){var i=e.canvas,n=this.backdropAnimationsCanvasUtils.createShadowSprite(t,45,45);return{x:(i.width-n.width)/2,y:.8*i.height,width:n.width,height:n.height,alpha:0,name:"shadow",image:n.canvas}},e}();angular.module("adiIntroInternal").service("backdropAnimationsTransitions",C);var A=function(){function e(e,t,i,n,o,r,a){var s=this;this.backdropAnimationsConfig=e,this.backdropAnimationsCanvasUtils=t,this.backdropAnimationsTransitions=i,this.$q=n,this.clientTopology=o,this.flags=r,this.$window=a,this.trackMouseMovement=function(e){var t=e.clientX,i=e.clientY,n=s.scene,o=n.layers,r=n.canvas,a=n.state,l=s.config.options.idle.mouseOffset,c=1-t/(r.width/2),d=1-i/(r.height/2);_.forEach(o.idleLayers,function(e){e.translateX=c*l[e.name],e.translateY=d*l[e.name]}),a.drawOnTicker=!0},this.config=_.merge({},e),this.scene=null}return e.$inject=["backdropAnimationsConfig","backdropAnimationsCanvasUtils","backdropAnimationsTransitions","$q","clientTopology","flags","$window"],e.prototype.init=function(e,t){var i=this;this.setBg(e),this.scene=this.setScene(this.setCanvas(e),this.config.spriteData),TweenMax.ticker.addEventListener("tick",this.drawLayers,this),this.setDimensions(t);var n=t?this.play("idle"):this.$q.when();return this.scene.state.transitionDeferred=n.then(function(){return t?i.runPanelAnimation(i.config.options.firstTime.duration,"firstTime"):i.$q.when()}),this.scene.state.transitionDeferred},e.prototype.play=function(e,t){var i=this;if(void 0===e&&(e=null),this.scene){var n,o=this.config.options,r=this.scene.state,a=this.$q,s=r.transitionDeferred;switch(this.setDimensions(t),e){case"next":n=r.panel.visible?s.then(function(){return i.runPanelAnimation(o.next.hide.duration,"nextOut")}).then(function(){return i.runPanelAnimation(o.next.show.duration,"nextIn")}):s.then(function(){return i.runPanelAnimation(o.next.show.duration,"firstTime")});break;case"back":n=r.panel.visible?s.then(function(){return i.runPanelAnimation(o.back.hide.duration,"backOut")}).then(function(){return a.all([i.runPanelAnimation(o.back.show.duration,"backIn"),i.showIdleLayers(o.idle.duration,o.idle.amount),i.parallaxIdleOnMouse()])}):s.then(function(){return a.all([i.runPanelAnimation(o.back.show.duration,"firstTime"),i.showIdleLayers(o.idle.duration,o.idle.amount),i.parallaxIdleOnMouse()])});break;case"skip":n=this.play("next");break;case"wait":n=s.then(function(){return a.all([i.runPanelAnimation(o.next.hide.duration,"blankOut"),i.hideIdleLayers(o.next.hide.duration)]).then(function(){return a.all([i.showIdleLayers(o.idle.duration,o.wait.amount),i.infiniteSlideIdleLayer(o.wait.duration)])})});break;case"blank":n=s.then(function(){return i.runPanelAnimation(o.next.hide.duration,"blankOut")}).then(function(){return i.stopParallaxOnMouse()}).then(function(){return i.hideIdleLayers(o.blank.duration)});break;case"idle":n=s.then(function(){return a.all([i.showIdleLayers(o.idle.duration,o.idle.amount),i.parallaxIdleOnMouse()])})}return r.transitionDeferred=n,r.transitionDeferred}},e.prototype.resize=function(e){var t=this,i=this.scene.state;return i.resizeDeferred?this.resizeDebounced(e):(i.resizeDeferred=this.$q.defer(),this.resizeDebounced=_.debounce(function(e){t.setDimensions(e),i.resizeDeferred.resolve()},250,{leading:!1,trailing:!0}),this.resizeDebounced(e),i.resizeNotifyDeferred=i.transitionDeferred.then(function(){return i.resizeDeferred.promise}).then(function(){return t.delayedResize()})),i.resizeNotifyDeferred},e.prototype.scale=function(e,t){return void 0===t&&(t=this.config.options.scale.duration),this.scene.state.panel.visible?(this.setDimensions(e),this.runPanelAnimation(t,"scale")):this.$q.when()},e.prototype.delayedResize=function(){var e=this,t=this.config.options,i=this.scene,n=i.canvas,o=i.state,r=n.parentNode;return o.resizeDeferred=null,this.setCanvasSize(r.offsetWidth,r.offsetHeight),o.panel.visible?this.runPanelAnimation(t.resize.hide.duration,"resizeOut").then(function(){return e.runPanelAnimation(t.resize.show.duration,"resizeIn")}):this.$q.when()},e.prototype.dispose=function(){if(this.stopParallaxOnMouse(),TweenMax.ticker.removeEventListener("tick",this.drawLayers),this.scene){var e=this.scene,t=e.state,i=e.timelines;return this.flags.lodash4?_(i).compact().forEach(function(e){return e.kill().clear()}):_(i).compact().forEach(function(e){return e.kill().clear()}).value(),_.get(t,["transitionDeferred","reject"])&&t.transitionDeferred.reject(),_.get(t,["resizeDeferred","reject"])&&t.resizeDeferred.reject(),_.get(t,["resizeNotifyDeferred","reject"])&&t.resizeNotifyDeferred.reject(),this.scene=null,this.$q.when()}},e.prototype.setBg=function(e){var t=this.config.bg,i=t.imageId,n=t.color,o=t.gradient,r=Math.min(window.screen.width,2048),a=Math.min(window.screen.height,1108),s=i?"url("+this.clientTopology.mediaUrl+"/"+i+"/v1/fill/w_"+r+",h_"+a+",al_c,q_90/"+i+")":"";e.style.background=n+" "+(o||s)+" no-repeat 50% 50% / cover"},e.prototype.setScene=function(e,t){var i=this.backdropAnimationsCanvasUtils.createSprite(t),n={drawOnTicker:!1,nextTransitionIndex:0,transitionDeferred:this.$q.when(),resizeDeferred:null,resizeNotifyDeferred:null,globalAlpha:1,panel:{visible:!1,prevDimensions:{},nextDimensions:{}}},o=document.createElement("canvas");return o.width=e.width,o.height=e.height,{sprite:i,layers:{idleLayers:[],panelLayers:[]},timelines:{idleTimeline:null,transitionTimeline:null,slideTimeline:null,alphaTimeline:null},canvas:e,offScreenCanvas:o,state:n}},e.prototype.setCanvas=function(e){var t=document.createElement("canvas");return t.width=e.offsetWidth,t.height=e.offsetHeight,t.id="backdrop-canvas",e.appendChild(t),t},e.prototype.setCanvasSize=function(e,t){var i=this.scene,n=i.canvas,o=i.offScreenCanvas;n.width=o.width=e,n.height=o.height=t},e.prototype.setDimensions=function(e){e&&(this.scene.state.panel.prevDimensions=this.scene.state.panel.nextDimensions,this.scene.state.panel.nextDimensions=e)},e.prototype.drawLayers=function(){var e=this.scene,t=e.layers,i=e.state,n=e.timelines,o=e.canvas,r=e.offScreenCanvas;if(_.some(n,function(e){return e&&e.isActive()})&&(i.drawOnTicker=!0),i.drawOnTicker){_.every(n,function(e){return!e||!e.isActive()})&&(i.drawOnTicker=!1);var a=r.getContext("2d"),s=o.getContext("2d");a.clearRect(0,0,o.width,o.height),s.clearRect(0,0,o.width,o.height),i.globalAlpha>0&&(_.values(t).forEach(function(e){e.forEach(function(e){if(a.save(),e.alpha>0){a.globalAlpha=e.alpha;var t=_.isNumber(e.scaleX)?e.scaleX:1,i=_.isNumber(e.scaleY)?e.scaleY:1,n=e.rotate||0,o=_.isNumber(e.translateX)?e.translateX:0,r=_.isNumber(e.translateY)?e.translateY:0;a.setTransform(Math.cos(n)*t,Math.sin(n),-Math.sin(n),Math.cos(n)*i,o,r),e.source?a.drawImage(e.image,e.source.x||0,e.source.y||0,e.source.width||e.width,e.source.height||e.height,e.x,e.y,e.width,e.height):a.drawImage(e.image,e.x,e.y,e.width,e.height),a.restore()}})}),s.globalAlpha=i.globalAlpha,s.drawImage(a.canvas,0,0))}},e.prototype.stopParallaxOnMouse=function(){return this.$window.removeEventListener("mousemove",this.trackMouseMovement),this.$q.when()},e.prototype.parallaxIdleOnMouse=function(){return this.$window.addEventListener("mousemove",this.trackMouseMovement,!1),this.$q.when()},e.prototype.runPanelAnimation=function(e,t){return this.getAnimationFunc(t)(this.scene,e)},e.prototype.getAnimationFunc=function(e){var t=this.backdropAnimationsTransitions,i=[{out:t.horizLineOut,inn:t.vertLineRightIn},{out:t.cornersOut,inn:t.cornersIn},{out:t.vertLineOut,inn:t.horizLineCenterIn},{out:t.cutOut,inn:t.particlesIn}];switch(e){case"nextIn":var n=i[this.scene.state.nextTransitionIndex].inn;return this.scene.state.nextTransitionIndex=(this.scene.state.nextTransitionIndex+1)%i.length,n;case"nextOut":return i[this.scene.state.nextTransitionIndex].out;case"firstTime":return t.fadeAndScaleIn;case"blankOut":return t.fadeOut;case"backIn":return t.floatIn;case"backOut":return t.floatOut;case"resizeIn":return t.fadeIn;case"resizeOut":return t.fadeOut;case"scale":return t.scale}},e.prototype.showIdleLayers=function(e,t){void 0===e&&(e=1);var i=this.$q.defer(),n=this.scene,o=n.layers,r=n.timelines,a=n.canvas,s=this.config.options;return o.idleLayers.length?(i.resolve(),i.promise):(r.alphaTimeline=r.alphaTimeline||new TimelineMax,o.idleLayers=this.createIdleLayers(a.width,a.height*(s.idle.heightPercentage||1),t),r.alphaTimeline.set(o.idleLayers,{alpha:0}).to(o.idleLayers,e,{alpha:1}).eventCallback("onComplete",function(e,t){t.alphaTimeline=null,e.resolve()},[i,r]),this.createIdleLayersTimeline(),i.promise)},e.prototype.hideIdleLayers=function(e){void 0===e&&(e=1);var t=this.$q.defer(),i=this.scene,n=i.layers,o=i.timelines;return n.idleLayers.length?(o.alphaTimeline=o.alphaTimeline||new TimelineMax,o.alphaTimeline.to(n.idleLayers,e,{alpha:0}).eventCallback("onComplete",function(e,t,i){this.stopInfiniteSlide(),i.idleTimeline&&(i.idleTimeline.pause().kill(),i.idleTimeline=null),i.alphaTimeline=null,t.idleLayers=[]},[t,n,o],this).call(function(e){return e.resolve()},[t],this,.05),t.promise):(t.resolve(),t.promise)},e.prototype.infiniteSlideIdleLayer=function(e){void 0===e&&(e=1);var t=this.$q.defer(),i=this.scene,n=i.layers,o=i.timelines,r=i.canvas,a=this.config.options.wait.durationOffset,s=this.config.options.wait.distance;if(!n.idleLayers.length)return t.resolve(),t.promise;if(o.slideTimeline){if(o.slideTimeline.isActive())return t.resolve(),t.promise;o.slideTimeline.progress(1).clear()}o.slideTimeline=new TimelineMax;var l=this.createIdleLayers(r.width*(s-1),r.height,this.config.options.wait.amount,r.width),c=n.idleLayers.map(function(e){return _.assign(_.omit(e,"_gsTweenID"),{x:e.x+r.width*s,alpha:1})});return n.idleLayers=n.idleLayers.concat(l,c),n.idleLayers.forEach(function(t){o.slideTimeline.fromTo(t,e*a[t.name],{x:t.x},{x:"-="+r.width*s,ease:Linear.easeNone,repeat:-1},0)}),o.slideTimeline.call(function(){return t.resolve()},[t],null,this.config.options.wait.notify),t.promise},e.prototype.stopInfiniteSlide=function(){var e=this.scene,t=e.layers,i=e.timelines,n=e.canvas;return i.slideTimeline&&(t.idleLayers=t.idleLayers.filter(function(e){return e.x>=0&&e.x<=n.width+e.width}),i.slideTimeline&&(i.slideTimeline.pause().kill(),i.slideTimeline=null)),this.$q.when()},e.prototype.createIdleLayersTimeline=function(){var e=this,t=this.scene,i=t.timelines,n=t.layers;i.idleTimeline=i.idleTimeline||new TimelineMax,i.idleTimeline.clear(),i.idleTimeline.autoRemoveChildren=!0,_.forEach(n.idleLayers,function(t,n){return e.createSingleLayerTweens(t,i.idleTimeline)})},e.prototype.createSingleLayerTweens=function(e,t){var i=this,n=this.config.options,o=(_.random(0,1,!1)?-1:1)*e.offset.x,r=(_.random(0,1,!1)?-1:1)*e.offset.y,a=_.random(n.idle.minDuration,n.idle.maxDuration,!1);t.to(e,a/2,{y:"+="+r,repeat:1,yoyo:!0,ease:Sine.easeInOut},0).to(e,a,{x:"+="+o,repeat:0,ease:Sine.easeInOut,onComplete:function(){i.scene&&i.createIdleLayersTimeline()},onCompleteScope:this},0)},e.prototype.createIdleLayers=function(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r=this.scene.sprite,a=this.config.options,s=[];return _.forEach(i,function(e,t){return s=s.concat(Array(e).fill(t))}),_.map(s,function(i){var s=r.find(function(e){return e.name===i}).src;return{x:_.random(s.width,e-s.width,!1)+n,y:_.random(s.height,t-s.height,!1)+o,width:s.width,height:s.height,alpha:1,name:i,image:s,offset:{x:a.idle.offset.x,y:a.idle.offset.y}}})},e}();angular.module("adiIntroInternal").service("backdropAnimations",A);var L=function(){function e(e){var t=this;this.backdropAnimations=e;var i=document.querySelector("nav"),n=document.querySelector("#backdrop");console.log(n),this.backdropAnimations.init(n).then(function(){return console.log("init done")}),window.addEventListener("resize",function(){t.backdropAnimations.resize({width:600,height:600,x:(window.innerWidth-600)/2,y:(window.innerHeight-600)/2}).then(function(){return console.log("resize done")})}),i.addEventListener("click",function(e){switch(console.log(e.target.id),e.target.id){case"next":t.backdropAnimations.play("next",{width:800,height:500,x:(window.innerWidth-800)/2,y:(window.innerHeight-500)/2}).then(function(){return console.log("next done")});break;case"back":t.backdropAnimations.play("back",{width:800,height:300,x:(window.innerWidth-800)/2,y:(window.innerHeight-300)/2}).then(function(){return console.log("back done")});break;case"skip":t.backdropAnimations.play("skip",{width:400,height:200,x:(window.innerWidth-400)/2,y:(window.innerHeight-200)/2}).then(function(){return console.log("skip done")});break;case"blank":t.backdropAnimations.play("blank").then(function(){return console.log("blank done")});break;case"wait":t.backdropAnimations.play("wait").then(function(){return console.log("wait done")});break;case"idle":t.backdropAnimations.play("idle").then(function(){return console.log("idle done")})}})}return e.$inject=["backdropAnimations"],e}();angular.module("adiIntroInternal").component("backdropPlayground",{templateUrl:"views/backdrop-playground.html",controller:L});try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/common/file-upload-select.html","<input accept='image/png ,image/gif, image/jpg' data-hook='file-upload' style='display:none' type='file'>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/common/intro-skip-button.html","<button class='empty-button' data-hook='skip' ng-attr-type='button' ng-click='$ctrl.handleClick()'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n</button>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/common/intro-back-button.html","<div class='intro-back-button'>\n<button data-hook='back' ng-attr-type='button' ng-click='$ctrl.handleClick()'>\n<cc-svg-icon class='back-arrow-icon' icon='misc:longarrow'></cc-svg-icon>\n<span class='button-text back-button' translate='intro.back-button'></span>\n</button>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/common/intro-next-button.html","<button class='p9-primary next-button' data-hook='next' focus-if='$ctrl.focusIf' ng-attr-type='button' ng-class='{&#39;-disabled&#39;: $ctrl.isDisabled}' ng-click='$ctrl.handleClick()' ng-disabled='$ctrl.isDisabled'>\n<span class='button-text' translate='intro.next-button'></span>\n</button>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/common/category-search.html","<div class='category-search'>\n<form class='search-form b01-big-text-field -relative' data-hook='type-form' ng-submit='$ctrl.onSubmit()'>\n<md-autocomplete data-hook='input-container' dont-store-matches='$ctrl.dontStoreMatches' hidden-override='$ctrl.isDropdownSuggestionsHidden' intro-md-autocomplete intro-md-disable-on-resize='false' intro-md-loaded='$ctrl.isListLoaded()' intro-md-on-select='$ctrl._onSelectedFromList($term)' md-autofocus='true' md-autoselect='false' md-delay='100' md-input-name='businessTypeInput' md-item-text='$ctrl.getDisplayText(category)' md-items='category in $ctrl.search()' md-menu-class='c01-big-list' md-menu-container-class='{{::$ctrl.acOptionsContainerClass}}' md-no-cache='true' md-search-changed='$ctrl._onSearchChanged($term, $matches)' md-search-text='$ctrl.searchTerm' md-select-on-focus='true' md-select-on-match='true' md-selected-item='$ctrl.selected' placeholder='{{::($ctrl.flags.newIntroPlaceholders ? $ctrl.$translate.instant(&#39;intro.category-search.input-placeholder&#39;) : &#39;&#39;)}}'>\n<md-item-templates data-hook='search-result-entry' intro-md-item-disabled='{{category.isTitle}}' ng-class='{&quot;is-related&quot;: category.isRelated, &quot;isExactMatch&quot;: category.isExactMatch, &quot;fuzzy-result&quot;: $ctrl.flags.AdiFuzzinessSupport &amp;&amp; !category.isRelated &amp;&amp; !category.isExactMatch}' ng-click='$ctrl.itemClicked($event, category.isTitle)' ng-mouseenter='$ctrl.relatedResultsEnter(category.isTitle)' ng-mouseleave='$ctrl.relatedResultsLeave()'>\n<div class='item-text' md-highlight-flags='gi' md-highlight-text='$ctrl.getHighlightText(category)'>{{:: $ctrl.getDisplayText(category) }}</div>\n</md-item-templates>\n</md-autocomplete>\n<i class='cc-icon-search-intro'></i>\n</form>\n<div cc-scrollbar class='examples faded thin-scrollbar' data-hook='search-example-label' ng-if='!$ctrl.searchTerm'>\n<ul class='md-autocomplete-suggestions examplesList c01-big-list'>\n<li class='exampleTitle intro-md-item-disabled'>{{::'intro.category-search.suggestions-label' | translate}}</li>\n<li class='exampleItem' ng-class='{&quot;is-related&quot;: true, &quot;isExactMatch&quot;: false}' ng-click='$ctrl._onExampleClick($event)' ng-mouseenter='$ctrl.relatedResultsEnter(false)' ng-mouseleave='$ctrl.relatedResultsLeave()' ng-repeat='example in $ctrl.getPreSuggestionsByVertical()'>{{::'intro.category-search.example-category.' + example | translate}}</li>\n</ul>\n</div>\n<div class='invalid-characters-title' data-hook='invalid-characters-message' ng-show='!$ctrl.isValidTerm()' translate='intro.category-search.invalid-characters-label'></div>\n<div class='no-category-matches' data-hook='no-category-matches' ng-if='$ctrl.isEmptySearch() &amp;&amp; !$ctrl.hideNoCategoryMatches'>\n<div class='icon'></div>\n<div class='title' compile='::&#39;intro.category-search.no-result-label-new&#39; | translate'></div>\n<ul class='no-category-generic-suggestions-list'>\n<li class='generic-item' data-hook='empty-suggestion' ng-click='$ctrl._onSelectFromEmptyList(category, $index)' ng-repeat='category in $ctrl.defaultCategories track by category.term'>\n{{category.term}}\n</li>\n</ul>\n</div>\n<div class='generic-suggestions' data-hook='empty-message' ng-if='$ctrl.shouldShowGenericPopover() &amp;&amp; !$ctrl.isEmptySearch() &amp;&amp; !$ctrl.hideGenericSuggestions'>\n<div class='title' translate='intro.category-search.no-result-popover-label'></div>\n<ul class='generic-suggestions-list'>\n<li class='generic-item' data-hook='empty-suggestion' ng-click='$ctrl._onSelectFromEmptyList(category, $index)' ng-repeat='category in $ctrl.defaultCategories track by category.term'>\n{{category.term}}\n</li>\n</ul>\n</div>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/business-card-header.html","<div class='banner' ng-if='$ctrl.bannerUrl' ng-style='$ctrl.bannerStyle'></div>\n<svg height='100%' ng-if='!$ctrl.bannerUrl' preserveAspectRatio='none' viewBox='0 0 91 91' width='100%'>\n<image filter='url(#intro-image-blur)' height='100%' ng-attr-href='{{$ctrl.logoUrl}}' width='100%'></image>\n</svg>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/business-card-logo.html","<div class='logo'>\n<file-upload-select data-hook='logo-upload-file' ng-if='!$ctrl.useMediaManager' on-select='$ctrl.onEdit({file : $file})'></file-upload-select>\n<div adi-automation='{{$ctrl.url}}' class='intro-bch-logo-image' data-hook='logo-image' ng-click='$ctrl.enableEdit &amp;&amp; $ctrl.clickOnInputFile()' ng-style='{&#39;background-image&#39;: $ctrl.url &amp;&amp; !$ctrl.isUploading ? &#39;url(&#39; + $ctrl.url + &#39;)&#39; : &#39;&#39;}'>\n<div class='logo-wrapping-circle' ng-if='$ctrl.showWrappingCircle'></div>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.isUploading'></cc-svg-icon>\n</div>\n<div class='intro-bch-edit' data-hook='edit-panel' ng-class='{&#39;is-uploading&#39;: $ctrl.isUploading &amp;&amp; !$ctrl.uploadError, &#39;fade-down&#39;: $ctrl.justReplaceButton, &#39;delay-entrance&#39;: $ctrl.justReplaceButton}' ng-if='$ctrl.enableEdit'>\n<input ng-click='$ctrl.openMediaManager()' ng-if='$ctrl.useMediaManager' type='button'>\n<div class='intro-logo-button intro-logo-add-button p9b-text-button -small' data-hook='add-button' ng-click='$ctrl.clickOnInputFile()' ng-if='$ctrl.logoIsPlaceholder() &amp;&amp; !$ctrl.isUploading'>\n<cc-svg-icon class='intro-logo-add-icon' icon='coloration:add-small'></cc-svg-icon>\n{{::'intro.logo.add' | translate}}\n</div>\n<div class='intro-logo-button intro-logo-edit-label p9b-text-button -small' data-hook='edit-label' ng-if='!$ctrl.logoIsPlaceholder() &amp;&amp; !$ctrl.justReplaceButton &amp;&amp; !$ctrl.isUploading'>\n<cc-svg-icon class='intro-logo-edit-icon' icon='coloration:edit'></cc-svg-icon>\n{{::'intro.logo.edit' | translate}}\n</div>\n<div class='intro-logo-edit-actions' ng-if='!$ctrl.logoIsPlaceholder() &amp;&amp; !$ctrl.justReplaceButton &amp;&amp; !$ctrl.isUploading'>\n<div class='intro-logo-button intro-logo-replace-button p9b-text-button -small' data-hook='replace-button' ng-click='$ctrl.clickOnInputFile()'>\n{{::'intro.logo.replace' | translate}}\n</div>\n<div class='intro-logo-button intro-logo-remove-button p9b-text-button -small' data-hook='delete-button' ng-click='$ctrl.onDelete()'>\n{{::'intro.logo.remove' | translate}}\n</div>\n</div>\n<div class='intro-logo-extractor-actions fade-down' ng-if='$ctrl.justReplaceButton &amp;&amp; !$ctrl.isUploading'>\n<div class='intro-logo-button intro-logo-replace-button p9b-text-button -small' data-hook='just-replace-button' ng-click='$ctrl.clickOnInputFile()'>\n{{::'intro.logo.replaceLogo' | translate}}\n</div>\n</div>\n<div class='intro-logo-button p9b-text-button -small fade-down' data-hook='uploading-logo-text' ng-if='$ctrl.isUploading'>\n{{::'intro.logo.uploading' | translate}}\n</div>\n<div class='intro-bch-logo-error' ng-show='$ctrl.uploadError'>{{:: 'intro.logo.error' | translate}}</div>\n</div>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/business-card-static.html","<business-card-header banner-url='$ctrl.bannerUrl' class='intro-bcs-header' logo-url='$ctrl.logoUrl'></business-card-header>\n<div class='intro-bcs-logo' ng-style='{&#39;background-image&#39;: &#39;url(&#39; + $ctrl.logoUrl + &#39;)&#39;}'></div>\n<div class='intro-bcs-name'>{{$ctrl.data.name}}</div>\n<div class='intro-bcs-email'>{{$ctrl.data.contactDetails.email || '&nbsp;'}}</div>\n<div class='intro-bcs-phone'>{{$ctrl.data.contactDetails.phone || '&nbsp;'}}</div>\n<div class='intro-bcs-address'>{{$ctrl.data.contactDetails.address.fullAddress}}</div>\n<div class='a05-forward-button intro-bcs-button cc-x-height'>\n<span>{{::'intro.select-user.select-button' | translate }}</span>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/business-card-static-new.html","<div class='intro-bcsn-logo' ng-style='{&#39;background-image&#39;: &#39;url(&#39; + $ctrl.logoUrl + &#39;)&#39;}'>\n<div class='camera' ng-if='!$ctrl.logoUrl'></div>\n</div>\n<div class='intro-bcsn-details'>\n<div class='intro-bcsn-name'>{{$ctrl.data.name}}</div>\n<div class='intro-bcsn-email'>{{$ctrl.data.contactDetails.email || '&nbsp;'}}</div>\n<div class='intro-bcsn-phone'>{{$ctrl.data.contactDetails.phone || '&nbsp;'}}</div>\n<div class='intro-bcsn-address'>{{$ctrl.data.contactDetails.address.fullAddress}}</div>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.data.isLoading'></cc-svg-icon>\n<div class='a05-forward-button intro-bcsn-button cc-x-height' ng-if='!$ctrl.data.isLoading'>\n<span>{{::'intro.select-user.select-button' | translate }}</span>\n</div>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-blocked-category.html","<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<div class='blocked-title' data-hook='blocked-message' translate='intro.blocked-category.title'></div>\n<div class='blocked-icon'></div>\n<div class='blocked-description'>\n<div data-hook='blocked-message-desc' translate='intro.blocked-category.description'></div>\n<a class='p9a-secondary -inverse blocked-link' data-hook='blocked-message-link' ng-click='$ctrl.onNext()' ng-href='{{ $ctrl.blockedRedirectUrl }}' target='_blank'>\n<span class='button-text' translate='intro.blocked-category.back-button'></span>\n</a>\n</div>\n<button class='intro-box-back a02-text-button' data-hook='back' ng-click='$ctrl.back()' ng-style='$ctrl.backStyle' type='button'>\n<i class='cc-icon-intro-next-arrow'></i>\n<span class='button-text' translate='intro.back-button'></span>\n</button>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-blocked-category-new.html","<intro-step-layout align-right-to='center'>\n<left>\n<div class='diptych-label' compile='::&#39;new-intro.blocked-category.title-new&#39; | translate'></div>\n</left>\n<right>\n<div class='description'>\n<img ng-src='{{&#39;/images/intro/new/go-to-editor.png&#39; | externalImage}}'>\n<div class='text' data-hook='blocked-message-desc' translate='intro.blocked-category.description'></div>\n<a class='p9-primary' data-hook='blocked-message-link' ng-click='$ctrl.onNext()' ng-href='{{ $ctrl.blockedRedirectUrl }}' target='_blank'>\n<span class='button-text' translate='intro.blocked-category.back-button'></span>\n</a>\n</div>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-box-buttons.html","<button class='intro-box-back a02-text-button' data-hook='back' ng-click='$ctrl.onBack()' ng-if='$ctrl.back' ng-style='$ctrl.backStyle' type='button'>\n<i class='cc-icon-intro-next-arrow'></i>\n<span class='button-text' translate='intro.back-button'></span>\n</button>\n<button class='intro-box-next a02-text-button' data-hook='next' focus-if='$ctrl.focusNext' ng-click='$ctrl.onNext()' ng-disabled='$ctrl.isNextDisabled' ng-style='$ctrl.nextStyle'>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.isInProcess'></cc-svg-icon>\n<span cc-hide-tooltip='{{$ctrl.isHideTooltip}}' cc-tooltip-position='{{$ctrl.tooltipPosition}}' cc-tooltip='{{$ctrl.tooltipTitle}}' class='button-text' ng-if='!$ctrl.isInProcess' translate='intro.next-button'></span>\n<div class='intro-next-arrow-container' ng-if='!$ctrl.isInProcess'>\n<i class='cc-icon-intro-next-arrow'></i>\n</div>\n<i class='active-decorator big'></i>\n<i class='active-decorator medium'></i>\n<i class='active-decorator small'></i>\n</button>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-business-dates.html","<div class='intro-box-content' ng-style='$ctrl.contentPosition' os-utils></div>\n<div class='intro-box-content' ng-style='$ctrl.contentPosition' os-utils>\n<div class='label t04a-label' data-hook='input-label' translate='intro.optional-label'></div>\n<form class='b01-big-text-field' ng-submit='$ctrl.next()'>\n<label data-hook='input-title' translate='intro.business-dates.input-label'></label>\n<div class='error-message' ng-if='$ctrl.wrongStartDate()' translate='intro.business-dates.wrong-start-date'></div>\n<div class='error-message' ng-if='$ctrl.wrongEndDate()' translate='intro.business-dates.wrong-end-date'></div>\n<div class='date' data-hook='date' ng-repeat='date in $ctrl.dates track by $index'>\n<div class='date-label t04a-label' ng-if='$ctrl.hasEndDate()' translate='{{$ctrl.dateLabel($index)}}'></div>\n<div class='date-inputs'>\n<div class='date-picker'>\n<i class='cc-icon-booking'></i>\n<div class='like-input placeholder' data-hook='date-picker' ng-click='$ctrl.onDateClicked($event, $index)' ng-if='!$ctrl.dates[$index]' translate='intro.business-dates.date-placeholder'></div>\n<div class='like-input' data-hook='date-picker' ng-click='$ctrl.onDateClicked($event, $index)' ng-if='$ctrl.dates[$index]'>\n{{$ctrl.dates[$index] | date:'MM/dd/yyyy'}}\n</div>\n</div>\n<div class='time-picker'>\n<i class='cc-icon-time'></i>\n<md-select class='intro-select' data-hook='time-picker' intro-md-select md-container-class='intro-md-select cc-md-select' md-on-close='$ctrl.onTimeClosed($event, $index)' ng-change='$ctrl.timeChanged($index, $ctrl.selectedTimes[$index])' ng-click='$ctrl.onTimeClicked($event, $index)' ng-model='$ctrl.selectedTimes[$index]' placeholder='{{:: &quot;intro.business-dates.time-placeholder&quot; | translate}}'>\n<md-option ng-bind='time.display' ng-repeat='time in $ctrl.optionalTimes track by time.value' ng-value='time.value'></md-option>\n</md-select>\n</div>\n<button class='remove cc-icon-close-12' data-hook='remove-date' ng-click='$ctrl.removeDate($index)' ng-if='date' type='button'></button>\n</div>\n</div>\n<div class='timezone' data-hook='timezone' ng-if='$ctrl.hasStartDate()'>\n<span class='t04a-label' ng-bind='$ctrl.timezone'></span>\n<button class='p9b-text-button' ng-click='$ctrl.onTimezoneClicked()' translate='intro.business-dates.change-timezone' type='button'></button>\n<md-select class='intro-select' data-hook='timezone-select' intro-md-select md-container-class='intro-md-select cc-md-select' ng-change='$ctrl.timezoneChanged()' ng-model='$ctrl.timezone'>\n<md-option adi-automation='{{zone.key}}' ng-bind='zone.displayName' ng-repeat='zone in $ctrl.timezones track by zone.key' ng-value='zone.key'></md-option>\n</md-select>\n</div>\n<div class='add-date' ng-if='$ctrl.hasStartDate() &amp;&amp; !$ctrl.hasEndDate()'>\n<button class='p9b-text-button' data-hook='add-date' ng-click='$ctrl.addDate()' type='button'>\n<div class='cc-icon-add-small'></div>\n<span translate='intro.business-dates.add-date'></span>\n</button>\n</div>\n<intro-box-buttons back='$ctrl.back()'></intro-box-buttons>\n</form>\n</div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-click='$ctrl.skip()' type='button'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-business-dates-new.html","<intro-step-layout align-right-to='title'>\n<left>\n<div class='diptych-label' data-hook='input-label' translate='intro.business-dates.input-label'></div>\n</left>\n<right>\n<form class='b01-big-text-field' ng-submit='$ctrl.next()'>\n<div class='error-message' ng-if='$ctrl.wrongStartDate()' translate='intro.business-dates.wrong-start-date'></div>\n<div class='error-message' ng-if='$ctrl.wrongEndDate()' translate='intro.business-dates.wrong-end-date'></div>\n<div class='date' data-hook='date' ng-repeat='date in $ctrl.dates track by $index'>\n<div class='date-label t04a-label' ng-class='{&quot;date-from-label&quot;: $first}' ng-if='$ctrl.hasEndDate()' translate='{{$ctrl.dateLabel($index)}}'></div>\n<div class='date-picker'>\n<i class='cc-icon-booking'></i>\n<div class='like-input placeholder' data-hook='date-picker' ng-click='$ctrl.onDateClicked($event, $index)' ng-if='!$ctrl.dates[$index]' translate='intro.business-dates.date-placeholder'></div>\n<div class='like-input' data-hook='date-picker' ng-click='$ctrl.onDateClicked($event, $index)' ng-if='$ctrl.dates[$index]'>\n{{$ctrl.dates[$index] | date:'MM/dd/yyyy'}}\n</div>\n<button class='remove cc-icon-close-12' data-hook='remove-date' ng-click='$ctrl.removeDate($index)' ng-if='date' type='button'></button>\n</div>\n<div class='time-picker'>\n<i class='cc-icon-time'></i>\n<md-select class='intro-select' data-hook='time-picker' intro-md-select md-container-class='intro-md-select cc-md-select' md-on-close='$ctrl.onTimeClosed($event, $index)' ng-change='$ctrl.timeChanged($index, $ctrl.selectedTimes[$index])' ng-click='$ctrl.onTimeClicked($event, $index)' ng-model='$ctrl.selectedTimes[$index]' placeholder='Choose Time'>\n<md-option ng-bind='time.display' ng-repeat='time in $ctrl.optionalTimes track by time.value' ng-value='time.value'></md-option>\n</md-select>\n<button class='remove cc-icon-close-12' data-hook='remove-date' ng-click='$ctrl.removeDate($index)' ng-if='date' type='button'></button>\n</div>\n</div>\n<div class='timezone' data-hook='timezone' ng-if='$ctrl.hasStartDate()'>\n<span class='t04a-label' ng-bind='$ctrl.timezone'></span>\n<button class='p9b-text-button' ng-click='$ctrl.onTimezoneClicked()' translate='intro.business-dates.change-timezone' type='button'></button>\n<md-select class='intro-select' data-hook='timezone-select' intro-md-select md-container-class='intro-md-select cc-md-select' ng-change='$ctrl.timezoneChanged()' ng-model='$ctrl.timezone'>\n<md-option adi-automation='{{zone.key}}' ng-bind='zone.displayName' ng-repeat='zone in $ctrl.timezones track by zone.key' ng-value='zone.key'></md-option>\n</md-select>\n</div>\n<div class='add-date' ng-if='$ctrl.hasStartDate() &amp;&amp; !$ctrl.hasEndDate()'>\n<div class='add-button' data-hook='add-date' ng-click='$ctrl.addDate()' type='button'>\n<div class='add-button-icon cc-icon-add-small cc-icon-circle'></div>\n<div class='add-button-label' translate='intro.business-dates.add-date'></div>\n</div>\n</div>\n</form>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-business-location.html","<div class='intro-box-content' ng-style='$ctrl.contentPosition' os-utils>\n<div class='label t04a-label' data-hook='input-label' ng-if='$ctrl.isOptional' translate='intro.optional-label'></div>\n<form class='b01-big-text-field' ng-submit='$ctrl.next()'>\n<label data-hook='input-title' translate='{{::$ctrl.getLocationTitle()}}'></label>\n<input autocomplete='off' cc-select-on-focus data-hook='business-location-input' focus-if='$ctrl.loaded &amp;&amp; !$os.isIE' force-selection='!$ctrl.isOptional' g-places-autocomplete intro-g-places-autocomplete='$ctrl.introPlacesOptions' ng-blur='$ctrl.hidePlaceholder = false' ng-click='$ctrl.hidePlaceholder = true' ng-model='$ctrl.address' options='$ctrl.placesOptions' placeholder='{{$ctrl.placeholder | translate}}'>\n<intro-box-buttons back='$ctrl.back()' is-next-disabled='!$ctrl.isValid()'></intro-box-buttons>\n</form>\n<div class='t03b-small-line intro-compiled-text' data-hook='input-subline' ng-if='!$ctrl.isOptional' wix-translate-compile='intro.business-location.subline'></div>\n</div>\n<div class='search-tip-title' data-hook='search-tip' ng-if='$ctrl.isOptional' ng-style='$ctrl.boxTipStyle' translate='intro.business-location.search-tip'></div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-click='$ctrl.skip()' type='button'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-business-location-new.html","<intro-step-layout align-right-to='title'>\n<left>\n<div class='diptych-label' compile='::$ctrl.getLocationTitle() | translate' data-hook='input-label'></div>\n</left>\n<right>\n<form class='b01-big-text-field -relative' ng-submit='$ctrl.next()'>\n<cc-svg-icon add-cc-svg-icon-class='false' class='input-icon' icon='misc:location'></cc-svg-icon>\n<input autocomplete='off' cc-select-on-focus data-hook='business-location-input' focus-if='$ctrl.loaded &amp;&amp; !$os.isIE' force-selection='!$ctrl.isOptional' g-places-autocomplete intro-g-places-autocomplete='$ctrl.introPlacesOptions' ng-blur='$ctrl.hidePlaceholder = false' ng-click='$ctrl.hidePlaceholder = true' ng-model='$ctrl.address' options='$ctrl.placesOptions' placeholder='{{$ctrl.placeholder | translate}}'>\n</form>\n<div class='t03b-small-line intro-compiled-text' data-hook='input-subline' ng-if='!$ctrl.isOptional' wix-translate-compile='new-intro.business-location.subline'></div>\n<div class='search-tip-title' data-hook='search-tip' ng-if='$ctrl.isOptional' ng-style='$ctrl.boxTipStyle' translate='intro.business-location.search-tip'></div>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button is-disabled='!$ctrl.isValid()' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-youtube-channel.html","<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<form class='b01-big-text-field' ng-submit='$ctrl.next()'>\n<label data-hook='input-title' translate='{{:: &quot;intro.youtube-channel.label&quot;}}'></label>\n<input autocomplete='off' cc-select-on-focus data-hook='channel-id-input' focus-if='$ctrl.loaded' ng-model='$ctrl.channelUrl' placeholder='{{:: &quot;intro.youtube-channel.placeholder&quot; | translate }}' type='text'>\n<span class='message is-error' ng-hide='$ctrl.isValidUrl' translate='{{::&#39;intro.import-site-content.address-does-not-exist&#39;|translate}}'></span>\n<intro-box-buttons back='$ctrl.back()' focus-next='true' is-next-disabled='$ctrl.isNextDisabled'></intro-box-buttons>\n</form>\n</div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-click='$ctrl.skip()' type='button'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-youtube-channel-new.html","<intro-step-layout align-right-to='title'>\n<left>\n<div class='diptych-label' data-hook='input-title' translate='{{:: &quot;intro.youtube-channel.label&quot;}}'></div>\n</left>\n<right>\n<form class='search-form b01-big-text-field -relative' ng-submit='$ctrl.next()'>\n<cc-svg-icon add-cc-svg-icon-class='false' icon='osi:edit'></cc-svg-icon>\n<input autocomplete='off' cc-select-on-focus data-hook='channel-id-input' focus-if='$ctrl.loaded' ng-model='$ctrl.channelUrl' placeholder='{{:: &quot;intro.youtube-channel.placeholder&quot; | translate }}' type='text'>\n<span class='message is-error' ng-hide='$ctrl.isValidUrl' translate='{{::&#39;intro.import-site-content.address-does-not-exist&#39;|translate}}'></span>\n</form>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button focus-if='true' is-disabled='$ctrl.isNextDisabled' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-business-name.html","<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<form class='b01-big-text-field' ng-submit='$ctrl.next()'>\n<label data-hook='input-title' translate='{{::$ctrl.getBusinessNameTitle()}}'></label>\n<input autocomplete='off' cc-select-on-focus data-hook='business-name-input' focus-if='$ctrl.loaded' ng-model='$ctrl.name' type='text'>\n<intro-box-buttons back='$ctrl.back()' is-next-disabled='!$ctrl.name'></intro-box-buttons>\n</form>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-business-name-new.html","<intro-step-layout align-right-to='title'>\n<left>\n<div class='diptych-label' compile='::&quot;{{$ctrl.getBusinessNameTitle()}}&quot;' data-hook='input-title'></div>\n</left>\n<right>\n<form class='b01-big-text-field -relative' ng-submit='$ctrl.next()'>\n<cc-svg-icon add-cc-svg-icon-class='false' class='input-icon' icon='osi:edit'></cc-svg-icon>\n<input autocomplete='off' cc-select-on-focus data-hook='business-name-input' focus-if='$ctrl.loaded' ng-model='$ctrl.name' placeholder='{{::($ctrl.flags.newIntroPlaceholders ? $ctrl.$translate.instant(&#39;intro.business-name.input-placeholder&#39;) : &#39;&#39;)}}' type='text'>\n</form>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<next-action>\n<intro-next-button is-disabled='!$ctrl.name' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-category-search.html","<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<form class='search-form b01-big-text-field' data-hook='type-form' ng-submit='$ctrl.next()'>\n<label data-hook='input-label' translate='{{::$ctrl.getVerticalTranslation(&quot;intro.category-search.label&quot;)}}'></label>\n<md-autocomplete data-hook='input-container' hidden-override='false' intro-md-autocomplete intro-md-loaded='$ctrl.isListLoaded()' intro-md-on-select='$ctrl.onSelectedFromList($term)' md-autofocus='true' md-autoselect='false' md-delay='100' md-input-name='businessTypeInput' md-item-text='$ctrl.getDisplayText(category)' md-items='category in $ctrl.search()' md-menu-class='c01-big-list' md-no-cache='true' md-search-changed='$ctrl.onSearchChanged($term, $matches)' md-search-text='$ctrl.searchTerm' md-select-on-focus='true' md-select-on-match='true' md-selected-item='$ctrl.selected'>\n<md-item-templates data-hook='search-result-entry' intro-md-item-disabled='{{category.isTitle}}' ng-class='::{&quot;is-related&quot;: category.isRelated, &quot;isExactMatch&quot;: category.isExactMatch, &quot;fuzzy&quot;: $ctrl.checkFuzzy(category)}' ng-click='$ctrl.itemClicked($event, category.isTitle)' ng-mouseenter='$ctrl.relatedResultsEnter(category.isTitle)' ng-mouseleave='$ctrl.relatedResultsLeave()'>\n<span md-highlight-flags='gi' md-highlight-text='$ctrl.getHighlightText(category)'>{{ $ctrl.getDisplayText(category) }}</span>\n</md-item-templates>\n</md-autocomplete>\n<i class='cc-icon-search'></i>\n<intro-box-buttons is-next-disabled='!$ctrl.validCategory'></intro-box-buttons>\n</form>\n<div class='examples faded' data-hook='search-example-label' ng-if='!$ctrl.searchTerm'>\n<ul class='md-autocomplete-suggestions examplesList c01-big-list'>\n<li class='exampleTitle intro-md-item-disabled'>{{::'intro.category-search.examples-label' | translate}}</li>\n<li class='exampleItem' ng-class='{&quot;is-related&quot;: true, &quot;isExactMatch&quot;: false}' ng-click='$ctrl.onExampleClick($event)' ng-mouseenter='$ctrl.relatedResultsEnter(false)' ng-mouseleave='$ctrl.relatedResultsLeave()' ng-repeat='example in $ctrl.getPreSuggestionsByVertical()'>{{::'intro.category-search.example-category.' + example | translate}}</li>\n</ul>\n</div>\n<div class='invalid-characters-title' data-hook='invalid-characters-message' ng-show='!$ctrl.isValidTerm()' translate='intro.category-search.invalid-characters-label'></div>\n<div class='no-category-matches' data-hook='no-category-matches' ng-if='$ctrl.isEmptySearch()'>\n<div class='icon'></div>\n<div class='title' translate='intro.category-search.no-result-label'></div>\n</div>\n</div>\n<div class='generic-popover' data-hook='empty-message' ng-if='$ctrl.shouldShowGenericPopover()' ng-style='$ctrl.genericPopoverPosition'>\n<div class='title' translate='intro.category-search.no-result-popover-label'></div>\n<ul>\n<li class='generic-item' data-hook='empty-suggestion' ng-click='$ctrl.onSelectFromEmptyList(category, $index)' ng-repeat='category in $ctrl.defaultCategories track by category.term'>\n{{category.term}}\n</li>\n</ul>\n</div>\n<div class='search-tip-title' data-hook='search-tip' ng-style='$ctrl.boxTipStyle' translate='intro.category-search.search-tip'></div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-attr-type='button' ng-click='$ctrl.skip()'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-category-search-new.html","<intro-step-layout align-right-to='title'>\n<left>\n<div class='diptych-label' compile='::&quot;{{$ctrl.getVerticalTranslation(&#39;new-intro.category-search.label&#39;)}}&quot;' data-hook='input-label'></div>\n<div class='diptych-sublabel' data-hook='input-label' ng-if='!$ctrl.flags.newIntroPlaceholders'>{{'new-intro.category-search.sublabel' | translate}}</div>\n</left>\n<right>\n<category-search default-categories='$ctrl.defaultCategories' is-dropdown-suggestions-hidden='$ctrl.isDropdownSuggestionsHidden' is-reset-term='$ctrl.isResetItem(term, matches)' last-searched-term='$ctrl.lastSearchedTerm' ng-if='$ctrl.flags.changeBusinessDetails' on-example-click='$ctrl._onExampleClick(term)' on-search-changed='$ctrl._onSearchChanged(term, matches, result)' on-select-from-empty-list='$ctrl._onSelectFromEmptyList(item, index)' on-submit='$ctrl.next()' pre-suggestions-by-vertical='$ctrl.preSuggestionsByVertical' result='$ctrl.result' search-term='$ctrl.searchTerm' valid-category='$ctrl.validCategory' vertical='$ctrl.vertical'></category-search>\n<form class='search-form b01-big-text-field -relative' data-hook='type-form' ng-if='!$ctrl.flags.changeBusinessDetails' ng-submit='$ctrl.next()'>\n<md-autocomplete data-hook='input-container' hidden-override='$ctrl.isDropdownSuggestionsHidden' intro-md-autocomplete intro-md-disable-on-resize='false' intro-md-loaded='$ctrl.isListLoaded()' intro-md-on-select='$ctrl.onSelectedFromList($term)' md-autofocus='true' md-autoselect='false' md-delay='100' md-input-name='businessTypeInput' md-item-text='$ctrl.getDisplayText(category)' md-items='category in $ctrl.search()' md-menu-class='c01-big-list' md-no-cache='true' md-search-changed='$ctrl.onSearchChanged($term, $matches)' md-search-text='$ctrl.searchTerm' md-select-on-focus='true' md-select-on-match='true' md-selected-item='$ctrl.selected' placeholder='{{::($ctrl.flags.newIntroPlaceholders ? $ctrl.$translate.instant(&#39;intro.category-search.input-placeholder&#39;) : &#39;&#39;)}}'>\n<md-item-templates data-hook='search-result-entry' intro-md-item-disabled='{{category.isTitle}}' ng-class='::{&quot;is-related&quot;: category.isRelated, &quot;isExactMatch&quot;: category.isExactMatch, &quot;fuzzy&quot;: $ctrl.checkFuzzy(category)}' ng-click='$ctrl.itemClicked($event, category.isTitle)' ng-mouseenter='$ctrl.relatedResultsEnter(category.isTitle)' ng-mouseleave='$ctrl.relatedResultsLeave()'>\n<span md-highlight-flags='gi' md-highlight-text='$ctrl.getHighlightText(category)'>{{ $ctrl.getDisplayText(category) }}</span>\n</md-item-templates>\n</md-autocomplete>\n<i class='cc-icon-search-intro'></i>\n</form>\n<div class='examples faded' data-hook='search-example-label' ng-if='!$ctrl.flags.changeBusinessDetails &amp;&amp; !$ctrl.searchTerm'>\n<ul class='md-autocomplete-suggestions examplesList c01-big-list'>\n<li class='exampleTitle intro-md-item-disabled'>{{::'intro.category-search.suggestions-label' | translate}}</li>\n<li class='exampleItem' ng-class='{&quot;is-related&quot;: true, &quot;isExactMatch&quot;: false}' ng-click='$ctrl.onExampleClick($event)' ng-mouseenter='$ctrl.relatedResultsEnter(false)' ng-mouseleave='$ctrl.relatedResultsLeave()' ng-repeat='example in $ctrl.getPreSuggestionsByVertical()'>{{::'intro.category-search.example-category.' + example | translate}}</li>\n</ul>\n</div>\n<div class='invalid-characters-title' data-hook='invalid-characters-message' ng-if='!$ctrl.flags.changeBusinessDetails' ng-show='!$ctrl.isValidTerm()' translate='intro.category-search.invalid-characters-label'></div>\n<div class='no-category-matches' data-hook='no-category-matches' ng-if='!$ctrl.flags.changeBusinessDetails &amp;&amp; $ctrl.isEmptySearch()'>\n<div class='icon'></div>\n<div class='title' compile='::&#39;intro.category-search.no-result-label-new&#39; | translate'></div>\n<ul class='no-category-generic-suggestions-list'>\n<li class='generic-item' data-hook='empty-suggestion' ng-click='$ctrl.onSelectFromEmptyList(category, $index)' ng-repeat='category in $ctrl.defaultCategories track by category.term'>\n{{category.term}}\n</li>\n</ul>\n</div>\n<div class='generic-suggestions' data-hook='empty-message' ng-if='!$ctrl.flags.changeBusinessDetails &amp;&amp; $ctrl.shouldShowGenericPopover() &amp;&amp; !$ctrl.isEmptySearch()'>\n<div class='title' translate='intro.category-search.no-result-popover-label'></div>\n<ul class='generic-suggestions-list'>\n<li class='generic-item' data-hook='empty-suggestion' ng-click='$ctrl.onSelectFromEmptyList(category, $index)' ng-repeat='category in $ctrl.defaultCategories track by category.term'>\n{{category.term}}\n</li>\n</ul>\n</div>\n</right>\n<skip-action>\n<intro-skip-button on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button is-disabled='!$ctrl.validCategory' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-recaptcha.html","<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<form class='b01-big-text-field' ng-submit='$ctrl.next()'>\n<div class='recaptcha'>\n<label class='recaptcha-title' data-hook='recaptcha-title' translate='{{::$ctrl.getTitle()}}'></label>\n<div class='recaptcha-widget' id='recaptcha-widget'></div>\n<c11-paragraph class='terms' html='$ctrl.getTerms()'></c11-paragraph>\n<intro-box-buttons back='$ctrl.back()' is-next-disabled='!$ctrl.userIsValid'></intro-box-buttons>\n</div>\n</form>\n</div>\n<div class='a01-buttons end'></div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-recaptcha-new.html","<intro-step-layout align-right-to='center'>\n<left>\n<div class='diptych-label recaptcha-title' compile='::&#39;intro.recaptcha.title-new&#39; | translate' data-hook='recaptcha-title'></div>\n</left>\n<right>\n<form class='b01-big-text-field' ng-submit='$ctrl.next()'>\n<div class='recaptcha'>\n<div class='recaptcha-widget' id='recaptcha-widget'></div>\n<div class='terms' compile='::&#39;intro.recaptcha.terms-new&#39; | translate'></div>\n</div>\n</form>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<next-action>\n<intro-next-button is-disabled='!$ctrl.userIsValid' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-data-item-field.html","<div class='label'>{{label | uppercase}}</div>\n<input class='value' ng-readonly='isEditable!==&#39;true&#39;' value='{{value}}'>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-edit-user.html","<div cc-scrollbar class='intro-edit-user'>\n<div class='card-title'>\n<div class='t01a-title'>{{::'business_card.title' | translate }}</div>\n</div>\n<div class='edit-user-form'>\n<business-card-editable data='$ctrl.introData' field-changed='$ctrl.onFieldChanged($value)' uploading-logo='$ctrl.logoManager.uploadingLogo'></business-card-editable>\n<intro-box-buttons back='$ctrl.back()' is-next-disabled='$ctrl.logoManager.uploadingLogo' next='$ctrl.next()'></intro-box-buttons>\n</div>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-edit-user-new.html","<intro-step-layout>\n<left>\n<div class='diptych-label' data-hook='input-label' translate='business_card.title'></div>\n</left>\n<right>\n<div cc-scrollbar class='intro-edit-user'>\n<div class='edit-user-form'>\n<business-card-editable-new data='$ctrl.introData' field-changed='$ctrl.onFieldChanged($value)' uploading-logo='$ctrl.logoManager.uploadingLogo'></business-card-editable-new>\n</div>\n</div>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<next-action>\n<intro-next-button on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-event-details.html","<div class='card-title'>\n<div class='t01a-title' translate='business_card.title'></div>\n</div>\n<div class='intro-card-summary intro-view'>\n<img class='card-header' relative-src='images/intro/event-details-header.jpg'>\n<div class='card-body'>\n<div class='card-input name'>\n<label data-hook='name-label' translate='intro.event-details.name-label'></label>\n<input cc-select-on-focus data-hook='name-input' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;name&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.name' placeholder='{{::&#39;intro.event-details.name-placeholder&#39; | translate}}' type='text'>\n</div>\n<div class='card-input description'>\n<label data-hook='description-label' maxlength='300' translate='intro.event-details.description-label'></label>\n<input cc-select-on-focus data-hook='description-input' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;description&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.description' placeholder='{{::&#39;intro.event-details.description-placeholder&#39; | translate}}' type='text'>\n</div>\n<div class='card-inputs-container'>\n<div class='column'>\n<div class='card-input'>\n<label data-hook='address-label' translate='intro.event-details.address-label'></label>\n<div class='input-value' data-hook='address-input' ng-if='!$ctrl.addressToDisplay'>{{ 'intro.event-details.location-tbd' | translate }}</div>\n<div class='input-value' data-hook='address-input' ng-if='$ctrl.addressToDisplay'>{{ $ctrl.addressToDisplay }}</div>\n<a class='p9b-text-button' data-hook='address-change' ng-click='$ctrl.changeLocation()' translate='intro.change-link'></a>\n</div>\n<div class='card-input'>\n<label data-hook='dates-label' translate='intro.event-details.dates-label'></label>\n<div class='input-value' data-hook='from-date' ng-if='!$ctrl.fromDate'>{{ 'intro.event-details.date-tbd' | translate }}</div>\n<div class='input-value' data-hook='from-date' ng-if='$ctrl.fromDate &amp;&amp; !$ctrl.toDate'>{{ 'intro.event-details.date' | translate: {date: $ctrl.fromDate, time: $ctrl.fromTime} }}</div>\n<div class='input-value' data-hook='from-date' ng-if='$ctrl.fromDate &amp;&amp; $ctrl.toDate'>{{ 'intro.event-details.from-date' | translate: {date: $ctrl.fromDate, time: $ctrl.fromTime} }}</div>\n<div class='input-value' data-hook='to-date' ng-if='$ctrl.toDate'>{{ 'intro.event-details.to-date' | translate: {date: $ctrl.toDate, time: $ctrl.toTime} }}</div>\n<div class='input-value' data-hook='timezone' ng-if='$ctrl.timezoneToDisplay'>{{ $ctrl.timezoneToDisplay }}</div>\n<a class='p9b-text-button' data-hook='dates-change' ng-click='$ctrl.changeDates()' translate='intro.change-link'></a>\n</div>\n</div>\n<div class='column'>\n<ng-include src='&#39;views/business-card/business-card-social-links.html&#39;'></ng-include>\n</div>\n</div>\n</div>\n<intro-box-buttons back='$ctrl.back()' next='$ctrl.next()'></intro-box-buttons>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-event-details-new.html","<intro-step-layout>\n<left>\n<div class='diptych-label' data-hook='input-label' translate='business_card.title'></div>\n</left>\n<right>\n<div cc-scrollbar class='right-content'>\n<div class='card-input name'>\n<label data-hook='name-label' translate='intro.event-details.name-label'></label>\n<input cc-select-on-focus data-hook='name-input' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;name&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.name' placeholder='{{::&#39;intro.event-details.name-placeholder&#39; | translate}}' type='text'>\n</div>\n<div class='card-input description'>\n<label data-hook='description-label' maxlength='300' translate='intro.event-details.description-label'></label>\n<textarea cc-select-on-focus data-hook='description-input' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;description&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.description' placeholder='{{::&#39;intro.event-details.description-placeholder&#39; | translate}}' type='text'></textarea>\n</div>\n<div class='card-input'>\n<label data-hook='address-label' translate='intro.event-details.address-label'></label>\n<div class='input-value' data-hook='address-input'>\n<div class='input-value-inner'>\n<div ng-if='!$ctrl.addressToDisplay'>{{ 'intro.event-details.location-tbd' | translate }}</div>\n<div ng-if='$ctrl.addressToDisplay'>{{ $ctrl.addressToDisplay }}</div>\n</div>\n<a class='p9b-text-button' data-hook='address-change' ng-click='$ctrl.changeLocation()' translate='intro.change-link'></a>\n</div>\n</div>\n<div class='card-input'>\n<label data-hook='dates-label' translate='intro.event-details.dates-label'></label>\n<div class='card-input-dates'>\n<div class='input-value'>\n<div data-hook='from-date' ng-if='!$ctrl.fromDate'>{{ 'intro.event-details.date-tbd' | translate }}</div>\n<div data-hook='from-date' ng-if='$ctrl.fromDate &amp;&amp; !$ctrl.toDate'>{{ 'intro.event-details.date' | translate: {date: $ctrl.fromDate, time: $ctrl.fromTime} }}</div>\n<div data-hook='from-date' ng-if='$ctrl.fromDate &amp;&amp; $ctrl.toDate'>{{ 'intro.event-details.from-date' | translate: {date: $ctrl.fromDate, time: $ctrl.fromTime} }}</div>\n<div data-hook='to-date' ng-if='$ctrl.toDate'>{{ 'intro.event-details.to-date' | translate: {date: $ctrl.toDate, time: $ctrl.toTime} }}</div>\n<div data-hook='timezone' ng-if='$ctrl.timezoneToDisplay'>{{ $ctrl.timezoneToDisplay }}</div>\n</div>\n<a class='p9b-text-button' data-hook='dates-change' ng-click='$ctrl.changeDates()' translate='intro.change-link'></a>\n</div>\n</div>\n<ng-include src='&#39;views/intro/business-card/business-card-social-links-new.html&#39;'></ng-include>\n</div>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<next-action>\n<intro-next-button on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-import-site-content.html","<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<div class='label t04a-label optional' translate='intro.optional-label'></div>\n<form class='search-form b01-big-text-field' data-hook='type-form' ng-submit='$ctrl.next()'>\n<div class='import-site-content-title' translate='intro.import-site-content.title'></div>\n<input autocomplete='off' class='b02-small-text-field' data-hook='business-website-input' focus-if ng-keyup='$ctrl.handleProblemsInWebsiteAddress()' ng-model='$ctrl.address' placeholder='{{::&#39;intro.import-site-content.address-message&#39; | translate}}' type='text'>\n<i class='cc-icon-search'></i>\n<intro-box-buttons back='$ctrl.back()' is-hide-tooltip='$ctrl.isHideTooltip' is-in-process='$ctrl.isInProcess' is-next-disabled='$ctrl.isNextDisabled' tooltip-position='$ctrl.nextButtonTooltipPosition' tooltip-title='$ctrl.nextButtonTooltipTitle'></intro-box-buttons>\n</form>\n<div class='t03b-small-line intro-compiled-text' data-hook='input-subline'>\n<span class='message' ng-class='{&#39;is-error&#39;: !$ctrl.isWebsiteAddressValid || $ctrl.isError}' translate='{{$ctrl.tipMessage}}'></span>\n<div class='link-button' data-hook='no-import-site-skip' ng-click='$ctrl.skip()' translate='new-intro.import-content.skip-button-name'></div>\n<span translate='new-intro.import-content.skip-content'></span>\n</div>\n</div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-click='$ctrl.skip()' type='button'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-import-site-content-new.html","<intro-step-layout align-right-to='title'>\n<left>\n<div class='diptych-label' compile='::&#39;new-intro.import-site-content.title&#39; | translate'></div>\n<div class='diptych-sublabel' translate='new-intro.import-site-content.sublabel'></div>\n</left>\n<right>\n<form class='search-form b01-big-text-field -relative' data-hook='type-form' ng-submit='$ctrl.next()'>\n<cc-svg-icon add-cc-svg-icon-class='false' icon='osi:edit'></cc-svg-icon>\n<input autocomplete='off' data-hook='business-website-input' focus-if ng-keyup='$ctrl.handleProblemsInWebsiteAddress()' ng-model='$ctrl.address' placeholder='{{::&#39;intro.import-site-content.address-message&#39; | translate}}' type='text'>\n</form>\n<div class='t03b-small-line intro-compiled-text' data-hook='input-subline'>\n<span class='message' ng-class='{&#39;is-error&#39;: !$ctrl.isWebsiteAddressValid || $ctrl.isError}' translate='{{$ctrl.tipMessage}}'></span>\n<div class='link-button' data-hook='no-import-site-skip' ng-click='$ctrl.skip()' translate='new-intro.import-content.skip-button-name'></div>\n<span translate='new-intro.import-content.skip-content'></span>\n</div>\n</right>\n<back-action>\n<intro-back-button ng-if='!$ctrl.isInProcess' on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button ng-if='!$ctrl.isInProcess' on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.isInProcess'></cc-svg-icon>\n<intro-next-button is-disabled='$ctrl.isNextDisabled' ng-if='!$ctrl.isInProcess' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-search-confirm.html","<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<div class='title' data-hook='search-confirm-message'>\n{{::'intro.search-confirm.title-old' | translate:{ businessName:$ctrl.businessName} }}\n</div>\n<div class='description'>\n<span translate='intro.search-confirm.details1'></span>\n<span translate='intro.search-confirm.details2'></span>\n</div>\n<intro-box-buttons back='$ctrl.back()' focus-next='true' next='$ctrl.next()'></intro-box-buttons>\n</div>\n<div class='subline' translate='intro.search-confirm.subline'></div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-click='$ctrl.skip()'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-search-confirm-new.html","<intro-step-layout align-right-to='center'>\n<left>\n<div class='diptych-label' compile='::&quot;new-intro.search-confirm.title&quot; | translate:{ businessName:$ctrl.businessName}' data-hook='search-confirm-message'></div>\n</left>\n<right>\n<div class='description'>\n<img ng-src='{{&#39;images/intro/new/import-site-confirm.png&#39; | externalImage}}'>\n<div class='text'>\n<span translate='new-intro.search-confirm.details'></span>\n</div>\n</div>\n</right>\n<back-action>\n<intro-back-button ng-if='!$ctrl.isInProcess' on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button ng-if='!$ctrl.isInProcess' on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.isInProcess'></cc-svg-icon>\n<intro-next-button ng-if='!$ctrl.isInProcess' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-import-site-confirm.html","<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<div class='title' data-hook='search-confirm-message'>\n{{::'intro.category-search.import-site-confirm.title' | translate }}\n</div>\n<div class='description'>\n<span translate='intro.category-search.import-site-confirm.body'></span>\n</div>\n<div class='validate-confirm'>\n<span translate='intro.category-search.import-site-confirm.validate-content'></span>\n</div>\n<intro-box-buttons back='$ctrl.back()' focus-next='true' next='$ctrl.next()'></intro-box-buttons>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-import-site-confirm-new.html","<intro-step-layout align-right-to='center'>\n<left>\n<div class='diptych-label' data-hook='search-confirm-message'>\n{{::'intro.category-search.import-site-confirm.title' | translate }}\n</div>\n</left>\n<right>\n<div class='description'>\n<img ng-src='{{&#39;images/intro/new/import-site-confirm.png&#39; | externalImage}}'>\n<div class='text'>\n<span translate='intro.category-search.import-site-confirm.body'></span>\n<span translate='intro.category-search.import-site-confirm.validate-content'></span>\n</div>\n</div>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button focus-if='true' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-select-user.html","<div cc-scrollbar class='intro-su' data-hook='scroll-container' intro-scrollbar ng-class='{&quot;intro-su-empty&quot;: $ctrl.results.length === 0}'>\n<button class='stage-btn round cc-icon-intro-back-arrow intro-su-top' data-hook='back-to-top' ng-click='$ctrl.onGoToTopClicked()' type='button'></button>\n<div class='intro-su-left'></div>\n<div class='intro-su-center'>\n<div class='t01a-title intro-su-title' translate='{{$ctrl.title}}'></div>\n<div class='t03a-small intro-su-subtitle'>\n<span>{{$ctrl.getResultsLength()}}</span>\n<span wix-translate-compile='{{$ctrl.resultsText}}'></span>\n</div>\n<form class='intro-su-inputs'>\n<input autocomplete='off' class='b02-small-text-field intro-su-name' data-hook='business-name-input' focus-if ng-model='$ctrl.name' type='text'>\n<span class='input-su-in'>in</span>\n<input autocomplete='off' class='b02-small-text-field intro-su-address' data-hook='business-location-input' focus-if force-selection='true' g-places-autocomplete ng-model='$ctrl.address' options='{types: [&quot;geocode&quot;]}' type='text'>\n<button class='intro-su-search cc-icon-search-intro' data-hook='search-button' ng-click='$ctrl.search()'></button>\n</form>\n<div class='intro-su-cards'>\n<business-card-static class='intro-su-bcs' data-hook='suggested-business' data='result' ng-click='$ctrl.next(result);' ng-repeat='result in $ctrl.results'></business-card-static>\n</div>\n</div>\n<div class='intro-su-right'></div>\n</div>\n<div class='a01-buttons start'>\n<span class='static-back-button skip-icon'></span>\n<button data-hook='back' ng-attr-type='button' ng-click='$ctrl.back()'>\n<i class='cc-icon-intro-next-arrow skip-icon-reverse'></i>\n<span class='button-text' translate='intro.back-button'></span>\n</button>\n</div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-attr-type='button' ng-click='$ctrl.skip()'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-select-user-new.html","<intro-step-layout align-right-to='{{$ctrl.results.length === 0 &amp;&amp; &#39;title&#39;}}'>\n<left>\n<div class='diptych-label' data-hook='input-label' translate='{{$ctrl.title}}'></div>\n</left>\n<right>\n<button class='intro-sun-top' data-hook='back-to-top' ng-click='$ctrl.onGoToTopClicked()' type='button'>\n<i class='cc-icon-intro-back-arrow intro-rounded-button-icon'></i>\n<div>{{'general.top' | translate}}</div>\n</button>\n<div cc-scrollbar class='intro-sun' data-hook='scroll-container' intro-scrollbar ng-class='{&quot;intro-su-empty&quot;: $ctrl.results.length === 0}' on-init='$ctrl.setScrollbarListener()'>\n<div class='intro-sun-subtitle'>\n<span>{{$ctrl.getResultsLength()}}</span>\n<span wix-translate-compile='{{$ctrl.resultsText}}'></span>\n</div>\n<form class='intro-sun-inputs'>\n<input autocomplete='off' class='b02-small-text-field intro-sun-name' data-hook='business-name-input' focus-if ng-model='$ctrl.name' placeholder='{{&quot;new-intro.select-user.name&quot; | translate}}' type='text'>\n<span class='input-sun-in'>{{::'new-intro.select-user.in' | translate}}</span>\n<input autocomplete='off' class='b02-small-text-field intro-sun-address' data-hook='business-location-input' focus-if force-selection='true' g-places-autocomplete ng-model='$ctrl.address' options='{types: [&quot;geocode&quot;]}' placeholder='{{&quot;new-intro.select-user.address&quot; | translate}}' type='text'>\n<button class='intro-sun-search cc-icon-search-intro intro-rounded-button-icon' data-hook='search-button' ng-click='$ctrl.search()'></button>\n</form>\n<div class='intro-su-cards'>\n<business-card-static-new class='intro-sun-bcs' data-hook='suggested-business' data='result' ng-click='$ctrl.next(result);' ng-repeat='result in $ctrl.results' show-header='false'></business-card-static-new>\n</div>\n</div>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-service-offer.html","<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<div class='label t04a-label' translate='intro.optional-label'></div>\n<form ng-submit='$ctrl.next()'>\n<div class='service-offer-title' translate='intro.service.title'></div>\n<div class='service-offer-option' data-hook='service-offer-{{::offer.type}}' ng-if='::$ctrl.shouldShowOffer(offer.type)' ng-repeat='offer in $ctrl.offers track by $index'>\n<label class='g01-checkbox'>\n<input focus-if='$index === 0' ng-change='$ctrl.onOfferChanged(offer)' ng-model='offer.checked' type='checkbox'>\n<span>{{::'intro.contentExperiment.service.' + offer.type | translate}}</span>\n</label>\n</div>\n<intro-box-buttons back='$ctrl.back()' focus-next='true'></intro-box-buttons>\n</form>\n</div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-click='$ctrl.skip()' type='button'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-service-offer-new.html","<intro-step-layout align-right-to='title'>\n<left>\n<div class='diptych-label' compile='::&#39;new-intro.service.title-new&#39; | translate'></div>\n</left>\n<right>\n<form ng-submit='$ctrl.next()'>\n<div class='service-offer-option' data-hook='service-offer-{{::offer.type}}' ng-if='::$ctrl.shouldShowOffer(offer.type)' ng-repeat='offer in $ctrl.offers track by $index'>\n<label class='g01-checkbox'>\n<input focus-if='$index === 0' ng-change='$ctrl.onOfferChanged(offer)' ng-model='offer.checked' type='checkbox'>\n<span>{{::'intro.contentExperiment.service.' + offer.type | translate}}</span>\n</label>\n</div>\n</form>\n</right>\n<back-action>\n<intro-back-button on-click='$ctrl.back()'></intro-back-button>\n</back-action>\n<skip-action>\n<intro-skip-button on-click='$ctrl.skip()'></intro-skip-button>\n</skip-action>\n<next-action>\n<intro-next-button focus-if='true' on-click='$ctrl.next()'></intro-next-button>\n</next-action>\n</intro-step-layout>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro-step-layout.html","<div class='intro-step-layout'>\n<div class='intro-left-wrap'>\n<div class='cc-icon-wix-logo intro-logo'></div>\n<div class='intro-left standard-diptych-top' data-hook='left' ng-if='$ctrl.isUsed(&#39;left&#39;)' ng-transclude='left'></div>\n</div>\n<div class='intro-right-wrap'>\n<div class='intro-right' data-hook='right' ng-class='[$ctrl.getRightClass()]' ng-if='$ctrl.isUsed(&#39;right&#39;)' ng-transclude='right'></div>\n</div>\n<div class='back-action' data-hook='back-action' ng-if='$ctrl.isUsed(&#39;backAction&#39;)' ng-transclude='backAction'></div>\n<div class='next-actions-container'>\n<div class='skip-action' data-hook='skip-action' ng-if='$ctrl.isUsed(&#39;skipAction&#39;)' ng-transclude='skipAction'></div>\n<div class='next-action' data-hook='next-action' ng-if='$ctrl.isUsed(&#39;nextAction&#39;)' ng-transclude='nextAction'></div>\n</div>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/intro.html","<div class='backdrop' data-hook='animation-backdrop' ng-show='::!$ctrl.flags.newIntroDesign'></div>\n<div class='intro-loading' data-hook='loading'>\n<div class='message' translate='intro.loading-message'></div>\n</div>\n<div class='intro-content' data-hook='animation-content'>\n<ui-view ng-class='[$ctrl.lastNavigation, {animatable: $ctrl.flags.newIntroDesign}]'></ui-view>\n<div class='cc-icon-wix-logo intro-logo' ng-if='::!$ctrl.flags.newIntroDesign'></div>\n</div>\n<svg>\n<filter id='intro-image-blur'>\n<feGaussianBlur stdDeviation='60'></feGaussianBlur>\n</filter>\n</svg>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/business-card-editable-new.html","<div class='business-card-editable-new'>\n<div class='card-header'>\n<div class='card-input logo'>\n<label>{{::'general.logo' | translate }}</label>\n<business-card-logo-new class='card-logo' data-hook='identify-logo' enable-edit='true' is-uploading='$ctrl.logoManager.uploadingLogo' on-delete='$ctrl.logoManager.deleteLogo()' on-edit='$ctrl.logoManager.uploadLogo(file)' origin='$ctrl.getOrigin()' upload-error='$ctrl.logoManager.hasUploadError' url='$ctrl.logoManager.getMediaUrl()'></business-card-logo-new>\n</div>\n</div>\n<div class='card-body' name='IntroForm' ng-form>\n<div class='card-inputs-container'></div>\n<div class='card-input name'>\n<label>{{::'business_card.name.label' | translate }}</label>\n<input cc-select-on-focus data-hook='company-name' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;company name&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.name' placeholder='{{::&#39;business_card.name.placeholder&#39; | translate}}' type='text'>\n</div>\n<div class='card-input'>\n<label>{{::'new-intro.business-card-editable.email.label' | translate }}</label>\n<input autocomplete='off' cc-select-on-focus class='business-email' data-hook='email' enter-to-tab field-track='$ctrl.onFieldChanged(&#39;email&#39;, &#39;text&#39;, $old, $value)' name='email' ng-model='$ctrl.data.contactDetails.email' ng-pattern='$ctrl.$translate.instant(&#39;regex.email_format&#39;)' placeholder='{{::&#39;business_card.email.placeholder&#39; | translate}}' type='text'>\n<div class='email-invalid-tooltip' data-hook='email-invalid-tooltip' ng-if='IntroForm.email.$error.pattern'>\n<cc-validation tooltip='intro_card_email_invalid'></cc-validation>\n</div>\n</div>\n<div class='card-input address'>\n<label>{{::'business_card.address.label' | translate }}</label>\n<textarea cc-select-on-focus data-hook='address' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;address&quot;, &quot;text&quot;, $old, $value)' intro-address-formatter ng-attr-placeholder='{{::&#39;business_card.address.placeholder&#39; | translate}}' ng-model='$ctrl.data.contactDetails.address.fullAddress' rows='3'></textarea>\n</div>\n<div class='card-input'>\n<label>{{::'business_card.phone.label' | translate }}</label>\n<input cc-select-on-focus data-hook='phone' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;phone&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.contactDetails.phone' placeholder='{{::&#39;business_card.phone.placeholder&#39; | translate}}' type='text'>\n</div>\n<div class='card-input fax'>\n<label>{{::'business_card.fax.label' | translate }}</label>\n<input cc-select-on-focus data-hook='fax' enter-to-tab field-track='$ctrl.onFieldChanged(&quot;fax&quot;, &quot;text&quot;, $old, $value)' ng-model='$ctrl.data.contactDetails.fax' placeholder='{{::&#39;business_card.fax.placeholder&#39; | translate}}' type='text'>\n</div>\n<div class='card-input' ng-if='$ctrl.flags.introWebsiteAddressField'>\n<label class='website-field-label'>\n{{::'business_card.website.label' | translate}}\n<i cc-tooltip-custom-class='tooltip-margin-top' cc-tooltip-position='top' cc-tooltip='intro_website_help' class='cc-icon-info'></i>\n</label>\n<input autocomplete='off' cc-select-on-focus data-hook='website' enter-to-tab field-track='$ctrl.onFieldChanged(&#39;website&#39;, &#39;text&#39;, $old, $value)' name='website' ng-class='{&#39;website_address_input_when_error&#39;: !$ctrl.isWebsiteAddressValid }' ng-keyup='$ctrl.handleProblemsInWebsiteAddress()' ng-model='$ctrl.data.contactDetails.website' placeholder='{{::&#39;business_card.website_address.placeholder&#39; | translate}}' type='text'>\n<div class='website-address-invalid-tooltip' data-hook='website-address-invalid-tooltip' ng-if='!$ctrl.isWebsiteAddressValid'>\n<cc-validation tooltip='intro_card_website_address_invalid'></cc-validation>\n</div>\n</div>\n<ng-include src='&#39;views/intro/business-card/business-card-social-links-new.html&#39;'></ng-include>\n</div>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/business-card/business-card-social-links-new.html","<div class='card-input social'>\n<label class='label-wrapper'>{{::'business_card.social-media.label' | translate}}</label>\n<div class='links-wrapper'>\n<div class='social-link-wrapper' ng-repeat='link in $ctrl.data.socialLinks track by $index'>\n<cc-svg-icon add-cc-svg-icon-class='false' icon='{{link.platform | socialIcon}}'></cc-svg-icon>\n<input cc-select-on-focus data-hook='social-link' enter-to-tab field-track='$ctrl.onFieldChanged(link.platform, &quot;social&quot;, $old, $value)' focus-if='$ctrl.focusedSocial === link' ng-attr-placeholder='{{::&#39;business_card.social.placeholder&#39; | translate}}' ng-blur='showError = true; $ctrl.focusedSocial = null;' ng-change='$ctrl.onSocialChanged(link)' ng-class='{&#39;invalid-social-link&#39; : showError !== link &amp;&amp; $ctrl.isLinkInvalid(link)}' ng-focus='showError = false' ng-model-options='{debounce: {&#39;default&#39;: 500, &#39;blur&#39;: 0}}' ng-model='link.url' type='text'>\n<div cc-tooltip-position='top' cc-tooltip='intro_card_url_invalid' class='social-link-validation cc-icon-negative-validation'></div>\n<div cc-tooltip-position='top' cc-tooltip='intro_delete' class='social-link-delete cc-icon-delete' ng-click='$ctrl.deleteSocialLink(link)'></div>\n</div>\n<div class='add-button' data-hook='add-social' ng-click='$ctrl.addEmptySocialLink()' ng-if='$ctrl.enableAddSocialLink()'>\n<div class='add-button-icon cc-icon-add-small intro-rounded-button-icon'></div>\n<div class='add-button-label'>{{::'business_card.add-social-network.label' | translate}}</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("adiIntroTemplates")}catch(e){angular.module("adiIntroTemplates",[])}angular.module("adiIntroTemplates").run(["$templateCache",function(e){e.put("views/intro/business-card/business-card-logo-new.html","<div class='logo-new'>\n<file-upload-select data-hook='logo-upload-file' ng-if='!$ctrl.useMediaManager' on-select='$ctrl.onEdit({file : $file})'></file-upload-select>\n<div class='intro-bch-logo-wrapper'>\n<div adi-automation='{{$ctrl.url}}' class='intro-bch-logo-image' data-hook='logo-image' ng-click='$ctrl.enableEdit &amp;&amp; $ctrl.clickOnInputFile()' ng-style='{&#39;background-image&#39;: $ctrl.url &amp;&amp; !$ctrl.isUploading ? &#39;url(&#39; + $ctrl.url + &#39;)&#39; : &#39;&#39;}'>\n<div class='logo-wrapping-circle' ng-if='$ctrl.showWrappingCircle'></div>\n</div>\n<button class='intro-logo-edit fade-down' data-hook='edit-logo' ng-click='$ctrl.editLogoClick()' ng-if='!$ctrl.isUploading'>\n<cc-svg-icon class='intro-logo-edit-icon' icon='{{$ctrl.logoButtonIcon}}'></cc-svg-icon>\n</button>\n<div class='intro-logo-edit-dropdown' ng-if='!$ctrl.logoIsPlaceholder() &amp;&amp; !$ctrl.justReplaceButton'>\n<div class='item' data-hook='replace-button' ng-click='$ctrl.clickOnInputFile()'>\n<i class='cc-icon-replace'></i>\n<span>{{::'new-intro.business_card.logo.replace' | translate}}</span>\n</div>\n<div class='item' data-hook='delete-button' ng-click='$ctrl.onDelete()'>\n<i class='cc-icon-delete'></i>\n<span>{{::'new-intro.business_card.logo.delete' | translate}}</span>\n</div>\n</div>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.isUploading'></cc-svg-icon>\n</div>\n</div>\n")}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(228),r=i(6),a=function(){function e(t,i,n,o,a){var s=this;this.$rootScope=t,this.$window=i,this.initService=n,this.exitNotification=o,this.flags=a,this.isBuilder=this.isState(r.STATES.BUILDER),this.isIntro=this.isState(r.STATES.INTRO),t.$on("$stateChangeStart",function(e,t,i,n){return s.onStateChangeStart(e,t,i,n)}),e.bodyFlags.forEach(function(e){a[e]&&s.setBodyAttr(e,a[e])})}return e.$inject=["$rootScope","$window","initService","exitNotification","flags"],e.prototype.setBodyAttr=function(e,t){this.$window.document.body.setAttribute("data-experiment-"+n.kebabCase(e),t)},e.prototype.isState=function(e){return function(t,i){return void 0===i&&(i=!1),i?t.name===e:0===t.name.indexOf(e)}},e.prototype.onStateChangeStart=function(e,t,i,n){var o=this,a=this.isIntro(n)&&this.isIntro(t,!0),s=!this.isIntro(n)&&this.isIntro(t,!0),l=this.isBuilder(n)&&!i.storyId,c=this.isState(r.STATES.BUILDER_STORY_PREVIEW)(n)&&this.flags.previewRevision;!s&&(a||l||c)?e.preventDefault():this.isBuilder(n)&&this.isIntro(t)&&(this.exitNotification.off(),this.$window.setTimeout(function(){return o.$window.location.reload(!0)}))},e.bodyFlags=["mergedHeader","cardsToPanels","cardsToPanels","smartAssistTpa","newIntroDesign","membersArea","newPreviewMode","newTopBar","largerStage","removeSpinnerAsStageReady","disableUndoRedo","changeBusinessDetails","superRes","widgetAppsPanel","introShowMoreKits","textManagerUxImprovement"],e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("appMain",{template:o,controller:a,transclude:!0})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);angular.module("siteGeneratorCommon").config(["$logProvider","flagsProvider","wixAngularTopologyProvider","localStorageServiceProvider","applicationParameters","tpaAppInstanceHolder","clientTopology","sdkConfigProvider",function(e,t,i,n,o,r,a,s){o.clientTopology=a,i.setStaticsUrl(a.staticsUrl),e.debugEnabled(-1!==window.location.href.indexOf("debug")),n.setPrefix("ob"),s.registerAppDefIdGetter(function(){return o.getCurrentlyManaged()}),s.registerAppInstanceIdGetter(function(){return r.getCurrentlyManagedInstance.bind(r)}),t.designKit=!0,t.consumerMode=!0,a.production||!1===t.silentBI||(t.silentBI=!0),t.autoCrop=3}]),angular.module("siteGeneratorStaticsConsumerAppConfig").config(["$compileProvider","$logProvider","clientTopology","CCSvgIconServiceProvider","sdkConfigProvider",function(e,t,i,n,o){n.setSpritePrefix(""),i.production&&(e.debugInfoEnabled(!1),t.debugEnabled(!1)),o.useNewMediaManager()}]).run(["contentElements",function(e){e.load()}]).run(["clientTopology","flags","cmsApi","jsApiManager","wixWizIntegration","CcDialogBuilder","ccTooltipManager","experimentManager","headless","$window","applicationState","obFedops",function(e,t,i,n,o,r,a,s,l,c,d,u){AdiCoreSanta.setFlags(t),t.contentVersionId&&i.setContentVersionId(t.contentVersionId),"en"!==e.locale&&i.setLocale(e.locale),e.esi&&(n.setEditorSessionId(e.esi),o.setSessionId(e.esi)),r.setIsSilentCallback(d.isSilent),a.setIsSilentCallback(d.isSilent),t.headlessApi&&(c.headless=l,t.silentMode=!0,t.noTour=!0,t.noSpinners=!0)}]).run(["localizedComponentAttributes","$translate",function(e,t){n.each([{key:"contactForm",messagePrefix:"viewer.contact-form.attributes."},{key:"modelTree",messagePrefix:"modelTree."},{key:"defaults",messagePrefix:"defaults."},{key:"dropDownMenu",messagePrefix:"viewer.drop-down-menu."}],function(i){var o=i.key,r=e.getAttributesTemplateByType(o);if(r){var a=n.clone(r);n.each(n.keys(a),function(e){a[e]=t.instant(i.messagePrefix+e)}),e.setLocalizedAttributes(o,a)}})}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.clientTopology=e}return e.$inject=["clientTopology"],e.prototype.load=function(e){var t=this;return new Promise(function(i,n){var o=document.createElement("script");o.onload=function(){var t=window[e.global];i(t)},o.onerror=function(){n()},o.async=!0,o.type="application/javascript";var r=t.clientTopology.staticBaseUrl;e.path?o.src=r+"unpkg/"+e.name+"@"+e.version+"/"+e.path:o.src=r+"unpkg/"+e.name+"@"+e.version;var a=document.getElementsByTagName("head")[0];a.insertBefore(o,a.lastChild)})},e}();t.PackageLoader=n,angular.module("siteGeneratorBuilderInternal").service("packageLoader",n)},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(546),a=function(){function e(e,t,i){this.clientTopology=e,this.flags=t,this.packageLoader=i,this.predictionSequnce=[],this.dsc=["loading_first_time_start","loading_first_time_complete","builder_loading_existing_site_start","loading_existing_site_complete","builder_undo_/_redo_last_change","builder_top_bar_help_click","builder_top_bar_go_to_my_dashboard","builder_top_bar_go_to_site_settings","builder_top_bar_connect_domain_click","builder_connect_domain_page_view","builder_connect_domain_navigate_to_domains_pages","builder_connect_domain_close_page","builder_top_bar_view_site_click","builder_go_to_editor_click","builder_go_to_editor_notification_page_view","builder_go_to_editor_continue_to_pro_editor_click","builder_go_to_editor_close_page","builder_top_bar_preview_site_click","builder_preview_site_page_view","builder_preview_site_switch_to_mobile/desktop_view","builder_preview_site_close_page","builder_top_bar_publish_site_click","builder_publish_site_congrats_page_view","builder_publish_site_close_page","builder_zoom_in_/_out","builder_top_bar_give_feedback_click","builder_top_bar_create_new_site","builder_top_bar_/_seo_panel_get_found_on_google_click","builder_top_bar_site_menu_dialog_open","builder_publish_&_continue_click_(first_publish_flow)","builder_publish_site_congrats_page_click_on_done_button","builder_publish_site_congrats_page_click_on_view_site","builder_publish_site_congrats_page_click_on_social","contenteditor_update_field","contenteditor_value_was_deleted","contenteditor_click_on_hide/unhide","contenteditor_switch_media_type_click","contenteditor_click_on_replace_/_organize_media","contenteditor_crop_image_dialog_is_shown","contenteditor_image_crop_zoom_in_/_zoom_out","contenteditor_image_crop_cancel","contenteditor_link_dialog_is_loaded","contenteditor_link_dialog_done_clicked","contenteditor_link_dialog_closed","contenteditor_click_on_add/_duplicate_item_in_a_list","contenteditor_reorder_item_in_a_list","contenteditor_switch_list_item_to_page","contenteditor_gallery_layout_window_opened","contenteditor_gallery_layout_changed_","contenteditor_failover_/_rearrange_solution","contenteditor_failover_/_rearrange_layout","contenteditor_fail_to_fit_layout_(cant_find_a_proper_layout)","contenteditor_data_inserted_to_tpa_automatically","contenteditor_click_on_hide/show_on_item_in_list_items","contenteditor_rich_text_click","contenteditor_image_crop_save","contenteditor_open_onstage_(osi)_quick_action_dropdown","contenteditor_onstage_(osi)_quick_action","contenteditor_hide_component_from_site","sectionmanagement_change_a_section_layout","sectionmanagement_switch_section_type_in_the_add_section_panel","sectionmanagement_add_section_to_page","sectionmanagement_section_menu_delete_section_click","sectionmanagement_move_section_within_the_page_start_dragging","sectionmanagement_move_section_within_the_page_click","sectionmanagement_section_menu_move_section_to_another_page_click","sectionmanagement_section_menu_duplicate_section_click","sectionmanagement_show_more_section_/_page_layouts_(on_scroll)","sectionmanagement_add_section_click","sectionmanagement_add_section_to_page_start_dragging",'sectionmanagement_click_on_"more_actions"_menu',"sectionmanagement_plan_to_add_tpa_in_welcome_tour","sitedesign_click_on_desired_design","sitedesign_click_on_desired_font","sitedesign_click_on_reset_design","sitedesign_design_window_was_closed","sitedesign_customize_design_color_palette_mode_change_color_main_click","sitedesign_customize_design_color_palette_mode_color_select","sitedesign_customize_design_color_palette_mode_advanced_editing_color_click","sitedesign_click_on_desired_palette_from_customize_pallete","sitedesign_customize_design_change_element_animation_click","sitedesign_customize_design_change_dark/light_mode","sitedesign_customize_design_change_scroll_animation_click","sitedesign_customize_design_advanced_colors_are_hard_to_read_displayed","sitedesign_customize_design_advanced_user_clicks_fix_colors","sitedesign_change_font_size_click","sitedesign_customize_design_override_section_design_displayed","sitedesign_customize_design_override_section_design_click_apply","sitedesign_create_palette_from_logo_algo_start","pagesmanager_add_page_click","pagesmanager_switch_page_type_in_the_add_page_panel","pagesmanager_click_on_desired_new_page","pagesmanager_hide_/_show_page","pagesmanager_rename_page","pagesmanager_set_page_as_subpage/main_page","pagesmanager_click_on_delete_page_","pagesmanager_click_on_set_page_as_homepage","pagesmanager_seo_panel_is_loaded","pagesmanager_seo_panel_field_was_updated","pagesmanager_transition_between_pages_updated","pagesmanager_reorder_page","pagesmanager_duplicate_page_click","pagesmanager_click_on_page","pagesmanager_click_on_settings","mediamanagement_replace_media_window_is_loaded","mediamanagement_close_media_window","mediamanagement_approve_changes_in_the_media_window","mediamanagement_gallery_organizer_click_add_more_media","mediamanagement_gallery_organizer_media_added_to_organizer","mediamanagement_gallery_organizer_delete_media","mediamanagement_external_video_search_video_click","mediamanagement_external_video_search_completed","mediamanagement_external_video_switch_search_source","mediamanagement_preview_media_click_","mediamanagement_preview_media_loaded","mediamanagement_media_settings_show","mediamanagement_media_settings_field_was_updated","mediamanagement_gallery_organizer_close_add_more_media_window","apps_click_on_manage_app","builder_undo_/_redo_last_change_(fetch_from_server)","apps_click_on_edit_app_tpa_settings","tour_start","tour_phase_during_tour","tour_complete","tour_assistant_menu_shown","tour_skip_tour","tour_close_assistant","sectiondesign_change_color_click","sectiondesign_change_font_size_click","sectiondesign_change_element_animation_click","sectiondesign_change_scroll_animation_click","tour_quit_tour","tour_first_step_selection_(for_me_or_show_me)","sectiondesign_change_text_alignment_click","sectiondesign_change_header_transparency_start","tour_last_step_selection_(keep_or_try_another)","tour_timeout","tour_assistant_video_modal_loaded","tour_assistant_video_modal_close","tour_smart_assist_card_mute"],this.events=["66:125","66:134","66:135","66:139","66:140","66:142","66:148","66:149","66:150","66:151","66:152","66:153","66:154","66:155","66:156","66:157","66:158","66:159","66:160","66:161","66:162","66:163","66:164","66:165","66:166","66:178","66:180","66:181","66:182","66:183","66:186","66:187","66:188","66:202","66:203","66:204","66:206","66:207","66:208","66:209","66:211","66:212","66:213","66:214","66:215","66:217","66:219","66:221","66:222","66:225","66:226","66:227","66:229","66:230","66:232","66:233","66:235","66:236","66:241","66:251","66:254","66:255","66:257","66:259","66:260","66:262","66:264","66:266","66:268","66:269","66:270","66:271","66:301","66:305","66:307","66:309","66:311","66:312","66:313","66:314","66:316","66:318","66:323","66:325","66:326","66:328","66:330","66:331","66:333","66:349","66:352","66:353","66:356","66:357","66:358","66:359","66:361","66:362","66:363","66:364","66:365","66:367","66:368","66:369","66:400","66:401","66:402","66:403","66:404","66:405","66:406","66:407","66:408","66:409","66:410","66:411","66:412","66:414","66:450","66:451","66:453","66:50","66:51","66:52","66:53","66:54","66:55","66:551","66:554","66:557","66:559","66:56","66:57","66:570","66:572","66:58","66:59","66:63","66:64","66:65"],this.initated=!1,this.recalaculate=!1,this.threshold=1,t.predictionModel&&this.init()}return e.$inject=["clientTopology","flags","packageLoader"],e.prototype.init=function(){var e=this;this.packageLoader.load({name:"@tensorflow/tfjs",version:"0.11.2",path:"",global:"tf"}).then(function(t){e.tf=t,e.loadModel()})},e.prototype.loadModel=function(){return n(this,void 0,void 0,function(){var e,t;return o(this,function(i){switch(i.label){case 0:return e=this.clientTopology.staticsUrl,t=this,[4,this.tf.loadModel(e+"/predictions-artifacts/model.json")];case 1:return t.model=i.sent(),this.initated=!0,[2]}})})},e.prototype.getPredictions=function(){var e=this;if(this.tf){if(!this.initated||this.predictionSequnce.length<19)return[];var t=[],i=this.tf.oneHot(this.tf.tensor1d(this.predictionSequnce,"int32"),140).expandDims(0);i=this.tf.cast(i,"float32");var n=this.model.predict(i).dataSync(),o=n.slice();o.sort(function(e,t){return t-e});for(var r=o.findIndex(function(t){return t<=e.threshold});r<4;r++){var a=n.indexOf(o[r]);t.push({description:this.dsc[a],propability:n[a].toFixed(2)})}return this.recalaculate=!1,t}},e.prototype.setEvent=function(e,t){if(this.tf){var i=this.events.indexOf(e+":"+t);-1!==i&&(console.log(this.predictionSequnce.length),this.predictionSequnce.push(i),this.predictionSequnce.length>19&&(this.recalaculate=!0,this.predictionSequnce.shift()))}},e}();t.PredictionService=a,r.module("siteGeneratorBuilderInternal").service("prediction",a)},function(e,t){e.exports=angular},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(548),o=i(549),r=i(550),a=i(551),s=i(553),l=i(554),c=i(555),d=i(556),u=i(557),p=i(558),g=i(559),h=i(560),m=i(561),f=i(562),v=i(572),S=i(573),y=i(574);t.default={buildSite:c.default,isSiteBuilt:d.default,addPage:n.default,deletePage:s.default,setHomepage:p.default,renamePage:u.default,movePage:S.default,changeKit:o.default,deleteSection:r.default,addSection:a.default,addListItem:l.default,removeListItem:g.default,moveListItem:h.default,moveSection:m.default,updateSection:f.default,publishSite:y.default,changeSectionLayout:v.default}},function(e,t,i){"use strict";function n(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h){return function(r){var a,u=r.tpaType,h=function(e){var t=o.utilCreateSelectedOffersMap(),i=n.suggestedPages(t[s.tpaTypes.Stores.type],!0).pageSuggestions.concat(l.getTpaPageSuggestions()).find(function(t){return t.id===e});return i&&i.ceType}(r.alias);return u?a=d.addTpaPage(u):(g.pagesManager.clickOnDesiredNewPage(h,r.alias,null,null,null,null,null),a=e.addPage(r.alias,r.afterPageId).then(function(e){var t=n.suggestedSectionsByPage(r.alias);return t&&t.length?(c.forceAddMode(!0),o.makeSectionInPage(e,t[0],null).then(function(){c.forceAddMode(!1),g.pagesManager.addNewPageSuccess(null,h,e.alias,e.id,null,null,null,null,"","by user",null)})):p.when()})),a.then(function(){t.refresh(),i.calcMenuAnchors()})}}n.$inject=["pagesManager","menuService","consumerMenu","contentManager","sectionManager","modelTree","undoRedo","applicationParameters","tpaSettings","applicationState","initTPA","tpaService","$p","consumerBiLogger","flags"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";function n(e,t,i){return function(n){var o=i.getActiveTheme("mainKit").id,r=i.getRegularThemes().map(function(e){return e.id}).indexOf(n.id);return t.siteDesign.clickOnDesiredDesign(o,r,"tap on design",n.id),e.setActiveMainKit(n.id).then(function(){t.siteDesign.designChangeSuccess(o,r,"tap on design",n.id)})}}n.$inject=["designKitManager","consumerBiLogger","themeChooser"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";o.$inject=["modelTree","sectionManager","undoRedo"],Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);function o(e,t,i){return function(i){var o=i.pageId&&e.getPageNodeById(i.pageId),r=o&&i.sectionId&&n.find(o.children,{id:i.sectionId});return r&&t.deleteSection(r,"more-actions")}}t.default=o},function(e,t,i){"use strict";o.$inject=["pagesManager","sectionManager","consumerBiLogger","applicationState","modelTree","tpaService","$p","flags","tpaTypes","modelTreeHelpers"],Object.defineProperty(t,"__esModule",{value:!0});var n=i(65);function o(e,t,i,o,r,a,s,l,c,d){return function(e){(console.log("adding section "+e.alias),"Blog_Post_Gallery"===e.ceType&&l.blog2)&&(r.getTpaPageNodeByType(c.Blog)||(e.ceType="Blog2_Custom_Feed_Widget"));var u={ceType:e.ceType,id:e.alias,rawSectionBrief:{cardinality:e.cardinality,ceType:e.ceType,id:e.alias,item:{prefix:"",hidden:[[]],labels:{}},header:{prefix:"",hidden:[[]],labels:{}},footer:{prefix:"",hidden:[[]],labels:{}}}};o.forceAddMode(!0);var p=r.getPageNodeById(e.pageId),g=t.generateDraftNode(p,u),h=g&&a.getAppId(g),m=n.SectionManager.isNodeDuplicated(g),f=r.getNodeById(e.afterSectionId),v=f?d.getPositionInPage(f)+1:0;i.sectionManagement.addSectionToPage(g.contentElementType,g.alias,v,null,null,null,null,"tap",h,!1,m);var S=r.getPageNodeById(e.pageId);return S?t.makeSectionInPage(S,u,e.afterSectionId).then(function(e){i.sectionManagement.addSectionToPageSuccess(null,e.id,v,e.contentElementType,e.alias,null,null,null,null,"tap",h,!1,m)}).then(function(){o.forceAddMode(!1)}):s.when()}}t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,o,r,a,s,l,c){var d=this;this.node=e,this.imageUpscale=t,this.imageUpscaleEditor=i,this.undoRedo=o,this.sitePartTypes=r,this.storyServices=a,this.consumerBiLogger=s,this.sectionMedia=l,this.$scope=c,this.startLoading=n.debounce(function(){d.$scope.$apply(function(){d.isLoading=!0})},200,{trailing:!0}),this.fireOnDialogOpenBI(e),this.upscaleMethod=t.getUpscaleMethod(e),this.isFirstTimeLoading=!0,this.startLoading()}return e.$inject=["node","imageUpscale","imageUpscaleEditor","undoRedo","sitePartTypes","storyServices","consumerBiLogger","sectionMedia","$scope"],Object.defineProperty(e.prototype,"imageUrl",{get:function(){return this.isSuperUpscaled?this.imageUpscale.getImageUrlSuperScaled(this.node):this.imageUpscale.getImageUrlClassicScaled(this.node)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageUpscale.getImageLayout(this.node).width+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageUpscale.getImageLayout(this.node).height+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectFit",{get:function(){return this.imageUpscale.getImageLayout(this.node).displayMode===core.RenderedMediaLayoutDisplayMode.FIT?"contain":"cover"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSuperUpscaled",{get:function(){return this.upscaleMethod===core.MediaUpscaleMethod.super},enumerable:!0,configurable:!0}),e.prototype.onCancel=function(){this.fireCancelDialogBI(),this.imageUpscaleEditor.close()},e.prototype.onApply=function(){this.fireApplyBI(),this.imageUpscale.setUpscaleMethod(this.node,this.upscaleMethod),this.undoRedo.captureOperation(!1),this.storyServices.reRender(this.sitePartTypes.BODY,this.node.containerPageId),this.imageUpscaleEditor.close()},e.prototype.onToggleUpscaleMethod=function(){this.stopLoading(),this.startLoading(),this.upscaleMethod=this.isSuperUpscaled?core.MediaUpscaleMethod.classic:core.MediaUpscaleMethod.super,this.fireToggleClickBI()},e.prototype.onImageLoaded=function(){this.stopLoading()},e.prototype.onImageReplaced=function(){this.fireToggleClickSuccessBI(),this.stopLoading()},e.prototype.stopLoading=function(){this.startLoading.cancel(),this.isLoading=!1,this.isFirstTimeLoading=!1},e.prototype.fireOnDialogOpenBI=function(e){this.consumerBiLogger.contentEditor.imageResolutionImproveDialogIsLoaded(e.id,e.alias,e.getSpecificContentElementType())},e.prototype.fireCancelDialogBI=function(){this.consumerBiLogger.contentEditor.imageResolutionImproveDialogCancel(this.node.id,this.node.alias,this.node.getSpecificContentElementType())},e.prototype.fireApplyBI=function(){var e=this.getBIData();this.consumerBiLogger.contentEditor.imageResolutionImproveDialogApprove(e.improvedImageUrl,e.originalUrl,e.placeholderSize,e.originalSize,e.action,e.nodeId,e.sectionAlias,e.sectionType)},e.prototype.fireToggleClickBI=function(){var e=this.getBIData();this.consumerBiLogger.contentEditor.imageResolutionImproveToggleClick(e.originalUrl,e.placeholderSize,e.originalSize,e.action,e.nodeId,e.sectionAlias,e.sectionType)},e.prototype.fireToggleClickSuccessBI=function(){var e=this.getBIData();this.consumerBiLogger.contentEditor.imageResolutionImproveToggleSuccess(e.improvedImageUrl,e.originalUrl,e.placeholderSize,e.originalSize,e.action,e.nodeId,e.sectionAlias,e.sectionType)},e.prototype.getBIData=function(){var e=this.imageUpscale.getImageLayout(this.node),t=e.width,i=e.height,n=this.sectionMedia.getMedia(this.node),o=n.width,r=n.height;return{originalUrl:this.imageUpscale.getImageUrlClassicScaled(this.node),originalSize:o+" X "+r,improvedImageUrl:this.imageUpscale.getImageUrlSuperScaled(this.node),placeholderSize:t+" X "+i,action:this.isSuperUpscaled?"on":"off",nodeId:this.node.id,sectionAlias:this.node.alias,sectionType:this.node.getSpecificContentElementType()}},e}();t.ImageUpscaleModal=o},function(e,t,i){"use strict";function n(e,t,i,n){return function(o){var r=i.getNodeById(o.pageId);return t.pagesManager.clickOnDeletePage(r&&n.getAppIdByPageNode(r)),e.deletePage(o.pageId)}}n.$inject=["pagesPanelManager","consumerBiLogger","modelTree","tpaService"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";o.$inject=["listPanelManager","modelTree","consumerBiLogger","flags"],Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);function o(e,t,i,o){return function(r){console.log("adding list item"+r);var a=t.getNodeById(r.sectionId);i.contentEditor.clickOnAddDuplicateItemInAList(r.sectionId,a.contentElementType,a.alias,"new");var s=t.getPageNodeById(r.pageId),l=o.lodash4?n.find(s.children,["id",r.sectionId]):n[String("find")](s.children,{id:r.sectionId});return l.isList()&&e.createItemNodeAndAddToList(l)}}t.default=o},function(e,t,i){"use strict";r.$inject=["initService","storyServices","introManager","designKitManager","FONT_TO_KIT","paletteGenerator","colorationUtils","modelTreeHelpers","introContentElementGenerator","themeChooser","miscUtils","$q","clientTopology","wixmp","flags","$stateParams"];var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0);function r(e,t,i,r,a,s,l,c,d,u,p,g,h,m,f,v){return function(i){return function(){var i=v.storyId;return e.getStory(i,!0).then(function(){return o.get(t,"story.headlessSiteBuildDone")})}().then(function(t){if(t)throw"site is already built";var r=g.when().then(function(){return f.waas&&function(e){o.defaults(e,{serviceOffer:[{type:"Stores",checked:!1},{type:"Bookings",checked:!1},{type:"GetSubscribers",checked:!1},{type:"Blog",checked:!1}]})}(i)}).then(function(){return f.waas&&function(e){if(!e.extra||!e.extra.logos)return;if(!e.media||!e.media.logos)return e.media||(e.media={displayLogo:!0}),o.isArray(e.extra.logos)||(e.extra.logos=[e.extra.logos]),function(e){return g.all(e.map(function(e){return function(e){var t=e.url;return t&&t.match(/.svg$/)}(e)?function(e){var t=g.defer(),i=f.MediaManager3||f.MediaManager3Migrate?m.Source(m.sources.PRIVATE_SITE,{siteMediaToken:h.siteMediaToken}):m.Source(m.sources.PRIVATE),n=new Image;return n.crossOrigin="anonymous",n.onload=function(){var o=function(){var e=document.createElement("canvas");return e.style.display="none",document.body.appendChild(e),e}();!function(e,t){var i=e.getContext("2d");e.height=t.height,e.width=t.width,i.drawImage(t,0,0)}(o,n),o.toBlob(function(n){try{m.Uploader.upload([{uploadFn:i.item.upload,source:function(e,t){return{mediaType:"picture",file:new File([e],t.replace(".svg",".png"))}}(n,e.fileName||e.url)}])[0].deferred.promise.then(function(e){return t.resolve(e.data)},function(i){return S(i,t,e)})}catch(i){S(i,t,e)}finally{document.body.removeChild(o)}})},n.src=e.url,t.promise}(e):e}))}(e.extra.logos).then(function(t){e.media.logos=t.map(function(e){return function(e){var t=e.file_name?function(e){return{name:e.original_file_name,fileUrl:e.file_url?function(e){if("string"!=typeof e)throw new Error("URI is not a string");return e.replace(/([a-z\-_0-9]+)\/\//gi,"$1/")}(e.file_url):null,height:e.height||null,width:e.width||null,id:e.file_name,sourceUrl:e.source_url||null,fileInput:e.file_input?function(e){if(!e)return null;if("string"==typeof e){if(["{","["].indexOf(e[0])>=0)try{return JSON.parse(e)}catch(e){return{error:"Can`t parse JSON"}}return{message:e}}return e}(e.file_input):null}}(e):e;return p.mediaGalleryAdapter.convertToMediaObject(t)}(e)}).map(function(e){return{data:n({},e,{mediaType:e.fileUrl.match(/.svg$/)?"shape":"clipart"}),url:"//static.wixstatic.com/"+e.fileUrl,localFile:{data:e}}})})}(i)}).then(function(){return e.initByHeadless(i)});return f.waas?r.then(function(){!function(e){var t=c.getContentElementByType("GeneralDescription"),i=o.get(e,"extra.tagline");i&&o.set(t,"values.BusinessTagline.value",i)}(i)}):r})};function S(e,t,i){console.error("Failed to upload image:",e),t.resolve(i)}}t.default=r},function(e,t,i){"use strict";o.$inject=["storyServices"],Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);function o(e){return function(){return n.get(e,"story.headlessSiteBuildDone")}}t.default=o},function(e,t,i){"use strict";function n(e,t,i,n,o,r,a){return function(n){if(n.name){var s=i.getNodeById(n.pageId);s||r.reject(),n.name=t.fixPageNameIfNeeded(n.name),e.renamePage(n.pageId,n.name),a.pagesManager.renamePage(s&&o.getAppIdByPageNode(s))}return r.when()}}n.$inject=["pagesManager","pagesPanelManager","modelTree","undoRedo","tpaService","$p","consumerBiLogger"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";function n(e,t,i,n){return function(i){return t.getNodeById(i.pageId)||n.reject(),e.setHomeById(i.pageId),n.when()}}n.$inject=["pagesManager","modelTree","undoRedo","$p"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";o.$inject=["sectionManager","nodeManipulationService","$p","modelTree","consumerBiLogger"],Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);function o(e,t,i,o,r){return function(a){console.log("Removing list item"+a);var s=o.getPageNodeById(a.pageId),l=s&&n.find(s.children,{id:a.sectionId}),c=l.id+"."+a.listItemNumber,d=l&&l.isList()&&n.find(l.children,{id:c});if(d&&d.isListItem){var u=i.defer(),p=t.nodeIndexAndStatus(l,d);return t.deleteNode(d,a.pageId,!1,function(){e.removeListItem(l,d,p.indexInVisibleItemsIgnoringHeader).then(function(){r.contentEditor.valueWasDeleted(c,d.contentElementType,d.alias,"list","list type")}).then(function(){u.resolve()})}),u.promise}console.log(d?"Can't delete list header/footer":"Couldn't find node")}}t.default=o},function(e,t,i){"use strict";function n(e,t,i){return function(e){return console.log("moving list item"+e),i.reject()}}n.$inject=["nodeManipulationService","modelTree","$p"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";function n(e,t,i,n,o,r,a){return function(s){n.insertNodeAfter(s.pageId,s.sectionId,s.afterSectionId,!0);var l=i.getNodeById(s.sectionId),c=i.getNodeById(s.afterSectionId),d=a.getPositionInPage(l),u=c?a.getPositionInPage(c):0,p=u>d?"down":u<d?"up":"",g=l&&o.getAppId(l);return r.sectionManagement.moveSectionWithinThePageClick(s.sectionId,l.contentElementType,l.alias,u,d,p,g),e.moveSectionOnPage(s.pageId,s.sectionId,s.afterSectionId).then(function(){r.sectionManagement.sectionMovedWithinThePageSuccess(s.sectionId,l.contentElementType,l.alias,u,d,p,g),t.calcMenuAnchors()})}}n.$inject=["simpleSolutionManager","consumerMenu","modelTree","nodeManipulationService","tpaService","consumerBiLogger","modelTreeHelpers"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";s.$inject=["modelTree","layoutSolver","undoRedo","richTextLinks","storyServices","pagesManager","menuService","nodeEditorManager","introDataFormatter","consumerBiLogger","sectionMedia","mediaOverrideManager","mediaOrganizeDataAdapter","mediaGallery","sectionMediaSetter","wizardService","$q","flags","solutionFetcher","$log","nodeChangeReporter"],Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(53),r=i(172),a=i(15);function s(e,t,i,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M){function E(t,i,n){var o=T.when();if(i[0]&&function(e){return e.contentElement.isSpecialListItem()}(t)){var r=t.hasVisibleFields(),a=n&&!r,s=!n&&r,c=e.findIdentifyingNode(t);a?o=u.removeListSpecialItem(t,i[0].key,c,c):s&&(o=u.addListSpecialItem(t,i[0].key,c,c,function(){return I.getSectionSolution(t.containerPageId,c.getId())}).then(function(){return l.reRender()}))}return o}return function(i){console.log("updating section "+i.sectionId+" in page "+i.pageId),l.story.selectedPage=i.pageId;var u="footer"===i.sectionData.id?i.sectionData.children[0]:i.sectionData,I=function(t,i,o,r){var a,s=n.get(t,"ceType"),l=e.getPageNodeById(i);if("GeneralDescription"===s)a="footer"===o?e.getFooterInformation():e.getGeneralInformation();else{var c=l.children.find(function(e){return e.id===o});a=r?c.children.find(function(e){return e.id===r}):c}return a}(u,i.pageId,i.sectionId,i.listItemId);return b.sectionMedia&&M.init(I),c.goToPage(i.pageId).then(function(){return function(t,i,l){var c=l.listItemId?"list item":"single",u=i.title,I=i.ceType;g.med.updateSectionStart(c,u,I,null),function(e,t){e.alias!==t&&(e.setDisplayName(t),e.alias=t,d.updateLinkToNode(e,t))}(t,i.title);var M=n.get(i,"fields");!function(e){e&&e.forEach(function(e){e.value||(e.visible=e.mobileVisible=!1)})}(M);var w=M&&M.find(function(e){return e.type===core.ElementTypes.Media});return function(e,t,i){var r=[],a=e.hasVisibleFields();return n.each(t,function(t){t.key&&(function(e,t){var i=e&&e.referenceFields;return i&&void 0!==i[t]}(e,t.key)?r.push(function(e,t){var i=t.key.split("."),o=i[0],r=i[1],a=e.contentElement.allElements.find(function(e){return e.type===o}),s=a.values[r];return"SocialButtons"===r?(s.value=p.createSocialButtons(n.map(t.value,function(e){return{platform:e.platform,url:e.Link.targetUrl}})),a.fillValuesByMediaType()):s.value=t.value,n.isUndefined(t.visible)||(e.referenceFields[t.key]=t.visible),T.when()}(e,t)):r.push(function(e,t,i){var r=e&&e.contentElement&&e.contentElement.values;if(r&&void 0!==r[t.key]){var a=r[t.key];if(a.type===core.ElementTypes.Media){if(b.sectionMedia)return function(e,t,i){var r=e&&e.contentElement;return T.when().then(function(){if(!n.isUndefined(t.visible))return S.toggle(e,t.visible).then(function(e){return P.info("toggled: result",e),e})}).then(function(){if(t.visible){var a=t.value[0].mediaType;n.isUndefined(t.value[0].active)&&(t.value[0].active=!0);var s=t.value.filter(function(e){return e.mediaType===a}),l={contentElement:r,media:r.getMediaField().value},c=i!==o.SectionMediaType.GALLERY;return f.handleResult(s,l,a,c),r.fillValuesByMediaType(),h.updateMedia(e)}})}(e,t,i);var l=t.value[0],c=a.value.findIndex(function(e){return function(e,t){return e.relativeUri===t.relativeUri&&e.mediaType===t.mediaType}(e,l)});if(-1!==c){var d=a.value.splice(c,1)[0];a.value.unshift(d)}else a.value.unshift(l);!function(e,t,i){var o=n.get(e.contentElement.hiddenMedia,t,{}),r=v.getItemId(i);o[r]&&delete o[r]}(e,i,l)}else a.value=o.isRichText(t.value)?function(e){var t=window.document.createElement("div");t.innerHTML=o.unMarkRichText(e);var i=[];for(i.push.apply(i,[].slice.call(t.childNodes));i.length;){var n=i.shift(),r=n.getAttribute&&n.getAttribute("adilinktoset");if(r){var a=s.addLink(JSON.parse(r)),l=n.getAttribute("adilinkid");l&&s.removeLink(l),n.setAttribute("adilinkid",a),n.removeAttribute("adilinktoset")}n.childNodes&&i.push.apply(i,[].slice.call(n.childNodes))}return o.markRichText(t.innerHTML)}(t.value):t.value;return n.isUndefined(t.visible)||(e.argsMatchingPolicy[t.key]=t.visible),T.when()}}(e,t,i)))}),b.sectionMedia?T.all(r).then(function(){return E(e,t,a)}):E(e,t,a)}(t,M,i.mediaType).then(function(){return g.med.updateSectionSuccess(c,u,I,null),"GeneralDescription"===t.getContentElementType()&&e.dirtifyAllPages(),w&&w.visible&&w.subtype!==core.ElementTypes.Social&&function(e,t){var i=r.default.sectionMediaTypeToPreviewMediaType(t);if(b.sectionMedia)return S.setOption(e,i);var o=function(){return n.find(e.contentElement.values,function(e){return"media"===e.type})},s=function(t,i){var r=o();e.contentElement.hiddenMedia[t]=e.contentElement.hiddenMedia[t]||{};var a=n.get(e.contentElement.hiddenMedia,t);n.forEach(r.value,function(e){e.mediaType===t&&(a[v.getItemId(e)]=!i)})},l=function(t){s("shape",!1),s("clipart",!1),function(t,i){var r=o(),a=n.find(r.value,function(e){return e.mediaType===t});if(a){e.contentElement.hiddenMedia[t]=e.contentElement.hiddenMedia[t]||{};var s=n.get(e.contentElement.hiddenMedia,t);s[v.getItemId(a)]=!i}}(t,!0),e.contentElement.fillValuesByMediaType(),m.setMediaOverride(e,a.MediaOverrideManager.MO_IMAGE)},c=n.findKey(e.contentElement.values,function(e){return"media"===e.type});return y.onReferenceFieldChanged(e,c,!0).then(function(){switch(i){case cc.MediaPreviewType.Shape:l("shape");break;case cc.MediaPreviewType.Clipart:l("clipart");break;default:var t=m.getAllowedMediaOverride(e)===a.PresetMediaTypes.COAST2COAST;m.setMediaOverride(e,t?a.MediaOverrideManager.MO_STRIP_IMAGE:a.MediaOverrideManager.MO_IMAGE)}})}(t,i.mediaType)})}(I,u,i)}).then(function(){return t.onNodeChanged()})}}t.default=s},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(237);t.default=function(e,t){t=t||{};var i=n({},e);if(i.isDraft)return{draft:!0,instanceId:i.storyId};var o=i.blob.bft.data.children,a=o.find(function(e){return"GeneralDescription"===e.contentElementType}),s=o.find(function(e){return"footer"===e.id}),l=a&&f(i,a,"header",t,!1),c=s&&f(i,s,"footer",t,!0),d=o.filter(function(e){return"Page"===e.contentElementType&&!e.membersArea}).map(function(e){var o=r(e,["id","lastRenderRevision",["displayName","title"],["userHidden","visible",function(e){return!e}],"tpaSection","tpaExtraPage"]);return n({},o,{sections:m(i,e.children,t)})}),u=i.blob.bft.homePageId,p=d.findIndex(function(e){return e.id===u}),g=d.splice(p,1)[0];return d.unshift(g),{draft:!1,pages:d,header:l,footer:c,richTextLinks:i.blob.richTextLinks,isDomainConnected:i.isDomainConnected,headlessSiteBuildDone:i.blob.headlessSiteBuildDone,isPublished:i.isPublished,revision:i.revision,instanceId:i.storyId,structureId:i.blob.structureId,industryId:i.blob.industryId,staticsVersion:i.blob.staticsVersion,homePageId:u,kit:{mainKit:i.blob.selectedStyle.mainKit}}};var r=function(e,t){var i={};return t.forEach(function(t){"string"==typeof t?e[t]&&(i[t]=e[t]):t[2]&&"function"==typeof t[2]?i[t[1]]=t[2](e[t[0]]):i[t[1]]=e[t[0]]}),i},a={Contact:["Country","State","Street","ZipCode","City","Contact form title","Contact form email"],GeneralDescription:["CompanySize","Founder","YearFounded","BusinessType","CopyrightMessage","button","Subscribe"],footer:["CompanySize","Founder","YearFounded","BusinessType","Logo","BusinessTagline","button"]},s=function(e,t){return e.blob.locale.contentElements[t.id.replace(/\./g,"_")]},l=function(e,t,i,n,o,r){var s=h(n);return Object.keys(e).filter(function(e){return!n||!function(e,t){return!(Object.keys(a).indexOf(e)<0)&&a[e]&&a[e].indexOf(t)>-1}(o?"footer":n.contentElementType,e)}).map(function(o){var a=e[o];if(s&&"media"===a.type)return null;var l="true"===t["specs.ob.enableRTMED"]&&(r.blob.selectedStyle.kitData&&r.blob.selectedStyle.kitData.mainKit.kitFonts||r.kitFonts);return{key:o,type:a.type,subtype:a.subType,label:"LABEL",visible:n&&(c(a.type,i)||n.argsMatchingPolicy[o]),mobileVisible:n&&(c(a.type,i)||n.argsMatchingPolicy[o]&&!n.mobileArgsPolicy[o]),value:d(a,n,t,l)}}).filter(function(e){return e})},c=function(e,t){return"media"===e&&!!t},d=function(e,t,i,n){var a=e.type,s=e.value;if("media"===a)return function(e,t,i){if(e)return e.map(function(e){var n=r(e,["mediaType","thumbnailUrl","relativeUri","fileUrl","videoUrl","width","height","Link"]);if("true"===i["specs.ob.med_supportGallery"]){var o=function(e){return e.videoUrl||(e.relativeUri||"")+(e.fileUrl||"")}(e);n.active=!0,t&&t.hiddenMedia&&t.hiddenMedia[n.mediaType]&&t.hiddenMedia[n.mediaType][o]&&(n.active=!1)}return n})}(s,t,i);if("text"===a){if("true"!==i["specs.ob.enableRTMED"]&&"true"!==i["specs.ob.toasterRTDesktop"]&&o.isRichText(s))return o.toPlainText(s);if("true"===i["specs.ob.enableRTMED"]&&!o.isRichText(s))return p(e,u(t)?null:t.contentElementType,t.id.split(".").length>2,n)}return s},u=function(e){return"GeneralDescription"===e.contentElementType&&"footer"!==e.containerPageId},p=function(e,t,i,n){var r=function(e,t){return'<span style="'+t+'">'+e+"</span>"},a=e.value,s=o.getCategoryOfCE(t,e.subType,i),l=n&&n[s];return l?(l.Bold&&(a=r(a,"font-weight: bold;")),l.Italic&&(a=r(a,"font-style: italic;")),a===e.value?a:o.markRichText('<p class="font_7">'+a+"</p>")):a},g=function(e,t){return t&&t.referenceFields?Object.keys(t.referenceFields).map(function(i){var n=i.split("."),o=n[0],a=n[1],l=function(e,t){return e.blob.bft.data.children.find(function(e){return e.contentElementType===t})}(e,o);if(l){var c=s(e,l)[a];return{key:i,type:c.type,subtype:c.subType,label:"LABEL",visible:t&&t.referenceFields[i],mobileVisible:t&&t.referenceFields[i]&&!t.mobileReferenceFields[i],value:"social"===c.subType?function(e){if(e)return e.map(function(e){return r(e,["mediaType","platform","Link"])})}(c.value):c.value}}}).filter(function(e){return!!e}):[]},h=function(e){return e&&"ListFooter"===e.contentElementType},m=function(e,t,i,n){return t.filter(function(e){return!e.userHidden||function(e){return e&&"ListHeader"===e.contentElementType}(e)||h(e)}).map(function(t){return f(e,t,t.containerPageId+"."+t.id,i,n)})},f=function(e,t,i,o,a){var c=r(t,["id",["alias","title"],["userHidden","visible",function(e){return!e}],["contentElementType","ceType"]]),d=e.nodesMetadata&&e.nodesMetadata[i];return d&&(c.height=d.height,c.mediaType=d.mediaType,c.bgMedia=d.bgMedia,c.validMediaTypes=d.validMediaTypes),t.children&&t.children.length?n({},c,{children:m(e,t.children,o,a)}):n({},c,{fields:function(e,t,i,n,o){var r=n&&n.hasActiveMedia,a=s(e,t),c=l(a,i,r,t,o,e),d=g(e,t);return c.concat(d)}(e,t,o,d,a)})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHashParams=function(e){var t={sectionMedia:"false"};return e.med_sectionMedia&&(t.sectionMedia="true"),e.med_supportGallery&&(t.allowOneImageForGalleries="true"),e.adiFlags&&e.adiFlags.split(",").forEach(function(e){var i=e.split(":");t[i[0]]=i[1]||""}),e.allowSaveForStaff&&(t.allowSaveForStaff="true"),t}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldType={Text:"text",Button:"button",Media:"media"},t.FieldSubType={Title:"title",Subtitle:"subTitle",Button:"button",Image:"image",Paragraph:"longText",Social:"social",Subscribe:"subscribe",Address:"address",Copyright:"copyrightMSG"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(567),o=function(){function e(){var e=this;this._presetByIdMap={},n.default.forEach(function(t){return e._presetByIdMap[t.layoutId]=t}),this._presetByContentMap={single:[],list:[],Contact:[],"Opening Hours":[]},n.default.forEach(function(t){return e._presetByContentMap[t.content].push(t)}),this._typeByContentElementType={Welcome:"single",About:"single",Homepage_about:"single",Inner_about:"single",Quote:"single",OpeningHours:"Opening Hours",Contact:"Contact",Service:"list",TeamMember:"list",Client:"list",Feature:"list",Testimonial:"list",Product:"list",Widget:"list",FAQ:"list",Event:"list",Project:"list",News:"list"}}return e.prototype._presetsForContentType=function(e,t){void 0===t&&(t=!1);var i=this._typeByContentElementType[e]||(t?"list":"single");return this._presetByContentMap[i]},e.prototype._filterByMediaType=function(e,t){var i=this;return e.filter(function(e){return i.getDesktopPresetsByMediaType(e,t).length>0})},e.prototype.getDesktopPresetsByMediaType=function(e,t){return e.desktopPresets.filter(function(e){return e.validMediaTypes.indexOf(t)>=0})},e.prototype.layoutIdsForContentType=function(e,t,i){var n=this._presetsForContentType(e,i);return t&&(n=this._filterByMediaType(n,t)),n.map(function(e){return e.layoutId})},e.prototype.getLayoutById=function(e){return this._presetByIdMap[e]},e.prototype.getLayoutByMobileId=function(e){return n.default.find(function(t){return t.presetId===e})},e.prototype.getLayoutByDesktopId=function(e){return n.default.find(function(t){return t.desktopPresets.findIndex(function(t){return t.presetId===e})>-1})},e}();t.default=new o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(238),o=[{content:"single",layoutId:"w1",presetId:"5a1fd5b5254bcb0ee9dc6604",desktopPresets:[{presetId:"5a01cd3ca02be1247206faf3",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]},{presetId:"5a257720d8e1a9507c20165b",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a257793d8e1a9507c20165c",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]}]},{content:"single",layoutId:"w2",presetId:"5a1fd980254bcb0ee9dc660b",desktopPresets:[{presetId:"5a16e3bfb74025b81a61f44d",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.EXTVIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]},{presetId:"5a16e516b74025b81a61f44e",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.EXTVIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]}]},{content:"single",layoutId:"w3",presetId:"5a1fd5f1254bcb0ee9dc6606",desktopPresets:[{presetId:"5a01a5ec88dd176f8076fe54",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]},{presetId:"5a01cccea02be1247206faf2",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]}]},{content:"single",layoutId:"w4",presetId:"5a1fd5d2254bcb0ee9dc6605",desktopPresets:[{presetId:"5a01cd3ca02be1247206faf3",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]},{presetId:"5a257720d8e1a9507c20165b",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a257793d8e1a9507c20165c",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]}]},{content:"single",layoutId:"w5",presetId:"5a1fda52254bcb0ee9dc660d",desktopPresets:[{presetId:"5a16e3bfb74025b81a61f44d",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.EXTVIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]},{presetId:"5a16e516b74025b81a61f44e",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.EXTVIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]}]},{content:"single",layoutId:"w6",presetId:"5a1fd400254bcb0ee9dc6602",desktopPresets:[{presetId:"5a01cd76a02be1247206faf4",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]},{presetId:"5a257720d8e1a9507c20165b",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a257793d8e1a9507c20165c",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]}]},{content:"single",layoutId:"w7",presetId:"5a1fd60f254bcb0ee9dc6607",desktopPresets:[{presetId:"5a01a5ec88dd176f8076fe54",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]},{presetId:"5a01cccea02be1247206faf2",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]}]},{content:"single",layoutId:"w8",presetId:"5a1fda39254bcb0ee9dc660c",desktopPresets:[{presetId:"5a16e3bfb74025b81a61f44d",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.EXTVIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]},{presetId:"5a16e516b74025b81a61f44e",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.EXTVIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]}]},{content:"single",layoutId:"w9",presetId:"5a1fd94b254bcb0ee9dc660a",desktopPresets:[{presetId:"5a16e3bfb74025b81a61f44d",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.EXTVIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]},{presetId:"5a16e516b74025b81a61f44e",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.EXTVIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]}]},{content:"single",layoutId:"w10",presetId:"5a1fd59e254bcb0ee9dc6603",desktopPresets:[{presetId:"5a01cd76a02be1247206faf4",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]},{presetId:"5a257720d8e1a9507c20165b",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a257793d8e1a9507c20165c",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]}]},{content:"list",layoutId:"L1",presetId:"5a2d5e2445ad36fa2ca76250",desktopPresets:[{presetId:"5a16ce8283855c70f0edd8f4",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a09b1bf0495cf4ebf062098",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]},{presetId:"5a16c4e7b20a505919a9af05",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]}]},{content:"list",layoutId:"L2",presetId:"5a2d54ec54eb0aaed52271e9",desktopPresets:[{presetId:"5a0c49afc917e0238d3f835f",validMediaTypes:[n.SectionMediaType.IMAGE]}]},{content:"list",layoutId:"L3",presetId:"5a2d5a9fec3dbc13d48466f4",desktopPresets:[{presetId:"5a0c4b768d6593558b2215dc",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]},{presetId:"5a09b1bf0495cf4ebf062098",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]},{presetId:"5a0c4c988d6593558b2215df",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]}]},{content:"list",layoutId:"L4",presetId:"5a2d55a754eb0aaed52271ed",desktopPresets:[{presetId:"5a411088fa0281edf060629e",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]},{presetId:"5a0c4c0b8d6593558b2215de",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]}]},{content:"list",layoutId:"L5",presetId:"5a2d5dbc45ad36fa2ca7624d",desktopPresets:[{presetId:"5a16b6d8b20a505919a9af02",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a16ce8283855c70f0edd8f4",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a16d02483855c70f0edd8f7",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]}]},{content:"list",layoutId:"L6",presetId:"5a2d5e0645ad36fa2ca7624f",desktopPresets:[{presetId:"5a16ceeb83855c70f0edd8f5",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a16d311321687211e5ffb20",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a09b1bf0495cf4ebf062098",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]}]},{content:"list",layoutId:"L7",presetId:"5a2d55ed54eb0aaed52271ee",desktopPresets:[{presetId:"5a411088fa0281edf060629e",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]},{presetId:"5a0c4c0b8d6593558b2215de",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]}]},{content:"list",layoutId:"L8",presetId:"5a2d5b18ec3dbc13d48466f7",desktopPresets:[{presetId:"5a0c4bbb8d6593558b2215dd",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]},{presetId:"5a09b1bf0495cf4ebf062098",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]},{presetId:"5a0c4c988d6593558b2215df",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]}]},{content:"list",layoutId:"L9",presetId:"5a2d5de445ad36fa2ca7624e",desktopPresets:[{presetId:"5a16ceeb83855c70f0edd8f5",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a16d311321687211e5ffb20",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a09b1bf0495cf4ebf062098",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]}]},{content:"list",layoutId:"L10",presetId:"5a2d5d2745ad36fa2ca7624c",desktopPresets:[{presetId:"5a16b565b20a505919a9af01",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a16ce8283855c70f0edd8f4",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a16d02483855c70f0edd8f7",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]}]},{content:"list",layoutId:"L11",presetId:"5a2d5af8ec3dbc13d48466f6",desktopPresets:[{presetId:"5a0c4bbb8d6593558b2215dd",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]},{presetId:"5a09b1bf0495cf4ebf062098",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]},{presetId:"5a0c4c988d6593558b2215df",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]}]},{content:"list",layoutId:"L12",presetId:"5a2d558454eb0aaed52271ec",desktopPresets:[{presetId:"5a411088fa0281edf060629e",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]},{presetId:"5a0c4c0b8d6593558b2215de",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]}]},{content:"list",layoutId:"L13",presetId:"5a2d556a54eb0aaed52271eb",desktopPresets:[{presetId:"5a411088fa0281edf060629e",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]},{presetId:"5a0c4c0b8d6593558b2215de",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]}]},{content:"list",layoutId:"L14",presetId:"5a2d551f54eb0aaed52271ea",desktopPresets:[{presetId:"5a0c49afc917e0238d3f835f",validMediaTypes:[n.SectionMediaType.IMAGE]}]},{content:"list",layoutId:"L15",presetId:"5a2d5ad5ec3dbc13d48466f5",desktopPresets:[{presetId:"5a0c4b768d6593558b2215dc",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]},{presetId:"5a09b1bf0495cf4ebf062098",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]},{presetId:"5a0c4c988d6593558b2215df",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]}]},{content:"list",layoutId:"L16",presetId:"5a2d5e4d45ad36fa2ca76251",desktopPresets:[{presetId:"5a16ce8283855c70f0edd8f4",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a09b1bf0495cf4ebf062098",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.GALLERY,n.SectionMediaType.EXTVIDEO]},{presetId:"5a16c4e7b20a505919a9af05",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]}]},{content:"Contact",layoutId:"C1",presetId:"591b1334f375eb1400b1e0ee",desktopPresets:[{presetId:"5a77145d1feac620f68c779b",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a77163a1feac620f68c779c",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.EXTVIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]},{presetId:"5a7717741feac620f68c779d",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.EXTVIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]}]},{content:"Contact",layoutId:"C2",presetId:"591b14a55c873d1400ed25da",desktopPresets:[{presetId:"5a77145d1feac620f68c779b",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]},{presetId:"5a77163a1feac620f68c779c",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.EXTVIDEO,n.SectionMediaType.PATTERN]},{presetId:"5a7717741feac620f68c779d",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.EXTVIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]}]},{content:"Opening Hours",layoutId:"O1",presetId:"5a20211745ce1a63f21c2405",desktopPresets:[{presetId:"5a0b1c67afa6457906258cb2",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]}]},{content:"Opening Hours",layoutId:"O2",presetId:"5919b51a4af30b140065770f",desktopPresets:[{presetId:"5a0b1c94afa6457906258cb3",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]}]},{content:"Opening Hours",layoutId:"O3",presetId:"5919b53887cd331400c7675b",desktopPresets:[{presetId:"5a0b1d0fafa6457906258cb5",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]}]},{content:"Opening Hours",layoutId:"O4",presetId:"5a20212645ce1a63f21c2406",desktopPresets:[{presetId:"5a0b1c67afa6457906258cb2",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]}]},{content:"Opening Hours",layoutId:"O5",presetId:"5a2020fd45ce1a63f21c2404",desktopPresets:[{presetId:"5a0b1c94afa6457906258cb3",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO]}]},{content:"Opening Hours",layoutId:"O6",presetId:"5a20215f45ce1a63f21c2408",desktopPresets:[{presetId:"5a0b1d0fafa6457906258cb5",validMediaTypes:[n.SectionMediaType.IMAGE,n.SectionMediaType.VIDEO,n.SectionMediaType.PATTERN,n.SectionMediaType.GALLERY]}]}];t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var t=this;this.PLATFORM_FACEBOOK="facebook",this.PLATFORM_TWITTER="twitter",this.PLATFORM_INSTAGRAM="instagram",this.PLATFORM_PINTEREST="pinterest",this.PLATFORM_GOOGLE_PLUS="googlePlus",this.PLATFORM_YOUTUBE="youtube",this.PLATFORM_BLOGGER="blogger",this.PLATFORM_FLICKR="flickr",this.PLATFORM_HOUZZ="houzz",this.PLATFORM_LINKEDIN="linkedin",this.PLATFORM_MYSPACE="myspace",this.PLATFORM_SOUNDCLOUD="soundcloud",this.PLATFORM_TUMBLR="tumblr",this.PLATFORM_VIMEO="vimeo",this.PLATFORM_VKONTAKTE="vkontakte",this.PLATFORM_ODNOKLASSNIKI="odnoklassniki",this.PLATFORM_GOOGLE_PLACES="googlePlaces",this.PLATFORM_YELP="yelp",this.PLATFORM_TRIP_ADVISOR="tripAdvisor",this.platforms=[{name:this.PLATFORM_FACEBOOK,iconClass:"facebook",regex:/^(?:https?:\/\/)?(www\.)?facebook\.com\/(?:(?:\w)*#!\/)?(?:pages\/)?(?:[?\w\-]*\/)?(?:profile\.php\?id=(?=\d.*))?([\w\-]*)?/},{name:this.PLATFORM_TWITTER,iconClass:"twitter",regex:/^(?:https?:\/\/)?(www\.)?twitter\.com\/(?:(?:\w)*#!\/)?(?:pages\/)?(?:[\w\-]*\/)*([\w\-]*)/},{name:this.PLATFORM_INSTAGRAM,iconClass:"instagram",regex:/(?:(?:http|https):\/\/)?(?:www\.)?(?:instagram\.com|instagr\.am)\/([A-Za-z0-9-_]+)/},{name:this.PLATFORM_PINTEREST,iconClass:"pinterest",regex:new RegExp(e.urlInternationalPrefix+"pinterest((.[a-zA-Z]+)+)"+e.urlSuffix)},{name:this.PLATFORM_GOOGLE_PLUS,iconClass:"googleplus",regex:/^(?:https?:\/\/)?(www\.)?plus\.google\.com\/.?\/?.?\/?([0-9]*)/},{name:this.PLATFORM_YOUTUBE,iconClass:"youtube",regex:new RegExp(e.urlPrefix+"(youtube.com|youtu.be)"+e.urlSuffix)},{name:this.PLATFORM_BLOGGER,iconClass:"blogger",regex:new RegExp(e.urlPrefix+"(\\w+.)?(blogger|blogspot)(\\.\\w+)+")},{name:this.PLATFORM_FLICKR,iconClass:"flickr",regex:new RegExp(e.urlPrefix+"(flickr.com|flic.kr)"+e.urlSuffix)},{name:this.PLATFORM_HOUZZ,iconClass:"houzz",regex:new RegExp(e.urlPrefix+"houzz.com"+e.urlSuffix)},{name:this.PLATFORM_LINKEDIN,iconClass:"linkedin",regex:new RegExp(e.urlInternationalPrefix+"linkedin.com"+e.urlSuffix)},{name:this.PLATFORM_MYSPACE,iconClass:"myspace",regex:new RegExp(e.urlPrefix+"myspace.com"+e.urlSuffix)},{name:this.PLATFORM_SOUNDCLOUD,iconClass:"soundcloud",regex:new RegExp(e.urlPrefix+"(soundcloud.com|snd.sc)"+e.urlSuffix)},{name:this.PLATFORM_TUMBLR,iconClass:"tumblr",regex:new RegExp(e.urlPrefix+"([a-zA-Z0-9-]+.)?tumblr.com")},{name:this.PLATFORM_VIMEO,iconClass:"vimeo",regex:new RegExp(e.urlPrefix+"vimeo.com"+e.urlSuffix)},{name:this.PLATFORM_VKONTAKTE,iconClass:"vkontakte",regex:new RegExp(e.urlPrefix+"(\\w+.)?vk.com"+e.urlSuffix)},{name:this.PLATFORM_ODNOKLASSNIKI,iconClass:"odnoklassniki",regex:new RegExp(e.urlPrefix+"ok.ru"+e.urlSuffix)},{name:this.PLATFORM_GOOGLE_PLACES,iconClass:"googleplaces",regex:new RegExp(e.urlPrefix+"(google(.[a-z]+){1,2}/maps|maps.google.[^s]+)"+e.urlSuffix)},{name:this.PLATFORM_YELP,iconClass:"yelp",regex:new RegExp(e.urlPrefix+"yelp.com"+e.urlSuffix)},{name:this.PLATFORM_TRIP_ADVISOR,iconClass:"tripadvisor",regex:new RegExp(e.urlPrefix+"tripadvisor.com"+e.urlSuffix)},{name:e.VALID_CUSTOM_LINK,iconClass:"custom",regex:e.urlValidation},{name:e.INVALID_LINK,iconClass:"custom",regex:new RegExp("this should not match anything, we just reference the invalid entry directly")}],this.getPlatformByName=function(e){return void 0===t.platformsByName&&(t.platformsByName={},t.platforms.forEach(function(e){t.platformsByName[e.name]=e})),t.platformsByName[e]},this.getPlatformNameByUrl=function(e){if(e){var i=t.platforms.find(function(t){return t.regex.test(e.toLowerCase())});return i?i.name:void 0}}}return e.prototype.getPlatformIconClass=function(t){var i=this.getPlatformByName(t);return i?i.iconClass:this.getPlatformByName(e.INVALID_LINK).iconClass},e.prototype.getPlatformRelativePath=function(e){0!==e.indexOf("http")&&(e="http://"+e);var t=document.createElement("a");t.href=e;var i=t.pathname;return"/"===i[0]&&(i=i.substring(1,i.length)),i},e.VALID_CUSTOM_LINK="generic-social-link",e.INVALID_LINK="social-not-found",e.urlValidation=/^(https?:\/\/)?[^\s\./$?#]+\.[^\s\./$?#]{2,}[^\s]*$/i,e.urlPrefix="^(?:https?://)?(www.)?",e.urlInternationalPrefix="^(?:https?://)?([a-z]{1,3}.)?",e.urlSuffix="/.+$",e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){return window.localStorage.setItem(e,t)},o=function(e){return window.localStorage.getItem(e)};t.setInitialKitId=function(e){return n("initialStyleKit",e)},t.getInitialKitId=function(){return o("initialStyleKit")},t.setNewSite=function(e){return n("newSite",e)},t.getNewSite=function(){return o("newSite")}},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},a=this;Object.defineProperty(t,"__esModule",{value:!0});var s=i(40),l=i(53),c=i(571),d=function(){function e(){this.esi=c.createGuid()}return e.prototype.createAndWarmup=function(e,t){var i=this;return this.create(e,t.initiator).then(function(e){return v(e,n({esi:i.esi,msid:e.metaSiteId},t))})},e.prototype.warmup=function(e,t){return v(e,n({esi:this.esi,msid:e.metaSiteId},t))},e.prototype.create=function(t,i){return p(t,i,this.esi).then(function(t){var i=t.siteId,n=t.metaSiteId;return{siteId:i,metaSiteId:n,instanceId:t.instanceId,viewerUrl:e.buildViewerUrl(i,n)}})},e.prototype.build=function(e,t,i){var o=n({introData:e,esi:this.esi},i);return t&&t.instanceId?S(t,n({msid:t.metaSiteId},o)):this.createAndWarmup(e.name,o).then(function(e){var t=e.siteIds;return S(t,n({msid:t.metaSiteId},o))})},e.prototype.wait=function(e,t,i){return f(e,this.esi,t,i)},e.prototype.isSiteReady=function(e){return g(e)},e.prototype.buildAndWait=function(e,t,i,n,a){return o(this,void 0,void 0,function(){var o;return r(this,function(r){switch(r.label){case 0:return[4,this.build(e,t,i)];case 1:return o=r.sent(),[4,f(o.siteIds,this.esi,n,a)];case 2:return r.sent(),[2,o]}})})},e.buildViewerUrl=function(e,t){return"https://editor.wix.com/html/editor/web/renderer/render/document/"+e+"?metaSiteId="+t+"&isSantaEditor=true&isEdited=true&closeSectionGaps=true&petri_ovr=specs.DisableNewRelicScripts:true;&disableMobileConversion=true&experiments=onboardingviewportmode,sv_mobileConversionDisabled,sv_restrictTextHeightInEditor&dsOrigin=onboarding"},e.buildADIEditorUrl=function(e,t){return"https://www.wix.com/website/builder?storyId="+e+"#!/builder/story/"+e+":"+t},e}();t.HeadlessSiteApi=d;var u={production:"/_api/adi-mobile-gateway-server/site/",mirror:"/_api/adi-mobile-gateway-server-mirror/site",local:"/_api/adi-mobile-gateway-server-local/site"},p=function(e,t,i){var n={templateMetaSiteId:"bb80349d-97a4-48a5-b9f2-8ddc2463709a",suggestedSiteName:e,creationPhase:"DuringIntro",initiator:t};return s.default.post(c.decorateEndpoint("/_api/onboarding-server-web/story","new",i),n).then(c.getResponse(),c.getResponse(!0))},g=function(e){return o(a,void 0,void 0,function(){var t;return r(this,function(i){switch(i.label){case 0:return[4,h(e)];case 1:return[2,!(t=i.sent()).draft&&t.headlessSiteBuildDone]}})})},h=function(e){return o(a,void 0,void 0,function(){var t;return r(this,function(i){switch(i.label){case 0:return[4,s.default.get("/_api/onboarding-server-web/story/"+e)];case 1:return t=i.sent(),[2,l.reduceDbStory(t.data)]}})})},m=function(){var e=window.location.href.indexOf("localGateway=true")>=0,t=window.location.href.indexOf("productionGateway=true")>=0,i=window.location.href.indexOf("mirrorGateway=true")>=0,n="development"===window.__VERSION__;return e?"local":i||n&&!t?"mirror":"production"},f=function(e,t,i,n){void 0===n&&(n=1e5);var l=n/2e3;return new Promise(function(t,i){var n=0,s=setInterval(function(){return o(a,void 0,void 0,function(){return r(this,function(o){switch(o.label){case 0:return[4,g(e.instanceId)];case 1:return o.sent()?(clearInterval(s),t()):n++>l&&(clearInterval(s),i("timeout")),[2]}})})},2e3)}).then(function(){!i&&function(e){var t=e.instanceId,i=e.esi,n=e.msid;s.default.post(u[m()]+"/clear/"+t,{esi:i,msid:n})}({instanceId:e.instanceId,msid:e.metaSiteId,esi:t})})},v=function(e,t){return o(a,void 0,void 0,function(){var i,o;return r(this,function(r){switch(r.label){case 0:return(i=y(t)).silent=void 0===t.silent||t.silent,[4,s.default.post(u[m()]+"/warmup/"+e.instanceId,i)];case 1:return o=r.sent(),[2,n({},o,{siteIds:e})]}})})},S=function(e,t){return o(a,void 0,void 0,function(){var i,o;return r(this,function(r){switch(r.label){case 0:return i=y(t),[4,s.default.post(u[m()]+"/build/"+e.instanceId,i)];case 1:return o=r.sent(),[2,n({},o,{siteIds:e})]}})})},y=function(e){return void 0===e&&(e={}),T(e),Object.assign(e,{pathParameters:n({},e.pathParameters),hashParameters:n({},e.hashParameters)})},T=function(e){if(!e||!e.initiator)throw"Set initiator property in payloadConfig, to differentiate your App from others in our main BI"}},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function o(e){return e.data&&e.data.errorCode}Object.defineProperty(t,"__esModule",{value:!0}),t.decorateEndpoint=function(e,t,i){void 0===t&&(t=null);var n=["cacheKiller="+Date.now().toString()];return i&&n.push("editorSessionId="+i),e+(t?"/"+t:"")+"?"+n.join("&")},t.getResponse=function(e){return void 0===e&&(e=!1),function(t){return o(t)?Promise.reject(t):e?Promise.reject(t):t.data}},t.isErrorResponse=o,t.createGuid=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.convertToMediaObject=function(e){var t={fileName:e.name,fileUrl:e.fileUrl,height:e.height,width:e.width,relativeUri:e.id,sourceUrl:e.sourceUrl,fileInput:e.fileInput};return n({},{Link:{},Description:"",Title:"Untitled",fileName:"Untitled",mediaType:"image"},t)}},function(e,t,i){"use strict";l.$inject=["presetsStrategyFactory","mobileSectionManager","modelTreeHelpers","defaultsService","sectionManager","sectionMedia","storyServices","simpleSolutionManager","applicationState","modelTree","consumerBiLogger","sectionMediaSetter","tpaService","nodeFetcher","$p","flags"];var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(53),a=i(172),s=i(14);function l(e,t,i,l,c,d,u,p,g,h,m,f,v,S,y,T){function b(e,t,i,r,a){return void 0===a&&(a=!1),n(this,void 0,void 0,function(){var s,l,c,d;return o(this,function(u){switch(u.label){case 0:l=0,c=i,u.label=1;case 1:return l<c.length?(d=c[l],[4,function(e,t,i,r,a){return n(this,void 0,void 0,function(){var n;return o(this,function(o){switch(o.label){case 0:return[4,e.preparePreset(t,i.presetId,r,a)];case 1:return(n=o.sent())||console.log("Desktop preset id "+i.presetId+" does not have a solution."),[2,n]}})})}(e,t,d,r,a)]):[3,4];case 2:if(s=u.sent())return[3,4];u.label=3;case 3:return l++,[3,1];case 4:return[2,s]}})})}function I(e,t){var i;t=function(e){e.isList()&&(e=h.getListItems(e).find(function(e){return!e.isUserHidden()})||e);return e}(t);var n=a.default.previewMediaTypeToSectionMediaType(d.getMediaType(t));return(T.med_supportGallery&&n===r.SectionMediaType.GALLERY||T.med_keepMediaTypeWhenChangingLayout)&&(i=r.presetMaps.getDesktopPresetsByMediaType(e,n)),i&&i.length>0?i:e.desktopPresets}return function(a){return n(this,void 0,void 0,function(){var n,y,P,M,E,w,C,A,L,B,k;return o(this,function(o){switch(o.label){case 0:if(!(n=r.presetMaps.getLayoutById(a.layoutId)))throw new Error("No MED layout selected");return y=h.getNodeById(a.pageId),P=h.getNodeById(a.sectionId),M=T.refactorOSIActions?S.getNodeSitePart(P):i.getNodeSitePart(P),E=P&&v.getAppId(P),m.sectionManagement.changeASectionLayout(a.sectionId,P.contentElementType,P.alias,null,null,a.layoutId,E,!1,null,"others",null),w=function(){var t=T.med_sectionMedia?s.PresetsStrategyType.MED:s.PresetsStrategyType.Generic;return e.create(t,{strategyMode:s.PresetsStrategyMode.Change})}(),[4,l.getAllLayoutPresets(!1,P.contentElementType)];case 1:return C=o.sent(),T.med_keepMediaTypeWhenChangingLayout&&(A=d.getMediaType(P)===cc.MediaPreviewType.Pattern),L=I(n,P),[4,b(w,C,L,P)];case 2:if(!(B=o.sent()))throw new Error("Preset MED id: "+n.id+" does not have suitable desktop presets.");if(B.preset.data.isMobile)throw new Error("Preset chosen for desktop, id: "+B.preset.id+" is actually a mobile preset. Check configuration.");return function(e,t){var i=S.getNodeSitePart(e.node);c.setSectionConfigurationBySitePartType(i,t,e)}(B,a.pageId),[4,c.handlePreviewSelected(B,!0,a.pageId,M)];case 3:return o.sent(),function(e){return e&&e[0].segments[0]&&e[0].segments[0].mobileLg&&e[0].segments[0].mobileLg.segments&&e[0].segments[0].mobileLg.segments[0].getLENoError()}(p.getSectionSolution(a.pageId,a.sectionId))?[3,6]:[4,u.prepareForMobileRendering([y])];case 4:return o.sent(),[4,u.renderMobilePages([y])];case 5:o.sent(),o.label=6;case 6:return A?[4,f.setOption(P,cc.MediaPreviewType.Pattern)]:[3,8];case 7:o.sent(),o.label=8;case 8:return[4,g.goToMobilePage(u.story.selectedPage)];case 9:return o.sent(),[4,b(w,C,[n],B.node,!0)];case 10:return k=o.sent(),[4,t.handlePreviewSelected(k,a.pageId,M)];case 11:return o.sent(),m.sectionManagement.changeSectionLayoutSuccess(null,a.sectionId,P.contentElementType,P.alias,null,null,a.layoutId,E,!1,null,"others",null),[2]}})})}}t.default=l},function(e,t,i){"use strict";function n(e,t,i,n){return function(i){return n.when().then(function(){return e.movePageAfterPage(i.pageId,i.afterPageId||null)}).then(function(){return t.refresh()})}}n.$inject=["pagesManager","menuService","undoRedo","$p"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";o.$inject=["consumerBiLogger","consumerPublishService","publishService"],Object.defineProperty(t,"__esModule",{value:!0});var n=i(20);function o(e,t,i){return function(){return e.builder.topBarPublishSiteClick(n.BIModeType.builder),t.publishStory().then(function(){var t=!i.isSitePublished();e.builder.publishSuccess(t)})}}t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(53),r=function(){function e(e,t,i,n,o,r,a,s,l){this.$q=e,this.$window=t,this.$timeout=i,this.localStorageService=n,this.$element=o,this.themeChooser=r,this.applicationState=a,this.storyApi=s,this.modelTree=l,this.error="",this.json="",this.initHelps(),this.buttonStyle={border:"3px solid #999",cursor:"pointer",boxShadow:"0px 0px 3px 3px #999",padding:3,left:"calc(50% - 50px)",position:"relative",width:100,margin:"10px 0"},this.selectStyle={border:"1px solid lightblue",width:100},this.blueButtonStyle={border:"1px solid #00f",margin:3,padding:3}}return e.$inject=["$q","$window","$timeout","localStorageService","$element","themeChooser","applicationState","storyApi","modelTree"],e.prototype.getFirstPageNode=function(){var e=this.getAllPageNodes();return e&&e[0]},e.prototype.getHomePageNode=function(){var e=this.getAllPageNodes();return e&&(e.find(function(e){return"Home"===e.alias})||e[0])},e.prototype.getAllPageNodes=function(){return this.modelTree&&this.modelTree.getPagesNodes()},e.prototype.builderState=function(){return-1===this.$window.location.href.indexOf("/intro/")},e.prototype.getTop=function(){return 10-e.CONSOLE_HEIGHT},e.prototype.toggleTestDialog=function(){this.$element.css("top",parseInt(this.$element.css("top"),10)?0:this.getTop())},e.prototype.$onInit=function(){var t=this;this.$element.css({position:"absolute",left:"calc((100% - 1024px) / 2)",top:this.getTop(),width:1024,height:e.CONSOLE_HEIGHT,background:"white",border:"solid blue",borderWidth:"1px 1px 0 1px",display:"flex",paddingBottom:10,flexDirection:"column"}),this.$element.find("hr").css("height",10),this.$element.find("hr").on("click",function(){return t.toggleTestDialog()})},e.prototype.reset=function(){this.error="",this.json="",this.helpMessage=""},e.prototype.warmup=function(){var e=this;this.helpMessage="Creating blank site.....";this.storyApi.create2({templateMetaSiteId:"bb80349d-97a4-48a5-b9f2-8ddc2463709a",suggestedSiteName:"name",creationPhase:"DuringIntro"}).then(function(t){e.localStorageService.clearAll();var i=t.instanceId+":"+t.metaSiteId;e.$window.location.href=e.$window.location.pathname+(e.$window.location.search||"?")+"&"+Math.random()+"#!/builder/story/"+i+"?headlessApi"},function(t){return e.helpMessage=t})},e.prototype.build=function(){var e,t=this;this.$q.when().then(function(){if(e=JSON.parse(t.json),!Array.isArray(e)||1!==e.length)throw new Error("the json must be array of size 1");var i=e[0];if(!(i.category&&i.category.industryId&&i.category.structureId&&i.name))throw new Error("need to have name, industry and structure");return i.category.manualAliases=[],i.category.block=!1,t.$window.console.log("building site...",i),t.$window.headless.buildSite(i)}).then(function(e){t.$window.console.log("finished build",e),t.reset()}).catch(function(i){t.$window.console.log("fail to invoke headless build",e,i.stack),t.reportError(i)})},e.prototype.validateActions=function(e){if(!Array.isArray(e))throw new Error("the json must be array");if(!e.every(function(e){return"string"==typeof e.type&&"object"==typeof e.data}))throw new Error('each array element in the json must have string property "type" and object property "data"')},e.prototype.update=function(){var e,t,i=this;this.toggleTestDialog(),this.$q.when().then(function(){return(e=JSON.parse(i.json))&&e.data&&e.data.data&&(e=[e.data]),t=Date.now(),i.validateActions(e),i.$window.console.log("start invoking headless actions",e),i.$window.headless.invoke(e,i.currentRevision)}).then(function(n){i.$window.console.log("finish invoking headless actions",e),i.reset(),i.helpMessage=JSON.stringify(n,null,2),i.currentRevision=n.siteData.revision,i.$window.console.log("Response data",n,"elapsed",Date.now()-t)}).catch(function(t){i.$window.console.log("fail to invoke headless actions",e,t.stack),i.reportError(t)})},e.prototype.getKitsForHelp=function(){return this.themeChooser.getRegularThemes().map(function(e){return e.displayName+": "+e.id}).join("\n")},e.prototype.getLayoutListsHelp=function(e){return void 0===e&&(e="single"),o.presetMaps.layoutIdsForContentType(e)},e.prototype.getSomeTerms=function(){return[{term:"School",industryId:"57d57436f3844487709d90cc",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School Blog",industryId:"5d6dd907beb2ba4daa3946b4",structureId:"b0a520919b99728bae200018"},{term:"School Blogger",industryId:"5d6dd907beb2ba4daa3946b4",structureId:"b0a520919b99728bae200018"},{term:"School Choir",industryId:"23c432cc83ddc73ad3ddcb3d",structureId:"02c27dfb52b10a2442c8b9db"},{term:"School Bag Manufacturer",industryId:"26d27710f9cec0657f890546",structureId:"bfefcdf90455208ce57fba0d"},{term:"School Project",industryId:"d9afb557af9390741c5ce35b",structureId:"c8bef80cfea853a15d6562a6"},{term:"School of Music",industryId:"9ae489697fe8f69572c8a4db",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Musical Arts",industryId:"9ae489697fe8f69572c8a4db",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Jazz",industryId:"50c274987982e7528ad6a0a4",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Infantry",industryId:"fd730e0fc09bbde2cadb2fd2",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Sportfishing",industryId:"17de70150d36b3e303f66a57",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Dental Medicine",industryId:"c41d652901114802b7b94731",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Homeopathy",industryId:"521f54098e960e5fd73a9dd9",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School Counselor",industryId:"f58760c40260496737aa5904",structureId:"28e95344ac1c3b2a8f8b4cdc"},{term:"School of Business",industryId:"b85e554832b37d4a51d2bba4",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Dentistry",industryId:"c41d652901114802b7b94731",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Hindu Studies",industryId:"f4d8d9cb889fca8a037dd0ed",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Accounting",industryId:"418d612911b5eae41bf6c2c9",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Medicine",industryId:"36b29cec410200a2ab848e64",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Optometry",industryId:"45eb25aabb351e8b455bdade",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Buddhism",industryId:"a3413064981ed51ee264cb44",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Reflexology",industryId:"5ffe77e0825e4c78185dc4dc",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Pharmacy",industryId:"e2df1a9f2303b7f7e692fb95",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School for The Deaf",industryId:"fa86e88f6c793c3fd02eaa13",structureId:"d92c36de57e30d8ba567d7de"},{term:"School of Biological Sciences",industryId:"c3fd13d4000e090b425a671e",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School for the Hearing Impaired",industryId:"fa86e88f6c793c3fd02eaa13",structureId:"d92c36de57e30d8ba567d7de"},{term:"School of Biology",industryId:"c3fd13d4000e090b425a671e",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Environmental Studies",industryId:"c36550c89656f90a5dedcd12",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Body Piercing",industryId:"da63ef5ba5a593b6dbf8a28c",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School Bus Manufacturer",industryId:"8632e13c921e57ec06794e35",structureId:"bfefcdf90455208ce57fba0d"},{term:"School Supplies Manufacturer",industryId:"3421e87799c8866972fd627e",structureId:"bfefcdf90455208ce57fba0d"},{term:"School Bus Service",industryId:"8632e13c921e57ec06794e35",structureId:"9961911671709492501a101d"},{term:"School Supply Store",industryId:"3421e87799c8866972fd627e",structureId:"e1a2f009d01ba711cb49a6cb"},{term:"School of Veterinary Medicine",industryId:"c0250da8e70668daaf986c76",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Hair Design",industryId:"f67ab1a7a38ef9ae20cd784d",structureId:"ae9e8b38d6271d38e4ff7314"}]},e.prototype.getPagesForHelp=function(e,t){return this.modelTree.getPagesNodes().map(function(i){var n=i.getDisplayName()+": "+i.getId(),o="";e&&(o="\n"+i.children.filter(function(e){return!e.userHidden&&(!t||e.isList())}).map(function(e){return"\t"+e.contentElementType+": "+e.getId()+(e.isList()?" (List)":"")}).join("\n"));return n+o}).join("\n")},e.prototype.reportError=function(e){this.error=e.stack,this.$window.setTimeout(function(){throw e})},e.prototype.help=function(e){this.helpMessage="";var t=[];if(this.json.length>0)try{t=JSON.parse(this.json)}catch(e){return void this.reportError(e)}this.error="",this.json=JSON.stringify(t.concat(e.buildExample()),null,2),this.helpMessage=e.buildMessage()},Object.defineProperty(e.prototype,"sections",{get:function(){var e=this.getHomePageNode();return e?e.children.map(function(e){return{id:e.id,name:e.alias||e.contentElementType}}).slice(1):[]},enumerable:!0,configurable:!0}),e.prototype.initHelps=function(){var e=this;this.helps=[{title:"Add Page",buildExample:function(){return{type:o.SiteUpdateType.AddPage,data:{alias:"The Team",afterPageId:null}}},buildMessage:function(){return"Available page ids:\n"+e.getPagesForHelp(!0)}},{title:"Delete Page",buildExample:function(){var t=e.getFirstPageNode(),i=t&&t.getId();return{type:o.SiteUpdateType.DeletePage,data:{pageId:i}}},buildMessage:function(){return"Available page ids:\n"+e.getPagesForHelp(!0)}},{title:"Set Homepage",buildExample:function(){var t=e.getFirstPageNode(),i=t&&t.getId();return{type:o.SiteUpdateType.SetHomepage,data:{pageId:i}}},buildMessage:function(){return"Available page ids:\n"+e.getPagesForHelp(!0)}},{title:"Rename Page",buildExample:function(){var t=e.getFirstPageNode(),i=t&&t.getId();return{type:o.SiteUpdateType.RenamePage,data:{pageId:i||"",name:"Spaghetti Monster"}}},buildMessage:function(){return"Available page ids:\n"+e.getPagesForHelp()}},{title:"Delete Section",buildExample:function(){var t=e.getHomePageNode(),i=t&&t.getId(),n=i&&t.children&&t.children[1]&&t.children[1].id;return{type:o.SiteUpdateType.DeleteSection,data:{pageId:i||"",sectionId:n||""}}},buildMessage:function(){return"Available page ids and sections:\n"+e.getPagesForHelp(!0)}},{title:"Add Section",buildExample:function(){var t=e.getHomePageNode(),i=t&&t.getId(),n=i&&t.children&&t.children[1]&&t.children[1].id;return{type:o.SiteUpdateType.AddSection,data:{pageId:i||"",afterSectionId:n||"",alias:"Service",ceType:"Service",cardinality:3}}},buildMessage:function(){return"Available page ids:\n"+e.getPagesForHelp()}},{title:"Move Section",buildExample:function(){var t=e.getHomePageNode(),i=t&&t.getId(),n=i&&t.children&&t.children[1]&&t.children[1].id,r=i&&t.children&&t.children.length-1||0,a=i&&t.children&&t.children[r]&&t.children[r].id;return{type:o.SiteUpdateType.MoveSection,data:{pageId:i||"",sectionId:n||"",afterSectionId:a||""}}},buildMessage:function(){return"Available page ids and sections:\n"+e.getPagesForHelp(!0,!0)}},{title:"Add List Item",buildExample:function(){var t=e.getFirstPageNode(),i=t&&t.getId(),n=i&&t.children&&t.children[1]&&t.children[1].id;return{type:o.SiteUpdateType.AddListItem,data:{pageId:i||"",sectionId:n||""}}},buildMessage:function(){return"Available page ids and sections:\n"+e.getPagesForHelp(!0,!0)}},{title:"Remove List Item",buildExample:function(){var t=e.getHomePageNode(),i=t&&t.getId(),n=i&&t.children&&t.children[1]&&t.children[1].id;return{type:o.SiteUpdateType.RemoveListItem,data:{pageId:i||"",sectionId:n||"",listItemNumber:0}}},buildMessage:function(){return"Available page ids and sections:\n"+e.getPagesForHelp(!0,!0)}},{title:"Move List Item",buildExample:function(){var t=e.getHomePageNode(),i=t&&t.getId(),n=i&&t.children&&t.children[1]&&t.children[1].id;return{type:o.SiteUpdateType.MoveListItem,data:{pageId:i||"",sectionId:n||"",listItemNumber:0,afterListItemNumber:1}}},buildMessage:function(){return"Available page ids and sections:\n"+e.getPagesForHelp(!0,!0)}},{title:"Change Kit",buildExample:function(){return{type:o.SiteUpdateType.ChangeKit,data:{id:"56e80ad06c755b9a00887e26"}}},buildMessage:function(){return"Available kits ids:\n"+e.getKitsForHelp()}},{title:"Change Section Layout",buildExample:function(){var t=e.getHomePageNode(),i=t&&t.getId();if((i&&t.children&&t.children.length)<2)return{};var n=t.children[1];if(!n)return{};var r=n.id;return{type:o.SiteUpdateType.ChangeSectionLayout,data:{pageId:i||"",sectionId:r||"",layoutId:e.getLayoutListsHelp(n.contentElementType)[0]}}},buildMessage:function(){return"Available layoutIds for \nsingle:"+e.getLayoutListsHelp()+"\nlist:"+e.getLayoutListsHelp("Service")+"\ncontact:"+e.getLayoutListsHelp("Contact")+"\nOpening hours:"+e.getLayoutListsHelp("OpeningHours")}},{title:"Move Page",buildExample:function(){var t=e.getAllPageNodes(),i=t[0]&&t[0].getId(),n=t[1]&&t[1].getId();return{type:o.SiteUpdateType.MovePage,data:{pageId:i||"",afterPageId:n||""}}},buildMessage:function(){return"Available page ids:\n"+e.getPagesForHelp()}},{title:"Update Section",buildExample:function(){var t=e.getHomePageNode(),i=t&&t.getId();if((i&&t.children&&t.children.length)<2)return{};var r=t.children[1];if(!r)return{};var a,s=r.id;r&&r.children&&r.children.length&&(a=(r=r.children[1]).id);var l={id:s,ceType:r.contentElement.type,title:r.alias||r.contentElement.type,visible:!0,mediaType:"image",fields:n.map(r.contentElement.values,function(e,t){return{key:t,type:e.type,subtype:e.subType,visible:!0,mobileVisible:!0,label:"label",value:e.value}})},c={type:o.SiteUpdateType.UpdateSection,data:{pageId:i,sectionId:s,sectionData:l}};return a&&(c.data.listItemId=a),c},buildMessage:function(){return"pick a section from the drop down and click UpdateSection to create the update message"}},{title:"Publish Site",buildExample:function(){return{type:o.SiteUpdateType.PublishSite,data:{}}},buildMessage:function(){return"Just click update"}},{title:"Build Site",buildExample:function(){var t=e.getSomeTerms();return{name:"mybusiness",category:t[n.random(0,t.length)],contactDetails:{email:"example@wix.com"},socialLinks:[],lastSearchedTerm:"boom",serviceOffer:[],validCategory:!0,extra:{fonts:{name:"Yellowtail",tagline:"Wire One"},tagline:"any tagline text",colors:["#ff0000","#00ff00"]},media:{displayLogo:!0,logos:[{source:"facebook",url:"//static.wixstatic.com/media/1373bd_8388efee5a4645b892da40d0b73e7be7~mv2.jpg",localFile:{status:200,statusText:"OK",responseSize:540,data:{id:"1373bd_8388efee5a4645b892da40d0b73e7be7~mv2.jpg",folderId:"563cabfaa0d7b8be7dac141f0330de2e",fileSize:52374,name:"briancolor.jpg",mediaType:"picture",fileUrl:"media/1373bd_8388efee5a4645b892da40d0b73e7be7~mv2.jpg",sourceUrl:null,createdAt:1524553868,updatedAt:1524553868,readOnly:null,labels:[],tags:[],width:500,height:626,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/1373bd_8388efee5a4645b892da40d0b73e7be7~mv2.jpg_srz_210_210_75_22_0.5_1.20_0.00_jpg_srz",previewUrl:"//static.wixstatic.com/media/1373bd_8388efee5a4645b892da40d0b73e7be7~mv2.jpg_srb_375_375_75_22_0.5_1.20_0.00_jpg_srb",originalUrl:"//static.wixstatic.com/media/1373bd_8388efee5a4645b892da40d0b73e7be7~mv2.jpg",videoPreviewUrls:null},uploadTimingsHeaders:"storage_copy=212 deferred_op=11 byte_range=50000 upload_handler=497 image_dimensions=145 metadata_op=118"},data:{fileName:"briancolor.jpg",fileUrl:"media/1373bd_8388efee5a4645b892da40d0b73e7be7~mv2.jpg",height:626,width:500,relativeUri:"1373bd_8388efee5a4645b892da40d0b73e7be7~mv2.jpg",sourceUrl:null,fileInput:null,Link:{},Description:"",Title:"Untitled",mediaType:"clipart"},description:""}]}}},buildMessage:function(){return"Some terms to use:\n"+JSON.stringify(e.getSomeTerms(),null,2)}}]},e.CONSOLE_HEIGHT=600,e}();t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(577);t.sanitizeEmail=n.sanitizeEmail,t.sanitizePhone=n.sanitizePhone,t.sanitizePII=n.sanitizePII},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(578),o=i(579);function r(e){return e.replace(/(\w+[^\s]*)@(\w+\.\w+)/g,function(e,t,i){return n.hashEmail(t,i)})}t.sanitizeEmail=function(e){return o.validateEmail(e)?r(e):e},t.sanitizePhone=function(e){if(!o.validatePhone(e))return e;var t=e.substr(0,e.length-n.PHONE_NUM_DIGITS_TO_HASH),i=e.substr(t.length);return n.hashPhone(t,i)},t.sanitizePII=function(e){return o.validateString(e)?r(e):e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PHONE_NUM_DIGITS_TO_HASH=5,t.hashEmail=function(e,t){return"@"+t},t.hashPhone=function(e,i){return void 0===e&&(e=""),void 0===i&&(i=""),""+e+Array(t.PHONE_NUM_DIGITS_TO_HASH+1).join("*")}},function(e,t,i){"use strict";function n(e){return"string"==typeof e&&e.length>0}Object.defineProperty(t,"__esModule",{value:!0}),t.validateString=n,t.validateEmail=function(e){return n(e)&&-1!==e.indexOf("@")},t.validatePhone=function(e){return n(e)&&e.length>2}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),angular.module("siteGeneratorStaticsConsumerApp").config(["wixBiLoggerProvider","flagsProvider",function(e,t){var i=function(e){return e.getMetaSiteId()};i.$inject=["consumerBiLoggerHelpers"],e.setConfig({adapter:"onboarding",defaultEventArgs:{msid:i},useBeacon:!!t.useBeacon})}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),o=i(26),r=i(39),a=i(6);angular.module("siteGeneratorStaticsConsumerAppInternal").config(["previewScaleProvider",function(e){function t(e,t){return.55*e/o.Viewer.ViewerDesktopBaseSize}e.range({viewport:[1280,Number.POSITIVE_INFINITY],stage:[1280,Number.POSITIVE_INFINITY],scale:function(e,i){return Math.min(1,t(e))}}).range({viewport:[0,Number.POSITIVE_INFINITY],stage:[300,1280],scale:function(e,i){var n=(i-300)/o.Viewer.ViewerDesktopBaseSize;return Math.min(n,t(e))}})}]),angular.module("siteGeneratorStaticsConsumerAppConfig").config(["$stateProvider","$urlRouterProvider","$locationProvider","flagsProvider",function(e,t,i,o){var s=o.cardsToPanels?a.PANEL_WIDTH:a.CARD_WIDTH,l=function(e){return e.initDropTarget()};l.$inject=["dropTargetCalculator"];var c=function(e,t){e.setScaleFactor(n.PreviewScale.MaxScaleFactor),(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0)&&setTimeout(function(){$("#preview-content").offset({left:s})},4e3)};c.$inject=["previewScale","flags"];var d=function(e,t){e.setScaleFactor(n.PreviewScale.MaxScaleFactor)};d.$inject=["previewScale","flags"];var u=function(e,t,i){e.showMediaSettings(),c(t)};u.$inject=["nodeEditorManager","previewScale","flags"];var p=function(e){e.hideMediaSettings()};p.$inject=["nodeEditorManager"];var g=function(e,t){e.unlockDropTarget(),e.clearDropTarget(),e.listSpanManager.clearPlaceholder(),t.reset(!0)};g.$inject=["overlayManager","previewScale"];var h=function(e){e.clearContentFocus()};h.$inject=["applicationState"];var m=function(e){var t=function(t,i,n){intro.onRoutEnter(t,i,n,e)};return t.$inject=["applicationState","clientTopology","flags"],t};m.$inject=["state"];var f=function(e,t){t.resetFocus(e.contentId)};f.$inject=["$stateParams","contentElementFieldManager"];var v=function(e){e.init()};v.$inject=["revisionReloader"];var S=function(e){e.reset()};S.$inject=["revisionReloader"];var y=function(e){e.showBackdrop=!0};y.$inject=["overlayManager"];var T=function(e){e.showBackdrop=!1};T.$inject=["overlayManager"];var b=function(e,t,i,n){return i.isAnonymousUser()?(e.goToPagesPanel(),t.showSignUpPopup(n),Promise.reject("Not Signed in")):Promise.resolve()},I=function(e,t,i,n,o){i.loaded().then(function(){b(e,n,o,"goToSeoHomepage").then(function(){return e.goToPageSeo(t.homePageId)})})};I.$inject=["applicationState","modelTree","initService","signUpNotifier","anonService"];var P=function(e,t,i,n){b(e,t,i,"goToSEOPanel").then(function(){return y(n)})};P.$inject=["applicationState","signUpNotifier","anonService","overlayManager"];var M=function(e,t){var i=t.getStoryId();i?e.goToBuilder(!0,i):e.goToIntro()};M.$inject=["applicationState","anonService"];var E=e.state(a.STATES.INTRO,{url:"/"+a.STATES.INTRO,template:"<intro></intro>"}),w=function(e,t){return{url:"/"+e+"/{contentId}/{mode}",template:t,data:{panelWidth:360}}};Object.keys(a.STATES).map(function(e){return a.STATES[e]}).filter(function(e){return 0===e.indexOf(a.STATES.INTRO+".")}).forEach(function(e){var t=e.replace(".","-")+(o.newIntroDesign?"-new":"");E=E.state(e,{url:"/"+e.replace("intro.",""),template:"<"+t+"></"+t+">",resolve:{hideContent:["introStep",function(e){return e.hideContent()}]},onEnter:m(e)})}),E.state(a.STATES.RECOVER_ADI,{url:"/recover-adi",template:'<div ui-view=""></div>',onEnter:M}).state(a.STATES.BUILDER,{url:"/builder?silent&industryId&structureId&businessName",params:{silent:{value:"false",squash:!0}},template:void 0,views:{"builder-panel":{template:'<div ui-view=""></div>'}},data:{}}).state(a.STATES.BUILDER_STORY,{url:"/story/{storyId}",template:"<story-container></story-container>",mobile:!0,onEnter:h}).state(a.STATES.BUILDER_STORY_PREVIEW,{url:"/preview",template:"<story-container></story-container>",mobile:!0,onEnter:v,onExit:S}).state(a.STATES.BUILDER_ADD_SECTION,{url:"/add",template:"<add-section></add-section>",data:{panelWidth:r.PreviewList.PreviewListWidth+174},onEnter:l,onExit:g}).state(a.STATES.BUILDER_ADD_PAGE,{url:"/add-page",template:'<add-section data-page-mode="1"></add-section>',data:{panelWidth:r.PreviewList.PreviewListWidth+174}}).state(a.STATES.BUILDER_ADD_APP,{url:"/add-app",template:"<apps-panel></apps-panel>",data:{panelWidth:360}}).state(a.STATES.BUILDER_PAGES,{url:"/pages",template:"<pages-panel></pages-panel>",data:{panelWidth:360},onEnter:h}).state(a.STATES.BUILDER_PAGES_MEMBERS_SIGNUP_SETTINGS,{url:"/members-signup-settings",template:'<pages-panel show-nested="true"></pages-panel>',data:{panelWidth:360}}).state(a.STATES.BUILDER_SELECTED_PAGE,{url:"/page/{pageId}",template:"<pages-panel></pages-panel>",mobile:!0,data:{panelWidth:360}}).state(a.STATES.BUILDER_PAGES_SEO,{url:"/seo/{pageId}",template:"<seo-panel></seo-panel>",data:{panelWidth:300},onEnter:P,onExit:T}).state(a.STATES.BUILDER_EDIT,{url:"/edit/{contentId}/{childId}/{panelType}",template:"<builder-edit></builder-edit>",mobile:!0,data:{panelWidth:s,mobilePanelWidth:r.PreviewList.MobilePreviewListWidth},onEnter:c,onExit:f}).state(a.STATES.BUILDER_SECTION_MEDIA_EDIT,{url:"/section-media-edit/{contentId}/{childId}",template:"<builder-edit></builder-edit>",data:{panelWidth:s,mobilePanelWidth:r.PreviewList.MobilePreviewListWidth}}).state(a.STATES.BUILDER_EDIT_PATTERNS,w("edit-patterns","<builder-edit />")).state(a.STATES.BUILDER_MEDIA_SETTINGS,{url:"/edit/{contentId}/{childId}",template:"<builder-edit></builder-edit>",mobile:!0,data:{panelWidth:s,mobilePanelWidth:r.PreviewList.MobilePreviewListWidth},onEnter:u,onExit:p}).state(a.STATES.BUILDER_SWITCH_PRESET,{url:"/switch-preset/{contentId}",template:"<switch-preset></switch-preset>",data:{panelWidth:r.PreviewList.PreviewListWidth,mobilePanelWidth:r.PreviewList.MobilePreviewListWidth},mobile:!0}).state(a.STATES.BUILDER_SWITCH_PRESET_SECTION_HEIGHT,{url:"/sectionHeight",template:"<switch-preset></switch-preset>",data:{panelWidth:r.PreviewList.PreviewListWidth,mobilePanelWidth:r.PreviewList.MobilePreviewListWidth},mobile:!0}).state(a.STATES.BUILDER_DESIGN,{url:"/design",abstract:!0,template:"<ui-view/>",onExit:d,data:{panelWidth:300}}).state(a.STATES.BUILDER_DESIGN_KITS,{url:"/kits",template:"<design-panel></design-panel>",data:{panelWidth:300}}).state(a.STATES.BUILDER_DESIGN_KIT,{url:"/kit",template:"<design-panel-kit></design-panel-kit>",data:{panelWidth:300}}).state(a.STATES.BUILDER_DESIGN_KIT_COLORATION,{url:"/coloration",template:o.cardsToPanels?'<design-panel show-nested="true"></design-panel>':"<coloration-panel></coloration-panel>"}).state(a.STATES.BUILDER_DESIGN_KIT_COLORATION_ADVANCED,{url:"/advanced",template:o.cardsToPanels?'<design-panel show-nested="true"></design-panel>':"<advanced-palette-editing></advanced-palette-editing>"}).state(a.STATES.BUILDER_DESIGN_KIT_FONTS_NEW,{url:"/fonts/",template:o.cardsToPanels?'<design-panel show-nested="true"></design-panel>':"<font-panel></font-panel>",data:{panelWidth:300}}).state(a.STATES.BUILDER_DESIGN_KIT_ANIMATIONS,{url:"/animations",template:o.cardsToPanels?'<design-panel show-nested="true"></design-panel>':"<animation-panel></animation-panel>",data:{panelWidth:300}}).state(a.STATES.BUILDER_SECTION_MEDIA,{url:"/section-media/{contentId}",template:'<switch-preset show-nested="true"></switch-preset>',data:{panelWidth:360}}).state(a.STATES.BUILDER_NEW_MEDIA_SETTINGS,{url:"/media-settings/{contentId}/{childId}",template:"<media-settings-panel-new></media-settings-panel-new>",data:{panelWidth:360}}).state(a.STATES.BUILDER_SECTION_DESIGN_ANIMATIONS,{url:"/section-animations/{contentId}",template:o.cardsToPanels?'<switch-preset show-nested="true"></switch-preset>':"<section-animation-panel></section-animation-panel>",data:{panelWidth:360}}).state(a.STATES.BUILDER_SLIDESHOW_ANIMATIONS,{url:"/slideshow-animations/{contentId}",template:o.cardsToPanels?'<switch-preset show-nested="true"></switch-preset>':"<slideshow-animation-panel></slideshow-animation-panel>",data:{panelWidth:360}}).state(a.STATES.BUILDER_SECTION_DESIGN_BACKGROUND,w("section-backgrounds",o.cardsToPanels?'<switch-preset show-nested="true"></switch-preset>':"<section-background-panel />")).state(a.STATES.BUILDER_SECTION_DESIGN_FONTS,{url:"/section-font/{contentId}",template:o.cardsToPanels?'<switch-preset show-nested="true"></switch-preset>':"<section-font-panel></section-font-panel>",data:{panelWidth:360}}).state(a.STATES.BUILDER_SECTION_DESIGN_COLORS,{url:"/section-color/{contentId}",template:o.cardsToPanels?'<switch-preset show-nested="true"></switch-preset>':"<switch-color></switch-color>",data:{panelWidth:r.PreviewList.PreviewListWidth}}).state(a.STATES.BUILDER_HOMEPAGE_SEO,{url:"/homepage-seo",onEnter:I}).state(a.STATES.BUILDER_IMPORT_PAGE,{url:"/import-page",template:"<import-page-panel></import-page-panel>",data:{panelWidth:360},onEnter:h}).state("image-search-debug",{url:"/image-search-debug",template:"<image-search-debug>"}).state("server-side-test",{url:"/server-side-test",template:"<server-side-test>"}).state("tester",{url:"/tester",template:"<tester>"}).state(a.STATES.CC_PLAYGROUND,{url:"/playground?panel",params:{panel:{value:"all",squash:!0}},template:'<cc-playground visible-panel-label="{{panel}}" cc-scrollbar class="cc-playground"></cc-playground>',controller:["$scope","$stateParams",function(e,t){return e.panel=t.panel}]}).state(a.STATES.BACKDROP_PLAYGROUND,{url:"/backdrop",template:"<backdrop-playground></backdrop-playground>"}).state(a.STATES.LOGO_COLOR_PLAYGROUND,{url:"/logo-color-playground",template:"<logo-color-playground></logo-color-playground>"}).state(a.STATES.ANALYSIS_PLAYGROUND,{url:"/analysis",template:"<analysis-playground></analysis-playground>"}).state(a.STATES.BUILDER_SECTION_DESIGN_COLORS_EDIT,{url:"/section-color-edit/{contentId}",template:'<builder-edit show-nested="true"></builder-edit>',data:{panelWidth:r.PreviewList.PreviewListWidth}}).state(a.STATES.BUILDER_SECTION_DESIGN_FONTS_EDIT,{url:"/section-font-edit/{contentId}",template:'<builder-edit show-nested="true"></builder-edit>',data:{panelWidth:r.PreviewList.PreviewListWidth}}).state(a.STATES.BUILDER_SECTION_DESIGN_ANIMATIONS_EDIT,{url:"/section-animations-edit/{contentId}",template:'<builder-edit show-nested="true"></builder-edit>',data:{panelWidth:r.PreviewList.PreviewListWidth}}).state(a.STATES.BUILDER_SLIDESHOW_ANIMATIONS_EDIT,{url:"/slideshow-animations-edit/{contentId}",template:'<builder-edit show-nested="true"></builder-edit>',data:{panelWidth:r.PreviewList.PreviewListWidth}}).state(a.STATES.BUILDER_SWITCH_PRESET_SECTION_HEIGHT_EDIT,{url:"/sectionHeightEdit",template:"<builder-edit></builder-edit>",data:{panelWidth:r.PreviewList.PreviewListWidth,mobilePanelWidth:r.PreviewList.MobilePreviewListWidth},mobile:!0}),i.hashPrefix("!"),t.otherwise("/"+a.STATES.INTRO)}])},function(e,t,i){"use strict";var n=function(){function e(e){this.$stateParams=e,this.contentId=this.$stateParams.contentId,this.childId=this.$stateParams.childId}return e.$inject=["$stateParams"],e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("builderEdit",{templateUrl:"views/builder-edit.html",controller:n})},function(e,t,i){"use strict";var n=function(){function e(e){this.$timeout=e}return e.$inject=["$timeout"],e.prototype.link=function(e,t,i){if(e.$last&&i.listEnterEnd){var n=this.buildCallbackFrom(i.listEnterEnd,e),o=this.calculateTotalAnimationsDurations(t),r=o.transitionTotalDuration,a=o.animationTotalDuration;if(a<1&&r<1)n();else{var s=a>r?["animationend",a]:["transitionend",r],l=s[0],c=s[1];this.listenToOwnEventOnce(t,l,n,c)}}},e.prototype.buildCallbackFrom=function(e,t){return function(){return t.$applyAsync(e)}},e.prototype.calculateTotalAnimationsDurations=function(e){var t=e.css(["transitionDuration","transitionDelay","animationDuration","animationDelay","animationIterationCount"]);return{transitionTotalDuration:this.cssTimeToMilliseconds(t.transitionDuration)+this.cssTimeToMilliseconds(t.transitionDelay),animationTotalDuration:this.cssTimeToMilliseconds(t.animationDuration)*parseInt(t.animationIterationCount,10)+this.cssTimeToMilliseconds(t.animationDelay)}},e.prototype.cssTimeToMilliseconds=function(e){return Math.floor(parseFloat(e)*(e.endsWith("ms")?1:1e3))},e.prototype.listenToOwnEventOnce=function(t,i,n,o){var r=_.once(n),a=function(e){e.target===t[0]?r():t.one(i,a)};t.one(i,a);var s=o+e.TIMEOUT_DELTA;this.$timeout(r,s)},e.TIMEOUT_DELTA=500,e}();angular.module("siteGeneratorCommon").directive("listEnterEnd",["$timeout",function(e){return new n(e)}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a,s){this.modelTree=e,this.sitePartTypes=t,this.storyServices=i,this.contentElementUtils=n,this.$injector=o,this.richTextUtils=r,this.flags=a,this.nodeFetcher=s}return e.$inject=["modelTree","sitePartTypes","storyServices","contentElementUtils","$injector","richTextUtils","flags","nodeFetcher"],e.prototype.getBusinessName=function(){var e=this.getGeneralDescriptionValues().BusinessName;return e&&e.value&&this.richTextUtils.toPlainText(e.value)},e.prototype.getGeneralDescriptionValues=function(){return this.modelTree.getGeneralInformation().contentElement.values},e.prototype.getFirstVisibleField=function(e,t){var i=this.contentElementUtils.getFieldsStatuses(e,t);return n.keys(i).find(function(e){return!0===i[e]})},e.prototype.getFirstNodeWithFieldEnabled=function(e){var t=this,i=this.getAllNodesWithContentElement(!0);return n.find(i,function(i){return!!t.getFirstVisibleField(i,e)})},e.prototype.getFirstNodeWithImageEnabled=function(e,t){var i=this,o=this.getAllNodesWithContentElement(!0);return n.find(o,function(n){return!(t&&!t(n)||!i.getFirstVisibleField(n,e))})},e.prototype.getFirstNodeWithCoast2Coast=function(e,t){var i=this,o=this.getAllNodesWithContentElement(!0);return n.find(o,function(e){return(!t||t(e))&&i.$injector.get("mediaSectionUtils").nodeHasBackground(e)})},e.prototype.getAllNodesWithContentElement=function(e){void 0===e&&(e=!1);var t=this.modelTree.getPagesNodes(),i=e?t.filter(function(e){return!e.hidePage}):t;return this.getNodesWithContentElementOfPages(i)},e.prototype.isAllPagesHidden=function(){return this.modelTree.getPagesNodes().every(function(e){return e.hidePage})},e.prototype.getNodesWithContentElement=function(e){return n.flatten(e.map(function(e){return e.isList()?e.children:e}))},e.prototype.getNodesWithContentElementOfPages=function(e){var t=this;return n.flatten(e.map(function(e){return t.getNodesWithContentElement(e.children.filter(function(e){return"PageHeader"!==e.contentElementType}))}))},e.prototype.getNodesOfPageWOPageHeader=function(e){return e.children.filter(function(e){return"PageHeader"!==e.contentElementType})},e.prototype.isItemOfList=function(e){return e.isListItem&&!e.isListHeader()&&!e.isListFooter()},e.prototype.getItemsOfList=function(e){return e.children.slice(1,-1)},e.prototype.getPageNode=function(e){return this.modelTree.getPageNodeById(e)},e.prototype.isPageOfNodeHidden=function(e){var t=this.modelTree.getPageNodeById(e.containerPageId);return t&&t.hidePage},e.prototype.getAllSocialsRelatedNodes=function(){var e=this.getHeaderAndFooterNodes(),t=this.modelTree.getNodesByContentElementName("Contact"),i=t?t.filter(function(e){return e.containerPageId}):[];return[].concat(e,i)},e.prototype.getHeaderAndFooterNodes=function(){return this.modelTree.getNodesByContentElementName("GeneralDescription")},e.prototype.getSocialNode=function(){return this.modelTree.getNodeByContentElementName("Social")},e.prototype.getNodeSitePart=function(e){if(this.flags.refactorOSIActions)return this.nodeFetcher.getNodeSitePart(e);var t=this.getHeaderAndFooterNodes().indexOf(e);return-1===t?this.sitePartTypes.BODY:0===t?this.sitePartTypes.HEADER:this.sitePartTypes.FOOTER},e.prototype.validateNode=function(e){return!!e&&this.isNodeInTreeModel(e)},e.prototype.isNodeInTreeModel=function(e){return!!this.modelTree.traverse(function(t){return t===e})},e.prototype.isSiteHeader=function(e){return this.modelTree.getGeneralInformation()===e},e.prototype.getPositionInPage=function(e){var t=e.isListItem?this.modelTree.findIdentifyingNode(e):e,i=this.modelTree.getPageNodeById(t.containerPageId);return i?this.getNodesOfPageWOPageHeader(i).indexOf(t)+1:-1},e.prototype.getTpaNodesFromAllPages=function(){return n.filter(this.modelTree.getAllTpaNodesFromAllPages(),function(e){return e.isTpa})},e.prototype.getPageAliasById=function(e){var t=this.modelTree.getPageNodeById(e);return t?t.alias:""},e.prototype.selectedPageIsHome=function(){return this.storyServices.story.selectedPage===this.modelTree.homePageId},e.prototype.getContentElementByType=function(e){var t=n.find(this.modelTree.data.children,{contentElementType:e});return t&&t.contentElement},e.prototype.getPagesWithoutTpaExtra=function(){return this.modelTree.getPagesNodes().filter(function(e){return!e.tpaExtraPage})},e}();t.ModelTreeHelpers=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("modelTreeHelpers",o)},function(e,t){angular.module("siteGeneratorIntroInternal").factory("fullStoryLoader",["$window",function(e){return e.wixFullstoryLoader||angular.noop}])},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(176),r=i(240),a=i(1),s=i(0),l=function(){function e(e,t,i,n,a,l,c,d){var u=this;this.performance=e,this.$window=t,this.$timeout=i,this.flags=n,this.storyServices=a,this.obFedops=l,this.consumerBiLogger=c,this.consumerBiLoggerHelpers=d,this.steps=new o.MonitoringSteps,this.bi=new r.MonitoringBI(this.consumerBiLogger,this.consumerBiLoggerHelpers,this.flags,this.$window),this.userFlags="",this.reportErrors=!0,this.errorSlidingWindowTime=10,this.errorSlidingWindowNumber=50,this.errorsSlidingWindow=helpers.aFixedLengthQueue(this.errorSlidingWindowNumber),this.error=function(e,t){return u.detailedError(e,"",new Error(e),t)},this.warning=function(e,t){return u.detailedWarning(e,"",t)},this.onErrorHandler=function(e,t,i,n,o){return u.detailedError(e,"",o)},this.canUsePerformance=function(e){return"function"==typeof e.mark&&"function"==typeof e.measure},this.doIfPerformance=function(e){return u.safeDoIfGet(function(){return u.performance},u.canUsePerformance,e)},this.doIfFedops=function(e){return function(t){return u.safeDoIfGet(function(){return u.interactionName(e)},function(e){return e},t)}},this.doIfDuration=function(e){return function(t){return u.safeDoIfGet(function(){return u.steps.durationOf(e)},function(e){return e>=0},t)}},AdiCoreSanta.setObMonitoring(this);var p=s.get(this.storyServices,"story.flags","");p&&(this.userFlags=JSON.stringify(p)),i(function(){var e=u.$window.onerror;e&&Array.isArray(e.errors)&&e.errors.forEach(function(e){return u.onErrorHandler.apply(null,e)}),t.onerror=u.onErrorHandler},0,!1)}return e.$inject=["performance","$window","$timeout","flags","storyServices","obFedops","consumerBiLogger","consumerBiLoggerHelpers"],e.prototype.detailedWarning=function(e,t,i){void 0===i&&(i={});var n=this.steps.toString();this.steps.clear(),this.consumerBiLogger.err(a.BIErrorCodes.GeneralWarning,this.biError(e,t,null,n,i))},e.prototype.detailedError=function(e,t,i,n){void 0===n&&(n={});var o=(new Date).getTime();this.errorsSlidingWindow.push(o),this.reportErrors&&(this.errorsSlidingWindow.length()===this.errorSlidingWindowNumber&&o-this.errorsSlidingWindow.peek()<1e3*this.errorSlidingWindowTime?(this.reportErrors=!1,this.reportExcessiveErrors("Stopped reporting error BI due to excessive errors","Error burst",null,n)):this.reportDetailedError(e,t,i,n))},e.prototype.reportExcessiveErrors=function(e,t,i,n){void 0===n&&(n={});var o=this.steps.toString();this.steps.clear(),this.consumerBiLogger.err(a.BIErrorCodes.ExcessiveErrors,this.biError(e,t,i,o,n))},e.prototype.reportDetailedError=function(e,t,i,n){void 0===n&&(n={});var o=this.steps.toString();this.steps.clear(),this.consumerBiLogger.err(a.BIErrorCodes.GeneralError,this.biError(e,t,i,o,n))},e.prototype.mark=function(e){this.steps.with(e.name),this.bi.mark(e),this.markDuration(e)},e.prototype.measure=function(e){var t=this.measureDuration(e);return this.bi.measure(e,t),this.steps.without(e.name),t},e.prototype.relicError=function(e,t,i,o,r){return n({message:e,cause:t,stack:i?i.stack:"",steps:o,flags:this.userFlags},r)},e.prototype.biError=function(e,t,i,n,o){return["message: "+e,"cause: "+t,"stack: "+(i?i.stack:""),"flags: "+this.userFlags,"steps: "+n,"extra: "+(o?JSON.stringify(o):"")].join("\n------\n")},e.prototype.safeDoIfGet=function(e,t,i){var n=e();if(t(n))try{i(n)}catch(e){}},e.prototype.interactionName=function(e){var t=e.data&&e.data.isNewSite?e.name+"New":e.name+"Existing";return this.obFedops.interactions[t]||this.obFedops.interactions[e.name]},e.prototype.markDuration=function(e){this.doIfPerformance(function(t){return t.mark("start-"+e.name)}),this.doIfFedops(e)(function(t){return t.started(e.name)})},e.prototype.measureDuration=function(e){var t=-1,i=-1;return this.doIfPerformance(function(i){var n=["start-"+e.name,"end-"+e.name];i.mark("end-"+e.name),i.measure.apply(i,[e.name].concat(n)),i.clearMarks.apply(i,n);var o=i.getEntriesByName(e.name,"measure");t=Math.round(o.pop().duration)}),this.doIfFedops(e)(function(t){return t.ended(e.name)}),this.doIfDuration(e.name)(function(e){return i=e}),-1!==t?t:i},e}();t.ConsumerMonitoring=l,angular.module("siteGeneratorStaticsConsumerAppInternal").service("obMonitoring",l).service("performance",function(){return window.performance}).run(["obMonitoring",function(e){}])},function(e,t,i){var n=i(588),o=i(280).create,r=function(){function e(e){var t=this;this.flags=e;this.fedopsLogger=o("site-generator-statics-consumer");var i=n.find(function(e){return"site-generator-statics-consumer"===e.app_name}),r=Object.keys(i.interactions);this.interactions=r.reduce(function(e,i){return e[i.replace(/(\-\w)/g,function(e){return e[1].toUpperCase()})]={started:function(){return t.flags.silentBI?angular.noop:t.fedopsLogger.interactionStarted(i)},ended:function(){return t.flags.silentBI?angular.noop:t.fedopsLogger.interactionEnded(i)}},e},{})}return e.$inject=["flags"],e.prototype.appLoaded=function(){this.flags.silentBI||this.fedopsLogger.isDisableAutoLoadFinish()||this.fedopsLogger.appLoaded()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("obFedops",r)},function(e){e.exports=[{app_name:"site-generator-statics-consumer",notifications:{slack_channels:["ob-alerts","onboarding-urgent"]},disable_app_load_alert:!0,interactions:{"init-existing":{disable_alerts:!0},"init-new":{},"add-section":{},"change-design-kit":{},"ds-save":{},"ds-publish":{}},deploy_annotations:["site-generator-statics-consumer","site-generator-statics-metadata","onboarding-server-web","adi-content-server-web","adi-cms-data","santa","mobile-web-intro","mobile-web-builder"],petri_annotations:{scopes:["onboarding-server","santa-viewer"]},lighthouse_links:["https://www.wix.com/website/builder"]},{app_name:"adi-intro",notifications:{slack_channels:["ob-alerts"]},interactions:{"category-search":{},"blocked-category":{},"service-offer":{},"import-site-content":{},"business-name":{},"business-location":{},"business-dates":{},"event-details":{},"search-confirm":{},"import-site-confirm":{},"select-user":{},"edit-user":{},recaptcha:{},"youtube-channel":{}},deploy_annotations:["site-generator-statics-consumer","site-generator-statics-metadata","onboarding-server-web","adi-content-server-web","adi-cms-data","santa","mobile-web-intro","mobile-web-builder"],petri_annotations:{scopes:["onboarding-server","santa-viewer"]},lighthouse_links:["https://www.wix.com/website/builder"]}]},function(e,t,i){"use strict";angular.module("siteGeneratorStaticsConsumerAppInternal").filter("trustUrl",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(54);angular.module("siteGeneratorStaticsConsumerAppInternal").component("logoColorExtractionWizard",{templateUrl:"views/common/logo-color-extraction-wizard.html",controller:n.LogoColorExtractionWizard,bindings:{context:"@",firstStep:"&?",logoPersistence:"=",getPreparePalettePromise:"&",enableReplaceLogo:"=",autoStartPreparePalette:"<",updateLogoInModel:"&?",onSkipClick:"&",onCreatePaletteClick:"&",onSavePaletteClick:"&",onDone:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(54);angular.module("siteGeneratorStaticsConsumerAppInternal").component("logoColorExtractionWizardNew",{templateUrl:"views/welcome/logo-color-extraction-wizard-new.html",controller:n.LogoColorExtractionWizard,bindings:{context:"@",firstStep:"&?",logoPersistence:"=",getPreparePalettePromise:"&",enableReplaceLogo:"=",autoStartPreparePalette:"<",updateLogoInModel:"&?",onSkipClick:"&",onCreatePaletteClick:"&",onSavePaletteClick:"&",onDone:"&"}})},function(e,t,i){"use strict";var n=function(){return function(){this.size=this.size||"medium"}}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("colorCircle",{templateUrl:"views/common/color-circle.html",controller:n,bindings:{color:"=",number:"=",size:"@?"}})},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o,r=i(27);!function(e){e.mobile="mobile",e.desktop="desktop"}(o=t.DisplayMode||(t.DisplayMode={}));var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.currentEditMode=function(){return this.mode},t.prototype.iconType=function(){return"cc-icon-switch-to-"+this.currentEditMode()},t.prototype.switchToDesktopEditMode=function(){this.onSelect({mode:o.desktop})},t.prototype.switchToMobileEditMode=function(){this.onSelect({mode:o.mobile})},t}(r.BaseDropDown);t.DisplayModeDropdown=a,angular.module("siteGeneratorStaticsConsumerAppInternal").component("displayModeDropdown",{templateUrl:"views/common/display-mode-dropdown.html",controller:a,bindings:{mode:"<",onSelect:"&"}})},function(e,t,i){"use strict";var n=function(){function e(e,t,i){var n=this;this.$timeout=e,this.$scope=t,this.flags=i,this.timeBeforeFirstPause=600,this.timePerColorMs=700,this.size||(this.size="medium"),this.$scope.$watch("$ctrl.colors",function(){n.colors&&(n.diminished=!1,n.$timeout(function(){n.diminished=!0,n.onDone()},n.timeBeforeFirstPause+n.colors.length*n.timePerColorMs))})}return e.$inject=["$timeout","$scope","flags"],e.prototype.previewCursorClass=function(){return this.colors?"palette-preview-cursor-"+this.colors.length+"-colors":""},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("palettePreview",{templateUrl:"views/common/palette-preview.html",controller:n,bindings:{colors:"=",onDone:"&",size:"@?",isDiminish:"<?",isAnimate:"<?"}})},function(e,t,i){"use strict";var n=function(){function e(e,t){if(this.storyServices=e,this.$timeout=t,this.isShowPopup=!0,this.maxAppearancesCount){var i=this.storyServices.story.tipMessages[this.tipKey];i&&this.maxAppearancesCount<=i?this.isShowPopup=!1:this.storyServices.story.tipMessages[this.tipKey]=i?i++:1}}return e.$inject=["storyServices","$timeout"],e.prototype.closeTip=function(){var e=this;this.$timeout(function(){e.isShowPopup=!1})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("tipMessage",{templateUrl:"views/common/tip-message.html",controller:n,bindings:{enableClose:"=?",titleIcon:"<?",title:"@",description:"@",onCloseTip:"&?",maxAppearancesCount:"@?",tipKey:"@?"}})},function(e,t,i){"use strict";angular.module("siteGeneratorCommon").component("preloaderCompleted",{templateUrl:"views/animations/preloader-completed.html"})},function(e,t,i){"use strict";var n=function(){return function(){}}();angular.module("siteGeneratorCommon").component("preloaderPublishCompleted",{templateUrl:"views/animations/preloader-publish-completed.html",bindings:{inProgress:"=",completed:"=",inverted:"="},controller:n})},function(e,t){var i=function(){function e(){var e=this;this.cbs=[],this.perform=function(){e.registered=!1;var t=e.cbs;e.cbs=[],t.forEach(function(e){return e()})}}return e.prototype.add=function(e){this.cbs.push(e),this.registered||(this.registered=!0,requestAnimationFrame(this.perform))},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("animationChanges",i)},function(e,t){var i=function(){function e(){}return e.prototype.getFlagData=function(e,t){var i=e.split("."),n={name:i[i.length-1],value:t};return void 0===t||"false"===t||!1===t?n.value=!1:"true"!==t&&!0!==t||(n.value=!0),n},e.prototype.$get=function(){var e=this;return{getFlagData:function(t,i){return e.getFlagData(t,i)}}},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").provider("experimentParser",i)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("adjustToScale",["previewScale","$parse",function(e,t){return{restrict:"A",scope:!1,link:function(i,n,o){function r(){var e=o.baseHeight||o.adjustToScale;return e?t(e)(i):null}function a(){return o.baseWidth?t(o.baseWidth)(i):null}function s(){return o.baseTop?t(o.baseTop)(i):null}function l(){return o.baseLeft?t(o.baseLeft)(i):null}function c(e,t,i,o,r){var a={};"number"==typeof i&&(a.height=i*e),"number"==typeof t&&(a.width=t*e),"number"==typeof o&&(a.top=o*e),"number"==typeof r&&(a.left=r*e),n.css(a)}i.$watch(function(){return e.getScale()},function(e){return c(e,a(),r(),s(),l())}),i.$watch(function(){return r()},function(t){return c(e.getScale(),a(),r(),s,l())}),i.$watch(function(){return a()},function(t){return c(e.getScale(),t,r(),s,l())}),i.$watch(function(){return s()},function(t){return c(e.getScale(),a(),r(),t,l())}),i.$watch(function(){return l()},function(t){return c(e.getScale(),a(),r(),s,t)})}}}])},function(e,t){angular.module("siteGeneratorStaticsConsumerAppInternal").directive("animateOnChange",["$animate","$timeout",function(e,t){return{restrict:"A",scope:{animateOnChange:"@?"},link:function(e,t,i){t.css({position:"relative"});var n=function(){return $('<div class="current">'+e.animateOnChange+"</div>")};n().appendTo(t),e.$watch("animateOnChange",function(e,i){if(e!==i){var o=t.find(".current"),r=n().css({opacity:0}).appendTo(t);o.css({position:"absolute",width:"100%"}).fadeOut(200,function(){$(this).remove()}),r.animate({opacity:1},200)}})}}}])},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(30),r=i(10),a=function(e){function t(t,i,n,o,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P){var M=e.call(this,P)||this;return M.initService=t,M.CONSUMER_DIALOGS=i,M.applicationState=n,M.themeChooser=o,M.CcDialogBuilder=a,M.contentManager=s,M.designKitManager=l,M.consumerBiLogger=c,M.obMonitoring=d,M.storyServices=u,M.$element=p,M.flags=g,M.$translate=h,M.$timeout=m,M.assistantManager=f,M.previewScale=v,M.kitUtils=S,M.layoutSelectionStoreProvider=y,M.$scope=T,M.designPanelBackManager=b,M.$rootScope=I,M.unsettingKitIsInView=!1,M.unsettingKitId="",M.settingKitId="",M.shouldShowMenu=!1,M.storyLoaded=!1,M.unsubscribers=[],t.loaded().then(function(){return s.initialize(u.story)}).then(function(){return o.initialize()}).then(function(){return M.kitUtils.calculateKits()}).then(function(e){M.flags.removeSpinnerAsStageReady&&(M.storyLoaded=!0);var t=M.themeChooser.filterNewVersionKits(e),i=e.filter(function(e){return e.id===M.themeChooser.getActiveTheme("mainKit").id}).filter(function(e){return M.themeChooser.isOldKitVersion(e)});e=i?i.concat(t):t,M.colorThemeKits=e,v.setScaleFactor(r.PreviewScale.MinScaleFactor),M.flags.cardsToPanels&&(M.unsubscribers.push(M.$rootScope.$on("$stateChangeSuccess",function(){return M.updateShowNested()})),M.updateShowNested())}),M}return n(t,e),t.$inject=["initService","CONSUMER_DIALOGS","applicationState","themeChooser","CcDialogBuilder","contentManager","designKitManager","consumerBiLogger","obMonitoring","storyServices","$element","flags","$translate","$timeout","assistantManager","previewScale","kitUtils","layoutSelectionStoreProvider","$scope","designPanelBackManager","$rootScope","helpDialogManager"],t.prototype.updateShowNested=function(){this.showNested=!this.applicationState.isSwitchKitMode()},t.prototype.$onDestroy=function(){this.unsubscribers.forEach(function(e){return e()})},t.prototype.scrollInsideContainer=function(e,t,i){e.animate({scrollTop:t},i)},t.prototype.scrollToSelectedKit=function(e){var t=this;!1!==this.assistantManager.getCustomTaskData("scrollToSelectedKit")&&this.$timeout(function(){var i=t.$element.find(".cc-panel-body"),n=Math.max(0,t.$element.find(".kit-option.selected")[0].offsetTop-12),o="animated"===e?1e3:0;t.scrollInsideContainer(i,n,o)},250)},t.prototype.closeDesignPanel=function(){var e=this;this.$scope.$applyAsync(function(){e.applicationState.goToBuilder(),e.consumerBiLogger.siteDesign.designWindowWasClosed("design")})},t.prototype.openDesignPanelHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.design.menu"),this.CONSUMER_DIALOGS.DESIGN_PANEL_HELP)},t.prototype.setKit=function(e,t){var i=this;this.obMonitoring.mark({name:"changeDesignKit"}),this.unsettingKitIsInView=this.isSelectedInView(),this.unsettingKitId=this.themeChooser.getActiveTheme("mainKit").id,this.settingKitId=e.id,this.layoutSelectionStoreProvider.getLayoutSelectionStore().resetFieldColorOverrides(),this.consumerBiLogger.siteDesign.clickOnDesiredDesign(this.unsettingKitId,t,"click on design",this.settingKitId),this.designKitManager.setActiveMainKit(this.settingKitId).then(function(){i.consumerBiLogger.siteDesign.designChangeSuccess(i.unsettingKitId,t,"click on design",i.settingKitId)}).finally(function(){i.$timeout(function(){i.unsettingKitId="",i.settingKitId=""},10),i.$timeout(function(){return i.scrollToSelectedKit("animated")},300),i.obMonitoring.measure({name:"changeDesignKit"})})},t.prototype.isSelectedInView=function(){var e=!1,t=this.$element.find("cc-panel-frame .cc-scrollbar"),i=this.$element.find(".selected.kit-option"),n=t.scrollTop(),o=n+t.outerHeight();if(i.position()){var r=i.position().top;e=n<r+i.outerHeight()&&r<o}return e},t.prototype.customizeKit=function(){this.applicationState.goToDesignKitMode(),this.consumerBiLogger.siteDesign.customizeDesignPanelIsLoaded()},t.prototype.isActiveKit=function(e){return this.settingKitId!==e.id&&(this.unsettingKitId===e.id||this.themeChooser.getActiveTheme("mainKit")===e)},t.prototype.getKitDisplayColor=function(e){return this.themeChooser.getColorByIndexInPalette(e,2)},Object.defineProperty(t.prototype,"isMenuVisible",{get:function(){if(this.assistantManager.isInActiveTask()){var e=this.assistantManager.getCustomTaskData("showSiteDesignMenu");if(void 0!==e)return e}return this.shouldShowMenu},enumerable:!0,configurable:!0}),t.prototype.showSiteDesignMenu=function(){this.shouldShowMenu=!0},t.prototype.hideSiteDesignMenu=function(){this.shouldShowMenu=!1},t.prototype.onReturn=function(){this.designPanelBackManager.back()},t}(o.PanelBase);angular.module("siteGeneratorStaticsConsumerAppInternal").component("designPanel",{templateUrl:"views/design/design-panel.html",controller:a,bindings:{showNested:"<?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),o=i(1),r=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f){var v=this;this.flags=e,this.$scope=t,this.$translate=i,this.previewScale=n,this.applicationState=o,this.consumerBiLogger=r,this.CcDialogBuilder=a,this.colorationUtils=s,this.fontCustomizationService=l,this.undoRedo=c,this.CONSUMER_DIALOGS=d,this.designKitManager=u,this.animationUtils=p,this.animationKit=g,this.backgroundScrollService=h,this.pagesManager=m,this.fontUtils=f,s.initialize().then(function(){v.kitColors=v.designKitManager.getPaletteColors(),v.selectedFontData=v.designKitManager.getActiveFontThemeAsThumbnail(),v.isLoaded=!0,v.kit=v.designKitManager.getActiveTheme(),v.$scope.$watch(function(){return v.designKitManager.getActiveTheme()},function(e){return v.kit=e}),v.$scope.$watch(function(){return v.designKitManager.getActiveFontTheme()},function(e){return v.selectedFontData=v.designKitManager.getActiveFontThemeAsThumbnail()}),v.$scope.$watch(function(){return v.designKitManager.getPaletteColors()},function(e){return v.kitColors=e})})}return e.$inject=["flags","$scope","$translate","previewScale","applicationState","consumerBiLogger","CcDialogBuilder","colorationUtils","fontCustomizationService","undoRedo","CONSUMER_DIALOGS","designKitManager","animationUtils","animationKit","backgroundScrollService","pagesManager","fontUtils"],e.prototype.getKitName=function(){return this.kit&&this.kit.displayName||""},e.prototype.close=function(){var e=this;this.$scope.$applyAsync(function(){e.previewScale.setScaleFactor(n.PreviewScale.MaxScaleFactor),e.applicationState.goToBuilder(),e.consumerBiLogger.siteDesign.designWindowWasClosed("customize")})},e.prototype.onHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.design.panel-kit"),this.CONSUMER_DIALOGS.DESIGN_PANEL_HELP)},e.prototype.backToDesign=function(){this.applicationState.goToDesignMode(),this.consumerBiLogger.siteDesign.designPanelIsLoaded("back from customize")},e.prototype.goToFontsPanel=function(){this.applicationState.goToFontsPanel(o.BIOrigins.DesignPanel)},e.prototype.goToAnimationPanel=function(){this.applicationState.goToAnimationPanel(o.BIOrigins.DesignPanel)},e.prototype.getActiveAnimation=function(){return this.animationUtils.getActivePatternLabelForSite()},e.prototype.openNewColorationPanel=function(){return this.consumerBiLogger.siteDesign.customizeDesignColorPaletteMode(o.BIOrigins.DesignPanel),this.applicationState.goToColorationPanel()},e.prototype.is6ColorsPalette=function(){return 6===this.colorationUtils.numOfColors(this.kitColors)},e.prototype.kitHasOverrides=function(){return!!this.kit&&this.designKitManager.isKitOveridden()},e.prototype.onReset=function(){var e=this;this.consumerBiLogger.siteDesign.clickOnResetDesign(!1),this.designKitManager.setActiveMainKit(this.kit.id).then(function(){e.consumerBiLogger.siteDesign.resetDesignSuccess(!1),e.selectedFontData=e.designKitManager.getActiveFontThemeAsThumbnail(),e.kitColors=e.designKitManager.getActiveKitDefaultColors()})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("designPanelKit",{templateUrl:"views/design/design-panel-kit.html",controller:r})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(25),o=i(12),r=i(10),a=function(){function e(e,t,i,o,a,s,l,c,d,u,p,g,h,m,f){var v=this;this.$translate=e,this.applicationState=t,this.CcDialogBuilder=i,this.colorationUtils=o,this.modelTree=a,this.mediaOverrideManager=s,this.CONSUMER_DIALOGS=l,this.consumerDialogs=c,this.$scope=d,this.consumerBiLogger=u,this.previewScale=p,this.undoRedo=g,this.logoHandler=h,this.flags=m,this.themeChooser=f,this.isScrolling=!1,this.isReadyToBeDisplayed=!1,this.dialogOnShowing=function(){v.showBackdrop=!0,$(document.body).addClass(n.PALETTE_DIALOG_OPEN_CLASS)},this.onColorSelected=function(){v.colorationUtils.removePalettes()},this.onPaletteListShown=function(e){v.showLoader=!1,v.showBackdrop=!1,v.scrollToSelectedPalette(e)},o.initialize().then(function(){v.$scope.$watch(function(){return v.colorationUtils.getMainColor()},function(e){return v.mainColor=e}),p.setScaleFactor(r.PreviewScale.MinScaleFactor),v.isReadyToBeDisplayed=!0,v.extractLogoColorsIfNeeded(),d.$watch(function(){return v.getActiveColorationModeAndLevel()},function(){v.populateDropdownItems()})})}return e.$inject=["$translate","applicationState","CcDialogBuilder","colorationUtils","modelTree","mediaOverrideManager","CONSUMER_DIALOGS","consumerDialogs","$scope","consumerBiLogger","previewScale","undoRedo","logoHandler","flags","themeChooser"],e.prototype.$onInit=function(){this.applicationState.isSilent()||this.colorationUtils.willLoadPalettes()&&this.showLoadingAnimation()},e.prototype.showLoadingAnimation=function(){this.showBackdrop=!0,this.showLoader=!0},e.prototype.backToDesignKit=function(){this.applicationState.goToDesignMode()},e.prototype.openHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.design.coloration"),this.CONSUMER_DIALOGS.COLORATION_PANEL_HELP)},e.prototype.closePanel=function(){var e=this;this.$scope.$applyAsync(function(){e.previewScale.setScaleFactor(r.PreviewScale.MaxScaleFactor),e.applicationState.goToBuilder()})},e.prototype.goToAdvancedPaletteEditing=function(){var e=this;this.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeAdvancedEditingColorClick(),this.applicationState.goToAdvancedPaletteEditing().then(function(){return e.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeAdvancedEditingColorClickSuccess()})},e.prototype.changeMainColor=function(e){this.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeChangeColorMainClick(),this.openChangeColorDialog(e,n.ePaletteColorPickerStates.mainColor)},e.prototype.openChangeColorDialog=function(e,t){var i=this;return this.consumerDialogs.showDialog(o.ConsumerDialogTypes.PALETTE_COLOR_DIALOG_POPUP,this.dialogOnShowing,null,{color:e,colorType:t,onColorSelected:this.onColorSelected}).then(function(e){if(e)return i.showLoader=!0,i.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelect(!1,e.origin),i.colorationUtils.switchMainColor(e.color).then(function(){i.populateDropdownItems(),i.undoRedo.captureOperation(!1,!0),i.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelectSuccess(!1,e.origin)});i.onPaletteListShown(!1)}).catch(function(){return i.onPaletteListShown(!1)})},e.prototype.extractLogoColorsIfNeeded=function(){var e=this,t=this.modelTree.getGeneralInformation();if(t.getArgsMatchingPolicy().Logo&&this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(t)===cc.MediaPreviewType.Clipart&&!this.colorationUtils.getLogoPalette()){var i=t.contentElement.getFieldValue("Logo").value[0];this.logoHandler.lazyGetLogoColorationPromise(i).then(function(t){return e.colorationUtils.setLogoColors(t)})}},e.prototype.getLogoColors=function(){return this.colorationUtils.getLogoPalette().colors},e.prototype.selectLogoPalette=function(){var e=this;if(!this.isLogoPaletteSelected()){var t=Date.now(),i=this.colorationUtils.getLogoPalette().numOfColors,n=this.colorationUtils.getNumPalettes();this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(i,n,"logo",-1,"customize-palette-panel"),this.colorationUtils.useLogoColors({setColorationMode:!1,overrideMainColor:!1}).then(function(){var o=Date.now()-t;e.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(o,i,n,"logo",-1,"customize-palette-panel"),e.populateDropdownItems(),e.undoRedo.captureOperation(!1,!0)})}},e.prototype.isLogoPaletteAvailable=function(){return!!this.colorationUtils.getLogoPalette()},e.prototype.isLogoPaletteSelected=function(){return this.colorationUtils.getActivePaletteIndex()===n.LOGO_PALETTE_INDEX},e.prototype.scrollToSelectedPalette=function(e){var t=this;if(!this.isScrolling){var i=$("coloration-panel .cc-panel-body"),n=i.find("palette-list kit-palette.-selected");if(0!==n.length){var o=$("coloration-panel .p18-panel-footer"),r=n.height(),a=parseInt(n.css("margin-bottom"),10),s=n.offset().top;if(s+r>o.offset().top){var l=s-i.offset().top-(r/2+a);e?(this.isScrolling=!0,i.animate({scrollTop:l},1e3,function(){return t.isScrolling=!1})):i.scrollTop(l)}}}},e.prototype.populateDropdownItems=function(){this.dropdownItems=[{label:this.getActiveColorationModeAndLevel(),value:n.ColorationMode.light}]},e.prototype.getActiveColorationModeAndLevel=function(){var e=this,t=this.themeChooser.coloration.getActiveKitColorationMode(),i=this.themeChooser.coloration.getActiveKitColorationLevel(),o=function(t){return e.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-mode.radio-buttons."+t)};return void 0===i?o(n.ColorationMode[t]):o(n.ColorationMode[t])+" & "+function(t){return e.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-level.drop-down."+t)}(n.ColorationLevel[i])},e.prototype.changeColorationMode=function(){this.openChangeColorationModeDialog()},e.prototype.openChangeColorationModeDialog=function(){var e=this;return this.consumerDialogs.showDialog(o.ConsumerDialogTypes.COLOR_MODE_DIALOG_POPUP,this.dialogOnShowing,null).then(function(){e.onPaletteListShown(!1)}).catch(function(){e.onPaletteListShown(!1)})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("colorationPanel",{templateUrl:"views/design/coloration-panel.html",controller:a})},function(e,t){var i=function(){return function(){}}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("colorationPanelOverlay",{templateUrl:"views/design/coloration-panel-overlay.html",controller:i,bindings:{showBackdrop:"<",showLoader:"<",loaderText:"@"}})},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(175),r=i(25),a=i(12),s=i(10),l=i(0),c=function(){function e(e,t,i,o,a,l,c,d,u,p,g){var h=this;this.applicationState=e,this.colorationUtils=t,this.$q=i,this.$timeout=o,this.flags=a,this.consumerDialogs=l,this.$window=c,this.consumerBiLogger=d,this.$scope=u,this.previewScale=p,this.undoRedo=g,this.ARROW_BUTTON_CLASS="arrow-down",this.colorsHaveBeenChanged=!1,this.showLoader=!1,this.colorsStateEnum=r.ePaletteColorPickerStates,this.dialogOnShowing=function(e,t,i){$(document.body).addClass(r.PALETTE_DIALOG_OPEN_CLASS);var n=$(e.currentTarget),o=i.find("md-dialog");h.$timeout(function(){o.css(h.getDialogCoords(n,o)),h.$timeout(function(){o.addClass("visible")})},500)},this.dialogOnRemoving=function(){$(document.body).removeClass(r.PALETTE_DIALOG_OPEN_CLASS)},t.initialize().then(function(){h.originalColoration=t.getCurrentState(),u.$watch(function(){return t.getActivePalette().colors},function(e){h.colors=n({},e),h.checkReadability()}),p.setScaleFactor(s.PreviewScale.MinScaleFactor)})}return e.$inject=["applicationState","colorationUtils","$q","$timeout","flags","consumerDialogs","$window","consumerBiLogger","$scope","previewScale","undoRedo"],e.prototype.closePanel=function(){var e=this;this.$scope.$applyAsync(function(){e.previewScale.setScaleFactor(s.PreviewScale.MaxScaleFactor),e.applicationState.goToBuilder(!0)})},e.prototype.backToColoration=function(){this.applicationState.goToColorationPanel()},e.prototype.changeColorsByHex=function(){var e=this;this.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelect(!0,"hex"),this.changeColors().then(function(){return e.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelectSuccess(!0,"hex")})},e.prototype.changeColors=function(){var e=this;return this.$timeout(function(){e.colorsHaveBeenChanged=!0;var t=e.colorationUtils.setCustomColors(e.colors);return e.checkReadability(),e.undoRedo.captureOperation(!1,!0),t})},e.prototype.getDialogCoords=function(e,t){var i=e.offset(),n=e.outerHeight(!0)/2,o=t.outerHeight(!0),r={top:i.top+n-54,left:i.left+e.width()+6+6};return r.top+o>this.$window.innerHeight&&(r.top=i.top-o+n+54,t.addClass(this.ARROW_BUTTON_CLASS)),r},e.prototype.openColorPicker=function(e,t,i){var n=this,s={color:t,colorType:i,state:o.ePaletteColorDialogStates.ADVANCED,$event:e,layout:"left right"};this.consumerDialogs.showDialog(a.ConsumerDialogTypes.PALETTE_COLOR_DIALOG_POPUP,this.dialogOnShowing,null,s).then(function(e){e&&(n.colors[r.ePaletteColorPickerStates[i]]=e.color,n.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelect(!0,e.origin),n.changeColors().then(function(){return n.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelectSuccess(!0,e.origin)}))})},e.prototype.resetColors=function(){var e=this;this.consumerBiLogger.siteDesign.clickOnResetDesign(!0),this.$timeout(function(){e.colorationUtils.restoreState(e.originalColoration).then(function(){return e.consumerBiLogger.siteDesign.resetDesignSuccess(!0)}),e.colors=n({},e.colorationUtils.getActivePalette().colors),e.checkReadability(),e.colorsHaveBeenChanged=!1,e.undoRedo.captureOperation(!1,!0)})},e.prototype.shouldShowReset=function(){return this.colorsHaveBeenChanged},e.prototype.checkReadability=function(){var e=this.areColorsReadable;this.areColorsReadable=this.colorationUtils.areColorsReadable(this.colors),e&&!this.areColorsReadable&&this.consumerBiLogger.siteDesign.customizeDesignAdvancedColorsAreHardToReadDisplayed()},e.prototype.fixColors=function(){var e=this;this.consumerBiLogger.siteDesign.customizeDesignAdvancedUserClicksFixColors(),this.showLoader=!0,this.$q.all([this.$timeout(1e3),this.$q.resolve().then(function(){var t=e.colorationUtils.makeColorsReadable(e.colors);return e.colors=l.merge({},e.colors,t),e.changeColors()})]).then(function(){return e.showLoader=!1}).then(function(){return e.areColorsReadable&&e.consumerBiLogger.siteDesign.customizeDesignAdvancedFixColorsSuccess()})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("advancedPaletteEditing",{templateUrl:"views/design/advanced-palette-editing.html",controller:c})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.editableColor={value:this.color},e.$watch(function(){return t.color},function(e,i){e!==i&&(t.editableColor.value=e)})}return e.$inject=["$scope"],e.prototype.colorChange=function(e){"#"===e[0]&&"#"===e[1]&&(this.editableColor.value=e.slice(1,e.length),this.setColor())},e.prototype.selectColorText=function(e){var t=e.target,i=0;"#"===t.value[0]&&(i=1),t.setSelectionRange(i,t.value.length)},e.prototype.setColor=function(){this.color!==this.editableColor.value&&(this.isColorValid(this.editableColor.value)&&("#"!==this.editableColor.value[0]&&(this.editableColor.value="#"+this.editableColor.value),this.color=this.editableColor.value,this.onTextChange({color:this.color})),this.editableColor.value=this.color)},e.prototype.isColorValid=function(e){return/^#?[0-9A-F]{6}$/i.test(e)},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("paletteColor",{templateUrl:"views/design/palette-color.html",controller:n,bindings:{label:"@",color:"=",onIconClick:"&",onTextChange:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(25),o=i(1),r=i(0),a=function(){function e(e,t,i,o,a,s,l){var c=this;this.$p=e,this.themeChooser=t,this.flags=i,this.$scope=o,this.colorationUtils=a,this.consumerBiLogger=s,this.undoRedo=l,this.palettes=[],this.visiblePalettes=[],this.customPalette=null,this.visibleCustomPalette=null,this.isCustomSelected=!1,this.selectedIndex=-1,a.initialize().then(function(){a.setShouldUpdatePalettes(),c.showAnimation=a.willLoadPalettes(),o.$watch(function(){return a.getActivePaletteIndex()},function(e){c.selectedIndex=e,c.isCustomSelected=e===n.CUSTOM_PALETTE_INDEX}),o.$watch(function(){return a.getPalettes()},function(e,t){e!==t&&(c.showAnimation=!0),c.palettes=e,c.visiblePalettes=c.convertToVisiblePalettes(c.palettes)}),o.$watch(function(){return a.getCustomPalette()},function(e){c.customPalette=e,c.customPalette&&(c.visibleCustomPalette=1===c.customPalette.colors.colorationVersion?c.handleSelectedVisiblePalette(r.cloneDeep(c.customPalette)):c.customPalette)}),o.$watch(function(){return a.getColorationLevel()},function(e,t){e!==t&&c.updateSelectedPalette()})})}return e.$inject=["$p","themeChooser","flags","$scope","colorationUtils","consumerBiLogger","undoRedo"],e.prototype.select=function(e){var t=this;if(e!==this.selectedIndex){var i=this.palettes[e],n=this.customPalette?1:0,r=this.colorationUtils.getNumPalettes(),a=Date.now();this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(i.numOfColors,r,i.creator,n+e,o.BIOrigins.ColorationPanel),this.colorationUtils.setActivePaletteByIndex(e,this.deriveColorationLevelFromPalette(e)).then(function(){t.onPaletteSelected(),t.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(Date.now()-a,i.numOfColors,r,i.creator,n+e,o.BIOrigins.ColorationPanel)}),this.undoRedo.captureOperation(!1,!0)}},e.prototype.selectCustom=function(){var e=this;if(!this.isCustomSelected){var t=this.colorationUtils.getNumPalettes(),i=Date.now();this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(this.customPalette.numOfColors,t,this.customPalette.creator,0,o.BIOrigins.ColorationPanel),this.colorationUtils.setActivePaletteByIndex(n.CUSTOM_PALETTE_INDEX,this.deriveColorationLevelFromPalette(n.CUSTOM_PALETTE_INDEX)).then(function(){e.onPaletteSelected(),e.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(Date.now()-i,e.customPalette.numOfColors,t,e.customPalette.creator,0,o.BIOrigins.ColorationPanel)}),this.undoRedo.captureOperation(!1,!0)}},e.prototype.updateSelectedPalette=function(){this.selectedIndex===n.CUSTOM_PALETTE_INDEX?this.visibleCustomPalette=this.handleSelectedVisiblePalette(r.cloneDeep(this.customPalette)):void 0!==this.palettes[this.selectedIndex]&&(this.visiblePalettes[this.selectedIndex]=this.handleSelectedVisiblePalette(r.cloneDeep(this.palettes[this.selectedIndex])))},e.prototype.convertToVisiblePalettes=function(e){var t=this;if(!e)return[];var i=n.isPalette(e[0])&&"default"===e[0].creator?1:0,o=this.selectedIndex;return this.palettes.map(function(e,n){var r;if(n===o)r=t.handleSelectedVisiblePalette(e);else if(n===i)r=t.reduceToPaletteOf(4,e);else{if(n!==i+1)return e;r=t.reduceToPaletteOf(5,e)}return r})},e.prototype.reduceToPaletteOf=function(e,t){var i=r.cloneDeep(t);switch(e){case 5:return delete i.colors.secondaryColor,i.numOfColors=5,i;case 4:return delete i.colors.secondaryColor,delete i.colors.mainColor,i.numOfColors=4,i;default:return t}},e.prototype.handleSelectedVisiblePalette=function(e){var t=this.themeChooser.coloration.getActiveKitColorationLevel();return t===ThemeChooser.COLORATION_LEVEL.plain?this.reduceToPaletteOf(4,e):t===ThemeChooser.COLORATION_LEVEL.colorful||t===ThemeChooser.COLORATION_LEVEL.tinted?this.reduceToPaletteOf(5,e):e},e.prototype.deriveColorationLevelFromPalette=function(e){var t;if(e>=0?t=this.visiblePalettes[e]?this.visiblePalettes[e].numOfColors:0:e===n.CUSTOM_PALETTE_INDEX&&(t=this.visibleCustomPalette?this.visibleCustomPalette.numOfColors:0),void 0!==t)switch(t){case 6:return n.ColorationLevel.vibrant;case 5:return n.ColorationLevel.colorful;case 4:default:return n.ColorationLevel.plain}return null},e.prototype.handleListAnimationEnd=function(){this.onListShown&&this.onListShown({withAnimation:this.showAnimation})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("paletteList",{templateUrl:"views/design/palette-list.html",controller:a,bindings:{onListShown:"&",onPaletteSelected:"&?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.$scope=e,e.$watch(function(){return t.kitColors},function(e){var i=e?[e.mainColor,e.secondaryColor,e.thirdColor,e.fourthColor,e.white,e.black]:[];t.colors=i.filter(function(e){return null!=e})})}return e.$inject=["$scope"],e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("kitPalette",{templateUrl:"views/design/kit-palette.html",controller:n,bindings:{kitColors:"<",isSelectable:"<",isSelected:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.colorClick=function(e){this.selectedColor=e.color,this.onColorSelected&&this.onColorSelected({selection:e})},e.prototype.placeholderClick=function(){this.onPlaceholderClick&&this.onPlaceholderClick()},e.prototype.isSelected=function(e){return this.selectedColor&&e.color&&this.selectedColor.toUpperCase()===e.color.toUpperCase()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("paletteColorPicker",{templateUrl:"views/design/palette-color-picker.html",controller:n,bindings:{showAddColor:"<",colors:"<",onColorSelected:"&",selectedColor:"<",onPlaceholderClick:"&?",colorsSize:"@"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(25),o=function(){function e(e,t,i,n,o,r){var a=this;this.undoRedo=e,this.$scope=t,this.$translate=i,this.colorationUtils=n,this.consumerBiLogger=o,this.flags=r,this.value=0,n.initialize().then(function(){a.$scope.$watch(function(){return n.getColorationMode()},function(e){return a.value=e})}),this.populateDropdownItems()}return e.$inject=["undoRedo","$scope","$translate","colorationUtils","consumerBiLogger","flags"],e.prototype.populateDropdownItems=function(){this.dropdownItems=[{label:this.$translate.instant("design.coloration.coloration-mode-selector.dropdown.light-mode"),value:n.ColorationMode.light},{label:this.$translate.instant("design.coloration.coloration-mode-selector.dropdown.dark-mode"),value:n.ColorationMode.dark}]},Object.defineProperty(e.prototype,"dropdownValue",{get:function(){var e=this;return this.dropdownItems.find(function(t){return t.value===e.value})},set:function(e){},enumerable:!0,configurable:!0}),e.prototype.onDropdownSelectionChange=function(e){var t=this;this.consumerBiLogger.siteDesign.customizeDesignChangeDarkLightMode(n.ColorationMode[e.value]),this.colorationUtils.setColorationMode(e.value).then(function(){return t.undoRedo.captureOperation(!1,!0)}).then(function(){return t.consumerBiLogger.siteDesign.customizeDesignChangeDarkLightModeSuccess(n.ColorationMode[e.value])})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("colorationModeSelector",{templateUrl:"views/design/coloration-mode-selector.html",controller:o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(242),o=function(){function e(e,t,i,n){var o=this;this.$timeout=e,this.$element=t,this.$scope=i,this.$q=n,this.hexIsValid=!0,this.eventAPI={onChange:function(e,t,i){return o.colorPickerChange()}},this.options={alpha:!1,format:"hex",inline:!0},this.init()}return e.$inject=["$timeout","$element","$scope","$q"],e.prototype.init=function(){var e=this;this.hueHandle=this.$element.find("[data-handle]"),this.hue=this.$element.find("[data-hue]"),this.handleTransitionIfInDialog(),this.$timeout(function(){e.originalHue=e.api.getElement().find(".color-picker-hue"),e.$timeout(function(){e.updateOriginalColorpickerHue().then(function(){e.inTransition||(e.loaded=!0)})})}),$(document).off("mousemove.consumer").on("mousemove.consumer",function(t){return e.changeHue(t)}),$(document).off("mouseup.consumer").on("mouseup.consumer",function(t){return e.changedHue()})},e.prototype.handleTransitionIfInDialog=function(){var e=this;this.$timeout(function(){e.updateOriginalColorpickerHue().then(function(){e.loaded=!0})})},e.prototype.updateOriginalColorpickerHue=function(){var e=this,t=this.$q.defer();return this.api.getScope().AngularColorPickerController.huePosUpdate(),this.$timeout(function(){e.placeHueHandler(),t.resolve()}),t.promise},Object.defineProperty(e.prototype,"hueContainerLeft",{get:function(){return this.hue.offset().left},enumerable:!0,configurable:!0}),e.prototype.changeHue=function(e){var t=this;if("mousedown"===e.type&&e.target===this.hue[0])this.changingHue=!0;else if(!this.changingHue)return;0!==e.which&&(this.$timeout(function(){t.originalHue.triggerHandler({type:"click",pageY:t.calculatePageY(e)})}),this.hueHandle.css("left",this.getOffsetLeft(e)),this.colorOrigin="colorpicker")},e.prototype.changedHue=function(){this.changingHue=!1},e.prototype.placeHueHandler=function(){this.hueHandle.css({left:this.getOriginalHuePosition()})},e.prototype.calculatePageY=function(e){var t=this.getOffsetLeft(e)/this.$element.width(),i=this.originalHue.height()*t;return this.originalHue.offset().top+i},e.prototype.getOriginalHuePosition=function(){var e=this.originalHue.find(".color-picker-slider").position().top/this.originalHue.height();return this.hue.width()*e},e.prototype.getOffsetLeft=function(e){var t=Math.max(e.pageX-this.hueContainerLeft,0);return Math.min(t,this.hue.width())},e.prototype.textChange=function(e){var t=this;this.$timeout(function(){t.placeHueHandler()},50)},e.prototype.onTextFixed=function(){var e=this;this.$timeout(function(){e.hexIsValid=!0},100)},e.prototype.textChanging=function(e){this.hexIsValid=n.HexInput.isColorValid(e),this.colorOrigin="hex"},e.prototype.colorPickerChange=function(){this.colorOrigin="colorpicker"},e.prototype.confirmClick=function(){this.hexIsValid&&this.onColorSelected({selection:{color:this.selectedColor,origin:this.colorOrigin}})},e.prototype.cancelClick=function(){this.onCancel&&this.onCancel()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("advancedColorPicker",{templateUrl:"views/design/advanced-color-picker.html",controller:o,bindings:{selectedColor:"<",onColorSelected:"&",onCancel:"&?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(25),o=i(0),r=function(){function e(e,t,i,o,r,a,s,l){this.themeChooser=e,this.getKitName=t,this.flags=i,this.kitUtils=o,this.themeChooserUtils=r,this.clientTopology=a,this.visualValidatorCreator=s,this.$translate=l,this.ePaletteColorPickerStates=n.ePaletteColorPickerStates,e.initialize(),this.init()}return e.$inject=["themeChooser","getKitName","flags","kitUtils","themeChooserUtils","clientTopology","visualValidatorCreator","$translate"],e.prototype.init=function(){this.isDefaultThumbnail=this.themeChooser.isOldKitVersion(this.kit),this.thumbnailConfig=this.getThumbnailConfig(),this.kitColorPalette=this.themeChooser.coloration.getKitDefaultColors(this.kit),this.fontPalettes=this.kit.fontPalette,this.thumbnailColorPalette=this.getThumbnailColorPalette()},e.prototype.getThumbnailConfig=function(){var t=this.getKitName(this.kit);return this.isDefaultThumbnail?e.thumbnailConfigurations.default:e.thumbnailConfigurations[t]},e.prototype.getDisplayName=function(){var e=this.kit.displayName||this.getKitName(this.kit);return this.$translate.instant("design.kit.type."+e.toLowerCase().replace(/\s/g,"-"))},e.prototype.getFontStyle=function(){var e={color:this.getTextColor(),fontFamily:this.getFontFaceOfKit(),fontSize:this.getFontSize()};return"caps"in this.thumbnailConfig&&(e.fontVariant=this.getFontCaps()),"kerning"in this.thumbnailConfig&&(e.fontKerning=this.getFontKerning()),"bold"in this.thumbnailConfig&&(e.fontWeight=this.getFontWeight()),"translateY"in this.thumbnailConfig&&(e.transform="translateY("+this.getTranslateY()+")"),e},e.prototype.getBackgroundStyle=function(){return{backgroundColor:this.getBackgroundColor(),backgroundImage:this.getBackgroundImage()}},e.prototype.getThemeDescription=function(){var e=this.kit?this.kit.name.split("all-")[1]:"";return this.$translate.instant("design.font-data."+e+".description")},e.prototype.getThumbnailColorPalette=function(){var e=this;return("colorPalette"in this.thumbnailConfig?this.thumbnailConfig.colorPalette:["mainColor","secondaryColor","white","black"]).map(function(t){return e.kitColorPalette[t]})},e.prototype.thumbnailTemplate=function(){return"views/design/kits/template-new-kit.html"},e.prototype.getBackgroundColor=function(){var t="backgroundColor"in this.thumbnailConfig?this.thumbnailConfig.backgroundColor:e.DEFAULT_BACKGROUND_COLOR;return this.kitColorPalette[t]},e.prototype.getHoverBackgroundColor=function(){var e=this.getBackgroundColor(),t=chroma(e).hsl(),i=t[0],n=t[1],o=t[2];return o=o<.5?.9*o+.1:.97*o,chroma.hsl(i,n,o).hex()},e.prototype.getBackgroundImage=function(){var e=this.isDefaultThumbnail?"default":this.getKitName(this.kit);return"url("+this.clientTopology.staticsUrl+"/images/design-panel/theme-thumbnail_"+e+".jpg)"},e.prototype.extractFontSizeFromFontStyle=function(){var t="fontNumber"in this.thumbnailConfig?this.thumbnailConfig.fontNumber:e.DEFAULT_FONT_STYLE;return this.fontPalettes[t].style.split(" ")[3].substring(0,2)+"px"},e.prototype.getFontSize=function(){return"fontSize"in this.thumbnailConfig?this.thumbnailConfig.fontSize+"px":this.extractFontSizeFromFontStyle()},e.prototype.getTranslateY=function(){return"translateY"in this.thumbnailConfig?"-"+this.thumbnailConfig.translateY+"px":"-2px"},e.prototype.getFontKerning=function(){return"kerning"in this.thumbnailConfig?this.thumbnailConfig.kerning:"normal"},e.prototype.getFontWeight=function(){return"bold"in this.thumbnailConfig&&this.thumbnailConfig.bold?"bold":"normal"},e.prototype.getFontCaps=function(){return"caps"in this.thumbnailConfig&&this.thumbnailConfig.caps?"all-small-caps":"normal"},e.prototype.getTextColor=function(){var e="textColor"in this.thumbnailConfig?this.thumbnailConfig.textColor:"white";return this.kitColorPalette[e]},e.prototype.getHoverTextColor=function(){return this.themeChooserUtils.isDarkColor(this.getHoverBackgroundColor(),this.kitColorPalette,!0)?this.kitColorPalette.white:this.kitColorPalette.black},e.prototype.getFontFaceOfKit=function(){var t="fontNumber"in this.thumbnailConfig?this.thumbnailConfig.fontNumber:e.DEFAULT_FONT_STYLE,i=this.fontPalettes[t].style;if(this.flags.newKitsRussianFonts){var n=i.split(" ").splice(4).map(function(e){return e.replace('"',"")}).join(" ");return this.visualValidatorCreator.getFullFontFamily(n)}return o.last(i.split(" ")).replace("+"," ")},e.thumbnailConfigurations={fresh:{textColor:"white",fontNumber:6,bold:!0,fontSize:45,colorPalette:["mainColor","white","black"]},breeze:{textColor:"white",fontNumber:6,bold:!0,fontSize:36,colorPalette:["mainColor","white","black"]},bold:{textColor:"black",fontNumber:6,caps:!0,fontSize:50,colorPalette:["mainColor","white","black"],translateY:6},retro:{textColor:"white",fontNumber:6,fontSize:38,colorPalette:["mainColor","white","black"]},lovely:{textColor:"white",fontNumber:6,fontSize:40,colorPalette:["mainColor","secondaryColor","white","black"]},"sky-high":{textColor:"white",fontNumber:2,caps:!0,fontSize:38,colorPalette:["mainColor","white","black"]},midnight:{textColor:"white",fontNumber:2,backgroundColor:"black",caps:!0,fontSize:30,colorPalette:["mainColor","white","black"]},spark:{textColor:"white",fontNumber:6,bold:!0,fontSize:35,colorPalette:["mainColor","secondaryColor","white","black"]},"deep-forest":{textColor:"secondaryColor",fontNumber:2,backgroundColor:"thirdColor",fontSize:30,colorPalette:["mainColor","white","black"]},"hi-rise":{textColor:"secondaryColor",fontNumber:2,caps:!0,fontSize:42,colorPalette:["mainColor","secondaryColor","white","black"],translateY:4},fuse:{textColor:"white",fontNumber:5,caps:!0,fontSize:48,colorPalette:["mainColor","white","black"],translateY:4},evolution:{textColor:"white",fontNumber:2,fontSize:35,colorPalette:["mainColor","white","black"]},grand:{textColor:"mainColor",fontNumber:6,bold:!0,caps:!0,fontSize:43,colorPalette:["mainColor","white","black"],translateY:4},hype:{textColor:"mainColor",fontNumber:6,backgroundColor:"black",caps:!0,fontSize:45,colorPalette:["mainColor","white","black"],translateY:2},elegant:{textColor:"black",fontNumber:8,fontSize:40,colorPalette:["mainColor","white","black"]},minimal:{textColor:"black",fontNumber:6,backgroundColor:"white",caps:!0,fontSize:38,colorPalette:["white","black"]},soho:{textColor:"mainColor",fontNumber:2,backgroundColor:"black",bold:!0,fontSize:35,colorPalette:["mainColor","thirdColor","white","black"]},clean:{textColor:"black",fontNumber:6,caps:!0,fontSize:45,colorPalette:["mainColor","white","black"]},"wild-rose":{textColor:"white",fontNumber:6,fontSize:35,colorPalette:["mainColor","secondaryColor","white","black"]},serene:{textColor:"white",fontNumber:6,fontSize:35,colorPalette:["mainColor","white","black"]},horizon:{textColor:"white",fontNumber:3,bold:!0,fontSize:32,colorPalette:["mainColor","thirdColor","white","black"]},indie:{textColor:"white",fontNumber:6,caps:!0,fontSize:45,colorPalette:["mainColor","white","black"],translateY:4},vogue:{textColor:"mainColor",fontNumber:6,backgroundColor:"thirdColor",colorPalette:["mainColor","white","black"]},lush:{textColor:"white",fontNumber:6,fontSize:40,colorPalette:["mainColor","white","black"]},chic:{textColor:"black",fontNumber:6,bold:!0,caps:!0,fontSize:50,colorPalette:["mainColor","white","black"],translateY:4},classic:{textColor:"white",fontNumber:6,backgroundColor:"black",caps:!0,fontSize:32,colorPalette:["white","black"],translateY:2},vivid:{textColor:"white",fontNumber:6,bold:!0,caps:!0,fontSize:45,colorPalette:["mainColor","white","black"],translateY:4},bounce:{textColor:"white",fontNumber:6,caps:!0,fontSize:50,colorPalette:["mainColor","white","black"],translateY:3},timeless:{textColor:"white",fontNumber:2,backgroundColor:"thirdColor",fontSize:32,colorPalette:["mainColor","white","black"]},play:{textColor:"mainColor",fontNumber:6,backgroundColor:"secondaryColor",bold:!0,colorPalette:["mainColor","white","black"]},luxury:{textColor:"mainColor",fontNumber:6,backgroundColor:"white",fontSize:32,colorPalette:["mainColor","white","black"],translateY:2},inspire:{textColor:"white",fontNumber:6,caps:!0,fontSize:50,colorPalette:["mainColor","white","black"],translateY:2},innovative:{textColor:"white",fontNumber:2,backgroundColor:"black",bold:!0,fontSize:30,colorPalette:["mainColor","white","black"]},agency:{textColor:"white",fontNumber:6,backgroundColor:"black",colorPalette:["mainColor","white","black"]},"jet-black":{textColor:"white",fontNumber:6,backgroundColor:"black",fontSize:34,colorPalette:["white","black"]},sophisticated:{textColor:"white",fontNumber:6,backgroundColor:"black",fontSize:28,colorPalette:["mainColor","white","black"]},default:{textColor:"black",fontNumber:6,backgroundColor:"white",fontSize:28}},e.DEFAULT_FONT_STYLE=0,e.DEFAULT_BACKGROUND_COLOR="mainColor",e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("kitThumbnailNew",{templateUrl:"views/design/kit-thumbnail-new.html",controller:r,bindings:{kit:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(t,i,n){var o=this;this.colorationUtils=t,this.flags=i,this.visualValidatorCreator=n,this.hasBackground=void 0===this.hasBackground,this.isSelectable=void 0===this.isSelectable||this.isSelectable,this.colorationUtils.initialize().then(function(){var t=o.colorationUtils.getMainColor();o.bgColor=o._addOverlay(t,e.overlayColor,e.overlayAlpha)})}return e.$inject=["colorationUtils","flags","visualValidatorCreator"],e.prototype.scaleFontSize=function(t){return t*(1+e.fontSizeScaleStep*(this.fontScale||0))},e.prototype.getNameFontStyle=function(){var e=this.scaleFontSize(this.fontData.name.size),t={font:this.fontData.name.font,"font-size":e+"px"};return this.flags.newKitsRussianFonts&&(t["font-family"]=this.getCompleteFontFamily(this.fontData.name.font)),t},e.prototype.getDescriptionFontStyle=function(){var e=this.scaleFontSize(this.fontData.description.size),t={font:this.fontData.description.font,"font-size":e+"px"};return this.flags.newKitsRussianFonts&&(t["font-family"]=this.getCompleteFontFamily(this.fontData.description.font)),t},e.prototype.getCompleteFontFamily=function(e){var t=e.split(" ").splice(4).map(function(e){return e.replace('"',"")}).join(" ");return this.visualValidatorCreator.getFullFontFamily(t)},e.prototype.getThumbnailStyle=function(){return this.flags.largerStage?{"background-color":"#e8eef5"}:{"background-color":this.hasBackground?this.bgColor:""}},e.prototype._addOverlay=function(e,t,i){var o=chroma(e).rgb(),r=chroma(t).rgb();return chroma(n.map([0,1,2],function(e){return i*r[e]+(1-i)*o[e]})).hex()},e.fontSizeScaleStep=.05,e.overlayColor="#eff1f2",e.overlayAlpha=.9,e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("fontThumbnail",{templateUrl:"views/design/font/font-thumbnail.html",controller:o,bindings:{fontData:"<",isSelected:"<",hasBackground:"<",onClick:"&",fontScale:"<",isSelectable:"<",largeBg:"<"}})},function(e,t){var i=function(){function e(e,t){this.$translate=e,this.$scope=t,this.maxFontSize=FontCustomizationService.maxDeltaHeight,this.minFontSize=-FontCustomizationService.maxDeltaHeight,this.categoryLabels={"-3":e.instant("design.fonts.font-size-.-3"),"-2":e.instant("design.fonts.font-size-.-2"),"-1":e.instant("design.fonts.font-size-.-1"),0:e.instant("design.fonts.font-size-.0"),1:e.instant("design.fonts.font-size-.1"),2:e.instant("design.fonts.font-size-.2"),3:e.instant("design.fonts.font-size-.3")}}return e.$inject=["$translate","$scope"],e.prototype.setFontSize=function(e){this.onSetValue({value:e})},e.prototype.onFontSizeChange=function(e){this.onPreviewValue&&this.onPreviewValue({value:e})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("fontSizeSlider",{templateUrl:"views/design/font/font-size-slider.html",controller:i,bindings:{value:"=",onSetValue:"&",onPreviewValue:"&?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(10),r=i(0),a=function(){function e(e,t,i,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y){var T=this;this.$scope=e,this.animationKit=t,this.animationUtils=i,this.previewScale=r,this.previewService=a,this.applicationState=s,this.undoRedo=l,this.pagesManager=c,this.consumerBiLogger=d,this.backgroundScrollService=u,this.flags=p,this.modelTree=g,this.layoutSolver=h,this.initService=m,this.CONSUMER_DIALOGS=f,this.CcDialogBuilder=v,this.$translate=S,this.storyServices=y,this.ready=!1,this.askOverrideAnimationPatternSections=!1,this.askOverrideScrollTypeSections=!1,this.showScrollTypeEffect=!1,this.pagesTransitionNames=this.animationUtils.getPagesTranslationNames(),this.scrollTypeOptions=this.animationUtils.placeLabels(angular.copy(this.backgroundScrollService.getOptions()),"label","background-scroll"),this.animationPatterns=this.animationUtils.placeLabels(angular.copy(this.animationKit.getPatternsOptions()),"label","animation-pattern"),this.initValues(),this.initService.loaded().then(function(){T.ready=!0}),this.unsubscribe=n.PubSub.subscribe(n.events.NEW_STATE_STORY_WAS_SET,function(){T.initValues()}),r.setScaleFactor(o.PreviewScale.MinScaleFactor),this.showScrollTypeEffect=!this.flags.scrollEffectInMediaSettings}return e.$inject=["$scope","animationKit","animationUtils","previewScale","previewService","applicationState","undoRedo","pagesManager","consumerBiLogger","backgroundScrollService","flags","modelTree","layoutSolver","initService","CONSUMER_DIALOGS","CcDialogBuilder","$translate","storyServices"],e.prototype.$onDestroy=function(){this.unsubscribe&&this.unsubscribe()},e.prototype.initValues=function(){this.activeAnimationPattern=this.getActiveAnimationPattern(),this.activePagesTransition=this.getPageTransitionName(),this.activeScrollType=this.getActiveScrollType()},e.prototype.getActiveAnimationPattern=function(){return r.find(this.animationPatterns,{id:this.animationUtils.getActivePatternForSite()})},e.prototype.closePanel=function(){var e=this;this.$scope.$applyAsync(function(){e.previewScale.setScaleFactor(o.PreviewScale.MaxScaleFactor),e.applicationState.goToBuilder()})},e.prototype.onHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.design.animations"),this.CONSUMER_DIALOGS.ANIMATION_PANEL_HELP)},e.prototype.backToDesignKit=function(){this.applicationState.goToDesignMode()},e.prototype.setAnimationPattern=function(e){var t=this;this.consumerBiLogger.siteDesign.changeAnimationClick(e.id),this.activeAnimationPattern=e,this.animationUtils.setSiteAnimationPattern(e.id).then(function(){t.askOverrideAnimationPatternSections=!t.animationUtils.doSiteAndSectionPatternsMatch(),t.askOverrideAnimationPatternSections&&t.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignDisplayed("element animation"),t.undoRedo.captureOperation(!1,!0),t.consumerBiLogger.siteDesign.changeAnimationSuccess(e.id)})},e.prototype.previewAnimationPattern=function(e){this.animationUtils.previewPattern(e.id)},e.prototype.setPagesTransition=function(e){var t=this.pagesManager.getPagesTransition();this.activePagesTransition=e,this.pagesManager.setPagesTransition(e),this.undoRedo.captureOperation(!1,!0),this.consumerBiLogger.pagesManager.transitionBetweenPagesUpdated(e,t)},e.prototype.getActiveScrollType=function(){return r.find(this.scrollTypeOptions,{value:this.backgroundScrollService.getActiveScrollTypeData().value||this.backgroundScrollService.SCROLL_TYPE.NONE})},e.prototype.getPageTransitionName=function(){return r.find(this.pagesTransitionNames,{value:this.pagesManager.getPagesTransition()})},e.prototype.refreshScrollType=function(){var e=this;return r.each(this.modelTree.getPagesNodes(),function(t){t!==e.storyServices.selectedPage&&(t.dirty=!0)}),this.storyServices.reRender()},e.prototype.setScrollType=function(e){var t=this,i=this.backgroundScrollService.getLabel(e);this.consumerBiLogger.siteDesign.customizeDesignChangeScrollAnimationClick(e,i),this.activeScrollType=e,this.backgroundScrollService.setSiteOverride(e),this.refreshScrollType().then(function(){t.askOverrideScrollTypeSections=!t.backgroundScrollService.doSiteAndSectionMatch(),t.askOverrideScrollTypeSections&&t.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignDisplayed("scroll animation"),t.undoRedo.captureOperation(!1,!0),t.consumerBiLogger.siteDesign.customizeDesignChangeScrollAnimationSuccess(e,i)})},e.prototype.overrideAnimationPatternOnSections=function(){var e=this;return this.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignClickApply("element animation"),this.animationUtils.forceSitePattern().then(function(){e.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignApplySuccess("element animation"),e.undoRedo.captureOperation(!1,!0)})},e.prototype.overrideScrollTypeOnSections=function(){var e=this;return this.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignClickApply("scroll animation"),this.backgroundScrollService.clearOverridableSections(),this.refreshScrollType().then(function(){e.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignApplySuccess("scroll animation")})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("animationPanel",{templateUrl:"views/design/animation-panel.html",controller:a})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(10),r=i(0),a=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E){var w=this;this.$scope=e,this.$q=t,this.$translate=i,this.CONSUMER_DIALOGS=n,this.$element=o,this.$timeout=r,this.CcDialogBuilder=a,this.themeChooser=s,this.initService=l,this.spinnerService=c,this.kitUtils=d,this.fontCustomizationService=u,this.fontSize=p,this.applicationState=g,this.previewScale=h,this.siteState=m,this.undoRedo=f,this.pagesManager=v,this.consumerBiLogger=S,this.consumerBiLoggerHelpers=y,this.flags=T,this.modelTree=b,this.storyServices=I,this.fontUtils=P,this.fontPanelManager=M,this.assistantManager=E,this.askOverrideFontSizeSections=!1,this.kitChangeInProgress=!1,this.showContentDelay=100,l.loaded().then(function(){return w.themeChooser.initialize()}).then(function(){return w.waitForCardToDisplay()}).then(function(){return w.loaded()}),this.categoryLabels={"-3":i.instant("design.fonts.font-size-.-3"),"-2":i.instant("design.fonts.font-size-.-2"),"-1":i.instant("design.fonts.font-size-.-1"),0:i.instant("design.fonts.font-size-.0"),1:i.instant("design.fonts.font-size-.1"),2:i.instant("design.fonts.font-size-.2"),3:i.instant("design.fonts.font-size-.3")}}return e.$inject=["$scope","$q","$translate","CONSUMER_DIALOGS","$element","$timeout","CcDialogBuilder","themeChooser","initService","spinnerService","kitUtils","fontCustomizationService","fontSize","applicationState","previewScale","siteState","undoRedo","pagesManager","consumerBiLogger","consumerBiLoggerHelpers","flags","modelTree","storyServices","fontUtils","fontPanelManager","assistantManager"],e.prototype.waitForCardToDisplay=function(){return this.flags.cardsToPanels?this.$timeout(this.showContentDelay+100):null},e.prototype.loaded=function(){var e=this;this.previewScale.setScaleFactor(o.PreviewScale.MinScaleFactor),this.ready=!0;var t=this.themeChooser.getColorThemes();this.fontOptions=this.filterKitsAndGenerateFontOptions(t),this.$scope.$watch(function(){return e.getSelectedFontKitIndex()},function(t){return e.setSelectedFontKitIndex(t)}),this.$scope.$watch(function(){return e.getSelectedFontSize()},function(t){return e.selectedFontSize=t})},e.prototype.filterKitsAndGenerateFontOptions=function(e){var t=this,i=this.themeChooser.filterNewVersionKits(e).map(function(e){return t.fontUtils.convertFontDataToThumbnail(e)}),n=e.filter(function(e){return e.id===t.themeChooser.getActiveFontTheme().id}).filter(function(e){return t.themeChooser.isOldKitVersion(e)}).map(function(e){return t.fontUtils.convertFontDataToThumbnail(e)});return n?n.concat(i):i},e.prototype.setSelectedFontKitIndex=function(e){var t=this,i=void 0===this.selectedFontIndex;this.selectedFontIndex=e,this.fontPanelManager.selectedFont=this.fontOptions[this.selectedFontIndex],i||this.spinnerService.waitForStop().then(function(){t.scrollToSelectedFont("animated")})},e.prototype.getSelectedFontKitIndex=function(){return this.kitChangeInProgress?this.selectedFontIndex:r.findIndex(this.fontOptions,{id:this.themeChooser.getActiveFontTheme().id})},e.prototype.getSelectedFontSize=function(){return this.fontCustomizationService.getFontSizeAllSite()||0},e.prototype.closePanel=function(){var e=this;this.$scope.$applyAsync(function(){e.previewScale.setScaleFactor(o.PreviewScale.MaxScaleFactor),e.applicationState.goToBuilder()})},e.prototype.showHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.design.fonts"),this.CONSUMER_DIALOGS.FONT_PANEL_HELP)},e.prototype.backToDesignKit=function(){this.applicationState.goToDesignMode()},e.prototype.setFontKit=function(e,t){var i=this;this.isSelectedKit(e)||(this.askOverrideFontSizeSections=!1,this.kitChangeInProgress=!0,this.consumerBiLogger.siteDesign.clickOnDesiredColorFontSet("font set",e.id,t,this.fontOptions.length),this.fontCustomizationService.resetFontSize(),this.fontSize.resetFontOverrides(),this.spinnerService.waitForMe("setFontKit"),this.fontPanelManager.selectFontKit(e.id).then(function(){i.undoRedo.captureOperation(!1,!0);var n=i.consumerBiLoggerHelpers.getEditMode();return i.consumerBiLogger.siteDesign.colorFontSetChangeSuccess(n,"font set",e.id,t,i.fontOptions.length),i.siteState.waitForChanges()}).finally(function(){i.kitChangeInProgress=!1,i.spinnerService.imDone("setFontKit"),n.PubSub.fire(n.events.SWITCH_FONT_KIT)}))},e.prototype.setFontSize=function(e){var t=this;this.consumerBiLogger.siteDesign.changeFontSizeClick(e.toString(),this.fontPanelManager.selectedFont.id),this.spinnerService.waitForMe("setFontSize"),this.fontCustomizationService.setFontSizeAllSite(e),this.fontUtils.updateView().then(function(){return t.askOverrideFontSizeSections=!t.fontCustomizationService.doSiteAndSectionMatch(),t.askOverrideFontSizeSections&&t.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignDisplayed("font"),t.undoRedo.captureOperation(!1,!0),t.consumerBiLogger.siteDesign.changeFontSizeSuccess(e.toString(),t.fontPanelManager.selectedFont.id),t.siteState.waitForChanges()}).finally(function(){t.spinnerService.imDone("setFontSize"),n.PubSub.fire(n.events.CHANGE_FONT_SIZE)})},e.prototype.overrideFontSizeOnSections=function(){var e=this;this.spinnerService.waitForMe("overrideSectionFontSize"),this.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignClickApply("font"),this.fontCustomizationService.clearOverridableSections(),this.fontUtils.updateView().then(function(){return e.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignApplySuccess("font"),e.siteState.waitForChanges()}).finally(function(){e.spinnerService.imDone("overrideSectionFontSize")})},e.prototype.isSelectedKit=function(e){return this.fontPanelManager.isSelectedKit(e)},e.prototype.getFontScale=function(e){return this.isSelectedKit(e)?this.selectedFontSize:void 0},e.prototype.doAnimatedVerticalScroll=function(e){var t=this,i=e.calculateScroll,n=e.childToScrollTo,o=e.scrollableContainer,r=e.duration,a=e.timeout;return this.$q(function(e){t.$timeout(function(){o.animate({scrollTop:i(n[0].offsetTop)},r,function(){e()})},a)})},e.prototype.scrollToSelectedFont=function(e){var t=this;return!1!==this.assistantManager.getCustomTaskData("scrollToSelectedFont")&&this.$timeout(function(){return t.doAnimatedVerticalScroll({childToScrollTo:t.$element.find(".font-item").eq(t.selectedFontIndex),scrollableContainer:t.$element.find(".cc-panel-body"),calculateScroll:function(e){return Math.max(0,e-12)},duration:"animated"===e?1e3:0,timeout:"animated"===e?300:0})}),this.$q.when()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("fontPanel",{templateUrl:"views/design/font-panel.html",controller:a})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(20),r=i(10),a=i(0),s=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p){var g=this;this.$scope=e,this.applicationState=t,this.undoRedo=i,this.flags=n,this.initService=o,this.CcDialogBuilder=r,this.$translate=a,this.previewScale=s,this.sectionPanelManager=l,this.storyServices=c,this.CONSUMER_DIALOGS=d,this.consumerBiLogger=u,this.slideShowService=p,this.slideShowName="slideshow",this.transition=new SlideShowTransition,o.loaded().then(function(){g.load()})}return e.$inject=["$scope","applicationState","undoRedo","flags","initService","CcDialogBuilder","$translate","previewScale","sectionPanelManager","storyServices","CONSUMER_DIALOGS","consumerBiLogger","slideShowService"],e.prototype.$onDestory=function(){this.unsubscribe&&this.unsubscribe()},e.prototype.load=function(){var e=this;this.animationPatterns=this.slideShowService.getTransitionOptions(),this.setSelectedNode(),this.node?(this.slideShowService.isSlideShow(this.node)&&!this.slideShowService.getSelectedItem(this.node.id)&&this.slideShowService.selectUnhiddenItem(this.node,0),this.transition.time=this.slideShowService.getTransitionTime(this.node.id),this.setActiveFieldValues(),this.unsubscribe=n.PubSub.subscribe(n.events.NEW_STATE_STORY_WAS_SET,function(){e.setActiveFieldValues()})):this.applicationState.goToBuilder()},e.prototype.setActiveFieldValues=function(){this.activeAnimationPattern=this.getActiveAnimationPattern()},e.prototype.setSelectedNode=function(){var e=this.applicationState.getContentFocus().nodeId,t=this.sectionPanelManager.getSectionFromContentId(e);this.node=t.node},e.prototype.getActiveAnimationPattern=function(){return this.transition.name=this.slideShowService.getTransitionName(this.node.id),a.find(this.animationPatterns,{id:this.transition.name})},e.prototype.closePanel=function(){var e=this;this.$scope.$applyAsync(function(){e.applicationState.goToBuilder(!0),e.previewScale.setScaleFactor(r.PreviewScale.MaxScaleFactor)})},e.prototype.back=function(){this.applicationState.goToSwitchPresetMode("animation-back")},e.prototype.showSectionAnimationHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.section.animations"),this.CONSUMER_DIALOGS.SECTION_ANIMATIONS_HELP)},e.prototype.setAnimationPattern=function(e){this.consumerBiLogger.sectionDesign.changeElementAnimationClick(this.node.alias,this.node.getContentElementType(),e.id,this.slideShowName),this.transition.name=e.name,this.slideShowService.setTransitionName(this.node.id,e.name);var t=this.applicationState.isInMobileEditMode(),i=this.slideShowService.changeTransition(this.node,t,this.transition);this.setActiveFieldValues(),this.undoRedo.captureOperation(!1,!0),i&&this.consumerBiLogger.sectionDesign.changeElementAnimationSuccess(this.node.alias,this.node.getContentElementType(),e.id,this.slideShowName)},e.prototype.goToPreview=function(){var e=this;this.consumerBiLogger.builder.topBarPreviewSiteClick("section animation for slideshow"),this.applicationState.goToPreview(!0).then(function(){e.consumerBiLogger.builder.topBarPreviewSiteSuccess(o.BIModeType.previewInBuilder)})},e.prototype.getTransitionBiFormat=function(e){return e+"sec"},e.prototype.valueSettle=function(e){this.consumerBiLogger.sectionDesign.changeSlideshowDurationSuccess(this.getTransitionBiFormat(e),this.node.alias,this.node.getContentElementType())},e.prototype.setTransitionTime=function(e){this.consumerBiLogger.sectionDesign.changeSlideshowDurationStart(this.getTransitionBiFormat(e),this.node.alias,this.node.getContentElementType()),this.transition.time=e,this.slideShowService.setTransitionTime(this.node.id,this.transition.time);var t=this.applicationState.isInMobileEditMode();this.slideShowService.changeTransition(this.node,t,this.transition),this.undoRedo.captureOperation(!1,!0)},e.prototype.getTransitionTime=function(){return this.transition.time},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("slideshowAnimationPanel",{templateUrl:"views/design/slideshow-animation-panel.html",controller:s})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(10),r=i(1),a=i(0),s=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T){var b=this;this.$scope=e,this.CONSUMER_DIALOGS=t,this.$q=i,this.animationKit=n,this.animationUtils=o,this.previewService=r,this.applicationState=a,this.undoRedo=s,this.consumerBiLogger=l,this.backgroundScrollService=c,this.flags=d,this.overlayManager=u,this.initService=p,this.CcDialogBuilder=g,this.$translate=h,this.previewScale=m,this.sectionPanelManager=f,this.simpleSolutionManager=v,this.solutionFetcher=S,this.sectionBackgroundService=y,this.storyServices=T,this.scrollTypeChangeable=!1,p.loaded().then(function(){b.load()})}return e.$inject=["$scope","CONSUMER_DIALOGS","$q","animationKit","animationUtils","previewService","applicationState","undoRedo","consumerBiLogger","backgroundScrollService","flags","overlayManager","initService","CcDialogBuilder","$translate","previewScale","sectionPanelManager","simpleSolutionManager","solutionFetcher","sectionBackgroundService","storyServices"],e.prototype.load=function(){var e=this;this.scrollTypeOptions=this.animationUtils.placeLabels(angular.copy(this.backgroundScrollService.getOptions()),"label","background-scroll"),this.animationPatterns=this.animationUtils.placeLabels(angular.copy(this.animationKit.getPatternsOptions()),"label","animation-pattern"),this.setSelectedNode(),this.node?(this.setActiveFieldValues(),this.unsubscribe=n.PubSub.subscribe(n.events.NEW_STATE_STORY_WAS_SET,function(){e.setActiveFieldValues()}),this.scrollTypeChangeable=this.canChangeScrollType()&&!this.flags.scrollEffectInMediaSettings):this.applicationState.goToBuilder()},e.prototype.$onDestroy=function(){this.unsubscribe&&this.unsubscribe()},e.prototype.setActiveFieldValues=function(){this.activeAnimationPattern=this.getActiveAnimationPattern(),this.activeScrollType=this.getActiveScrollType()},e.prototype.setSelectedNode=function(){var e=this.applicationState.getContentFocus().nodeId,t=this.sectionPanelManager.getSectionFromContentId(e);this.node=t.node,this.sitePart=t.sitePart},e.prototype.goToAnimationPanel=function(){this.applicationState.goToAnimationPanel(r.BIOrigins.SectionAnimationPanel)},e.prototype.getActiveAnimationPattern=function(){return a.find(this.animationPatterns,{id:this.animationUtils.getActivePatternForSection(this.node,this.sitePart)})},e.prototype.closePanel=function(){var e=this;this.$scope.$applyAsync(function(){e.applicationState.goToBuilder(!0),e.previewScale.setScaleFactor(o.PreviewScale.MaxScaleFactor)})},e.prototype.back=function(){this.applicationState.goToSwitchPresetMode("animation-back")},e.prototype.showSectionAnimationHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.section.animations"),this.CONSUMER_DIALOGS.SECTION_ANIMATIONS_HELP)},e.prototype.setAnimationPattern=function(e){var t=this;this.consumerBiLogger.sectionDesign.changeElementAnimationClick(this.node.alias,this.node.getContentElementType(),e.id,""),this.activeAnimationPattern=e,this.animationUtils.setSectionAnimationPattern(this.node,this.sitePart,e.id).then(function(){t.undoRedo.captureOperation(!1,!0),t.consumerBiLogger.sectionDesign.changeElementAnimationSuccess(t.node.alias,t.node.getContentElementType(),e.id,"")})},e.prototype.previewAnimationPattern=function(e){this.animationUtils.previewPatternForLgs(this.lgs,e.id)},e.prototype.canChangeScrollType=function(){var e=!1;return this.flags.sectionMedia&&(e=e||this.sectionBackgroundService.hasScrollableBackground(this.node)),e=e||a.some(this.lgs,function(e){return e.canChangeScrollType()}),this.flags.sectionMedia?e&&!this.node.backgroundHasFaces:e},e.prototype.getActiveScrollType=function(){return a.find(this.scrollTypeOptions,{value:this.backgroundScrollService.getActiveScrollType(this.node)||this.backgroundScrollService.SCROLL_TYPE.NONE})},e.prototype.refreshScrollType=function(){return this.storyServices.reRender()},e.prototype.setScrollType=function(e){var t=this,i=this.backgroundScrollService.getLabel(e);this.consumerBiLogger.sectionDesign.changeScrollAnimationClick(this.node.alias,this.node.getContentElementType(),i,e),this.activeScrollType=e,this.backgroundScrollService.setSectionOverrideWithInheritance(this.node,e),this.$q.when().then(function(){if(t.flags.sectionMedia)return t.sectionBackgroundService.updateViewer(t.node)}).then(function(){return t.refreshScrollType()}).then(function(){t.undoRedo.captureOperation(!1,!0),t.consumerBiLogger.sectionDesign.changeScrollAnimationSuccess(t.node.alias,t.node.getContentElementType(),i,e)})},Object.defineProperty(e.prototype,"lgs",{get:function(){return this.solutionFetcher.getSectionSolution(this.node.containerPageId,this.node.id)},enumerable:!0,configurable:!0}),e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionAnimationPanel",{templateUrl:"views/design/section-animation-panel.html",controller:s})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(243);angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionBackgroundPanel",{templateUrl:"views/design/section-background-panel.html",controller:n.SectionBackgroundPanel})},function(e,t,i){"use strict";var n=function(){function e(e){this.flags=e,this.mediaTypes=cc.MediaPreviewType,this.displayUploadPopup=!1}return e.$inject=["flags"],e.prototype.showUploadPopup=function(){this.displayUploadPopup=!0},e.prototype.hideUploadPopup=function(){this.displayUploadPopup=!1},e.prototype.handleClick=function(e){this.displayUploadPopup=!1,this.onClick&&this.onClick({mediaType:e})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionBackgroundUpload",{templateUrl:"views/design/section-background-upload.html",controller:n,bindings:{onClick:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r){this.sectionBackgroundManager=e,this.undoRedo=t,this.backgroundScrollService=i,this.nodeFetcher=n,this.applicationState=o,this.consumerBiLogger=r,this.options=[{iconClass:"PositionTop",label:"Top",key:"top"},{iconClass:"PositionCenter",label:"Center",key:"center"},{iconClass:"PositionBottom",label:"Bottom",key:"bottom"}],this.initScrollType(),this.activeAligmentOption=this.sectionBackgroundManager.selectedAligment()}return e.$inject=["sectionBackgroundManager","undoRedo","backgroundScrollService","nodeFetcher","applicationState","consumerBiLogger"],e.prototype.initScrollType=function(){var e=this.nodeFetcher.getCurrentActiveNode();if(e){var t=this.backgroundScrollService.getActiveScrollType(e);this.shouldShowParallaxParagraph=n([this.backgroundScrollService.SCROLL_TYPE.PARALLAX,this.backgroundScrollService.SCROLL_TYPE.PARALLAX_ZOOM]).includes(t)}},e.prototype.setAligmentOption=function(e){var t=this.sectionBackgroundManager.getParamsToBI(),i=t[0],n=t[1];this.consumerBiLogger.sectionDesign.changeBackgroundImagePositionClick(this.sectionBackgroundManager.mode,e.key,n,i),this.activeAligmentOption=e.key,this.sectionBackgroundManager.setAligmentOption(e.key),this.consumerBiLogger.sectionDesign.changeBackgroundImagePositionSuccess(this.sectionBackgroundManager.mode,e.key,n,i),this.undoRedo.captureOperation()},e.prototype.goToPreview=function(){this.applicationState.goToPreview()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionBackgroundSettingsImage",{templateUrl:"views/design/section-background-options/section-background-settings-image.html",controller:o})},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(27),r=i(55),a=function(e){function t(t,i,n,o,r,a){var s=e.call(this,o)||this;return s.$translate=t,s.nodeFetcher=i,s.sectionBackgroundManager=n,s.$timeout=o,s.applicationState=r,s.undoRedo=a,s}return n(t,e),t.$inject=["$translate","nodeFetcher","sectionBackgroundManager","$timeout","applicationState","undoRedo"],t.prototype.positionClicked=function(e){this.selectedPositionIndex=e.index;var t=r.ImagePositions.posToDetails[e.index];this.sectionBackgroundManager.setAligmentOption(t),this.undoRedo.captureOperation()},t.prototype.goToPreview=function(){this.applicationState.goToPreview(!0)},t.prototype.getHeaderTitle=function(){return this.$translate.instant("builder.section-background.background-settings.image.lower-title")},t.prototype.getHeaderBody=function(){return this.$translate.instant("builder.section-background.background-settings.image.body")},t.prototype.getFooterTextForParallax=function(){return this.$translate.instant("builder.section-background.background-settings.image.parallax-paragraph")},t.prototype.isImage=function(){return"image"===this.type},t}(o.BaseDropDown);angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionBackgroundSettings",{templateUrl:"views/design/section-background-options/section-background-settings.html",controller:a,bindings:{type:"<",onClose:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(10),r=i(1),a=i(0),s=function(){function e(e,t,i,n){var o=this;this.layoutSelectionStoreProvider=e,this.overlayManager=t,this.lssModifier=i,this.flags=n,this._hasVerticalAlignment=!1,this.unsubscribers=[],this.changeTextAlign=function(e){o._horizontalAlignment=e,o.lssModifier.changeTextAlign(o._targetSection.groups,e)},this.changeOnMediaPosition=function(e){o.positionIndex=e-1,o.lssModifier.changeOnMediaPosition(o._targetSection.groups,o.positionIndex),o.changeTextAlign(o.hAlignFromVPosition(o.positionIndex))},this.calcHorizontalAlignment=function(){if(o._targetSection){var e=o.layoutSelectionStoreProvider.getLayoutSelectionStore(),t=a(o._targetSection.groups).map(function(e){return e.segments.filter(function(e){return e.node}).filter(function(e){return["ListHeader","ListFooter"].indexOf(e.contentElement.type)<0})}).flatten().value()[0],i=e.getPreferredLayoutData(t),n=e.getVariations(t,i.cluster);if(n){var r=n[core.ElementSubTypes.Title]||n[core.ElementSubTypes.Subtitle]||n[core.ElementSubTypes.LongText]||n[core.ElementSubTypes.Phone]||n[core.ElementSubTypes.Fax]||n[core.ElementSubTypes.Email]||n[core.ElementSubTypes.Address];r&&(o._horizontalAlignment=r.align||r.hPosition)}o._horizontalAlignment=o._horizontalAlignment||"left"}},this.calcVerticalPositions=function(){if(o._targetSection){var e=a(o._targetSection.groups).map(function(e){return e.segments}).flatten().filter(function(e){return e.node&&["ListHeader","ListFooter"].indexOf(e.contentElement.type)<0}).value();if(o._hasVerticalAlignment=a.some(e,function(e){return e.getLE().getOnMediaContainer()}),o._hasVerticalAlignment){var t=a(e).filter(function(e){var t=e.getLE();return!a.isUndefined(t.getOnMediaContainer())}).value()[0],i=o.layoutSelectionStoreProvider.getLayoutSelectionStore(),n=i.getPreferredLayoutData(t),r=i.getVariations(t,n.cluster),s=a.get(r,"containerOnMedia.vPosition");a.isUndefined(s)||(o.positionIndex=s)}}}}return e.$inject=["layoutSelectionStoreProvider","overlayManager","lssModifier","flags"],e.prototype.setTargetSection=function(e){var t=this;this.positionIndex=4,this._targetSection=this.overlayManager.listSpanManager.getByNodeId(e.id),this.calcVerticalPositions(),this.calcHorizontalAlignment(),this.unsubscribers.push(n.PubSub.subscribe(n.events.NEW_STATE_STORY_WAS_SET,function(){t.calcHorizontalAlignment(),t.calcVerticalPositions()}))},e.prototype.clearListeners=function(){this.unsubscribers&&this.unsubscribers.forEach(function(e){return e()})},e.prototype.hAlignFromVPosition=function(e){return["left","center","right"][Number(e)%3]},e}(),l=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S){var y=this;this.$scope=e,this.$translate=t,this.CONSUMER_DIALOGS=i,this.CcDialogBuilder=n,this.themeChooser=o,this.initService=r,this.fontCustomizationService=a,this.applicationState=s,this.previewScale=l,this.undoRedo=c,this.consumerBiLogger=d,this.nodeFetcher=u,this.flags=p,this.lssModifier=g,this.fontUtils=h,this.layoutSelectionStoreProvider=m,this.onstageActionsManager=f,this.ONSTAGE_EVENTS=v,this.sectionAlignmentManager=S,this.isAlignmentSelected=function(e){return e===y.sectionAlignmentManager._horizontalAlignment},r.loaded().then(function(){return y.loaded()}),this.flags.sectionTextSplitParagraph&&f.subscribe(this.ONSTAGE_EVENTS.TOGGLE_PARAGRAPH_COLUMNS,function(e){y.lssModifier.toggleParagraphColumns(y.node)}),this.categoryLabels={"-3":t.instant("design.fonts.font-size-.-3"),"-2":t.instant("design.fonts.font-size-.-2"),"-1":t.instant("design.fonts.font-size-.-1"),0:t.instant("design.fonts.font-size-.0"),1:t.instant("design.fonts.font-size-.1"),2:t.instant("design.fonts.font-size-.2"),3:t.instant("design.fonts.font-size-.3")}}return e.$inject=["$scope","$translate","CONSUMER_DIALOGS","CcDialogBuilder","themeChooser","initService","fontCustomizationService","applicationState","previewScale","undoRedo","consumerBiLogger","nodeFetcher","flags","lssModifier","fontUtils","layoutSelectionStoreProvider","onstageActionsManager","ONSTAGE_EVENTS","sectionAlignmentManager"],e.prototype.$onDestory=function(){this.sectionAlignmentManager.clearListeners()},Object.defineProperty(e.prototype,"panelTitle",{get:function(){return this.$translate.instant("design.fonts.section-panel-title-alignment")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelDescription",{get:function(){return this.$translate.instant("design.fonts.section-tip-alignment")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showVerticalPositionControls",{get:function(){return this.sectionAlignmentManager._hasVerticalAlignment},enumerable:!0,configurable:!0}),e.prototype.positionClicked=function(e){this.alignSection(e,!0)},Object.defineProperty(e.prototype,"selectedPositionIndex",{get:function(){return this.sectionAlignmentManager.positionIndex+1},enumerable:!0,configurable:!0}),e.prototype.positionByAlignmen=function(e){return["TOP_LEFT","TOP_MIDDLE","TOP_RIGHT","CENTER_LEFT","CENTER_MIDDLE","CENTER_RIGHT","BOTTOM_LEFT","BOTTOM_MIDDLE","BOTTOM_RIGHT"][e]},e.prototype.alignSection=function(e,t){var i=this;void 0===t&&(t=!1);var n=t?this.positionByAlignmen(e):e;t?this.consumerBiLogger.sectionDesign.changeTextPositionClick(this.node.alias,this.node.getContentElementType(),"",n):this.consumerBiLogger.sectionDesign.changeTextAlignmentClick(n,this.node.alias,this.node.getContentElementType(),""),t?this.sectionAlignmentManager.changeOnMediaPosition(e):this.sectionAlignmentManager.changeTextAlign(e),this.fontUtils.updateNodeView(this.node).then(function(){i.undoRedo.captureOperation(!1,!1),t?i.consumerBiLogger.sectionDesign.changeTextPositionSuccess(i.node.alias,i.node.getContentElementType(),"",n):i.consumerBiLogger.sectionDesign.changeTextAlignmentSuccess(n,i.node.alias,i.node.getContentElementType(),"")})},e.prototype.loaded=function(){var e=this;this.themeChooser.initialize().then(function(){e.ready=!0,e.themeChooserInitialized()}),this.setSectionNode(),this.node||this.applicationState.goToBuilder()},e.prototype.setSectionNode=function(){var e=this.nodeFetcher.getCurrentNodeResult();this.node=e&&e.node,this.sitePart=e&&e.sitePart,this.sectionAlignmentManager.setTargetSection(this.node)},e.prototype.themeChooserInitialized=function(){var e=this,t=this.themeChooser.getColorThemes();this.selectedFont=this.fontUtils.convertFontDataToThumbnail(a.find(t,{id:this.themeChooser.getActiveFontTheme().id}),!0),this.$scope.$watch(function(){return e.getSelectedFontSize()},function(t){return e.selectedFontSize=t})},e.prototype.closePanel=function(){var e=this;this.$scope.$applyAsync(function(){e.previewScale.setScaleFactor(o.PreviewScale.MaxScaleFactor),e.applicationState.goToBuilder(!0)})},e.prototype.showHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.section.font"),this.CONSUMER_DIALOGS.SECTION_FONT_HELP)},e.prototype.backToSectionDesign=function(){this.applicationState.goToSwitchPresetMode("font-back")},e.prototype.goToFontsPanel=function(){this.applicationState.goToFontsPanel(r.BIOrigins.SectionFontPanel)},e.prototype.getSelectedFontSize=function(){return this.fontCustomizationService.getSectionOverride(this.node)||0},e.prototype.setFontSize=function(e){var t=this;return this.consumerBiLogger.sectionDesign.changeFontSizeClick(this.node.getContentElementType(),this.node.alias,e.toString(),this.selectedFont.id),this.fontCustomizationService.setFontSize(this.node,e),this.fontUtils.updateNodeView(this.node).then(function(){t.undoRedo.captureOperation(!1,!1),t.consumerBiLogger.sectionDesign.changeFontSizeSuccess(t.node.alias,t.node.getContentElementType(),e.toString(),t.selectedFont.id)})},e.prototype.isParagraphFieldVisible=function(){var e=a.get(this,"node.contentElement.values"),t=e&&a.findKey(e,function(e){return"longText"===e.subType});return t&&this.node.argsMatchingPolicy[t]},e.prototype.showSplitParagraph=function(){return this.flags.sectionTextSplitParagraph&&this.isParagraphFieldVisible()},Object.defineProperty(e.prototype,"isSplitParagraph",{get:function(){return this.lssModifier.isParagraphColumns(this.node)},enumerable:!0,configurable:!0}),e.prototype.setSplitParagraph=function(e){var t=this;this.consumerBiLogger.sectionDesign.changeTextAlignmentClick("splitColumns",this.node.alias,this.node.getContentElementType(),""),this.lssModifier.setParagraphColumns(this.node,e),this.fontUtils.updateNodeView(this.node).then(function(){t.undoRedo.captureOperation(!1,!1),t.consumerBiLogger.sectionDesign.changeTextAlignmentSuccess("splitColumns",t.node.alias,t.node.getContentElementType(),"")})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionFontPanel",{templateUrl:"views/design/section-font-panel.html",controller:l}).service("sectionAlignmentManager",s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=function(){function e(e,t,i,n,o,r,a,s,l,c){this.applicationState=e,this.flags=t,this.$translate=i,this.slideShowService=n,this.sectionMedia=o,this.overlayManager=r,this.modelTree=a,this.sectionHeightUIService=s,this.mediaSectionUtils=l,this.consumerBiLoggerHelpers=c,this.showMedia=this.flags.sectionMedia&&this.shouldShowMedia(),this.listBackgroundOptions=!1}return e.$inject=["applicationState","flags","$translate","slideShowService","sectionMedia","overlayManager","modelTree","sectionHeightUIService","mediaSectionUtils","consumerBiLoggerHelpers"],e.prototype.shouldShowMedia=function(){var e=this.item.node,t=!!this.sectionMedia.getMedia(e);if(e.isList()){var i=this.modelTree.getListItems(e)[0];if(this.mediaSectionUtils.isMediaActive(i.contentElement))return!1}return t},e.prototype.$postLink=function(){if(this.isListNode=this.item.node.isList(),this.isListNode){var e=this.item.node.children.find(function(e){return e.isListHeader()});this.listBackgroundOptions=e&&e.hasVisibleFields()}},e.prototype.isSlideShow=function(){return this.slideShowService.isSlideShow(this.item.node)},e.prototype.isSlideShowTransition=function(){return this.slideShowService.numOfSlides(this.item.node)>1},Object.defineProperty(e.prototype,"fontPanelTitle",{get:function(){return this.$translate.instant("builder.section-design.menu.font-alignment")},enumerable:!0,configurable:!0}),e.prototype.handleOptionClicked=function(){this.onOptionClicked&&this.onOptionClicked()},e.prototype.openMediaPanel=function(){this.consumerBiLoggerHelpers.setPanelSource(n.BIOrigins.SectionPanel),this.flags.cardsToPanels?this.applicationState.goToSectionMediaPanel():this.applicationState.goToMediaSettingsPanel(),this.handleOptionClicked()},e.prototype.openColorPanel=function(){this.applicationState.goToSectionColorPanel(n.BIOrigins.SectionPanel),this.handleOptionClicked()},e.prototype.openFontPanel=function(){this.applicationState.goToSectionFontPanel(),this.handleOptionClicked()},e.prototype.openAnimationPanel=function(){this.applicationState.goToSectionAnimationPanel(),this.handleOptionClicked()},e.prototype.openSlideshowAnimationPanel=function(){this.applicationState.goToSlideshowAnimationPanel(),this.handleOptionClicked()},e.prototype.isHeightSupported=function(){var e=this.item.node;return"GeneralDescription"!==e.contentElementType&&"Contact"!==e.contentElementType},e.prototype.openHeightPanel=function(e){this.scrollToSelectedSection(),this.sectionHeightUIService.onOpenHeightPanel(),this.sectionHeightUIService.closeWhenClickOutside(),this.overlayManager.listSpanManager.setChangeSectionHeightState(!0),this.handleOptionClicked(),(this.applicationState.isSwitchPresetMode()||this.applicationState.isStateInEditPanel())&&this.applicationState.goToSectionHeight(),e.stopPropagation()},e.prototype.scrollToSelectedSection=function(){var e=$(".layout-group-overlay")[0];e&&e.scrollIntoView(!0)},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("bodySectionDesignMenu",{templateUrl:"views/design/section-design/body-section-design-menu.html",controller:o,bindings:{item:"<",onOptionClicked:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){var n=this;this.headerPresetUtils=e,this.flags=t,this.sitePartTypes=i,this.handleTypeUpdate=function(e){n.init(),n.onDesignUpdated(e?"headerBg":"headerType")},this.init(),this.showHeaderType=!this.flags.mergedHeaderPhase2||this.sitePart!==this.sitePartTypes.FOOTER}return e.$inject=["headerPresetUtils","flags","sitePartTypes"],e.prototype.handleBackgroundUpdate=function(){this.onDesignUpdated("headerBg")},e.prototype.init=function(){this.flags.mergedHeaderPhase2&&(this.colorsSource=this.sitePart===this.sitePartTypes.HEADER?this.headerPresetUtils.getHeaderAvailableBackgroundColors():this.headerPresetUtils.getFooterAvailableBackgroundColors())},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("headerDesignMenu",{templateUrl:"views/design/section-design/header-design-menu.html",controller:n,bindings:{onDesignUpdated:"<",sitePart:"<?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o){var r=this;this.flags=i,this.nodeFetcher=n,this.sitePartTypes=o,e(function(){var e=t.find('[data-hook="section-design-menu"]');r.isAllMenuVisible=window.innerHeight-e.offset().top>e[0].clientHeight})}return e.$inject=["$timeout","$element","flags","nodeFetcher","sitePartTypes"],e.prototype.isHeaderNode=function(){return"GeneralDescription"===this.item.node.contentElementType&&"footer"!==this.item.node.containerPageId},e.prototype.$postLink=function(){this.flags.mergedHeaderPhase2?(this.sitePart=this.nodeFetcher.getNodeSitePart(this.item.node),this.isHeader=this.sitePart===this.sitePartTypes.HEADER,this.isFooter=this.sitePart===this.sitePartTypes.FOOTER):this.isHeader=this.isHeaderNode()},e.prototype.notReady=function(){return void 0===this.isAllMenuVisible},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionDesignMenu",{templateUrl:"views/design/section-design/section-design-menu.html",controller:n,bindings:{item:"<",onOptionClicked:"&",onDesignUpdated:"<",sitePart:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=function(){function e(e,t,i,n,o){var r=this;this.applicationState=e,this.flags=t,this.$element=i,this.$translate=n,this.$timeout=o,this.showBackground=!0,this.listBackgroundOptions=!1,this.$timeout(function(){var e=r.$element.find('[data-hook="section-design-menu"]');r.isAllMenuVisible=window.innerHeight-e.offset().top>e[0].clientHeight})}return e.$inject=["applicationState","flags","$element","$translate","$timeout"],e.prototype.isHeaderNode=function(){return"GeneralDescription"===this.item.node.contentElementType&&"footer"!==this.item.node.containerPageId},e.prototype.$postLink=function(){if(this.isHeader=this.isHeaderNode(),this.isHeader)this.showBackground=!1;else if(this.isListNode=this.item.node.isList(),this.isListNode){var e=this.item.node.children.find(function(e){return e.isListHeader()});this.listBackgroundOptions=e&&e.hasVisibleFields()}},Object.defineProperty(e.prototype,"fontPanelTitle",{get:function(){return this.$translate.instant("builder.section-design.menu.font-alignment")},enumerable:!0,configurable:!0}),e.prototype.notReady=function(){return void 0===this.isAllMenuVisible},e.prototype.handleOptionClicked=function(){this.onOptionClicked&&this.onOptionClicked()},e.prototype.openBackgroundPanel=function(){this.applicationState.goToSectionBackgroundPanel(n.BIOrigins.SectionPanel),this.handleOptionClicked()},e.prototype.openHeaderBackgroundPanel=function(){this.applicationState.goToSectionHeaderBackgroundPanel(n.BIOrigins.SectionPanel),this.handleOptionClicked()},e.prototype.openListBackgroundPanel=function(){this.applicationState.goToSectionListBackgroundPanel(n.BIOrigins.SectionPanel),this.handleOptionClicked()},e.prototype.openColorPanel=function(){this.applicationState.goToSectionColorPanel(n.BIOrigins.SectionPanel),this.handleOptionClicked()},e.prototype.openFontPanel=function(){this.applicationState.goToSectionFontPanel(),this.handleOptionClicked()},e.prototype.openAnimationPanel=function(){this.applicationState.goToSectionAnimationPanel(),this.handleOptionClicked()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionDesignMenuDeprecated",{templateUrl:"views/design/section-design/section-design-menu.html",controller:o,bindings:{item:"<",onOptionClicked:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=function(){function e(e,t,i,o,r,a,s,l,c,d,u,p,g,h,m){var f=this;this.$translate=e,this.applicationState=t,this.themeChooser=i,this.undoRedo=o,this.headerPresetUtils=r,this.headerFooterDecorator=a,this.consumerBiLogger=s,this.consumerBiLoggerHelpers=l,this.mergedHeaderService=c,this.storyServices=u,this.$scope=p,this.flags=g,this.sitePartTypes=h,this.$log=m,this.unsubscribers=[],this.flags.mergedHeaderPhase2?this.$scope.$watch("$ctrl.colorsSource",function(){return f.init()}):(this.colorsSource=this.headerPresetUtils.getHeaderAvailableBackgroundColors(!0),this.colors=this.colorsSource.map(function(e){return{color:e.hex.toUpperCase()}}),this.shouldShowHeaderBackground=this.colors.length>1,this.setCurrentColor()),this.homepage=d.getPageNodeById(d.homePageId),this.isCurrentPageHomepage=u.story.selectedPage===d.homePageId,this.unsubscribers.push(n.PubSub.subscribe(n.events.HEADER_TYPE_CHANGED,function(){return f.setCurrentColor()}))}return e.$inject=["$translate","applicationState","themeChooser","undoRedo","headerPresetUtils","headerFooterDecorator","consumerBiLogger","consumerBiLoggerHelpers","mergedHeaderService","modelTree","storyServices","$scope","flags","sitePartTypes","$log"],e.prototype.$onDestroy=function(){this.unsubscribers.forEach(function(e){return e()})},e.prototype.setCurrentColor=function(){if(this.shouldShowHeaderBackground){var e=this.themeChooser.getSitePartBg(this.sitePart);e&&e.hex&&(this.current=e.hex.toUpperCase())}},Object.defineProperty(e.prototype,"isHomepageWithTransparentHeader",{get:function(){return this.isCurrentPageHomepage&&this.mergedHeaderService.isHeaderMerged(this.homepage)&&(!this.flags.mergedHeaderPhase2||this.sitePart===this.sitePartTypes.HEADER)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){var e=this.isHomepageWithTransparentHeader?"design.header.bgcolor.transparent":"design.header.bgcolor.description";return this.$translate.instant(e,{sitePart:this.sitePart||"header"})},enumerable:!0,configurable:!0}),e.prototype.onColorSelected=function(e){var t=this,i=e.color;try{if(i===this.current)return;var o=this.consumerBiLoggerHelpers.getSectionTypeAndAlias(),r=o[0],a=o[1],s=this.colorsSource.find(function(e){return e.hex.toUpperCase()===i}).color;this.consumerBiLogger.sectionDesign.changeColorClick(a,r);(t.flags.mergedHeaderPhase2?t.headerFooterDecorator.setSitePartBg(s.replace("color_",""),t.sitePart):t.headerFooterDecorator.setSitePartBg(s.replace("color_",""))).then(function(){t.undoRedo.captureOperation(!1,!0),n.PubSub.fire(n.events.HEADER_FOOTER_BG_CHANGED),t.consumerBiLogger.sectionDesign.changeColorSuccess(a,r)}),this.current=i.toUpperCase()}catch(e){this.$log.warn("can't handle select color: ",i)}},e.prototype.goToColorationPanel=function(){this.applicationState.goToColorationPanel()},e.prototype.init=function(){this.colors=this.colorsSource.map(function(e){return{color:e.hex.toUpperCase()}}),this.shouldShowHeaderBackground=this.colors.length>1,this.setCurrentColor()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("headerBackground",{templateUrl:"views/design/header-design/header-background.html",controller:o,bindings:{onUpdated:"&",colorsSource:"<?",sitePart:"<?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(244);angular.module("siteGeneratorStaticsConsumerAppInternal").component("headerType",{templateUrl:"views/design/header-design/header-type.html",controller:n.HeaderType,bindings:{onUpdated:"<"}})},function(e,t){var i=function(){function e(e,t){var i=this;this.$translate=e,this.$scope=t,this.setLogoSize=_.debounce(function(e){return i.onValueChange({value:e})},500),this.maxLogoSize=2,this.minLogoSize=-2}return e.$inject=["$translate","$scope"],e.prototype.$onInit=function(){var e=this;this.$scope.$watch("$ctrl.value",function(t,i){e.setSizeLabel()},!0)},e.prototype.setSizeLabel=function(){this.sizeLabel=this.$translate.instant(e.labels[this.value])},e.labels={"-2":"design.header.logo-size-.-2","-1":"design.header.logo-size-.-1",0:"design.header.logo-size-.0",1:"design.header.logo-size-.1",2:"design.header.logo-size-.2"},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("logoSizeSlider",{templateUrl:"views/design/header-design/logo-size-slider.html",controller:i,bindings:{value:"=",onValueChange:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(0),r=function(){function e(e,t,i,n,o,r,a,s,l){var c=this;this.applicationState=e,this.flags=t,this.$scope=i,this.$element=n,this.$timeout=o,this.undoRedo=r,this.designKitManager=a,this.consumerBiLogger=s,this.colorationUtils=l,this.$timeout(function(){var e=c.$element.find('[data-hook="site-design-menu"]');c.isAllMenuVisible=window.innerHeight-e.offset().top>e[0].clientHeight}),l.initialize().then(function(){c.kit=c.designKitManager.getActiveTheme(),c.$scope.$watch(function(){return c.designKitManager.getActiveTheme()},function(e){return c.kit=e})})}return e.$inject=["applicationState","flags","$scope","$element","$timeout","undoRedo","designKitManager","consumerBiLogger","colorationUtils"],e.prototype.notReady=function(){return void 0===this.isAllMenuVisible},e.prototype.handleOptionClicked=function(){this.onOptionClicked&&this.onOptionClicked()},e.prototype.openColorPanel=function(){this.applicationState.goToColorationPanel(),this.handleOptionClicked()},e.prototype.openFontPanel=function(){this.applicationState.goToFontsPanel(n.BIOrigins.DesignPanel),this.handleOptionClicked()},e.prototype.openAnimationPanel=function(){this.applicationState.goToAnimationPanel(n.BIOrigins.DesignPanel),this.handleOptionClicked()},e.prototype.onReset=function(){var e=this;this.consumerBiLogger.siteDesign.clickOnResetDesign(!1),this.designKitManager.setActiveMainKit(this.kit.id).then(function(){e.consumerBiLogger.siteDesign.resetDesignSuccess(!1)})},e.prototype.kitHasOverrides=function(){return!!this.kit&&(o.isUndefined(this.isReset)&&(this.isReset=this.designKitManager.isKitOveridden()),this.isReset)},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("siteDesignMenu",{templateUrl:"views/design/site-design-menu.html",controller:r,bindings:{onOptionClicked:"&"}})},function(e,t,i){"use strict";var n=function(){function e(e,t,i,n){this.$scope=e,this.$compile=t,this.$translate=i,this.$q=n,this.STEPS={INITIAL:"initial",CONFIRMED:"confirmed"},this.step=this.STEPS.INITIAL}return e.$inject=["$scope","$compile","$translate","$q"],e.prototype.overrideSections=function(){var e=this;this.$q.when().then(function(){return e.onOverrideSections()}).then(function(){e.step=e.STEPS.CONFIRMED})},e.prototype.showOverrideQuery=function(){return this.step===this.STEPS.INITIAL},e.prototype.showSuccess=function(){return this.step===this.STEPS.CONFIRMED},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionOverrideWarning",{templateUrl:"views/design/section-override-warning.html",controller:n,bindings:{onOverrideSections:"&",show:"=",overrideMessage:"=",divider:"="}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(t,i,n){this.siteImporter=t,this.applicationState=i,this.$timeout=n,n(function(){return e.showLoader=!1},1500)}return e.$inject=["siteImporter","applicationState","$timeout"],Object.defineProperty(e.prototype,"siteUrl",{get:function(){return this.siteImporter.getSiteUrl()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showLoader",{get:function(){return e.showLoader},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"importedMenuItems",{get:function(){return this.siteImporter.getImportedMenu()},enumerable:!0,configurable:!0}),e.prototype.importPage=function(e){var t=e.title,i=e.page;this.siteImporter.importPage(t,i)},e.prototype.close=function(){this.applicationState.goToBuilder(!0)},e.showLoader=!0,e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("importPagePanel",{templateUrl:"views/import-site/import-page-panel.html",controller:n})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.handleImport=function(e){this.onImport({itemForImport:e})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("importPageList",{templateUrl:"views/import-site/import-page-list.html",controller:n,bindings:{items:"<",onImport:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(12),o=function(){function e(e,t,i,n,o,r,a,s,l,c){var d=this;this.$translate=e,this.storyServices=t,this.initService=i,this.importSiteContent=n,this.wizWebsite=o,this.wizUtils=r,this.pagesManager=a,this.silentPageBuilder=s,this.spinnerService=l,this.consumerDialogs=c,this.sitePages=[],this.pagesInMenuCount=0,this.importedMenu=[],this.initService.loaded().then(function(){var e=(d.storyServices.story.importedSite||{}).siteAddress,t=void 0===e?"":e;d.siteUrl=d.wizUtils.convertUrlToCanonicalForm(t)})}return e.$inject=["$translate","storyServices","initService","importSiteContent","wizWebsite","wizUtils","pagesManager","silentPageBuilder","spinnerService","consumerDialogs"],e.prototype.getSiteUrl=function(){return this.siteUrl},e.prototype.getImportedMenu=function(){return this.importSiteContent.sitePages!==this.sitePages&&(this.sitePages=this.importSiteContent.sitePages,this.updateImportedMenu()),this.importedMenu},e.prototype.updateImportedMenu=function(){var e=this,t=new Set,i=new Map(this.sitePages.map(function(e){return[e.url,e.data.pages[0]]})),n=new Set((this.storyServices.story.importedSite.pages||[]).filter(function(e){return e.imported}).map(function(t){var i=t.url;return e.wizUtils.convertUrlToCanonicalForm(i)})),o=this.siteUrl,r=this.sitePages.find(function(t){var i=t.url;return o===e.wizUtils.convertUrlToCanonicalForm(i)}).data.pages[0],a=r.sections.find(function(t){return e.wizUtils.isHeaderSection(t)}),s=function(o){return(o||[]).map(function(o){o.type;var r,a=o.text,l=o.url,c=o.sub,d=i.has(l);return d&&(t.add(e.wizUtils.convertUrlToCanonicalForm(l)),r={url:l,data:{pages:[i.get(l)]},imported:n.has(e.wizUtils.convertUrlToCanonicalForm(l))}),{title:a,readyForImport:d,page:r,subItems:s(c)}}).filter(function(e){return e.readyForImport||e.subItems.length>0})};this.importedMenu=s(a&&a.menu),t.has(this.wizUtils.convertUrlToCanonicalForm(o))||(this.importedMenu.unshift({title:this.$translate.instant("modelTree.homepage"),readyForImport:!0,page:{url:o,data:{pages:[r]},imported:n.has(this.wizUtils.convertUrlToCanonicalForm(o))},subItems:[]}),t.add(this.wizUtils.convertUrlToCanonicalForm(o))),t.size<i.size&&i.forEach(function(i,o){t.has(e.wizUtils.convertUrlToCanonicalForm(o))||(e.importedMenu.push({title:e.$translate.instant("general.page"),readyForImport:!0,page:{url:o,data:{pages:[i]},imported:n.has(e.wizUtils.convertUrlToCanonicalForm(o))},subItems:[]}),t.add(e.wizUtils.convertUrlToCanonicalForm(o)))}),this.pagesInMenuCount=t.size},e.prototype.importPage=function(e,t){var i=this,o=t.url,r=t.data,a=new ob.SiteAnalyzeTaskResult;a.parsedData=r;var s=this.wizUtils.convertUrlToCanonicalForm(o)===this.siteUrl;this.spinnerService.waitForMe("importPage"),this.wizWebsite.uploadImportedData(a,o,e,s,!0).then(function(){return i.pagesManager.addPage(e)}).then(function(e){return i.storyServices.story.selectedPage=e.id,i.pagesManager.goToPage(e.id)}).then(function(e){return i.silentPageBuilder.constructAnyPage(e,!1,s)}).then(function(){var e=(i.storyServices.story.importedSite.pages||[]).find(function(e){return e.url===o});e&&(e.imported=!0),i.updateImportedMenu(),i.spinnerService.imDone("importPage"),i.consumerDialogs.showDialog(n.ConsumerDialogTypes.IMPORT_PAGE_SUCCESS_POPUP)}).catch(function(){i.spinnerService.imDone("importPage"),i.consumerDialogs.showDialog(n.ConsumerDialogTypes.IMPORT_PAGE_FAILED_POPUP)})},e}();t.SiteImporter=o,angular.module("siteGeneratorBuilderInternal").service("siteImporter",o)},function(e,t,i){"use strict";var n=function(){function e(e){this.experimentManager=e}return e.prototype.link=function(e,t){t.bind("keydown keypress",function(e){if(13===e.which){e.preventDefault();var t=$(this).parents("form:eq(0),body").find("input, textarea, select"),i=t.index(this);i>-1&&i+1<t.length&&t.eq(i+1).focus()}})},e}();angular.module("siteGeneratorCommon").directive("enterToTab",["experimentManager",function(e){return new n(e)}])},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0}),angular.module("siteGeneratorStaticsConsumerAppInternal").config(["$provide",function(e){e.decorator("CcDialogBuilder",["$delegate","consumerBiLogger","$q",function(e,t,i){var o=[],r=!1;var a=e.show;function s(){if(r=!1,o.length>0){var e=o.pop();e.popupInstance.show(e.arguments).then(function(){e.defer.resolve()})}}return e.show=function(i){if(r){var l=this.$q.defer();return o.push({popupInstance:this,arguments:i,defer:l}),l.promise}r=!0,function(e){if(e&&e[0]){var t=e[0].onRemoving;e[0]=n({},e[0],{onRemoving:function(){s(),t&&t()}})}}(arguments);var c=a.apply(e,arguments);return i.customBi?c:(function(e){t.dialogs.show(null,null,null,e,null)}(i.biDialogName),c.then(function(e){var n=i.biDialogTargetName;e&&(n=e.biDialogTargetName),function(e,i){t.dialogs.approveChanges(null,null,null,e,i,null)}(i.biDialogName,n)},function(){!function(e){t.dialogs.cancel(null,null,null,e,null)}(i.biDialogName)}),c)},e}])}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.$window=e,this.consumerBiLogger=t}return e.$inject=["$window","consumerBiLogger"],e.prototype.onLoginSignUp=function(e,t,i){"login"!==i.data.action&&"signup"!==i.data.action||(this.consumerBiLogger.builder.switchViewFromAnonToUserSuccess(t,i.data.action),i.source.close(),this.$window.removeEventListener("message",this.listener),this.listener=void 0,e&&e())},e.prototype.open=function(e,t,i,n){this.consumerBiLogger.builder.signUpLoginPopUpShown(t),void 0!==this.listener&&this.$window.removeEventListener("message",this.listener),this.listener=this.onLoginSignUp.bind(this,i,t),this.$window.addEventListener("message",this.listener,!1);var o=screen.width/2-250,r=screen.height/2-350,a="https://users.wix.com/signin?messageOpener=true&loginDialogContext="+e;n&&(a+=n),this.$window.open(a,e,"width=500,height=700,left="+o+",top="+r)},e}();t.SignUpLoginPopUp=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("signUpLoginPopUp",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.$window=e}return e.$inject=["$window"],e.prototype.readCookie=function(e){var t=this.$window.document.cookie.split("; ").find(function(t){return 0===t.indexOf(e+"=")});return t?t.replace(/.*=/g,""):null},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("cookieManager",n)},function(e,t){angular.module("exceptionOverwrite",[]).constant("uncaughtExceptions",[]).constant("uncaughtExceptionListeners",[]).factory("$exceptionHandler",["$log","$injector","uncaughtExceptions","uncaughtExceptionListeners",function(e,t,i,n){return function(o,r){i.push({exception:o,cause:r}),n.forEach(function(t){try{t()}catch(t){e.error(t,"one of uncaughtExceptionListeners threw")}}),e.error(o,r);var a=t.get("obMonitoring");a&&a.error(o.message,o)}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i){this.$compile=e,this.$rootScope=t,this.flags=i}return e.$inject=["$compile","$rootScope","flags"],e.prototype.compile=function(e,t,i){var n=this.createTemplateString(e,t,i),o=this.$rootScope.$new();return Object.assign(o,t||{}),{content:this.$compile(n)(o),destroy:function(){return o.$destroy()}}},e.prototype.getKebabCase=function(e){return this.flags.widgetAppsPanel?e.replace(/^\w/,function(e){return e.toLowerCase()}).replace(/([A-Z])/g,"-$1").toLowerCase():n.kebabCase(e)},e.prototype.createTemplateString=function(e,t,i){var o=this,r=this.flags.textManagerUxImprovement?this.getKebabCase(e):n.kebabCase(e),a="<"+r+" "+(this.flags.textManagerUxImprovement?n.map(t,function(e,t){return o.getKebabCase(t)+"='"+t+"'"}).join(" "):n.map(t,function(e,t){return n.kebabCase(t)+"='"+t+"'"}).join(" "))+"></"+r+">";return i?"<div class='"+i+"'>"+a+"</div>":a},e}();t.ComponentCompiler=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("componentCompiler",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n){var o=this;this.sectionMedia=e,this.$injector=t,this.CcDialogBuilder=i,this.clientTopology=n,this.services={},setTimeout(function(){return angular.module("siteGeneratorStaticsConsumerAppInternal")._invokeQueue.filter(function(e){return"service"===e[1]}).forEach(function(e){return o.services[e[2][0]]=o.$injector.get(e[2][0])})}),setTimeout(function(){return angular.module("siteGeneratorEditorInternal")._invokeQueue.filter(function(e){return"service"===e[1]}).forEach(function(e){return o.services[e[2][0]]=o.$injector.get(e[2][0])})}),setTimeout(function(){return angular.module("siteGeneratorIntroInternal")._invokeQueue.filter(function(e){return"service"===e[1]}).forEach(function(e){return o.services[e[2][0]]=o.$injector.get(e[2][0])})}),setTimeout(function(){return angular.module("siteGeneratorTourManagerInternal")._invokeQueue.filter(function(e){return"service"===e[1]}).forEach(function(e){return o.services[e[2][0]]=o.$injector.get(e[2][0])})}),setTimeout(function(){return angular.module("siteGeneratorBuilderInternal")._invokeQueue.filter(function(e){return"service"===e[1]}).forEach(function(e){return o.services[e[2][0]]=o.$injector.get(e[2][0])})})}return e.$inject=["sectionMedia","$injector","CcDialogBuilder","clientTopology"],e}();angular.module("siteGeneratorStaticsConsumerDebug").service("consumerDebug",n).run(["consumerDebug","$window",function(e,t){t.consumerDebug=e}])},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),a=i(1),s=function(){function e(e,t,i,n,o){this.wizardService=e,this.initBI=t,this.storyServices=i,this.siteState=n,this.flags=o}return e.$inject=["wizardService","initBI","storyServices","siteState","flags"],e.prototype.saveStory=function(e,t,i){return n(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return this.flags.templateSite?(this.flags.templateSite=!1,[4,this.markStoryAsCreated()]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.wizardService.publishStory(e,t,i)]}})})},e.prototype.publishStory=function(){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return this.flags.templateSite?(this.flags.templateSite=!1,[4,this.markStoryAsCreated()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2,this.wizardService.publishConsumerStory().then(function(){r.PubSub.fire(r.events.PUBLISH)})]}})})},e.prototype.markStoryAsCreated=function(){var e=this;if(this.storyServices.story.isDraft)return this.initBI.reportStart({name:a.BIInitSteps.MarkCreated,init:!0}),this.storyServices.story.markCreated(this.flags.headlessApi&&this.siteState.getSiteId()).then(function(){e.storyServices.story.isDraft=!1,e.initBI.reportEnd({name:a.BIInitSteps.MarkCreated,init:!0})})},e}();t.ConsumerPublishService=s,angular.module("siteGeneratorBuilderInternal").service("consumerPublishService",s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(0),r=function(){function e(e,t,i){var n=this;this.flags=e,this.obMonitoring=t,this.consumerBiLogger=i,this.isNewSite=!1,this.reportStart=function(e){o.set(e,"data.isNewSite",n.isNewSite),n.obMonitoring.mark(e)},this.reportEnd=function(e){o.set(e,"data.isNewSite",n.isNewSite),n.obMonitoring.measure(e)},this.flags.silentBI&&this.consumerBiLogger.pauseBI()}return e.$inject=["flags","obMonitoring","consumerBiLogger"],e.prototype.reportError=function(e,t){this.consumerBiLogger.err(n.BIErrorCodes.InitFlowError,"init flow error: "+JSON.stringify(e)+" \n "+JSON.stringify({isNewSite:t}))},e}();t.InitBI=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("initBI",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(64),o=i(12),r=i(178),a=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T){this.consumerBiLogger=e,this.consumerDialogs=t,this.jsApiManager=i,this.$translate=n,this.layoutSolver=o,this.mobileSolutionManager=r,this.sectionManager=a,this.mobileSectionManager=s,this.setTpaContentService=l,this.flags=c,this.exitNotification=d,this.$window=u,this.initStopwatch=p,this.initBI=g,this.initDebugPerformance=h,this.spinnerService=m,this.fullStoryLoader=f,this.clientTopology=v,this.$state=S,this.storyServices=y,this.signUpLoginPopUp=T}return e.$inject=["consumerBiLogger","consumerDialogs","jsApiManager","$translate","layoutSolver","mobileSolutionManager","sectionManager","mobileSectionManager","setTpaContentService","flags","exitNotification","$window","initStopwatch","initBI","initDebugPerformance","spinnerService","fullStoryLoader","clientTopology","$state","storyServices","signUpLoginPopUp"],e.prototype.setup=function(e){e?this.initStopwatch.reset():this.initStopwatch.reset(this.$window.loadStartTime),this.flags.debugPerformance&&this.initDebugPerformance.start(),e||this.initFullStory(),this.$window.name="ADI",this.handleServerErrors(),this.flags.moveMediaManagerToPostInit||this.initMediaManager(),this.layoutSolver.registerWithOnPageCalculatedCallback(this.sectionManager.onPageCalculated.bind(this.sectionManager)),this.mobileSolutionManager.registerWithOnPartCalculatedCallback(this.mobileSectionManager.onPartCalculated.bind(this.mobileSectionManager)),this.setTpaContentService.registerWithBiLooger(this.consumerBiLogger)},e.prototype.initMediaManager=function(){if(this.$window.MediaManagerApi){var e=this.$window.MediaManagerApi.create({version:this.flags.MediaManager3||this.flags.MediaManager3Migrate?"G6":"G5",languageCode:this.clientTopology.locale,siteMediaToken:this.clientTopology.siteMediaToken,origin:this.$window.MediaManagerApi.origins.ADI});e.warmup(),this.$window.MediaManager=e}},e.prototype.initFullStory=function(){var e=this,t={label:"site-generator-statics-consumer",spec:"specs.ob.FullStory",onReady:function(t){e.consumerBiLogger.intro.fullStoryStarted(t),e.flags.isRecordingFullStorySession=!0}};this.fullStoryLoader(t)},e.prototype.preventRestartOnHandledErrors=function(e){e&&(e.handledEvent=!0)},e.prototype.preFatalError=function(){this.exitNotification.off(),this.spinnerService.isFirstTime=!1,this.spinnerService.isFatalError=!0,this.spinnerService.disable(),r.preloaderService.stop()},e.prototype.showFatalErrorDialog=function(e){this.preFatalError(),this.consumerDialogs.showDialog(e)},e.prototype.redirectToDashboard=function(){this.exitNotification.off(),this.$window.location.replace(this.$translate.instant("url.dashboard"))},e.prototype.overrideConflictingChangesHandler=function(e){this.flags.headlessApi&&(this.specialConflictingChangesHandler=e)},e.prototype.isInBuilderStateWithoutAStory=function(){return this.$state.$current&&this.$state.$current.name.startsWith(n.BUILDER_STATES.BUILDER)&&!this.storyServices.story},e.prototype.handleServerErrors=function(){var e=this;this.jsApiManager.onSessionExpired(function(t){e.preventRestartOnHandledErrors(t),e.flags.onSessionExpiredShowLoginPopUp?e.signUpLoginPopUp.open("login","sessionExpired",function(){e.isInBuilderStateWithoutAStory()&&e.$window.location.reload(!0)}):e.showFatalErrorDialog(o.ConsumerDialogTypes.SESSION_EXPIRED_POPUP)}),this.jsApiManager.onConflictingChanges(function(t){e.specialConflictingChangesHandler?e.specialConflictingChangesHandler():(e.preventRestartOnHandledErrors(t),e.showFatalErrorDialog(o.ConsumerDialogTypes.STORY_CONFLICTING_CHANGES_POPUP))}),this.jsApiManager.onSiteNotManagedByOB(function(t){e.preventRestartOnHandledErrors(t),e.redirectToDashboard()}),this.jsApiManager.onStoryArchived(function(t){e.preventRestartOnHandledErrors(t),e.redirectToDashboard()})},e}();t.InitSetup=a,angular.module("siteGeneratorStaticsConsumerAppInternal").service("initSetup",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(0),r=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T){this.applicationParameters=e,this.introModelTree=t,this.storyServices=i,this.contentSource=n,this.contentManager=o,this.sectionManager=r,this.layoutSolver=a,this.undoRedo=s,this.introManager=l,this.$q=c,this.flags=d,this.introMediaUploader=u,this.$window=p,this.tpaService=g,this.$interval=h,this.silentPageBuilder=m,this.consumerBiLogger=f,this.$timeout=v,this.clientTopology=S,this.initTPA=y,this.initBI=T,this.isInInitNewSiteData=!1,this.isLoadedDefer=this.$q.defer()}return e.$inject=["applicationParameters","introModelTree","storyServices","contentSource","contentManager","sectionManager","layoutSolver","undoRedo","introManager","$q","flags","introMediaUploader","$window","tpaService","$interval","silentPageBuilder","consumerBiLogger","$timeout","clientTopology","initTPA","initBI"],e.prototype.loaded=function(){return this.isLoadedDefer.promise},e.prototype.updateIntroDataByUserValues=function(e){var t=this,i=o.map(o.filter(this.introManager.data.socialLinks,function(e){return!(!e.constForWixWiz||!e.url)}),function(e){return e.url}),n=o.find(e,function(e){return"contactDetails.website"===e});(o.some(i)||n)&&(this.introManager.data.urls=o.map(this.introManager.data.socialLinks,function(e){return e.url}),n&&this.introManager.data.urls.push(this.introManager.data.contactDetails.website),this.extendedUserDataPromise=Promise.any([this.introManager.getExtendedUserByPathsToNotUpdate(this.introManager.data)]).then(function(i){t.isInInitNewSiteData?(t.introManager.data.media=o.cloneDeep(i.dataModel.media),t.introMediaUploader.upload(t.clientTopology.siteMediaToken,t.storyName)):t.introManager.updateDataByModelAndUserValuesPaths(i.dataModel,e)}))},e.prototype.init=function(e,t){return e?this.initNewSiteData(t):this.isLoadedDefer.resolve(),this.isLoadedDefer.promise},e.prototype.waitBeforeContinue=function(){return this.flags.introWebsiteAddressField?Promise.any([this.extendedUserDataPromise,this.$timeout(2e3)]):this.$q.when()},e.prototype.initNewSiteData=function(e){var t=this;return this.initBI.reportStart({name:n.BIInitSteps.InitSiteData,init:!0}),this.waitBeforeContinue().then(function(){t.isInInitNewSiteData=!0,t.storyName=e,t.introMediaUploader.upload(t.clientTopology.siteMediaToken,e).then(function(){return t.generateInitialContent()}).then(function(){t.undoRedo.captureInitialState(),t.sendBIForRecommendedTPAs(),t.initTPA.updateTpasByIntroData(t.introManager.data)}).then(function(){return t.initialSave()}).then(function(){return t.flags.noTour?t.silentPageBuilder.constructAnyHomePage():t.flags.emptyPage?t.layoutSolver.onNodeChanged():t.$q.when()}).then(function(){t.initBI.reportEnd({name:n.BIInitSteps.InitSiteData,init:!0}),t.isLoadedDefer.resolve()}).catch(function(e){return t.isLoadedDefer.reject(e)})})},e.prototype.generateInitialContent=function(){var e=this;return this.initBI.reportStart({name:n.BIInitSteps.GenerateInitialContent,parent:n.BIInitSteps.InitSiteData,init:!0}),this.introModelTree.generateAll().then(function(){e.initBI.reportEnd({name:n.BIInitSteps.GenerateInitialContent,parent:n.BIInitSteps.InitSiteData,init:!0})})},e.prototype.initialSave=function(){var e=this;return this.initBI.reportStart({name:n.BIInitSteps.InitialSave,parent:n.BIInitSteps.InitSiteData,init:!0}),this.storyServices.story.save().then(function(){e.initBI.reportEnd({name:n.BIInitSteps.InitialSave,parent:n.BIInitSteps.InitSiteData,init:!0})})},e.prototype.sendBIForRecommendedTPAs=function(){this.contentManager.suggestedSections().suggestions.filter(this.isSectionRecommended).filter(this.isSectionTPA.bind(this)).map(this.sectionToTpaType.bind(this)).forEach(this.reportTPAType.bind(this))},e.prototype.isSectionRecommended=function(e){return e.isRecommendedForPage},e.prototype.isSectionTPA=function(e){var t=o.first(this.sectionManager.prepareDrafts(e));return e.ceType.indexOf("_Widget")>-1||t&&t.isTpaNode&&t.isTpaNode()},e.prototype.sectionToTpaType=function(e){return this.applicationParameters.tpaTypes[e.ceType.split("_")[0]||""]},e.prototype.reportTPAType=function(e){if(e){var t=e.type,i=e.appId;this.consumerBiLogger.sectionManagement.planToAddTpaInWelcomeTour("recommended",i,t)}},e}();t.InitSiteData=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("initSiteData",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o){this.contentManager=e,this.introManager=t,this.flags=i,this.tpaService=n,this.initBI=o}return e.$inject=["contentManager","introManager","flags","tpaService","initBI"],e.prototype.fromStory=function(e){e.selectedOffers=e.selectedOffers||[],e.privateMediaFolderId=e.privateMediaFolderId||"",e.popupConfigurations=e.popupConfigurations||{},this.flags.textManager&&(e.tipMessages=e.tipMessages||{},this.flags.textManagerUxImprovement&&(e.textManager=e.textManager||{})),e.visitedTasks=e.visitedTasks||{},e.mobileEditorActive=void 0!==e.mobileEditorActive&&e.mobileEditorActive,this.flags.introWebsiteAddressField&&(e.websiteUrl=e.websiteUrl||""),e.tourState=e.tourState||{},e.nodeIdToSlideshowTransition=e.nodeIdToSlideshowTransition||{},e.revisionsUpdated=e.revisionsUpdated||0;var t={industryId:e.industryId,structureId:e.structureId};return this.fromContentId(t)},e.prototype.fromContentId=function(e){var t=this;return this.contentManager.initialize(e).then(function(){return t.setTpaTemplateIds()})},Object.defineProperty(e.prototype,"hasIntroData",{get:function(){var e=this.introManager.data;return e&&e.category&&null!==e.category.industryId&&null!==e.category.structureId},enumerable:!0,configurable:!0}),e.prototype.setTpaTemplateIds=function(){this.tpaService.setTpaTypeToTemplateIdMap(this.contentManager.getTpaMetaSiteIds())},e}();t.InitContent=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("initContent",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(0),r=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y){this.$q=e,this.introContentTpa=t,this.applicationParameters=i,this.pagesManager=n,this.modelTree=o,this.storyServices=r,this.contentElementGenerator=a,this.applicationState=s,this.sectionManager=l,this.nodeManipulationService=c,this.tpaService=d,this.assistantUtils=u,this.consumerBiLogger=p,this.consumerBiLoggerHelpers=g,this.siteState=h,this.initBI=m,this.chatManager=f,this.notification=v,this.$translate=S,this.flags=y,this.limited=function(e,t){return"string"==typeof e?e.substr(0,t):e}}return e.$inject=["$q","introContentTpa","applicationParameters","pagesManager","modelTree","storyServices","contentElementGenerator","applicationState","sectionManager","nodeManipulationService","tpaService","assistantUtils","consumerBiLogger","consumerBiLoggerHelpers","siteState","initBI","chatManager","notification","$translate","flags"],e.prototype.tpaTypesToAdd=function(){var e=this;return o.map(this.storyServices.story.selectedOffers,function(t){var i=e.applicationParameters.tpaTypes[t.type||""];if(i){t.checked&&e.reportTPAAddition(i);var n=i.type,o=t.checked||e.isStoreAutoProvision(n)||e.isBlogAutoProvision(n);return(e.isStoreAutoProvision(n)||e.isBlogAutoProvision(n))&&(t.autoProvisioned=!0),o&&e.shouldProvisionTPA(n)?n:null}}).filter(function(e){return e})},e.prototype.fromTypes=function(e,t){var i=this;return o.sequencePromises(e,function(e){var n=i.$translate.instant("builder.section-design.TPA_NAME."+e);return t(i.$translate.instant("builder.progress-bar.step-message.adding-application",{type:n})),i.siteState.waitForChanges().then(function(){return i.installTPA(e)})})},e.prototype.updateTpasByIntroData=function(e){var t=this.storyServices.story.selectedOffers,i=e.category;this.introContentTpa.categoryType(i)===intro.CategoryTypes.SingleEvent&&this.updateEntry(t,this.createSingleEventData(e))},e.prototype.updateEntry=function(e,t){var i=o.findIndex(e,{type:t.type});i>=0?e[i]=t:e.push(t)},e.prototype.createSingleEventData=function(e){var t=this.applicationState.generateRandomOffset("Welcome"),i=this.contentElementGenerator.generate({ceType:"Welcome",cardinality:1},t),n=o.find(i.values,{subType:core.ElementSubTypes.Image}),r=o.find(n.value,{mediaType:"image"}),a=o.find(i.values,{subType:core.ElementSubTypes.LongText});return{type:core.TpaWidgetTypes.Events_Single,checked:!0,data:{name:this.limited(e.name,120),media:this.media(r),description:this.limited(e.description||a.value,300),callToAction:this.$translate.instant("tpa.events.callToAction"),location:this.getLocation(e.userLocation),date:this.getDates(e.dates,e.timezone)}}},e.prototype.media=function(e){return e?{uri:e.uri,width:980,height:980/e.width*e.height}:null},e.prototype.getDates=function(e,t){if(e&&e[0]){var i=e[0],n=e[1];return{start:this.singleDate(i),end:i&&n&&n.getTime()>i.getTime()?this.singleDate(n):null,timezone:t}}return{message:this.$translate.instant("intro.event-details.date-tbd")}},e.prototype.singleDate=function(e){return e?{day:e.getDate(),month:e.getMonth(),year:e.getFullYear(),hours:e.getHours(),minutes:e.getMinutes()}:null},e.prototype.getLocation=function(e){if(e&&e.geometry){var t=e.geometry.location;return{name:this.limited(e.name,40),address:this.limited(e.formatted_address,150),lat:"function"==typeof t.lat?t.lat():t.lat,lng:"function"==typeof t.lng?t.lng():t.lng}}return"string"==typeof e&&e?{message:e}:{message:this.$translate.instant("intro.event-details.location-tbd")}},e.prototype.reportTPAAddition=function(t){var i=t.type,n="Blog"===i?e.BLOG_APP_ID:t.appId;this.consumerBiLogger.sectionManagement.planToAddTpaInWelcomeTour("intro",n,i)},e.prototype.shouldProvisionTPA=function(e){return e&&!this.tpaService.isTpaAdded(e)&&e!==this.applicationParameters.tpaTypes.GetSubscribers.type},e.prototype.addTpaPage=function(e){return this.flags.blog2&&e===this.applicationParameters.tpaTypes.Blog.type&&(e=this.applicationParameters.tpaTypes.Blog2.type),this.handleTpaNode(e,n.AddTpaContext.headless)},e.prototype.installTPA=function(e){var t=this;return this.initBI.reportStart({parent:n.BIInitSteps.ProvisionTPAs,name:e,init:!0}),(e===this.applicationParameters.tpaTypes.Chat.type?function(){var i=t.tpaService.getAppIdByType(e);return t.consumerBiLogger.apps.addTpaStart(e,i),t.chatManager.addChat(n.AddTpaContext.Init),t.$q.when({})}:function(){return t.handleTpaNode(e)})().then(function(){t.initBI.reportEnd({parent:n.BIInitSteps.ProvisionTPAs,name:e,init:!0})})},e.prototype.handleTpaNode=function(e,t){var i=this;void 0===t&&(t=n.AddTpaContext.Init);var r=this.flags.widgetAppsPanel?this.modelTree.getTpaNodeByType(e):this.flags.lodash4?o.find(this.modelTree.getTpaNodes(),["contentElementType",e]):o[String("find")](this.modelTree.getTpaNodes(),{contentElementType:e}),a=Date.now();return this.sectionManager.addTpa(r,void 0,{}).then(function(t){if(i.consumerBiLogger.pagesManager.addTpaPackageSuccess(i.consumerBiLoggerHelpers.extraPagesCount(),i.tpaService.getAppId(r,!0),null,Date.now()-a,r.getId(),i.tpaService.getInstanceId(r)),i.isBlogAutoProvision(e))return i.handleBlogTPA(t)})},e.prototype.handleBlogTPA=function(t){this.consumerBiLogger.sectionManagement.planToAddTpaInWelcomeTour("intro",e.BLOG_APP_ID,"blogHP");var i=this.modelTree.homePageId;this.storyServices.story.selectedPage=t.id;var n=this.pagesManager.getPageIdByName(t.id);this.siteState.setHomePage(n),this.modelTree.homePageId=t.id;var r=this.$q.defer();if(this.flags.coreCleanLssOnRemove){var a=this.modelTree.getNodeById(i);a&&this.nodeManipulationService.deletePage(a,"body",o.noop,function(){return r.resolve()})}else this.nodeManipulationService.deletePageById(i,"body",o.noop,function(){return r.resolve()});return r.promise},e.prototype.isBlogAutoProvision=function(e){return!(e!==this.applicationParameters.tpaTypes.Blog.type||!this.assistantUtils.shouldAutoProvisionTPAOfType("Blog"))||!(e!==this.applicationParameters.tpaTypes.Blog2.type||!this.assistantUtils.shouldAutoProvisionTPAOfType("Blog2"))},e.prototype.isStoreAutoProvision=function(e){return e===this.applicationParameters.tpaTypes.Stores.type&&this.assistantUtils.shouldAutoProvisionTPAOfType("Stores")},e.BLOG_APP_ID="61f33d50-3002-4882-ae86-d319c1a249ab",e}();t.InitTPA=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("initTPA",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(0),r=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I){this.$q=e,this.Story=t,this.metaDataService=i,this.applicationState=n,this.modelTree=o,this.storyServices=r,this.wizardService=a,this.flags=s,this.siteNameApi=l,this.metaSiteApi=c,this.introManager=d,this.contentManager=u,this.$location=p,this.themeChooser=g,this.spinnerService=h,this.consumerBiLogger=m,this.consumerBiLoggerHelpers=f,this.initBI=v,this.initStopwatch=S,this.initContent=y,this.animationKit=T,this.backgroundScrollService=b,this.pagesManager=I}return e.$inject=["$q","Story","metaDataService","applicationState","modelTree","storyServices","wizardService","flags","siteNameApi","metaSiteApi","introManager","contentManager","$location","themeChooser","spinnerService","consumerBiLogger","consumerBiLoggerHelpers","initBI","initStopwatch","initContent","animationKit","backgroundScrollService","pagesManager"],e.prototype.createStoryInternal=function(e){var t=this;if(void 0===e&&(e=!1),this.setDefaultBIValues(),this.introManager.data=this.introManager.data?this.introManager.data:this.getFallbackIntroData(),!this.introManager.data.name)throw"no business name? no service! come back one year!";return this.getUniqueName().then(function(i){return t.saveNewStory(i,e)}).then(function(e){return t.handleStoryCreated(e)}).then(function(){return t.loadMetadataAndContent()}).then(function(){return t.setMainKit()}).then(function(){return t.initCore()}).then(function(){return t.initStoryData()}).then(function(){return t.setMobileEditorStatus()}).then(function(){return t.backgroundScrollService.setDefaultScrollType()}).then(function(){return t.pagesManager.setDefaultPagesTransition()}).then(function(){return t.newStoryName})},e.prototype.createStory=function(e){return e||(this.spinnerService.isFirstTime=!0),this.createStoryInternal(e)},e.prototype.getUniqueName=function(){var e=this;return this.initBI.reportStart({name:n.BICreateStorySteps.GetUniqueName,parent:n.BIInitSteps.InitStory,init:!0}),this.siteNameApi.getUniqueName(this.introManager.data.name).then(function(t){return e.initBI.reportEnd({name:n.BICreateStorySteps.GetUniqueName,parent:n.BIInitSteps.InitStory,init:!0}),t})},e.prototype.initCore=function(){var e=this;return this.initBI.reportStart({name:n.BICreateStorySteps.InitCoreA,parent:n.BIInitSteps.InitStory,init:!0}),this.wizardService.init(this.storyServices.story,void 0,!0).then(function(){return e.initBI.reportEnd({name:n.BICreateStorySteps.InitCoreA,parent:n.BIInitSteps.InitStory,init:!0})})},e.prototype.setDefaultBIValues=function(){this.initContent.hasIntroData&&(this.consumerBiLoggerHelpers.setDefaultValue("industryId",this.introManager.data.category.industryId),this.consumerBiLoggerHelpers.setDefaultValue("structureId",this.introManager.data.category.structureId))},e.prototype.initStoryData=function(){var e=this.storyServices.story.getActiveLocale();e.savedSites.undefined.pagesMap={},e.savedSites.undefined.nodesRefMap={}},e.prototype.saveNewStory=function(e,t){var i=this;return void 0===t&&(t=!1),this.initBI.reportStart({name:n.BICreateStorySteps.SaveNewStory,parent:n.BIInitSteps.InitStory,init:!0}),this.newStoryName=e,this.Story.create().save("website",t,"ADI").then(function(e){return i.initBI.reportEnd({name:n.BICreateStorySteps.SaveNewStory,parent:n.BIInitSteps.InitStory,init:!0}),e})},e.prototype.handleStoryCreated=function(e){this.storyServices.calculateMaxPageAndNodeId(e),this.storyServices.story=e},e.prototype.setMainKit=function(){var e=this.contentManager.getKitIds();e&&e.length>0&&(this.initBI.reportStart({name:n.BICreateStorySteps.SetMainKit,parent:n.BIInitSteps.InitStory,init:!0}),this.themeChooser.serializeMainKitSelection(e[0],!0),this.initBI.reportEnd({name:n.BICreateStorySteps.SetMainKit,parent:n.BIInitSteps.InitStory,init:!0}))},e.prototype.setMobileEditorStatus=function(){this.storyServices.story.mobileEditorActive=!0},e.prototype.loadMetadataAndContent=function(){return this.$q.all([this.getMetadata(),this.initContentFromStory()])},e.prototype.initContentFromStory=function(){var e=this;return this.initBI.reportStart({name:n.BICreateStorySteps.InitContent,parent:n.BIInitSteps.InitStory,init:!0}),this.initContent.fromStory(this.storyServices.story).then(function(){e.initBI.reportEnd({name:n.BICreateStorySteps.InitContent,parent:n.BIInitSteps.InitStory,init:!0})})},e.prototype.getMetadata=function(){var e=this;return this.initBI.reportStart({name:n.BICreateStorySteps.GetMetadata,parent:n.BIInitSteps.InitStory,init:!0}),this.metaDataService.getMetadata(this.storyServices.story.id,this.applicationState.setStoryMetadata.bind(this.applicationState)).then(function(){e.initBI.reportEnd({name:n.BICreateStorySteps.GetMetadata,parent:n.BIInitSteps.InitStory,init:!0})})},e.prototype.getFallbackIntroData=function(){var e=this.$location.search();return{name:o.has(e,"businessName")?e.businessName:"Missing Name Inc",category:{industryId:o.has(e,"industryId")?e.industryId:"e79e5765052b89b579c9a4c2",structureId:o.has(e,"structureId")?e.structureId:"40dc538a8a6c3e2dae342922"}}},e}();t.InitNewStory=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("initNewStory",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(177),r=i(0),a=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S){this.Story=e,this.metaDataService=t,this.applicationState=i,this.applicationParameters=n,this.modelTree=o,this.$window=r,this.storyServices=a,this.pagesManager=s,this.tpaService=l,this.wizardService=c,this.flags=d,this.undoRedo=u,this.consumerBiLogger=p,this.consumerBiLoggerHelpers=g,this.initStopwatch=h,this.initContent=m,this.localStorageService=f,this.suggestDomainService=v,this.initBI=S}return e.$inject=["Story","metaDataService","applicationState","applicationParameters","modelTree","$window","storyServices","pagesManager","tpaService","wizardService","flags","undoRedo","consumerBiLogger","consumerBiLoggerHelpers","initStopwatch","initContent","localStorageService","suggestDomainService","initBI"],e.prototype.fromId=function(e,t){var i=this;return this.setDefaultBIValues(e),this.flags.newTopBar&&this.flags.suggestDomain&&this.suggestDomainService.displayPopupWhenReady(),this.loadStoryMetadata(e,t).then(function(){return i.startLoadingPreviewFromCache(e),i.loadStory(e)}).then(function(e){return i.flags.headlessApi&&e.isDraft&&0===e.revision?e.headlessFirstSave().then(function(){return e}):e}).then(function(e){return i.initWizardService(e,t)}).then(function(){i.backwardCompatibility(),i.undoRedo.captureInitialState(),i.handleDeepLink()})},e.prototype.startLoadingPreviewFromCache=function(e){if(this.flags.loadPreviewAsap&&this.flags.consumerMode){var t=o.localStorageUtils.createStoryIdsKey(e),i=this.localStorageService.get(t);if(i)return this.wizardService.loadStoryUrl(i.siteId,i.metaSiteId)}},e.prototype.setDefaultBIValues=function(e){var t=e.split(/:/);this.consumerBiLoggerHelpers.setDefaultValue("instanceId",t[0]),this.consumerBiLoggerHelpers.setDefaultValue("metaSiteId",t[1]),this.consumerBiLoggerHelpers.setDefaultValue("industryId",null),this.consumerBiLoggerHelpers.setDefaultValue("structureId",null)},e.prototype.loadStoryMetadata=function(e,t){var i=this;return this.initBI.reportStart({name:n.BILoadStorySteps.GetMetadata,parent:n.BIInitSteps.InitStory,init:!0}),this.metaDataService.getMetadata(e,function(e){return i.applicationState.setStoryMetadata(e)}).then(function(){return i.initBI.reportEnd({name:n.BILoadStorySteps.GetMetadata,parent:n.BIInitSteps.InitStory,init:!0})})},e.prototype.loadStory=function(e){var t=this;return this.initBI.reportStart({name:n.BILoadStorySteps.FetchStory,parent:n.BIInitSteps.InitStory,init:!0}),this.Story.find(e).then(function(e){return t.initBI.reportEnd({name:n.BILoadStorySteps.FetchStory,parent:n.BIInitSteps.InitStory,init:!0}),t.storyServices.calculateMaxPageAndNodeId(e),e})},e.prototype.initWizardService=function(e,t){var i=this;return this.initBI.reportStart({name:n.BILoadStorySteps.InitCoreA,parent:n.BIInitSteps.InitStory,init:!0}),this.wizardService.init(e).then(function(){return i.$window.signalApiLoaded&&i.$window.signalApiLoaded(),i.initBI.reportEnd({name:n.BILoadStorySteps.InitCoreA,parent:n.BIInitSteps.InitStory,init:!0})})},e.prototype.backwardCompatibility=function(){this.initBI.reportStart({name:n.BILoadStorySteps.BackwardCompatibility,parent:n.BIInitSteps.InitStory,init:!0});var e=this.modelTree.getPagesNodes();r.find(e,{alias:void 0})&&r.each(e,function(e){e.alias=r.get(e,["contentElement","values","pageTitleSEO","value"])}),this.patchIndustryIds(),this.initBI.reportEnd({name:n.BILoadStorySteps.BackwardCompatibility,parent:n.BIInitSteps.InitStory,init:!0})},e.prototype.patchIndustryIds=function(){var e=this,t=r.find([{oldId:"b0a520919b99728bae200018",newId:"c4e29ccec1b3103f4caa52f0"},{oldId:"3a6327d9c3946eefcfe6d513",newId:"a16519bdf44907db3cd5a989"},{oldId:"f19b3125657d6a267d2c47d8",newId:"88b56978690cff09a18247c1"},{oldId:"190a5ffad4f67ad6e22ad08d",newId:"f540e5a65f637e7cd869f5b9"}],function(t){return t.oldId===e.storyServices.story.industryId});t&&(this.storyServices.story.industryId=t.newId)},e.prototype.handleDeepLink=function(){if(this.flags.deepLink&&this.tpaService){this.initBI.reportStart({name:n.BILoadStorySteps.DeepLink,parent:n.BIInitSteps.InitStory,init:!0});var e=this.applicationParameters.tpaTypes[this.flags.deepLink];if(e&&this.tpaService.isTpaAdded(e.type)){var t=this.pagesManager.getPageNodeIdBySantaPageId(this.tpaService.getPageIdByTpaType(e.type));t&&(this.storyServices.story.selectedPage=t,this.pagesManager.goToPage(t))}this.initBI.reportEnd({name:n.BILoadStorySteps.DeepLink,parent:n.BIInitSteps.InitStory,init:!0})}},e}();t.InitExistingStory=a,angular.module("siteGeneratorStaticsConsumerAppInternal").service("initExistingStory",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i(6),r=i(176),a=i(4),s=i(2),l=i(1),c=i(12),d=i(178),u=i(245),p=i(246),g=i(0),h=i(280).create;!function(e){e[e.success=0]="success",e[e.fail=1]="fail",e[e.userError=2]="userError"}(n||(n={}));var m=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H,O,_,D,$,N,x,R,F,U,G,j,V,W,z,K,q,Y,X,Q,J,Z,ee,te,ie){var ne=this;this.consumerMenu=e,this.sendSiteSourcesToWixWiz=t,this.metaDataService=i,this.applicationState=n,this.storyServices=o,this.$stateParams=r,this.$state=a,this.wizardService=s,this.flags=l,this.undoRedo=c,this.$q=d,this.$location=u,this.tpaPostMessageService=p,this.tpaPreviewMessageService=g,this.documentServicesPlatformSupport=m,this.consumerBiLogger=f,this.consumerBiLoggerHelpers=v,this.saleService=S,this.initContent=y,this.initBI=T,this.initSetup=b,this.initSiteData=I,this.initNewStory=P,this.initExistingStory=M,this.initDebugPerformance=E,this.introManager=w,this.modelTree=C,this.BackendStory=A,this.assistantManager=L,this.assistantUtils=B,this.assistantTaskFetcher=k,this.$log=H,this.$timeout=O,this.$translate=_,this.notification=D,this.sectionManager=$,this.siteState=N,this.siteInit=x,this.$window=R,this.spinnerService=F,this.healthCheck=G,this.exitNotification=j,this.mergedHeaderValidator=V,this.$injector=W,this.metaSiteApi=z,this.wizWebsite=K,this.clientTopology=q,this.FONT_TO_KIT=Y,this.paletteGenerator=X,this.corePublic=Q,this.logoExtractionPopupService=J,this.importSiteContent=Z,this.anonService=ee,this.consumerDialogs=te,this.obFedops=ie,this.spinnerWasDisabled=!1,this.onIntroStepChanged=function(e,t,i,n){if("next"===i)if(ne.reportIntroFedops(n,t),"before"===n){switch(e.name){case intro.INTRO_STATES.INTRO_EDIT_USER:ne.flags.introWebsiteAddressField&&ne.initSiteData.updateIntroDataByUserValues(e.userValues)}t===intro.INTRO_FINISHED&&ne.applicationState.goToBuilder()}else if("after"===n)switch(e.name){case intro.INTRO_STATES.INTRO_CATEGORY_SEARCH:ne.initContent.fromContentId(e.category);break;case intro.INTRO_STATES.INTRO_BUSINESS_NAME:var o=ne.introManager.getStoryId();ne.executeWithoutSpinner(function(){return ne.setIsNewSite(!0),ne.getStory(o,!0).then(function(){ne.introManager.data.serviceOffer&&(ne.storyServices.story.selectedOffers=ne.introManager.data.serviceOffer)})})}},this.stopListenToIntro=U.listenStepChange(this.onIntroStepChanged),this.loadedPromise=d(function(e){ne.resolveLoadedPromise=e}),this.fedopsLogger=h("adi-intro"),this.initTemplateMode()}return e.$inject=["consumerMenu","sendSiteSourcesToWixWiz","metaDataService","applicationState","storyServices","$stateParams","$state","wizardService","flags","undoRedo","$q","$location","tpaPostMessageService","tpaPreviewMessageService","documentServicesPlatformSupport","consumerBiLogger","consumerBiLoggerHelpers","saleService","initContent","initBI","initSetup","initSiteData","initNewStory","initExistingStory","initDebugPerformance","introManager","modelTree","BackendStory","assistantManager","assistantUtils","assistantTaskFetcher","$log","$timeout","$translate","notification","sectionManager","siteState","siteInit","$window","spinnerService","introEventsEmitter","healthCheck","exitNotification","mergedHeaderValidator","$injector","metaSiteApi","wizWebsite","clientTopology","FONT_TO_KIT","paletteGenerator","corePublic","logoExtractionPopupService","importSiteContent","anonService","consumerDialogs","obFedops"],e.prototype.getLoadingData=function(){var e=this,t=this.storyServices.story&&this.storyServices.story.selectedPage;if(!t)return"";var i=this.modelTree.getPagesNodes(),n=0,o=0,r=0,a=0;g.each(i,function(i){var s=g.reject(i.children,"userHidden"),l=g.filter(s,function(e){return!e.isTpa&&!e.isTpaWidget});o+=(e.flags.lodash4?g.strictSumBy:g[String("sum")])(l,function(e){return e.children.length||1}),n+=s.length-l.length,i.id===t&&(r=n,a=o)});var s=g.filter(i,"tpaExtraPage").length,l=g.filter(i,"tpaSection").length,c=i.length;return"totalPages="+c+",regularPages="+(c-s-l)+",tpaPages="+l+",tpaExtraPages="+s+",tpaSections="+n+",sections="+o+",currentTpaSections="+r+",currentSections="+a},e.prototype.loaded=function(){return this.loadedPromise},e.prototype.initByHeadless=function(e){return this.introManager.data=this.introManager.data||{},g.assign(this.introManager.data,e),this.storyServices.story.industryId=this.introManager.data.category.industryId,this.storyServices.story.structureId=this.introManager.data.category.structureId,this.storyServices.story.selectedOffers=this.introManager.data.serviceOffer,this.init(!0)},e.prototype.headlessWarmUpInit=function(){var e=this.$stateParams.storyId;return this.setIsNewSite(!0),this.getStory(e,!0)},e.prototype.init=function(e){var t=this;if(void 0===e&&(e=!1),this.initPromise)return this.initPromise;this.spinnerWasDisabled&&this.spinnerService.enable();var i=this.$stateParams.storyId;return this.flags.headlessApi?(console.log("Headless is running!!! Story ID: "+i),this.getStory(i,!1).then(function(){return t.storyServices.story.isDraft&&!e?t.headlessWarmUpInit():t.initInternal(!t.storyServices.story.isDraft&&i)}).catch(function(i){throw t.consumerBiLogger.fatal(l.BIErrorCodes.HeadlessInitFailed,"Headless init failed (calledByHeadless="+e+"): "+(i&&i.stack?i.stack:JSON.stringify(i))),t.initBI.reportError(i,t.isNewSite),i})):(this.flags.loadPreviewAsap&&this.initExistingStory.startLoadingPreviewFromCache(i),this.initInternal(i))},e.prototype.initInternal=function(e){var t=this,i=this.flags.silentMode;return this.flags.headlessApi&&this.undoRedo.startSlowAutoSave(),this.preInit(e),this.initPromise=this.getStory(e,!1).then(function(){return t.initAutoSaveMode(),t.ensureStoryIdParam(),t.maybeStartAssistant(),t.initCoreWaitForChanges()}).then(function(){return t.flags.waas&&t.setSiteLogoColorsFromExtra()}).then(function(){return t.wizWebsite.isConvertingSite()&&t.isNewSite&&t.wizWebsite.waitForSiteConverter(t.newStoryName).catch(function(e){return t.$log.error("stopping to wait for site converter",e)})}).then(function(){return(t.flags.wixEvents||t.flags.headlessApi)&&t.fastGetMetadataForLoadedStory(t.$stateParams.storyId)}).then(function(){return t.flags.noTour&&t.flags.membersArea&&t.initDSRelated(),t.initSiteData.init(t.isNewSite,t.newStoryName)}).then(function(){return t.wizWebsite.isConvertingSite()&&t.wizWebsite.siteFinishingTouches(),t.markStoryAsCreated()}).then(function(){t.setSiteProperties(),t.flags.noTour&&t.flags.membersArea||t.initDSRelated(),t.applicationState.init()}).then(function(){return!t.flags.wixEvents&&!t.flags.headlessApi&&t.fastGetMetadataForLoadedStory(e)}).then(function(){return t.isNewSite&&t.sendSiteSourcesToWixWiz(t.BackendStory.parseId(t.storyServices.story.id),t.searchUrls)}).then(function(){return e&&t.sectionManager.recalculatePagesWithRemovedNodes()}).then(function(){return t.consumerMenu.calcMenuAnchors(),g.set(t.storyServices,"story.headlessSiteBuildDone",!0),t.healthCheck.validateAndSave()}).then(function(){t.flags.perfMoveInitAssistantToPostInit||t.$injector.get("smartAssistState").init();t.reportLoadingComplete(n.success);var e=t.wizWebsite.isConvertingSite();(e||t.flags.textManager)&&t.isNewSite&&t.saveImportedSite(e),t.flags.silentMode=i,t.flags.emptyPage&&t.introManager.reset()}).catch(function(e){t.$log.error(e.stack),t.handleLoadingError(e);var i=p.userErrorDetector.isUserError(e)?n.userError:n.fail;return t.reportLoadingComplete(i),t.$q.reject("init failed")}).then(function(){t.resolveLoadedPromise(),s.PubSub.fire(s.events.SITE_IS_LOADED)}),this.initPromise},e.prototype.setSiteLogoColorsFromExtra=function(){var e=g.get(this.introManager.data,"extra.colors");if(e){var t=e[0],i=e[1],n=this.paletteGenerator.calculatePalletWithSixColors({mainColor:t,black:ThemeChooser.COLORS.BLACK,white:ThemeChooser.COLORS.WHITE},i,0),o=this.$injector.get("colorationUtils");return o.resetStoryColoration(),o.setLogoColors({colors:n.colors,mode:ThemeChooser.COLORATION_METHOD_TYPE.light,level:ThemeChooser.COLORATION_LEVEL.colorful}),o.useLogoColors({overrideMainColor:!0,setColorationMode:!0})}},e.prototype.setStoryThemeKitByIntroData=function(){var e=g.get(this.introManager.data,"selectedKit.id");e&&this.setStoryThemeKitById(e)},e.prototype.headlessPrepareStoryStyleOfIntroExtra=function(){this.flags.headlessApi&&g.has(this.introManager.data,"extra")&&this.setStoryThemeKitByFont()},e.prototype.setStoryThemeKitByFont=function(){var e=this.FONT_TO_KIT[g.get(this.introManager.data,"extra.fonts.name")];e&&this.setStoryThemeKitById(e)},e.prototype.setStoryThemeKitById=function(e){this.storyServices.story.selectedStyle||(this.storyServices.story.selectedStyle={}),this.storyServices.story.selectedStyle.mainKit=e},e.prototype.saveImportedSite=function(e){this.importSiteContent.saveImportedSite(this.siteState.getUserId(),this.introManager.data,e)},e.prototype.isBuilderValidState=function(){var e=this.$location.search();return this.$stateParams.storyId||this.initContent.hasIntroData||g.has(e,"industryId")&&g.has(e,"structureId")},e.prototype.initTemplateMode=function(){var e=this;this.flags.templateSite=!!this.$window.isTemplate,this.flags.templateSite&&(this.flags.changeBusinessDetails=!0,this.flags.removeSpinnerAsStageReady=!0,s.PubSub.subscribeOnce(s.events.PREVIEW_READY,function(){e.consumerDialogs.showDialog(c.ConsumerDialogTypes.CHANGE_BUSINESS_DETAILS_POPUP),e.consumerBiLogger.builder.introQuestionsDialogPageView("create from template","category-search")}))},e.prototype.setIsNewSite=function(e){this.isNewSite=e,this.initBI.isNewSite=this.isNewSite,this.consumerBiLoggerHelpers.setDefaultValue("isNewSite",this.isNewSite?"true":"false")},e.prototype.setSiteProperties=function(){var e=this;this.isNewSite&&this.introManager.data&&(this.initBI.reportStart({name:l.BICreateStorySteps.SetSiteProperties,parent:l.BIInitSteps.InitStory,init:!0}),this.metaSiteApi.setSiteProperties(this.storyServices.metaSiteId,this.introManager.siteProperties).then(function(){e.initBI.reportEnd({name:l.BICreateStorySteps.SetSiteProperties,parent:l.BIInitSteps.InitStory,init:!0})}).catch(function(t){var i=t.stack?t.stack:t;e.consumerBiLogger.err(l.BIErrorCodes.InitSetPropertiesFailed,"failed to set site properties: "+i+" \n "+JSON.stringify(e.introManager.siteProperties))}))},e.prototype.preInitReportEnd=function(){var e=Math.round(r.MonitoringSteps.getTimestamp()-this.$window.loadStartTime);this.consumerBiLogger.builder.loadingPhaseInInitComplete(e,"pre init","")},e.prototype.preInit=function(e){this.setIsNewSite(!e),this.isNewSite?(this.consumerBiLogger.builder.firstTimeStart("intro"),this.initBI.reportStart({name:"init"})):this.flags.headlessApi&&(this.consumerBiLogger.builder.existingSiteStart("home"),this.initBI.reportStart({name:"init"})),this.initSetup.setup(this.isNewSite),this.isNewSite||this.preInitReportEnd(),this.searchUrls=this.introManager.data&&this.introManager.data.searchUrls,this.isNewSite||this.startPreloader()},e.prototype.startPreloader=function(){this.flags.newPreloader&&(d.preloaderService.start(),this.spinnerService.disable())},e.prototype.stopPreloader=function(){this.flags.newPreloader&&(this.spinnerService.enable(),d.preloaderService.stop())},e.prototype.maybeStartAssistant=function(){if(this.flags.reduceErrors&&(this.wizardService.activateWhenWelcomeEnds=!1),this.flags.emptyPage)return this.assistantManager.setDockStatus(a.AssistantDockStatus.Stopped),$("builder").addClass("-without-overlay"),void this.assistantManager.openMenu(l.BIOrigins.OnSiteStart);this.flags.silentMode=!0,this.initAssistant()},e.prototype.initCoreWaitForChanges=function(){var e=this;return this.initBI.reportStart({name:l.BIInitSteps.InitCoreB,init:!0}),this.flags.waas&&this.headlessPrepareStoryStyleOfIntroExtra(),this.flags.medBetterBuildTime&&this.setStoryThemeKitByIntroData(),this.wizardService.initAfterWaitForChanges(this.storyServices.story,this.isNewSite).then(function(){return e.initBI.reportEnd({name:l.BIInitSteps.InitCoreB,init:!0})})},e.prototype.markStoryAsCreated=function(){var e=this;if(this.storyServices.story.isDraft&&!this.flags.templateSite)return this.initBI.reportStart({name:l.BIInitSteps.MarkCreated,init:!0}),this.storyServices.story.markCreated(this.flags.headlessApi&&this.siteState.getSiteId()).then(function(){e.storyServices.story.isDraft=!1,e.initBI.reportEnd({name:l.BIInitSteps.MarkCreated,init:!0})})},e.prototype.initDSRelated=function(){this.documentServicesPlatformSupport.init(),this.tpaPostMessageService.init(),this.tpaPreviewMessageService.init()},e.prototype.asyncLoadCampaign=function(){this.saleService.loadCampaign()},e.prototype.listenToRenderChanges=function(){var e=this;return this.initBI.reportStart({name:l.BIInitSteps.ListenToSiteChanges,init:!0}),this.wizardService.listenToRenderChanges().then(function(){return e.initBI.reportEnd({name:l.BIInitSteps.ListenToSiteChanges,init:!0})})},e.prototype.initMediaManager=function(){if(this.$window.MediaManagerApi){var e=this.$window.MediaManagerApi.create({version:this.flags.MediaManager3||this.flags.MediaManager3Migrate?"G6":"G5",languageCode:this.clientTopology.locale,siteMediaToken:this.clientTopology.siteMediaToken,origin:this.$window.MediaManagerApi.origins.ADI});e.warmup(),this.$window.MediaManager=e}},e.prototype.initAutoSaveMode=function(){(this.applicationState.isSupportStaffEditing(!0)||this.flags.disableAutoSave)&&this.undoRedo.delayAndDisableAutoSave()},e.prototype.fastGetMetadataForLoadedStory=function(e){var t=this;if(e){var i=this.metaDataService.getMetadata(e,this.applicationState.setStoryMetadata.bind(this.applicationState)).then(function(){if(!t.flags.perfMoveContentInitToPostInit)return t.initBI.reportStart({name:l.BIInitSteps.InitContent,init:!0}),t.initContent.fromStory(t.storyServices.story)}).then(function(){t.flags.perfMoveContentInitToPostInit||t.initBI.reportEnd({name:l.BIInitSteps.InitContent,init:!0})});return this.flags.headlessApi?i:void 0}},e.prototype.getStory=function(e,t){var i=this;return this.storyPromise?this.storyPromise:(this.initBI.reportStart({name:l.BIInitSteps.InitStory,init:!0}),this.storyPromise=e?this.initExistingStory.fromId(e,t):this.initNewStory.createStory(t).then(function(e){i.newStoryName=e;var t=i.storyServices.story.id;i.introManager.setStoryId(t),i.anonService.addToLocalStorage(t)}),this.storyPromise=this.storyPromise.then(function(){s.PubSub.fire(s.events.STORY_READY),i.initBI.reportEnd({name:l.BIInitSteps.InitStory,init:!0})}),this.storyPromise)},e.prototype.ensureStoryIdParam=function(){!this.$stateParams.storyId&&this.storyServices.story.id&&this.$state.go(o.STATES.BUILDER_STORY,{storyId:this.storyServices.story.id})},e.prototype.reportLoadingComplete=function(e){this.siteInit.finishLoading();var t=this.$window.measureTimeInTab,i=e===n.success?"true":"false";if(this.isNewSite)this.consumerBiLogger.builder.firstTimeComplete(i,t&&t.end(),"");else{var o=u.storySizeFetcher.fetch()||{storySize:null,storyGzipSize:null},r=o.storySize,a=o.storyGzipSize;this.consumerBiLogger.builder.existingSiteComplete(i,t&&t.end(),this.getLoadingData(),a,r),this.obFedops.appLoaded()}e!==n.success&&e!==n.userError||this.initBI.reportEnd({name:"init"}),this.flags.performanceTest&&this.consumerBiLogger.automation.loadTestCompleted(this.flags.performanceTest),this.flags.debugPerformance&&this.initDebugPerformance.end()},e.prototype.handleLoadingError=function(e){e.handledEvent||(this.consumerBiLogger.builder.loadingError(e&&e.stack?e.stack:JSON.stringify(e)),this.initBI.reportError(e,this.isNewSite),this.showError(e),this.redirectOnError())},e.prototype.showError=function(e){if(!this.applicationState.isSilent()){var t=e&&403===e.status?"init.error.access":"init.error.load",i=this.$translate.instant(t),n=this.$translate.instant("init.error.redirecting",{error:i});this.notification.show(n)}},e.prototype.redirectOnError=function(){var e=this;this.$timeout(function(){location&&(e.introManager.reset(),e.flags.debug||window.coreDebug?confirm("Debug:: should redirect site due to error?")&&(location.href=""+location.origin+location.pathname+"?referral=invalid_story&vertical=invalid_story#!/intro"):(e.exitNotification.off(),location.href=""+location.origin+location.pathname+"?referral=invalid_story&vertical=invalid_story#!/intro"))},3e3)},e.prototype.isPreviewMode=function(){return this.applicationState.isPreviewDisplay()},e.prototype.initAssistant=function(){if(this.isNewSite)return this.initAssistantForNewSite();this.flags.perfMoveInitAssistantToPostInit||this.initAssistantForExistingSite()},e.prototype.initAssistantForNewSite=function(){this.assistantManager.setDockStatus(a.AssistantDockStatus.Stopped),this.assistantUtils.convertLocalStorageToursToTasks();var e=this.assistantTaskFetcher.getTask("welcomeTask");return this.$timeout(function(){$("builder").addClass("-without-overlay")},2e3),this.flags.reduceErrors&&(this.wizardService.activateWhenWelcomeEnds=!0),this.assistantManager.startTask(e)},e.prototype.initAssistantForExistingSite=function(){this.assistantTaskFetcher.applySavedTasks(this.assistantUtils.getTaskDataFromStorage()),this.isPreviewMode()?this.assistantManager.setDockStatus(a.AssistantDockStatus.Hidden):this.assistantManager.setDockStatus(a.AssistantDockStatus.Stopped),$("builder").addClass("-without-overlay")},e.prototype.reportIntroFedops=function(e,t){var i=t.replace("intro.",""),n="before"===e?"interactionStarted":"interactionEnded";this.fedopsLogger[n](i)},e.prototype.executeWithoutSpinner=function(e){var t=this;return this.spinnerService.disable(),this.spinnerWasDisabled=!0,this.$q.resolve().then(function(){return e()}).then(function(e){return t.spinnerService.enable(),t.spinnerWasDisabled=!1,e})},e}();t.InitService=m,angular.module("siteGeneratorStaticsConsumerAppInternal").service("initService",m)},function(e,t,i){"use strict";var n=function(){function e(e){this.$window=e,this.$window.ADIPerformance=null}return e.$inject=["$window"],e.prototype.start=function(){this.$window.ADIPerformance={start:Date.now(),end:0,total:0},this.sendMessage("init-perf-start")},e.prototype.end=function(){if(!this.$window.ADIPerformance)throw"start was never called";this.$window.ADIPerformance.end=Date.now(),this.$window.ADIPerformance.total=this.$window.ADIPerformance.end-this.$window.ADIPerformance.start,this.sendMessage("init-perf-end")},e.prototype.report=function(){console.log("=== ADI performance report ==="),console.log("start: "+this.$window.ADIPerformance.start),console.log("end: "+this.$window.ADIPerformance.end),console.log("time: "+this.$window.ADIPerformance.total+"ms")},e.prototype.sendMessage=function(e){this.$window.postMessage({name:e,data:this.$window.ADIPerformance},"*")},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initDebugPerformance",n)},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(18),r=i(179),a=i(1),s=i(0),l=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H,O,_){this.flags=e,this.$q=t,this.$translate=i,this.siteState=n,this.menuService=o,this.pagesManager=r,this.modelTree=a,this.spinnerService=s,this.consumerMenu=l,this.layoutSolver=c,this.applicationState=d,this.storyServices=u,this.undoRedo=p,this.assistantUtils=g,this.introManager=h,this.contentSource=m,this.contentManager=f,this.wizContentManager=v,this.wizWebsite=S,this.tpaService=y,this.consumerBiLogger=T,this.applicationParameters=b,this.sectionManager=I,this.initTPA=P,this.wizardService=M,this.consumerPublishService=E,this.notification=w,this.initBI=C,this.setTpaContentService=A,this.siteBuilderPages=L,this.mergedHeaderService=B,this.backgroundScrollService=k,this.$injector=H,this.headerFooterDecorator=O,this.youtubeChannelService=_}return e.$inject=["flags","$q","$translate","siteState","menuService","pagesManager","modelTree","spinnerService","consumerMenu","layoutSolver","applicationState","storyServices","undoRedo","assistantUtils","introManager","contentSource","contentManager","wizContentManager","wizWebsite","tpaService","consumerBiLogger","applicationParameters","sectionManager","initTPA","wizardService","consumerPublishService","notification","initBI","setTpaContentService","siteBuilderPages","mergedHeaderService","backgroundScrollService","$injector","headerFooterDecorator","youtubeChannelService"],e.prototype.constructAnyPage=function(e,t,i){var n=this;if(void 0===t&&(t=!0),void 0===i&&(i=!1),!e)return this.$q.when();var o=this.modelTree.getPageNodeById(e);return this.spinnerService.setWithAnimation(!t),this.spinnerService.waitForMe("silentWholePage"),this.siteState.waitForChanges().then(function(){return n.sectionManager.makeSectionsInGeneralPage(o,t,i)}).then(function(){return n.consumerMenu.calcMenuAnchors(),n.layoutSolver.onNodeChanged()}).then(function(){return n.undoRedo.captureOperation()}).then(function(){n.wizWebsite.isConvertingSite()&&n.wizWebsite.setFinishedConvertingSite()}).then(function(){return n.spinnerService.imDone("silentWholePage")})},e.prototype.tryToMergeHeader=function(e){var t=this;if(this.flags.mergedHeaderPhase2){var i=this.$injector.get("sectionMediaSetter");(this.flags.dontValidateMergedHeader?i.setOption(e.children[1],cc.MediaPreviewType.SingleImage,o.MediaSizeOptions.Background):this.mergedHeaderService.isHeaderMergeable(e,{validateDarkHeader:!1,validateHeaderSolution:!1})?Promise.resolve():Promise.reject("header is not mergeable")).then(function(){t.headerFooterDecorator.setHeaderMerged(!0,e)}).catch(function(e){return console.log(e)})}},e.prototype.getAdditionalPages=function(e){if(this.wizWebsite.isConvertingSite())return[this.wizWebsite.createContactPage()];var t=this.storyServices.story.selectedOffers.find(function(e){return"Bookings"===e.type}),i=t&&t.checked,n=!!e.find(function(e){return"Service"===e.ceType&&"none"!==e.rawSectionBrief.syncWithBooking});if(this.flags.fullSiteBuilder){var o=this.sectionManager.utilCreateSelectedOffersMap();return this.contentManager.suggestedPages(o[this.applicationParameters.tpaTypes.Stores.type],!1).pageSuggestions.filter(function(e){return e.isRecommendedPage&&!function(e){return i&&n&&"Service"===e.ceType}(e)})}return[]},e.prototype.listenToRenderChanges=function(){var e=this;return this.initBI.reportStart({name:a.BIInitSteps.ListenToSiteChanges,init:!0}),this.wizardService.listenToRenderChanges().then(function(){return e.initBI.reportEnd({name:a.BIInitSteps.ListenToSiteChanges,init:!0})})},e.prototype.constructAnyHomePage=function(){var e,t,i=this;if(this.flags.emptyPage)return this.layoutSolver.onNodeChanged().then(function(){return i.fullSave()});this.applicationState.setPrettyPageMode(r.ePrettyPageRulesMode.ruleOnNoCaching),this.spinnerService.setWithAnimation(!1);var o=function(e){return i.notification.showNextStep(e)};return this.siteState.waitForChanges().then(function(){i.spinnerService.waitForMe("silentHomePage");var r=i.initTPA.tpaTypesToAdd(),a=i.applicationParameters.tpaTypes.Blog.type,l=i.applicationParameters.tpaTypes.Blog2.type,c=!1;if(s(r).includes(a)?e=i.assistantUtils.shouldAutoProvisionTPAOfType(a):i.flags.blog2&&s(r).includes(l)&&(c=!0,e=i.assistantUtils.shouldAutoProvisionTPAOfType(l)),t=i.sectionManager.getHomePageSections(e),c){var d=t.findIndex(function(e){return"Blog"===e.id});if(d>=0){var u=t.find(function(e){return"Blog"===e.id});u=n({},u,{ceType:"Blog2",id:"Blog2"}),t[d]=u}}var p=i.flags.fullSiteBuilder?i.getAdditionalPages(t):i.sectionManager.getAdditionalPages(),g=i.contentManager.isSocialImageEnabled(),h=3+r.length+t.length+p.length+(g?1:0),m=i.wizWebsite.isConvertingSite()?i.wizWebsite.siteConverterProgressSteps.length+2:h;return i.notification.initSpinnerSteps(m),o(""),i.initTPA.fromTypes(r,o).then(function(){var e=i.modelTree.getPageNodeById(i.storyServices.story.selectedPage),n=i.fixMenuItemsForBlog(e);return i.sectionManager.buildSite(e,n,t,p,o)})}).then(function(){return i.flags.fullSiteBuilder?i.siteBuilderPages.sortMenuItems(e):i.consumerMenu.calcMenuAnchors(),i.flags.presetSettings&&i.backgroundScrollService.setFirstHomeSectionDefault(),i.tryToMergeHeader(i.modelTree.getPageNodeById(i.modelTree.homePageId)),i.layoutSolver.onNodeChanged()}).then(function(){return i.fullSave(),i.reportTPAsForProvisioning()}).then(function(){return o(i.$translate.instant("builder.progress-bar.step-message.render-mobile-pages")),i.applicationState.goToMobilePage(i.storyServices.story.selectedPage)}).then(function(){return i.undoRedo.captureOperation()}).then(function(){return i.applicationState.disableMobileEditor()}).then(function(){i.notification.hide(),i.spinnerService.imDone("silentHomePage"),i.applicationState.setPrettyPageMode(r.ePrettyPageRulesMode.rulesOff)}).then(function(){if(i.wizWebsite.isConvertingSite()&&(i.wizWebsite.setPrivateFolderMediaId(),i.wizWebsite.setFinishedConvertingSite()),i.flags.newApiBookings&&i.setTpaContentService.syncBookingsIfAvailable(),i.flags.youTubeChannel&&i.handleYoutubeChannel(t),i.flags.reduceErrors&&i.wizardService.activateWhenWelcomeEnds)return i.listenToRenderChanges()})},e.prototype.handleYoutubeChannel=function(e){var t=e.find(function(e){return e.ceType===core.TpaWidgetTypes.Video_Widget});t&&this.youtubeChannelService.handleYoutubeChannel(t)},e.prototype.fixMenuItemsForBlog=function(e){if(this.assistantUtils.shouldAutoProvisionTPAOfType("Blog")){if(this.pagesManager.renamePage(e.id,this.$translate.instant("modelTree.homepage")),this.menuService.menuItems.length>1){var t=this.menuService.menuItems.splice(this.menuService.menuItems.length-1,1)[0];this.menuService.menuItems.splice(0,0,t),this.menuService.refresh()}return e.children.find(function(e){return"Blog"===e.contentElementType||"Blog2"===e.contentElementType})}return null},e.prototype.fullSave=function(){return this.tpaService.isTpaAdded(this.applicationParameters.tpaTypes.Blog.type)||this.tpaService.isTpaAdded(this.applicationParameters.tpaTypes.Blog2.type)||this.tpaService.isTpaAdded(this.applicationParameters.tpaTypes.Bookings.type)||this.tpaService.isTpaAdded(this.applicationParameters.tpaTypes.Stores.type)?this.consumerPublishService.saveStory(void 0,void 0,!0):this.storyServices.story.save()},e.prototype.reportTPAsForProvisioning=function(){var e=this;return this.siteState.waitForChanges().then(function(){var t={};e.modelTree.traverse(function(i){if(i.isTpaNode()){var n=e.tpaService.getNaiveType(i.contentElementType),o=e.tpaService.getAppIdByType(n),r=e.tpaService.getInstanceId(i);if(!o||!r)return;t[o+r]||(e.provisionBI(o,r),t[o+r]=!0)}})})},e.prototype.provisionBI=function(e,t){this.consumerBiLogger.provisioning.tpaIntent(t,e,"AUTO_ADD_APP","ADI")},e}();t.SilentPageBuilder=l,angular.module("siteGeneratorStaticsConsumerAppInternal").service("silentPageBuilder",l)},function(e,t){angular.module("siteGeneratorStaticsConsumerAppInternal").factory("sendSiteSourcesToWixWiz",["$http",function(e){return function(t,i){var n={siteid:t.instanceId,metasiteid:t.metaSiteId,urls:i},o=/^https:\/\/maps\.googleapis\.com\/maps\/api\/place\/details\/json/;if(n.urls&&n.urls.some(function(e){return o.test(e)}))return e.post("/_api/any2wix-server/savesitesources",n)}}])},function(e,t,i){"use strict";var n;!function(e){e[e.None=0]="None",e[e.Reference=1]="Reference",e[e.Visibility=2]="Visibility"}(n||(n={}));var o=function(){function e(e,t,i,n){this.modelTree=e,this.introManager=t,this.applicationParameters=i,this.flags=n}return e.$inject=["modelTree","introManager","applicationParameters","flags"],e.prototype.updateReferenceFieldsVisibility=function(e,t,i,n,o){n[e]=t,this.modelTree.updateReferenceFieldsVisibility(i,e,o)},e.prototype.updateFieldVisibility=function(e,t,i,o,r){i.argsMatchingPolicy[e]=t,o===n.Visibility&&this.modelTree.updateFieldsVisibility(i,null,e,t,r)},e.prototype.getMaskType=function(e){var t=e&&"GeneralDescription"===e.getContentElementType(),i=t&&"footer"!==e.containerPageId,n=t&&"footer"===e.containerPageId,o=e&&e.contentElementType;return i?o="Header":n&&(o="Footer"),o},e.prototype.update=function(e){var t=this,i=this.getMaskType(e),o=e.getReferenceFields();this.maskConfiguration[i].fields.forEach(function(i){i.typeUpdate===n.Reference?t.updateReferenceFieldsVisibility(i.key,i.condition(),e,o,i.forceDefaultValue):t.updateFieldVisibility(i.key,i.condition(),e,i.typeUpdate,i.forceDefaultValue)})},Object.defineProperty(e.prototype,"maskConfiguration",{get:function(){var e=this,t={Header:{fields:[{key:"MainEmail",condition:function(){return!1},typeUpdate:n.Visibility,forceDefaultValue:!1},{key:"Contact.phone number",condition:function(){return!1},typeUpdate:n.Reference,forceDefaultValue:!0},{key:"Logo",condition:function(){return e.introManager.isLogoExists()},typeUpdate:n.None},{key:"BusinessName",condition:function(){return!e.introManager.isLogoExists()},typeUpdate:n.Visibility,forceDefaultValue:!1},{key:"BusinessTagline",condition:function(){return!1},typeUpdate:n.None},{key:"Social.SocialButtons",condition:function(){return e.introManager.isSocialLinksExists()},typeUpdate:n.Reference,forceDefaultValue:!0}]},Footer:{fields:[{key:"Contact.fax",condition:function(){return!1},typeUpdate:n.Reference,forceDefaultValue:!1},{key:"MainEmail",condition:function(){return!1},typeUpdate:n.Visibility,forceDefaultValue:!1},{key:"Contact.phone number",condition:function(){return e.introManager.isPhoneExists()},typeUpdate:n.Reference,forceDefaultValue:!1},{key:"Logo",condition:function(){return!1},typeUpdate:n.None},{key:"BusinessName",condition:function(){return!1},typeUpdate:n.Visibility,forceDefaultValue:!1},{key:"BusinessTagline",condition:function(){return!1},typeUpdate:n.None},{key:"Social.SocialButtons",condition:function(){return!e.introManager.isSocialLinksExists()},typeUpdate:n.Reference,forceDefaultValue:!0},{key:"CopyrightMessage",condition:function(){return!0},typeUpdate:n.Visibility,forceDefaultValue:!0},{key:"Contact.address for display",condition:function(){return!1},typeUpdate:n.Reference,forceDefaultValue:!1}]},Contact:{fields:[{key:"Social.SocialButtons",condition:function(){return!0},typeUpdate:n.Reference,forceDefaultValue:!0},{key:"address for display",condition:function(){return!0},typeUpdate:n.Visibility},{key:"address for google map",condition:function(){return!0},typeUpdate:n.Visibility}]}};return this.flags.subscribeInFooter&&t.Footer.fields.push({key:"Subscribe",condition:function(){if(!e.introManager.data||!e.introManager.data.serviceOffer)return!1;var t=e.introManager.data.serviceOffer.find(function(t){return t.type===e.applicationParameters.tpaTypes.GetSubscribers.type});return!!t&&t.checked},typeUpdate:n.Visibility,forceDefaultValue:!1}),t},enumerable:!0,configurable:!0}),e}();angular.module("siteGeneratorIntroInternal").service("fieldsMasks",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(70),o=i(0),r=function(){function e(e,t,i,o){this.socialLinkManager=e,this.introDataFormatter=t,this.wizWebsite=i,this.wizContentManager=o,this.contentElementValueIntroMap=[{type:"GeneralDescription",mappings:[{key:"MainEmail",value:"contactDetails.email",maxLength:999,validation:function(e,t){return!!t}},{key:"BusinessName",value:"name"},{key:"BusinessType",value:"category.term",maxLength:50,forceMatchingPolicy:!1},{key:"BusinessTagline",value:"generalInfo.categories",validation:function(e,t){return t&&t.length>0},transform:this.introDataFormatter.formatCategories},{key:"BusinessTagline",value:"generalInfo.shortDescription",validation:function(e,t){return!e&&t&&t.length<=55}},{key:"BusinessTagline",value:"generalInfo.missionStatement",validation:function(e,t){return!e&&t&&t.length<=55}},{key:"Logo",value:"media.logos",defaultValue:[n.ContentDefaults.clipart,n.ContentDefaults.shape],transform:function(e){var t=e&&e.filter(function(e){return e.data});return t&&t.length>0?t.map(function(e){return e.data}).concat([n.ContentDefaults.shape]):[n.ContentDefaults.clipart,n.ContentDefaults.shape]},transformBack:function(e){return e.map(function(e){return{data:e,description:"",url:"https://static.wixstatic.com/media/"+e.relativeUri+"_srz_p_200_200_75_22_0.50_1.20_0.00_jpg_srz"}})}},{key:"CopyrightMessage",value:"name",transform:this.introDataFormatter.formatCopyrightMessage,forceMatchingPolicy:!1},{key:"YearFounded",value:"generalInfo.dateFounded",validation:function(e,t){return t},transform:this.introDataFormatter.formatYear,forceMatchingPolicy:!1}]},{type:"Contact",mappings:[{key:"address for google map",value:"contactDetails.address.fullAddress"},{key:"address for display",value:"contactDetails.address.fullAddress"},{key:"phone number",value:"contactDetails.phone",forceMatchingPolicy:!0},{key:"email",value:"contactDetails.email",maxLength:999,validation:function(e,t){return!!t}},{key:"fax",value:"contactDetails.fax",validation:function(e,t){return!!t}},{key:"Street",value:"contactDetails.address.street",forceMatchingPolicy:!1},{key:"City",value:"contactDetails.address.city",forceMatchingPolicy:!1},{key:"State",value:"contactDetails.address.state",forceMatchingPolicy:!1},{key:"Country",value:"contactDetails.address.country",forceMatchingPolicy:!1},{key:"ZipCode",value:"contactDetails.address.zipcode",forceMatchingPolicy:!1},{key:"Contact description",value:"generalInfo",validation:this.introDataFormatter.isValidContactDescription.bind(this.introDataFormatter),transform:this.introDataFormatter.formatContactDescription.bind(this.introDataFormatter)}]},{type:"Social",mappings:[{key:"SocialTitle",value:"name",maxLength:25},{key:"SocialButtons",value:"socialLinks",forceMatchingPolicy:!0,transform:this.introDataFormatter.createSocialButtons,transformBack:this.introDataFormatter.formatSocialLinks}]},{type:"Homepage_about",mappings:[{key:"AboutBody",value:"generalInfo.longDescription",validation:function(e,t){return t&&t.length<=400}},{key:"AboutBody",value:"generalInfo.companyOverview",validation:function(e,t){return!e&&t&&t.length<=400}},{key:"AboutBody",value:"generalInfo.generalInfo",validation:function(e,t){return!e&&t&&t.length<=400}},{key:"AboutBody",value:"generalInfo.bio",validation:function(e,t){return!e&&t&&t.length<=400}}]},{type:"Inner_about",mappings:[{key:"AboutBody",value:"generalInfo.longDescription",validation:function(e,t){return t&&t.length>400}},{key:"AboutBody",value:"generalInfo.companyOverview",validation:function(e,t){return!e&&t&&t.length>400}},{key:"AboutBody",value:"generalInfo.generalInfo",validation:function(e,t){return!e&&t&&t.length>400}},{key:"AboutBody",value:"generalInfo.bio",validation:function(e,t){return!e&&t&&t.length>400}}]},{type:"OpeningHours",mappings:[{key:"OpeningHoursDescription",value:"contactDetails.openingHours",validation:this.introDataFormatter.isValidOpeningHours.bind(this.introDataFormatter),transform:this.introDataFormatter.formatOpeningHours.bind(this.introDataFormatter),forceMatchingPolicy:!1}]},{type:"Welcome",mappings:[{key:"WelcomeBody",value:"generalInfo.shortDescription",validation:function(e,t){return t&&t.length>=56}},{key:"WelcomeMedia",value:"media.cover.data",validation:function(e,t){return t},array:!0,append:!0}]},{type:"Testimonial",mappings:[{key:"CustomerName",value:"reviews[0].author",validation:function(e,t){return t&&t.length>0}},{key:"CustomerQuote",value:"reviews[0].message",validation:function(e,t){return t&&t.length>0},transform:this.introDataFormatter.formatReview}]}]}return e.$inject=["socialLinkManager","introDataFormatter","wizWebsite","wizContentManager"],e.prototype.enrichIntroData=function(e,t){var i=this,n=t.type,r=o.find(this.contentElementValueIntroMap,function(e){return e.type===n});r&&o.forEach(r.mappings,function(n){var r=o.pick(t.values,n.key);if(r&&r[n.key])if(n.array)o.set(e,n.value,r[n.key].value[0]);else{var a=r[n.key].value;o.set(e,n.value,n.transformBack?n.transformBack.call(i,a):a)}})},e.prototype.enrichContentElement=function(e,t,i){var n=this,r=e.type,a=o.find(this.contentElementValueIntroMap,function(e){return e.type===r}),s=!1;return o.forEach(a.mappings,function(a){var l=o.pick(e.values,a.key),c=o.get(t,a.value);n.enrichFieldValue(l,c,a,r)&&(i||(void 0===a.forceMatchingPolicy?e.getArgsMatchingPolicy()[a.key]=!!l[a.key].value:a.forceMatchingPolicy&&(e.getArgsMatchingPolicy()[a.key]=!0)),s=!0)}),e.valuesByMediaType=void 0,s},e.prototype.enrichFieldValue=function(e,t,i,n){if(!e||!o.has(e,i.key)||!e[i.key])return!1;if(i.validation&&!i.validation(e[i.key].value,t))return!1;if((!t||0===t.length)&&i.defaultValue)return e[i.key].value=i.defaultValue,!0;if(t&&i.maxLength&&(t=t.substring(0,i.maxLength)),t&&i.transform&&(t=i.transform.bind(this,t)()),i.array){var r=t?[t]:[];if(i.append){var a=e[i.key].value||[];e[i.key].value=a.concat(r)}else if(i.prepend){a=e[i.key].value||[];e[i.key].value=r.concat(a)}else e[i.key].value=r}else e[i.key].value=t;return t&&this.wizWebsite.isConvertingSite()&&(this.wizContentManager.introUserValues[n]=this.wizContentManager.introUserValues[n]||{},this.wizContentManager.introUserValues[n][i.key]=!0),!0},e}();t.IntroContentElementGenerator=r,angular.module("siteGeneratorIntroInternal").service("introContentElementGenerator",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(180),o=i(0),r=function(){function e(e,t,i,n,r,a,s,l,c,d,u,p,g,h,m){var f=this;this.introManager=e,this.modelTree=t,this.wixWizDataManager=i,this.introContentElementGenerator=n,this.$q=r,this.contentManager=a,this.contentSource=s,this.mediaGallery=l,this.flags=c,this.fieldsMasks=d,this.richTextService=u,this.richTextLinks=p,this.layoutSolver=g,this.sitePartTypes=h,this.nodeManipulationService=m,this.updateIntroMediaData=function(e){if(o.isEmpty(e))return f.introManager.data;var t=f.introManager.data.media,i=0;return t.logos&&t.logos.length&&t.logos.filter(function(e){return!!e.url&&!e.localFile}).forEach(function(t){t.data=e[i],t.data.mediaType="clipart",i++}),t.cover&&t.cover.url&&(t.cover.data=e[i]),f.introManager.data},this.isLoadedDefer=this.$q.defer(),this.updateLogoPromise=this.$q.when()}return e.$inject=["introManager","modelTree","wixWizDataManager","introContentElementGenerator","$q","contentManager","contentSource","mediaGallery","flags","fieldsMasks","richTextService","richTextLinks","layoutSolver","sitePartTypes","nodeManipulationService"],e.prototype.loaded=function(){return this.$q.all([this.isLoadedDefer.promise,this.updateLogoPromise])},e.prototype.generateAll=function(){var e=this;return this.prepareLogoData().then(function(){return e.createNodes()}).then(function(){return e.isLoadedDefer.resolve()})},e.prototype.prepareLogoData=function(){if(!this.prepareLogoDataPromise){var e=this.extractMediaUrlsOfLogos(this.introManager.data);o.isEmpty(e)?this.prepareLogoDataPromise=this.$q.when({}):this.prepareLogoDataPromise=this.wixWizDataManager.uploadMedia(e).then(this.updateIntroMediaData)}return this.prepareLogoDataPromise},e.prototype.extractMediaUrlsOfLogos=function(e){var t=[];return e.media?(e.media.logos&&e.media.logos.length&&e.media.logos.filter(function(e){return!!e.url&&!e.localFile}).forEach(function(e){t.push(e.url)}),e.media.cover&&e.media.cover.url&&t.push(e.media.cover.url),t):[]},e.prototype.createNodes=function(){this.generateBaseNode("Social");var e=this.generateStaticContentBasedNode("GeneralDescription");this.contentManager.buildContentMap();var t=this.generateStaticContentBasedNode("Contact");this.contentManager.buildContentMap(),this.generateContentBasedNode("OpeningHours"),this.generateContentBasedNode("Homepage_about",3),this.generateContentBasedNode("Inner_about",3),this.generateContentBasedNode("Welcome",3),this.generateTestimonialNodeList(),this.updateHeaderMasks(e),this.addLinkToHomePage("BusinessName"),this.updateContactMasks(t),this.updateFooterMasks()},e.prototype.addLinkToHomePage=function(e){var t={isPageRef:!0,targetPage:this.modelTree.homePageId},i=this.richTextLinks.addLink(t),n=this.modelTree.getGeneralInformation().contentElement.getFieldValue(e),r=o.htmlEncode(n.value);n.value=this.richTextService.markRichText('<p class="font_7"><span style="text-decoration:none;"><a adilinkid="'+i+'">'+r+"</a></span></p>")},e.prototype.updateHeaderMasks=function(e){this.fieldsMasks.update(e),this.hideHeaderMedia(e),this.modelTree.updateFieldsVisibility(e)},e.prototype.updateContactMasks=function(e){var t=e.getContentElement();t&&o.has(t,"values.Contact description")&&(t.values["Contact description"].name="Contact description"),this.fieldsMasks.update(e),this.modelTree.updateFieldsVisibility(e)},e.prototype.updateFooterMasks=function(){var e=o.find(this.modelTree.footerNode&&this.modelTree.footerNode.children,{contentElementType:"GeneralDescription"});e&&(this.fieldsMasks.update(e),this.modelTree.updateFieldsVisibility(e))},e.prototype.updateLogo=function(){var e=this;return this.updateLogoPromise=this.isLoadedDefer.promise.then(function(){var t=e.generateStaticContentBasedNode("GeneralDescription",!1);e.updateHeaderMasks(t),e.addLinkToHomePage("BusinessName")}),this.updateLogoPromise},e.prototype.generateBaseNode=function(e){var t=this.getNodeByType(e);return this.setupNode(t)},e.prototype.generateContentBasedNode=function(t,i){var r=this;return void 0===i&&(i=1),o.range(i).map(function(i){var o=r.getNodeByType(t,!1,!0);return o.source=e.WixWixSource,r.setupNode(o,!0,n.MatchingPolicyState.Clear,!0,i)})},e.prototype.generateStaticContentBasedNode=function(e,t){void 0===t&&(t=!0);var i=this.getNodeByType(e);return this.setupNode(i,t,n.MatchingPolicyState.Fill,!1)},e.prototype.generateTestimonialNodeList=function(){var t=this;if(this.introManager.data.reviews&&0!==this.introManager.data.reviews.length){var i=this.introManager.data.reviews,r=ob.deepClone(i),a=this.getNodeByType("Testimonial",!0);return a.source=e.WixWixSource,o.filter(a.children,function(e){return"Testimonial"===e.getContentElementType()}).forEach(function(e,o){t.setupNode(e,!0,n.MatchingPolicyState.Clear,!1,o),i.splice(0,1)}),this.introManager.data.reviews=r,a}},e.prototype.setupNode=function(e,t,i,r,a){void 0===t&&(t=!1),void 0===i&&(i=n.MatchingPolicyState.Keep),void 0===r&&(r=!1),void 0===a&&(a=0);var s=e.getContentElement();if(t){var l=e.getContentElementType(),c=this.contentManager.getAliasForType(l),d=this.prepareCEDrafts(c,l,a);d&&d.length>0&&this.overrideCEValues(s,d[0])}var u=ob.deepClone(s.values),p=this.introContentElementGenerator.enrichContentElement(s,this.introManager.data);if(r&&(!p||!this.didContentElementChange(u,s.values)))return this.nodeManipulationService.deleteNode(e,void 0,!0),null;var g=e.getArgsMatchingPolicy();switch(i){case n.MatchingPolicyState.Clear:o.keys(g).forEach(function(e){return delete g[e]});break;case n.MatchingPolicyState.Fill:o.keys(g).forEach(function(e){"Contact map title"!==e&&(g[e]=!0)})}return this.modelTree.updateFieldsVisibility(e,null,null,!0,i===n.MatchingPolicyState.Clear),e},e.prototype.prepareCEDrafts=function(e,t,i){var n={rawSectionBrief:{id:e,ceType:t,cardinality:1}};return this.contentSource.prepareDrafts(n,1,i)},e.prototype.overrideCEValues=function(e,t){o.keys(e.values).forEach(function(i){o.has(t.values,i)&&(e.values[i].value=t.values[i].value)})},e.prototype.hideHeaderMedia=function(e){var t=this;e.hiddenMedia?e.hiddenMedia.shape||(e.hiddenMedia.shape={}):e.hiddenMedia={},o.forEach(e.contentElement.values.Logo.value,function(i){"shape"===i.mediaType&&o.get(t.introManager,"data.media.logos[0].data.relativeUri")!==i.relativeUri&&(e.hiddenMedia.shape[t.mediaGallery.getItemId(i)]=!0)}),e.contentElement.fillValuesByMediaType()},e.prototype.createNodeByType=function(e,t){void 0===t&&(t=!1);var i=this.modelTree.getAvailableNodes(),n=o.find(i,{contentElementType:e});return t?n:o.first(n&&n.children)||n},e.prototype.getNodeByType=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var n=o.find(this.modelTree.data.children,{contentElementType:e});if(i||!n){var r=this.createNodeByType(e,t);return this.modelTree.addNodeToTree(r)}return n},e.prototype.didContentElementChange=function(e,t){return e!==t},e.WixWixSource="social",e}();t.IntroModelTree=r,angular.module("siteGeneratorIntroInternal").service("introModelTree",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(14),o=i(65),r=i(0),a=function(){function e(e,t,i,n,o,a,s,l,c,d,u,p,g,h,m,f,v){this.flags=e,this.miscUtils=t,this.presetPreviewGenerator=i,this.presetListItemFeatureDetector=n,this.$injector=o,this.PresetMediaType=a,this.slideShowService=s,this.wizUtils=l,this.wizWebsite=c,this.lssModifier=d,this.applicationParameters=u,this.mediaOverrideManager=p,this.presetFeatureDetector=g,this.slideShowPresetUtils=h,this.modelTree=m,this.presetsStrategyFactory=f,this.siteConverterLogs=v,this.PresetMediaTypeNames=r.invert(this.PresetMediaType),this.MAX_PREVIEWS_TO_CALCULATE=10,this.SMALL_IMAGE_WIDTH=200,this.SMALL_IMAGE_FACTOR=3,this.LARGE_IMAGE_FACTOR=1.2,this.MEDIA_WIDTH_PERFECT_MATCH_MAX_STRETCH=1.15,this.strategy=this.getPresetsStrategy()}return e.$inject=["flags","miscUtils","presetPreviewGenerator","presetListItemFeatureDetector","$injector","PresetMediaType","slideShowService","wizUtils","wizWebsite","lssModifier","applicationParameters","mediaOverrideManager","presetFeatureDetector","slideShowPresetUtils","modelTree","presetsStrategyFactory","siteConverterLogs"],e.prototype.getPreviewForWizSiteContent=function(e,t,i){return t.isList()?this.getListPreview(e,t,i):this.getSinglePreview(e,t,i)},e.prototype.getListPreview=function(e,t,i){var n=this,o=r.random(100);this.siteConverterLogs.trace(o,"getListPreview",e,t,i);var a=this.shouldSelectHorizontalListPreset(i),s=r.shuffle(this.getPresetsWithAdjustedNumOfItemsInRow(e,a,i));this.siteConverterLogs.trace(o,"getListPreview: allPresets",s);var l=this.parseMedia(t),c=l.doAllMediaContainFaces,d=l.mediaItemWithSmallestWidth,u=this.staticFilterListPresets(s,t,c,i,o),p=this.getPresetsToCalculate(s,u,this.getClusterForListSection,this.MAX_PREVIEWS_TO_CALCULATE);this.siteConverterLogs.trace(o,"getListPreview: presetsToCalculate",p);var g=this.generatePreviewEntries(t,p);this.handleSlideShowPreviews(i,g),this.handleListSectionExternalVideos(i,g);var h,m=[];return r.whilePromises(function(e){return!e&&!!g.length},function(){var e=g.shift();return n.strategy.calculatePresetPreview(e).then(function(t){if(n.siteConverterLogs.trace(o,"getListPreview: calculatePresetPreview",e,t),t){h=h||t;var i=n.enrichPreviewByMediaItem(t,g,d);if(n.siteConverterLogs.trace(o,"getListPreview: enrichedPresetPreview",i),n.isPresetPreviewPerfectFitForList(i,d))return n.siteConverterLogs.trace(o,"getListPreview: return perfect",t),t;m.push(i)}if(0===g.length){var r=n.filterListPreviews(m,d)[0];return n.siteConverterLogs.trace(o,"getListPreview: return best match",r,h,m),r?r.preview:h}}).catch(function(e){this.siteConverterLogs.trace(o,"getListPreview: error",e)})}).then(function(e){if(e)return e;n.siteConverterLogs.trace(o,"getListPreview: fail to build section")})},e.prototype.getSinglePreview=function(e,t,i){var n=this,o=t.contentElement.getMediaField().value;i&&o.length>1&&("vertical"===i.migratedListType||i.migratedListType);var a=this.staticFilterSinglePresets(e,t,i),s=this.getPresetsToCalculate(e,a,this.getClusterForSingleSection,this.MAX_PREVIEWS_TO_CALCULATE),l=this.generatePreviewEntries(t,s);this.handleSingleSectionExternalVideos(i,l);var c,d=[];return r.whilePromises(function(e){return!e&&!!l.length},function(){var e=l.shift();return n.strategy.calculatePresetPreview(e).then(function(e){if(e){c=c||e;var i=n.enrichPreviewByMediaItem(e,a,o[0]);if(n.isPresetPreviewPerfectFitForSingle(i,t,o))return e;d.push(i)}if(0===l.length){var r=n.filterSinglePreviews(d,t,o)[0];return r?r.preview:c}}).catch(function(e){})}).then(function(e){return e||c})},e.prototype.getPresetsStrategy=function(){return this.presetsStrategyFactory.create(n.PresetsStrategyType.Generic,{strategyMode:n.PresetsStrategyMode.Add})},e.prototype.getClusterForListSection=function(e){return e.preset.data.groups.filter(function(e){return!e.isHeader&&!e.isFooter})[0].layouts[0].cluster},e.prototype.getClusterForSingleSection=function(e){return e.preset.data.groups[0].layouts[0].cluster},e.prototype.getPresetsToCalculate=function(e,t,i,n){var o=this.getUniquePresetsByCluster(t,i),a=r.without.apply(r,[t].concat(o)),s=r.without.apply(r,[e].concat(t));return this.fillArrayWithRandomElement(o,a,n),this.fillArrayWithRandomElement(o,s,n),o},e.prototype.getUniquePresetsByCluster=function(e,t){return e.reduce(function(e,i){var n=t(i);return!e.clusters[n]&&e.presets.push(i),e.clusters[n]=!0,e},{presets:[],clusters:{}}).presets},e.prototype.isPresetPreviewPerfectFitForList=function(e,t){return!!this.filterListPreviews([e],t)[0]&&e.additionalInfo.maxStretch<this.MEDIA_WIDTH_PERFECT_MATCH_MAX_STRETCH},e.prototype.isPresetPreviewPerfectFitForSingle=function(e,t,i){return!!this.filterSinglePreviews([e],t,i)[0]&&e.additionalInfo.maxStretch<this.MEDIA_WIDTH_PERFECT_MATCH_MAX_STRETCH},e.prototype.handleListSectionExternalVideos=function(e,t){var i=this;t.forEach(function(t){i.areListMediasYoutubeOrVimeo(e)&&i.setMediaAsExtVideo(t)})},e.prototype.handleSingleSectionExternalVideos=function(e,t){var i=this;t.forEach(function(e){i.setMediaAsExtVideo(e)})},e.prototype.handleSlideShowPreviews=function(e,t){this.wizUtils.isSlideshow(e)&&this.slideShowPresetUtils.addSlideShowPreviews(t)},e.prototype.generatePreviewEntries=function(e,t){return this.presetPreviewGenerator.generateNewPreviews([e],t,0)},e.prototype.getPresetsWithAdjustedNumOfItemsInRow=function(e,t,i){var n=ob.deepClone(e);return this.adjustNumOfItemsInRow(n,t,i.list.length),n},e.prototype.staticFilterSinglePresets=function(e,t,i){var n=this,o=e;this.areSingleMediasYoutubeOrVimeo(i)&&(o=this.removeAllButInlineImagePresets(e));var r=this.getMediaMinWidth(t);return o.filter(function(e){return n.doesPresetMediaWidthFit(e,r)})},e.prototype.filterSinglePreviews=function(e,t,i){var n=this,o=e.filter(function(e){return e.additionalInfo&&e.additionalInfo.leMediaLayout}).filter(function(e){return!(n.hasManyMedia(t)&&!n.isSupportsGallery(e))});return this.filterPreviewsByMediaLayoutForSingleNode(o,i[0])},e.prototype.shouldSelectHorizontalListPreset=function(e){return this.wizUtils.isHorizontalList(e)||this.wizUtils.isGrid(e)||this.wizUtils.isSideList(e,this.wizWebsite.getSite())},e.prototype.adjustNumOfItemsInRow=function(e,t,i){var n=this;e.forEach(function(e){return n.lssModifier.adjustPresetNumOfItemsInRow(e.preset,t?n.getItemsInRow(i):1)})},e.prototype.getItemsInRow=function(e){return e%4==0?4:e%3==0?3:e%2==0?2:1},e.prototype.parseMedia=function(e){var t=e.children.slice(1,-1).map(function(e){return e.contentElement.getMediaField().value[0]}).filter(function(e){return!!e});return{mediaItems:t,doAllMediaContainFaces:t.every(function(e){return e.fileInput&&e.fileInput.face}),mediaItemWithSmallestWidth:(this.flags.lodash4?r.strictMinBy:r[String("min")])(t,"width")}},e.prototype.staticFilterListPresets=function(e,t,i,n,o){var a=this,s=e;this.wizUtils.isSlideshow(n)&&(s=r.sortBy(s,function(e){return!a.slideShowPresetUtils.isPresetSupportSlideShow(e.preset)}),this.siteConverterLogs.trace(o,"staticFilterListPresets: ordered for slideShow",s)),i||(s=this.removeCircularImageListPresets(s),this.siteConverterLogs.trace(o,"staticFilterListPresets: removeCircularImageListPresets",s)),this.areListMediasYoutubeOrVimeo(n)&&(s=this.removeAllButInlineImagePresets(s),this.siteConverterLogs.trace(o,"staticFilterListPresets: removeAllButInlineImagePresets",s));var l=this.getMediaMinWidth(t);return s=s.filter(function(e){return a.doesPresetMediaWidthFit(e,l)}),this.siteConverterLogs.trace(o,"staticFilterListPresets: remove by media width",l,s),s},e.prototype.getMediaWidth=function(e,t){return Math.min.apply(Math,t.list.map(function(e){return Math.min.apply(Math,e.media.map(function(e){return e.width}))}))},e.prototype.getPresetColumnRatio=function(e){return 1},e.prototype.getPresetListItemMediaWidth=function(e){var t=e.groups.filter(function(e){return!e.isHeader&&!e.isFooter}).map(function(e){return e.layouts[0].leId})[0].match(/m(\d{1,2})/);if(t&&t[1])return this.applicationParameters.getPixelsFromGridUnits(t[1])},e.prototype.doesPresetMediaWidthFit=function(e,t){var i=this.getPresetListItemMediaWidth(e.preset.data);return!i||(t<=this.SMALL_IMAGE_WIDTH&&t*this.SMALL_IMAGE_FACTOR>=i||t*this.LARGE_IMAGE_FACTOR>=i)},e.prototype.getMediaMinWidth=function(e){return e.isList()?(this.flags.lodash4?r.strictMinBy:r.min)(r(this.modelTree.getListItems(e)).map(function(e){return e.contentElement.getValuesByMediaType().image}).flatten().map(function(e){return e&&e.width}).filter(function(e){return e}).value()):(this.flags.lodash4?r.strictMinBy:r.min)(r(e.contentElement.getValuesByMediaType().image).map(function(e){return e&&e.width}).filter(function(e){return e}).value())},e.prototype.removeAllButInlineImagePresets=function(e){var t=this;return e.filter(function(e){return e.preset.data.groups.filter(function(e){return!e.isHeader&&!e.isFooter}).every(function(e){return e.layouts.every(function(e){return e.mediaType===t.PresetMediaType.IMAGE})})})},e.prototype.areListMediasYoutubeOrVimeo=function(e){var t=this;return e&&e.list&&e.list.some(function(e){return t.areSingleMediasYoutubeOrVimeo(e)})},e.prototype.areSingleMediasYoutubeOrVimeo=function(e){return e.media&&e.media.some(function(e){return/(?:youtube.com|vimeo.com|youtu.be)/.test(e.src)})},e.prototype.filterListPreviews=function(e,t){var i=e.filter(function(e){return e.additionalInfo&&e.additionalInfo.leMediaLayout});return i=this.filterPreviewsByMediaLayoutForListNode(i,t),i=this.handleShapePreviews(i)},e.prototype.removeCircularImageListPresets=function(e){var t=this;return e.filter(function(e){return!t.presetListItemFeatureDetector.isCircularImage(e)})},e.prototype.handleShapePreviews=function(e){return e.some(function(e){return"IMAGE"===e.additionalInfo.leMediaType})?e.filter(function(e){return"SHAPE"!==e.additionalInfo.leMediaType}):e},e.prototype.isSupportsGallery=function(e){return"COLUMNBG"!==e.additionalInfo.leMediaType&&"SHAPE"!==e.additionalInfo.leMediaType},e.prototype.hasManyMedia=function(e){return e.contentElement.getMediaField().value.length>1},e.prototype.setMediaAsExtVideo=function(e){var t=this.presetFeatureDetector.getOrCreateMediaPreferredOverride(e,{name:"video",superType:"media",type:"extVideo",properties:{},sourceProperties:{}});t.name="video",t.superType="media",t.type="extVideo"},e.prototype.enrichPreviewByMediaItem=function(e,t,i){var n=this.getLayoutElementByMediaItem(e,i),o=this.getMediaLayout(e,i,n),r={preview:e};return o&&(r.additionalInfo={LE:n,presetObj:t.find(function(t){return t.preset.id===e.preset.id}),leMediaLayout:o,mediaHeight:o.height,mediaWidth:o.width,leMediaFullWidth:n.mediaFullWidth,leMediaType:this.PresetMediaTypeNames[n.getMediaType()],maxStretch:this.calculateMaxStretch(o,i),aspectRatioDiff:this.calculateAspectRatio(o,i)}),r},e.prototype.filterPreviewsByMediaLayoutForSingleNode=function(e,t){var i=this,n=e.filter(function(e){return i.isInlineStrip(e.additionalInfo.leMediaType)});return this.getFitBackgroundPreviews(e,t).concat(this.getFitInlinePreviews(n,t))},e.prototype.filterPreviewsByMediaLayoutForListNode=function(e,t){var i=this,n=e.filter(function(e){return i.isInlineStrip(e.additionalInfo.leMediaType)});return this.getFitBackgroundPreviews(e,t).concat(this.filterPreviewsByStretch(n,t))},e.prototype.getFitBackgroundPreviews=function(e,t){var i=this;return e.filter(function(e){return i.isBackgroundStrip(e.additionalInfo.leMediaType)}).filter(function(e){return!i.isBackgroundMediaStretchTooMuch(e.additionalInfo.leMediaLayout,t,i.getColumnRatio(e.additionalInfo.leMediaType,e.additionalInfo.LE.columns))})},e.prototype.getFitInlinePreviews=function(e,t){var i=this.filterPreviewsByStretch(e,t);return 1===i.length?i:this.filterPreviewsByAspectRatioDiff(i,t)},e.prototype.filterPreviewsByStretch=function(e,t){var i=this;if(!e||!e.length)return[];var n=e.filter(function(e){return!i.isInlineMediaStretchTooMuch(e.additionalInfo.maxStretch)});return n.length?n:[(this.flags.lodash4?r.strictMinBy:r[String("min")])(e,function(e){return e.additionalInfo.maxStretch})]},e.prototype.filterPreviewsByAspectRatioDiff=function(e,t){var i=this;if(!e||!e.length)return[];var n=e.filter(function(e){return i.isAspectRatioCloseEnough(e.additionalInfo.aspectRatioDiff)});return n.length?n:[(this.flags.lodash4?r.strictMinBy:r[String("min")])(e,function(e){return e.additionalInfo.aspectRatioDiff})]},e.prototype.isAspectRatioCloseEnough=function(e){return e<o.SectionManager.AspectRatioDiff},e.prototype.calculateAspectRatio=function(e,t){return Math.abs(e.width/e.height-t.width/t.height)},e.prototype.getMediaLayout=function(e,t,i){var n=i||this.getLayoutElementByMediaItem(e,t);return n&&n.getMediaLayout()},e.prototype.getLayoutElementByMediaItem=function(e,t){var i=(e&&e.solution.reduce(function(e,t){return e.concat(t.segments)},[])).find(function(e){return e.node.contentElement.getMediaField().value[0]===t});return i&&i.getLENoError()},e.prototype.isInlineMediaStretchTooMuch=function(e){return e>o.SectionManager.MaxStretch},e.prototype.calculateMaxStretch=function(e,t){var i=e.width/t.width,n=e.height/t.height;return this.flags.lodash4?Math.max(i,n):r.max([i,n])},e.prototype.getColumnRatio=function(e,t){var i=t&&t.reduce(function(e,t){return e.concat(t)},[]),n=i&&i.find(function(e){return e.hasMedia});return n&&"COLUMNBG"===e?n.width/12:1},e.prototype.isBackgroundMediaStretchTooMuch=function(e,t,i){return void 0===i&&(i=1),t.width<o.SectionManager.FullWidthMediaOfStrip*i||t.height<.9*e.height},e.prototype.isBackgroundStrip=function(e){return"COLUMNBG"===e||"COAST2COAST"===e},e.prototype.isInlineStrip=function(e){return"IMAGE"===e},e.prototype.fillArrayWithRandomElement=function(e,t,i){for(;t.length>0&&e.length<=i;){var n=this.removeRandomElement(t);e.push(n)}},e.prototype.removeRandomElement=function(e){return e.splice(r.random(e.length-1),1)[0]},e}();t.WizPresetsFilter=a,angular.module("siteGeneratorIntroInternal").service("wizPresetsFilter",a)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,i,n,o,r){return e.call(this,t,i,n,o,r)||this}return n(t,e),t.prototype.getScore=function(t,i,n){return this.sectionInformation=n,e.prototype.innerGetScore.call(this,t,i)},t.prototype.getMinPriority=function(){return this.sectionInformation.minPriority},t.prototype.getMaxPriority=function(){return this.sectionInformation.maxPriority},t}(i(182).PresetScoringCalculator);t.BetterLayoutPresetScoringCalculator=o,angular.module("siteGeneratorStaticsConsumerAppInternal").factory("betterLayoutPresetScoringCalculatorFactory",["siteConverterConf","flags","presetListItemFeatureDetector","presetFeatureDetector","applicationParameters",function(e,t,i,n,r){return function(){return new o(e,t,i,n,r)}}])},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),r=i(181),a=i(15),s=function(e){function t(t,i,n,o,r){var a=e.call(this,t,i)||this;return a.sectionFeatureDetector=n,a.sectionBackgroundService=o,a.$injector=r,a.sectionScoringMethods=[{scoringCriterion:"imageCrop",scoringMethod:a.getImageCropScore},{scoringCriterion:"cardinality",scoringMethod:a.getListItemsCountScore},{scoringCriterion:"textOnly",scoringMethod:a.getTextOnlyScore}],a}return n(t,e),Object.defineProperty(t.prototype,"mediaSectionUtils",{get:function(){return this._mediaSectionUtils||(this._mediaSectionUtils=this.$injector.get("mediaSectionUtils")),this._mediaSectionUtils},enumerable:!0,configurable:!0}),t.prototype.getScore=function(e,t){this.lgs=e||[],this.lgsItems=this.lgs.filter(function(e){return!e.isListHeader()&&!e.isListFooter()}),t.isList()||(this.nodeMediaDimensions=this.getNodeMediaDimensions(t));for(var i=[],n=0,o=this.lgsItems;n<o.length;n++){var r=o[n];if(r&&r.segments)for(var a=0,s=r.segments;a<s.length;a++){var l=s[a];if(l&&l.getLE()){if(t.isList()){if(!l.node)continue;this.nodeMediaDimensions=this.getNodeMediaDimensions(l.node)}if(this.currentSegment=l,this.currentLe=l.getLE(),i.push(this.calculateScore(t,this.sectionScoringMethods)),!t.isList())return i[0]}}}return this.flags.debugUglySectionParameters&&console.log("List items scores array: ",i.map(function(e){return e.uglyScore})),this.chooseScoreFromList(i)},t.prototype.getStretchScore=function(){var e,t=this.getMediaLayout(),i={mediaLayout:t,nodeMediaDimensions:this.nodeMediaDimensions};if(t){if(i.mediaWidth=t.width,i.mediaHeight=t.height,i.isBackgroundImage=this.currentLe.getMediaType()===a.PresetMediaTypes.COAST2COAST,i.columns=this.lgsItems[0].columns,this.currentSegment.hasColumnWithMediaBackground()&&i.columns){var n=this.getColumnMediaDimensions(i.columns),o=n.mediaWidth,r=n.mediaHeight;i.mediaWidth=o||0,i.mediaHeight=r||0}else i.isBackgroundImage&&(i.mediaWidth=this.siteConverterConf.BACKGROUND_WIDTH,i.mediaHeight=this.lgsItems[0].getBoundingHeight());i.widthStretchRatio=i.mediaWidth/this.nodeMediaDimensions.width,i.heightStretchRatio=i.mediaHeight/this.nodeMediaDimensions.height,i.stretchRatio=Math.max(i.widthStretchRatio,i.heightStretchRatio),i.isFitMode=this.isFitMode(),i.isFitMode&&(i.stretchRatio=Math.min(i.widthStretchRatio,i.heightStretchRatio));var s=this.siteConverterConf.SCORING.widthHeightStretch;if(i.stretchRatio>=s.scale.good){var l=+this.flags.widthHeightStretchPenalty||s.penalty;e=this.normalizeScoreNoCap(i.stretchRatio,s.scale.good,s.scale.badHigh)*l}else{l=+this.flags.widthHeightStretchMinusPenalty||s.minusPenalty;e=this.normalizeScoreNoCap(i.stretchRatio,s.scale.good,s.scale.badLow)*l}}else e=0;return{uglyScore:e,debug:i}},t.prototype.isCircularMedia=function(){return this.sectionFeatureDetector.isCircularImage(this.currentLe)},t.prototype.isFitMode=function(){var e=this.sectionFeatureDetector.getMediaPreferredOverride(this.currentLe);return e&&"full"===e.properties.displayMode},t.prototype.getListItemsCountScore=function(){if(!this.node.isList())return{uglyScore:0};var e=this.lgsItems.map(function(e){return e.segments||[]}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return!!e}),t=o.uniq(e.map(function(e){return e.node}).filter(function(e){return!!e})).length,i=this.getItemsInRow(),n=0,r=Math.max(0,1-t/10);return{uglyScore:(n=i>1?t%i/i*r+(4-i)/4*(1-r):Math.min(1,t*t/16))*(+this.flags.listItemsCountPenalty||this.siteConverterConf.SCORING.cardinality.solutionPenalty),debug:{factor:r,score:n}}},t.prototype.getItemsInRow=function(){for(var e=0,t=this.lgsItems;e<t.length;e++){var i=t[e];if(i&&i.segments)return o.uniq(i.segments.filter(function(e){return e&&e.node}).map(function(e){return e.node})).length}return 0},t.prototype.getImageCropScore=function(){var e=this.getMediaLayout(),t=0,i={mediaLayout:e,nodeMediaDimensions:this.nodeMediaDimensions,isFitMode:this.isFitMode()};if(i.isFitMode&&i.mediaLayout)return{uglyScore:t,debug:i};if(i.mediaWidth=e?e.width:0,i.mediaHeight=e?e.height:0,i.isBackgroundImage=this.currentLe.getMediaType()===a.PresetMediaTypes.COAST2COAST,i.columns=this.lgsItems[0].columns,this.currentSegment.hasColumnWithMediaBackground()&&i.columns){var n=this.getColumnMediaDimensions(i.columns),o=n.mediaWidth,r=n.mediaHeight;i.mediaWidth=o||0,i.mediaHeight=r||0}else i.isBackgroundImage&&(i.mediaWidth=this.siteConverterConf.BACKGROUND_WIDTH,i.mediaHeight=this.lgsItems[0].getBoundingHeight());if(i.mediaWidth&&i.mediaHeight){i.nodeMediaAspectRatio=this.nodeMediaDimensions.width/this.nodeMediaDimensions.height,i.layoutAspectRatio=i.mediaWidth/i.mediaHeight;var s=this.siteConverterConf.SCORING.imageCrop;i.croppedPercent=Math.abs(i.layoutAspectRatio-i.nodeMediaAspectRatio)/Math.max(i.layoutAspectRatio,i.nodeMediaAspectRatio),i.isStrip=!i.isFitMode&&i.mediaWidth>=this.siteConverterConf.STRIP_MIN_WIDTH&&i.nodeMediaAspectRatio>=this.siteConverterConf.STRIP_MIN_RATIO;var l=i.isStrip?+this.flags.cropStripPenaltyFactor||s.stripFactor:1;t=this.normalizeScoreNoCap(i.croppedPercent,s.scale.good,s.scale.bad)*(+this.flags.imageCropPenalty||s.penalty)*l}return{uglyScore:t,debug:i}},t.prototype.getColumnMediaDimensions=function(e){var t=e;Array.isArray(e[0])&&(t=e[0]);var i=t.reduce(function(e,t){return e+t.width},0),n=this.getPreviewColumnWithMedia(e);return n?{mediaWidth:n.width/i*this.siteConverterConf.BACKGROUND_WIDTH,mediaHeight:n.height}:{mediaWidth:null,mediaHeight:null}},t.prototype.getMediaLayout=function(){var e=this.currentLe&&this.currentLe.getMediaLayout();if(e)return e;var t=this.sectionBackgroundService.getBackground(this.currentSegment.node);return t&&"image"===t.mediaType?{width:this.siteConverterConf.BACKGROUND_WIDTH,height:this.lgsItems[0].getBoundingHeight()}:void 0},t.prototype.getPreviewColumnWithMedia=function(e){return o.flatten(e).find(function(e){return"image"===e.currentSettings.backgroundMode})},t.prototype.getTextOnlyScore=function(){if(this.node.isList())return{uglyScore:0};var e=this.mediaSectionUtils.nodeMediaIsShown(this.node),t=this.currentLe.cluster;return{uglyScore:e||this.currentLe.isTextOnlyCluster()?0:this.siteConverterConf.SCORING.textOnly.penalty,debug:{hasMedia:e,cluster:t}}},t.prototype.chooseScoreFromList=function(e){var t=this,i=e.sort(function(e,i){return t.summarizeScore(e)-t.summarizeScore(i)}),n=1/(i.length-1),o=1,r=i[0];return i.forEach(function(e,i){var a=i*n,s=Math.abs(a-(+t.flags.listItemUglyScorePercentile||t.siteConverterConf.LIST_ITEM_UGLY_SCORE_PERCENTILE));s<o&&(o=s,r=e)}),r},t.prototype.summarizeScore=function(e){return Object.keys(e.uglyScore).reduce(function(t,i){return t+e.uglyScore[i]},0)},t}(r.ScoringCalculatorBase);t.SolutionScoringCalculator=s,angular.module("siteGeneratorStaticsConsumerAppInternal").factory("solutionScoringCalculatorFactory",["siteConverterConf","flags","sectionFeatureDetector","sectionBackgroundService","$injector",function(e,t,i,n,o){return function(){return new s(e,t,i,n,o)}}])},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),r=i(41),a=function(){function e(e,t,i,n,o,r,a){this.flags=e,this.solutionScoringCalculatorFactory=t,this.betterLayoutPresetScoringCalculatorFactory=i,this.siteConverterConf=n,this.mediaTypeResolver=o,this.sectionFeatureDetector=r,this.simpleSolutionManager=a}return e.$inject=["flags","solutionScoringCalculatorFactory","betterLayoutPresetScoringCalculatorFactory","siteConverterConf","mediaTypeResolver","sectionFeatureDetector","simpleSolutionManager"],e.prototype.isSectionUgly=function(e){var t=this.simpleSolutionManager.getSectionSolution(e.containerPageId,e.id);if(!this.shouldCalculateUglySection(e,t))return!1;var i=this.solutionScoringCalculatorFactory().getScore(t,e),n=this.calculateScore(i.uglyScore);return this.flags.debugUglySectionParameters&&console.log("Calculating ugly score for: ",e,i.uglyScore,"finalScore: "+n),n>(+this.flags.uglySectionScoreThreshold||this.siteConverterConf.UGLY_SCORE_THRESHOLD)},e.prototype.isSectionPretty=function(e,t,i){if(!this.shouldCalculatePrettySection(e,i))return!1;var o=this.createSectionInformation(t,i),r=this.getPresetDetailsScore(e.preset,e.node,o),a=this.solutionScoringCalculatorFactory().getScore(e.solution,i);if(!a)return!1;var s=n({},r.uglyScore,a.uglyScore),l=this.calculateScore(s);return this.flags.debugUglySectionParameters&&console.log("Calculating pretty score for: ",e,s,"finalScore: "+l),l<(+this.flags.prettySectionScoreThreshold||this.siteConverterConf.GOOD_ENOUGH_SCORE_THRESHOLD)},e.prototype.shouldCalculatePrettySection=function(e,t){var i=this.simpleSolutionManager.getSectionSolution(t.containerPageId,t.id);return!this.isNodeTpa(t)&&this.doesNodeHaveRequiredMedia(t,i)&&this.doMediaTypesMatch(e,i,t)&&this.doMediaUrlsMatch(e,i,t)},e.prototype.doMediaUrlsMatch=function(e,t,i){var n=this.getMediaUrls(i,t),r=this.getMediaUrls(e.node,e.solution),a=o.isEqual(n.sort(),r.sort());return!a&&this.flags.debugUglySectionParameters&&this.flags.debugUglySectionParameters&&console.log("Not calculating score. mediaUrls does not match",e,n,r),a},e.prototype.doMediaTypesMatch=function(e,t,i){var n=this.getMediaTypes(i,t),r=this.getMediaTypes(e.node,e.solution),a=o.isEqual(n.sort(),r.sort());return!a&&this.flags.debugUglySectionParameters&&this.flags.debugUglySectionParameters&&console.log("Not calculating score. mediaTypes does not match",e,n,r),a},e.prototype.shouldCalculateUglySection=function(e,t){return e&&t&&t.length?!this.isNodeTpa(e)&&this.doesNodeHaveRequiredMedia(e,t):(this.flags.debugUglySectionParameters&&console.log("Not calculating score. Bad params, for: ",e),!1)},e.prototype.doesNodeHaveRequiredMedia=function(e,t){var i=this.getMediaTypes(e,t);if(e.isList()){var n=i.every(function(e){return e===cc.MediaPreviewType.SingleImage});return!n&&this.flags.debugUglySectionParameters&&console.log("Not calculating score. Not all mediaTypes are image, for: ",e,i),n}var o=1===i.length&&i[0]===cc.MediaPreviewType.SingleImage;return!o&&this.flags.debugUglySectionParameters&&console.log("Not calculating score. Expected one image mediaType, for: ",e,i),o},e.prototype.isNodeTpa=function(e){return!(!e.isTpaNode()&&e.contentElementType!==r.TPAHeader.TPA_HEADER_CE_TYPE)&&(this.flags.debugUglySectionParameters&&console.log("Not calculating score. TPA, for: ",e),!0)},e.prototype.getMediaTypes=function(e,t){var i=this;return e.isList()?e.children.filter(function(e){return!e.isListHeader()&&!e.isListFooter()}).map(function(e){return i.mediaTypeResolver.getTypeFromSolution(e,t)}):[this.mediaTypeResolver.getTypeFromSolution(e,t)].filter(function(e){return!!e||0===e})},e.prototype.getMediaUrls=function(e,t){for(var i=[],n=0,o=t;n<o.length;n++){var r=o[n];if((!e.isList()||!r.isListHeader()&&!r.isListFooter())&&(r&&r.segments))for(var a=0,s=r.segments;a<s.length;a++){var l=s[a];if(l&&l.getLE())for(var c=0,d=this.sectionFeatureDetector.getMediaUrls(l.getLE());c<d.length;c++){var u=d[c];u&&-1===i.indexOf(u)&&i.push(u)}}}return i},e.prototype.createSectionInformation=function(e,t){return{minPriority:(this.flags.lodash4?o.strictMinBy:o[String("min")])(e,function(e){return e.preset.data.priority[t.contentElementType]}).preset.data.priority[t.contentElementType],maxPriority:(this.flags.lodash4?o.strictMaxBy:o[String("max")])(e,function(e){return e.preset.data.priority[t.contentElementType]}).preset.data.priority[t.contentElementType]}},e.prototype.getPresetDetailsScore=function(e,t,i){var n={preset:e,maskIndex:0};return{preset:n,uglyScore:this.betterLayoutPresetScoringCalculatorFactory().getScore(n,t,i).uglyScore}},e.prototype.calculateScore=function(e){return Object.keys(e).reduce(function(t,i){return t+e[i]},0)},e}();t.SectionLayoutSuggestions=a,angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionLayoutSuggestions",a)},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),r=i(247),a=i(14),s=i(15),l=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h){this.siteConverterLogs=e,this.slideShowPresetUtils=t,this.wizUtils=i,this.presetsStrategyFactory=n,this.wizWebsite=o,this.presetPreviewGenerator=r,this.presetFeatureDetector=a,this.PresetMediaType=s,this.lssModifier=l,this.fitModePresetConverter=c,this.siteConverterConf=d,this.flags=u,this.consumerBiLogger=p,this.siteConverterPresetScoringCalculatorFactory=g,this.solutionScoringCalculatorFactory=h,this.sectionIndex=-1,this.numberOfCalculatedBatches=0,this.strategy=this.getPresetsStrategy()}return e.$inject=["siteConverterLogs","slideShowPresetUtils","wizUtils","presetsStrategyFactory","wizWebsite","presetPreviewGenerator","presetFeatureDetector","PresetMediaType","lssModifier","fitModePresetConverter","siteConverterConf","flags","consumerBiLogger","siteConverterPresetScoringCalculatorFactory","solutionScoringCalculatorFactory"],e.prototype.getPresetPreviewForWizSection=function(e,t,i){var n=this.getPresetsSortedByStaticScore(e,t,i);return this.getBestPresetPreview(n,t,i)},e.prototype.getPresetsSortedByStaticScore=function(e,t,i){this.loggerId=o.random(1e3),this.sectionIndex++,this.consumerBiLogger.builder.siteConverterSectionPresetPickerStart(this.sectionIndex),this.setExtraInfoOnWizSection(t,e,i),this.setPreferredMediaType(i,t);var n=this.composePresets(e,i,t);return this.sortPresets(n,t,i)},e.prototype.composePresets=function(e,t,i){this.log("composePresets",e,i);var n=this.createFitPresets(e,t),o=this.wizUtils.isListSection(i)?this.createDifferentCardinalityLists(e.concat(n),this.getAllowedCardinalities(i)):e.concat(n);return this.log("composePresets",o),o},e.prototype.createFitPresets=function(e,t){var i=this,n=o(e).map(function(e){if(i.isFitModeConvertible(e,t)){var n=ob.deepClone(e);return n.preset=i.fitModePresetConverter.convertPreset(n.preset,t,!0),n.fitMode=!0,n.preset.fitMode=!0,n.preset.id+="-fitMode",n}}).filter(function(e){return!!e}).value();return this.log("createFitPresets",n),n},e.prototype.createDifferentCardinalityLists=function(e,t){var i=this,n=o(e).map(function(e){return i.presetAllowsCardinalityChange(e)?t.map(function(t){var n=ob.deepClone(e);return i.lssModifier.adjustPresetNumOfItemsInRow(n.preset,t),n.preset.id+="-cardinality:"+t,n}):e}).flatten().value();return this.log("createDifferentCardinalityLists",t,n),n},e.prototype.presetAllowsCardinalityChange=function(e){return e.preset.data.itemsInRow>1},e.prototype.sortPresets=function(e,t,i){var n=this,o=this.siteConverterPresetScoringCalculatorFactory(),r=e.map(function(e){return{preset:e,uglyScore:o.getScore(e,i,t).uglyScore}}).sort(function(e,t){return n.calculateScore(e.uglyScore)-n.calculateScore(t.uglyScore)}).map(function(e){return e.preset});return this.log("sortPresets",r,t),r},e.prototype.getBestPresetPreview=function(e,t,i){var n=this;this.log("getBestMatchPresetPreview",e);var r=this.generatePreviewEntries(i,e);if(this.handleExternalVideos(t,r),this.wizUtils.isListSection(t)){var a=t;this.handleSlideShowPreviews(a,r)}var s=[],l=[];return o.whilePromises(function(e){return!e&&!!r.length},function(){return n.getPresetPreviewsBatch(r,n.siteConverterConf.CALCULATION_BATCH_SIZE).then(function(e){if(n.numberOfCalculatedBatches++,e.length){var o=n.getBestMatchingPresetPreview(e,t,i),r=o.perfectMatchList,a=o.goodEnoughList,c=o.badList;if(r.length){var d=n.getLowestScoringPresetPreview(r);return n.log("getBestMatchPresetPreview: found perfect match",d,r),d.presetPreview}if(s.push.apply(s,a),l.push.apply(l,c),s.length>=n.siteConverterConf.GOOD_ENOUGH_PREVIEW_COUNT_THRESHOLD){var u=n.getLowestScoringPresetPreview(s);return n.log("getBestMatchPresetPreview: return good enough match",u,s),u.presetPreview}}}).catch(function(e){return n.log("getBestMatchPresetPreview: error",e)})}).then(function(e){var t=s.concat(l);if(!e&&!t.length)return n.consumerBiLogger.builder.siteConverterSectionPresetPickerFailed(n.numberOfCalculatedBatches*n.siteConverterConf.CALCULATION_BATCH_SIZE,n.sectionIndex),void n.log("getBestMatchPresetPreview: failed to build section");if(n.consumerBiLogger.builder.siteConverterSectionPresetPickerSuccess(n.numberOfCalculatedBatches*n.siteConverterConf.CALCULATION_BATCH_SIZE,n.sectionIndex),e)return e;if(t.length){var i=n.getLowestScoringPresetPreview(t);return n.log("getBestMatchPresetPreview: goodEnough list was not filled to threshold, picking from good enough/bad list",i,s,l),i.presetPreview}})},e.prototype.getLowestScoringPresetPreview=function(e){return e.sort(function(e,t){return e.scoreTotal-t.scoreTotal})[0]},e.prototype.getBestMatchingPresetPreview=function(e,t,i){var n=this,o=e.map(function(e){return n.getScoredPresetPreview(e,t,i)});return this.log("getBestMatchingPresetPreview - scoredPresetPreviews",o),o.reduce(function(e,t){return t.scoreTotal<=n.siteConverterConf.PERFECT_MATCH_SCORE_THRESHOLD?e.perfectMatchList.push(t):t.scoreTotal<=n.siteConverterConf.GOOD_ENOUGH_SCORE_THRESHOLD?e.goodEnoughList.push(t):e.badList.push(t),e},{perfectMatchList:[],goodEnoughList:[],badList:[]})},e.prototype.getScoredPresetPreview=function(e,t,i){var o=this.siteConverterPresetScoringCalculatorFactory().getScore(e,i,t),r=this.solutionScoringCalculatorFactory().getScore(e.solution,i),a=n({},o.uglyScore,r.uglyScore),s=n({},o.uglyScoreDebug,r.uglyScoreDebug),l=this.calculateScore(a);return this.flags.debugWizSiteConverter&&(e.node.siteConverter={wizSection:t,uglyScore:a,uglyScoreDebug:s,scoreTotal:l}),{presetPreview:e,uglyScore:a,uglyScoreDebug:s,scoreTotal:l}},e.prototype.calculateScore=function(e){return Object.keys(e).reduce(function(t,i){return t+e[i]},0)},e.prototype.getPresetPreviewsBatch=function(e,t){var i=this,n=e.splice(0,t);return this.log("getPresetPreviewsBatch - getting batch of "+t),o.sequencePromises(n,function(e){return i.strategy.calculatePresetPreview(e).catch(function(e){})}).then(function(e){return e.filter(function(e){return!!e})}).then(function(e){return i.log("getPresetPreviewsBatch - calculated "+e.length+" previews"),e})},e.prototype.setExtraInfoOnWizSection=function(e,t,i){e.extraInfo={minPriority:(this.flags.lodash4?o.strictMinBy:o[String("min")])(t,function(e){return e.preset.data.priority[i.contentElementType]}).preset.data.priority[i.contentElementType],maxPriority:(this.flags.lodash4?o.strictMaxBy:o[String("max")])(t,function(e){return e.preset.data.priority[i.contentElementType]}).preset.data.priority[i.contentElementType]}},e.prototype.setPreferredMediaType=function(e,t){this.wizUtils.areMediasYoutubeOrVimeo(t,r.SiteConverterPresetScoringCalculator.VIDEO_REGEX)?e.preferredMedia="video":e.preferredMedia="image"},e.prototype.getPresetsStrategy=function(){return this.presetsStrategyFactory.create(a.PresetsStrategyType.Generic,{strategyMode:a.PresetsStrategyMode.Add})},e.prototype.getAllowedCardinalities=function(e){var t=[];return this.shouldSelectHorizontalListPreset(e)&&(e.list.length%2==0&&t.push(2),e.list.length%3==0&&t.push(3),e.list.length%4==0&&t.push(4)),t},e.prototype.shouldSelectHorizontalListPreset=function(e){return this.wizUtils.isHorizontalList(e)||this.wizUtils.isGrid(e)||this.wizUtils.isSideList(e,this.wizWebsite.getSite())},e.prototype.generatePreviewEntries=function(e,t){return this.presetPreviewGenerator.generateNewPreviews([e],t,0)},e.prototype.handleSlideShowPreviews=function(e,t){this.wizUtils.isSlideshow(e)&&this.slideShowPresetUtils.addSlideShowPreviews(t)},e.prototype.handleExternalVideos=function(e,t){var i=this;this.wizUtils.areMediasYoutubeOrVimeo(e,r.SiteConverterPresetScoringCalculator.VIDEO_REGEX)&&t.filter(function(e){return e.preset.data.groups.filter(function(e){return!e.isHeader&&!e.isFooter})[0].layouts[0].mediaType===s.PresetMediaTypes.IMAGE}).forEach(function(e){i.setMediaAsExtVideo(e)})},e.prototype.setMediaAsExtVideo=function(e){var t=this.presetFeatureDetector.getOrCreateMediaPreferredOverride(e,{name:"video",superType:"media",type:"extVideo",properties:{},sourceProperties:{}});t.name="video",t.superType="media",t.type="extVideo"},e.prototype.isFitModeConvertible=function(e,t){return this.fitModePresetConverter.isPresetConvertible(e.preset,t,!0)},e.prototype.log=function(e){for(var t,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(t=this.siteConverterLogs).trace.apply(t,[this.loggerId,this.sectionIndex+" - "+e].concat(i))},e}();t.SiteConverterPresetPicker=l,angular.module("siteGeneratorStaticsConsumerAppInternal").service("siteConverterPresetPicker",l)},function(e,t){var i=function(){return function(){this.SECTION_CONFIDENCE_LEVEL_THRESHOLD=.5,this.MINIMUM_VIABLE_SECTIONS=1,this.SMALL_IMAGE_WIDTH_HIGH_BOUNDARY=240,this.TITLE_MAX_WORDS=6,this.DEFAULT_FONT_SIZE=-2,this.MAX_RICH_TEXT_ROWS=9,this.GOOD_ENOUGH_PREVIEW_COUNT_THRESHOLD=5,this.PERFECT_MATCH_SCORE_THRESHOLD=5,this.GOOD_ENOUGH_SCORE_THRESHOLD=20,this.UGLY_SCORE_THRESHOLD=20,this.LIST_ITEM_UGLY_SCORE_PERCENTILE=.8,this.CALCULATION_BATCH_SIZE=10,this.BACKGROUND_WIDTH=1500,this.STRIP_MIN_WIDTH=1500,this.STRIP_MIN_RATIO=1.7,this.SCORING={extVideo:{penalty:30},listType:{penalty:5},circularPreset:{penalty:50},fitMode:{penalty:.1},slideshow:{penalty:30},widthStretch:{penalty:5,scale:{badLow:.5,good:1,badHigh:2}},widthHeightStretch:{penalty:12,minusPenalty:.3,scale:{badLow:.5,good:1,badHigh:2}},cardinality:{presetPenalty:4,solutionPenalty:6},priority:{penalty:5},imageCrop:{penalty:12,scale:{good:0,bad:.3},stripFactor:.3},textOnly:{penalty:50}}}}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("siteConverterConf",i)},function(e,t){var i=function(){function e(e,t,i){this.$q=e,this.$rootScope=t,this.siteConverterLogs=i}return e.$inject=["$q","$rootScope","siteConverterLogs"],e.prototype.canvasElementFromImageElement=function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height),t},e.prototype.imageElementFromImageUrl=function(e){var t=this,i=document.createElement("img");return this.$q(function(n){i.onload=function(){return t.$rootScope.$apply(function(){return n(i)})},0!==e.indexOf("data:")&&(i.crossOrigin="anonymous"),i.src=e})},e.prototype.canvasPixelsFromCanvasElement=function(e){return{width:e.width,height:e.height,array:e.getContext("2d").getImageData(0,0,e.width,e.height).data}},e.prototype.canvasPixelsFromImageUrl=function(e){return this.imageElementFromImageUrl(e).then(this.canvasElementFromImageElement).then(this.canvasPixelsFromCanvasElement)},e.prototype.transparentRatio=function(e){for(var t=0,i=e.length-1;i>=0;)e[i]<240&&t++,i-=4;return t/(e.length/4)},e.prototype.imageScoreFromImageUrl=function(e,t){var i=this;void 0===t&&(t=!1);var n=Math.round(1e3*Math.random());return this.canvasPixelsFromImageUrl(e).then(function(o){var r=i.transparentRatio(o.array),a=i.imageScore(r,o.width,o.height,t);return i.siteConverterLogs.trace(n,"scoring image",e,r,o.width,o.height,a),a})},e.prototype.imageScore=function(e,t,i,n){var o=n?1:0,r=t/i;return n||(t>1e3||i>1e3?o+=3:t>500||i>500?o+=2:t>300||i>300?o+=1:t<100&&t>30||i<100&&i>30?o-=1:(t<=30||i<=30)&&(o-=Number.POSITIVE_INFINITY),r<=.1||r>=10?o-=Number.POSITIVE_INFINITY:r<=.2||r>=5?o-=2:r<=.4||r>=3.5?o-=1:r>=2/3&&r<=1.5&&(o+=2)),e>=.8?o-=Number.POSITIVE_INFINITY:e>.6&&(o-=2),o},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("imageScore",i)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=i(2),r=i(1),a=function(){function e(e,t,i,r,a,s){var l,c=this;this.flags=e,this.assistantManager=t,this.menuTask=i,this.assistantTabListService=r,this.applicationState=a,this.initService=s,this.initFinished=!1,this.dockStatusesToClasses=((l={})[n.AssistantDockStatus.Playing]="tour-dock-playing",l[n.AssistantDockStatus.Stopped]="tour-dock-stopped",l[n.AssistantDockStatus.Disabled]="tour-dock-disabled",l[n.AssistantDockStatus.Hidden]="ng-hide",l),this.flags.removeSpinnerAsStageReady&&o.PubSub.subscribeOnce(o.events.SITE_IS_LOADED,function(){c.initFinished=!0}),t.setMenu(i)}return e.$inject=["flags","assistantManager","menuTask","assistantTabListService","applicationState","initService"],e.prototype.handleAssistantMenuClick=function(){if(this.assistantManager.isInActiveTask())this.assistantManager.isTaskInLastAction(this.assistantManager.getActiveTask())?this.assistantManager.stopAndComplete():this.assistantManager.canStop()&&this.assistantManager.stop();else{var e=this.assistantTabListService.getSelectedTab();this.assistantManager.openMenu(r.BIOrigins.AssistantDockButton,e)}},e.prototype.isPlaying=function(){return this.assistantManager.isInActiveTask()},e.prototype.getDockClass=function(){return this.dockStatusesToClasses[this.assistantManager.getDockStatus()]},e.prototype.shouldShowDock=function(){return!(this.flags.removeSpinnerAsStageReady&&!this.initFinished)&&(!this.flags.noTour&&!this.applicationState.isPreviewDisplay())},Object.defineProperty(e.prototype,"showSmartAssistBadge",{get:function(){return this.assistantManager.getDockStatus()!==n.AssistantDockStatus.Playing},enumerable:!0,configurable:!0}),e}();angular.module("siteGeneratorTourManagerInternal").component("assistantDock",{template:'\n                <div class="assistant-dock tour-dock" ng-click="$ctrl.handleAssistantMenuClick()" ng-class="$ctrl.getDockClass()" ng-if="$ctrl.shouldShowDock()">\n                  <div class="tour-dock-element tour-dock-animate tour-dock-inner-circle"></div>\n                  <div class="tour-dock-element tour-dock-animate tour-dock-icon">\n                    <div class="tour-dock-icon-arrow cc-icon-assistant-menu-play" data-hook="tour-dock-icon-arrow"></div>\n                    <div class="tour-dock-icon-square"></div>\n                    <div class="tour-dock-icon-disabled"></div>\n                  </div>\n                  <smart-assist-badge ng-if="$ctrl.showSmartAssistBadge" />\n                </div>\n              ',controller:a,bindings:{}})},function(e,t,i){"use strict";var n=function(){function e(){}return e.prototype.isSuccessMessage=function(){return this.successMessage},e}();angular.module("siteGeneratorTourManagerInternal").component("assistantIndicatorStep",{template:'\n            <i class="cc-icon-positive-validation"></i>\n              ',controller:n,bindings:{successMessage:"=?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(248),o=i(4),r=i(1),a=function(){function e(e,t,i,n,o,r,a,s){this.$rootScope=e,this.assistantManager=t,this.assistantUtils=i,this.consumerBiLogger=n,this.wixBiLogger=o,this.consumerBiLoggerHelpers=r,this.$injector=a,this.flags=s,this.registerBIListeners()}return e.$inject=["$rootScope","assistantManager","assistantUtils","consumerBiLogger","wixBiLogger","consumerBiLoggerHelpers","$injector","flags"],e.prototype.sendCustomBIEvent=function(e){if(!this.flags.silentBI){var t=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),a=this.consumerBiLoggerHelpers.getEsi(),s=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getDesignId(),c=this.consumerBiLoggerHelpers.getTotalPhases(),d=this.getActiveTaskName(),u=angular.merge({name:d,instanceId:t,msid:i,revision:n,structureId:o,industryId:r,esi:a,editMode:s,designId:l,totalPhases:c,src:66},e);return this.wixBiLogger.log(u)}},e.prototype.registerBIListeners=function(){var e=this;this.registerBIEvent(o.AssistantAction.EVENTS.ACTION_START,function(){e.consumerBiLogger.tour.phaseDuringTour(e.getActiveTaskName())}),this.registerBIEvent(o.AssistantAction.EVENTS.TASK_SKIP,function(t,i){e.consumerBiLogger.tour.skipTour(i.BI.description)}),this.registerBIEvent(o.AssistantAction.EVENTS.TASK_QUIT,function(){e.consumerBiLogger.tour.quitTour(e.getActiveTaskName())}),this.registerBIEvent(o.AssistantAction.EVENTS.TASK_START,function(){e.consumerBiLogger.tour.start(e.getActiveTaskName())}),this.registerBIEvent(o.AssistantAction.EVENTS.TASK_COMPLETE,function(){e.consumerBiLogger.tour.complete(e.getActiveTaskName())}),this.registerBIEvent(o.AssistantAction.EVENTS.TASK_TIMEOUT,function(){var t=n.AssistantWaitUntilElement.WAIT_UNTIL_ELEMENT_INTERVAL_IN_MS*n.AssistantWaitUntilElement.WAIT_UNTIL_ELEMENT_MAX_TRIES/1e3;e.consumerBiLogger.tour.timeout(t,"",e.getActiveTaskName())}),this.registerBIEvent(o.AssistantAction.EVENTS.OPEN_MENU,function(t,i,n){if(i!==r.BIOrigins.OnSiteStart){var o=e.$injector.get("assistantTaskFetcher");e.consumerBiLogger.tour.assistantMenuShown(o.getNumOfCompletedTasks().toString(),i,n)}}),this.registerBIEvent(o.AssistantAction.EVENTS.CLOSE_MENU,function(){e.consumerBiLogger.tour.closeAssistant()}),this.registerBIEvent(o.AssistantAction.EVENTS.MANUAL_OR_AUTO_CHOSE_AUTO,function(){e.consumerBiLogger.tour.firstStepSelectionForMeOrShowMe("do it for me",e.getActiveTaskName())}),this.registerBIEvent(o.AssistantAction.EVENTS.MANUAL_OR_AUTO_CHOSE_MANUAL,function(){e.consumerBiLogger.tour.firstStepSelectionForMeOrShowMe("show me how",e.getActiveTaskName())}),this.registerBIEvent(o.AssistantAction.EVENTS.KEEP_TRYANOTHER_CHOSE_TRYANOTHER,function(){e.consumerBiLogger.tour.lastStepSelectionKeepOrTryAnother("try another",e.getActiveTaskName())}),this.registerBIEvent(o.AssistantAction.EVENTS.KEEP_TRYANOTHER_CHOSE_KEEP,function(){e.consumerBiLogger.tour.lastStepSelectionKeepOrTryAnother("keep",e.getActiveTaskName())})},e.prototype.getTaskExecutionMode=function(){return!this.assistantManager.isInActiveTask()||this.assistantManager.isMenuOpen()?"no-tour":this.assistantManager.isInAutoplayMode()?"auto-tour":"manual-tour"},e.prototype.registerBIEvent=function(e,t){this.$rootScope.$on(e,t)},e.prototype.getActiveTaskName=function(){return this.assistantManager.getActiveTask().BI.description},e}();t.AssistantBI=a,angular.module("siteGeneratorTourManagerInternal").service("assistantBI",a).run(["assistantBI",function(e){}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r){this.$translate=e,this.CcDialogBuilder=t,this.$document=i,this.consumerBiLogger=n,this.CONSUMER_DIALOGS=o,this.$timeout=r,this.isShow=!1}return e.$inject=["$translate","CcDialogBuilder","$document","consumerBiLogger","CONSUMER_DIALOGS","$timeout"],e.prototype.close=function(){this.isShow=!1,this.consumerBiLogger.tour.assistantVideoModalClose(),this.CcDialogBuilder.hide()},e.prototype.open=function(){this.isShow=!0,this.consumerBiLogger.tour.assistantVideoModalLoaded("assistant")},e.prototype.isShowVideo=function(){return this.isShow},e.prototype.getAssistantVideoUrl=function(e){return this.$translate.instant(e||"assistant-menu.assistant-video-link")},e.prototype.onAssistantVideoClicked=function(e,t){this.open(),this.CcDialogBuilder.show({parent:this.$document.body,targetEvent:e,biDialogName:this.CONSUMER_DIALOGS.BUSINESS_DETAILS,template:'<md-dialog aria-label="Business details" class="big-modal assistant-video-modal">\n              <assistant-video video="\''+(t||"")+"'\"></assistant-video>\n            </md-dialog>"})},e}();t.AssistantVideoService=n,angular.module("siteGeneratorTourManagerInternal").service("assistantVideoService",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=i(0),r=function(){function e(e,t,i){this.assistantManager=e,this.assistantUtils=t,this.flags=i,this.tooltip=this.action.tooltip||{},this.isAutoPlay||(this.tooltip.closeable={enabled:!0,intent:{operation:n.AssistantOperation.Complete}})}return e.$inject=["assistantManager","assistantUtils","flags"],Object.defineProperty(e.prototype,"title",{get:function(){return this.tooltip.title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"customStyle",{get:function(){return this.tooltip.customStyle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this.tooltip.content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttons",{get:function(){return this.tooltip.buttons},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonsExist",{get:function(){return o.some(this.tooltip.buttons)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.tooltip.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAutoPlay",{get:function(){return this.action.onEnter&&this.action.onEnter.startAutoplay||this.action.hint&&this.action.hint.enabled},enumerable:!0,configurable:!0}),e.prototype.isSuccessMessage=function(){return this.tooltip.successMessage},e.prototype.showCloseButton=function(){return this.tooltip.closeButton},e.prototype.hasTitle=function(){return!!this.title},e.prototype.hasContent=function(){return!!this.content},e.prototype.hasButtons=function(){return!!this.buttons},e.prototype.isHorizontal=function(){return this.orientation===n.TooltipOrientation.Horizontal||!this.hasButtons()&&this.orientation!==n.TooltipOrientation.Vertical},e.prototype.isVertical=function(){return this.orientation===n.TooltipOrientation.Vertical||this.hasButtons()&&this.orientation!==n.TooltipOrientation.Horizontal},e.prototype.hasImage=function(){return!!this.tooltip.image},e.prototype.getImageName=function(){return this.tooltip.image},e.prototype.canClose=function(){return this.tooltip.closeable&&this.tooltip.closeable.enabled},e.prototype.closeClicked=function(){this.assistantManager.setIntent(this.tooltip.closeable.intent)},e.prototype.onButtonClick=function(e){e.BI&&e.BI.event&&this.assistantUtils.broadcastAssistantEvent(e.BI.event),e.intent&&this.assistantManager.setIntent(e.intent),e.callback&&e.callback()},e.prototype.isFullscreen=function(){return this.action.tooltip.customClasses&&this.action.tooltip.customClasses.indexOf("assistant-tooltip-fullscreen")>-1},e}();angular.module("siteGeneratorTourManagerInternal").component("assistantTooltip",{controller:r,template:'<div class="tour-step success-message" ng-style=":: $ctrl.customStyle" ng-if=":: $ctrl.isSuccessMessage()">\n                  <assistant-indicator-step success-message="true"></assistant-indicator-step>\n                  <div class="tour-step-title" ng-if=":: $ctrl.hasTitle()" ng-bind-html=":: $ctrl.title | translate"></div>\n                  <div class="tour-step-content-wrapper">\n                    <div>\n                      <div class="tour-step-content content-style success-content-style" ng-bind-html=":: $ctrl.content | translate"></div>\n                    </div>\n                  </div>\n                  <div class="tour-step-actions success-button-container">\n                    <button ng-repeat="(key, button) in $ctrl.buttons" class="tour-button medium" ng-click="$ctrl.onButtonClick(button)" data-hook="tour-tooltip-button" adi-automation="{{key}}"><span ng-bind-html="::button.label | translate"> </span></button>\n                  </div>\n                </div>\n\n                <div class="tour-step-with-action" ng-style=":: $ctrl.customStyle" ng-if=":: !$ctrl.isSuccessMessage()" ng-class="{\'tour-buttons-style\': !$ctrl.buttonsExist}">\n                  <div class="tour-step-image" ng-if=":: $ctrl.hasImage()" style="min-height:168px">\n                    <img relative-src="images/tour/{{$ctrl.getImageName()}}"/>\n                  </div>\n                  <div class="tour-step-title" ng-if=":: $ctrl.hasTitle()" ng-bind-html=":: $ctrl.title | translate"></div>\n                  <div class="tour-step-close cc-icon-close-10" ng-if=":: $ctrl.canClose() && $ctrl.showCloseButton()" ng-click="$ctrl.closeClicked()"></div>\n                  <div class="tour-step-content-wrapper">\n                    <div>\n                      <div class="tour-step-content content-style" ng-if=":: $ctrl.hasContent()" ng-bind-html=":: $ctrl.content | translate"></div>\n                      <div class="tour-step-actions -right" data-hook="assistant-tooltip-actions" ng-if=":: $ctrl.buttonsExist">\n                        <button ng-repeat="(key, button) in $ctrl.buttons track by $index" class="tour-button medium" ng-class="{\'button-{{$index}}\': true}" ng-click="$ctrl.onButtonClick(button)" data-hook="tour-tooltip-button" adi-automation="{{key}}"><span ng-bind-html="::button.label | translate"> </span></button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ',bindings:{action:"="}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);angular.module("siteGeneratorTourManagerInternal").directive("assistantStopOnEscape",["flags","assistantManager","consumerBiLogger","assistantUtils",function(e,t,i,o){return{link:function(e,i){angular.element(i).keydown(n.debounce(function(e){var i=t.isInActiveTask(),n=(27===e.which||27===e.keyCode)&&t.canStop(),o=(e.metaKey||e.ctrlKey)&&e.shiftKey&&e.altKey&&"T"===String.fromCharCode(e.keyCode);i&&(n||o)&&t.stop()},500))}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o){this.assistantManager=e,this.consumerBiLogger=t,this.SmartAssistManager=i,this.assistantTaskFetcher=n,this.flags=o}return e.$inject=["assistantManager","consumerBiLogger","SmartAssistManager","assistantTaskFetcher","flags"],e.prototype.close=function(){this.assistantManager.stop()},e}();angular.module("siteGeneratorTourManagerInternal").component("assistantMenuNew",{controller:n,templateUrl:"views/assistant/assistant-menu-new.html"})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(184),o=function(){function e(e,t,i,o,r,a){var s;this.assistantMenuBucketService=e,this.assistantTaskFetcher=t,this.$timeout=i,this.$scope=o,this.$element=r,this.flags=a,this.bucketIdToIconClass=((s={})[n.BucketId.ESSENTIALS]="cc-icon-assistant-bucket-essentials",s[n.BucketId.CHANGE_CONTENT]="cc-icon-assistant-bucket-content",s[n.BucketId.IMPORTED_CONTENT]="cc-icon-assistant-bucket-imported-content",s[n.BucketId.CHANGE_SITE_DESIGN]="cc-icon-assistant-bucket-site-design",s[n.BucketId.CHANGE_SECTION_DESIGN]="cc-icon-assistant-bucket-section-design",s[n.BucketId.PUBLISH]="cc-icon-assistant-bucket-publish",s[n.BucketId.CONNECT_DOMAIN]="cc-icon-assistant-bucket-connect-domain",s[n.BucketId.SEO]="cc-icon-assistant-bucket-seo",s),this.order=this.assistantMenuBucketService.bucketsOrder,this.bucketList=this.initiateBucketList(),this.scrollToActiveBucket()}return e.$inject=["assistantMenuBucketService","assistantTaskFetcher","$timeout","$scope","$element","flags"],e.prototype.isActiveBucket=function(e){return e.id===n.AssistantMenuBucketService.activeBucketId},e.prototype.initiateBucketList=function(){var e=this;return this.order.map(function(t,i){return{id:t,name:e.assistantMenuBucketService.bucketName(t),description:e.assistantMenuBucketService.bucketDescription(t),taskIds:e.getTaskIds(t),iconClass:e.bucketIdToIconClass[t],collapse:!1,lock:!1,isSkipExpandAnimation:!0}})},e.prototype.onRenderComplete=function(e){this.$scope.$applyAsync(function(){e()})},e.prototype.getTaskIds=function(e){return this.assistantMenuBucketService.bucketTaskIds(e)},e.prototype.scrollToActiveBucket=function(){var e=this;this.onRenderComplete(function(){var t=e.$element.closest(".assistant-tab-content"),i=e.$element.find('[data-active-bucket="true"]:not(:first-child)');if(i.length>0){var n=function(e){return e.offset().top+e[0].clientHeight},o=n(i)-n(t);o>0&&t.animate({scrollTop:o-t.scrollTop()},0)}})},e}();angular.module("siteGeneratorTourManagerInternal").component("assistantMenuBucketList",{controller:o,templateUrl:"views/assistant/assistant-menu-bucket-list.html"})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.flags=e,this.assistantVideoService=t}return e.$inject=["flags","assistantVideoService"],e.prototype.close=function(){this.onClose()},e}();angular.module("siteGeneratorTourManagerInternal").component("assistantMenuHeader",{controller:n,templateUrl:"views/assistant/assistant-menu-header.html",bindings:{onClose:"&"}})},function(e,t){var i=function(){function e(e){this.flags=e}return e.$inject=["flags"],Object.defineProperty(e.prototype,"animatingCollapseState",{get:function(){return this.isCollapsed||!this.isSkipExpandAnimation},enumerable:!0,configurable:!0}),e.prototype.headerClick=function(){this.onHeaderClick()},e}();angular.module("siteGeneratorTourManagerInternal").component("assistantMenuBucket",{controller:i,templateUrl:"views/assistant/assistant-menu-bucket.html",bindings:{name:"<",bucketId:"<",description:"<",taskIds:"<",isCollapsed:"<",onHeaderClick:"&",iconClass:"<",isSkipExpandAnimation:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(184),o=function(){function e(e,t,i){this.assistantTaskFetcher=e,this.assistantManager=t,this.flags=i,this.buildTaskList()}return e.$inject=["assistantTaskFetcher","assistantManager","flags"],e.prototype.buildTaskList=function(){var e=this;this.taskList=this.taskIds.map(function(t){var i=e.assistantTaskFetcher.getTask(t);return e.flags.textManager&&e.flags.textManagerTours?{id:i.id,name:i.label,hidden:i.hidden}:{id:i.id,name:i.label}})},e.prototype.startTask=function(e){var t=this.assistantTaskFetcher.getTask(e);n.AssistantMenuBucketService.activeBucketId=this.bucketId,this.assistantManager.startTask(t)},e.prototype.isTaskHidden=function(e){return this.flags.textManager&&this.flags.textManagerTours&&e.hidden},e}();angular.module("siteGeneratorTourManagerInternal").component("assistantMenuTaskList",{controller:o,templateUrl:"views/assistant/assistant-menu-task-list.html",bindings:{taskIds:"<",bucketId:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i){this.assistantManager=e,this.flags=t,this.storyServices=i}return e.$inject=["assistantManager","flags","storyServices"],e.prototype.isTaskVisited=function(){return n.get(this.storyServices.story,"visitedTasks."+this.taskId+"."+this.assistantManager.visitedTaskKey)},e}();angular.module("siteGeneratorTourManagerInternal").component("assistantMenuTask",{controller:o,templateUrl:"views/assistant/assistant-menu-task.html",bindings:{name:"<",taskId:"<",onExecute:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(183),o=i(1),r=function(){function e(e,t,i){this.assistantTabListService=e,this.$translate=t,this.flags=i,this.assistantTabListService.tabListOpened()}return e.$inject=["assistantTabListService","$translate","flags"],e.prototype.getAssistantBucketHeader=function(){return this.$translate.instant("tour.stepmanager.title")},Object.defineProperty(e.prototype,"bucketListTabSelected",{get:function(){return this.assistantTabListService.getSelectedTab()===n.AssistantTabListService.TAB_ID.BUCKET_LIST},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smartAssistTabSelected",{get:function(){return this.assistantTabListService.getSelectedTab()===n.AssistantTabListService.TAB_ID.SMART_ASSIST},enumerable:!0,configurable:!0}),e.prototype.bucketListTabClick=function(e){void 0===e&&(e=o.BIOrigins.SwitchTab),this.assistantTabListService.selectBucketListTab(e)},e.prototype.emptyStateButtonClick=function(){this.bucketListTabClick(o.BIOrigins.SmartAssistEmptyStateButton)},e.prototype.smartAssistTabClick=function(){this.assistantTabListService.selectSmartAssistTab()},e}();angular.module("siteGeneratorTourManagerInternal").component("assistantTabList",{controller:r,templateUrl:"views/assistant/assistant-tab-list.html"})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.assistantVideoService=e}return e.$inject=["assistantVideoService"],e.prototype.openAssistantVideo=function(e){this.assistantVideoService.onAssistantVideoClicked(e)},e}();angular.module("siteGeneratorTourManagerInternal").component("assistantBucketListTab",{controller:n,templateUrl:"views/assistant/assistant-bucket-list-tab.html"})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y){var T=this;if(this.assistantUtils=e,this.tpaDiscovery=t,this.flags=i,this.$timeout=n,this.createTPATask=o,this.tasks={},this.calculatedTasks={},[a,r,s,l,u,g,h,m,f,v,S,d,c,p,y].forEach(function(e){T.addTask(e)}),this.flags.textManager&&this.flags.textManagerTours){["importImagesAssistantTask","importContentAssistantTask"].forEach(function(e){T.addTask({id:e,hidden:!0})})}}return e.$inject=["assistantUtils","tpaDiscovery","flags","$timeout","createTPATask","previewTask","welcomeTask","entireWebsiteDesignTask","colorDesignTask","fontPanelTask","animationTask","changeLayoutTask","customizeSectionDesign","editContentTask","addSectionTask","addPageTask","publishTask","connectDomainTask","pageSEOTask","seoWizTask"],e.prototype.addTask=function(e){this.tasks[e.id]=e},e.prototype.updateTask=function(e,t){Object.assign(this.tasks[e],t)},e.prototype.updateTaskHidden=function(e,t){var i=this;this.$timeout(function(){i.tasks[e].hidden=t})},e.prototype.applySavedTasks=function(e){angular.merge(this.tasks,e)},e.prototype.getTask=function(e){if(this.isTaskDefined(e)){if(!this.calculatedTasks[e]){var t=void 0;t=this.isTpaTask(e)?this.createTPATask(this.extractTpaKey(e),e):this.getTaskByActiveExperiments(this.tasks[e]),this.calculatedTasks[e]=t}return this.calculatedTasks[e]}},e.prototype.getNumOfCompletedTasks=function(){return n.filter(this.tasks,function(e){return e.isComplete}).length},e.prototype.getTpaTaskIds=function(){var e=this;return n.map(this.tpaDiscovery.manageableTPAs,function(t,i){return e.buildUniqueTpaTaskId(i)})},e.prototype.isTaskDefined=function(e){return Boolean(this.tasks[e])||this.isTpaTask(e)},e.prototype.isTpaTask=function(e){return-1!==this.getTpaTaskIds().indexOf(e)},e.prototype.extractTpaKey=function(e){return e.substr("createTpaTask_".length)},e.prototype.buildUniqueTpaTaskId=function(e){return"createTpaTask_"+e},e.prototype.getTaskByActiveExperiments=function(e){if(!e.experiments)return e;var t=this.assistantUtils.getActiveExperiments(),i=Object.keys(e.experiments).filter(function(e){return-1!==t.indexOf(e)}).map(function(t){return e.experiments[t]});return angular.extend.apply(angular,[{},e].concat(i))},e}();t.AssistantTaskFetcher=o,angular.module("siteGeneratorTourManagerInternal").service("assistantTaskFetcher",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);angular.module("siteGeneratorTourManagerInternal").factory("menuTask",function(){return{id:"menuTask",label:"Menu",BI:{description:"momTour"},actions:[(new n.AssistantAction).thatAttachesTo().dock().and.withTooltip().withTemplate("<assistant-menu-new></assistant-menu-new>").withCloseButton().thatOpensUp({offsetY:15}).and.withBackdrop().thatIsInvisible().and.withBI().withDescription("MOM").and.withConditionalConf().and.withCustomConf({exitTriggers:[{element:"$element",trigger:"click",intent:{operation:n.AssistantOperation.NoOp}},{element:n.AssistantAction.HOOKS.BACKDROP,trigger:"click",intent:{operation:n.AssistantOperation.Stop}}]}).build()]}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=i(20),r=i(1);angular.module("siteGeneratorTourManagerInternal").factory("welcomeTask",["assistantManager","assistantUIAdapter","assistantUtils","$timeout","storyServices","wixmpServices","silentPageBuilder","$rootScope","flags","undoRedo","autoSaveNotifier","applicationState","consumerBiLogger","wizWebsite",function(e,t,i,a,s,l,c,d,u,p,g,h,m,f){var v=u.newTopBar&&u.newPreviewMode,S=u.newIntroDesign?"<welcome-task-start-new />":"<welcome-task-start />",y=(new n.AssistantAction).withTooltip().thatOpensFullScreen().withTemplate(S).and.withBackdrop().thatIsOpaque().and.withTriggers().nextOnBackdropClick().and.withBehaviors().and.withBI().withDescription("Hello. I am ADI, Wixs Artificial Design Intelligence.").and.withCallbacks().onEnter(function(t){e.setDockStatus(n.AssistantDockStatus.Hidden),e.setTaskComplete(t),u.preferSocialImages&&s.story&&s.story.privateMediaFolderId&&l.getSocialImages(s.story.privateMediaFolderId),p.startSlowAutoSave()}).build(),T=u.newPreviewMode?"tour.welcome2.complete3.title":"tour.welcome2.complete.title",b=u.newPreviewMode?"tour.welcome2.complete3.full-site-title":"tour.welcome2.complete.full-site-title",I=u.newPreviewMode?"tour.welcome2.complete3.content":"tour.welcome2.complete.content",P=(new n.AssistantAction).thatAttachesTo().dock().and.withBehaviors().thatWaitsForSpinner().and.withBackdrop().thatIsInvisible().and.withTriggers().completeOnBackdropClick().and.withCallbacks().onEnter(function(){return p.endSlowAutoSave(),a(function(){$(".overlay-viewport").animate({scrollTop:0},1e3),e.setDockStatus(n.AssistantDockStatus.Stopped)},500)}).and.withBI().withDescription("I’ve completed the first version of your homepage.").and.withTooltip().withCloseButton().withTemplate('\n          <welcome-task-end\n            title="'+T+'"\n            fullTitle="'+b+'"\n            content="'+I+'"\n          ></welcome-task-end>\n        ').and.withConditionalConf().build(),M=(new n.AssistantAction).withBI().withDescription("Silent home page construction.").and.withBehaviors().thatWaitsForSpinner().and.withBackdrop().thatIsOpaque().and.withCallbacks().onEnter(function(t){c.constructAnyHomePage().then(function(){e.setTaskComplete(t),u.newPreviewMode||e.gotoNextAction(),u.newPreviewMode&&(m.builder.topBarPreviewSiteClick(o.BIModeType.previewInWelcomeTour),h.goToPreview(!1,!0).then(function(){e.gotoNextAction(),m.builder.topBarPreviewSiteSuccess(o.BIModeType.previewInWelcomeTour)}))})}).build(),E=(new n.AssistantAction).withBI().withDescription("Pick you favorite design").and.withBehaviors().thatSkipsStepOnCondition(function(){return f.wasLastConvertionSuccessfull()}).thatWaitsForSpinner().and.withTooltip().thatOpensFullScreen().thatOpensUnderneathSpinnerLayer().withTemplate("<page-presets-preview-control></page-presets-preview-control>").build(),w=(new n.AssistantAction).withBI().withDescription("Silent home page construction.").and.withBehaviors().thatWaitsForSpinner().and.withBackdrop().thatIsOpaque().and.withCallbacks().onEnter(function(t){c.constructAnyHomePage().then(function(){e.setTaskComplete(t),e.gotoNextAction()})}).build(),C=(new n.AssistantAction).withBI().withDescription("Pick you favorite design").and.withBehaviors().thatSkipsStepOnCondition(function(){return f.wasLastConvertionSuccessfull()}).thatWaitsForSpinner().and.withCallbacks().onEnter(function(){return h.disableMobileEditor(!0)}).and.withTooltip().thatOpensFullScreen().thatOpensUnderneathSpinnerLayer().withTemplate("<page-presets-preview-control></page-presets-preview-control>").build(),A=(new n.AssistantAction).withTooltip().withContent("tour.welcome2.preview-site.title").thatOpensDown().and.withBehaviors().thatDelays(200).and.withBackdrop().thatIsOff().and.thatAttachesTo().hook(n.AssistantAction.HOOKS.EXIT_PREVIEW_BUTTON).and.withTriggers().goToOnElementClick(n.AssistantAction.HOOKS.CLOSE_PREVIEW,5).goToOnElementClick(n.AssistantAction.HOOKS.TOP_BAR_BACK_BUTTON,2).build(),L=((new n.AssistantAction).withTooltip().withContent("tour.welcome2.edit-site.title").thatOpensDown({offsetY:15}).and.withBehaviors().thatDelays(200).and.withBackdrop().thatIsOff().and.thatAttachesTo().hook(n.AssistantAction.HOOKS.EXIT_PREVIEW_BUTTON).and.withTriggers().goToOnElementClick(n.AssistantAction.HOOKS.CLOSE_PREVIEW,5).build(),(new n.AssistantAction).build());return{id:"welcomeTask",label:"Welcome Test",BI:{assistType:"bucket list",description:r.BIOrigins.WelcomeTour},isUnstoppable:!0,onExit:{callback:function(){i.triggerElement(n.AssistantAction.HOOKS.ADD_TAB,"mouseleave"),g.startCountingAutosaves()}},actions:v?[y,w,C,A,L,P]:[y,M,E,P]}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);angular.module("siteGeneratorTourManagerInternal").factory("previewTask",["flags","$translate",function(e,t){return{id:"previewTask",get label(){return t.instant("assistant-menu-task.preview.deprecated-label")},BI:{description:"previewTask"},actions:[(new n.AssistantAction).thatAttachesTo().hook(n.AssistantAction.HOOKS.PREVIEW_TAB).and.withTooltip().withWidth("288px").withContent("tour.preview.step0").thatOpensDown().and.withTriggers().nextOnElementClick().and.withBackdrop().thatIsOn().and.withBI().withDescription("Preview mode shows your website exactly as visitors will see it. Click Preview.").build(),(new n.AssistantAction).thatAttachesTo().hook(n.AssistantAction.HOOKS.EXIT_PREVIEW_BUTTON).and.withTooltip().and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick().and.withBehaviors().thatWaitsForSpinner().and.withBI().withDescription("When you're done previewing, click here.").and.withConditionalConf().customCondition(function(){return e.newPreviewMode},(new n.AssistantAction).withTooltip().withContent("tour.when-done2").withWidth("280px").thatOpensDown({offsetY:15}).build(),(new n.AssistantAction).withTooltip().withContent("tour.when-done").thatOpensLeft().build()).build()]}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(4),r=i(10);angular.module("siteGeneratorTourManagerInternal").factory("animationTask",["applicationState","previewScale","assistantManager","assistantUtils","flags","$translate",function(e,t,i,a,s,l){var c=(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.DESIGN_TAB).and.withTooltip().withContent("tour.animation.step0b").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return a.openSiteDesignTopBarMenu()}).and.withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().withAutoplayTimeoutOf(800).thatHasHint().and.withBI().withDescription("Opening Design Menu").build(),d=(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.DESIGN_MENU_ANIMATIONS_OPTION).and.withTooltip().withContent("tour.animation.step1b").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return a.closeSiteDesignTopBarMenu()}).and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.DESIGN_MENU_THEMES_OPTION).withDisabledElements(o.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION).withDisabledElements(o.AssistantAction.HOOKS.DESIGN_MENU_COLORS_OPTION).and.withBI().withDescription("Click Animation").build(),u=(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.ANIMATION_THUMBNAILS).and.withTooltip().withContent("tour.animation.step2-2").thatOpensRight().and.withBehaviors().thatRedirectsTo(n.STATES.BUILDER_DESIGN_KIT_ANIMATIONS).and.withBackdrop().thatIsOn().and.withCallbacks().onEnter(function(){return i.setDockStatus(o.AssistantDockStatus.Playing)}).and.withTriggers().nextOnElementClick(o.AssistantAction.HOOKS.ANIMATION_THUMBNAILS_EXCLUDE_NO_ANIMATION).goToOnElementClick(o.AssistantAction.HOOKS.ANIMATION_THUMBNAILS_NO_ANIMATION,5).and.withBI().withDescription("Choose an animation style").build(),p=(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.PREVIEW_TAB).and.withTooltip().withWidth("288px").withContent("tour.animation.step3").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withBehaviors().thatWaitsForSpinner().and.withBI().withDescription("Preview your animation to see if you like it").build(),g=(new o.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(2).and.withTooltip().withContent("tour.animation.step4").thatDoesntPreserveBackground().and.withConditionalConf().customCondition(function(){return s.newPreviewMode},(new o.AssistantAction).withTooltip().thatOpensDown({offsetY:15}).build(),(new o.AssistantAction).withTooltip().thatOpensLeft().build()).and.thatAttachesTo().hook(o.AssistantAction.HOOKS.EXIT_PREVIEW_BUTTON).and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(o.AssistantAction.HOOKS.CLOSE_PREVIEW).and.withCallbacks().onExit(function(){return e.goToBuilder()}).and.withBI().withDescription("Like this animation? Scroll your site to see more.").build(),h=(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.PREVIEW_TAB).and.withTooltip().withContent("tour.animation.step3").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().goToOnElementClick(o.AssistantAction.HOOKS.PREVIEW_TAB,6).and.withBehaviors().thatWaitsForSpinner().and.withBI().withDescription("Preview your animation to see if you like it").build(),m=(new o.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(2).and.thatAttachesTo().hook(o.AssistantAction.HOOKS.EXIT_PREVIEW_BUTTON).and.withTooltip().withContent("tour.animation.step5").thatOpensLeft().and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(o.AssistantAction.HOOKS.CLOSE_PREVIEW).and.withCallbacks().onExit(function(){return e.goToBuilder()}).and.withBI().withDescription("Here is your site without animation. Do you want to try another or keep it?").build();return{id:"animationTask",get label(){return l.instant("assistant-menu-task.animation.deprecated-label")},BI:{assistType:"bucket list",description:"animationTour"},onExit:{callback:function(){a.triggerElement(o.AssistantAction.HOOKS.DESIGN_TAB,"mouseleave"),t.setScaleFactor(r.PreviewScale.MaxScaleFactor)}},actions:[c,d,u,p,g,h,m]}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(4);angular.module("siteGeneratorTourManagerInternal").factory("entireWebsiteDesignTask",["assistantManager","assistantUtils","applicationState","flags","$translate",function(e,t,i,r,a){var s=(new o.AssistantAction).thatIsBasedOnTemplate().manualOrAuto().and.thatAttachesTo().dock().and.withBackdrop().thatIsInvisible().and.withTooltip().withContent("tour.entire-website-design.manual-or-auto").withCloseButton().and.withBehaviors().thatRedirectsTo(n.STATES.BUILDER_STORY).and.withBI().withDescription("You've chosen to change the design of your website. I can choose a new design for you or show").build(),l=(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.DESIGN_TAB).and.withTooltip().withContent("tour.entire-website-design.auto.step0b").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return t.openSiteDesignTopBarMenu()}).and.withBehaviors().thatStartsAutoplayOnEnter().withAutoplayTimeoutOf(800).thatHasHint().and.withBI().withDescription("Opening Design Menu").and.withConditionalConf().isInManualMode((new o.AssistantAction).withBehaviors().thatStopsAutoplayOnExit().build()).build(),c=(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.DESIGN_MENU_THEMES_OPTION).and.withTooltip().thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return t.closeSiteDesignTopBarMenu()}).and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.DESIGN_MENU_COLORS_OPTION).withDisabledElements(o.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION).withDisabledElements(o.AssistantAction.HOOKS.DESIGN_MENU_ANIMATIONS_OPTION).and.withBehaviors().withAutoplayTimeoutOf(800).and.withConditionalConf().isInAutoplayMode((new o.AssistantAction).withBehaviors().thatHasHint().and.withTooltip().withContent("tour.entire-website-design.auto.step0c").and.withBI().withDescription("Opening Themes Menu").build()).isInManualMode((new o.AssistantAction).withTooltip().withContent("tour.entire-website-design.manual.step0c").and.withBI().withDescription("Click Themes").build()).build(),d=(new o.AssistantAction).withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.SELECTED_KIT_OPTION).and.withTooltip().thatOpensRight().and.withConditionalConf().isInAutoplayMode((new o.AssistantAction).withTooltip().withContent("tour.entire-website-design.auto.step1").and.thatAttachesTo().hook(o.AssistantAction.HOOKS.KIT_OPTION).onlyUnselectedElements().randomElement().and.withBehaviors().thatHasHint().thatDelays(1e3).and.withTriggers().nextOnElementClick().and.withBI().withDescription("Choosing Design theme").build()).isInManualMode((new o.AssistantAction).withBackdrop().thatIsOn().and.withTooltip().withContent("tour.entire-website-design.manual.step1").and.thatAttachesTo().hook(o.AssistantAction.HOOKS.DESIGN_PANEL).and.withTriggers().nextOnElementClick(o.AssistantAction.HOOKS.KIT_OPTION).completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("Choose a Design theme").build()).build(),u=(new o.AssistantAction).thatAttachesTo().dock().and.thatIsBasedOnTemplate().keepOrAnother(1).and.withBehaviors().thatRedirectsTo(n.STATES.BUILDER_STORY).and.withBackdrop().thatIsInvisible().and.withTooltip().withContent("tour.entire-website-design.step2").withCloseButton().and.withBI().withDescription("What do you think of this design?").and.withConditionalConf().experimentIsEnabled("tourEnhancedKeepOrAnother",(new o.AssistantAction).withBehaviors().thatRedirectsTo().and.thatIsBasedOnTemplate().keepOrAnother(3).and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(o.AssistantAction.HOOKS.PREVIEW_CONTENT).goToOnElementClick(o.AssistantAction.HOOKS.PREVIEW_PADDING,3).and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.TOP_BAR).build()).build();return{id:"entireWebsiteDesignTask",get label(){return a.instant("assistant-menu-task.entire-website-design.deprecated-label")},BI:{assistType:"bucket list",description:"entireWebsiteDesignTour"},onEnter:{callback:function(){e.setCustomTaskData("scrollToSelectedKit",!0)}},onExit:{callback:function(){t.triggerElement(o.AssistantAction.HOOKS.DESIGN_TAB,"mouseleave"),i.goToBuilder()}},actions:[s,l,c,d,u]}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=i(10);angular.module("siteGeneratorTourManagerInternal").factory("colorDesignTask",["applicationState","previewScale","assistantUtils","flags","$translate",function(e,t,i,r,a){var s=(new n.AssistantAction).thatAttachesTo().hook(n.AssistantAction.HOOKS.DESIGN_TAB).and.withTooltip().withContent("tour.coloration.step0b").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return i.openSiteDesignTopBarMenu()}).and.withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().withAutoplayTimeoutOf(800).thatHasHint().and.withBI().withDescription("Opening Design Menu").build(),l=(new n.AssistantAction).thatAttachesTo().hook(n.AssistantAction.HOOKS.DESIGN_MENU_COLORS_OPTION).and.withTooltip().withContent("tour.coloration.step0c").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return i.closeSiteDesignTopBarMenu()}).and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.DESIGN_MENU_THEMES_OPTION).withDisabledElements(n.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION).withDisabledElements(n.AssistantAction.HOOKS.DESIGN_MENU_ANIMATIONS_OPTION).and.withBI().withDescription("Click Colors").build(),c=(new n.AssistantAction).thatIsBasedOnTemplate().singleButtonTooltip("tour.button.gotit").and.withTooltip().withContent("tour.coloration.step3").thatOpensRight().and.thatAttachesTo().hook(n.AssistantAction.HOOKS.LEFT_PANEL).and.withBackdrop().thatIsOn().and.withTriggers().nextOnBackdropClick().nextOnElementClick(n.AssistantAction.HOOKS.LEFT_PANEL).and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.LEFT_PANEL).and.withCallbacks().onEnter(function(){e.clearContentFocus(),t.setScaleFactor(o.PreviewScale.MinScaleFactor)}).and.withBI().withDescription("here is your recommended main color and palettes").build(),d=(new n.AssistantAction).thatAttachesTo().hook(n.AssistantAction.HOOKS.LEFT_PANEL).and.withTooltip().withContent("tour.coloration.step4").thatOpensRight().and.withBackdrop().thatIsOn().and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.ADVANCED_EDITING_NEW_COLORATION).withDisabledElements(n.AssistantAction.HOOKS.PANEL_BACK_BUTTON).withDisabledElements(".advanced-editing-button").and.withTriggers().nextOnElementClick(n.AssistantAction.HOOKS.LEFT_PANEL,n.AssistantAction.HOOKS.KIT_PALETTE_NEW_COLORATION).nextOnElementClick(n.AssistantAction.HOOKS.BODY,n.AssistantAction.HOOKS.MAIN_COLOR_DIALOG_COLOR_TAG).nextOnElementClick(n.AssistantAction.HOOKS.BODY,n.AssistantAction.HOOKS.MAIN_COLOR_DIALOG_CONFIRM_BUTTON_NEW_COLORATION).completeOnElementClick(n.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("pick a palette or change the main color").build(),u=(new n.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(3).and.withTooltip().withCloseButton().withContent("tour.coloration.step5").and.thatAttachesTo().dock().and.withTriggers().goToOnElementClick(n.AssistantAction.HOOKS.PREVIEW_PADDING,3).completeOnElementClick(n.AssistantAction.HOOKS.PREVIEW_CONTENT).and.withBackdrop().thatIsOff().and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(n.AssistantAction.HOOKS.ADVANCED_EDITING_NEW_COLORATION).and.withBI().withDescription("What do you think of the new set of colors?").and.withCustomConf({tooltip:{disabled:!1,buttons:{TRY_ANOTHER:{label:"tour.coloration.try-another",intent:{operation:n.AssistantOperation.Goto},BI:{event:n.AssistantAction.EVENTS.KEEP_TRYANOTHER_CHOSE_TRYANOTHER}},KEEP_IT:{label:"tour.coloration.keep-it",intent:{operation:n.AssistantOperation.Complete},BI:{event:n.AssistantAction.EVENTS.KEEP_TRYANOTHER_CHOSE_KEEP}}}}}).build();return{id:"colorDesignTask",get label(){return a.instant("assistant-menu-task.color-design.deprecated-label")},BI:{assistType:"bucket list",description:"colorDesignTour"},onExit:{callback:function(){i.triggerElement(n.AssistantAction.HOOKS.DESIGN_TAB,"mouseleave"),t.setScaleFactor(o.PreviewScale.MaxScaleFactor),e.goToBuilder()}},actions:[s,l,c,d,u]}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(4);angular.module("siteGeneratorTourManagerInternal").factory("fontPanelTask",["assistantManager","assistantUtils","applicationState","flags","$translate",function(e,t,i,r,a){var s=(new o.AssistantAction).thatIsBasedOnTemplate().manualOrAuto().and.thatAttachesTo().dock().and.withBackdrop().thatIsInvisible().and.withTooltip().withCloseButton().withContent("tour.fonts.new-font.manual-or-auto").and.withBehaviors().thatRedirectsTo(n.STATES.BUILDER_STORY).and.withBI().withDescription("Let's switch up your website's fonts.").build(),l=(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.DESIGN_TAB).and.withTooltip().thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return t.openSiteDesignTopBarMenu()}).and.withBehaviors().withAutoplayTimeoutOf(1500).and.withBI().withDescription("Opening Design Menu").and.withConditionalConf().isInAutoplayMode((new o.AssistantAction).withBehaviors().thatHasHint().and.withTooltip().withContent("tour.fonts.auto.step0").build()).isInManualMode((new o.AssistantAction).withBehaviors().thatStopsAutoplayOnExit().and.withTooltip().withContent("tour.fonts.manual.step0").build()).build(),c=(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION).and.withTooltip().thatOpensRight().and.withBackdrop().thatIsOn().and.withCallbacks().onExit(function(){return t.closeSiteDesignTopBarMenu()}).and.withCustomStage().withAdditionalHighlight(o.AssistantAction.HOOKS.SITE_DESIGN_DROPDOWN_MENU).withDisabledElements(o.AssistantAction.HOOKS.DESIGN_MENU_THEMES_OPTION).withDisabledElements(o.AssistantAction.HOOKS.DESIGN_MENU_COLORS_OPTION).withDisabledElements(o.AssistantAction.HOOKS.DESIGN_MENU_ANIMATIONS_OPTION).and.withBehaviors().withAutoplayTimeoutOf(800).and.withConditionalConf().isInAutoplayMode((new o.AssistantAction).withTriggers().nextOnElementClick().and.withTooltip().withContent("tour.fonts.auto.step1b").and.withBehaviors().thatHasHint().and.withBackdrop().thatIsInvisible().and.withBI().withDescription("Opening Fonts Menu").build()).isInManualMode((new o.AssistantAction).withTriggers().goToOnElementClick(o.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION,3).and.withTooltip().withContent("tour.fonts.manual.step1b").and.withBI().withDescription("Click Fonts").build()).build(),d=(new o.AssistantAction).withTooltip().thatOpensRight().and.withConditionalConf().isInAutoplayMode((new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.FONT_THUMBNAIL).onlyUnselectedElements().randomElement().and.withTooltip().withContent("tour.fonts.auto.step3").and.withBackdrop().thatIsOn().and.withCustomStage().withAdditionalHighlight(o.AssistantAction.HOOKS.FONT_PANEL).withDisabledElements(o.AssistantAction.HOOKS.RETURN_BUTTON).and.withBehaviors().thatHasHint().thatRedirectsTo(n.STATES.BUILDER_DESIGN_KIT_FONTS_NEW).thatDelays(1e3).withAutoplayTimeoutOf(1500).and.withTriggers().nextOnElementClick().and.withBI().withDescription("Choosing Font Set").build()).isInManualMode((new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.FONT_PANEL).and.withTooltip().withContent("tour.newFonts.manual.step3").and.withBackdrop().thatIsOn().and.withBehaviors().thatRedirectsTo(n.STATES.BUILDER_DESIGN_KIT_FONTS_NEW).and.withTriggers().nextOnElementClick(o.AssistantAction.HOOKS.FONT_THUMBNAIL).completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withCallbacks().onEnter(function(){return t.goToOnSliderHandled(5)}).and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.RETURN_BUTTON).and.withBI().withDescription("Choose a Font Set").build()).build(),u=(new o.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(3).and.withTooltip().withCloseButton().withContent("tour.fonts.manual.font-set.step4").and.thatAttachesTo().dock().and.withTriggers().completeOnBackdropClick().completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("What do you think of this font set?").and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(o.AssistantAction.HOOKS.RETURN_BUTTON).and.withCustomConf({additionalHighlightedElements:[o.AssistantAction.HOOKS.LEFT_PANEL]}).withConditionalConf().experimentIsEnabled("tourEnhancedKeepOrAnother",(new o.AssistantAction).withBehaviors().thatRedirectsTo().and.thatIsBasedOnTemplate().keepOrAnother(3).and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(o.AssistantAction.HOOKS.PREVIEW_CONTENT).completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).goToOnElementClick(o.AssistantAction.HOOKS.PREVIEW_PADDING,3).and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(o.AssistantAction.HOOKS.RETURN_BUTTON).build()).build(),p=(new o.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(3).and.withTooltip().withCloseButton().withContent("tour.fonts.manual.font-size.step4").and.thatAttachesTo().dock().and.withTriggers().completeOnBackdropClick().completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("What do you think of this font size?").and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(o.AssistantAction.HOOKS.RETURN_BUTTON).and.withCustomConf({additionalHighlightedElements:[o.AssistantAction.HOOKS.LEFT_PANEL]}).withConditionalConf().isInAutoplayMode((new o.AssistantAction).withBehaviors().thatStartsAutoplayOnExit().build()).build();return{id:"fontPanelTask",get label(){return a.instant("assistant-menu-task.font-panel.deprecated-label")},BI:{assistType:"bucket list",description:"fontPanelTour"},onExit:{callback:function(){t.triggerElement(o.AssistantAction.HOOKS.DESIGN_TAB,"mouseleave"),i.goToBuilder()}},actions:[s,l,c,d,u,p]}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(4),r=i(10);angular.module("siteGeneratorTourManagerInternal").factory("editContentTask",["assistantManager","assistantUtils","applicationState","flags","$translate","previewScale",function(e,t,i,a,s,l){var c=(new o.AssistantAction).thatAttachesTo().dock().and.withTooltip().withContent("tour.edit-content.step2").and.withCustomStage().withAdditionalHighlight(o.AssistantAction.HOOKS.PREVIEW_CONTAINER).withDisabledElements(o.AssistantAction.HOOKS.INSERT_SECTION_BUTTON).and.withTriggers().nextOnElementClick(o.AssistantAction.HOOKS.OVERLAY_CONTAINER,o.AssistantAction.HOOKS.OVERLAY_SECTION_NOT_TPA).and.withBackdrop().thatIsOn().and.withBehaviors().thatRedirectsTo(n.STATES.BUILDER_STORY).and.withCallbacks().onEnter(function(){i.clearContentFocus(),l.setScaleFactor(r.PreviewScale.MinScaleFactor)}).and.withBI().withDescription("Select a section to edit its content").build(),d=(new o.AssistantAction).withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.OVERLAY_EDIT_SECTION_BODY).withDisabledElements(o.AssistantAction.HOOKS.OVERLAY_EDIR_SECTION_HEADER).and.thatIsBasedOnTemplate().singleButtonTooltip("tour.button.gotit").and.thatAttachesTo().hook(o.AssistantAction.HOOKS.NODE_EDITOR).and.withTooltip().withContent("tour.edit-content.step4").thatOpensRight().and.withTriggers().nextOnElementClick().and.withTriggers().nextOnBackdropClick().completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBackdrop().thatIsOn().and.withBI().withDescription("Edit your content here and I'll update the changes in your website. You can hide or show text with one click.").build(),u=(new o.AssistantAction).thatAttachesTo().dock().and.withTooltip().withContent("tour.when-done").and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(o.AssistantAction.HOOKS.PREVIEW_CONTENT).and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.TOP_BAR).and.withBI().withDescription("When you're done editing, click below").build();return{id:"editContentTask",get label(){return s.instant("assistant-menu-task.edit-content.deprecated-label")},BI:{assistType:"bucket list",description:"editContentTour"},onEnter:{callback:function(){t.hideListSpanButtons()}},onExit:{callback:function(){t.showListSpanButtons(),i.clearContentFocus(),l.setScaleFactor(r.PreviewScale.MaxScaleFactor)}},actions:[c,d,u]}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(4),r=i(10);angular.module("siteGeneratorTourManagerInternal").factory("changeLayoutTask",["assistantManager","assistantUtils","applicationState","flags","previewScale","$translate",function(e,t,i,a,s,l){var c=(new o.AssistantAction).thatIsBasedOnTemplate().manualOrAuto().and.thatAttachesTo().dock().and.withTooltip().withCloseButton().withContent("tour.change-layout.manual-or-auto").and.withBackdrop().thatIsInvisible().and.withBehaviors().thatRedirectsTo(n.STATES.BUILDER_STORY).and.withBI().withDescription("I'll change the layout of one of your sections").build(),d=(new o.AssistantAction).thatAttachesTo().dock().and.withCustomStage().withAdditionalHighlight(o.AssistantAction.HOOKS.PREVIEW_CONTAINER).and.withTriggers().nextOnElementClick(o.AssistantAction.HOOKS.OVERLAY_CONTAINER,o.AssistantAction.HOOKS.OVERLAY_SECTION_NOT_TPA).and.withBackdrop().thatIsOn().and.withBehaviors().thatStopsAutoplayOnEnter().and.withCallbacks().onEnter(function(){t.hideListSpanButtons(),i.clearContentFocus(),s.setScaleFactor(r.PreviewScale.MinScaleFactor)}).onExit(function(){return t.showListSpanButtons()}).and.withConditionalConf().isInAutoplayMode((new o.AssistantAction).withTooltip().withContent("tour.change-layout.auto.step0").and.withBehaviors().thatStartsAutoplayOnExit().and.withBI().withDescription("Pick the section you want to change and I'll choose a new layout.").build()).isInManualMode((new o.AssistantAction).withTooltip().withCloseButton().withContent("tour.change-layout.manual.step2").and.withBI().withDescription("Pick the section you want to change and I'll show you new layout options.").build()).build(),u=(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.OVERLAY_SWITCH_LAYOUT_BUTTON).and.withTooltip().thatOpensLeft().and.withTriggers().nextOnElementClick().and.withBackdrop().thatIsOn().and.withConditionalConf().isInAutoplayMode((new o.AssistantAction).withBehaviors().withAutoplayTimeoutOf(3e3).thatHasHint().and.withTooltip().withContent("tour.change-layout.auto.step1").and.withBI().withDescription("Entering layout options").build()).isInManualMode((new o.AssistantAction).withTooltip().withContent("tour.change-layout.manual.step3").thatOpensRight().and.withBI().withDescription("Click here to enter layout options").build()).build(),p=(new o.AssistantAction).withBackdrop().thatIsInvisible().and.withTooltip().thatOpensRight().and.withConditionalConf().isInAutoplayMode((new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.PREVIEW_SECTION).onlyUnselectedElements().randomElement().and.withBehaviors().withAutoplayTimeoutOf(3e3).thatHasHint().and.withTriggers().nextOnElementClick(o.AssistantAction.HOOKS.$element,o.AssistantAction.HOOKS.PREVIEW_OVERLAY).and.withTooltip().withContent("tour.change-layout.auto.step2").and.withBI().withDescription("Choosing a new section layout").build()).isInManualMode((new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.LEFT_PANEL).and.withTooltip().withContent("tour.change-layout.manual.step4").and.withTriggers().nextOnElementClick(o.AssistantAction.HOOKS.BODY,o.AssistantAction.unselected(o.AssistantAction.HOOKS.PREVIEW_SECTION)+" "+o.AssistantAction.HOOKS.PREVIEW_OVERLAY).completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(o.AssistantAction.HOOKS.GO_TO_SITE_DESIGN,"",!0,function(){e.setCustomTaskData("goToBuilderWhenTourCompleted",!1)}).and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.CUSTOMIZE_DESIGN_BUTTON).and.withBI().withDescription("Select a layout you love").build()).build(),g=(new o.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(1).and.withTooltip().withCloseButton().withContent("tour.change-layout.auto.step3").and.withBehaviors().thatRedirectsTo(n.STATES.BUILDER_STORY).and.thatAttachesTo().dock().and.withBackdrop().thatIsInvisible().and.withCallbacks().onEnter(function(){return t.hideListSpanButtons()}).onExit(function(){return t.showListSpanButtons()}).and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.OVERLAY_SECTION_EDIT_BUTTON).withDisabledElements(o.AssistantAction.HOOKS.OVERLAY_SWITCH_LAYOUT_BUTTON).withDisabledElements(o.AssistantAction.HOOKS.OVERLAY_MORE_ACTIONS_BUTTON).withDisabledElements(o.AssistantAction.HOOKS.OVERLAY_DRAG_HANDLE).and.withBI().withDescription("What do you think of this section's new layout?").and.withConditionalConf().experimentIsEnabled("tourEnhancedKeepOrAnother",(new o.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(3).and.withBehaviors().thatRedirectsTo(null).and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(o.AssistantAction.HOOKS.PREVIEW_CONTENT).goToOnElementClick(o.AssistantAction.HOOKS.PREVIEW_PADDING,3).and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.TOP_BAR).build()).build();return{id:"changeLayoutTask",get label(){return l.instant("assistant-menu-task.change-layout.deprecated-label")},BI:{assistType:"bucket list",description:"changeLayoutTour"},onEnter:{callback:function(){e.setCustomTaskData("goToBuilderWhenTourCompleted",!0)}},onExit:{callback:function(){i.clearContentFocus(),!0===e.getCustomTaskData("goToBuilderWhenTourCompleted")&&i.goToBuilder(),s.setScaleFactor(r.PreviewScale.MaxScaleFactor)}},actions:[c,d,u,p,g]}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(4),r=i(10);angular.module("siteGeneratorTourManagerInternal").factory("customizeSectionDesign",["assistantManager","assistantUtils","applicationState","flags","previewScale","$translate",function(e,t,i,a,s,l){function c(){e.setCustomTaskData("goToBuilderWhenTourCompleted",!1)}var d=(new o.AssistantAction).withBehaviors().thatRedirectsTo(n.STATES.BUILDER_STORY).thatStopsAutoplayOnEnter().thatDelays(200).and.thatAttachesTo().dock().and.withCustomStage().withAdditionalHighlight(o.AssistantAction.HOOKS.PREVIEW_CONTAINER).withDisabledElements(o.AssistantAction.HOOKS.HEADER_OVERLAY).withDisabledElements(o.AssistantAction.HOOKS.FOOTER_OVERLAY).and.withTriggers().nextOnElementClick(o.AssistantAction.HOOKS.OVERLAY_CONTAINER,o.AssistantAction.HOOKS.OVERLAY_SECTION_NOT_TPA).and.withBackdrop().thatIsOn().and.withTooltip().withCloseButton().withContent("tour.customize-section-design.step0").and.withBI().withDescription("Pick the section you want to change and I'll show you new layout options.").and.withCallbacks().onEnter(function(){i.clearContentFocus(),s.setScaleFactor(r.PreviewScale.MinScaleFactor)}).build(),u=(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.OVERLAY_SWITCH_LAYOUT_BUTTON).and.withTriggers().nextOnElementClick().and.withBackdrop().thatIsOn().and.withTooltip().withContent("tour.customize-section-design.step1").thatOpensRight().and.withBI().withDescription("Click here to enter design options").and.withCallbacks().onEnter(function(){t.showListSpanButtons()}).onExit(function(){return t.hideListSpanButtons()}).build(),p=(new o.AssistantAction).withBackdrop().thatIsOn().and.thatAttachesTo().hook(o.AssistantAction.HOOKS.CUSTOMIZE_DESIGN_BUTTON).and.withCustomStage().withAdditionalHighlight(o.AssistantAction.HOOKS.SELECTED_PREVIEW_SECTION).withDisabledElements(o.AssistantAction.HOOKS.RETURN_BUTTON).and.withTriggers().nextOnElementClick().completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withCallbacks().onEnter(function(){return t.hideSectionDesignMenu()}).onExit(function(){return t.showSectionDesignMenu()}).and.withTooltip().withContent("tour.customize-section-design.step2").thatOpensRight().and.withBI().withDescription("Click customize design").build(),g=(new o.AssistantAction).withBackdrop().thatIsOn().and.withCustomStage().withAdditionalHighlight(o.AssistantAction.HOOKS.SELECTED_PREVIEW_SECTION).withDisabledElements(o.AssistantAction.HOOKS.RETURN_BUTTON).withDisabledElements(o.AssistantAction.HOOKS.PREVIEW_OVERLAY).and.thatAttachesTo().hook(o.AssistantAction.HOOKS.SECTION_DESIGN_MENU_HOOK).and.withTriggers().completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(o.AssistantAction.HOOKS.MENU_ITEM).goToOnElementClick(o.AssistantAction.HOOKS.BACKGROUND_BUTTON,4,null,!0).goToOnElementClick(o.AssistantAction.HOOKS.MEDIA_BUTTON,4,null,!0).goToOnElementClick(o.AssistantAction.HOOKS.HEADERBG_BUTTON,4,null,!0).goToOnElementClick(o.AssistantAction.HOOKS.LISTBG_BUTTON,4,null,!0).goToOnElementClick(o.AssistantAction.HOOKS.COLOR_BUTTON,5,null,!0).goToOnElementClick(o.AssistantAction.HOOKS.FONT_BUTTON,6,null,!0).goToOnElementClick(o.AssistantAction.HOOKS.ANIMATIONS_BUTTON,7,null,!0).goToOnElementClick(o.AssistantAction.HOOKS.CHANGE_SECTION_HEIGHT_BUTTON,8,null,!0).and.withCallbacks().onExit(function(){return t.hideSectionDesignMenu()}).and.withTooltip().withWidth("auto").withContent("tour.customize-section-design.step3").thatOpensRight().and.withBI().withDescription("Choose what you want to customize").build(),h=(new o.AssistantAction).thatAttachesTo().dock().and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(o.AssistantAction.HOOKS.PREVIEW_CONTENT).completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(o.AssistantAction.HOOKS.RETURN_BUTTON).and.withTooltip().withContent("tour.customize-section-design.step4").thatOpensUp().and.withBI().withDescription("When you're done customizing click below").build(),m=(new o.AssistantAction).withBackdrop().thatIsOff().and.thatAttachesTo().dock().and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.TOP_BAR).withAdditionalHighlight(o.AssistantAction.HOOKS.CC_PANEL_FRAME).withDisabledElements(o.AssistantAction.HOOKS.RETURN_BUTTON).and.withTriggers().completeOnElementClick(o.AssistantAction.HOOKS.PREVIEW_CONTENT).completeOnElementClick(o.AssistantAction.HOOKS.DOCK).completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(o.AssistantAction.HOOKS.GO_TO_SITE_COLORS,"",!1,c).and.withTooltip().withContent("tour.customize-section-design.step4").thatOpensUp().and.withBI().withDescription("When you're done customizing, click below").build(),f=(new o.AssistantAction).withBackdrop().thatIsOff().and.thatAttachesTo().dock().and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.TOP_BAR).withAdditionalHighlight(o.AssistantAction.HOOKS.CC_PANEL_FRAME).withDisabledElements(o.AssistantAction.HOOKS.RETURN_BUTTON).and.withTriggers().completeOnElementClick(o.AssistantAction.HOOKS.PREVIEW_CONTENT).completeOnElementClick(o.AssistantAction.HOOKS.DOCK).completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(o.AssistantAction.HOOKS.GO_TO_SITE_FONTS,"",!1,c).and.withTooltip().withContent("tour.customize-section-design.step4").thatOpensUp().and.withBI().withDescription("When you're done customizing, click below").build(),v=(new o.AssistantAction).withBackdrop().thatIsOff().and.thatAttachesTo().dock().and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.TOP_BAR).withAdditionalHighlight(o.AssistantAction.HOOKS.CC_PANEL_FRAME).withDisabledElements(o.AssistantAction.HOOKS.RETURN_BUTTON).and.withTriggers().completeOnElementClick(o.AssistantAction.HOOKS.PREVIEW_CONTENT).completeOnElementClick(o.AssistantAction.HOOKS.DOCK).completeOnElementClick(o.AssistantAction.HOOKS.GO_TO_SITE_ANIMATION,"",!1,c).and.withTooltip().withContent("tour.customize-section-design.step4").thatOpensUp().and.withBI().withDescription("When you're done customizing, click below").build(),S=(new o.AssistantAction).withBackdrop().thatIsOn().and.thatAttachesTo().dock().and.withCustomStage().withAdditionalHighlight("section-height").and.withTriggers().completeOnElementClick(o.AssistantAction.HOOKS.DOCK).completeOnElementClick(o.AssistantAction.HOOKS.SECTION_HEIGHT_CLOSE_BUTTON).completeOnElementClick(o.AssistantAction.HOOKS.CC_PANEL_FRAME).completeOnElementClick(o.AssistantAction.HOOKS.TOP_BAR).completeOnElementClick(o.AssistantAction.HOOKS.BACKDROP).and.withTooltip().withContent("tour.customize-section-design.step4").thatOpensUp().and.withBI().withDescription("When you're done customizing, click below").build();return{id:"customizeSectionDesign",get label(){return l.instant("assistant-menu-task.customize-section-design.deprecated-label")},BI:{assistType:"bucket list",description:"customizeSectionDesign"},onEnter:{callback:function(){e.setCustomTaskData("goToBuilderWhenTourCompleted",!0),t.hideListSpanButtons()}},onExit:{callback:function(){t.showListSpanButtons(),i.clearContentFocus(),s.setScaleFactor(r.PreviewScale.MaxScaleFactor),!0===e.getCustomTaskData("goToBuilderWhenTourCompleted")&&i.goToBuilder()}},actions:[d,u,p,g,h,m,f,v,S]}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);angular.module("siteGeneratorTourManagerInternal").factory("addSectionTask",["assistantUtils","assistantManager","flags","$translate",function(e,t,i,o){return{id:"addSectionTask",get label(){return o.instant("assistant-menu-task.add-section.deprecated-label")},BI:{assistType:"bucket list",description:"addSectionTour"},actions:[(new n.AssistantAction).thatAttachesTo().hook(n.AssistantAction.HOOKS.ADD_TAB).and.withBehaviors().thatHasHint().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().withAutoplayTimeoutOf(800).and.withBI().withDescription("Opening Add Menu").and.withCallbacks().onExit(function(){return e.openAddTopBarMenu()}).and.withBackdrop().thatIsOn().build(),(new n.AssistantAction).thatAttachesTo().hook(n.AssistantAction.HOOKS.ADD_SECTION_TAB).and.withTooltip().withContent("tour.add-section2.step2").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withBehaviors().thatStopsAutoplayOnEnter().and.withCallbacks().onExit(function(){return e.closeAddTopBarMenu()}).and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.ADD_PAGE_TAB).and.withBI().withDescription("Click Add Section").build(),(new n.AssistantAction).thatIsBasedOnTemplate().singleButtonTooltip("tour.button.gotit").and.thatAttachesTo().hook(n.AssistantAction.HOOKS.LEFT_PANEL).and.withTooltip().withContent("tour.add-section.step3").thatOpensRight().and.withBackdrop().thatIsInvisible().and.withTriggers().nextOnElementClick().nextOnElementClick(n.AssistantAction.HOOKS.PRESETS_CONTAINER,n.AssistantAction.HOOKS.PRESET).completeOnElementClick(n.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("I've listed possible sections by relevance for your type of business").build(),(new n.AssistantAction).thatAttachesTo().dock().and.withTooltip().withContent("tour.add-section.step4").thatOpensUp().and.withBackdrop().thatIsOff().and.withBehaviors().thatClosesSidePanelOnExit().and.withTriggers().completeOnElementClick(n.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(n.AssistantAction.HOOKS.PREVIEW_CONTENT).and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.TOP_BAR).and.withBI().withDescription("When you're done, click below.").build()],onExit:{callback:function(){e.triggerElement(n.AssistantAction.HOOKS.ADD_TAB,"mouseleave")}}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);angular.module("siteGeneratorTourManagerInternal").factory("addPageTask",["assistantManager","assistantUtils","flags","$translate",function(e,t,i,o){return{id:"addPageTask",get label(){return o.instant("assistant-menu-task.add-page.deprecated-label")},BI:{assistType:"bucket list",description:"addPageTour"},actions:[(new n.AssistantAction).thatAttachesTo().hook(n.AssistantAction.HOOKS.ADD_TAB).and.withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().thatHasHint().withAutoplayTimeoutOf(800).and.withCallbacks().onExit(function(){return t.openAddTopBarMenu()}).and.withBackdrop().thatIsOn().and.withBI().withDescription("Opening Add Menu").build(),(new n.AssistantAction).thatAttachesTo().hook(n.AssistantAction.HOOKS.ADD_PAGE_TAB).and.withTooltip().withContent("tour.add-new-page2.step1").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withBehaviors().thatStopsAutoplayOnEnter().and.withCallbacks().onExit(function(){return t.closeAddTopBarMenu()}).and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.ADD_SECTION_TAB).and.withBI().withDescription("Click Add Section").build(),(new n.AssistantAction).thatAttachesTo().hook(n.AssistantAction.HOOKS.ADD_SECTION_PANEL).and.withTooltip().withContent("tour.add-new-page.step2").thatOpensRight().and.withBackdrop().thatIsOn().and.withBehaviors().thatDelays(1e3).thatWaitsForElement(n.AssistantAction.HOOKS.PREVIEW_OVERLAY).and.withTriggers().nextOnElementClick(n.AssistantAction.HOOKS.PRESETS_CONTAINER,n.AssistantAction.HOOKS.BLANK_PAGE_OVERLAY).completeOnElementClick(n.AssistantAction.HOOKS.PRESETS_CONTAINER,n.AssistantAction.HOOKS.PREVIEW_OVERLAY_WITH_NOT_BLANK_PAGE).completeOnElementClick(n.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withCallbacks().onExit(function(){return e.setMenuProgress(n.AssistantMenuProgress.intermediate)}).and.withBI().withDescription("I've arranged all possible pages by relevance for your type of business.").build(),(new n.AssistantAction).withBehaviors().thatWaitsForElement(n.AssistantAction.HOOKS.ADD_SECTION_PANEL_LABEL).and.withCallbacks().onEnter(function(){return e.stopAndComplete()}).and.withBI().withDescription("Add Blank Page").build()],onExit:{callback:function(){t.triggerElement(n.AssistantAction.HOOKS.ADD_TAB,"mouseleave")}}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);angular.module("siteGeneratorTourManagerInternal").factory("publishTask",["flags","$translate",function(e,t){return{id:"publishTask",get label(){return t.instant("assistant-menu-task.publish.deprecated-label")},BI:{description:"publishTour"},actions:[(new n.AssistantAction).thatAttachesTo().hook(n.AssistantAction.HOOKS.PUBLISH_TAB).and.withTooltip().withContent("tour.publish.step0").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().completeOnElementClick().and.withBI().withDescription("Once your site is published, people can see it online").build()]}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(4);angular.module("siteGeneratorTourManagerInternal").factory("connectDomainTask",["flags","$translate",function(e,t){return{id:"connectDomainTask",get label(){return t.instant("assistant-menu-task.connect-domain.deprecated-label")},BI:{description:"connectDomainTour"},actions:[(new o.AssistantAction).thatAttachesTo().hook(e.newTopBar?o.AssistantAction.HOOKS.CONNECT_DOMAIN_BUTTON_NEW_TOP_BAR:o.AssistantAction.HOOKS.CONNECT_DOMAIN_BUTTON).and.withTooltip().withContent("tour.connect-domain.step0").thatOpensDown().and.withBehaviors().thatHasHint().thatRedirectsTo(n.STATES.BUILDER_STORY).thatDelays(300).and.withCustomStage().withAdditionalHighlight(o.AssistantAction.HOOKS.BROWSER_TOOLBAR).and.withBackdrop().thatIsOn().and.withTriggers().completeOnElementClick().and.withBI().withDescription("Look professional with a memorable, customized domain.").build()]}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(4);angular.module("siteGeneratorTourManagerInternal").factory("pageSEOTask",["assistantUtils","flags","$translate",function(e,t,i){return{id:"pageSEOTask",get label(){return i.instant("assistant-menu-task.page-seo.deprecated-label")},BI:{assistType:"bucket list",description:"pageSEOTour"},actions:[(new o.AssistantAction).withBehaviors().thatSkipsStepOnCondition(function(){return!0}).and.withBI().withDescription("Opening Page TopBar Menu").and.withConditionalConf().experimentIsEnabled("useSecondTopBarREMOVEDTEMPORARILY",(new o.AssistantAction).thatAttachesTo().hook("PAGE_TAB_SECOND_TOPBAR").and.withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().thatSkipsStepOnCondition(function(){return!1}).thatHasHint().withAutoplayTimeoutOf(800).thatRedirectsTo(n.STATES.BUILDER_STORY).and.withCallbacks().onExit(function(){return e.openPagesTopBarMenu()}).and.withBackdrop().thatIsOn().build()).build(),(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.PAGE_TAB_TEMPORARY).and.withTooltip().withContent("tour.page-seo.step0").thatOpensDown().and.withBehaviors().thatRedirectsTo(n.STATES.BUILDER_STORY).and.withTriggers().nextOnElementClick().and.withBackdrop().thatIsOn().and.withBI().withDescription("Open the Page Manager").and.withConditionalConf().experimentIsEnabled("useSecondTopBarREMOVEDTEMPORARILY",(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.MANAGE_PAGES).and.withTooltip().withContent("tour.page-seo.step0").and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.PAGE_TAB_MENU_ITEM).and.withCallbacks().onExit(function(){return e.closePagesTopBarMenu()}).build()).build(),(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.PAGE_SETTINGS_BUTTON).and.withTooltip().withContent("tour.page-seo.step2").thatOpensRight().and.withBackdrop().thatIsOn().and.withBehaviors().thatDelays(1e3).and.withCustomStage().withDisabledElements(o.AssistantAction.HOOKS.ADD_PAGE_BUTTON).withDisabledElements(o.AssistantAction.HOOKS.PAGE_PANEL_FOOTER).withDisabledElements(o.AssistantAction.HOOKS.UNSELECTED_PAGE_ITEMS).withAdditionalHighlight(o.AssistantAction.HOOKS.PAGES_PANEL).and.withTriggers().nextOnElementClick().completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(o.AssistantAction.HOOKS.PANEL_HELP_BUTTON).and.withBI().withDescription("Click Page Settings").build(),(new o.AssistantAction).thatAttachesTo().hook(o.AssistantAction.HOOKS.PAGE_SEO_MENU_ITEM).and.withTooltip().withContent("tour.page-seo.step3").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("Select Page SEO").build(),(new o.AssistantAction).thatIsBasedOnTemplate().singleButtonTooltip("tour.button.gotit").and.withTooltip().withContent("tour.page-seo.step4").thatOpensRight().and.thatAttachesTo().hook(o.AssistantAction.HOOKS.SEO_PANEL_PAGE_DESCRIPTION_FIELD).and.withCustomStage().withAdditionalHighlight(o.AssistantAction.HOOKS.SEO_PANEL).and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().nextOnBackdropClick().completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("Good SEO helps people find you on search engines like Google. Choose relevant keywords including your business name").build(),(new o.AssistantAction).thatAttachesTo().dock().and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(o.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withTooltip().withContent("tour.page-seo.step5").and.withBI().withDescription("When you're done, click below.").build()],onExit:{callback:function(){e.triggerElement(o.AssistantAction.HOOKS.PAGE_TAB_SECOND_TOPBAR,"mouseleave")}}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);angular.module("siteGeneratorTourManagerInternal").factory("seoWizTask",["assistantUtils","assistantManager","$translate","staticsUrls","$window",function(e,t,i,o,r){return{id:"seoWizTask",get label(){return i.instant("assistant-menu-task.wiz-seo.label")},BI:{assistType:"bucket list",description:"seoWizTask"},onEnter:{callback:function(){t.setCustomTaskData("openSiteDropdown",!0)}},actions:[(new n.AssistantAction).thatAttachesTo().hook(n.AssistantAction.HOOKS.SITE_DROPDOWN_SEO_WIZ).and.withTooltip().thatOpensLeft().withContent("tour.wiz-seo.click-get-found").and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.SITE_DROPDOWN_ITEMS_EXCEPT_SEO_WIZ).and.withBackdrop().thatIsOn().and.withTriggers().completeOnElementClick(n.AssistantAction.HOOKS.SITE_DROPDOWN_SEO_WIZ).build()]}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o="ADI Assistant - tpa task";angular.module("siteGeneratorTourManagerInternal").factory("createTPATask",["$translate","tpaDiscovery","tpaService","assistantManager","tpaSettings","consumerBiLogger",function(e,t,i,r,a,s){return function(l,c){var d=function(){return t.manageableTPAs[l]};return{id:c,isComplete:!0,get label(){return e.instant("assistant-menu-task.tpa.label",{tpa:d().menuItem.nameAsObject.toLowerCase()})},BI:{description:c},actions:[(new n.AssistantAction).withCallbacks().onEnter(function(){!function(){var e=d(),t=i.getNaiveType(l),n=e.naiveNode,r=i.getAppIdByType(t),c=i.getInstanceId(n);s.apps.clickOnManageApp(o,r,t,c),a.openManagement(o,n,t)}(),r.stopAndComplete()}).build()]}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(0);angular.module("siteGeneratorTourManagerInternal").factory("importImagesAssistantTask",["importImagesTaskConf","textManagerHelpers","assistantTaskFetcher","modelTreeHelpers","importTask","flags","storyServices","applicationState",function(e,t,i,r,a,s,l,c){return{init:function(){var r="importImagesAssistantTask",d=function(){var n=t.getNodeForImportImages();if(n&&!c.isInMobileEditMode()){if(i.getTask(r)){var o=a.getImportImagesTaskConfParams(n),s=e(o);i.updateTask(r,s)}i.updateTaskHidden(r,!1)}else i.updateTaskHidden(r,!0)};s.textManager&&s.textManagerTours&&o.get(l,"story.importedSite.siteAddress")&&d(),[n.events.PAGE_SHOWN,n.events.PAGE_DUPLICATED,n.events.PAGE_HIDDEN,n.events.PAGE_DELETED,n.events.SECTION_ADDED,n.events.SECTION_MOVED,n.events.SECTION_DUPLICATED,n.events.SECTION_DELETED,n.events.LIST_ITEM_ADDED_OR_SHOWN,n.events.LIST_ITEM_DELETED_OR_HIDDEN,n.events.LINK_OF_FIELD_UPDATED,n.events.CREATED_PAGE_FROM_ITEM,n.events.MEDIA_TOGGLED,n.events.STORY_READY,n.events.STORY_REVISION_CHANGED,n.events.SWITCH_MODE,n.events.MEDIA_TYPE_CHANGE,n.events.SECTION_DESIGN_CHANGED].forEach(function(e){if(s.textManager&&s.textManagerTours)var t=n.PubSub.subscribe(e,function(){o.get(l,"story.importedSite.siteAddress")?d():t()})})}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(0);angular.module("siteGeneratorTourManagerInternal").factory("importContentAssistantTask",["importContentTaskConf","textManagerHelpers","assistantTaskFetcher","modelTreeHelpers","importTask","flags","storyServices","applicationState",function(e,t,i,r,a,s,l,c){return{init:function(){var d="importContentAssistantTask",u=function(){var n=t.getSupportedContentFields(),o=r.getFirstNodeWithFieldEnabled(n);if(o&&!c.isInMobileEditMode()){if(i.getTask(d)){var s=a.getImportContentTaskConfParams(o),l=e(s);i.updateTask(d,l)}i.updateTaskHidden(d,!1)}else i.updateTaskHidden(d,!0)};s.textManager&&s.textManagerTours&&o.get(l,"story.importedSite.siteAddress")&&u(),[n.events.PAGE_SHOWN,n.events.PAGE_DUPLICATED,n.events.PAGE_HIDDEN,n.events.PAGE_DELETED,n.events.SECTION_ADDED,n.events.SECTION_MOVED,n.events.SECTION_DUPLICATED,n.events.SECTION_DELETED,n.events.LIST_ITEM_ADDED_OR_SHOWN,n.events.LIST_ITEM_DELETED_OR_HIDDEN,n.events.LINK_OF_FIELD_UPDATED,n.events.CREATED_PAGE_FROM_ITEM,n.events.FIELD_TOGGLED,n.events.STORY_READY,n.events.STORY_REVISION_CHANGED,n.events.SWITCH_MODE,n.events.MEDIA_TYPE_CHANGE].forEach(function(e){if(s.textManager&&s.textManagerTours)var t=n.PubSub.subscribe(e,function(){o.get(l,"story.importedSite.siteAddress")?u():t()})})}}}])},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S){var y=e.call(this,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S)||this;return y.currentStep=c.currentStep||2e3,y}return n(t,e),t.$inject=["$scope","assistantManager","assistantUtils","assistantBI","consumerBiLogger","colorationUtils","introManager","designKitManager","flags","$q","kitUtils","initSiteData","introModelTree","miscUtils","initService","$element","themeChooser","clientTopology"],t}(i(250).WelcomeTaskStartTemplate);angular.module("siteGeneratorTourManagerInternal").component("welcomeTaskStartNew",{controller:o,templateUrl:"views/welcome/welcome-task-start.html"})},function(e,t){var i=function(){return function(){}}();angular.module("siteGeneratorTourManagerInternal").component("welcomeTaskEnd",{controller:i,template:'\n      <div class="tour-step-with-action complete-title">\n        <div class="tour-step-image" style="min-height:168px">\n          <img relative-src="images/tour/welcome-tour-complete.gif"/>\n        </div>\n        <div class="tour-step-title -centered" ng-if="!flags.fullSiteBuilder">\n          {{:: $ctrl.title | translate}}\n        </div>\n        <div class="tour-step-title -centered" ng-if="flags.fullSiteBuilder">\n          {{:: $ctrl.fullTitle | translate}}\n        </div>\n        <div class="tour-step-content-wrapper">\n          <div>\n            <div class="tour-step-content -centered" style="margin-bottom: 0;" ng-bind-html=":: $ctrl.content | translate">\n            </div>\n        </div>\n      </div>\n    ',bindings:{title:"@",fullTitle:"@",content:"@"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(185),o=i(2),r=i(1),a=function(){function e(e,t,i,n,o,r){this.assistantManager=e,this.applicationState=t,this.contentElementFieldManager=i,this.sitePartTypes=n,this.modelTreeHelpers=o,this.unlinkedButtonTaskConf=r}return e.$inject=["assistantManager","applicationState","contentElementFieldManager","sitePartTypes","modelTreeHelpers","unlinkedButtonTaskConf"],e.prototype.isPageLoaded=function(e){return this.applicationState.getPageNodeInFocus().id===e.context.containerPageId},e.prototype.isLoadPage=function(e){return!this.isPageLoaded(e)},e.prototype.onLoadPage=function(e){var t=this;this.applicationState.goToBuilder().then(function(){return t.applicationState.goToPage(e.context.containerPageId)})},e.prototype.openNodeEditPanel=function(e){var t=e.context;this.applicationState.setContentFocus(t.identifyingNodeId,this.sitePartTypes.BODY),this.modelTreeHelpers.isItemOfList(t)?this.applicationState.goToEditMode(t.id):this.applicationState.goToEditMode()},e.prototype.terminateButtonLinkingListener=function(){this.buttonLinkingListener&&(this.buttonLinkingListener.terminate(),this.buttonLinkingListener=void 0)},e.prototype.prepareButtonLinkingListener=function(){var e;this.terminateButtonLinkingListener(),this.buttonLinkingListener={onDone:new Promise(function(t){e=o.PubSub.subscribeOnce(o.events.LINK_OF_FIELD_UPDATED,function(){t()})}),terminate:function(){e&&e()}}},e.prototype.buttonField=function(e){return this.contentElementFieldManager.getNodeFields(e.contentElement,e).find(function(e){return"button"===e.data.type})},e.prototype.openLinkButtonModal=function(e){var t=this.buttonField(e);this.contentElementFieldManager.onLinkItemEdit(t,e,r.BIOrigins.SmartAssistUnlinkedButtons)},e.prototype.handleLinkButtonViaTour=function(e){var t=e.context;this.prepareButtonLinkingListener(),this.openLinkButtonModal(t)},e.prototype.handleLinkButtonManually=function(){this.prepareButtonLinkingListener()},e.prototype.handleHideButtonViaTour=function(e){var t=e.context,i=this.buttonField(t);this.contentElementFieldManager.toggleField(i,t,r.BIOrigins.SmartAssistUnlinkedButtons)},e.prototype.isIssueActive=function(e){var t=e.context;return e.issueType.trigger(t)},e.prototype.onButtonLinkingProcessComplete=function(e){var t=this;this.buttonLinkingListener.onDone.then(function(){if(!t.isIssueActive(e)){var i=n.UNLINKED_BUTTON_ACTION.buttonIsNowLinked;t.assistantManager.gotoActionInActiveTask(i)}else{var o=n.UNLINKED_BUTTON_ACTION.initial;t.assistantManager.gotoActionInActiveTask(o)}})},e.prototype.isItemOfList=function(e){return this.modelTreeHelpers.isItemOfList(e.context)},e.prototype.startTour=function(e){var t=this,i=e.context,n=this.unlinkedButtonTaskConf({isLoadPage:function(){return t.isLoadPage(e)},onLoadPage:function(){return t.onLoadPage(e)},isPageLoaded:function(){return t.isPageLoaded(e)},onOpenNodeEditPanel:function(){return t.openNodeEditPanel(e)},onLinkViaTour:function(){return t.handleLinkButtonViaTour(e)},onLinkManually:function(){return t.handleLinkButtonManually()},onHideViaTour:function(){return t.handleHideButtonViaTour(e)},onLinkingProcessComplete:function(){return t.onButtonLinkingProcessComplete(e)},nodeId:i.id,isItemOfList:function(){return t.isItemOfList(e)}});this.assistantManager.startTask(n)},e.prototype.start=function(e){this.startTour(e)},e}();t.UnlinkedButtonTask=a,angular.module("siteGeneratorTourManagerInternal").service("unlinkedButtonTask",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);t.BetterLayoutTaskBI={assistType:"smart assist",description:"betterLayoutTask"};var o=function(e){var i=e.onOpenNodeEditPanel,o=(new n.AssistantAction).withCallbacks().onEnter(i).and.withBehaviors().thatStopsAutoplayOnExit().build();return{id:"betterLayoutTask",label:"betterLayoutTask",BI:t.BetterLayoutTaskBI,actions:[o],customData:{editMode:"smart assist"}}};angular.module("siteGeneratorTourManagerInternal").factory("betterLayoutTaskConf",function(){return o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=function(){function e(e,t,i,n){this.assistantManager=e,this.betterLayoutTaskConf=t,this.applicationState=i,this.sitePartTypes=n}return e.$inject=["assistantManager","betterLayoutTaskConf","applicationState","sitePartTypes"],e.prototype.openNodeEditPanel=function(e){var t=e.context.node;this.applicationState.setContentFocus(t.identifyingNodeId,this.sitePartTypes.BODY),this.applicationState.goToSwitchPresetMode(n.BIOrigins.SmartAssistBetterLayout)},e.prototype.start=function(e){var t=this,i=this.betterLayoutTaskConf({onOpenNodeEditPanel:function(){return t.openNodeEditPanel(e)}});this.assistantManager.startTask(i)},e}();t.BetterLayoutTask=o,angular.module("siteGeneratorTourManagerInternal").service("betterLayoutTask",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(706),o=i(707);angular.module("siteGeneratorTourManagerInternal").factory("imageUpscaleTaskConf",function(){return o.imageUpscaleTaskConf}).service("imageUpscaleTask",n.ImageUpscaleTask)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o){this.assistantManager=e,this.imageUpscaleTaskConf=t,this.imageUpscaleEditor=i,this.applicationState=n,this.modelTreeHelpers=o}return e.$inject=["assistantManager","imageUpscaleTaskConf","imageUpscaleEditor","applicationState","modelTreeHelpers"],e.prototype.isPageLoaded=function(e){var t=e.context;return this.applicationState.getPageNodeInFocus().id===t.node.containerPageId},e.prototype.isLoadPage=function(e){return!this.isPageLoaded(e)},e.prototype.onLoadPage=function(e){var t=this,i=e.context;this.applicationState.goToBuilder().then(function(){return t.applicationState.goToPage(i.node.containerPageId)})},e.prototype.onOpenMediaSettings=function(e){var t=this,i=e.context.node;this.applicationState.setContentFocus(i.id,this.modelTreeHelpers.getNodeSitePart(i)),this.applicationState.goToEditMode().then(function(){return t.applicationState.goToSectionMediaPanel()})},e.prototype.openImageUpscaleEditor=function(e){var t=e.context.node;this.imageUpscaleEditor.open(t)},e.prototype.start=function(e){var t=this,i=this.imageUpscaleTaskConf({isLoadPage:function(){return t.isLoadPage(e)},onLoadPage:function(){return t.onLoadPage(e)},onOpenMediaSettings:function(){return t.onOpenMediaSettings(e)},isPageLoaded:function(){return t.isPageLoaded(e)},isMediaSettingsPanelLoaded:function(){return t.applicationState.isInEditSectionMedia()},onOpenImageUpscaleEditor:function(){return t.openImageUpscaleEditor(e)}});this.assistantManager.startTask(i)},e}();t.ImageUpscaleTask=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o={assistType:"smart assist",description:"imageUpscaleTask"};t.imageUpscaleTaskConf=function(e){var t=e.isLoadPage,i=e.onLoadPage,r=e.isPageLoaded,a=e.onOpenMediaSettings,s=e.isMediaSettingsPanelLoaded,l=e.onOpenImageUpscaleEditor,c=(new n.AssistantAction).withConditionalConf().customCondition(t,(new n.AssistantAction).withCallbacks().onEnter(i).build()).and.withBehaviors().thatStartsAutoplayOnEnter().build(),d=(new n.AssistantAction).withConditionalConf().customCondition(t,(new n.AssistantAction).withBehaviors().thatWaitsForExpression(r).build()).and.withCallbacks().onEnter(a).build(),u=(new n.AssistantAction).withBehaviors().thatStopsAutoplayOnEnter().thatWaitsForExpression(s).and.withCallbacks().onEnter(l).and.withTriggers().completeOnElementClick(n.AssistantAction.HOOKS.DIALOG_BACKDROP).completeOnElementClick(n.AssistantAction.HOOKS.IMAGE_UPSCALE_MODAL_APPLY).completeOnElementClick(n.AssistantAction.HOOKS.IMAGE_UPSCALE_MODAL_CANCEL).build();return{id:"imageUpscaleTask",label:"imageUpscaleTask",BI:o,actions:[c,d,u],customData:{editMode:"smart assist"}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(186),o=i(2),r=i(13),a=i(1),s=i(0),l=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u){this.assistantManager=e,this.applicationState=t,this.sitePartTypes=i,this.nodeEditorManager=n,this.modelTreeHelpers=o,this.socialDefaultLinksTaskConf=r,this.pagesPanelManager=a,this.contentElementFieldManager=s,this.ReferenceFieldTypes=l,this.smartAssistHelpers=c,this.flags=d,this.nodeFetcher=u}return e.$inject=["assistantManager","applicationState","sitePartTypes","nodeEditorManager","modelTreeHelpers","socialDefaultLinksTaskConf","pagesPanelManager","contentElementFieldManager","ReferenceFieldTypes","smartAssistHelpers","flags","nodeFetcher"],e.prototype.isIssueInBody=function(e){return this.flags.refactorOSIActions?this.nodeFetcher.getNodeSitePart(e)===this.sitePartTypes.BODY:this.modelTreeHelpers.getNodeSitePart(e)===this.sitePartTypes.BODY},e.prototype.isLoadPage=function(e){return this.isIssueInBody(e)},e.prototype.isPageLoaded=function(e){return this.applicationState.getPageNodeInFocus().id===e.containerPageId},e.prototype.loadPage=function(e){var t=this;this.applicationState.goToBuilder().then(function(){return t.applicationState.goToPage(e.containerPageId)})},e.prototype.setContentFocus=function(e){this.flags.refactorOSIActions?this.applicationState.setContentFocus(e.id,this.nodeFetcher.getNodeSitePart(e)):this.applicationState.setContentFocus(e.id,this.modelTreeHelpers.getNodeSitePart(e))},e.prototype.openSocialsPanel=function(e){this.setContentFocus(e),this.nodeEditorManager.loadSocialEditor()},e.prototype.openEditPanel=function(e){this.setContentFocus(e),this.applicationState.goToEditMode()},Object.defineProperty(e.prototype,"activeSocialsDefaultLinksIssues",{get:function(){return this.smartAssistHelpers.activeIssuesByIssueTypeId(r.issueTypeIds.SOCIALS_DEFAULT_LINKS)},enumerable:!0,configurable:!0}),e.prototype.isSocialsAppearInMultipleSections=function(e){return this.activeSocialsDefaultLinksIssues.length>0},e.prototype.someSectionsHaveOnlySocialsNode=function(){var e=this;return this.modelTreeHelpers.getAllSocialsRelatedNodes().some(function(t){return e.nodeEditorManager.isLastVisibleField(t,e.ReferenceFieldTypes.SOCIAL)})},e.prototype.currentSectionHaveOnlySocialsNode=function(e){return this.nodeEditorManager.isLastVisibleField(e,this.ReferenceFieldTypes.SOCIAL)},e.prototype.hideSocialsGlobally=function(){var e=this,t=this.modelTreeHelpers.getAllSocialsRelatedNodes();this.nodeEditorManager.setReferenceFieldsVisibility(t,this.ReferenceFieldTypes.SOCIAL,!1,"social",a.BIOrigins.SmartAssistSocialsDefaultLinks).then(function(){return e.smartAssistHelpers.evaluateAllSocialRelated()})},e.prototype.startTour=function(e){var t=this,i=e.context,n=this.currentSectionHaveOnlySocialsNode(i),o=this.someSectionsHaveOnlySocialsNode(),r=this.socialDefaultLinksTaskConf({isLoadPage:function(){return t.isLoadPage(i)},isPageLoaded:function(){return t.isPageLoaded(i)},onLoadEditPanel:function(){return t.openEditPanel(i)},onOpenSocialsPanel:function(){return t.openSocialsPanel(i)},onLinkActionStarted:function(){return t.subscribeLinkChanges(e)},onLinkActionCompleted:function(){return t.unsubscribeLinkChanges()},onLoadPage:function(){return t.loadPage(i)},isSocialsAppearInMultipleSections:function(){return t.isSocialsAppearInMultipleSections(i)},onHideSocialsGlobally:function(){return t.hideSocialsGlobally()},someSectionsHaveOnlySocialsNode:function(){return o},currentSectionHaveOnlySocialsNode:function(){return n}});this.assistantManager.startTask(r)},e.prototype.goToDoneConnectedStep=function(){var e=n.SOCIAL_DEFAULT_LINKS_ACTION.socialsLinked;this.assistantManager.gotoActionInActiveTask(e)},e.prototype.linkChanged=function(e){var t=e.context;e.issueType.trigger(t)||this.goToDoneConnectedStep()},e.prototype.subscribeLinkChanges=function(e){var t=this,i=s.debounce(function(){return t.linkChanged(e)},200);this._unsubscribeLinkChanges=o.PubSub.subscribe(o.events.SOCIAL_LINKS_UPDATED,i)},e.prototype.unsubscribeLinkChanges=function(){this._unsubscribeLinkChanges&&this._unsubscribeLinkChanges()},e.prototype.start=function(e){this.startTour(e)},e}();t.SocialDefaultLinksTask=l,angular.module("siteGeneratorTourManagerInternal").service("socialDefaultLinksTask",l)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);t.PUBLISH_SITE_INTERVAL_ACTION={},t.PublishSiteIntervalTaskBI={assistType:"smart assist",description:"publishSiteInterval"};var o=function(e){var i=e.openPublishPopup,o=(new n.AssistantAction).thatAttachesTo().hook(n.AssistantAction.HOOKS.PUBLISH_TAB).and.withCallbacks().onEnter(i).and.withTriggers().completeOnElementClick(n.AssistantAction.HOOKS.BODY).and.withBI().withDescription("Once your site is published, people can see it online").build();return{id:"publishSiteInterval",label:"publishSiteInterval",BI:t.PublishSiteIntervalTaskBI,actions:[o],customData:{editMode:"smart assist"}}};angular.module("siteGeneratorTourManagerInternal").factory("publishSiteIntervalTaskConf",function(){return o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);t.ImportContentTaskBI={assistType:"smart assist",description:"import"};var o=function(e){var i=e.openEditPanel,o=e.getToggleButton,r=e.getFieldContainerSelector,a=e.TextManagerTipDone,s=e.translationOf,l=e.isBusinessDetailsChanged,c=s("text-manager.field-editor.imported-text"),d=l?s("tour.import-content-forbusiness-details-changed.label"):s("tour.import-content.label",{textManagerLabel:c}),u=(new n.AssistantAction).thatIsBasedOnTemplate().singleButtonTooltip(s("tour.business-details-changed-task.btn")).and.thatAttachesTo().dock().and.withBackdrop().thatIsInvisible().and.withTooltip().withContent("tour.business-details-changed-task.manual").withCloseButton().and.withTriggers().stopOnBackdropClick().and.withBI().withDescription(s("tour.business-details-changed-task.manual")).build(),p=(new n.AssistantAction).thatAttachesTo().hook(r()).and.withTooltip().withContent(d).thatOpensRight().and.withBackdrop().thatIsInvisible().and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(o()).and.withCallbacks().onExit(a).onEnter(i).and.withTriggers().stopOnBackdropClick().completeOnElementClick(n.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription(d).build(),g=(new n.AssistantAction).thatAttachesTo().hook(r()).and.withTooltip().withContent(d).thatOpensRight().and.withBackdrop().thatIsInvisible().and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(o()).and.withCallbacks().onExit(a).onEnter(i).and.withTriggers().completeOnElementClick(n.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription(d).build(),h=(new n.AssistantAction).withTooltip().withSuccessMessage().thatOpensRight().withContent("smart-assist.tour.import-content.text-manager-panel.select").withButton("done").label("smart-assist.tour.import-content.done-use-text").goToNextStep().and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(n.AssistantAction.HOOKS.TEXT_MANAGER_DIALOG).and.withCustomStage().withAdditionalHighlight(n.AssistantAction.HOOKS.TEXT_MANAGER_DIALOG).and.withTriggers().completeOnElementClick(n.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(n.AssistantAction.HOOKS.DOCK,"",!1,function(){$(n.AssistantAction.HOOKS.TEXT_MANAGER_CLOSE_PANEL).click()}).and.withBI().withDescription("Select the text you want to replace with the existing text, or add to the end of the current field text").build(),m=(new n.AssistantAction).withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(n.AssistantAction.HOOKS.TEXT_MANAGER_DIALOG).and.withCustomStage().withAdditionalHighlight(n.AssistantAction.HOOKS.TEXT_MANAGER_DIALOG).and.withTriggers().completeOnElementClick(n.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(n.AssistantAction.HOOKS.DOCK,"",!1,function(){$(n.AssistantAction.HOOKS.TEXT_MANAGER_CLOSE_PANEL).click()}).and.withBI().withDescription("Select the text you want to replace with the existing text, or add to the end of the current field text").build();return{id:"importContentAssistantTask",label:s("text-manager.field-editor.use-imported-text"),BI:t.ImportContentTaskBI,actions:l?[u,p]:[g,h,m],customData:{editMode:"smart assist"}}};angular.module("siteGeneratorTourManagerInternal").factory("importContentTaskConf",["$translate",function(e){return o}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);t.ImportImagesTaskBI={assistType:"smart assist",description:"import"};var o=function(e){var i=e.openEditPanel,o=e.getFieldContainerSelector,r=e.getToggleButton,a=e.TextManagerTipDone,s=e.translationOf,l=(new n.AssistantAction).thatAttachesTo().hook(o()).and.withTooltip().withContent("tour.import-images.step0").thatOpensRight().and.withBackdrop().thatIsInvisible().and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(r()).and.withCallbacks().onEnter(i).and.withTriggers().nextOnElementClick(n.AssistantAction.HOOKS.CUSTOMIZE_BUTTON).and.withBI().withDescription("Click Edit & Replace").build(),c=(new n.AssistantAction).withTooltip().withContent("tour.import-images.step1").thatOpensRight().and.thatAttachesTo().hook(n.AssistantAction.HOOKS.MEDIA_CHOOSER_PREVIEW).and.withBackdrop().thatIsInvisible().and.withCustomStage().withDisabledElements(n.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(n.AssistantAction.HOOKS.PANEL_BACK_BUTTON).and.withCallbacks().onExit(a).and.withTriggers().completeOnElementClick(n.AssistantAction.HOOKS.PANEL_HELP_BUTTON).completeOnElementClick(n.AssistantAction.HOOKS.MEDIA_SETTINGS_REPLACE_BUTTON,"",!0).completeOnElementClick(n.AssistantAction.HOOKS.ORGANIZE_MEDIA_BUTTON,"",!0).completeOnElementClick(n.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("Click Replace").build();return{id:"importImagesAssistantTask",label:s("text-manager.field-editor.use-imported-images"),BI:t.ImportImagesTaskBI,actions:[l,c],customData:{editMode:"smart assist"}}};angular.module("siteGeneratorTourManagerInternal").factory("importImagesTaskConf",function(){return o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(56),o=function(){function e(e,t,i,n,o){this.publishSiteIntervalTaskConf=e,this.assistantManager=t,this.$timeout=i,this.smartAssistPublishManager=n,this.$q=o}return e.$inject=["publishSiteIntervalTaskConf","assistantManager","$timeout","smartAssistPublishManager","$q"],e.prototype.markPublishTipAsVisited=function(){return n.PublishTimer.isPublishTourVisited=!0,this.$q.resolve()},e.prototype.openPublishPopup=function(){this.$timeout(function(){$('[data-hook="topbar-publish"] .publish-button').click()})},e.prototype.startTour=function(e){var t=this;this.markPublishTipAsVisited().then(function(){t.smartAssistPublishManager.evaluatePublishIssue()});var i=this.publishSiteIntervalTaskConf({openPublishPopup:function(){return t.openPublishPopup()}});this.assistantManager.startTask(i)},e.prototype.start=function(e){this.startTour(e)},e}();t.PublishSiteIntervalTask=o,angular.module("siteGeneratorTourManagerInternal").service("publishSiteIntervalTask",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(71),o=i(2),r=i(13),a=i(0),s=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u){var p;this.importContentTaskConf=e,this.importImagesTaskConf=t,this.assistantManager=i,this.$timeout=n,this.applicationState=o,this.modelTreeHelpers=r,this.storyServices=a,this.textManagerHelpers=s,this.$translate=l,this.pagesPanelManager=c,this.nodeFetcher=d,this.flags=u,this.fieldToSelector=((p={})[core.ElementSubTypes.Title]={fieldContainer:this.getFieldWrapperContainer(core.ElementSubTypes.Title).join(", "),textManagerLabel:this.buildRichTextSelector(core.ElementSubTypes.Title),toggleButton:this.buildToggleButtonSelector(core.ElementSubTypes.Title)},p[core.ElementSubTypes.Subtitle]={fieldContainer:this.getFieldWrapperContainer(core.ElementSubTypes.Subtitle).join(", "),textManagerLabel:this.buildRichTextSelector(core.ElementSubTypes.Subtitle),toggleButton:this.buildToggleButtonSelector(core.ElementSubTypes.Subtitle)},p[core.ElementSubTypes.LongText]={fieldContainer:this.getFieldWrapperContainer("description").join(", "),textManagerLabel:this.buildRichTextSelector("description"),toggleButton:this.buildToggleButtonSelector("description")},p[core.ElementSubTypes.Image]={fieldContainer:this.getFieldWrapperContainer(core.ElementSubTypes.Image)[0],toggleButton:this.buildToggleButtonSelector(core.ElementSubTypes.Image)},p),this.supportedContentFields=this.textManagerHelpers.getSupportedContentFields(),this.supportedImagesFields=this.textManagerHelpers.getSupportedImagesFields()}return e.$inject=["importContentTaskConf","importImagesTaskConf","assistantManager","$timeout","applicationState","modelTreeHelpers","storyServices","textManagerHelpers","$translate","pagesPanelManager","nodeFetcher","flags"],e.prototype.TextManagerImportedTipDone=function(e){a.get(this.storyServices.story,e)||!1||(a.set(this.storyServices.story,e,!0),o.PubSub.fire(o.events.IMPORT_TIP_DONE))},e.prototype.openEditPanelForTextManager=function(e){var t=this;this.openEditPanel(e).then(function(){var i=t.getTextManagerLabelSelector(e);t.$timeout(function(){$(i).trigger("mouseenter")})})},e.prototype.openEditPanel=function(e){var t=this,i=this.modelTreeHelpers.getPageNode(e.containerPageId);this.pagesPanelManager.goToPage(i,!1);var n=this.storyServices.story.selectedPage===i.id?0:1e3;return this.$timeout(function(){var i=e.isListHeader()||e.isListFooter()?e.identifyingNodeId:e.id;return t.flags.refactorOSIActions?t.applicationState.setContentFocus(i,t.nodeFetcher.getNodeSitePart(e)):t.applicationState.setContentFocus(i,t.modelTreeHelpers.getNodeSitePart(e)),t.applicationState.goToEditMode(),t.$timeout(1e3)},n)},e.prototype.buildNestedSelectors=function(e,t){return e.map(function(e){return e+" "+t}).join(", ")},e.prototype.buildRichTextSelector=function(e){var t=this.getFieldWrapperContainer(e),i=this.getRichTextInput();return this.buildNestedSelectors(t,i)},e.prototype.buildToggleButtonSelector=function(e){var t=this.getFieldWrapperContainer(e);return this.buildNestedSelectors(t,'[data-hook="toggle-button"]')},e.prototype.getFieldWrapperContainer=function(e){return e===core.ElementSubTypes.Title?['.field-wrapper[field-title="Title"]','.field-wrapper[field-title$=" Title"]']:e===core.ElementSubTypes.Subtitle?['.field-wrapper[field-title="Subtitle"]','.field-wrapper[field-title$=" Subtitle"]']:"description"===e?['.field-wrapper[field-title="Description"]','.field-wrapper[field-title="Paragraph"]']:e===core.ElementSubTypes.Image?['.field-wrapper[field-title="Media"]']:void 0},e.prototype.getRichTextInput=function(){return'c23-rich-text-input[data-hook="field-rich-text-input"]'},e.prototype.getSelectors=function(e,t){var i=1===t.length?t[0]:this.modelTreeHelpers.getFirstVisibleField(e,t);return this.fieldToSelector[i]},e.prototype.getTextManagerLabelSelector=function(e){return this.getSelectors(e,this.supportedContentFields).textManagerLabel},e.prototype.getFieldContainerSelector=function(e,t){return this.getSelectors(e,t).fieldContainer},e.prototype.getToggleButton=function(e,t){return this.getSelectors(e,t).toggleButton},e.prototype.getImportContentTaskConfParams=function(e,t){var i=this;void 0===t&&(t=!1);var o=e||this.textManagerHelpers.getNodeForImportContent();return{openEditPanel:function(){return i.openEditPanelForTextManager(o)},getFieldContainerSelector:function(){return i.getFieldContainerSelector(o,i.supportedContentFields)},getToggleButton:function(){return i.getToggleButton(o,i.supportedContentFields)},TextManagerTipDone:function(){return i.TextManagerImportedTipDone(n.AssistantManager.textManagerImportedContentDoneKey)},translationOf:this.$translate.instant,isBusinessDetailsChanged:t}},e.prototype.getImportImagesTaskConfParams=function(e){var t=this,i=e||this.textManagerHelpers.getNodeForImportImages();return{openEditPanel:function(){return t.openEditPanel(i)},getFieldContainerSelector:function(){return t.getFieldContainerSelector(i,t.supportedImagesFields)},getToggleButton:function(){return t.getToggleButton(i,t.supportedImagesFields)},TextManagerTipDone:function(){return t.TextManagerImportedTipDone(n.AssistantManager.textManagerImportedImagesDoneKey)},translationOf:this.$translate.instant}},e.prototype.getImportContentTask=function(){var e=this.getImportContentTaskConfParams();return this.importContentTaskConf(e)},e.prototype.getImportImagesTask=function(){var e=this.getImportImagesTaskConfParams();return this.importImagesTaskConf(e)},e.prototype.startTextManagerContentTour=function(){var e=this.getImportContentTask();this.assistantManager.startTask(e)},e.prototype.startTextManagerImagesTour=function(){var e=this.getImportImagesTask();this.assistantManager.startTask(e)},e.prototype.startTextManagerContentTourForBusinessDetailsChanged=function(){var e=this.getImportContentTaskConfParams(null,!0),t=this.importContentTaskConf(e);this.assistantManager.startTask(t)},e.prototype.start=function(e){e.issueType.id===r.issueTypeIds.IMPORTED_IMAGES?this.startTextManagerImagesTour():e.issueType.id===r.issueTypeIds.IMPORTED_CONTENT&&this.startTextManagerContentTour()},e}();t.ImportTask=s,angular.module("siteGeneratorTourManagerInternal").service("importTask",s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(0),r=function(){function e(e,t,i,o,r){var a=this;this.smartAssistMenuService=e,this.publishService=t,this.menuService=i,this.$translate=o,this.flags=r,this.updateActiveIssues=function(){a.activeIssues=a.smartAssistMenuService.getIssues(),a.generalDividerList=a.initiateGeneralDivider(),a.flags.smartAssistTpa?a.pageContainerDividerList=a.initiatePageContainerDividers():a.pageDividerList=a.initiatePageDividers()},this.issuePageId=function(e){return e.pageInfo.pageId},this.issueSectionPosition=function(e){return e.pageInfo.sectionPosition},this.issuePageDividerExists=function(e,t){return Boolean(e[a.issuePageId(t)])},this.issueSectionDividerExists=function(e,t){return Boolean(e[a.issuePageId(t)].sectionDividers[a.issueSectionPosition(t)])},this.issueContainerDividerExists=function(e,t){return Boolean(e[t.issueDivider])},this.issueContainerPageDividerExists=function(e,t){return Boolean(e[t.issueDivider][a.issuePageId(t)])},this.issueContainerSectionDividerExists=function(e,t){return Boolean(e[t.issueDivider][a.issuePageId(t)].sectionDividers[a.issueSectionPosition(t)])},this.updateActiveIssues(),this.mutedIssues=[],n.PubSub.subscribe(n.events.PUBLISH,this.updateActiveIssues),n.PubSub.subscribe(n.events.TPA_SMART_ASSIST_ISSUES_UPDATED,this.updateActiveIssues)}return e.$inject=["smartAssistMenuService","publishService","menuService","$translate","flags"],Object.defineProperty(e.prototype,"displayEmptyState",{get:function(){return this.smartAssistMenuService.shouldDisplayEmptyState()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"generalIssuesExist",{get:function(){return this.generalDividerList.length>0&&!this.issueListComplete(this.generalDividerList)},enumerable:!0,configurable:!0}),e.prototype.getAutomationId=function(e,t){var i="issue-container-"+e.pageName;return t.pageInfo.sectionName&&(i+="-"+t.pageInfo.sectionName),i},e.prototype.getSubtitleDivider=function(e,t,i){return-1!==["upgrade","general","imported-content"].indexOf(e)?"":t.pageName+(i.sectionName?" "+i.sectionName:"")},Object.defineProperty(e.prototype,"pageRelatedIssuesExist",{get:function(){return this.pageDividerList.length>0},enumerable:!0,configurable:!0}),e.prototype.containerIssuesExist=function(e){return this.pageContainerDividerList.find(function(t){return t.containerName===e}).pageDividerList.length>0},e.prototype.initiateGeneralDivider=function(){return this.activeIssues.filter(function(e){return!e.pageInfo})},e.prototype.onMuteIssue=function(e){this.mutedIssues.push(e),e.mute()},e.prototype.isMuted=function(e){return-1!==this.mutedIssues.indexOf(e)},e.prototype.getFixIssueText=function(e){return e.fixIssueText},e.prototype.allPageIssuesAreComplete=function(e){var t=this;return e.sections.every(function(e){return t.allSectionIssuesAreComplete(e)})},e.prototype.allSectionIssuesAreComplete=function(e){return this.issueListComplete(e.issues)},e.prototype.issueListComplete=function(e){var t=this;return e.every(function(e){return t.isMuted(e)})},e.prototype.buildPageDividers=function(){var e=this,t={};return this.activeIssues.filter(function(e){return Boolean(e.pageInfo)}).forEach(function(i){e.issuePageDividerExists(t,i)?e.issueSectionDividerExists(t,i)?t[e.issuePageId(i)].sectionDividers[e.issueSectionPosition(i)].issues.push(i):t[e.issuePageId(i)].sectionDividers[e.issueSectionPosition(i)]=e.createSectionDivider(i):t[e.issuePageId(i)]=e.createPageDivider(i)}),t},e.prototype.buildContainerDividers=function(){var e=this,t={};return this.activeIssues.filter(function(e){return Boolean(e.pageInfo)}).forEach(function(i){i.issueDivider||(i.issueDivider="general"),e.issueContainerDividerExists(t,i)?e.issueContainerPageDividerExists(t,i)?e.issueContainerSectionDividerExists(t,i)?t[i.issueDivider][e.issuePageId(i)].sectionDividers[e.issueSectionPosition(i)].issues.push(i):t[i.issueDivider][e.issuePageId(i)].sectionDividers[e.issueSectionPosition(i)]=e.createSectionDivider(i):t[i.issueDivider][e.issuePageId(i)]=e.createPageDivider(i):t[i.issueDivider]=e.createContainerDivider(i)}),t},e.prototype.createContainerDivider=function(e){return(t={})[this.issuePageId(e)]={pageName:e.pageInfo.pageName,sectionDividers:(i={},i[this.issueSectionPosition(e)]=this.createSectionDivider(e),i)},t;var t,i},e.prototype.createPageDivider=function(e){return{pageName:e.pageInfo.pageName,sectionDividers:(t={},t[this.issueSectionPosition(e)]=this.createSectionDivider(e),t)};var t},e.prototype.createSectionDivider=function(e){return{sectionPosition:e.pageInfo.sectionPosition,sectionName:e.pageInfo.sectionName,issues:[e]}},e.prototype.buildContainerDividerArray=function(e){var t=this,i=this.buildEmptyPageContainerDividerArray();return o.each(e,function(e,n){var o=t.sortPageDivider(e).map(function(i){return{pageId:i,pageName:e[i].pageName,sections:t.buildSectionDividerArray(e[i])}});i.find(function(e){return e.containerName===n}).pageDividerList=o}),i},e.prototype.buildPageDividerArray=function(e){var t=this;return this.sortPageDivider(e).map(function(i){return{pageId:i,pageName:e[i].pageName,sections:t.buildSectionDividerArray(e[i])}})},e.prototype.buildSectionDividerArray=function(e){return this.sortSectionDividers(e.sectionDividers).map(function(t){return e.sectionDividers[t]})},e.prototype.sortSectionDividers=function(e){return Object.keys(e).sort()},e.prototype.sortPageDivider=function(e){var t=this.menuService.getMenuItems(!1).map(function(e){return e.id});return Object.keys(e).sort(function(e,i){return t.indexOf(e)-t.indexOf(i)})},e.prototype.initiatePageDividers=function(){var e=this.buildPageDividers();return this.buildPageDividerArray(e)},e.prototype.initiatePageContainerDividers=function(){var e=this.buildContainerDividers();return this.buildContainerDividerArray(e)},e.prototype.buildEmptyPageContainerDividerArray=function(){return[{containerName:"general",pageDividerList:[]},{containerName:"content",pageDividerList:[]},{containerName:"imported-content",pageDividerList:[]},{containerName:"upgrade",pageDividerList:[]}]},e}();angular.module("siteGeneratorTourManagerInternal").component("smartAssistTab",{controller:r,templateUrl:"views/assistant/smart-assist-tab.html",bindings:{goToAssistantBucket:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){var n=this;this.SmartAssistManager=e,this.$scope=t,this.smartAssistMenuService=i,t.$watch(function(){return n.smartAssistMenuService.getNumberOfActiveIssues()},function(e){n.updateNumOfIssues(e)})}return e.$inject=["SmartAssistManager","$scope","smartAssistMenuService"],Object.defineProperty(e.prototype,"hide",{get:function(){return this.smartAssistMenuService.shouldDisplayEmptyState()},enumerable:!0,configurable:!0}),e.prototype.updateNumOfIssues=function(t){this.displayedNumOfIssues=t<=e.MaxToDisplay?t:e.MaxToDisplay+"+"},e.MaxToDisplay=9,e}();angular.module("siteGeneratorTourManagerInternal").component("smartAssistBadge",{controller:n,templateUrl:"views/assistant/smart-assist-badge.html"})},function(e,t){var i=function(){function e(e){this.$translate=e}return e.$inject=["$translate"],e.prototype.getFixIssueText=function(){return this.fixIssueText||this.$translate.instant("smart-assist.issue.fix")},e}();angular.module("siteGeneratorTourManagerInternal").component("smartAssistIssue",{controller:i,templateUrl:"views/assistant/smart-assist-issue.html",bindings:{text:"<",icon:"<",isHideMute:"<?",onFix:"&",onMute:"&",fixIssueText:"<?",issueDivider:"&?"}})},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(185),r=i(186),a=i(2),s=i(13),l=i(0),c=function(){function e(e,t,i,n,l,c){var d,u=this;this.SmartAssistManager=e,this.smartAssistConf=t,this.publishService=i,this.consumerBiLogger=n,this.flags=l,this.$rootScope=c,this.issueTypeIdToTaskBIDescription=((d={})[s.issueTypeIds.SOCIALS_DEFAULT_LINKS]=r.SocialDefaultLinksTaskBI.description,d[s.issueTypeIds.UNLINKED_BUTTON]=o.UnlinkedButtonTaskBI.description,d),c.$watch(function(){return u.getNumberOfActiveIssues()},function(e,t){a.PubSub.fire(a.events.SMART_ASSIST_NUMBER_CHANGED,{old:t,new:e})})}return e.$inject=["SmartAssistManager","smartAssistConf","publishService","consumerBiLogger","flags","$rootScope"],e.prototype.getIssues=function(){var e=this;return this.getActiveIssues().map(function(t){return n({id:t.id,issueTypeId:t.issueType.id,fixIssueText:t.context&&t.context.smartAssistData?t.context.smartAssistData.link.text:"",isHideMute:!1},e.getIssueUIData(t),{fix:function(){return t.issueType.action(t)},mute:function(){return e.mute(t)}})})},e.prototype.shouldDisplayEmptyState=function(){return!this.issuesExist},e.prototype.displayIssue=function(e){return e.issueType.id===s.issueTypeIds.PUBLISH_SITE_INTERVAL||(!(!this.flags.textManager||!this.flags.textManagerTours||e.namespaceId!==s.namespaces.IMPORT)||(!(!this.flags.smartAssistTpa||!l.includes(core.TpaTypes,e.issueType.id))||(e.namespaceId===s.namespaces.LAYOUT||this.publishService.isSitePublished())))},e.prototype.getActiveIssues=function(){var e=this,t=this.SmartAssistManager.getActiveIssues();return Object.keys(t).map(function(e){return t[e]}).filter(function(t){return e.displayIssue(t)})},e.prototype.getNumberOfActiveIssues=function(){return this.getActiveIssues().length},Object.defineProperty(e.prototype,"issuesExist",{get:function(){return this.getIssues().length>0},enumerable:!0,configurable:!0}),e.prototype.getIssueUIData=function(e){return this.smartAssistConf.getIssueUIDataBuilder(e.issueType.id)(e.context)},e.prototype.mute=function(e){this.consumerBiLogger.tour.smartAssistCardMute(this.issueTypeIdToTaskBIDescription[e.issueType.id]),this.SmartAssistManager.mute([e])},e}();t.SmartAssistMenuService=c,angular.module("siteGeneratorTourManagerInternal").service("smartAssistMenuService",c)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.smartAssistState=e}return e.$inject=["smartAssistState"],Object.defineProperty(e.prototype,"issuesExisted",{get:function(){return this.smartAssistState.issuesExisted},enumerable:!0,configurable:!0}),e}();angular.module("siteGeneratorTourManagerInternal").component("smartAssistEmptyState",{controller:n,templateUrl:"views/assistant/smart-assist-empty-state.html",bindings:{goToAssistantBucket:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(720),o=i(721);angular.module("siteGeneratorStaticsConsumerAppInternal").service("imageUpscale",n.ImageUpscale),angular.module("siteGeneratorStaticsConsumerAppInternal").service("imageUpscaleEditor",o.ImageUpscaleEditor)},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),r=function(){function e(e,t,i,n){this.imageClientApi=e,this.sectionMedia=t,this.mediaUpscale=i,this.renderedMediaLayout=n}return e.$inject=["imageClientApi","sectionMedia","mediaUpscale","renderedMediaLayout"],e.prototype.isSuperUpscaleRequired=function(e){var t=this.getImageLayout(e);if(!t)return!1;var i=this.getMedia(e);if(this.isGif(i))return!1;var n=t.crop||i,o=n.width,r=n.height,a=t.width,s=t.height,l=Number((a/o).toFixed(5)),c=Number((s/r).toFixed(5));return l>1.8||c>1.8},e.prototype.isGif=function(e){return e.fileUrl&&e.fileUrl.match(/.gif$/)},e.prototype.setUpscaleMethod=function(e,t){this.mediaUpscale.setUpscaleMethod(e.isListHeader()?e.identifyingNode:e,t),o.PubSub.fire("MEDIA_UPSCALE_CHANGED",e.isListHeader()?e.identifyingNode:e)},e.prototype.getUpscaleMethod=function(e){return e.isListHeader()?this.mediaUpscale.getUpscaleMethod(e.identifyingNode):this.mediaUpscale.getUpscaleMethod(e)},e.prototype.isSuperUpscaled=function(e){return this.getUpscaleMethod(e)===core.MediaUpscaleMethod.super},e.prototype.getImageLayout=function(e){return this.renderedMediaLayout.get(e)},e.prototype.getImageUrlClassicScaled=function(e){return this.getImageUrl(e,core.MediaUpscaleMethod.classic)},e.prototype.getImageUrlSuperScaled=function(e){return this.getImageUrl(e,core.MediaUpscaleMethod.super)},e.prototype.printDebugInfo=function(e){console.log("imageUpscale-debug-START");var t=this.getImageLayout(e),i=this.getMedia(e),n=this.getCommonImageUrlParams(i,t);console.log("\n      Layout::\n        width-> "+t.width+"\n        height-> "+t.height+"\n        displayMode-> "+t.displayMode+"\n        "+(t.crop?"crop::\n          x->"+t.crop.x+"\n          y-> "+t.crop.y+"\n          width-> "+t.crop.width+"\n          height-> "+t.crop.height+"\n          ":"")+"\n    "),console.log("\n      Media::\n        width-> "+i.width+"\n        height-> "+i.height+"\n    "),console.log("\n      Summary::\n        upscaleRequired-> "+this.isSuperUpscaleRequired(e)+"\n        isSuperUpscaled-> "+this.isSuperUpscaled(e)+"\n        classicScaleUrl-> "+this.getImageUrlClassicScaled(e)+"\n        superScaleUrl-> "+this.getImageUrlSuperScaled(e)+"\n        imageClientApiParams::\n          relativeUrl-> "+n.relativeUrl+"\n          sourceWidth-> "+n.sourceWidth+"\n          sourceHeight-> "+n.sourceHeight+"\n          targetWidth-> "+n.targetWidth+"\n          targetHeight-> "+n.targetHeight+"\n          "+(t.crop?"crop::\n            x->"+t.crop.x+"\n            y-> "+t.crop.y+"\n            width-> "+t.crop.width+"\n            height-> "+t.crop.height+"\n            ":"")+"\n    "),console.log("imageUpscale-debug-END")},e.prototype.getImageUrl=function(e,t){var i=this.getMedia(e),o=this.getImageLayout(e);if(o.crop){var r=o.crop,a=r.x,s=r.y,l=r.height,c=r.width;return this.imageClientApi.getCropImageUrl(n({},this.getCommonImageUrlParams(i,o),{upscaleMethod:t,cropX:a,cropY:s,cropWidth:c,cropHeight:l}))}return o.displayMode===core.RenderedMediaLayoutDisplayMode.FILL?this.imageClientApi.getScaleToFillImageUrl(n({},this.getCommonImageUrlParams(i,o),{upscaleMethod:t})):this.imageClientApi.getScaleToFitImageUrl(n({},this.getCommonImageUrlParams(i,o),{upscaleMethod:t}))},e.prototype.getMedia=function(e){return this.sectionMedia.getMedia(e)},e.prototype.getCommonImageUrlParams=function(e,t){return{relativeUrl:e.relativeUri,sourceHeight:e.height,sourceWidth:e.width,targetHeight:t.height,targetWidth:t.width}},e}();t.ImageUpscale=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(12),o=function(){function e(e,t){this.consumerDialogs=e,this.$mdDialog=t}return e.$inject=["consumerDialogs","$mdDialog"],e.prototype.open=function(e){this.consumerDialogs.showDialog(n.ConsumerDialogTypes.IMAGE_UPSCALE_MODAL,{node:e})},e.prototype.close=function(){this.$mdDialog.cancel()},e}();t.ImageUpscaleEditor=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=i(0),r=function(){function e(e,t,i){this.$window=e,this.$injector=t,this.cabbie=i,this.KEY_BINDINGS={S:{name:"Site Converter",data:"siteConverterConf"}},this.isActive=!1}return e.$inject=["$window","$injector","cabbie"],e.prototype.init=function(){this.registerKeyListeners()},e.prototype.registerKeyListeners=function(){var e=this,t=o.debounce(function(t){if((t.metaKey||t.ctrlKey)&&t.shiftKey&&t.altKey&&!e.isActive){var i=String.fromCharCode(t.keyCode),o=e.KEY_BINDINGS[i];o&&(e.isActive=!0,e.cabbie.show({element:"configurator",target:"body",attributes:{name:o.name,conf:e.$injector.get(o.data)},position:{positionX:n.AssistantPositionX.Right,positionY:n.AssistantPositionY.Center,offsetY:-200}}).then(function(){return e.isActive=!1}))}},500);angular.element(this.$window).keydown(t)},e}();t.ConfiguratorManager=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("configuratorManager",r)},function(e,t){var i=function(){function e(e){this.$log=e,angular.element(".intro-tooltip-arrow").hide()}return e.$inject=["$log"],e.prototype.onValueChange=function(e,t){this.$log.log("Changed Configuration",e,t),_.set(this.conf,e,t)},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("configurator",{controller:i,templateUrl:"views/configurator/configurator.html",bindings:{name:"=",conf:"="}})},function(e,t){var i=function(){function e(){}return e.prototype.onValueChange=function(e,t){isNaN(e)||(e=+e),this.onChange({changedKey:this.configurationKey+(t?"."+t:""),changedValue:e})},Object.defineProperty(e.prototype,"configurationKey",{get:function(){return this.conf[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"configurationValue",{get:function(){return this.conf[1]},set:function(e){this.conf[1]=e},enumerable:!0,configurable:!0}),e.prototype.isPrimitive=function(){var e=typeof this.configurationValue;return"string"===e||"number"===e},e.prototype.getMarginStyle=function(){return this.margin?this.margin+"rem":0},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("configurationField",{controller:i,templateUrl:"views/configurator/configuration-field.html",bindings:{conf:"<",onChange:"&",margin:"=?"}})},function(e,t,i){"use strict";var n=function(){function e(e){this.flags=e}return e.$inject=["flags"],e.prototype.$postLink=function(){},e.prototype.$onDestroy=function(){},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("openSiteLoader",{templateUrl:"views/loaders/open-site-loader.html",controller:n})},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(30),r=i(0),a=function(e){function t(t,i,n,o,a,s,l,c,d,u,p){var g=e.call(this,p)||this;return g.menuService=t,g.pagesPanelManager=i,g.$timeout=n,g.flags=o,g.modelTree=a,g.documentServicesPlatformService=s,g.applicationState=l,g.initService=c,g.storyServices=d,g.$rootScope=u,g.initServiceLoaded=!1,g.unsubscribers=[],g.showImportPageButton=!1,g.handleNodesRendererKeydown=function(e,t){var i=e.currentTarget.value;g.pagesPanelManager.nameIsValid(i)&&(g.pageNameOldValue[t.id]=i)},g.handleNodesRendererKeyup=function(e,t){var i=e.currentTarget.value;g.pagesPanelManager.nameIsValid(i)||(t.error||(g.$timeout(function(){t.error=!0},0),g.$timeout(function(){t.error=!1},5e3)),e.currentTarget.value=g.pageNameOldValue[t.id],t.name=g.pageNameOldValue[t.id])},g.togglePageVisibility=function(e){g.pagesPanelManager.togglePageVisibility(e)},g.pageNameOldValue=new Object,g.treeOptions={dropped:function(e){var t=e.source.nodeScope.$modelValue,i=e.source.nodesScope.$modelValue;if(t.children.length>0){var n=r.findIndex(t.children,{id:t.id});if(n>-1)return i.push(t.children[n]),void t.children.splice(n,1)}return g.pagesPanelManager.reorderPage(e.source.nodeScope.item,e.dest.index,e.source.index),!0}},g.unsubscribers.push(g.$rootScope.$on("$stateChangeSuccess",function(e,t){g.applicationState.isInSignupSettings()?g.showNested=!0:g.showNested=!1})),g.initService.loaded().then(function(){g.initServiceLoaded=!0,g.showImportPageButton=!!(g.flags.wizSiteConverter&&g.storyServices.story.importedSite&&g.storyServices.story.importedSite.siteAddress)}),g}return n(t,e),t.$inject=["menuService","pagesPanelManager","$timeout","flags","modelTree","documentServicesPlatformService","applicationState","initService","storyServices","$rootScope","helpDialogManager"],t.prototype.onReturn=function(){this.applicationState.goToPagesPanel(),this.showNested=!1},t.prototype.$onInit=function(){this.pagesPanelManager.onMountPanel()},t.prototype.$onDestroy=function(){this.pagesPanelManager.onUnmountPanel(),this.unsubscribers.forEach(function(e){return e()})},Object.defineProperty(t.prototype,"menuItems",{get:function(){return this.pagesPanelManager.menuItems},enumerable:!0,configurable:!0}),t.prototype.showRenameForm=function(e,t,i){this.canManagePage(i)&&(t.$show(),e.stopPropagation())},t.prototype.afterRename=function(e,t){var i=t.name,n=t.id;this.pagesPanelManager.nameIsValid(i)?this.pagesPanelManager.renamePage(n,i):(e.$data=this.pageNameOldValue[t.id],t.name=this.pageNameOldValue[t.id]),this.$timeout(function(){t.error=!1},0)},t.prototype.openActionsDialog=function(e,t,i){this.pagesPanelManager.openActionsDialog(e,t,i),this.flags.dontGoToPage&&e.stopPropagation()},t.prototype.isSettingsActive=function(e){return this.flags.dontGoToPage&&this.pagesPanelManager.isHighlighted(e)},t.prototype.isSelectedPage=function(e){return this.pagesPanelManager.isSelectedPage(e)},t.prototype.isDisabledPage=function(e){return this.pagesPanelManager.isDisabledPage(e)},t.prototype.isHiddenPage=function(e){return this.pagesPanelManager.isHiddenPage(e)},t.prototype.getMenuItems=function(e,t){return void 0===t&&(t=!0),this.pagesPanelManager.getMenuItems(e,t)},t.prototype.closePagesPanel=function(){this.pagesPanelManager.closePagesPanel()},t.prototype.openPagesPanelHelp=function(){this.pagesPanelManager.openPagesPanelHelp()},t.prototype.goToDesktopEditMode=function(){return this.pagesPanelManager.goToDesktopEditMode()},t.prototype.goToPage=function(e){this.pagesPanelManager.isDisabledPage(e.id)||this.pagesPanelManager.goToPage(e)},t.prototype.addPage=function(){this.pagesPanelManager.addPage()},t.prototype.importPage=function(){this.applicationState.goToImportPagePanel()},t.prototype.isInMobileEditMode=function(){return this.pagesPanelManager.isInMobileEditMode()},t.prototype.canManagePage=function(e,t){return void 0===t&&(t=!0),this.pagesPanelManager.canManagePage(e,t)},t.prototype.canReorderPage=function(e){return this.pagesPanelManager.canReorderPage(e)},t.prototype.isContainerOfUnmanageable=function(e){return this.pagesPanelManager.isContainerOfUnmanageable(e)},t.prototype.iconName=function(e){return this.pagesPanelManager.iconName(e)},t.prototype.showFooter=function(){return!this.isInMobileEditMode()||this.flags.cardsToPanels},t.prototype.showPanelMessage=function(){return this.flags.cardsToPanels&&this.isInMobileEditMode()},t.prototype.hasInfoTip=function(e){return this.pagesPanelManager.hasInfoTip(e)},t.prototype.getInfoTip=function(e){return this.pagesPanelManager.getInfoTip(e)},t.prototype.onTooltipClick=function(e){return this.pagesPanelManager.onTooltipClick(e)},t.prototype.showNestedPanel=function(){return this.flags.membersArea&&this.showNested&&!this.applicationState.isInMobileEditMode()&&!!this.documentServicesPlatformService.getMembersParent()},t}(o.PanelBase);angular.module("siteGeneratorStaticsConsumerAppInternal").component("pagesPanel",{controller:a,templateUrl:"views/pages-panel.html",bindings:{showNested:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(173);angular.module("siteGeneratorBuilderInternal").component("addSection",{templateUrl:"views/builder/add-section.html",controller:n.AddSection,bindings:{pageMode:"="}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(39);angular.module("siteGeneratorBuilderInternal").directive("sectionReady",["$parse",function(e){return{restrict:"A",link:function(e,t,i){t.ready(function(){var i=e.$ctrl;t.attr(i.isLoadedAttr,"true"),i.isShowPlaceholdersInPresets&&i.placeholders.length>0&&(i.placeholders.pop(),i.showPlaceholders(!0))})}}}]).component("previewList",{templateUrl:"views/builder/preview-list.html",controller:n.PreviewList,bindings:{nodes:"=",strategy:"<",intent:"<",current:"=?",scale:"<",pageName:"=",draggable:"=",selectedSection:"=?",markSelected:"<",reloadAfterAdd:"&",loadCallback:"&?",onSelectionStart:"&",onSelectionChanged:"&",source:"<?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(0),r=function(){function e(e,t,i,o,r,a,s,l,c){var d=this;this.applicationState=e,this.consumerBiLogger=t,this.initService=i,this.goToEditorService=o,this.$translate=r,this.CcDialogBuilder=a,this.CONSUMER_DIALOGS=s,this.appsManager=l,this.flags=c,this.apps=[],this.origin=n.BIOrigins.AppsPanel,this.showLoader=!0,i.loaded().then(function(){t.apps.appPanelOpen(),c.widgetAppsPanel?(d.apps=d.sortApps(l.getAppsPackages()),d.showLoader=!1):l.getApps().then(function(e){d.apps=e,d.showLoader=!1})})}return e.$inject=["applicationState","consumerBiLogger","initService","goToEditorService","$translate","CcDialogBuilder","CONSUMER_DIALOGS","appsManager","flags"],e.prototype.removeApp=function(e){var t=this;this.flags.widgetAppsPanel?this.appsManager.removeApp2(e).then(function(){return t.apps=t.sortApps(t.appsManager.getAppsPackages())}):this.appsManager.removeApp(e,function(){return t.updateTpaAdded(e.ceType,!1)})},e.prototype.addApp=function(e){this.appsManager.addApp(e,this.origin)},e.prototype.sortApps=function(e){var t=this;return e.sort(function(e,i){return t.appsManager.isAppInstalled2(e)?-1:t.appsManager.isAppInstalled2(i)?1:0})},e.prototype.updateTpaAdded=function(e,t){this.apps[o.findIndex(this.apps,{ceType:e})].isInstalled=t},e.prototype.goToEditor=function(){this.goToEditorService.launchDialog(n.BIOrigins.AppsPanel)},e.prototype.close=function(){this.consumerBiLogger.apps.appPanelClose(),this.applicationState.goToBuilder(!0)},e.prototype.help=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.app.panel"),this.CONSUMER_DIALOGS.APPS_PANEL_HELP)},e.prototype.onOpenAppClick=function(e){this.appsManager.onOpenAppClick(e,n.BIOrigins.AppsPanel)},e}();angular.module("siteGeneratorBuilderInternal").component("appsPanel",{templateUrl:"views/builder/apps-panel.html",controller:r})},function(e,t,i){"use strict";var n=function(){function e(e,t){this.clientTopology=e,this.flags=t}return e.$inject=["clientTopology","flags"],e.prototype.getBackground=function(e){return"url("+this.clientTopology.staticsUrl+"/images/app-package/"+e.ceType+".png)"},e}();angular.module("siteGeneratorBuilderInternal").component("appPackage",{templateUrl:"views/builder/app-package.html",controller:n,bindings:{title:"@",description:"@",shouldOpenManagementOnOpenApp:"<",shouldShowDeleteButton:"<",onAddClick:"&",onDeleteClick:"&",onOpenAppClick:"&?",beforeOpeningMng:"&?",app:"=",origin:"@",isAppInstalled:"&"}})},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(30),r=i(239),a=i(39),s=i(2),l=i(14),c=i(1),d=function(e){function t(t,i,n,o,r,a,s,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E){var w=e.call(this,E)||this;return w.nodeFetcher=t,w.applicationState=i,w.storyServices=n,w.layoutSolver=o,w.CONSUMER_DIALOGS=r,w.CcDialogBuilder=a,w.initService=s,w.flags=c,w.presetHelpers=d,w.consumerBiLogger=u,w.$translate=p,w.mediaEditorManager=g,w.presetsStrategyFactory=h,w.$timeout=m,w.assistantManager=f,w.simpleSolutionManager=v,w.solutionFetcher=S,w.$q=y,w.$element=T,w.sitePartTypes=b,w.sectionHeightUIService=I,w.$rootScope=P,w.switchPresetBackManager=M,w.isHeader=!1,w.unsubscribers=[],w.initNodes=function(){var e=w.presetHelpers.getCurrentPresetNodes();e?(w.nodes=e.nodes,w.current=e.current,w.setPresetStrategy(),w.setPartSuffix(e.sitePart)):w.applicationState.goToBuilder()},w.setPartSuffix=function(e){w.flags.mergedHeader&&"body"!==e&&(w.partSuffix="-"+e,w.isHeader=e===w.sitePartTypes.HEADER)},w.setPresetStrategy=function(){w.switchPresetStrategy=w.presetsStrategyFactory.createFromNode(w.nodes[0],{strategyMode:l.PresetsStrategyMode.Change})},w.init(),w}return n(t,e),t.$inject=["nodeFetcher","applicationState","storyServices","layoutSolver","CONSUMER_DIALOGS","CcDialogBuilder","initService","flags","presetHelpers","consumerBiLogger","$translate","mediaEditorManager","presetsStrategyFactory","$timeout","assistantManager","simpleSolutionManager","solutionFetcher","$q","$element","sitePartTypes","sectionHeightUIService","$rootScope","switchPresetBackManager","helpDialogManager"],t.prototype.init=function(){var e=this;if(this.flags.mergedHeader&&(this.scrollTo=new r.ScrollTo(this.$timeout,this.assistantManager,this.$q,this.$element,{selectedSelector:".preview-section.selected",scrollableContainerSelector:a.PreviewList.PreviewListSelector,considerSelectedIcon:!0})),this.applicationState.isSectionHeightMode()&&this.sectionHeightUIService.setChangeSectionHeightState(!0),this.initService.loaded().then(function(){e.flags.cardsToPanels&&e.applicationState.isSectionColorsMode()||e.initNodes(),e.unsubscribers.push(s.PubSub.subscribe(s.events.CONTENT_UPDATED,e.initNodes)),e.switchPresetIntent=a.PreviewListIntent.ChangeSection}),this.flags.cardsToPanels){var t=this.$rootScope.$on("$stateChangeSuccess",function(){e.showNested=e.applicationState.isSwitchPresetArea(),!e.applicationState.isSwitchPresetMode()||e.nodes&&e.nodes.length&&!e.dirty||(e.initNodes(),e.dirty=!1)}),i=s.PubSub.subscribe(s.events.BEFORE_CAPTURE_OPERATION,function(){e.applicationState.isSectionColorsMode()&&(e.dirty=!0)});this.unsubscribers.push(t,i)}},t.prototype.stateIsChangeHeight=function(){return this.sectionHeightUIService.stateIsChangeHeight()},t.prototype.$onDestroy=function(){this.unsubscribers.forEach(function(e){return e()})},t.prototype.back=function(){this.applicationState.goToBuilder(!0)},t.prototype.help=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant(this.getHelpPopupName()),this.CONSUMER_DIALOGS.SECTION_REPLACE_HELP)},t.prototype.getHelpPopupName=function(){return this.applicationState.isInMobileEditMode()?"help.switch-design.mobile":this.flags.mergedHeader&&this.isHeader?"help.switch-design.header":"help.section.replace"},t.prototype.isTPA=function(){return this.nodes&&this.nodes.length>0&&this.nodes[0].isTpaNode&&this.nodes[0].isTpaNode()},t.prototype.getHeaderParagraphText=function(){return this.applicationState.isInMobileEditMode()?this.$translate.instant("builder.section-design.mobile-headline-text"):this.flags.mergedHeader&&this.isHeader?this.$translate.instant("builder.section-design.panel-header-text-header"):this.isTPA()?this.getTPAHeader():this.$translate.instant("builder.section-design.panel-header-text")},t.prototype.getTPAHeader=function(){var e=this.$translate.instant("builder.section-design.TPA_NAME."+this.nodes[0].contentElementType);return this.$translate.instant("builder.section-design.panel-header-text-tpa",{TPA_NAME:e})},t.prototype.goToDesignMode=function(){this.consumerBiLogger.siteDesign.designPanelIsLoaded(c.BIOrigins.SectionPanel),this.applicationState.goToDesignMode()},t.prototype.onReturn=function(){this.switchPresetBackManager.back()},t}(o.PanelBase);angular.module("siteGeneratorBuilderInternal").component("switchPreset",{templateUrl:"views/builder/switch-preset.html",controller:d,bindings:{showNested:"<?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(39),o=i(2),r=i(14),a=i(1),s=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g){var h=this;this.nodeFetcher=e,this.applicationState=t,this.storyServices=i,this.layoutSolver=n,this.CONSUMER_DIALOGS=o,this.CcDialogBuilder=r,this.initService=a,this.flags=s,this.presetHelpers=l,this.$translate=c,this.consumerBiLogger=d,this.presetsStrategyFactory=u,this.simpleSolutionManager=p,this.solutionFetcher=g,this.previewTotal=0,this.initNodes=function(){var e=h.presetHelpers.getCurrentPresetNodes();h.nodes=e.nodes,h.current=e.current},this.init()}return e.$inject=["nodeFetcher","applicationState","storyServices","layoutSolver","CONSUMER_DIALOGS","CcDialogBuilder","initService","flags","presetHelpers","$translate","consumerBiLogger","presetsStrategyFactory","simpleSolutionManager","solutionFetcher"],Object.defineProperty(e.prototype,"titleParagraph",{get:function(){var e=1!==this.previewTotal?"builder.switch-color.panel-paragraph":"builder.switch-color.panel-paragraph-only-one-option";return this.$translate.instant(e)},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this;this.initService.loaded().then(function(){e.initNodes(),e.switchColorStrategy=e.presetsStrategyFactory.create(r.PresetsStrategyType.Color,{strategyMode:r.PresetsStrategyMode.Change}),e.switchColorIntent=n.PreviewListIntent.ChangeSection,e.unsubscribe=o.PubSub.subscribe(o.events.CONTENT_UPDATED,e.initNodes)})},e.prototype.$onDestroy=function(){this.unsubscribe&&this.unsubscribe()},e.prototype.back=function(){this.applicationState.goToSwitchPresetMode("color-back")},e.prototype.close=function(){this.applicationState.goToBuilder(!0)},e.prototype.help=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.section.colors"),this.CONSUMER_DIALOGS.SECTION_COLORS_HELP)},e.prototype.isTPA=function(){return this.nodes&&this.nodes.length>0&&this.nodes[0].isTpaNode&&this.nodes[0].isTpaNode()},e.prototype.goToDesignPanel=function(){this.applicationState.goToSwitchPresetMode("switch-color")},e.prototype.goToColorationPanel=function(){this.consumerBiLogger.siteDesign.customizeDesignColorPaletteMode(a.BIOrigins.SectionColorsPanel),this.applicationState.goToColorationPanel()},e.prototype.loadCallback=function(e){this.previewTotal=e.total},e}();angular.module("siteGeneratorBuilderInternal").component("switchColor",{templateUrl:"views/builder/switch-color.html",controller:s})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(t,i,n,o,r,a,s,l,c,d,u,p){var g=this;this.applicationState=t,this.modelTree=i,this.introManager=n,this.storyServices=o,this.CONSUMER_DIALOGS=r,this.introContentElementGenerator=a,this.CcDialogBuilder=s,this.$translate=l,this.mediaGallery=c,this.undoRedo=d,this.modelTreeHelpers=u,this.consumerBiLogger=p,p.builder.businessInfoEditBusinessInfoPageView(),this.editableIntroData={},e.sections.forEach(function(e){return a.enrichIntroData(g.editableIntroData,g.modelTreeHelpers.getContentElementByType(e))});var h=this.editableIntroData.media.logos.length&&this.editableIntroData.media.logos[0].data;h&&(this.editableIntroData.media.logos[0].url=c.itemToThumbnailUrl(h,h.width,h.height))}return e.$inject=["applicationState","modelTree","introManager","storyServices","CONSUMER_DIALOGS","introContentElementGenerator","CcDialogBuilder","$translate","mediaGallery","undoRedo","modelTreeHelpers","consumerBiLogger"],e.prototype.apply=function(){var t=this;this.consumerBiLogger.builder.businessInfoUpdateChanges(0,0,0),this.applicationState.goToBuilder(!0),this.introManager.data=this.editableIntroData,this.introManager.data.socialLinks=this.introManager.data.socialLinks.filter(function(e){return!!e.url}),e.sections.forEach(function(e){return t.introContentElementGenerator.enrichContentElement(t.modelTreeHelpers.getContentElementByType(e),t.editableIntroData,!0)}),this.storyServices.emitNodeChangedClearCache(),this.undoRedo.captureOperation(),this.CcDialogBuilder.hide(),this.consumerBiLogger.builder.businessInfoUpdateChangesSuccess()},e.prototype.cancel=function(){this.consumerBiLogger.builder.businessInfoClosePage(),this.CcDialogBuilder.cancel()},e.prototype.help=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.businessinfo.edit"),this.CONSUMER_DIALOGS.BUSINESS_CARD_HELP)},e.sections=["GeneralDescription","Contact","Social"],e}();angular.module("siteGeneratorBuilderInternal").component("businessInfoModal",{templateUrl:"views/builder/business-info-modal.html",controller:n})},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p){var g=this;this.$mdDialog=e,this.storyServices=t,this.contentManager=i,this.modelTreeHelpers=n,this.undoRedo=o,this.$log=r,this.$timeout=a,this.initContent=s,this.importTask=l,this.modelTree=c,this.wizardService=d,this.consumerBiLogger=u,this.$element=p,this.step=0,this.showCategorySearch=!0,this.businessInputName="businessName",this.TRANSITION_DURATION=300,this.handleSelection=function(e){g.industryId=e.industryId,g.structureId=e.structureId,g.categoryName=e.term,g.validCategory=!0},this.preSuggestionsByVertical=intro.DEFAULT_PRE_SUGGESTIONS}return e.$inject=["$mdDialog","storyServices","contentManager","modelTreeHelpers","undoRedo","$log","$timeout","initContent","importTask","modelTree","wizardService","consumerBiLogger","$element"],e.prototype.onSelectFromEmptyList=function(e,t){this.handleSelection(e)},e.prototype.onSearchChanged=function(e,t,i){if(!i)return this.validCategory=!1,void(this.lastSearch=e);this.handleSelection(i),this.consumerBiLogger.builder.introQuestionsDialogBusinessTypeSelected(i.term,this.lastSearch||"","create from template")},e.prototype.afterStepChanged=function(){var e=this;this.showHideDropdownAfterTransition().then(function(){return e.focusStepInput()})},e.prototype.showHideDropdownAfterTransition=function(){var e=this;return this.$timeout(function(){e.shouldHideDropDown=0!==e.step},0===this.step?this.TRANSITION_DURATION:0)},e.prototype.focusStepInput=function(){var e=this.$element.find('[name="'+(0===this.step?"businessTypeInput":this.businessInputName)+'"]');e.val(this.modelTreeHelpers.getBusinessName()),this.$timeout(function(){e.focus()},this.TRANSITION_DURATION)},e.prototype.closeDialog=function(){this.dismissDialog()},e.prototype.onNext=function(){this.step=1,this.afterStepChanged(),this.consumerBiLogger.builder.introQuestionsDialogClick(this.categoryName,"next","create from template","category-search")},e.prototype.onDotClick=function(e){this.step=e,this.afterStepChanged()},e.prototype.onFinish=function(){var e=this.structureId,t=this.industryId,i=this.name;try{this.changeStructureAndIndustry(e,t),this.changeBusinessName(i),this.importTask.startTextManagerContentTourForBusinessDetailsChanged()}catch(n){this.$log.error("can't assign business details to the website",e,t,i)}finally{this.dismissDialog()}},e.prototype.dismissDialog=function(){var e=this;this.showCategorySearch=!1,this.$timeout(function(){e.$mdDialog.hide()}),this.consumerBiLogger.builder.introQuestionsDialogClick(this.categoryName,"dismiss","create from template","category-search")},e.prototype.changeStructureAndIndustry=function(e,t){this.storyServices.setStructureAndIndustry(e,t),this.contentManager.initialize({structureId:e,industryId:t}),this.initContent.fromStory(this.storyServices.story)},e.prototype.changeBusinessName=function(e){return n(this,void 0,void 0,function(){var t,i,n,r,a,s;return o(this,function(o){switch(o.label){case 0:return t=this.modelTreeHelpers.getBusinessName(),e&&t!==e?(i=String.fromCharCode(65535),n=String.fromCharCode(65534),r=this.modelTreeHelpers.getGeneralDescriptionValues().BusinessName.value,a=r.replace(i,"").replace(n,"").replace(/(<([^>]+)>)/gi,""),s=this.modelTreeHelpers.getGeneralDescriptionValues().CopyrightMessage.value,this.modelTreeHelpers.getGeneralDescriptionValues().BusinessName.value=r.replace(a,e),this.modelTreeHelpers.getGeneralDescriptionValues().CopyrightMessage.value=s.replace(a,e),[4,this.wizardService.onSynchronousFieldChanged(this.modelTree.getGeneralInformation(),"BusinessName",null,!0)]):[3,3];case 1:return o.sent(),[4,this.wizardService.onSynchronousFieldChanged(this.modelTree.getGeneralInformation(),"CopyrightMessage",null,!0)];case 2:o.sent(),this.storyServices.reRender(),o.label=3;case 3:return[2]}})})},e}();angular.module("siteGeneratorBuilderInternal").component("businessDetailsChanger",{templateUrl:"views/builder/business-details-changer.html",controller:r})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(54),o=i(1),r=function(){function e(t,i,n,o,r,a,s,l,c,d,u){var p=this;this.initService=t,this.logoExtractionPopupService=i,this.builderLogoPersistence=n,this.$element=o,this.$interval=r,this.undoRedo=a,this.colorationUtils=s,this.$log=l,this.$q=c,this.flags=d,this.consumerBiLogger=u,this.origin=this.logoExtractionPopupService.getOrigin(),this.consumerBiLogger.dialogs.show(null,null,null,this.getNameOfStep(this.getFirstStep()),this.origin),this.reposition(),this.interval=this.$interval(function(){p.reposition()},e.RepositionLoopDurationMs)}return e.$inject=["initService","logoExtractionPopupService","builderLogoPersistence","$element","$interval","undoRedo","colorationUtils","$log","$q","flags","consumerBiLogger"],e.prototype.$onDestroy=function(){this.$interval.cancel(this.interval)},e.prototype.reposition=function(){var e=document.querySelectorAll(this.logoExtractionPopupService.getAnchorSelector());if(e.length){var t=e[e.length-1].getBoundingClientRect(),i=t.top+t.height/2,n=t.right+44,o=i-this.$element.get(0).getBoundingClientRect().height/2,r=n;this.$element.css("top",o+"px"),this.$element.css("left",r+"px")}},e.prototype.getFirstStep=function(){switch(this.origin){case o.BIOrigins.HeaderPanel:return n.LogoCEWStep.SHOULD_I_EXTRACT_STEP;case o.BIOrigins.ClipartSettingsPanel:return n.LogoCEWStep.CREATING_PALETTE_STEP}},e.prototype.getNameOfStep=function(e){switch(e){case n.LogoCEWStep.SHOULD_I_EXTRACT_STEP:return"create-logo-color-palette";case n.LogoCEWStep.CREATING_PALETTE_STEP:return"extract-logo-color-palette";case n.LogoCEWStep.SHOULD_I_SAVE_STEP:return"logo-color-palette-ready"}},e.prototype.getPersistenceHandler=function(){return this.builderLogoPersistence},e.prototype.getPreparePalettePromise=function(){var e=this;return this.flags.newPaletteFromLogo?this.logoExtractionPopupService.getLogoColoration():this.initService.init().then(function(){return e.colorationUtils.initialize()}).then(function(){return e.logoExtractionPopupService.getLogoColoration()}).then(function(){var t=e.colorationUtils.getLogoPalette();return t?{colors:t.colors,mode:e.colorationUtils.getLogoRecommendedColorationMode()}:(e.$log.debug("Expected to find a logo palette in colorationUtils"),e.$q.reject("Expected to find a logo palette in colorationUtils"))})},e.prototype.createLogoPaletteClick=function(e){this.consumerBiLogger.dialogs.approveChanges(null,null,null,this.getNameOfStep(e),null,this.origin)},e.prototype.skipLogoPaletteClick=function(e){this.consumerBiLogger.dialogs.cancel(null,null,null,this.getNameOfStep(e),this.origin),this.logoExtractionPopupService.hideLogoPopup()},e.prototype.saveLogoPaletteClick=function(e){this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(this.colorationUtils.numOfColors(e.colors),1,"logo",0,this.origin)},e.prototype.onDone=function(e){var t=this;if(e){var i=Date.now();this.colorationUtils.initialize().then(function(){return t.colorationUtils.useLogoColors({setColorationMode:!0,overrideMainColor:!0})}).then(function(){return t.undoRedo.captureOperation(!0,!0)}).then(function(){return t.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(Date.now()-i,t.colorationUtils.numOfColors(e.colors),1,"logo",0,t.origin)})}this.logoExtractionPopupService.hideLogoPopup()},e.RepositionLoopDurationMs=200,e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("logoExtractionPopup",{controller:r,templateUrl:"views/builder/logo-extraction-popup.html"})},function(e,t,i){"use strict";var n=function(){function e(e){this.flags=e}return e.$inject=["flags"],e}();angular.module("siteGeneratorBuilderInternal").component("panelMessage",{templateUrl:"views/builder/panel-message.html",transclude:!0,controller:n})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a,s,l){this.flags=e,this.$log=t,this.$q=i,this.sectionManager=n,this.modelTreeHelpers=o,this.colorationUtils=r,this.storyServices=a,this.undoRedo=s,this.nodeFetcher=l}return e.$inject=["flags","$log","$q","sectionManager","modelTreeHelpers","colorationUtils","storyServices","undoRedo","nodeFetcher"],e.prototype.apply=function(e){var t=this;return this.log("page preset previews- start applying"),this.$q.when().then(function(){return t.log("setting coloration mode:",e.pageConfig.colorationMethod),t.colorationUtils.setColorationMode(e.pageConfig.colorationMethod)}).then(function(){return t.log("setting coloration level:",e.pageConfig.colorationLevel),t.colorationUtils.setColorationLevel(e.pageConfig.colorationLevel)}).then(function(){return t.log("setting preset previews:",e.presetPreviews),n.sequencePromises(e.presetPreviews,function(e){return t.sectionManager.handlePreviewSelected(e,!0,null,t.flags.refactorOSIActions?t.nodeFetcher.getNodeSitePart(e.node):t.modelTreeHelpers.getNodeSitePart(e.node),void 0,!0)}).then(function(){return t.storyServices.reRender()}).then(function(){return t.undoRedo.captureOperation()})}).then(function(){t.log("page preset previews- finish applying")})},e.prototype.log=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.flags.debug&&(e=this.$log).info.apply(e,t)},e}();t.PagePresetsPreviewApplier=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("pagePresetsPreviewApplier",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(14),o=i(0),r=function(){function e(e,t,i,n,o,r,a,s){this.presetsStrategyFactory=e,this.modelTreeHelpers=t,this.presetHelpers=i,this.curatedPresetsFilter=n,this.flags=o,this.$log=r,this.slideShowPresetUtils=a,this.nodeFetcher=s,this.lastPageConfigList=null}return e.$inject=["presetsStrategyFactory","modelTreeHelpers","presetHelpers","curatedPresetsFilter","flags","$log","slideShowPresetUtils","nodeFetcher"],e.prototype.getLastPageConfigList=function(){return this.lastPageConfigList},e.prototype.setLastPageConfigList=function(e){this.lastPageConfigList=e},e.prototype.getPagePresetsPreview=function(e,t){var i=this;return this.getSectionAlternativesList(e).then(function(e){return i.curatedPresetsFilter.groupByCuratedPreviews(e,t)}).then(function(e){return i.handleSlideShowPreviewEntries(e)}).then(function(e){return i.getAllPresetPreviews(e)})},e.prototype.isPPPSupportPreview=function(){return this.flags.newTopBar&&this.flags.newPreviewMode},e.prototype.getSectionAlternativesList=function(e){var t=this;return Promise.all(e.map(function(e){var i=t.createPresetsStrategy(e);return i.generateListOfPreviews([e]).then(function(t){return{previewEntries:t,strategy:i,node:e}})}))},e.prototype.createPresetsStrategy=function(e){var t=e.isTpaNode&&e.isTpaNode()?n.PresetsStrategyType.Tpa:n.PresetsStrategyType.Generic,i={strategyMode:n.PresetsStrategyMode.Change,isBackgroundSupported:!0,sitePart:this.flags.refactorOSIActions?this.nodeFetcher.getNodeSitePart(e):this.modelTreeHelpers.getNodeSitePart(e),isChangeBgPermutationSupported:!1};return this.presetsStrategyFactory.create(t,i)},e.prototype.getAllPresetPreviews=function(e){var t=this;return Promise.all(e.map(function(e,i){return Promise.all(e.map(function(e){return t.getPresetPreviews(e,i)}))})).then(function(e){return t.logResult(e),e})},e.prototype.logResult=function(e){if(this.flags.debug||this.flags.isRecordingFullStorySession){var t=e.map(function(e){return e.map(function(e){return e&&e.preset?e.preset.id:e})});this.$log.info("page preset previews after calculation:",t)}},e.prototype.getPresetPreviews=function(e,t){var i=this;return o.matchPromises(e.previewEntries,function(n){var o=i.flags.refactorOSIActions?i.nodeFetcher.getNodeSitePart(e.node):i.modelTreeHelpers.getNodeSitePart(e.node);return n.dummyPageIdSuffix=o+"|"+e.node.id+"|"+t,e.strategy.calculatePresetPreview(n)}).then(function(n){return n||i.getDefaultNonTpaPresetPreview(e.node,t)})},e.prototype.getDefaultNonTpaPresetPreview=function(e,t){var i=this.flags.refactorOSIActions?this.nodeFetcher.getNodeSitePart(e):this.modelTreeHelpers.getNodeSitePart(e),n="|"+t;return this.presetHelpers.cloneCurrentSectionForPreview(e,i,n)},e.prototype.handleSlideShowPreviewEntries=function(e){var t=this;return e.forEach(function(e){e.forEach(function(e){e.previewEntries=e.previewEntries.map(function(e){return t.slideShowPresetUtils.isNodeSupportSlideShow(e.node)?t.slideShowPresetUtils.addSlideShowPreviews([e])[0]:e})})}),e},e}();t.PagePresetsPreviewProvider=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("pagePresetsPreviewProvider",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a){this.assistantManager=e,this.storyServices=t,this.modelTree=i,this.colorationUtils=n,this.pagePresetsPreviewProvider=o,this.consumerBiLogger=r,this.flags=a,this.scale1200=.25,this.pageConfigItemsCount=3,this.flags.newTopBar&&this.flags.newPreviewMode?(this.pageConfigList=this.pagePresetsPreviewProvider.getLastPageConfigList()||this.buildPageConfigList(),this.pagePresetsPreviewProvider.setLastPageConfigList(this.pageConfigList)):this.pageConfigList=this.buildPageConfigList(),this.pageNodes=[this.modelTree.getGeneralInformation()].concat(this.modelTree.getPageNodeById(this.storyServices.story.selectedPage).children.filter(function(e){return!e.userHidden}),[this.modelTree.getFooterInformation()])}return e.$inject=["assistantManager","storyServices","modelTree","colorationUtils","pagePresetsPreviewProvider","consumerBiLogger","flags"],e.prototype.buildPageConfigList=function(){var e=this,t=this.flags.noRandomForAutomationTests?1:Math.ceil(100*Math.random());return Array.from({length:this.pageConfigItemsCount}).map(function(i,n){return{colorationLevel:e.getColorationLevel(n),colorationMethod:e.getColorationMode(n),curatedTemplateId:e.getCuaratedTemplateId(t,n)}})},e.prototype.getColorationLevel=function(e){if(this.flags.newPaletteFromLogo||void 0!==this.colorationUtils.getColorationLevel()){var t=this.colorationUtils.getColorationLevel();switch(e){case 0:default:return t;case 1:return 0;case 2:return Math.max(1,(3-t)%4)}}},e.prototype.getColorationMode=function(e){var t=this.colorationUtils.getColorationMode();switch(e){case 0:default:return t;case 1:return(t+1)%2;case 2:return t%2}},e.prototype.getCuaratedTemplateId=function(e,t){return e+t},e.prototype.onSkipClick=function(){this.consumerBiLogger.builder.pagePresetPreviewNavigationClick("skip",null,null,null,null),this.flags.newTopBar&&this.flags.newPreviewMode?this.assistantManager.gotoLastAction():this.assistantManager.gotoNextAction()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("pagePresetsPreviewControl",{templateUrl:"views/builder/page-presets-preview-control.html",controller:n,bindings:{}})},function(e,t,i){"use strict";var n=function(){return function(){}}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("presetsPreviewViewer",{templateUrl:"views/builder/presets-preview-viewer.html",controller:n,bindings:{presetPreviews:"<",tpaPresetsWidth:"<",scale:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(20),o=i(0),r=function(){function e(e,t,i,n,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T){var b=this;this.pagePresetsPreviewProvider=e,this.presetHelpers=t,this.sitePartTypes=i,this.kitUtils=n,this.colorationUtils=r,this.designKit=a,this.$scope=s,this.modelTreeHelpers=l,this.pagePresetsPreviewApplier=c,this.assistantManager=d,this.themeChooser=u,this.$element=p,this.$timeout=g,this.consumerBiLogger=h,this.spinnerService=m,this.applicationState=f,this.modelTree=v,this.designKitStrips=S,this.flags=y,this.nodeFetcher=T,this.pageAlternatives=[],this.MAX_SCROLL_PREVIEW=60,this.previewClickName="Preview",this.editClickName="edit site",this.unclearReRenderProgress=Promise.resolve(),this.reRenderPreviews=o.debounce(function(){b.$scope.$broadcast(preset.UPDATE_ALL_PREVIEWS_KEY),b.unclearReRender()},100),this.resizeHandler=function(){b.scale=b.calculateScale(),b.unclearReRender().then(function(){b.reRenderPreviews()})},this.consumerBiLogger.builder.pagePresetPreviewStartsLoading(),this.scale=this.calculateScale(),this.attachResizeHandler(),this.resetPageAlternativesHoverState(),this.pagePresetsPreviewProvider.getPagePresetsPreview(this.pageNodes,this.getCuratedPresetsPageIds()).then(function(e){o.sequencePromises(b.pageConfigList,function(t,i){return b.buildPageAlternative(t,e[i]).then(function(e){b.preparePageConfigurations(e),b.pageAlternatives.push(e)})}).then(function(){return b.unclearReRender()}).then(function(){return b.consumerBiLogger.builder.pagePresetPreviewLoaded()})})}return e.$inject=["pagePresetsPreviewProvider","presetHelpers","sitePartTypes","kitUtils","colorationUtils","designKit","$scope","modelTreeHelpers","pagePresetsPreviewApplier","assistantManager","themeChooser","$element","$timeout","consumerBiLogger","spinnerService","applicationState","modelTree","designKitStrips","flags","nodeFetcher"],e.prototype.resetPageAlternativesHoverState=function(){this.pageAlternativesHoverState=this.pageConfigList.map(function(){return!1})},Object.defineProperty(e.prototype,"width",{get:function(){return 1200*this.scale},enumerable:!0,configurable:!0}),e.prototype.isPPPSupportPreview=function(){return this.pagePresetsPreviewProvider.isPPPSupportPreview()},e.prototype.onEditButtonClick=function(e){var t=this;return this.applyPagePresetPreview(e,this.editClickName).then(function(){return t.applicationState.setFirstTimePreview(!1),t.applicationState.goToBuilder().then(function(){t.assistantManager.gotoLastAction()})})},e.prototype.onPreviewButtonClick=function(e){var t=this;return this.applyPagePresetPreview(e,this.previewClickName).then(function(){return t.applicationState.setFirstTimePreview(!0),t.consumerBiLogger.builder.topBarPreviewSiteClick(n.BIModeType.previewInWelcomeTour),t.applicationState.goToPreview(!1,!0).then(function(){t.consumerBiLogger.builder.topBarPreviewSiteSuccess(n.BIModeType.previewInWelcomeTour),t.assistantManager.gotoNextAction()})})},e.prototype.applyPagePresetPreview=function(e,t){var i=this;return this.spinnerService.waitForMe("applyPagePreset"),this.flags.newPaletteFromLogo||void 0!==e.pageConfig.colorationLevel?this.consumerBiLogger.builder.pagePresetPreviewNavigationClick(t,e.pageConfig.colorationLevel.toString(),e.pageConfig.colorationMethod.toString(),this.pageAlternatives.indexOf(e)+1,e.presetPreviews.map(function(e){return i.getPresetPreviewId(e)}).join(",")):this.consumerBiLogger.builder.pagePresetPreviewNavigationClick(t,"undefined",e.pageConfig.colorationMethod.toString(),this.pageAlternatives.indexOf(e)+1,e.presetPreviews.map(function(e){return i.getPresetPreviewId(e)}).join(",")),this.pagePresetsPreviewApplier.apply(e).then(function(){i.spinnerService.imDone("applyPagePreset")})},e.prototype.onClickPPPContainer=function(e){return this.isPPPSupportPreview()?this.onEditButtonClick(e):this.onClick(e)},e.prototype.onClick=function(e){var t=this;return this.spinnerService.waitForMe("applyPagePreset"),this.flags.newPaletteFromLogo||void 0!==e.pageConfig.colorationLevel?this.consumerBiLogger.builder.pagePresetPreviewNavigationClick("edit site",e.pageConfig.colorationLevel.toString(),e.pageConfig.colorationMethod.toString(),this.pageAlternatives.indexOf(e)+1,e.presetPreviews.map(function(e){return t.getPresetPreviewId(e)}).join(",")):this.consumerBiLogger.builder.pagePresetPreviewNavigationClick("edit site","undefined",e.pageConfig.colorationMethod.toString(),this.pageAlternatives.indexOf(e)+1,e.presetPreviews.map(function(e){return t.getPresetPreviewId(e)}).join(",")),this.pagePresetsPreviewApplier.apply(e).then(function(){t.spinnerService.imDone("applyPagePreset"),t.assistantManager.gotoNextAction()})},e.prototype.isPageAutoScrolling=function(e){return this.isPageHovering(e)},e.prototype.isPagePlayingSlideshow=function(e){return this.isPageHovering(e)},e.prototype.enterPresetHoverMode=function(e){this.$element.addClass("hovering-preset"),this.setPageHoverState(e,!0)},e.prototype.leavePresetHoverMode=function(e){this.$element.removeClass("hovering-preset"),this.setPageHoverState(e,!1)},e.prototype.isPageHovering=function(e){var t=this.pageAlternatives.indexOf(e);return this.pageAlternativesHoverState[t]},e.prototype.setPageHoverState=function(e,t){var i=this.pageAlternatives.indexOf(e);this.pageAlternativesHoverState[i]=t},e.prototype.getCuratedPresetsPageIds=function(){return this.pageConfigList.map(function(e){return Number(e.curatedTemplateId)})},e.prototype.applyKitConfigurations=function(e){var t=this,i=this.baseKit||this.kitUtils.getActiveKit();return Promise.resolve().then(function(){var n=o.cloneDeep(i);return Promise.resolve().then(function(){return t.colorationUtils.setColorationMode(e.colorationMethod,n)}).then(function(){return t.flags.newPaletteFromLogo||void 0!==e.colorationLevel?t.colorationUtils.setColorationLevel(e.colorationLevel,n):void 0}).then(function(){return n})})},e.prototype.buildPageAlternative=function(e,t){return this.applyKitConfigurations(e).then(function(i){return{presetPreviews:t,kit:i,pageConfig:e}})},e.prototype.recalcAndOverrideTpaPresetPreviewsInvertProperty=function(e){var t=this;e.presetPreviews.filter(function(e){return t.isTpaPresetPreview(e)}).forEach(function(i){t.modelTree.canInvertTpa(i.node)&&t.themeChooser.coloration.isKitColorationModeIsDark(e.kit)?i.isInverted=!0:i.isInverted=!1})},e.prototype.isTpaPresetPreview=function(e){return e.node.isTpa||e.node.isTpaWidget},e.prototype.preparePageConfigurations=function(e){var t=this,i=e.kit,n=o(e.presetPreviews).filter(function(e){return t.flags.refactorOSIActions?t.nodeFetcher.getNodeSitePart(e.node)===t.sitePartTypes.BODY:t.modelTreeHelpers.getNodeSitePart(e.node)===t.sitePartTypes.BODY}).filter(function(e){return!t.isTpaPresetPreview(e)}).map(function(e){return e.solution}).flatten().value(),r=o.first(e.presetPreviews).solution,a=o.last(e.presetPreviews).solution;if(this.designKit.setKitConfigurationForSolution(i,n,!0),this.designKit.setConfigurationForHeaderFooter(this.sitePartTypes.HEADER,r,i),this.designKit.setConfigurationForHeaderFooter(this.sitePartTypes.FOOTER,a,i),e.presetPreviews.forEach(function(e){t.presetHelpers.preparePresetPreviewForRender(t.flags.refactorOSIActions?t.nodeFetcher.getNodeSitePart(e.node):t.modelTreeHelpers.getNodeSitePart(e.node),e,i)}),n&&n.length){var s=n.map(function(e){return e.getLgData()}),l=this.designKit.getGsu(n[0].getLayoutSelectionStore()),c=this.designKitStrips.getLgStripDescriptors(n),d=this.designKitStrips.getHeaderStripDescriptor(r,this.designKit.getHeaderBg(r)),u=this.designKitStrips.getFooterStripDescriptor(this.designKit.getFooterBg(a));this.designKitStrips.manageBodyStripsPadding(c,s,l,d,u)}this.recalcAndOverrideTpaPresetPreviewsInvertProperty(e)},e.prototype.calculateScale=function(){var e=this.scale1200;return this.$element.children()[0].clientWidth/1200*e},e.prototype.unclearReRender=function(){var e=this;return this.unclearReRenderProgress=this.unclearReRenderProgress.then(function(){return e.$timeout(function(){return new Promise(function(t){e.$scope.$applyAsync(t)})},50)}),this.unclearReRenderProgress},e.prototype.attachResizeHandler=function(){window.addEventListener("resize",this.resizeHandler)},e.prototype.detachResizeHandler=function(){window.removeEventListener("resize",this.resizeHandler)},e.prototype.getPresetPreviewId=function(e){return e.id||e.preset&&e.preset.id},e.prototype.$onDestroy=function(){this.detachResizeHandler()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("pagePresetsPreview",{templateUrl:"views/builder/page-presets-preview.html",controller:r,bindings:{scale1200:"<?",baseKit:"<?",pageConfigList:"<",pageNodes:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a,s){this.modelTree=e,this.modelTreeHelpers=t,this.youtubeChannelManager=i,this.editorHandlers=n,this.consumerBiLoggerHelpers=o,this.$log=r,this.tpaService=a,this.documentServicesMediator=s}return e.$inject=["modelTree","modelTreeHelpers","youtubeChannelManager","editorHandlers","consumerBiLoggerHelpers","$log","tpaService","documentServicesMediator"],e.prototype.handleYoutubeChannel=function(e){var t=this;if(!e)return Promise.resolve();var i=this.modelTreeHelpers.getSocialNode().contentElement.values.SocialButtons.value[0].Link.targetUrl;if(!this.youtubeChannelManager.isValidUrl(i))return Promise.resolve();var n=this.modelTree.find(function(t){return t.contentElementType===e.ceType}),o=n.widgetRef.id,r=this.tpaService.getInstanceId(n);return i?this.youtubeChannelManager.createChannel(i).catch(function(e){return t.callBIAfterChanelCreated(e,o,r)}).then(function(e){return e?t.applyChannelIdOnVideoComp(e.channelId,o).then(function(){return t.callBIAfterChanelCreated(e,o,r)}).catch(function(e){t.$log.error(e)}):(t.$log.warn("can't create channel from url: "+i),Promise.resolve())}):Promise.resolve()},e.prototype.callBIAfterChanelCreated=function(e,t,i){return e.serviceInstanse.logBiFeedConnected(this.consumerBiLoggerHelpers.getMetaSiteId(),t,i,e.channelId||null,null)},e.prototype.applyChannelIdOnVideoComp=function(e,t){return this.documentServicesMediator.updateTpaStyleByCompId(t,[{key:"channelId",type:"font",param:{value:e}}])},e}();t.YoutubeChannelService=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("youtubeChannelService",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.nodeFetcher=e}return e.$inject=["nodeFetcher"],e.prototype.getSectionFromContentId=function(e){var t=this.nodeFetcher.getNode(e);return{node:t&&t.node,sitePart:t&&t.sitePart}},e}();t.SectionPanelManager=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionPanelManager",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h){this.$q=e,this.animationKit=t,this.animationKitPreview=i,this.animationNoPatternIdentifier=n,this.animationInheritPatternIdentifier=o,this.overlayManager=r,this.modelTree=a,this.layoutSolver=s,this.siteState=l,this.spinnerService=c,this.flags=d,this.storyServices=u,this.$translate=p,this.pagesManager=g,this.animationPatterns=h}return e.$inject=["$q","animationKit","animationKitPreview","animationNoPatternIdentifier","animationInheritPatternIdentifier","overlayManager","modelTree","layoutSolver","siteState","spinnerService","flags","storyServices","$translate","pagesManager","animationPatterns"],e.prototype.getDefaultSiteAnimation=function(){return this.animationKit.getDefaultSiteAnimation()},e.prototype.getActivePatternForSite=function(){return this.animationKit.getActivePatternForSite()},e.prototype.getActivePatternLabelForSite=function(){return this.animationPatterns[this.getActivePatternForSite()].label},e.prototype.getActivePatternForSection=function(e,t){return this.animationKit.getActivePatternForSection(e,t)},e.prototype.visibleLGs=function(){return this.overlayManager.listSpanManager.getLayoutGroupsInViewport()},e.prototype.animateVisibleLGs=function(){var e=this.visibleLGs();n[this.flags.lodash4?"invokeMap":String("invoke")](e,"playAnimations")},e.prototype.animateNode=function(e){var t=this.overlayManager.listSpanManager.getByNodeId(e.id);n[this.flags.lodash4?"invokeMap":String("invoke")](t.groups,"playAnimations")},e.prototype.refreshAnimationsForPart=function(e,t){var i=this;void 0===t&&(t=void 0);var o=this.layoutSolver.getPartSolutions(e,t);if(o){var r=o.getSelectedSolution();n.each(r,function(e){i.animationKitPreview.refreshAnimationsForLg(e)})}},e.prototype.refreshAnimationsForNode=function(e,t){var i=this,o=this.overlayManager.listSpanManager.getByNodeId(e.id,t);n.each(o.groups,function(e){i.animationKitPreview.refreshAnimationsForLg(e)})},e.prototype.refreshAnimations=function(){var e=this;n.each(this.modelTree.getPagesNodes(),function(t){e.refreshAnimationsForPart("body",t.id)})},e.prototype.setSiteAnimationPattern=function(e){var t=this;return this.animationKit.setPatternForSite(e),this.$q.when().then(function(){return t.refreshAnimations(),t.siteState.waitForChanges()})},e.prototype.previewPattern=function(e){var t=n.reject(this.visibleLGs(),function(e){return e.isSiteHeader()});this.previewPatternForLgs(t,e)},e.prototype.previewPatternForLgs=function(e,t){var i=this;this.animationKitPreview.stopRunningAnimations(),n.each(e,function(e){i.animationKitPreview.previewPatternForLg(e,t)})},e.prototype.setSectionAnimationPattern=function(e,t,i){return this.animationKit.setPatternForSection(e,t,i),this.refreshAnimationsForNode(e,t),this.siteState.waitForChanges()},e.prototype.doSiteAndSectionPatternsMatch=function(){return this.animationKit.doSiteAndSectionPatternsMatch()},e.prototype.forceSitePattern=function(){return this.animationKit.clearOverridableSections(),this.refreshAnimations(),this.siteState.waitForChanges()},e.prototype.translateTerm=function(e,t){return this.$translate.instant(t+"."+e.toLowerCase().replace(/\s/g,"-"))},e.prototype.placeLabels=function(e,t,i){var o=this;return e.map(function(e){return n.assign(e,{label:o.translateTerm(e[t],i)})})},e.prototype.getPagesTranslationNames=function(){var e=this;return this.pagesManager.getPagesTransitionNames().map(function(t){return{label:e.translateTerm(t,"page-transition"),value:t}})},e}();t.AnimationUtils=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("animationUtils",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="#ffffff",o="#181818",r=[{x:0,y:.2},{x:0,y:.25},{x:.05,y:.2},{x:.1,y:.1},{x:.15,y:.1}],a=function(){function e(e,t){this.themeChooserUtils=e,this.chroma=t}return e.$inject=["themeChooserUtils","chroma"],e.prototype.calculatePalettes=function(e,t){var i=this,n=this.generateColorMatches(e),o=t.slice(0,20-n.length).map(function(e){return i.checkAndAdjustDbColorTint(e)});return n.concat(o).map(function(t,n){return i.calculatePalletWithSixColors(e,t,n)})},e.prototype.markColorationPaletteVersion=function(e,t){return e.colorationVersion=t,e},e.prototype.checkAndAdjustDbColorTint=function(e){return this.themeChooserUtils.isTooDarkColor(e)?this.themeChooserUtils.tintColor(e):this.themeChooserUtils.isTooLightColor(e)?this.themeChooserUtils.shadeColor(e):e},e.prototype.calculatePalletWithSixColors=function(e,t,i){var n=e.mainColor,o=e.white,a=e.black,s=this.themeChooserUtils.isLightColor(n,e),l=this.themeChooserUtils.isLightColor(t,e);s&&l?t=this.themeChooserUtils.toDarkColor(this.themeChooserUtils.shadeColor(t),e):s||l||(t=this.themeChooserUtils.toLightColor(this.themeChooserUtils.tintColor(t),e));var c=this.themeChooserUtils.sortColorsDarkToLight([o,a,n,t]);i%=r.length;var d=this.themeChooserUtils.convertColorWithParam(c[1],c[0],r[i],n,!0),u=this.themeChooserUtils.convertColorWithParam(c[3],c[2],r[i],n,!1),p=this.make6ColorsReadable({mainColor:n,secondaryColor:t,thirdColor:d,fourthColor:u,white:o,black:a});return{colors:this.markColorationPaletteVersion(p,1),creator:"server",numOfColors:6}},e.prototype.generateColorMatches=function(e){var t=e.mainColor;return this.themeChooserUtils.isDarkColor(t,e)?this.themeChooserUtils.generateLighterShades(t):this.themeChooserUtils.generateDarkerShades(t)},e.prototype.areColorsEqual=function(e,t){return!!e&&!!t&&e.toLowerCase()===t.toLowerCase()||!e&&!t},e.prototype.make6ColorsReadable=function(e){var t,i,r,a,s,l,c=this.chroma,d=this.themeChooserUtils,u=e.mainColor,p=e.secondaryColor,g=e.thirdColor,h=e.fourthColor,m=e.black,f=e.white,v=function(){var e;e=d.generate6Colors({mainColor:u,secondaryColor:p,thirdColor:g,fourthColor:h,black:m,white:f}).map(function(e){return c(e)}),t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5]};if(v(),a.luminance()>t.luminance()){var S=m;m=f,f=S,v()}if(c(g).luminance()>c(h).luminance()){if(c(g).luminance()>t.luminance()){S=g;g=f,f=S,v()}if(c(h).luminance()<a.luminance()){S=h;h=m,m=S,v()}}else{if(c(h).luminance()>t.luminance()){S=h;h=f,f=S,v()}if(c(g).luminance()<a.luminance()){S=g;g=m,m=S,v()}}for(;c.contrast(a,t)<2.8;)m=a.darken(.1).hex(),f=t.brighten(.1).hex(),v();var y={black:m,white:f},T=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return d.isDarkColor(e,y)}).length};for(T(u,p,g,h)>2&&(h=d.toLightColor(h,y),v()),T(u,p,g,h)>2&&(g=d.toLightColor(g,y),v()),T(u,p,g,h)<2&&(h=d.toDarkColor(h,y),v()),T(u,p,g,h)<2&&(g=d.toDarkColor(g,y),v());d.isLightColor(u,y)&&c.contrast(u,o)<2.8;)u=c(u).brighten(.1).hex(),v();for(;d.isDarkColor(u,y)&&c.contrast(u,n)<2.8;)u=c(u).darken(.1).hex(),v();for(;d.isLightColor(p,y)&&c.contrast(p,o)<2.8;)p=c(p).brighten(.1).hex(),v();for(;d.isDarkColor(p,y)&&c.contrast(p,n)<2.8;)p=c(p).darken(.1).hex(),v();for(;d.isLightColor(g,y)&&c.contrast(g,o)<2.8;)g=c(g).brighten(.1).hex(),v();for(;d.isDarkColor(g,y)&&c.contrast(g,n)<2.8;)g=c(g).darken(.1).hex(),v();for(;d.isLightColor(h,y)&&c.contrast(h,o)<2.8;)h=c(h).brighten(.1).hex(),v();for(;d.isDarkColor(h,y)&&c.contrast(h,n)<2.8;)h=c(h).darken(.1).hex(),v();for(;(c.contrast(t,a)<2.8||c.contrast(t,s)<2.8||c.contrast(t,l)<2.8)&&!this.areColorsEqual(f,n);)f=t.brighten(.3).hex(),v();for(;(c.contrast(a,i)<2.8||c.contrast(a,r)<2.8)&&!this.areColorsEqual(m,o);)m=a.darken(.3).hex(),v();return{mainColor:u,secondaryColor:p,thirdColor:g,fourthColor:h,black:m,white:f}},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("paletteGenerator",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a,s,l){this.themeChooser=e,this.fontDataForThumbnail=t,this.storyServices=i,this.$translate=n,this.simpleSolutionManager=o,this.layoutSolver=r,this.modelTree=a,this.solutionFetcher=s,this.flags=l}return e.$inject=["themeChooser","fontDataForThumbnail","storyServices","$translate","simpleSolutionManager","layoutSolver","modelTree","solutionFetcher","flags"],e.prototype.convertFontDataToThumbnail=function(t,i){void 0===i&&(i=!1);var n=this.fontDataForThumbnail.data[t.displayName.toLowerCase().replace(/ /,"-")];return{name:{title:n.name,font:this.fixFontFamily(this.themeChooser.getSpecificKitFontStyle(t,n.fontName)),family:t.displayName,size:(n.fontNameSize||e.FONT_THUMBNAIL_TITLE_FONT_SIZE)+(i?e.LARGE_THUMBNAIL_TITLE_FONT_SIZE_INCREMENT:0)},description:{title:n.description,font:this.fixFontFamily(this.themeChooser.getSpecificKitFontStyle(t,n.fontDescription)),family:t.displayName,size:n.fontDescriptionSize||e.FONT_THUMBNAIL_PARAGRAPH_FONT_SIZE},id:t.id}},e.prototype.fixFontFamily=function(t){return t.replace(e.BROKEN_FONT_FAMILY_REGEXP,function(e){return'"'+e.replace(/\+/g," ")+'"'})},e.prototype.updateNodeView=function(e){var t=this,i=this.solutionFetcher.getSectionSolution(this.storyServices.story.selectedPage,e.getId());return n.each(i,function(e){e.isDirty=!0}),this.layoutSolver.calculateSolverStatus(void 0,void 0,!0).then(function(){return t.simpleSolutionManager.detectAndHandleSolutionFailure(e.getContainerPageId(),e.getId())}).then(function(){return t.storyServices.reRender("body")})},e.prototype.updateView=function(){return this.modelTree.dirtifyAllPages(),this.storyServices.onNodeChangedClearCacheSynchronous()},e.BROKEN_FONT_FAMILY_REGEXP=/\w+(\+[\w]+)+/g,e.FONT_THUMBNAIL_PARAGRAPH_FONT_SIZE=14,e.FONT_THUMBNAIL_TITLE_FONT_SIZE=30,e.LARGE_THUMBNAIL_TITLE_FONT_SIZE_INCREMENT=6,e}();t.FontUtils=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("fontUtils",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a,s,l){this.themeChooser=e,this.fontDataForThumbnail=t,this.storyServices=i,this.$translate=n,this.simpleSolutionManager=o,this.layoutSolver=r,this.modelTree=a,this.solutionFetcher=s,this.flags=l}return e.$inject=["themeChooser","fontDataForThumbnail","storyServices","$translate","simpleSolutionManager","layoutSolver","modelTree","solutionFetcher","flags"],e.prototype.selectFontKit=function(e){var t=this;return this.themeChooser.setAllFontsFromOneTheme(e).then(function(){t.themeChooser.serializeFontKitSelection(e)})},e.prototype.isSelectedKit=function(e){return e===this.selectedFont},e}();t.FontPanelManager=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("fontPanelManager",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o){this.themeChooser=e,this.contentManager=t,this.$rootScope=i,this.$q=n,this.flags=o}return e.$inject=["themeChooser","contentManager","$rootScope","$q","flags"],e.prototype.calculateKits=function(){var e=this.themeChooser.getColorThemes()||[],t=this.contentManager.getKitIds()||[];return this.$q.when(this.resolveKits(t,e))},e.prototype.getActiveKit=function(){return this.themeChooser.getActiveTheme("mainKit")},e.prototype.resolveKits=function(e,t){var i=new Set(e),n=new Map(t.map(function(e){return e.kitFonts.replacingKitId&&i.has(e.kitFonts.replacingKitId)?[e.kitFonts.replacingKitId,e]:[e.id,e]})),o=e.map(function(e){return n.get(e)}).filter(function(e){return e}),r=t.filter(function(e){return!i.has(e.id)});return o.concat(r)},e}();t.KitUtils=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("kitUtils",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=i(0),r=function(){function e(e,t,i,n,o,r){this.$q=e,this.TourAttachedTooltip=t,this.TourBackdrop=i,this.flags=n,this.$timeout=o,this.componentCompiler=r}return e.$inject=["$q","TourAttachedTooltip","TourBackdrop","flags","$timeout","componentCompiler"],e.prototype.show=function(e){var t,i=this,o=new this.TourAttachedTooltip,r=!e.hideBackdrop;e.introTooltipClass&&o.element.addClass(e.introTooltipClass),r&&(t=new this.TourBackdrop);var a,s=this.$q.defer(),l=function(e){o.element.css({opacity:"0"}),i.$timeout(function(){o.destroy(),a.destroy&&a.destroy(),r?t.hide().then(function(){t.destroy(),s.resolve(e)}):s.resolve(e)},200)};return r&&t.onClick(function(){return l(!1)}),e.attributes||(e.attributes={}),e.tourStepClass||(e.tourStepClass=""),"string"==typeof e.hideAttribute&&(e.attributes[e.hideAttribute]=l),e.position||(e.position={}),"number"!=typeof e.position.positionX&&(e.position.positionX=n.AssistantPositionX.Right),"number"!=typeof e.position.positionY&&(e.position.positionY=n.AssistantPositionY.Center),a=e.text?{content:'<div class="tour-step '+e.tourStepClass+'">'+e.text+"</div>"}:this.componentCompiler.compile(e.element,e.attributes),o.setContent(a.content),this.$timeout(function(){o.attachTo(e.target,e.position.positionX,e.position.positionY,e.position.offsetX,e.position.offsetY,e.position.minY),o.show(150),!i.flags.textManager||r||e.disableCloseClickingOutside||i.closeWhenClickingOutside(e.element,l)}),r&&this.$timeout(function(){return t.show(0)}),s.promise},e.prototype.isOpen=function(e){var t=this.componentCompiler.getKebabCase(e);return $(t).length>0},e.prototype.closeWhenClickingOutside=function(e,t){var i=this,n='div[data-hook="component-overlay"], list-span-overlay button, list-span-overlay .segment-overlay';$("body").on("outside-cabbie-clicked",function(e,i){t&&($("body").removeClass("cabbie-open"),$("body").off("outside-cabbie-clicked"),$(n).off("click.overlay"),t())}),$("body").addClass("cabbie-open"),$("body.cabbie-open").on("click",function(t){var n=o.kebabCase(e);$(n).length>0&&i.isInDom(t.target)&&!i.isContains(n,t.target)&&$(document.body).trigger("outside-cabbie-clicked",[t])}),$(n).on("click.overlay",function(e){$(document.body).trigger("outside-cabbie-clicked",[e])});var r=window.addEventListener("blur",function(){i.$timeout(function(){"IFRAME"===document.activeElement.tagName&&t(),window.removeEventListener("blur",r)})})},e.prototype.isContains=function(e,t){return!!$(t).closest(e).length},e.prototype.isInDom=function(e){return $(e).length>0||!!$(e).closest("html").length},e}();t.Cabbie=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("cabbie",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=i(39),r=i(14),a=i(1),s=function(){function e(e,t,i,n,o,r,a,s,l){this.$q=e,this.TourAttachedTooltip=t,this.TourBackdrop=i,this.consumerBiLogger=n,this.presetsStrategyFactory=o,this.$compile=r,this.$timeout=a,this.$rootScope=s,this.flags=l}return e.$inject=["$q","TourAttachedTooltip","TourBackdrop","consumerBiLogger","presetsStrategyFactory","$compile","$timeout","$rootScope","flags"],e.prototype.show=function(e){var t=this,i=new this.TourAttachedTooltip,o=new this.TourBackdrop,s=this.$q.defer(),l=function(e){i.element.css({opacity:"0"}),t.$timeout(function(){i.destroy(),o.hide().then(function(){o.destroy(),s.resolve(e)})},200)};o.onClick(function(){return l(!1)});var c=this.compileCAB(e,l);i.setContent(c),this.flags.sectionMedia?(i.attachTo(e.target,n.AssistantPositionX.Right,n.AssistantPositionY.Center,-6),i.addCustomClasses(["cab-tooltip"])):i.attachTo(e.target,n.AssistantPositionX.Right,n.AssistantPositionY.Center,-35),i.show(150);var d=e.nodes[0];return this.consumerBiLogger.sectionManagement.replaceSectionPanelIsLoaded(d.getId(),d.getSpecificContentElementType(),d.alias,e.strategyType===r.PresetsStrategyType.FitMode?a.BIOrigins.ToFitModeButton:a.BIOrigins.ToCropModeButton),this.$timeout(function(){return o.show(0)}),s.promise},e.prototype.compileCAB=function(e,t){var i=this.$rootScope.$new();return i.header=e.title,i.text=e.text,i.nodes=e.nodes,i.strategy=this.presetsStrategyFactory.create(e.strategyType,{strategyMode:r.PresetsStrategyMode.Change}),i.intent=o.PreviewListIntent.ChangeSection,i.title=e.title,i.source=a.BIOrigins.ToFitModeButton,i.onClose=function(e){return t(e)},this.$compile("<preview-list-panel\n      header='title'\n      text='text'\n      nodes='nodes'\n      intent='intent'\n      strategy='strategy'\n      on-close='onClose(value)'\n      source='source'>\n    </preview-list-panel>")(i)},e}();t.PreviewListCAB=s,angular.module("siteGeneratorStaticsConsumerAppInternal").service("previewListCAB",s),angular.module("siteGeneratorStaticsConsumerAppInternal").component("previewListPanel",{template:"\n<cc-panel-frame label=\"{{::$ctrl.header|translate}}\" show-close-button=\"true\" on-close=\"$ctrl.onClose({value:false})\">\n  <cc-panel-fixed-top>\n    <div class=\"text-t2\">\n      {{::$ctrl.text|translate}}\n    </div>\n  </cc-panel-fixed-top>\n  <cc-panel-body>\n    <preview-list\n      scale='0.183'\n      strategy='$ctrl.strategy'\n      intent='$ctrl.intent'\n      nodes='$ctrl.nodes'\n      draggable='false'\n      on-selection-changed='$ctrl.onClose({value:true})'\n      source='$ctrl.source'\n      mark-selected='false'>\n    </preview-list>\n  </cc-panel-body>\n</cc-panel-frame>",bindings:{header:"<",text:"<",nodes:"<",strategy:"<",intent:"<",onClose:"&",source:"<?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(14),o=function(){function e(e,t){this.previewListCAB=e,this.galleryTypeCAB=t}return e.$inject=["previewListCAB","galleryTypeCAB"],e.prototype.open=function(e,t,i){void 0===i&&(i=null);var o=t?n.PresetsStrategyType.FitMode:n.PresetsStrategyType.UnFitMode,r=t?"fitmode":"unfitmode";return this.previewListCAB.show({target:i||this.galleryTypeCAB.getSizeDropdownButton(),title:"popups."+r+".heading",text:"popups."+r+".text",nodes:[e.identifyingNode],strategyType:o})},e}();t.MediaFitCAB=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("mediaFitCAB",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a,s,l){this.$q=e,this.TourAttachedTooltip=t,this.TourModal=i,this.TourBackdrop=n,this.consumerBiLogger=o,this.presetsStrategyFactory=r,this.$compile=a,this.$timeout=s,this.$rootScope=l}return e.$inject=["$q","TourAttachedTooltip","TourModal","TourBackdrop","consumerBiLogger","presetsStrategyFactory","$compile","$timeout","$rootScope"],e.prototype.show=function(e){var t=this,i=new this.TourModal,n=new this.TourBackdrop,o=this.$q.defer(),r=function(e){i.element.css({opacity:"0"}),t.$timeout(function(){i.destroy(),n.hide().then(function(){n.destroy(),e?o.resolve(e):o.reject()})},200)};n.onClick(function(){return r(null)});var a=this.compileCAB(e,r);return i.setContent(a),i.addCustomClasses(["tour-modal"]),i.show(150),this.$timeout(function(){return n.show(0)}),o.promise},e.prototype.compileCAB=function(e,t){var i=this.$rootScope.$new();return i.node=e.node,i.linkDetails=e.linkDetails,i.source=e.biSource,i.onSave=function(e){return t(e)},i.onClose=function(){return t(null)},this.$compile("<link-editor-panel\n      link-details='linkDetails'\n      node='node'\n      source='source'\n      on-close='onClose()'\n      on-save='onSave(linkDetails)'>\n    </link-editor-panel>")(i)},e}();t.LinkEditorCAB=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("linkEditorCAB",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=function(){function e(e,t,i,n,o,r,a){this.$q=e,this.TourAttachedTooltip=t,this.TourBackdrop=i,this.$compile=n,this.$timeout=o,this.$rootScope=r,this.flags=a}return e.$inject=["$q","TourAttachedTooltip","TourBackdrop","$compile","$timeout","$rootScope","flags"],e.prototype.show=function(e){var t=this,i=new this.TourAttachedTooltip,o=new this.TourBackdrop,r=this.$q.defer(),a=function(e){i.element.css({opacity:"0"}),t.$timeout(function(){i.destroy(),o.hide().then(function(){o.destroy(),r.resolve(e)})},200)};o.onClick(function(){return a(!1)});var s=this.compileCAB(e,a,function(){t.$timeout(function(){return i.element.css({opacity:"1",marginLeft:"0px",transition:"opacity 300ms ease-in-out,\n             margin-left 300ms ease-in-out"})}),t.$timeout(function(){return i.element.css({transition:"margin-top 300ms ease-in-out,\n              opacity 300ms ease-in-out"})},500)});return i.setContent(s),i.attachTo(e.target,n.AssistantPositionX.Right,n.AssistantPositionY.Center,-6),this.flags.sectionMedia&&i.addCustomClasses(["cab-tooltip"]),e.focalPoint?this.$timeout(function(){i.element.css({marginLeft:"-20px",opacity:"0",display:"block"})}):i.show(150),this.$timeout(function(){return o.show(0)}),r.promise},e.prototype.compileCAB=function(e,t,i){var n=e.focalPoint?"<image-focal-point-panel\n        node='node'\n        on-loaded='onLoaded()'\n        on-close='onClose(value)'>\n      </image-focal-point-panel>":"<media-position-panel\n        node='node'\n        background='background'\n        on-close='onClose(value)'>\n      </media-position-panel>",o=this.$rootScope.$new();return o.background=e.background,o.node=e.node,o.onClose=function(e){return t(e)},o.onLoaded=function(){return i()},this.$compile(n)(o)},e}();t.ImagePositionCAB=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("imagePositionCAB",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=i(15),r=function(){function e(e,t,i,n,r,a,s,l,c){var d=this;this.$q=e,this.TourAttachedTooltip=t,this.TourBackdrop=i,this.$compile=n,this.$timeout=r,this.$rootScope=a,this.mediaOverrideManager=s,this.consumerBiLogger=l,this.mediaSectionUtils=c,this.onSelect=function(e,t){return t&&t.gallery?d.mediaOverrideManager.setGallery(e.node,t.gallery)?d.$q.resolve(t):d.$q.reject("gallery not found"):d.$q.reject("nothing selected")},this.handleGalleryReplaced=function(e){var t=e.node,i=e.gallery,n=e.galleries,r=e.presetMediaType;d.consumerBiLogger.contentEditor.galleryLayoutChanged(t.getId(),t.getSpecificContentElementType(),t.alias,i.gallery.name,n.length,n.indexOf(i),r===o.PresetMediaTypes.SHAPE?"shape":r===o.PresetMediaTypes.COAST2COAST?"full width":r===o.PresetMediaTypes.IMAGE?"image":"")},this.handleGalleryNotReplaced=function(e){var t=e.node,i=e.galleries,n=e.presetMediaType;d.consumerBiLogger.contentEditor.galleryLayoutWindowClosed(t.getId(),t.getSpecificContentElementType(),t.alias,null,i.length,n===o.PresetMediaTypes.SHAPE?"shape":n===o.PresetMediaTypes.COAST2COAST?"full width":n===o.PresetMediaTypes.IMAGE?"image":"")},this.onShow=function(e){var t=e.node,i=e.galleries,n=e.presetMediaType;d.consumerBiLogger.contentEditor.galleryLayoutWindowOpened(t.getId(),t.getSpecificContentElementType(),t.alias,i.length,n===o.PresetMediaTypes.SHAPE?"shape":n===o.PresetMediaTypes.COAST2COAST?"full width":n===o.PresetMediaTypes.IMAGE?"image":"")}}return e.$inject=["$q","TourAttachedTooltip","TourBackdrop","$compile","$timeout","$rootScope","mediaOverrideManager","consumerBiLogger","mediaSectionUtils"],e.prototype.openGalleryType=function(e,t){var i=this,n={node:e,target:t};return this.show(n).then(function(t){t&&i.mediaSectionUtils.updateGalleryOnViewer(e)})},e.prototype.getSizeDropdownButton=function(){return angular.element('[data-hook="media-size-dropdown"] [data-hook="button"]')},e.prototype.show=function(e){var t=this,i=new this.TourAttachedTooltip,o=new this.TourBackdrop,r=this.$q.defer(),a=function(e){return i.element.css({opacity:"0"}),t.$timeout(function(){i.destroy(),o.hide().then(function(){o.destroy(),r.resolve(e)})},200),r.promise.then(function(){e?t.handleGalleryReplaced(c):t.handleGalleryNotReplaced(c)})};o.onClick(function(){return a(!1)});var s=this.compileCAB(e,a),l=s.compiledCAB,c=s.scope;return i.setContent(l),i.attachTo(e.target,n.AssistantPositionX.Right,n.AssistantPositionY.Center,-6),i.addCustomClasses(["cab-tooltip"]),i.show(150),this.$timeout(function(){return o.show(0)}),this.onShow(c),r.promise},e.prototype.compileCAB=function(e,t){var i=this,n=this.$rootScope.$new();return n.galleries=this.mediaOverrideManager.getAvailableGalleries(e.node),n.presetMediaType=this.mediaOverrideManager.getAllowedMediaOverride(e.node),n.node=e.node,n.onClose=function(e){return t(e)},n.onSelect=function(e){return i.onSelect(n,e).finally(function(t){n.gallery=e,n.onClose(e)})},{compiledCAB:this.$compile("<div class='gallery-type-cab'>\n                                <div class='gallery-picker-list-outer'>\n                                  <cc-panel-frame label=\"{{:: 'general.galleries' | translate}}\" on-close='onSelect()' show-close-button='true'>\n                                    <div class='gallery-picker-list'>\n                                      <div class='gallery-picker-list-item {{item.cssKey}}' ng-class='{selected: item.selected}' ng-click='onSelect(item)' ng-repeat='item in galleries'>\n                                        <div class='gallery-picker-list-item-name p8-label'>{{item.name}}</div>\n                                      </div>\n                                    </div>\n                                  </cc-panel-frame>\n                                </div>\n                              </div>")(n),scope:n}},e}();t.GalleryTypeCAB=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("galleryTypeCAB",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=i(0),r=function(){function e(e,t,i,n,o,r,a){this.$q=e,this.TourAttachedTooltip=t,this.$compile=i,this.$timeout=n,this.$rootScope=o,this.$interval=r,this.componentCompiler=a,this.isNeedToClosePopup=!1,this.isPopupVisible=!1,this.cabNameSpace="cab"}return e.$inject=["$q","TourAttachedTooltip","$compile","$timeout","$rootScope","$interval","componentCompiler"],e.prototype.getPosition=function(e,t){return(e?$(e).innerHeight():window.innerHeight)-t.offset().top>t[0].clientHeight?n.AssistantPositionY.Bottom:t.offset().top>t[0].clientHeight?n.AssistantPositionY.Top:n.AssistantPositionY.Bottom},e.prototype.show=function(e){var t=this;if(!this.isPopupVisible){var i=new this.TourAttachedTooltip;this.isPopupVisible=!0;var n,r=e.contentSelector,a=function(o){i.element.css({opacity:"0"}),$(r).add($(e.target[0])).off("mouseenter."+t.cabNameSpace+" mouseleave."+t.cabNameSpace),i.destroy(),n.destroy();var a=t.$interval(function(){$(".intro-tooltip").remove(),0===$(".intro-tooltip").length&&(t.isPopupVisible=!1,$(document.body).removeClass(e.addClassToBody),t.$interval.cancel(a))},100)};e.attributes||(e.attributes={}),e.addClassToBody&&$(document.body).addClass(e.addClassToBody),"string"==typeof e.hideAttribute&&(e.attributes[e.hideAttribute]=a);$(r).add($(e.target[0])).on("mouseenter."+this.cabNameSpace,function(e){t.isNeedToClosePopup=!1}).on("mouseleave."+this.cabNameSpace,function(i){t.isNeedToClosePopup=!0,t.$timeout(function(){t.isNeedToClosePopup&&a()},e.onCloseTimeout||500)}),i.element[0].addEventListener("click",function(i){o.intersection(i.target.classList,e.closeWhenClickOn).length>0&&(t.isNeedToClosePopup=!0,a())}),n=this.componentCompiler.compile(e.element,e.attributes,e.cabClassContainer),e.tooltipCustomClass&&i.addCustomClasses([e.tooltipCustomClass]),i.setContent(n.content),i.attachTo(e.target,void 0,this.getPosition(e.containerWindowSelector,e.target)),i.show(150)}return this.$q.defer().promise},e}();t.CabbieHover=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("cabbieHover",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(252),o=i(0),r=function(){function e(e,t,i,n,r){var a=this;this.textRepository=e,this.$translate=t,this.consumerBiLogger=i,this.contentElementUtils=n,this.flags=r,this.recommendedType="recommended",this.doneTypingInterval=1e3,this.textManagerAdiSourceThreshold=1;var s=this.getTexts(this.fieldName);this.recommendedTexts=o.cloneDeep(s.recommendedTexts),this.recommendedTexts.forEach(function(e){return e.type=a.recommendedType}),this.defaultTexts=s.defaultTexts,this.textsData=(this.flags.lodash4?o.uniqBy:o[String("uniq")])(this.recommendedTexts.concat(this.defaultTexts),"text"),this.searchedResults=this.textsData.map(function(e){return e.boldText=e.text,e});var l=this.getTextManagerDetails();this.consumerBiLogger.contentEditor.textManagerIsLoaded(l.textType,l.galleryType,l.layoutType,l.noOfSuggestions,l.nodeId,l.placeOfSelected,l.sectionAlias,l.sectionType,l.noOfUserSuggestions)}return e.$inject=["textRepository","$translate","consumerBiLogger","contentElementUtils","flags"],e.prototype.getResults=function(){return this.searchedResults},e.prototype.highlightResultsSearchValue=function(e){o.each(this.searchedResults,function(t){t.boldText=e?t.text.replace(new RegExp(e,"gi"),"<b>$&</b>"):t.text})},e.prototype.searchedTextChange=function(e){var t=this;e=e||"",this.searchedResults=o.filter(this.textsData,function(t){return o.includes(t.text.replace(/\s/g," ").toLowerCase(),e.replace(/\s/g," ").toLowerCase())}),this.highlightResultsSearchValue(e),clearTimeout(this.typingTimer),e&&(this.typingTimer=setTimeout(function(){var e=t.getTextManagerDetails();t.consumerBiLogger.contentEditor.textManagerSearchResultsPresented(e.textType,e.bestMatchResults,e.results,e.nodeId,e.sectionAlias,e.sectionType)},this.doneTypingInterval))},e.prototype.getTextManagerDetails=function(){var e=this.$translate.instant("text-manager.default-source");return{textType:this.fieldName,galleryType:"",layoutType:"",noOfSuggestions:0,placeOfSelected:0,nodeId:this.node.id,sectionAlias:this.node.alias||"",sectionType:this.contentElementUtils.getCeType(this.node.contentElementType,this.getContentElementType(this.node)),bestMatchResults:this.recommendedTexts.length,results:this.searchedResults.length,noOfUserSuggestions:this.textsData.filter(function(t){return t.source!==e}).length}},e.prototype.getContentElementType=function(e){return e.parentContentElementType||e.contentElementType},e.prototype.fixSectionType=function(e){return"Homepage_about"===e||"Inner_about"===e?"About":e},e.prototype.createRelevanceFilter=function(e){var t=this,i={source:this.$translate.instant("text-manager.default-source"),sectionType:e,textGroup:this.fieldName,relevance:function(e){return e>t.textManagerAdiSourceThreshold}},n=["_listHeader","_listFooter"].map(function(e){var t=o.clone(i);return t.sectionType+=e,t});return this.node.isListHeader()||this.node.isListFooter()?n:n.concat(i)},e.prototype.getRelevanceFilters=function(){var e=this.node.alias,t=this.contentElementUtils.getCeType(this.node.contentElementType,this.getContentElementType(this.node));return(e?this.createRelevanceFilter(e):[]).concat(this.createRelevanceFilter(t))},e.prototype.getTexts=function(e){var t,i=this.contentElementUtils.getCeType(this.node.contentElementType,this.getContentElementType(this.node)),n=(this.$translate.instant("text-manager.default-source"),this.getRelevanceFilters());if("title"===this.fieldName||"subTitle"===this.fieldName){t=[{source:this.siteAddress,textGroup:"short"},{source:this.siteAddress,textGroup:"longText"}].concat(n);var o=this.textRepository.getTexts(t);return{recommendedTexts:[],defaultTexts:[].concat.apply([],o)}}return t=[{source:this.siteAddress,sectionType:this.fixSectionType(i),maxResults:this.flags.textManagerRecommendationsCount?5:0},{source:this.siteAddress,textGroup:"longText"},{source:this.siteAddress,textGroup:"short"}].concat(n),{recommendedTexts:(o=this.textRepository.getTexts(t))[0],defaultTexts:[].concat.apply([],o.splice(1))}},e.prototype.sendTextChangeBI=function(e,t,i,o,r){var a=this.getTextManagerDetails();this.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(a.nodeId,a.sectionType,a.sectionAlias,a.textType,o.trim().length>=n.ImportSiteContent.LONG_TEXT_MINIMAL_LENGTH?"longText":"short",o,o.length,0,!1,i,r===this.$translate.instant("text-manager.default-source")?"cms":"user import",e,this.recommendedTexts.length>0,t)},e.prototype.replaceText=function(e,t,i,n){this.sendTextChangeBI("replace",t===this.recommendedType,i,e,n),this.onReplace(e)},e.prototype.getIconName=function(){return this.searchValue&&this.searchValue.length>0?"cc-icon-close-8":"cc-icon-search"},e.prototype.getCloseIcon=function(){return this.searchValue&&this.searchValue.length>0?"cc-icon-close-8":""},e.prototype.deleteSearchedText=function(){this.searchValue="",this.searchedTextChange(this.searchValue)},e.prototype.appendText=function(e,t,i,n){this.sendTextChangeBI("append",t===this.recommendedType,i,e,n),this.onAppend(e)},e.prototype.getDescription=function(){return this.siteAddress?"text-manager-dialog.imported-text.description":"text-manager-dialog.adi.description"},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("textManagerDialog",{templateUrl:"views/text-manager/text-manager-dialog.html",controller:r,bindings:{onReplace:"=",onAppend:"=",closeDialog:"=",fieldName:"=",siteAddress:"=",node:"="}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var i=this;this.modelTreeHelpers=e,this.$injector=t,this.isSingleImage=function(e){return i.$injector.get("sectionMedia").getMediaType(e)===cc.MediaPreviewType.SingleImage}}return e.$inject=["modelTreeHelpers","$injector"],e.prototype.getNodeForImportContent=function(){var e=this.getSupportedContentFields();return this.modelTreeHelpers.getFirstNodeWithFieldEnabled(e)},e.prototype.getNodeForImportImages=function(){var e=this.getSupportedImagesFields();return this.modelTreeHelpers.getFirstNodeWithImageEnabled(e,this.isSingleImage)||this.modelTreeHelpers.getFirstNodeWithCoast2Coast(e,this.isSingleImage)},e.prototype.getSupportedContentFields=function(){return[core.ElementSubTypes.Title,core.ElementSubTypes.Subtitle,core.ElementSubTypes.LongText]},e.prototype.getSupportedImagesFields=function(){return[core.ElementSubTypes.Image]},e}();t.TextManagerHelpers=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("textManagerHelpers",n)},function(e,t){var i=function(){function e(e,t){this.$element=e,this.flags=t,this.isExpanded=!1}return e.$inject=["$element","flags"],e.prototype.isOverflown=function(e){if(void 0!==this.isElementOverflown)return this.isElementOverflown;var t=this.$element.find(".text-suggestion-value");return!(!t[0]||!t[0].scrollHeight)&&(this.isElementOverflown=t[0].scrollHeight>t[0].clientHeight+t.innerHeight()-t.height(),this.isElementOverflown)},e.prototype.toggleExpand=function(){this.isExpanded=!this.isExpanded},e.prototype.replaceText=function(e){this.onReplace({text:e})},e.prototype.appendText=function(e){this.onAppend({text:e})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("textManagerDialogSuggestion",{templateUrl:"views/text-manager/text-manager-dialog-suggestion.html",controller:i,bindings:{text:"=",source:"=?",type:"=?",onReplace:"&",onAppend:"&",textAsHtml:"=?"}})},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(72),r=i(15),a=i(0),s=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f){var v=this;this.$rootScope=e,this.$state=t,this.$stateParams=i,this.$timeout=n,this.ONSTAGE_EVENTS=o,this.storyServices=r,this.applicationState=a,this.flags=s,this.designKit=l,this.ONSTAGE_ACTIONS_BY_TYPE=c,this.fieldEditorConfiguration=d,this.mediaOverrideManager=u,this.nodeFetcher=p,this.layoutSelectionStoreProvider=g,this.consumerMenu=h,this.$injector=m,this.sectionColors=f,this.subscribe(o.OPEN_SEO,function(){n(function(){a.goToPageSeo(r.story.selectedPage)})}),c.currentColorGetter=function(e){var t=v.segment;if(t){var i=v.flags.listItemOverrideColor?v.sectionColors.getFieldColor(t,t.getLE(),e.data.type,e.styleKey||e.data.subType):t.getLayoutSelectionStore().getFieldColorOverride(t,e.styleKey||e.data.subType);return v.flags.overrideContainerBgColor&&!i&&(i="text"===e.data.type?v.designKit.santaToKitFormat(v.designKit.getColorByField(e.data.subType,t,t.getLE())):"button"===e.data.type?v.designKit.santaToKitFormat(v.designKit.getComponentCustomColor(t,"buttonbg")):v.designKit.santaToKitFormat(v.designKit.getComponentCustomColor(t,e.styleKey||e.data.subType))),i}},c.currentMapStyleGetter=function(e){return v.layoutSelectionStoreProvider.getLayoutSelectionStore().getMapStyleOverride(v.segment,e.data.subType)},this.flags.sectionTextSplitParagraph&&(c.columnsLabelGetter=function(e){var t=v.nodeFetcher.getCurrentNode();return v.layoutSelectionStoreProvider.getLayoutSelectionStore().getParagraphColumns(t)?"overlay.actions.toggle-paragraphs-off":"overlay.actions.toggle-paragraphs"})}return e.$inject=["$rootScope","$state","$stateParams","$timeout","ONSTAGE_EVENTS","storyServices","applicationState","flags","designKit","ONSTAGE_ACTIONS_BY_TYPE","fieldEditorConfiguration","mediaOverrideManager","nodeFetcher","layoutSelectionStoreProvider","consumerMenu","$injector","sectionColors"],e.prototype.setSegment=function(e){this.segment=e},e.prototype.getSegment=function(){return this.segment},e.prototype.runClickAction=function(e,t){var i=this.getActionsOfField(e,t);i&&i.click&&this.executeAction(i.click,e)},e.prototype.runDblClickAction=function(e,t){var i=this.getActionsOfField(e,t);i&&i.dbl_click&&this.executeAction(i.dbl_click,e)},e.prototype.hasDoubleClickAction=function(e,t){var i=this.getActionsOfField(e,t);return i&&i.dbl_click},e.prototype.getMenuActions=function(e,t){var i=this.getActionsOfField(e,t);return i&&i.menu(e)||[]},e.prototype.getDblClickAction=function(e,t){var i=this.getActionsOfField(e,t);return i&&i.dbl_click||{}},e.prototype.getClickAction=function(e,t){var i=this.getActionsOfField(e,t);return i&&i.click||{}},e.prototype.executeAction=function(e,t,i){var o,r=this;e.state&&((o=this.flags.cardsToPanels&&a.isFunction(e.state.name)?e.state.name():e.state.name)!==this.$state.current.name&&(this.flags.cardsToPanels&&e.state.childState?this.applicationState.goToSubPanel(o,this.$stateParams):this.$timeout(function(){return r.$state.go(o,n({},r.$stateParams))})));t.actionData=e,i&&(t.node=i),this.emitEventAction(e.event,t)},e.prototype.emitEventAction=function(e,t){this.$rootScope.$emit(e,t)},e.prototype.subscribe=function(e,t,i){return this.flags.headlessApi?angular.noop:this.$rootScope.$on(e,function(e,i){t(i)})},e.prototype.getActionsOfField=function(e,t){var i=this.detectComponentType(e,t||this.nodeFetcher.getCurrentActiveNode());return i&&this.getActionsByType(i)},e.prototype.getActionsByType=function(e){return this.ONSTAGE_ACTIONS_BY_TYPE.TYPES[e]},e.prototype.nodeHasBackground=function(e){return this.$injector.get("mediaSectionUtils").nodeHasBackground(e)},e.prototype.detectComponentType=function(e,t){var i=this.getMediaType(t);if(e.data.type===core.ElementTypes.Container)return o.OnstageTypes.CONTAINER;if("media"===e.data.type){if(this.fieldEditorConfiguration.isSocial(e.data))return o.OnstageTypes.SOCIAL;if(this.isLogo(e)||this.isShape(i)||this.isClipArt(i))return o.OnstageTypes.LOGO;if(this.isGallery(i))return this.flags.sectionMedia&&this.nodeHasBackground(t)?o.OnstageTypes.BG_GALLERY:o.OnstageTypes.GALLERY;if(this.isImage(i))return this.isDisaleCrop(t)?o.OnstageTypes.IMAGE_WITHOUT_CROP:o.OnstageTypes.IMAGE;if(this.isExtVideo(i))return o.OnstageTypes.EXT_VIDEO;if(this.isVideo(i))return o.OnstageTypes.VIDEO}return this.fieldEditorConfiguration.isButton(e.data)?e.osiType||o.OnstageTypes.BUTTON:this.fieldEditorConfiguration.isTextType(e.data)?this.isBusinessName(e)?o.OnstageTypes.BUSINESS_NAME:this.isContact(e)?o.OnstageTypes.CONTACT:this.isMap(e)?o.OnstageTypes.MAP:this.isParagraph(e)?o.OnstageTypes.LONGTEXT:o.OnstageTypes.TEXT:this.isMenu(e)?1===this.consumerMenu.getVisiblePageNodes().length?o.OnstageTypes.SECTIONS_MENU:o.OnstageTypes.PAGES_MENU:void 0},e.prototype.isLogo=function(e){return"Logo"===e.key},e.prototype.isBusinessName=function(e){return"BusinessName"===e.key},e.prototype.isContact=function(e){return e.data.subType===core.ElementSubTypes.Form},e.prototype.isMap=function(e){return e.data.subType===core.ElementSubTypes.Map},e.prototype.isParagraph=function(e){return e.data.subType===core.ElementSubTypes.LongText},e.prototype.isMenu=function(e){return"Menu"===e.key},e.prototype.isImage=function(e){return e===cc.MediaPreviewType.SingleImage},e.prototype.isShape=function(e){return e===cc.MediaPreviewType.Shape},e.prototype.isVideo=function(e){return e===cc.MediaPreviewType.Video},e.prototype.isExtVideo=function(e){return e===cc.MediaPreviewType.ExtVideo},e.prototype.isClipArt=function(e){return e===cc.MediaPreviewType.Clipart},e.prototype.isGallery=function(e){return e===cc.MediaPreviewType.MultipleImages},e.prototype.getMediaType=function(e){if(e)return this.flags.sectionMedia?this.$injector.get("mediaTypeResolver").getType(e):this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(e)},e.prototype.isDisaleCrop=function(e){if(this.applicationState.isInMobileEditMode())return!0;var t=this.mediaOverrideManager.getAllowedMediaOverride(e);return t===r.PresetMediaTypes.COAST2COAST||t===r.PresetMediaTypes.COLUMNBG||this.nodeHasBackground(e)},e}();t.OnstageActionsManager=s,angular.module("siteGeneratorStaticsConsumerAppInternal").service("onstageActionsManager",s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a,s,l,c){this.storyServices=e,this.Solution=t,this.modelTree=i,this.tpaService=n,this.applicationState=o,this.sitePartTypes=r,this.$state=a,this.flags=s,this.overlayManager=l,this.slideShowService=c,this.nodeToSegmentOverlayElement={}}return e.$inject=["storyServices","Solution","modelTree","tpaService","applicationState","sitePartTypes","$state","flags","overlayManager","slideShowService"],e.prototype.getLgData=function(e){return e.containingLG.getLgData()},e.prototype.onSegmentOverlayCreate=function(e,t){this.nodeToSegmentOverlayElement[e.getId()]=t},e.prototype.onSegmentOverlayDestroy=function(e){delete this.nodeToSegmentOverlayElement[e.getId()]},e.prototype.isActiveSegmentNodeId=function(e,t){if(this.applicationState.isEditMode()){var i=this.applicationState.getContentFocus();if(i)return i.sitePart===this.sitePartTypes.HEADER?"header"===e:this.$state.params.childId?e===this.$state.params.childId:e===i.nodeId||t&&0===e.indexOf(i.nodeId)}return!1},e.prototype.isActiveSegmentNodeIdAnyEdit=function(e,t){if(this.applicationState.isInAnyEditOrDesignOfSectionPanel()){var i=this.applicationState.getContentFocus();if(i)return i.sitePart===this.sitePartTypes.HEADER?"header"===e:this.$state.params.childId?e===this.$state.params.childId:e===i.nodeId||t&&0===e.indexOf(i.nodeId)}return!1},e.prototype.getSegmentOverlayPosition=function(t){return this.nodeToSegmentOverlayElement[t].find(e.OverlaySegmentSelector).offset()},e.prototype.getMediaOverlayPosition=function(t){return this.nodeToSegmentOverlayElement[t].find(e.OverlaySegmentSelector+" "+e.OverlayMediaSelector)[0].getBoundingClientRect()},e.prototype.isSectionActive=function(e){return this.isActiveSegmentNodeIdAnyEdit(e.getSafeId(),e.contentElement.isSpecialListItem())},e.prototype.editSegment=function(e){var t="header"===e.getSafeId()?this.modelTree.getGeneralInformation():e.node,i=!0;(t.isTpaNode()&&(i=!!this.tpaService.getEditWidgetUrl(t)),i)&&(this.lastHoveredArgs=null,this.lastClickedArgs=null,!(["ListHeader","ListFooter"].indexOf(e.contentElement.type)>-1)&&e.node&&e.node.isListItem&&this.applicationState.isEditMode()?this.applicationState.goToEditMode(e.getSafeId()):this.applicationState.goToEditMode())},e.OverlaySegmentSelector=".segment-overlay",e.OverlayMediaSelector=".segment-component.media",e}();t.OverlaySegmentManager=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("overlaySegmentManager",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n){this.flags=e,this.columnService=t,this.applicationState=i,this.applicationParameters=n}return e.$inject=["flags","columnService","applicationState","applicationParameters"],e.prototype.getIndications=function(e,t){var i=this,o=e.getLENoError();if(!o||!o.argList)return null;var r,a,s,l,c,d,u=t,p=n.some(u&&u[0],function(e){return e.isMobile}),g=n.some(u&&u[0],function(e){return e.isVirtual}),h=!g&&n.some(u&&u[0],function(e){return e.allSettings}),m=g||h,f=e.getLayoutSelectionStore().getOverride("media",e,"allowedMediaOverrides"),v=m&&("image"===u[0][0].allSettings.backgroundMode||"imageOrColor"===u[0][0].allSettings.backgroundMode);if(m&&!p){d=n.some(u,function(e){return i.columnService.isStretchedMediaColumn(e[0])});var S=this.columnService.getColumnsContainerProps(u[0]);r=S.fullWidth?this.applicationState.previewFrameWidth-2*(S.siteMargin||0):this.applicationParameters.desktopPageWidth,a=S.columnsMargin,s=S.siteMargin,l=e.containingLG.isHeader()?r/this.applicationParameters.desktopPageWidth:(r-a*(u[0].length-1))/this.columnService.totalStructureColumns,c=e.containingLG.isHeader()?1:this.columnService.totalPageWidth/this.columnService.totalStructureColumns}return{columnsRows:u,isMobileColumns:p,isHybridColumns:m,mediaType:f,isColumnWithMediaBG:v,columnsWidth:r,columnSpacing:a,columnsMargin:s,columnsUnitWidth:l,gridUnitWidth:c,isStretchedMediaColumn:d}},e}();t.OverlayColumnsPosition=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("overlayColumnsPosition",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(57),o=i(15),r=i(0),a=function(){function e(e,t,i,n,o,r,a,s,l){var c=this;this.flags=e,this.animationChanges=t,this.columnService=i,this.overlaySegmentManager=n,this.PresetMediaType=o,this.applicationParameters=r,this.applicationState=a,this.overlayModel=s,this.overlayModelLookup=l,this.siteMargin=function(){return(c.applicationState.previewFrameWidth-c.applicationParameters.desktopPageWidth)/2},this.siteWidth=function(){return c.applicationState.previewFrameWidth}}return e.$inject=["flags","animationChanges","columnService","overlaySegmentManager","PresetMediaType","applicationParameters","applicationState","overlayModel","overlayModelLookup"],e.prototype.getOverlay=function(e,t){return this.applicationState.isInMobileEditMode()?this.overlayModel.getMobile(e,t):this.overlayModel.get(e,t)},e.prototype.getCache=function(e,t){var i=this;void 0===t&&(t=function(e){return e});var n={};return function(o,a){if(void 0===a&&(a=n.position),!r.isEqual(n,{scale:o,position:a})){n={scale:o,position:a};var s=t(r.mapValues(n.position,function(e){return"number"==typeof e?e*o:e}),o,a);i.animationChanges.add(function(){return e.css(s)})}}},e.prototype.calculateFakeLayoutAccordingToOverlayModel=function(e,t,i,n){if("container"===e.type&&"columnBg"===e.subType)return this.columnBg(e,i);var o=r.pick(e,"height","width");o.left=e.absoluteLeft,o.top=e.absoluteTop;var a=this.overlayModelLookup.findListSpanOverlayNode(n,[t.containingLG]),s=a&&a.children.find(function(e){return"media"===e.mapping.background});if(s&&(o.top+=s.layout.top,o.height=s.layout.height),i[0]&&i[0].mapping.column){var l=i,c=this.segmentBoundingRect(l);o.left-=c.left}return o},e.prototype.columnBg=function(e,t){var i=t.filter(function(t){return t.mapping.column.rowIndex===e.rowIndex})[e.virtualColumnIndex||0],n=this.offsetInColumns(i,t),o=i.boundingRect(this.siteWidth());return o.left=n.left,o.top=n.top,o},e.prototype.c2c=function(e,t,i,n){var r=t.containingSegment;if((r&&r.getLayoutSelectionStore().getOverride("media",r,"allowedMediaOverrides"))===o.PresetMediaTypes.COAST2COAST&&t.isMediaLayout(e)){i.width=this.siteWidth(),i.left=-this.siteMargin();var a=this.overlayModelLookup.findListSpanOverlayNode(n,[t.containingLG]),s=a&&a.children.find(function(e){return e.mapping.slideShow||"media"===e.mapping.background});s&&(i.height=s.layout.height)}return i},e.prototype.segmentBoundingRect=function(e){var t=this,i=e.map(function(e){return e.boundingRect(t.siteWidth())});return this.overlayModel.overlayBoundingRect(i)},e.prototype.offsetInColumns=function(e,t){var i={left:0,top:0},n=this.segmentBoundingRect(t),o=e.boundingRect(this.siteWidth());return i.left+=o.left-n.left,i.top+=o.top-n.top,i},e.prototype.contentOffset=function(e){var t=e.columnBounding(this.siteWidth());return e.columnContentBounding(this.siteWidth()).left-t.left},e.prototype.segmentLayout=function(e,t,i){var n=this.overlaySegmentManager.getLgData(t),o=n.strip.paddingTop||0;n.topLine.enable&&"space"===n.topLine.line&&(o+=n.topLine.space);var a=t.left,s=t.width,l=t.getRenderedHeight();if(t.containingLG.columns){var c=this.columnService.getRowsHeight(t.containingLG);l=(this.flags.lodash4?r.strictSumBy:r.sum)(c)}if(e.isHybridColumns){var d=e.columnsRows[0].findIndex(function(e){return e.segment===t}),u=e.columnsRows[0].filter(function(e){return e.segment===t}),p=u.length>1?0:u[0].extraProps.alignment;a=this.columnLeft(e,u[0],d,p),(e.isColumnWithMediaBG||u.length>1)&&(s=(this.flags.lodash4?r.strictSumBy:r[String("sum")])(u,function(t){return e.columnsUnitWidth*(t.renderedWidth||t.width)+e.columnSpacing})-e.columnSpacing)}else e.mediaType===this.PresetMediaType.COAST2COAST&&(a-=(this.applicationState.previewFrameWidth-940)/2,s=this.applicationState.previewFrameWidth);var g=(o+t.top)*i,h=a*i,m=l*i,f=s*i;return this.space(g,h,m,f)},e.prototype.componentLayout=function(e,t,i,n){var o=t.containingSegment,a=this.overlaySegmentManager.getLgData(o);if(!this.overlaySegmentManager.isSectionActive(o))return{width:0,height:0,top:0,left:0,visibility:"hidden"};var s=i.absoluteLeft,l=i.absoluteTop,c=i.height,d=i.width;if(a.strip.inlinePaddingTop&&!i.isFake&&(l+=a.strip.inlinePaddingTop),e.isHybridColumns){var u=i.columnsRowIndex||0,p=e.columnsRows[u],g=p&&p.findIndex(function(e){return e.segment===o})+(i.columnsColIndex||0),h=e.columnsRows[0].filter(function(e){return e.segment===o}),m=p&&p[g];if(p&&m&&t.isMediaLayout(i)&&"image"===m.currentSettings.backgroundMode){var f=this.columnService.getRowsHeight(o.containingLG);l=e.isStretchedMediaColumn?0:(this.flags.lodash4?r.strictSumBy:r[String("sum")])(r.range(u),function(e,t){return f[t]}),c=e.isStretchedMediaColumn?(this.flags.lodash4?r.strictSumBy:r.sum)(f):m.height,s=(m.virtualOffset||0)*e.columnsUnitWidth+e.columnSpacing*(i.columnsColIndex||0),d=e.columnsUnitWidth*(m.renderedWidth||m.width),u===e.columnsRows.length-1&&a.strip.inlinePaddingBottom?c+=a.strip.inlinePaddingBottom:0===u&&a.strip.inlinePaddingTop&&(c+=a.strip.inlinePaddingTop)}else if(t.isMediaLayout(i)&&e.mediaType===this.PresetMediaType.COAST2COAST||i.isFake){var v=e.columnsRows[0].findIndex(function(e){return e.segment===o}),S=h.length>1?0:h[0].extraProps.alignment;s=-this.columnLeft(e,h[0],v,S)-(this.applicationState.previewFrameWidth-940)/2,d=this.applicationState.previewFrameWidth}else if(p&&m){m&&m.virtualOffset&&(s-=m.virtualOffset*e.gridUnitWidth,s+=m.virtualOffset*e.columnsUnitWidth+e.columnSpacing*(i.columnsColIndex||0)),(S=this.columnService.getAlignment(p,g))&&(s-=(m.renderedMinWidth-o.width)*S/100,(e.isColumnWithMediaBG||h.length>1)&&(s+=(e.columnsUnitWidth*(m.renderedWidth||m.width)-m.segment.width)*S/100)),m.renderedLayoutLeftOffset&&(s+=m.renderedLayoutLeftOffset);var y=void 0,T=void 0,b=void 0;o.containingLG.isZigZagWithColumns()&&!t.isMediaLayout(i)?(T=this.columnService.getRowsHeight(o.containingLG),b=(this.flags.lodash4?r.strictSumBy:r.sum)(r.slice(T,0,u)),y=this.columnService.calcOffsetForCenteredColumn(t,m,m.layout,a.strip.inlinePaddingTop,a.strip.inlinePaddingBottom),l=b+i.top-y):o.isContact()&&(T=this.columnService.getRowsHeight(o.containingLG),b=(this.flags.lodash4?r.strictSumBy:r.sum)(r.slice(T,0,u)),m.layout&&(y=this.columnService.calcOffsetForContactColumn(t,p,m,m.layout,-1))>-1&&(l=b+i.top-y))}}else e.mediaType===this.PresetMediaType.COAST2COAST&&(t.isMediaLayout(i)?(s=0,d=this.applicationState.previewFrameWidth):s+=(this.applicationState.previewFrameWidth-940)/2);return this.space(l*n,s*n,c*n,d*n,!0)},e.prototype.columnLeft=function(e,t,i,n){var o=(t.renderedOffset||t.offset)*e.columnsUnitWidth+e.columnSpacing*i,r=t.renderedMinWidth;return o-=(e.columnsWidth-940)/2,r=e.isColumnWithMediaBG?e.columnsUnitWidth*(t.renderedWidth||t.width):t.segment.width,isNaN(n)&&(n=this.columnService.getAlignment(e.columnsRows[0],i)),n&&(o+=((t.renderedWidth||t.width)*e.columnsUnitWidth-r)*n/100),o},e.prototype.space=function(e,t,i,o,r){return void 0===r&&(r=!1),{width:o+2*n.SegmentOverlay.BorderWidth+2*n.SegmentOverlay.Padding,height:i+2*n.SegmentOverlay.Padding,top:e-(r?n.SegmentOverlay.BorderWidth:n.SegmentOverlay.Padding),left:t-(r?n.SegmentOverlay.BorderWidth:n.SegmentOverlay.BorderWidth+n.SegmentOverlay.Padding)}},e}();t.OverlayPosition=a,angular.module("siteGeneratorStaticsConsumerAppInternal").service("overlayPosition",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(38),o=function(){function e(){}return e.prototype.scrollToBottom=function(){var e=angular.element(n.Overlay.ViewportSelector)[0],t=e.scrollHeight-e.clientHeight;$(n.Overlay.ViewportSelector).animate({scrollTop:t},1e3)},e}();t.OverlayScroller=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("overlayScroller",o)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(58),r=i(0),a=function(e){function t(t,i,n,o,r,a){var s=e.call(this,t,i)||this;return s.overlayModelLookup=n,s.applicationState=o,s.mediaOverrideManager=r,s.overlaySegmentManager=a,s}return n(t,e),t.$inject=["overlayPosition","overlayModel","overlayModelLookup","applicationState","mediaOverrideManager","overlaySegmentManager"],t.prototype.getRootOverlayModel=function(e){var t=e.le.containingLG,i=t&&t.containingPage();return i&&this.overlayPosition.getOverlay(i.sitePart,i.page)},t.prototype.buildOverlayNode=function(e,t){return this.overlayModelLookup.findLayoutElementOverlayNode(e,t.le,t.layout,t.extraMapping)},t.prototype.isCoastToCoast=function(e,t){return e&&t.type===core.ElementTypes.Media&&this.mediaOverrideManager.isCoast2Coast(e)},t.prototype.fixLeftForComponent=function(e,t){var i=t.fixForComponent(this.overlayPosition.siteWidth()).left;void 0===e.left&&(e.left=0),e.left-=i},t.prototype.getParentNode=function(e,t){return r.find(e,function(e){return e.children.indexOf(t)>=0})},t.prototype.getPosition=function(e){var t=e.le,i=e.layout,n=this.getRootOverlayModel(e),o=t.containingSegment,a=this.buildOverlayNode(n,e),s=a?a.boundingRect(this.applicationState.previewFrameWidth):{},l=n&&this.overlayModelLookup.findSegmentOverlayNodes(n,o);if(i.isFake)l.length&&(s=this.overlayPosition.calculateFakeLayoutAccordingToOverlayModel(i,t,l,n));else if(a||l[0]&&!this.isCoastToCoast(o.node,i)){var c=this.getParentNode(l,a);if(c){if(this.fixLeftForComponent(s,c),l[0].mapping.column){var d=this.overlayPosition.offsetInColumns(c,l),u=c.columnOffset(this.overlayPosition.siteWidth()).padLeft;s.left+=d.left+u,s.top+=d.top}this.isCoastToCoast(o.node,i)&&(s.left-=this.overlayPosition.siteMargin(),s.width=this.overlayPosition.siteWidth())}else if(t.isMediaLayout(i)){var p=r.find(l,function(e){return"media"===e.mapping.background});if(p&&(s=p.boundingRect(this.overlayPosition.siteWidth()),l[0].mapping.column)){d=this.overlayPosition.offsetInColumns(p,l);s.left=d.left,s.top=d.top}}}else s=this.overlayPosition.c2c(i,t,s,n),l[0]&&this.fixLeftForComponent(s,l[0]);return s.visibility=this.overlaySegmentManager.isSectionActive(o)?"visible":"hidden",s},t}(o.BaseOverlayPositionService);t.ComponentOverlayPositionService=a,angular.module("siteGeneratorBuilderInternal").service("componentOverlayPositionService",a)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(58),r=i(0),a=function(e){function t(t,i,n){var o=e.call(this,t,i)||this;return o.overlayModelLookup=n,o}return n(t,e),t.$inject=["overlayPosition","overlayModel","overlayModelLookup"],t.prototype.getRootOverlayModel=function(e){var t=e&&e.containingPage();if(t)return e&&this.overlayPosition.getOverlay(t.sitePart,t.page)},t.prototype.buildOverlayNode=function(e,t){return this.overlayModelLookup.findLayoutGroupOverlayNode(e,t)},t.prototype.getPosition=function(e){var t=this.getRootOverlayModel(e),i=t&&this.overlayModelLookup.findListSpanOverlayNode(t,[e]),n=this.lgTrail(i,e),o=n.lgNode,r=n.trail;if(o){var a=o.layout;return a.top-=r.reduce(function(e,t){return e+t.layout.height},0),a}},t.prototype.lgTrail=function(e,t){for(var i=[],n=e?e.children:[],o=0;o<n.length;o++){var r=n[o];if(r.mapping.lg===t)return{lgNode:r,trail:this.trimTrailSlideshow(i,r)};r.mapping.lg&&i.push(r)}return{lgNode:null,trail:i}},t.prototype.trimTrailSlideshow=function(e,t){if(t.mapping.slideShow)return e.filter(function(e){return!e.mapping.slideShow});var i=r.find(e,function(e){return e.mapping.slideShow});if(i){var n=e.filter(function(e){return!e.mapping.slideShow});return n.push(i),n}return e},t}(o.BaseOverlayPositionService);t.LayoutGroupOverlayPositionService=a,angular.module("siteGeneratorBuilderInternal").service("layoutGroupOverlayPositionService",a)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,i,n){var o=e.call(this,t,i)||this;return o.overlayModelLookup=n,o}return n(t,e),t.$inject=["overlayPosition","overlayModel","overlayModelLookup"],t.prototype.getRootOverlayModel=function(e){var t=e&&e.groups[0];return t&&this.overlayPosition.getOverlay(e.sitePart,t.page)},t.prototype.buildOverlayNode=function(e,t){return this.overlayModelLookup.findListSpanOverlayNode(e,t.groups)},t}(i(58).BaseOverlayPositionService);t.ListSpanOverlayPositionService=o,angular.module("siteGeneratorBuilderInternal").service("listSpanOverlayPositionService",o)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,i,n){var o=e.call(this,t,i)||this;return o.overlayModelLookup=n,o}return n(t,e),t.$inject=["overlayPosition","overlayModel","overlayModelLookup"],t.prototype.getRootOverlayModel=function(e){var t=e&&e.containingLG&&e.containingLG.containingPage();return t&&this.overlayPosition.getOverlay(t.sitePart,t.page)},t.prototype.getPosition=function(e){var t=this.getRootOverlayModel(e),i=t&&this.overlayModelLookup.findSegmentOverlayNodes(t,e);if(i&&i[0])return this.overlayPosition.segmentBoundingRect(i)},t.prototype.buildOverlayNode=function(e,t){return null},t}(i(58).BaseOverlayPositionService);t.SegmentOverlayPositionService=o,angular.module("siteGeneratorBuilderInternal").service("segmentOverlayPositionService",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(26),r=function(){function e(e,t,i,o,r){this.applicationState=e,this.siteState=t,this.siteInit=i,this.$document=o,this.flags=r,this.headerHeight="72px",this.headerHeightNewTopBar="55px",this.isSubscribedOnScroll=!1,this.handleScrollIframe=function(e){n.PubSub.fire("SITE_SCROLL",e)}}return e.$inject=["applicationState","siteState","siteInit","$document","flags"],e.prototype.isPPPSupportPreview=function(){return this.flags.newTopBar&&this.flags.newPreviewMode},e.prototype.prepareForPreview=function(e){if(void 0===e&&(e=!1),this.init()){if(this.subscribeOnScroll(),this.isPPPSupportPreview()||(this.iframe.contentDocument.body.style.paddingTop=0),this.iframe.style.width="",this.iframe.style.marginLeft="",this.iframe.style.transform="none",this.browserWrapper&&(this.browserWrapper.style.height="100%",this.isPPPSupportPreview()||!e&&this.flags.newPreviewMode&&(this.iframe.contentDocument.body.style.paddingTop=this.flags.newTopBar?this.headerHeightNewTopBar:this.headerHeight)),this.applicationState.isPreviewDisplay()&&this.applicationState.isInMobileEditMode())return this.iframe.style.height="",void(this.iframe.style.maxWidth="");this.iframe.style.height="100%",this.iframe.style.maxWidth=""}},e.prototype.exitPreview=function(){this.browserWrapper&&(this.browserWrapper.style.height="",this.isPPPSupportPreview()||this.flags.newPreviewMode&&(this.iframe.contentDocument.body.style.paddingTop=0)),this.unsubscribeOnScroll()},e.prototype.setHeight=function(e){this.init()&&(this.applicationState.isPreviewDisplay()&&this.applicationState.isInMobileEditMode()?this.iframe.style.height="":this.iframe.style.height=this.applicationState.isPreviewDisplay()?"100%":e+"px")},e.prototype.setScale=function(e,t){this.init()&&this.siteInit.isReady&&(this.siteState.setSiteScale(e),this.centerIframe(e))},e.prototype.setScrollTop=function(e){this.siteInit.isReady&&this.siteState.setSiteScroll(0,e)},e.prototype.subscribeOnScroll=function(){this.isSubscribedOnScroll||this.iframe.contentDocument.addEventListener("scroll",this.handleScrollIframe),this.isSubscribedOnScroll=!0},e.prototype.unsubscribeOnScroll=function(){this.isSubscribedOnScroll&&this.iframe.contentDocument.removeEventListener("scroll",this.handleScrollIframe),this.isSubscribedOnScroll=!1},e.prototype.init=function(){if(this.iframe)return!0;var e=this.$document.find(o.Viewer.IframeSelector);if(0===e.length)return!1;this.iframe=e[0];var t=$(".browser-wrapper");return this.browserWrapper=t&&t[0],!0},e.prototype.centerIframe=function(e){var t=this.applicationState.isInMobileEditMode()?o.Viewer.ViewerMobileBaseSize:o.Viewer.ViewerDesktopBaseSize,i=(t-t*e)/2;this.iframe.style.marginLeft="-"+i+"px",this.iframe.style.width=t+"px",this.iframe.style.maxWidth=t+"px"},e}();t.IframeViewAdapter=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("iframeViewAdapter",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n){this.previewService=e,this.applicationState=t,this.flags=i,this.$document=n}return e.$inject=["previewService","applicationState","flags","$document"],e.prototype.editorStateBeforePreview=function(e){return void 0!==e?this._editorStateBeforePreview=e:this._editorStateBeforePreview},e}();t.PreviewModeToggleManager=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("previewModeToggleManager",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(4),r=i(2),a=i(0),s=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v){this.CcDialogBuilder=e,this.$q=t,this.previewService=i,this.undoRedo=n,this.previewScale=o,this.pagesManager=r,this.storyServices=a,this.overlayManager=s,this.applicationState=l,this.$window=c,this.iframeViewAdapter=d,this.viewerHeightController=u,this.$rootScope=p,this.assistantManager=g,this.previewModeToggleManager=h,this.flags=m,this.spinnerService=f,this.tpaService=v,this.isClosing=!1,this.tpaAppsToRefreshAfterMobilePreview=["Stores"]}return e.$inject=["CcDialogBuilder","$q","previewService","undoRedo","previewScale","pagesManager","storyServices","overlayManager","applicationState","$window","iframeViewAdapter","viewerHeightController","$rootScope","assistantManager","previewModeToggleManager","flags","spinnerService","tpaService"],e.prototype.init=function(){var e=this;this.previewModeToggleManager.editorStateBeforePreview(this.applicationState.isInMobileEditMode()),this.unsubscribe=this.$rootScope.$on("$stateChangeStart",function(t,i,o,r){!a.includes(i.name,n.STATES.BUILDER_STORY_PREVIEW)&&a.includes(r.name,n.STATES.BUILDER_STORY_PREVIEW)&&(e.applicationState.setMobilePreviewDisplay(!1),e.overlayManager.clearDropTarget(),e.previewService.setPreviewMode(!1),e.$window.viewer.document.body.scrollLeft=0,e.$window.viewer.document.body.scrollTop=0)})},e.prototype.destroy=function(){this.previewModeToggleManager.editorStateBeforePreview()!==this.applicationState.isInMobileEditMode()&&(this.previewModeToggleManager.editorStateBeforePreview()?this.applicationState.enableMobileEditor():this.applicationState.disableMobileEditor(!1)),this.unsubscribe()},e.prototype.openDesktopPreview=function(){var e=this;this.isNewMobilePreview()&&this.applicationState.isInDesktopEditMode()||!this.isNewMobilePreview()&&!this.applicationState.isMobilePreviewDisplay()||(this.applicationState.disableMobileEditor(!0).then(function(){return e.previewService.setPreviewMode(!0)}).then(function(){e.flags.removeSpinnerAsStageReady&&e.iframeViewAdapter.prepareForPreview()}),this.flags.removeSpinnerAsStageReady||this.iframeViewAdapter.prepareForPreview(),this.applicationState.setMobilePreviewDisplay(!1),this.CcDialogBuilder.hide(),this.refreshTpaApps())},e.prototype.openMobilePreview=function(){var e=this;if(!this.applicationState.isMobilePreviewDisplay()&&!this.applicationState.isInMobileEditMode()){if(this.spinnerService.waitForMe("mobilePreview"),this.isNewMobilePreview())return void this.$q.when().then(function(){return e.applicationState.isPreviewDisplay()?e.previewService.setPreviewMode(!1):void 0}).then(function(){return e.storyServices.calculateAndRenderDesktopAndMobilePages("all")}).then(function(){return e.applicationState.enableMobileEditor()}).then(function(){return e.applicationState.isPreviewDisplay()?e.previewService.setPreviewMode(!0):void 0}).then(function(){return e.iframeViewAdapter.prepareForPreview(!0)}).then(function(){return e.spinnerService.imDone("mobilePreview")});(this.applicationState.isSupportStaffEditing()?this.$q.when():this.undoRedo.manualSave()).then(function(){e.isClosing||(e.applicationState.setMobilePreviewDisplay(!0),e.applicationState.mobilePreviewUrl(e.previewService.mobilePreviewUrl(e.storyServices.siteId,e.storyServices.metaSiteId)),e.applicationState.mobilePreviewPageId(e.pagesManager.getCurrentPageName())),e.spinnerService.imDone("mobilePreview")})}},e.prototype.stopPreview=function(){this.isClosing=!0,!this.applicationState.isFirstTimePreview()&&r.PubSub.fire(r.events.PREVIEW_EXITED),this.assistantManager.setDockStatus(o.AssistantDockStatus.Stopped),this.applicationState.setMobilePreviewDisplay(!1),this.applicationState.isMobilePreviewDisplay()&&this.refreshTpaApps(),this.applicationState.returnFromPreview(),this.$window.viewer.document.body.scrollLeft=0,this.$window.viewer.document.body.scrollTop=0,this.applicationState.isInMobileEditMode()&&this.previewScale.reset(),this.iframeViewAdapter.exitPreview(),this.viewerHeightController.resetHeight()},e.prototype.isMobilePreview=function(){return this.isNewMobilePreview()?this.applicationState.isInMobileEditMode():this.applicationState.isMobilePreviewDisplay()},e.prototype.refreshTpaApps=function(){var e=this;a.each(this.tpaAppsToRefreshAfterMobilePreview,function(t){e.tpaService.refreshApp(t)})},e.prototype.isNewMobilePreview=function(){return this.storyServices.story&&this.storyServices.story.mobileEditorActive},e}();t.PreviewModeToggleService=s,angular.module("siteGeneratorStaticsConsumerAppInternal").service("previewModeToggleService",s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(26),o=i(0),r=function(){function e(e,t,i,n,o,r,a){var s=this;this.$window=e,this.$rootScope=t,this.previewScale=i,this.overlayManager=n,this.iframeViewAdapter=o,this.applicationState=r,this.flags=a,this.topBarHeight=0,this.registerWindowResizeListener(),this.setTopBarHeight(),this.$rootScope.$watch(function(){return s.topBarHeight+"-"+s.applicationState.isPreviewDisplay()+"-"+s.overlayManager.getViewerHeight()},function(){return s.resetHeight()})}return e.$inject=["$window","$rootScope","previewScale","overlayManager","iframeViewAdapter","applicationState","flags"],e.prototype.setTopBarHeight=function(){var e=this,t=this.$rootScope.$watch(function(){return angular.element(n.Viewer.TopBarSelector).height()},function(i){i&&(e.topBarHeight=i,t())})},e.prototype.setHeight=function(e,t){t&&(this.currentViewerHeight=t);var i,n=this.getViewportHeight(),o=this.currentViewerHeight*e;0!==(i=this.flags.removeSpinnerAsStageReady&&Number.isNaN(o)?n:Math.min(o,n))&&this.iframeViewAdapter.setHeight(i)},e.prototype.getViewportHeight=function(){return angular.element(n.Viewer.BuilderSelector).height()-(this.applicationState.isPreviewDisplay()?0:this.topBarHeight)-2*n.Viewer.FakeBrowserVerticalSpacing-n.Viewer.FakeBrowserBarHeight},e.prototype.resetHeight=function(){this.setHeight(this.previewScale.getScale(),this.overlayManager.getViewerHeight())},e.prototype.registerWindowResizeListener=function(){var e=this,t=o.debounce(function(){e.previewScale.reset(),e.resetHeight(),e.$rootScope.$apply()},n.Viewer.ResizeWindowDebounce);this.$window.addEventListener(n.Viewer.WindowResizeEvent,t)},e}();t.ViewerHeightController=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("viewerHeightController",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a){var s=this;this.$rootScope=e,this.initService=t,this.previewScale=i,this.applicationState=n,this.viewerHeightController=o,this.viewerScrollController=r,this.iframeViewAdapter=a,t.loaded().then(function(){s.$rootScope.$watch(function(){return s.applicationState.isPreviewDisplay()+"-"+s.applicationState.isInMobileEditMode()+"-"+s.previewScale.getScale()},function(){return s.updateScale(s.previewScale.getScale())})})}return e.$inject=["$rootScope","initService","previewScale","applicationState","viewerHeightController","viewerScrollController","iframeViewAdapter"],e.prototype.updateScale=function(e,t){this.applicationState.isPreviewDisplay()||(this.iframeViewAdapter.setScale(e,t),this.viewerHeightController.setHeight(e),this.viewerScrollController.refreshScroll())},e}();t.ViewerScaleController=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("viewerScaleController",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){var n=this;this.$rootScope=e,this.applicationState=t,this.iframeViewAdapter=i,this.$rootScope.$watch(function(){return n.applicationState.isPreviewDisplay()},this.handlePreviewChange.bind(this))}return e.$inject=["$rootScope","applicationState","iframeViewAdapter"],e.prototype.handlePreviewChange=function(e,t){e?e!==t&&this.iframeViewAdapter.prepareForPreview(this.applicationState.isInMobileEditMode()):this.iframeViewAdapter.exitPreview()},e}();t.ViewerPreviewController=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("viewerPreviewController",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(38);angular.module("siteGeneratorStaticsConsumerAppInternal").component("overlay",{templateUrl:"views/preview/overlay.html",controller:n.Overlay,controllerAs:"$overlay"})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(66),o=i(67),r=i(26),a=i(0),s=function(){function e(e,t,i,n){this.applicationState=e,this.overlayManager=t,this.sitePartTypes=i,this.flags=n}return e.$inject=["applicationState","overlayManager","sitePartTypes","flags"],Object.defineProperty(e.prototype,"isInDesktopEditMode",{get:function(){return this.applicationState.isInDesktopEditMode()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropTargetHeight",{get:function(){return this.overlayManager.isCurrentPageEmpty?n.ListSpanManager.MinBodyHeight:o.OverlayManager.DropTargetHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropTargetWidth",{get:function(){return r.Viewer.ViewerDesktopBaseSize},enumerable:!0,configurable:!0}),e.prototype.fakeOverlayClicked=function(e){e.nodeId&&(this.applicationState.setContentFocus(e.nodeId,"body"),this.applicationState.goToEditMode())},e.prototype.isAddMode=function(){return this.applicationState.isAddSectionMode()},e.prototype.handleSolutionOverlayClick=function(){this.isAddMode()&&this.applicationState.goToBuilder(!1)},e.prototype.handleSolutionOverlayMouseLeave=function(e){this.flags.largerStage&&this.applicationState.isSteady()&&!this.isAddMode()&&a.get(this,"overlayManager.data.hoveredListSpan.node.id")===a.get(e,"node.id")&&(this.overlayManager.data.hoveredListSpan=null)},e.prototype.handleSolutionOverlayMouseEnter=function(e){this.applicationState.isSteady()&&!this.isAddMode()&&(this.overlayManager.data.hoveredListSpan=this.overlayManager.isListSpanFocused(e)?null:e)},e.prototype.shouldShowDropStrip=function(){return!!this.overlayManager.dropTargetId&&this.isInDesktopEditMode},e.prototype.isBodySitePart=function(){return this.renderData.partType===this.sitePartTypes.BODY},e.prototype.isOnBodyEditState=function(){return this.applicationState.isEditMode()&&this.applicationState.isBodyContent()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("solutionOverlay",{bindings:{renderData:"<"},templateUrl:"views/preview/solution-overlay.html",controller:s,controllerAs:"$solutionOverlay"})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(72),o=i(57),r=i(59),a=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g){this.onstageActionsManager=e,this.masterPageOverlayModel=t,this.applicationState=i,this.tpaService=n,this.tpaSettings=o,this.ONSTAGE_EVENTS=r,this.$timeout=a,this.consumerBiLogger=s,this.$translate=l,this.assistiveMessage=c,this.$element=d,this.overlayPosition=u,this.flags=p,this.chatManager=g}return e.$inject=["onstageActionsManager","masterPageOverlayModel","applicationState","tpaService","tpaSettings","ONSTAGE_EVENTS","$timeout","consumerBiLogger","$translate","assistiveMessage","$element","overlayPosition","flags","chatManager"],Object.defineProperty(e.prototype,"childrenData",{get:function(){return this.applicationState.isInMobileEditMode()?this.masterPageOverlayModel.mobile.children:this.masterPageOverlayModel.data.children},enumerable:!0,configurable:!0}),e.prototype.openMobileTooltip=function(e){this.isChat(e)&&this.assistiveMessage.show({target:this.$element.find('[data-hook="master-page-'+e+'-overlay"]:visible'),xOffset:23,text:this.$translate.instant("popups.mobile-editor."+e)})},e.prototype.isChat=function(e){return r.ChatManager.isChat(e)},e.prototype.getActions=function(e){return e.isTpaNode()&&this.tpaSettings.registerTpaHandlers(this.tpaService.getNaiveType(e.contentElementType),e),this.onstageActionsManager.getActionsByType(n.OnstageTypes[e.contentElementType.toUpperCase()])},e.prototype.getSimpleActions=function(e){return this.getActions(e).menuItems},e.prototype.getComplexActions=function(e){var t=this,i=this.getActions(e).moreItems;return r.ChatManager.isChat(e.contentElementType)&&Boolean(this.chatManager.getChatNodeFromModelTree())&&this.chatManager.isPremium()?i.filter(function(e){return e.event!==t.ONSTAGE_EVENTS.UPGRADE_CHAT}):i},e.prototype.getTitle=function(e){return this.$translate.instant("builder.sections."+e.getContentElementType())},e.prototype.onShowActionsMenu=function(e){var t=this;this.menuIsShown=!0,this.$timeout(function(){var i=e.getContentElementType();t.menuIsShown&&t.consumerBiLogger.contentEditor.onstageQuickActionsTooltipShown(i,e.getId(),e.alias,i)},o.SegmentOverlay.MENU_BI_TIMEOUT)},e.prototype.onHideActionsMenu=function(){this.menuIsShown=!1},e.prototype.handleOverlayClick=function(e){var t=this.onstageActionsManager.getActionsByType(n.OnstageTypes[e.node.contentElementType.toUpperCase()]);this.onstageActionsManager.executeAction(t.click,e)},e.prototype.runAction=function(e,t){this.onstageActionsManager.executeAction(e,t)},e.prototype.getLeftPosition=function(e){return this.flags.santaByViewport?e+this.overlayPosition.siteMargin():e},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("masterPageOverlay",{templateUrl:"views/preview/master-page-overlay.html",controller:a})},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Starter="Professional",e.Professional="Sales",e.Unlimited="Teams"}(n||(n={}));var o=Object.keys(n).pop(),r=Object.keys(n).map(function(e){return n[e]});t.isHighestTier=function(e){return n[o]===e},t.isPremium=function(e){return-1!==r.indexOf(e)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(43),o=i(1),r=i(0),a=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T){var b=this;this.$scope=e,this.$timeout=t,this.previewScale=i,this.applicationState=n,this.consumerBiLoggerHelpers=o,this.storyServices=r,this.modelTree=a,this.assistantManager=s,this.overlayManager=l,this.overlaySegmentManager=c,this.consumerBiLogger=d,this.sectionManager=u,this.sitePartTypes=p,this.layoutSolver=g,this.sectionHeightUIService=h,this.slideShowService=m,this.listSpanUtils=f,this.contentElementFieldManager=v,this.tpaSettings=S,this.onstageActionsManager=y,this.flags=T,this.clearLgList=!1,this.canAddSection=!1,this.getFocusedListSpan=function(){return b.overlayManager.data.focusedListSpan},this.getHoveredListSpan=function(){return b.overlayManager.data.hoveredListSpan},this.isHeaderContent=function(){var e=b.applicationState.getContentFocus();return e&&e.sitePart===b.sitePartTypes.HEADER},this.isFooterContent=function(){var e=b.applicationState.getContentFocus();return e&&e.sitePart===b.sitePartTypes.FOOTER},this.$scope.$watch(function(){return b.storyServices.story&&b.storyServices.story.selectedPage},function(){return b.refresh()}),this.$scope.$watch(function(){return b.listSpan},function(){return b.refresh()}),this.$scope.$watch(function(){return b.overlayManager.data.focusedListSpan},function(){return b.refresh()})}return e.$inject=["$scope","$timeout","previewScale","applicationState","consumerBiLoggerHelpers","storyServices","modelTree","assistantManager","overlayManager","overlaySegmentManager","consumerBiLogger","sectionManager","sitePartTypes","layoutSolver","sectionHeightUIService","slideShowService","listSpanUtils","contentElementFieldManager","tpaSettings","onstageActionsManager","flags"],e.prototype.isMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},e.prototype.showChangeSectionHeight=function(){return this.sectionHeightUIService.showChangeSectionHeight()},e.prototype.stateIsChangeHeight=function(){return this.sectionHeightUIService.stateIsChangeHeight()},e.prototype.isHovered=function(){return!!this.overlayManager.data.hoveredListSpan&&this.overlayManager.data.hoveredListSpan.node.id===this.listSpan.node.id},e.prototype.isFocused=function(){var e=this.applicationState.getContentFocus();return e&&e.nodeId===this.listSpan.node.getId()&&e.sitePart===this.listSpan.sitePart},e.prototype.areAddButtonsEnabled=function(){return!this.applicationState.isAddSectionMode()},e.prototype.onAdd=function(e){this.overlayManager.setAddTargetKnown(!0),this.consumerBiLogger.sectionManagement.addSectionClick("plus button"),this.sectionManager.addSection(this.listSpan.node,e)},e.prototype.blockMouse=function(){return this.isTpa()&&this.assistantManager.isInActiveTask()||this.applicationState.isInMobileEditMode()&&this.contentElementFieldManager.isEveryHeaderFieldHidden(this.listSpan)},e.prototype.handleListSpanOverlayDblClick=function(){this.blockMouse()||this.applicationState.isEditMode()||this.isMobileTpa()||(this.consumerBiLoggerHelpers.setPanelSource("double-click on overlay"),this.goToEditMode())},e.prototype.isMobileTpa=function(){return this.isMobileEditMode()&&this.isTpa()},e.prototype.isGoToDesignPanel=function(){return(this.applicationState.isSwitchPresetMode()||this.applicationState.isInSectionBackgroundPanel()||this.applicationState.isInSectionOrSlideShowAnimationPanel()||this.applicationState.isInSectionFontPanel())&&(this.isTpa()||this.isHeaderContent()||this.isFooterContent())||this.applicationState.isInSectionColorPanel()&&(this.isHeaderContent()||this.isFooterContent())},e.prototype.handleListSpanOverlayClick=function(){if(!this.blockMouse())if(this.consumerBiLoggerHelpers.setPanelSource("click on overlay"),!this.isFocused()||this.applicationState.isEditMode()||this.isMobileTpa())if(this.applicationState.setContentFocus(this.listSpan.node.id,this.listSpan.sitePart),this.shouldReturnToBuilder())this.applicationState.goToBuilder();else{var e=this.overlayManager.listSpanManager.hasTpaDesign(this.listSpan.node.contentElementType);if(!this.isGoToDesignPanel()||this.flags.instagram&&e)if(this.flags.instagram&&e){var t=this.isGoToDesignPanel()?n.EditTypes.design:n.EditTypes.settings;this.tpaSettings.openTpaPanel(this.listSpan.node,t,o.BIOrigins.Overlay)}else this.applicationState.goToSectionPanel(o.BIOrigins.Overlay);else this.applicationState.goToSwitchPresetMode(o.BIOrigins.Overlay)}else this.goToEditMode()},e.prototype.shouldReturnToBuilder=function(){var e=this.applicationState.isSwitchPresetMode()&&(this.isTpa()||this.isFooterContent()),t=this.applicationState.isEditMode()&&this.isTpa(),i=this.applicationState.isBuilderMode()&&this.isTpa();return this.isMobileEditMode()&&(e||t||i)},e.prototype.isTpa=function(){var e=this.getSingleSegment();return e&&e.node&&e.node.isTpaNode&&e.node.isTpaNode()},e.prototype.hasPresets=function(){return this.listSpanUtils.ceHasPresets(this.listSpan.node.contentElementType)},e.prototype.printPrettyAlgoInfo=function(){console.log(this.listSpan&&this.listSpan.prettyAlgo)},e.prototype.printSiteConverterDebugData=function(){this.flags.debugWizSiteConverter&&(console.log("siteConverter:",this.listSpan.node.siteConverter),window.siteConverterSection=this.listSpan.node.siteConverter.wizSection,window.siteConverterNode=this.listSpan.node)},e.prototype.getPrettyAlgoScore=function(){return this.listSpan&&this.listSpan.prettyAlgo&&this.listSpan.prettyAlgo.score||"N/A"},e.prototype.prettyAlgoGetRuleNames=function(){return this.listSpan&&this.listSpan.prettyAlgo&&this.listSpan.prettyAlgo.rules?this.listSpan.prettyAlgo.rules.map(function(e){return e.name}):[]},e.prototype.printBgOpacityData=function(){console.log("opacityDebugData: "),r.each(this.listSpan.groups,function(e){r.each(e.opacityDebugData,function(e,t){console.log(t,":",e)})})},e.prototype.refresh=function(){void 0!==this.listSpan&&this.refreshIndications()},e.prototype.refreshIndications=function(){if(this.canAddSection=!1,this.storyServices.story){var e=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage);if(this.flags.membersArea&&e.membersArea)return;var t=e&&"Blog_Single_Post_Widget"!==e.tpaExtraPage&&r.some(e.children,{userHidden:!1});this.canAddSection=t&&!this.isMobileEditMode()&&this.areAddButtonsEnabled()&&!this.assistantManager.isInActiveTask()}},e.prototype.getSlideshowLG=function(){var e=this.listSpan.node,t=this.slideShowService.getSlideShowNodes(this.listSpan.node),i=t.headerNode,n=t.itemNode,o=t.footerNode,a=[this.getLgNode(i,e),this.getLgNode(n,e),this.getLgNode(o,e)];return r.filter(a,function(e){return e})},e.prototype.getLgNode=function(e,t){return e&&this.layoutSolver.getLgByNodeId("body",t.containerPageId,e.id)},e.prototype.goToEditMode=function(){var e=this.getSingleSegment();e?this.overlaySegmentManager.editSegment(e):this.applicationState.goToEditMode()},e.prototype.getSingleSegment=function(){return r.get(this,"listSpan.groups[0].segments[0]")},e.prototype.isShowSegmentOverlay=function(){return this.isFocused()&&!this.clearLgList&&!this.isMobileEditMode()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("listSpanOverlay",{templateUrl:"views/list-span-overlay.html",controller:a,bindings:{listSpan:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),o=i(26),r=i(43),a=i(1),s=i(0),l=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H,O,_){this.$element=e,this.$q=t,this.CONSUMER_DIALOGS=i,this.$translate=n,this.$scope=o,this.$stateParams=r,this.autoSaveNotifier=a,this.CcDialogBuilder=s,this.modelTree=l,this.nodeManipulationService=c,this.notification=d,this.overlayManager=u,this.pagesManager=p,this.previewService=g,this.previewScale=h,this.sectionManager=m,this.sitePartTypes=f,this.storyServices=v,this.undoRedo=S,this.applicationState=y,this.consumerBiLogger=T,this.tpaService=b,this.tpaDefinition=I,this.tpaSettings=P,this.tpaUrlBuilder=M,this.flags=E,this.layoutSolver=w,this.consumerBiLoggerHelpers=C,this.selections=A,this.assistantManager=L,this.listSpanUtils=B,this.partialSectionManager=k,this.contentElementFieldManager=H,this.sectionHeightService=O,this.sectionHeightUIService=_,this.showMoreActions=!1,this.canAddSection=!1,this.presetPreview=null,this.scale=1,this.MarginMenuTopBottom=38,this.MarginFromEdgesOfBrowser=6,this.MenuButtonHeight=this.flags.largerStage?3:36}return e.$inject=["$element","$q","CONSUMER_DIALOGS","$translate","$scope","$stateParams","autoSaveNotifier","CcDialogBuilder","modelTree","nodeManipulationService","notification","overlayManager","pagesManager","previewService","previewScale","sectionManager","sitePartTypes","storyServices","undoRedo","applicationState","consumerBiLogger","tpaService","tpaDefinition","tpaSettings","tpaUrlBuilder","flags","layoutSolver","consumerBiLoggerHelpers","selections","assistantManager","listSpanUtils","partialSectionManager","contentElementFieldManager","sectionHeightService","sectionHeightUIService"],e.prototype.$postLink=function(){var e=this;this.setScale(this.previewScale.getScale(),!1),this.$scope.$watch(function(){return e.previewScale.getScale()},function(t,i){t!==i&&(e.setScale(t),e.updatePosition())}),this.$scope.$watch(function(){return e.contentDesignatedListSpan&&e.contentDesignatedListSpan.listNodeId},function(t,i){t!==i&&e.update()}),this.$scope.$on(n.ViewerScrollController.PreviewScrollEvent,function(){e.updateButtonsStripPosition()}),this.$scope.$watch(function(){if(e.contentDesignatedListSpan){var t=e.overlayManager.listSpanManager.getListSpanAbsoluteLayout(e.contentDesignatedListSpan);return t.top+"-"+t.height}},function(){return e.update()})},e.prototype.getSectionName=function(){var e=s.get(this,"contentDesignatedListSpan.node");return e?"GeneralDescription"===e.getContentElementType()?"footer"===e.containerPageId?"Footer":"Header":e.isTpa?e.contentElementType:e.alias:""},e.prototype.update=function(){this.updateViewState(),this.updatePosition()},e.prototype.updateViewState=function(){this.isManage=this.canManage(),this.isDesigns=this.shouldShowSwitchBtn(),this.isEdit=this.shouldShowEditBtn()},e.prototype.isListItem=function(){return this.contentDesignatedListSpan.isList},e.prototype.shouldShowButtons=function(){return this.flags.largerStage?this.stateIsHover()&&!this.assistantManager.getCustomTaskData("hideListSpanButtons"):(this.stateIsHover()||!this.overlayManager.data.hoveredListSpan)&&!this.assistantManager.getCustomTaskData("hideListSpanButtons")},e.prototype.isContentFocused=function(){var e=this.applicationState.getContentFocus(),t={nodeId:this.contentDesignatedListSpan.node.getId(),sitePart:this.contentDesignatedListSpan.sitePart};return s.isEqual(t,e)},e.prototype.isHeader=function(){return this.contentDesignatedListSpan.sitePart===this.sitePartTypes.HEADER},e.prototype.isOnBody=function(){return this.contentDesignatedListSpan.sitePart===this.sitePartTypes.BODY},e.prototype.isMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},e.prototype.isFooter=function(){return"footer"===this.contentDesignatedListSpan.node.containerPageId},e.prototype.canManipulate=function(){return!this.contentDesignatedListSpan.node.isTpaMultiSection()&&!this.contentDesignatedListSpan.node.isTpa},e.prototype.canDuplicate=function(){return this.canManipulate()&&"Contact"!==this.contentDesignatedListSpan.node.getContentElementType()},e.prototype.setScale=function(t,i){void 0===i&&(i=!0),this.scale=t;var n=(this.applicationState.isInMobileEditMode()?o.Viewer.ViewerMobileBaseSize:o.Viewer.ViewerDesktopBaseSize)*t;$(e.MiddleSectionSelector).css("flex-basis",n+"px")},e.prototype.onDelete=function(e){this.flags.largerStage&&e.stopPropagation();var t=this.contentDesignatedListSpan.node;this.sectionManager.showDeleteSectionPopup(t,"more-actions")},e.prototype.canMove=function(e){if(!this.nodeManipulationService||!this.contentDesignatedListSpan)return!1;var t=this.contentDesignatedListSpan.node.containerPageId;return this.nodeManipulationService.canMove(this.contentDesignatedListSpan.node.id,t,e)},e.prototype.duplicateSection=function(e){this.flags.largerStage&&e.stopPropagation();var t=this.contentDesignatedListSpan.node;this.consumerBiLogger.sectionManagement.sectionMenuDuplicateSectionClick(t.getContentElementType(),t.alias,this.tpaService.getAppId(t)),this.applicationState.clearContentFocus(),this.sectionManager.duplicateSection(this.contentDesignatedListSpan.node)},e.prototype.canMoveAwayFlow=function(){if(!this.pageList){var e={name:this.$translate.instant("general.new-page"),value:PagesManager.BlankPageId};this.pageList=[e].concat(s(this.modelTree.getValidPagesForNode(this.contentDesignatedListSpan.node)).map(function(e){return{name:e.getDisplayName(),value:e.getId()}}).value())}return s.keys(this.pageList).length>0},e.prototype.moveAwayFlow=function(e){var t=this;this.flags.largerStage&&e.stopPropagation();var i=this.contentDesignatedListSpan.node;this.consumerBiLogger.sectionManagement.sectionMenuMoveSectionToAnotherPageClick(i.getId(),i.getContentElementType(),i.alias,this.tpaService.getAppId(i)),this.CcDialogBuilder.showPositiveContinuedAction({heading:this.$translate.instant("popups.movesection.heading"),text:this.$translate.instant("popups.movesection.text"),acceptButtonText:this.$translate.instant("general.move"),rejectButtonText:this.$translate.instant("general.cancel"),dropDownItems:this.pageList,dropDown:this.pageList[0],biDialogName:this.CONSUMER_DIALOGS.MOVE_SECTION,showHelpButton:!0,onHelp:function(){t.CcDialogBuilder.showSupportIframe(t.$translate.instant("help.popup.moveSection"),t.CONSUMER_DIALOGS.MOVE_SECTION_HELP)}}).then(function(e){return t.flags.widgetAppsPanel?t.pagesManager.createOrGetPage(e.selected.value,t.$translate.instant("general.blank")):t.createOrGetPage(e.selected.value)}).then(function(e){return t.sectionManager.moveSectionToAnotherPage(t.contentDesignatedListSpan.node,e)}).then(function(e){var n=t.sectionManager.geSectionPositionInPage(i),o=t.storyServices.story.selectedPage,r=t.sectionManager.geSectionPositionInPage(i),a=t.tpaService.getAppId(i);if(t.consumerBiLogger.sectionManagement.sectionMovedToANewPageSuccess(i.getId(),i.getContentElementType(),i.alias,o,n,r,a),null!==e)return t.applicationState.setContentFocus(i.getId(),t.sitePartTypes.BODY,!0),t.notifySectionMoved()})},e.prototype.notifySectionMoved=function(){var e=this;return this.flags.disableUndoRedo?this.notification.show("toasters.section-moved"):this.notification.show("toasters.section-moved","general.undo",function(){e.undoRedo.undo()})},e.prototype.stateIsHover=function(){return"hover"===this.state},e.prototype.setChangeHeightState=function(e){void 0===e&&(e=!1),this.overlayManager.listSpanManager.setChangeSectionHeightState(e)},e.prototype.shouldShowDragHandle=function(){return this.flags.largerStage?this.isOnBody()&&this.overlayManager.listSpanManager.getAllInBody().length>1&&this.showAllButtons():this.isOnBody()&&this.overlayManager.listSpanManager.getAllInBody().length>1&&this.showAllButtons()&&!this.stateIsHover()},e.prototype.isDragEnabled=function(){var e="saving"===this.autoSaveNotifier.savingState;return!this.contentDesignatedListSpan.node.isTpaNode()&&!e},e.prototype.openShowMoreActionsMenu=function(){this.showMoreActions=!0},e.prototype.closeShowMoreActionsMenu=function(){this.showMoreActions=!1},e.prototype.toggleShowMoreActions=function(){this.showMoreActions||this.logBI_ClickOnMoreActionsMenu(),this.showMoreActions=!this.showMoreActions,this.showMoreActions||this.mamMouseLeave()},e.prototype.mamMouseEnter=function(){this.showMoreActions&&this.$element.addClass(e.IN_MORE_MENU_CLASS)},e.prototype.mamMouseLeave=function(){this.$element.removeClass(e.IN_MORE_MENU_CLASS)},e.prototype.logBI_ClickOnMoreActionsMenu=function(){var e=this.contentDesignatedListSpan.node,t=e.alias,i=e.getContentElementType();this.consumerBiLogger.sectionManagement.clickOnMoreActionsMenu(t,i)},e.prototype.showActions=function(){return this.isOnBody()&&!this.showMoreActions&&this.canManipulate()&&this.showAllButtons()},e.prototype.showAllButtons=function(){return!this.applicationState.isInCropperMode()},e.prototype.dragHandleClick=function(){this.applicationState.setContentFocus(this.contentDesignatedListSpan.node.id,this.contentDesignatedListSpan.sitePart)},e.prototype.createOrGetPage=function(e){return"_blank"===e?this.pagesManager.addPage(this.$translate.instant("general.blank")):this.$q.when(this.modelTree.getPageNodeById(e))},e.prototype.getSwitchButtonText=function(){return"general.designs"},e.prototype.shouldAddNoSwitchClass=function(){return!this.isDesigns&&!this.isManage},e.prototype.shouldShowSwitchBtn=function(){return(!this.flags.membersArea||!this.contentDesignatedListSpan.node.membersArea)&&(!(this.applicationState.isInCropperMode()||(this.isTpa()||"footer"===this.contentDesignatedListSpan.sitePart)&&this.isMobileEditMode())&&this.listSpanUtils.ceHasPresets(this.contentDesignatedListSpan.node.contentElementType))},e.prototype.shouldShowEditBtn=function(){return!(this.applicationState.isInCropperMode()||this.applicationState.isInMobileEditMode()&&(this.isTpa()||this.isEveryHeaderFieldHidden()))&&(!this.isTpa()||this.tpaService.getEditWidgetUrl(this.contentDesignatedListSpan.node))},e.prototype.isEveryHeaderFieldHidden=function(){return this.contentElementFieldManager.isEveryHeaderFieldHidden(this.contentDesignatedListSpan)},e.prototype.isDifferentContentFocus=function(){var e=this.applicationState.getContentFocus();return!e||e.nodeId!==this.contentDesignatedListSpan.node.id||e.sitePart!==this.contentDesignatedListSpan.sitePart},e.prototype.onToggleEditMode=function(){var e=this.isDifferentContentFocus();if(this.applicationState.setContentFocus(this.contentDesignatedListSpan.node.id,this.contentDesignatedListSpan.sitePart),this.consumerBiLoggerHelpers.setPanelSource(a.BIOrigins.ClickEditButton),this.isTpa()){var t=this.tpaService.getAppId(this.contentDesignatedListSpan.node),i=this.tpaService.getInstanceId(this.contentDesignatedListSpan.node);this.consumerBiLogger.provisioning.tpaIntent(i,t,"GFPP_SETTINGS","ADI"),this.consumerBiLogger.apps.clickOnEditAppTpaSettings(a.BIOrigins.ClickEditButton,t,this.tpaService.getNaiveType(this.contentDesignatedListSpan.node.getContentElementType()),i)}e||!this.applicationState.isInEditMode()?this.applicationState.goToEditMode():this.applicationState.goToBuilder(!0)},e.prototype.onTogglePresetState=function(){var e=this.contentDesignatedListSpan.node,t=this.isDifferentContentFocus();this.applicationState.setContentFocus(this.contentDesignatedListSpan.node.id,this.contentDesignatedListSpan.sitePart),this.overlayManager.listSpanManager.hasTpaDesign(e.contentElementType)?this.tpaSettings.openTpaPanel(e,r.EditTypes.design,a.BIOrigins.ClickEditButton):t||!this.applicationState.isSwitchPresetMode()?this.applicationState.goToSwitchPresetMode("section"):this.applicationState.goToBuilder()},e.prototype.canManage=function(){return(!this.flags.membersArea||!this.contentDesignatedListSpan.node.membersArea)&&(!!this.isTpa()&&!!this.tpaUrlBuilder.getManagementUrl(this.getTpaType(),this.contentDesignatedListSpan.node))},e.prototype.getTpaType=function(){var e="";return this.contentDesignatedListSpan.node.contentElement&&this.isTpa()&&(e=this.contentDesignatedListSpan.node.contentElement.type,e=this.tpaService.getNaiveType(e)),e},e.prototype.getTpaTooltip=function(){return"tpa_"+this.getTpaType().toLowerCase()+"_settings"},e.prototype.getEditButtonTooltip=function(){return this.isTpa()?"overlay_settings":"overlay_edit"},e.prototype.showChangeSectionHeight=function(){return this.sectionHeightUIService.showChangeSectionHeight()},e.prototype.stateIsChangeHeight=function(){return this.sectionHeightUIService.stateIsChangeHeight()},e.prototype.isChangeHeightDisabled=function(e){return e},e.prototype.showMoveColumnButton=function(){var e=this.contentDesignatedListSpan.node,t=s.first(this.contentDesignatedListSpan.groups);return this.flags.internalColumnBackground&&e&&!e.isList()&&!e.isTpaNode()&&t&&this.partialSectionManager.isPartial(t)},e.prototype.moveColumn=function(e){this.flags.largerStage&&e.stopPropagation(),this.partialSectionManager.switchColumnPosition(this.contentDesignatedListSpan.node)},e.prototype.changeSectionHeight=function(e,t){var i=this,n=this.contentDesignatedListSpan.node,o=this.sectionHeightService.getAdditionalHeight(n);return this.sectionHeightService.setAdditionalHeight(n,o+t),this.undoRedo.captureOperation(!1,!0),this.consumerBiLogger.sectionDesign.sectionHeightChangeClick(o+t,e?"Longer":"Shorter",n.alias,n.getContentElementType()),this.sectionManager.recalculateSection(n).then(function(){i.consumerBiLogger.sectionDesign.sectionHeightChangeSuccess(o+t,e?"Longer":"Shorter",n.alias,n.getContentElementType())})},e.prototype.showPrintAdditionalHeightButton=function(){return this.flags.debug},e.prototype.printAdditionalHeight=function(e){this.flags.largerStage&&e.stopPropagation(),s.each(this.contentDesignatedListSpan.groups,function(e){console.log("Additional Height for",e.contentType,":",e.segments[0].containingLG.getAdditionalHeight())});var t=this.selections.getForNode(this.contentDesignatedListSpan.node);console.log("User Additional Height for section:",t.additionalHeight||0)},e.prototype.getLayoutMedia=function(){var e=s.first(this.contentDesignatedListSpan.groups),t=s.first(e.segments),i=t.getLE();return{layout:i.getMediaLayout(),segment:t,LE:i}},e.prototype.isTpa=function(){return this.contentDesignatedListSpan.node&&this.contentDesignatedListSpan.node.isTpaNode()},e.prototype.updateButtonsStripPosition=function(t){if(void 0===t&&(t=this.contentDesignatedListSpan),t){var i,n=this.overlayManager.listSpanManager.getListSpanAbsoluteLayout(t).scale(this.scale),o=0;[!!this.isManage,!!this.isDesigns,!!this.isEdit].forEach(function(e){return e&&o++});var r=this.MenuButtonHeight*o;i=this.newCalculateButtonStripRelativeTop(n,r,t.sitePart),this.$element.find(e.ButtonsStripSelector).css({top:i-n.top})}},e.prototype.newCalculateButtonStripRelativeTop=function(e,t,i){var n,o=this.MarginFromEdgesOfBrowser,r=t/2+this.MarginMenuTopBottom,a=this.previewService.getOverlayContainer().scrollTop,s=e.height>t+o,l=e.height>t+2*this.MarginMenuTopBottom;switch(i){case this.sitePartTypes.HEADER:n=s?this.middleOfSection(e):t/2+o;break;case this.sitePartTypes.FOOTER:n=s?this.middleOfSection(e):e.top+(e.height-(o+t/2));break;default:n=l?this.marginFromTopOfSectionOrBrowser(e,a,r):this.middleOfSection(e)}return n},e.prototype.marginFromTopOfSectionOrBrowser=function(e,t,i){var n=e.top+e.height,o=t>e.top?t:e.top;return Math.min(o+i,n-i)},e.prototype.middleOfSection=function(e){return e.top+e.height/2},e.prototype.scrollPreviewToListSpan=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=!1);var n=this.overlayManager.listSpanManager.getListSpanAbsoluteLayout(e).scale(this.scale);if(this.shouldScroll(e,n)){var o=this.calculateScrollPosition(n),r=this.overlayManager.listSpanManager.getNodeTopRelativeToListSpan(t,e);this.previewService.getOverlayContainer().scrollTop=o+r}},e.prototype.shouldScroll=function(e,t){return!(t.top<0)&&!this.overlayManager.isListSpanHovered(e)},e.prototype.calculateScrollPosition=function(e){var t=e.top,i=this.previewService.getOverlay().clientHeight;if(e.height<i){var n=(i-e.height)/2;return Math.max(t-n,0)}return t-36},e.prototype.updatePosition=function(e){void 0===e&&(e=this.contentDesignatedListSpan),e&&(this.updateButtonsStripPosition(e),e&&!this.stateIsHover()&&this.scrollPreviewToListSpan(e,this.$stateParams.childId),this.pageList=null,this.scaleLayout(e))},e.prototype.scaleLayout=function(e){var t=this.overlayManager.listSpanManager.getListSpanAbsoluteLayout(e).scale(this.scale);this.$element.css({top:this.flags.largerStage?0:t.top,height:t.height})},e.prototype.isHeaderColumnsEnabled=function(){return(this.contentDesignatedListSpan.groups[0].getColumnsData()||{}).enable},e.prototype.isHeaderColumnsFullWidthEnabled=function(){var e=this.contentDesignatedListSpan.groups[0].getColumnsData()||{};return e.enable&&e.fullWidth},e.prototype.headerUseColumnsClicked=function(){if(this.flags.debugHeaderColumns){var e=this.contentDesignatedListSpan.groups[0],t=e.getColumnsData()||{};t.enable=!t.enable,t.enable&&(t.margin=60),e.setColumnsData(t),this.storyServices.recalculateCurrentPage(!0)}},e.prototype.headerColumnsFullWidthClicked=function(){if(this.flags.debugHeaderColumns){var e=this.contentDesignatedListSpan.groups[0],t=e.getColumnsData()||{};t.enable||(t.enable=!0),t.margin=60,t.fullWidth=!t.fullWidth,e.setColumnsData(t),this.storyServices.recalculateCurrentPage(!0)}},e.ButtonsStripSelector='[data-hook="buttons-strip"]',e.MiddleSectionSelector=".overlay-tools-center",e.IN_MORE_MENU_CLASS="in-more",e}();t.ListSpanTools=l,angular.module("siteGeneratorEditorInternal").component("listSpanTools",{templateUrl:"views/builder/list-span-tools.html",controller:l,bindings:{contentDesignatedListSpan:"=",state:"@?"}}),angular.module("siteGeneratorEditorInternal").component("listSpanTools2",{templateUrl:"views/builder/list-span-tools2.html",controller:l,bindings:{contentDesignatedListSpan:"=",state:"@?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=i(0),r=function(){function e(e,t,i,n,o){var r=this;this.flags=e,this.$timeout=t,this.TourBackdrop=i,this.applicationState=n,this.overlayManager=o,this.namespace="changeSectionHeight",this.sectionHeightLimits=null,this.isPopupShown=!1,this.handleClosingSectionHeight=function(e){if(r.cleanSectionHeightCache(),r.isPopupShown)r.setPopupShown(!1);else{var t=e.target;!t||t.closest("assistant-video")||t.classList.contains("close-assistant-video")||r.stateIsChangeHeight()&&!e.target.closest(".change-height-toolbar")&&r.setChangeSectionHeightState(!1)}}}return e.$inject=["flags","$timeout","TourBackdrop","applicationState","overlayManager"],e.prototype.setSectionHeightLimits=function(e){this.sectionHeightLimits=e},e.prototype.getSectionHeightLimits=function(){return this.sectionHeightLimits},e.prototype.setPopupShown=function(e){this.isPopupShown=e},e.prototype.stateIsChangeHeight=function(){return this.overlayManager.listSpanManager.isChangeSectionHeightState},e.prototype.showChangeSectionHeight=function(){return this.applicationState.isSectionHeightMode()&&this.stateIsChangeHeight()},e.prototype.onOpenHeightPanel=function(){this.cleanSectionHeightCache()},e.prototype.closeWhenClickOutside=function(){$(document.body).on("click."+this.namespace,this.handleClosingSectionHeight)},e.prototype.disableCloseWhenClickOutside=function(){$(document.body).off("click."+this.namespace)},e.prototype.cleanSectionHeightCache=function(){this.sectionHeightLimits=void 0},e.prototype.setChangeSectionHeightState=function(e){var t=this;this.$timeout(function(){t.overlayManager.listSpanManager.setChangeSectionHeightState(e)})},e}();t.SectionHeightUIService=r;var a=function(){function e(e,t,i,n,r,a,s,l,c,d,u,p,g){var h=this;this.flags=e,this.$q=t,this.$timeout=i,this.applicationState=n,this.storyServices=r,this.cabbie=a,this.$state=s,this.modelTree=l,this.sectionHeightUIService=c,this.sectionHeightService=d,this.undoRedo=u,this.consumerBiLogger=p,this.$translate=g,this.totalPlusClicked=0,this.totalMinusClicked=0,this.plusName="plus",this.minusName="minus",this.changeSectionDebounce=o.debounce(function(e,t){if(h.totalPlusClicked=0,h.totalMinusClicked=0,h.changeSectionHeight&&0!==e){var i,n=e>0,o=h.getSectionHeightLimits(t),r=h.sectionHeightService.getAdditionalHeight(t);if(n){var a=o.max-r;i=Math.min(a,e)}else{a=o.min-r;i=Math.max(a,e)}0!==i&&(i%2!=0&&(i=i>0?i+1:i-1),h.changeSectionHeight({toBigger:n,totalClicks:i}))}},500)}return e.$inject=["flags","$q","$timeout","applicationState","storyServices","cabbie","$state","modelTree","sectionHeightUIService","sectionHeightService","undoRedo","consumerBiLogger","$translate"],e.prototype.$postLink=function(){this.showMessageInDesktopSectionHeight(),this.consumerBiLogger.sectionDesign.sectionHeightButtonsAreShown(this.node.alias,this.node.getContentElementType())},e.prototype.closeSectionHeight=function(){var e=this;this.$timeout(function(){e.applicationState.goToSwitchPresetMode("section")})},e.prototype.$onDestroy=function(){this.sectionHeightUIService.setChangeSectionHeightState(!1),this.sectionHeightUIService.disableCloseWhenClickOutside(),this.consumerBiLogger.sectionDesign.sectionHeightButtonsDisappeared(this.node.alias,this.node.getContentElementType())},e.prototype.getSectionHeightLimits=function(e){var t=this.sectionHeightUIService.getSectionHeightLimits();return t||(t=this.sectionHeightService.getAdditionalHeightLimits(e),this.sectionHeightUIService.setSectionHeightLimits(t)),t},e.prototype.isChangeSectionHeightDisabled=function(e,t){if(this.isChangeHeightDisabled){var i=this.getSectionHeightLimits(t),n=this.sectionHeightService.getAdditionalHeight(t),o=e===this.plusName?n>=i.max:n<=i.min;return this.isChangeHeightDisabled({isDisabled:o})}},e.prototype.resizeSectionHeight=function(e,t,i){this.flags.largerStage&&i.stopPropagation(),e?this.totalPlusClicked+=2:this.totalMinusClicked+=2;var n=this.totalPlusClicked-this.totalMinusClicked;this.changeSectionDebounce(n,t)},e.prototype.setChangeSectionHeightState=function(){this.setChangeHeightState&&this.setChangeHeightState()},e.prototype.showMessageInDesktopSectionHeight=function(){this.applicationState.isSilent()||!this.applicationState.isSectionHeightMode()||this.storyServices.story.popupConfigurations["first-time-in-desktop-section-height"]||(this.showTooltip("change-height-toolbar","tip_content.section_height"),this.storyServices.story.popupConfigurations["first-time-in-desktop-section-height"]=!0,this.undoRedo.captureOperation(!1,!0),$(".intro-tooltip").addClass("content-panel-tooltip-top"))},e.prototype.showTooltip=function(e,t){var i=this;this.$timeout(function(){i.cabbie.show({target:".vertical-menu.more-actions-panel",text:i.$translate.instant(t),position:{positionX:n.AssistantPositionX.Center,positionY:n.AssistantPositionY.Top},tourStepClass:"section-height-style",introTooltipClass:"section-height-tooltip"}),i.sectionHeightUIService.setPopupShown(!0)},0)},e}();angular.module("siteGeneratorEditorInternal").component("sectionHeight",{templateUrl:"views/builder/section-height.html",controller:a,bindings:{setChangeHeightState:"&",isChangeHeightDisabled:"&",changeSectionHeight:"&",node:"="}}).service("sectionHeightUIService",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g){var h=this;this.$scope=e,this.$element=t,this.$translate=i,this.applicationState=n,this.previewScale=o,this.previewService=r,this.overlayManager=a,this.sectionDrag=s,this.sectionManager=l,this.spinnerService=c,this.sitePartTypes=d,this.consumerBiLogger=u,this.consumerBiLoggerHelpers=p,this.flags=g,this.TranslateKeys={DEFAULT_TEXT:"builder.drop-target-hint",DRAG_OVER:"builder.drop-target-drag-over"},this.$scope.$watch(function(){return h.overlayManager.dropTargetData.dropTargetPosition},function(){return h.updatePosition()}),this.setDropTargetText(this.TranslateKeys.DEFAULT_TEXT),this.setDragListeners()}return e.$inject=["$scope","$element","$translate","applicationState","previewScale","previewService","overlayManager","sectionDrag","sectionManager","spinnerService","sitePartTypes","consumerBiLogger","consumerBiLoggerHelpers","flags"],e.prototype.setDropTargetText=function(e){this.dragText=this.$translate.instant(e)},e.prototype.setDragListeners=function(){var e=this;this.$element.on("dragleave",function(){return e.setDropTargetText(e.TranslateKeys.DEFAULT_TEXT)}),this.$element.on("dragenter",function(){return e.setDropTargetText(e.TranslateKeys.DRAG_OVER)})},e.prototype.updatePosition=function(){this.$element.css("top",this.overlayManager.dropTargetData.dropTargetPosition)},e.SpinnerKey="addsection",e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("dropTargetOverlay",{templateUrl:"views/preview/drop-target-overlay.html",controller:n,bindings:{sitePart:"="}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),o=function(){function e(e,t,i,n){this.sectionManager=e,this.overlayManager=t,this.applicationState=i,this.flags=n}return e.$inject=["sectionManager","overlayManager","applicationState","flags"],e.prototype.isOnAddState=function(){return this.applicationState.isOnAddState()},e.prototype.onDrop=function(){var e=this,t=this.overlayManager.data.draggedPresetPreview;this.sectionManager.handlePreviewSelected(t,!1).then(function(){return e.applicationState.goToBuilder()})},e.prototype.onAdd=function(){this.overlayManager.setDropTarget(n.DropTargetCalculator.FirstDropTargetId),this.applicationState.goToAddSectionMode()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("emptyPage",{templateUrl:"views/preview/empty-page.html",controller:o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(38);angular.module("siteGeneratorStaticsConsumerAppInternal").directive("overlayLoad",["viewerScrollController","$timeout",function(e,t){return{restrict:"A",require:"^preview",link:function(i,o,r,a){var s=o.find(n.Overlay.ViewportSelector);a.overlayLoaded(s[0]),e.init(s),t(function(){o.find('[data-hook="site-overlay"]').css("padding-left",e.getScrollbarWidth())},1e3)}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("overlayHighlightStyle",["flags","animationChanges","overlayManager","previewScale",function(e,t,i,n){function o(e){switch(e){case"hover":return i.data.hoveredListSpan;case"active":return i.data.focusedListSpan;default:return null}}function r(e,o,r){var a;if(void 0===r&&(r=n.getScale()),r&&o){var s=i.listSpanManager.getListSpanAbsoluteLayout(o).scale(r);a={top:s.top,height:s.height}}else a={height:0,top:0};t.add(function(){return e.css(a)})}return{restrict:"A",link:function(e,t,a){e.$watch(function(){var e=o(a.overlayHighlightStyle);if(e){var t=i.listSpanManager.getListSpanAbsoluteLayout(e);return t.top+"-"+t.height}},function(){return r(t,o(a.overlayHighlightStyle))}),e.$watch(function(){return n.getScale()},function(e,i){return r(t,o(a.overlayHighlightStyle),e)}),e.$watch(function(){return o(a.overlayHighlightStyle)},function(e){return r(t,e)})}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(74);angular.module("siteGeneratorStaticsConsumerAppInternal").directive("listSpanOverlayPosition",["$parse","flags","previewScale","overlayPosition","listSpanOverlayPositionService",function(e,t,i,o,r){return{restrict:"A",link:function(a,s,l){var c,d=function(){return e(l.listSpanOverlayPosition)(a)};c=t.largerStage?o.getCache(s,function(e,t,n){var r=o.siteWidth()*t,a=(i.getStageWidth()-r)/2;return e.width=void 0!==e.width?e.width:o.siteWidth()*t,e.left=void 0!==e.left?e.left:a,e.height=void 0!==e.height?e.height+2:e.height,e}):o.getCache(s);var u=function(){var e=d(),t=r.getPosition(e);c(i.getScale(),t)};a.$watch(d,u),a.$watch(function(){return function(e){void 0===e&&(e=d());var t=e&&e.groups[0];return t&&o.getOverlay(e.sitePart,t.page)}()},u),a.$watch(function(){return i.getScale()},function(e){return c(e)});var p=d();if(p){var g=p.listNodeId,h=p.contentType;s.attr(n.adiAutomationLabel,n.stringToAdiAutomation("section-"+g+"-"+h))}}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("layoutGroupOverlayPosition",["$parse","overlayPosition","previewScale","layoutGroupOverlayPositionService",function(e,t,i,n){return{restrict:"A",link:function(o,r,a){var s=function(){return e(a.layoutGroupOverlayPosition)(o)},l=t.getCache(r);o.$watch(function(){return function(e){void 0===e&&(e=s());var i=e&&e.containingPage();if(i)return e&&t.getOverlay(i.sitePart,i.page)}()},function(){var e=s(),t=n.getPosition(e);l(i.getScale(),t)}),o.$watch(function(){return i.getScale()},function(e){return l(e)})}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(74),o=i(0);angular.module("siteGeneratorStaticsConsumerAppInternal").directive("segmentOverlayPosition",["$parse","overlayPosition","previewScale","segmentOverlayPositionService",function(e,t,i,r){return{restrict:"A",link:function(a,s,l){var c=function(){return e(l.segmentOverlayPosition)(a)},d=t.getCache(s,function(e){return o.assign({left:0},e)});a.$watch(function(){return function(e){void 0===e&&(e=c());var i=e&&e.containingLG&&e.containingLG.containingPage();return i&&t.getOverlay(i.sitePart,i.page)}()},function(){var e=c(),t=r.getPosition(e);d(i.getScale(),t)}),a.$watch(function(){return i.getScale()},function(e){return d(e)});var u=c();u&&u.node&&s.attr(n.adiAutomationLabel,n.stringToAdiAutomation("item-"+u.node.id))}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(74),o=i(253);angular.module("siteGeneratorStaticsConsumerAppInternal").directive("componentOverlayPosition",["$parse","$state","applicationState","animationChanges","overlayPosition","previewScale","componentOverlayPositionService",function(e,t,i,r,a,s,l){function c(e,t,i){t.forEach(function(t){e.hasClass(t)||e.addClass(t)}),i.forEach(function(t){return e.removeClass(t)})}function d(e,t,i,n,r){!function(e,t){var i=t.height<o.ComponentOverlay.MinComponentHeight;return i||(i=Array.prototype.reduce.call(e[0].children,function(e,t){return e+t.clientWidth},0)+12>t.width),i}(n,r)?c(i,[],["ontop","onbottom"]):!function(e,t){if(!t[0])return!1;var i=t[0].getBoundingClientRect().top;return e[0].getBoundingClientRect().top-i<24}(e,t)?c(i,["ontop"],["onbottom"]):c(i,["onbottom"],["ontop"])}return{restrict:"A",link:function(o,c,u){var p=c.find(".interact-wrap"),g=c.find(".overlay-interact"),h=c.parents(".overlay-viewport"),m=function(){return e(u.componentOverlayPosition)(o)},f=a.getCache(c,function(e,t,i){return e.width=void 0!==e.width?e.width:a.siteWidth()*t,e.left=void 0!==e.left?e.left:-a.siteMargin()*t,r.add(function(){return d(c,h,g,p,e)}),e}),v=function(){var e=m(),t=l.getPosition(e);f(s.getScale(),t)};o.$watch(function(){return function(e){void 0===e&&(e=m());var t=e.le.containingLG,i=t&&t.containingPage();return i&&a.getOverlay(i.sitePart,i.page)}()},v),o.$watch(function(){return s.getScale()},function(e){return f(e)}),o.$watch(function(){return i.getContentFocus()},v),o.$watch(function(){return t.params.childId},v);var S=m();if(S){var y=S.le,T=S.layout,b=y&&y.containingSegment.node;c.attr(n.adiAutomationLabel,n.stringToAdiAutomation("component-"+(b?b.id:"")+"-"+(T.subType||T.type)))}}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(2),r=i(38),a=i(0),s=function(){function e(e,t,i,r,s,l,c,d,u,p,g,h,m,f){var v=this;this.flags=e,this.applicationState=i,this.overlayManager=r,this.clientTopology=s,this.previewService=l,this.sitePartTypes=c,this.solutionFetcher=d,this.storyServices=u,this.presetHelpers=p,this.$state=g,this.sectionHeightUIService=h,this.cardsPanels=f,this.getPanelWidth=function(){return v.applicationState.isInMobileEditMode()&&a.get(v.$state,"current.data.mobilePanelWidth")||(v.cardsPanels.isPanelShouldBeCard()?n.CARD_WIDTH:a.get(v.$state,"current.data.panelWidth",0))},i.isPreviewDisplay()&&(t.builder.previewSitePageView(),l.setPreviewMode(!0)),this.flags.removeSpinnerAsStageReady?o.PubSub.subscribeOnce(o.events.SITE_IS_LOADED,function(){m.$watch(function(){return v.overlayManager.data.focusedListSpan},function(e){v.presetPreview=e?v.createDraggedSectionPreview(e):null})}):m.$watch(function(){return v.overlayManager.data.focusedListSpan},function(e){v.presetPreview=e?v.createDraggedSectionPreview(e):null})}return e.$inject=["flags","consumerBiLogger","applicationState","overlayManager","clientTopology","previewService","sitePartTypes","solutionFetcher","storyServices","presetHelpers","$state","sectionHeightUIService","$scope","cardsPanels"],e.prototype.viewerLoaded=function(e){this.dsContentWindow=e,this.previewLoaded()},e.prototype.stateIsChangeHeight=function(){return this.sectionHeightUIService.stateIsChangeHeight()},e.prototype.overlayLoaded=function(e){this.previewOverlay=e,this.previewOverlayContainer=angular.element(e).closest(r.Overlay.ViewportSelector).get(0),this.previewLoaded()},e.prototype.previewLoaded=function(){this.previewOverlay&&this.dsContentWindow&&this.previewService.urlLoaded(this.dsContentWindow,this.previewOverlay,this.previewOverlayContainer)},e.prototype.createDraggedSectionPreview=function(e){var t=e.sitePart,i=e.node;if(t!==this.sitePartTypes.BODY||i.isTpaNode())return null;var n=this.solutionFetcher.getSectionSolution(this.storyServices.story.selectedPage,i.getId());return this.presetHelpers.createCurrentSectionPreview(i,n)},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").directive("preview",function(){return{restrict:"E",templateUrl:"views/preview/preview.html",replace:!0,controllerAs:"$ctrl",controller:s}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);angular.module("siteGeneratorStaticsConsumerAppInternal").directive("spinner",["spinnerService","notification","$timeout","$translate","flags",function(e,t,i,o,r){function a(e){r.lightSpinner||r.lightSpinnerSvg||(e.find(".onboarding-preloader-circle1").removeClass("animate"),e.find(".onboarding-preloader-circle2").removeClass("animate"),e.find(".onboarding-preloader-circle3").removeClass("animate"))}return{restrict:"E",replace:!0,templateUrl:"views/spinner.html",link:function(s,l){var c,d={start:function(){(s.isFirstTime()||s.buildHomePagePhase)&&l.css("background","rgb(255, 255, 255)"),s.message=h(),document.body.classList.add("is-working"),l.show(),s.isSpinning=!0,s.showAnimations()&&function(e){r.lightSpinner||r.lightSpinnerSvg||requestAnimationFrame(function(){e.find(".onboarding-preloader-circle1").addClass("animate"),e.find(".onboarding-preloader-circle2").addClass("animate"),e.find(".onboarding-preloader-circle3").addClass("animate")})}(l)},stop:function(){s.buildHomePagePhase||(s.showAnimations()?s.isFirstTime()?(l.css("opacity",0),i(function(){l.css("opacity",""),l.css("transition",""),l.css("background",""),a(l),l.hide(),s.isSpinning=!1,document.body.classList.remove("is-working")},500)):(a(l),l.hide(),s.isSpinning=!1,document.body.classList.remove("is-working")):i(function(){l.hide(),s.isSpinning=!1},100))}};s.message="",s.isLightSpinner=r.lightSpinner,s.isLightSpinnerSvg=r.lightSpinnerSvg,s.isSpinning=!1,s.isFirstTime=function(){return e.isFirstTime},s.isSolidBackground=function(){return e.isSolidBackground},s.isFatalError=function(){return e.isFatalError},s.showAnimations=function(){return e.showAnimation},s.getProgressStyle=function(){if(s.buildHomePagePhase)return{width:360*s.progressInHomePage+"px"}},s.getMessage=function(){if(!s.isSpinning)return"";if(e.overrideMessage)return e.overrideMessage;var n=t.getSpinnerMessage();return s.visibleMessage&&s.visibleMessage===n?s.message:(s.buildHomePagePhase&&!n&&(s.isSpinning=!1,i(function(){l.find(".progress-bar-spinner").removeClass("progress-bar-shown")},1e3),i(function(){s.buildHomePagePhase=!1,e.setWithAnimation(!0),d.stop()},2e3)),s.visibleMessage=n,!s.buildHomePagePhase&&n&&(s.buildHomePagePhase=!0,i(function(){return l.find(".progress-bar-spinner").addClass("progress-bar-shown")})),n?(s.message=n.message,s.subtitle=n.currentStep?o.instant("spinner.step.step")+" "+n.currentStep+" "+o.instant("spinner.step.out-of")+" "+n.totalSteps:"",s.progressInHomePage=n.currentStep/(n.totalSteps||1)):s.message=c||h(),s.message)};var u=[o.instant("spinner.message.0"),o.instant("spinner.message.1"),o.instant("spinner.message.2")],p=[o.instant("spinner.message.3"),o.instant("spinner.message.4"),o.instant("spinner.message.5"),o.instant("spinner.message.6"),o.instant("spinner.message.7")],g=n.random(u.length);function h(){var e=s.isFirstTime()?u:p;return g=(g+1)%e.length,c=e[g]}d.stop(),e.register(d)}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);angular.module("siteGeneratorStaticsConsumerAppInternal").directive("simpleSpinner",["spinnerService","notification","$timeout","$translate",function(e,t,i,o){return{restrict:"E",replace:!0,templateUrl:"views/simple-spinner.html",link:function(t,i){var r={start:function(){s=(s+1)%a.length,t.message=a[s],document.body.classList.add("is-working"),i.show()},stop:function(){i.hide(),document.body.classList.remove("is-working")}};t.message="",t.isFatalError=function(){return e.isFatalError};var a=[o.instant("spinner.message.3"),o.instant("spinner.message.4"),o.instant("spinner.message.5"),o.instant("spinner.message.6"),o.instant("spinner.message.7")],s=n.random(a.length);r.stop(),e.register(r)}}}])},function(e,t,i){"use strict";angular.module("siteGeneratorStaticsConsumerAppInternal").directive("headerLayoutSolver",["visualValidationContainer",function(e){return{restrict:"A",link:function(t,i){e.initHeaderLayoutSolver(i),i.html("")}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(189);angular.module("siteGeneratorStaticsConsumerAppInternal").component("progressBar",{templateUrl:"views/progress-bar.html",controller:n.ProgressBar})},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),a=i(20),s=i(44),l=i(12),c=i(1),d=i(0),u=function(){function e(e,t,i,n,o,r,a,s,l,c,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H,O,_,D,$){var N=this;this.clientTopology=e,this.publishService=t,this.applicationState=i,this.tpaDiscovery=n,this.$window=o,this.$state=r,this.$sce=a,this.$scope=s,this.$document=l,this.storyServices=c,this.modelTree=u,this.$timeout=p,this.$q=g,this.flags=h,this.menuService=m,this.introManager=f,this.undoRedo=v,this.CcDialogBuilder=S,this.tpaService=y,this.pagesManager=T,this.sectionManager=b,this.$translate=I,this.notification=P,this.metaDataService=M,this.spinnerService=E,this.consumerBiLogger=w,this.CONSUMER_DIALOGS=C,this.staticsUrls=A,this.autoSaveNotifier=L,this.assistantManager=B,this.initService=k,this.anonService=H,this.siteState=O,this.consumerDialogs=_,this.consumerPublishService=D,this.signUpNotifier=$,this.managablePageSelected=!0,this.activeTab="",this.isAppReady=!1,this.afterPublishing=!1,this.showPublishAnimation=!1,this.timeToRetrySave=0,this.showSavingMessage=!1,this.showSavedMessage=!1,this.shouldShowManage=!1,this.lastSaveTime=Date.now(),this.DROPDOWN_STYLE_FOR_ASSISTANT="display: block !important; transform: translateX(-50%) !important; z-index: 10000000 !important;",this.onKeyDown=d.debounce(function(e){if(e.metaKey||e.ctrlKey)switch(String.fromCharCode(e.keyCode)){case"Z":if(!e.shiftKey){N.undoRedo.undo(!0);break}case"Y":N.undoRedo.redo(!0),e.preventDefault();break;case"V":if(e.shiftKey&&e.altKey){var t=N.storyServices.story.staticsVersion;t&&0!==t.toString().length||(t="local");var i=(N.flags.contentVersionId?N.flags.contentVersionId:N.storyServices.story.contentVersion)||"unspecified",n=N.flags.realSantaVersion;N.notification.show(N.$sce.trustAsHtml(N.$translate.instant("notifications.version-info",{staticsVersion:t,contentVersion:i,santaVersion:n}))),e.preventDefault()}break;case"F":if(e.shiftKey&&e.altKey){var o=(N.flags.lodash4?d.pickBy:d[String("pick")])(d.omit(N.flags,d.functions(N.flags)),d.identity),r=d.keys(o);N.$window.console.log(r),N.$window.console.log("Experiments has been saved to 'openExperiments', use 'copy(openExperiments)' to copy them to your clipboard"),N.$window.openExperiments=r;var a="Active flags: "+r.join(", ");N.notification.show(a),e.preventDefault()}}},500),this.initService.loaded().then(function(){return N.isAppReady=!0}),angular.element(this.$window).keydown(function(e){return N.onKeyDown(e)}),this.watchSave(),this.watchState(),this.activeTab=this.getActiveTab()}return e.$inject=["clientTopology","publishService","applicationState","tpaDiscovery","$window","$state","$sce","$scope","$document","storyServices","modelTree","$timeout","$q","flags","menuService","introManager","undoRedo","CcDialogBuilder","tpaService","pagesManager","sectionManager","$translate","notification","metaDataService","spinnerService","consumerBiLogger","CONSUMER_DIALOGS","staticsUrls","autoSaveNotifier","assistantManager","initService","anonService","siteState","consumerDialogs","consumerPublishService","signUpNotifier"],e.prototype.showManageDropdown=function(){var e=this;this.manageTimer||(this.manageTimer=setTimeout(function(){return e.consumerBiLogger.apps.manageDropdownListOpenOnHover()},1e3)),this.shouldShowManage=!0},e.prototype.hideManageDropdown=function(){this.manageTimer&&clearTimeout(this.manageTimer),this.manageTimer=null,this.shouldShowManage=!1},e.prototype.showSingleTpa=function(){return 1===d.size(this.getManageableTPAs())},e.prototype.singleTpa=function(){var e=this.getManageableTPAs();return e[Object.keys(e)[0]]},e.prototype.singleTpaType=function(){var e=this.getManageableTPAs();return Object.keys(e)[0]},e.prototype.showMultiTpa=function(){return d.size(this.getManageableTPAs())>1&&this.getManageableTPAs()},e.prototype.getManageableTPAs=function(){return this.tpaDiscovery.manageableTPAs},e.prototype.getRelevantTPANode=function(e){return this.tpaDiscovery.manageableTPAs[e].naiveNode},e.prototype.watchSave=function(){var e,t=this;this.$scope.$watch("$ctrl.autoSaveNotifier.savingState",function(i){"saving"===i?(t.showSavingMessage=!0,t.showSavedMessage=!1,t.timeToRetrySave=0,e&&t.$timeout.cancel(e)):null===t.autoSaveNotifier.saveRetryTime?(t.timeToRetrySave=0,e=t.$timeout(function(){t.showSavingMessage=!1,t.showSavedMessage=!0,e=t.$timeout(function(){t.showSavedMessage=!1,e=null},1500)},800)):(t.showSavingMessage=!1,t.showSavedMessage=!1)})},e.prototype.watchState=function(){var e=this;this.$scope.$watch(function(){return e.$state.$current&&e.$state.$current.name},function(){e.activeTab=e.getActiveTab()})},e.prototype.debugFeatures=function(){return this.flags.debugMode},e.prototype.startOver=function(){this.introManager.reset(),this.$state.go(r.STATES.INTRO,{reload:!0})},e.prototype.isPreviewDisplay=function(){return this.applicationState.isPreviewDisplay()},e.prototype.onCustomizeSelectedKit=function(){return this.applicationState.goToDesignKitMode()},e.prototype.openFonts=function(){this.applicationState.goToFontsPanel(c.BIOrigins.TopBar)},e.prototype.openNewColorationPanel=function(){this.consumerBiLogger.siteDesign.customizeDesignColorPaletteMode(c.BIOrigins.TopBar),this.applicationState.goToColorationPanel()},e.prototype.openAnimationPanel=function(){this.consumerBiLogger.siteDesign.openAnimationList(),this.applicationState.goToAnimationPanel(c.BIOrigins.TopBar)},e.prototype.showSiteDesignDropdown=function(){var e=this;this.designTimer||(this.designTimer=setTimeout(function(){return e.consumerBiLogger.siteDesign.designDropdownListOpenOnHover()},1e3)),this.isSiteDesignDropdownVisible=!0},e.prototype.hideSiteDesignDropdown=function(){this.designTimer&&clearTimeout(this.designTimer),this.designTimer=null,this.isSiteDesignDropdownVisible=!1},Object.defineProperty(e.prototype,"mobileMode",{get:function(){return this.applicationState.isInMobileEditMode()},enumerable:!0,configurable:!0}),e.prototype.shouldShowDropDownDesign=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDesignTopBarMenu")||this.isSiteDesignDropdownVisible&&!this.assistantManager.isInActiveTask()},e.prototype.shouldShowManageDropDown=function(){return this.shouldShowManage},e.prototype.getManageDropdownStyle=function(){return this.shouldShowManage?{display:"flex"}:{display:"none"}},e.prototype.getSiteDesignDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDesignTopBarMenu")?this.DROPDOWN_STYLE_FOR_ASSISTANT:this.isSiteDesignDropdownVisible&&!this.assistantManager.isInActiveTask()?"display: flex":"display: none"},e.prototype.onClickDesign=function(){this.consumerBiLogger.siteDesign.designPanelIsLoaded("header"),this.applicationState.goToDesignMode()},e.prototype.isManualSave=function(){return this.applicationState.isSupportStaffEditing()||this.flags.disableAutoSave},e.prototype.onManualSave=function(){this.undoRedo.manualSave()},e.prototype.shouldShowButtons=function(){return!this.flags.removeSpinnerAsStageReady||this.isAppReady},e.prototype.onClickPreview=function(){var e=this;this.consumerBiLogger.builder.topBarPreviewSiteClick("top bar"),this.spinnerService.waitForMe("goToPreview"),this.applicationState.goToPreview(!0).then(function(){e.consumerBiLogger.builder.topBarPreviewSiteSuccess(a.BIModeType.previewInBuilder),e.applicationState.isSupportStaffEditing()&&e.notification.show("toasters.preview-in-manual-save"),e.spinnerService.imDone("goToPreview")})},e.prototype.publishCompleteCB=function(){var e=this;this.metaDataService.getMetadata(this.storyServices.story.id,this.applicationState.setStoryMetadata.bind(this.applicationState),!0),this.applicationState.isPublishing=!1,this.showPublishAnimation=!0,this.afterPublishing=!0,this.$timeout(function(){e.showPublishAnimation=!1,e.afterPublishing=!1},1300)},e.prototype.publisher=function(){var e=this;this.applicationState.isPublishing=!0,this.consumerPublishService.publishStory().then(function(){e.consumerBiLogger.builder.publishSuccess(!1),e.publishCompleteCB()})},e.prototype.shouldShowPublishDialog=function(){return this.storyServices.story.popupConfigurations[s.PublishCongrats.PublishCongratsPopupKey]},e.prototype.onClickSave=function(){this.signUpNotifier.showSignUpPopup("onClickSave")},e.prototype.onSaveAsTemplate=function(){return n(this,void 0,void 0,function(){var e=this;return o(this,function(t){switch(t.label){case 0:return this.spinnerService.waitForMe("goToPreview"),[4,this.undoRedo.manualSave()];case 1:return t.sent(),[4,this.siteState.saveAsTemplate()];case 2:return t.sent(),[4,this.storyServices.story.saveAsTemplate().catch(function(t){e.consumerDialogs.showDialog(l.ConsumerDialogTypes.SAVE_AS_TEMPLATE_FAIL)})];case 3:return t.sent(),this.spinnerService.imDone("goToPreview"),[2]}})})},e.prototype.onClickPublish=function(e){var t=this;this.applicationState.goToBuilder(!0),this.showPublishAnimation=!1,this.consumerBiLogger.builder.topBarPublishSiteClick(a.BIModeType.builder),this.shouldShowPublishDialog()?this.publisher():this.CcDialogBuilder.show({biDialogName:"publish congrats",parent:this.$document.body,targetEvent:e,onComplete:function(){angular.element(".md-dialog-container").addClass("tour-modal")},template:'<md-dialog aria-label="Publish dialog" class="big-modal">    <publish-dialog></publish-dialog></md-dialog>',controller:["$scope",function(e){e.publisher=t.publisher.bind(t)}]}).then(function(){t.showPublishAnimation=!0,t.publishCompleteCB()})},e.prototype.getActiveTab=function(){var e="",t=[r.STATES.BUILDER_DESIGN,r.STATES.BUILDER_DESIGN_KITS,r.STATES.BUILDER_DESIGN_KIT,r.STATES.BUILDER_DESIGN_KIT_FONTS_NEW,r.STATES.BUILDER_DESIGN_KIT_COLORATION,r.STATES.BUILDER_DESIGN_KIT_COLORATION_ADVANCED,r.STATES.BUILDER_DESIGN_KIT_ANIMATIONS],i=[r.STATES.BUILDER_ADD_SECTION],n=[r.STATES.BUILDER_ADD_PAGE,r.STATES.BUILDER_SELECTED_PAGE,r.STATES.BUILDER_PAGES,r.STATES.BUILDER_PAGES_SEO],o=[r.STATES.BUILDER_STORY_PREVIEW];return t.indexOf(this.$state.$current.name)>-1?e="design":i.indexOf(this.$state.$current.name)>-1?e="add-section":n.indexOf(this.$state.$current.name)>-1?e="page-tab":o.indexOf(this.$state.$current.name)>-1&&(e="desktop-preview"),e},e.prototype.switchToNewTopBar=function(){this.flags.debug&&(this.flags.newTopBar=!this.flags.newTopBar,this.$window.document.body.setAttribute("data-experiment-new-top-bar","true"),console.log("newTopBar: ",this.flags.newTopBar))},e.prototype.openMainHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.home"),this.CONSUMER_DIALOGS.HOME_HELP),this.consumerBiLogger.builder.topBarHelpClick()},e.prototype.isInDesktopEditMode=function(){return this.applicationState.isInDesktopEditMode()},Object.defineProperty(e.prototype,"whilePublishing",{get:function(){return this.applicationState.isPublishing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnonymousUser",{get:function(){return this.anonService.isAnonymousUser()},enumerable:!0,configurable:!0}),e.prototype.isTemplatesUser=function(){return this.flags.addSaveAsTemplate&&this.applicationState.isTemplatesUser()},e.prototype.shouldShowPublish=function(){return!this.isAnonymousUser},e.ConnectDomainSource="site-connect",e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("topBarOld",{templateUrl:"views/top-bar/top-bar-old.html",controller:u})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(20),o=i(44),r=function(){function e(e,t,i,n,o,r,a,s,l,c,d){this.applicationState=e,this.publishService=t,this.consumerBiLogger=i,this.storyServices=n,this.CcDialogBuilder=o,this.metaDataService=r,this.$timeout=a,this.$document=s,this.consumerPublishService=l,this.flags=c,this.signUpNotifier=d,this.isPublishingFinished=!1,this.showPublishAnimation=!1}return e.$inject=["applicationState","publishService","consumerBiLogger","storyServices","CcDialogBuilder","metaDataService","$timeout","$document","consumerPublishService","flags","signUpNotifier"],e.prototype.publishCompleteCB=function(){var e=this;this.metaDataService.getMetadata(this.storyServices.story.id,this.applicationState.setStoryMetadata.bind(this.applicationState),!0),this.applicationState.isPublishing=!1,this.showPublishAnimation=!0,this.isPublishingFinished=!0,this.$timeout(function(){e.showPublishAnimation=!1,e.isPublishingFinished=!1},1300)},e.prototype.publisher=function(){var e=this;this.applicationState.isPublishing=!0,this.consumerPublishService.publishStory().then(function(){e.consumerBiLogger.builder.publishSuccess(!1),e.publishCompleteCB()})},e.prototype.shouldShowPublishDialog=function(){return this.storyServices.story.popupConfigurations[o.PublishCongrats.PublishCongratsPopupKey]},e.prototype.onClickPublish=function(e){var t=this;this.flags.newPreviewMode||this.applicationState.goToBuilder(!0);var i=this.applicationState.isPreviewDisplay()?this.applicationState.isFirstTimePreview()?n.BIModeType.previewInWelcomeTour:n.BIModeType.previewInBuilder:n.BIModeType.builder;this.showPublishAnimation=!1,this.consumerBiLogger.builder.topBarPublishSiteClick(i),this.shouldShowPublishDialog()?this.publisher():this.CcDialogBuilder.show({biDialogName:"publish congrats",parent:this.$document.body,targetEvent:e,onComplete:function(){angular.element(".md-dialog-container").addClass("tour-modal")},template:'<md-dialog aria-label="Publish dialog" class="big-modal">    <publish-dialog></publish-dialog></md-dialog>',controller:["$scope",function(e){e.publisher=t.publisher.bind(t)}]}).then(function(){t.showPublishAnimation=!0,t.publishCompleteCB()})},Object.defineProperty(e.prototype,"isPublishing",{get:function(){return this.applicationState.isPublishing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isColorsInverted",{get:function(){return this.inverted},enumerable:!0,configurable:!0}),e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("publishButtonOld",{templateUrl:"views/top-bar/publish-button-old.html",controller:r,bindings:{inverted:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=function(){function e(e,t,i,n,o,r,a,s,l,c){this.menuService=e,this.pagesManager=t,this.consumerBiLogger=i,this.flags=n,this.applicationState=o,this.assistantManager=r,this.$state=a,this.storyServices=s,this.modelTree=l,this.tpaService=c,this.managablePageSelected=!0,this.isPagesDropdownVisible=!1}return e.$inject=["menuService","pagesManager","consumerBiLogger","flags","applicationState","assistantManager","$state","storyServices","modelTree","tpaService"],e.prototype.getSelectedPageName=function(){var e=this.applicationState.getPageInFocus();return this.managablePageSelected=e.managable,e.name},e.prototype.showPagesDropdown=function(){},e.prototype.hidePagesDropdown=function(){},e.prototype.handlePagesDropDownClick=function(e){this.hidePagesDropdown(),this.onClickPages()},e.prototype.onClickPages=function(){var e=this.storyServices.story.selectedPage;e?this.applicationState.goToPage(e):this.applicationState.goToPageManager()},e.prototype.getCssClassesForPageTab=function(){return{active:"page-tab"===this.activeTab}},e.prototype.shouldShowDropDownDesign=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openPagesTopBarMenu")||this.isPagesDropdownVisible},e.prototype.getPagesDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openPagesTopBarMenu")?{display:"block"}:this.isPagesDropdownVisible?{display:"flex"}:{display:"none"}},e.prototype.goToPage=function(e,t){var i=this,o=this,r=o.$state,a=o.applicationState,s=o.storyServices,l=o.modelTree,c=o.tpaService,d=o.consumerBiLogger,u=o.pagesManager;if(s.story.selectedPage!==e.id){var p=l.getNodeById(e.id),g=c.getAppIdByPageNode(p);d.pagesManager.clickOnPage(e.name,g,"second topbar"),a.goToBuilder(),u.goToPage(e.id).then(function(){i.setSelectedPage.bind(i)(e.id),r.current.name===n.STATES.BUILDER_PAGES_SEO&&r.go("^"),i.consumerBiLogger.pagesManager.gotoPageSuccess(e.name,g,"second topbar")})}},e.prototype.setSelectedPage=function(e){this.applicationState.clearContentFocus(),this.storyServices.story.selectedPage=e,this.storyServices.emitChangingPage()},e.prototype.shouldShowHomeIcon=function(){return this.flags.mergedHeader&&this.isPageHome()},e.prototype.isPageHome=function(e){return void 0===e&&(e=this.applicationState.getPageNodeInFocus()),e&&this.modelTree.isHomePage(e)},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("pagesPanelDropdown",{templateUrl:"views/top-bar/pages-panel-dropdown/pages-panel-dropdown.html",controller:o,bindings:{activeTab:"<"}})},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(27),r=i(60),a=i(12),s=function(e){function t(t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b){var I=e.call(this)||this;return I.clientTopology=t,I.menuService=i,I.pagesManager=n,I.consumerBiLogger=o,I.flags=r,I.applicationState=a,I.assistantManager=s,I.$state=l,I.storyServices=c,I.modelTree=d,I.$document=u,I.CcDialogBuilder=p,I.tpaService=g,I.CONSUMER_DIALOGS=h,I.consumerDialogs=m,I.$window=f,I.staticsUrls=v,I.$translate=S,I.publishService=y,I.initService=T,I.$timeout=b,I.siteInitialized=!1,I.initService.loaded().then(function(){I.siteInitialized=!0}),I}return n(t,e),t.$inject=["clientTopology","menuService","pagesManager","consumerBiLogger","flags","applicationState","assistantManager","$state","storyServices","modelTree","$document","CcDialogBuilder","tpaService","CONSUMER_DIALOGS","consumerDialogs","$window","staticsUrls","$translate","publishService","initService","$timeout"],t.prototype.isSitePublished=function(){return!!this.siteInitialized&&this.publishService.isSitePublished()},t.prototype.getMetadata=function(){return this.applicationState.getStoryMetadata()},Object.defineProperty(t.prototype,"showBusinessInfo",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showChangeBusinessDetails",{get:function(){return this.flags.changeBusinessDetails},enumerable:!0,configurable:!0}),t.prototype.onClickMyBusinessInfo=function(e){this.consumerBiLogger.builder.topBarEditBusinessInfoClick(),this.CcDialogBuilder.show({parent:this.$document.body,targetEvent:e,biDialogName:this.CONSUMER_DIALOGS.BUSINESS_DETAILS,template:'<md-dialog aria-label="Business details" class="big-modal"><business-info-modal></business-info-modal></md-dialog>'})},t.prototype.isManualSave=function(){return this.applicationState.isSupportStaffEditing()||this.flags.disableAutoSave},t.prototype.onClickConnectDomain=function(e){this.consumerBiLogger.builder.topBarConnectDomainClick(),this.CcDialogBuilder.show({parent:this.$document.body,targetEvent:e,template:'<md-dialog aria-label="Publish dialog" class="big-modal">\n                   <publish-dialog screen="connect" source="'+r.TopBar.ConnectDomainSource+'"></publish-dialog>\n                 </md-dialog>'})},t.prototype.onClickMyDashboard=function(){this.consumerBiLogger.builder.topBarGoToMyDashboard(),this.openExternalLink("dashboardUri")},t.prototype.onClickSiteSettings=function(){this.consumerBiLogger.builder.topBarGoToSiteSettings(),this.openExternalLink("siteSettingsUri")},t.prototype.onClickStartNewSite=function(){this.consumerBiLogger.builder.topBarCreateNewSite();this.$window.open("https://www.wix.com/new/vertical?ref=ADI","_blank")},t.prototype.onClickViewLiveSite=function(){this.consumerBiLogger.builder.topBarViewSiteClick(),this.openExternalLink("publicUri")},t.prototype.onClickFeedback=function(){this.consumerBiLogger.builder.topBarGiveFeedbackClick();var e=this.flags.newADIFeedback?"https://www.wix.com/adi-forum/wix-adi":this.$translate.instant("help.give-feedback");this.$window.open(e,"_blank")},t.prototype.onClickSEOWiz=function(){this.consumerBiLogger.builder.topBarSeoPanelGetFoundOnGoogleClick("topbar"),this.$window.open(this.staticsUrls.getSeoWizUrl("ADI_SITE_MENU"),"_blank")},t.prototype.onClickChangeBusinessDetails=function(){this.consumerDialogs.showDialog(a.ConsumerDialogTypes.CHANGE_BUSINESS_DETAILS_POPUP)},t.prototype.openExternalLink=function(e){var t=this.getStoryMetadataByKey(e);t&&this.$window.open(t,"_blank")},t.prototype.getStoryMetadataByKey=function(e){var t=this.getMetadata();return t&&t[e]},t.prototype.showDropDown=function(){return this.handleOpened(),e.prototype.showDropDown.call(this)},t.prototype.hideDropDown=function(){return this.handleClosed(),e.prototype.hideDropDown.call(this)},t.prototype.handleOpened=function(){var e=this;this.reportBiMenuOpenedPromise=this.$timeout(function(){e.reportBiMenuOpenedPromise=null,e.consumerBiLogger.builder.topBarSiteMenuDialogOpen()},2e3)},t.prototype.handleClosed=function(){this.reportBiMenuOpenedPromise&&this.$timeout.cancel(this.reportBiMenuOpenedPromise)},t.prototype.showDropDownViaAssistantTask=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDropdown")},t.prototype.isShowDropDown=function(){return e.prototype.isShowDropDown.call(this)||this.showDropDownViaAssistantTask()},t.prototype.getInlineCustomStyle=function(){if(this.showDropDownViaAssistantTask())return"transform: translateX(-50%) !important; z-index: 10000000 !important;"},t}(o.BaseDropDown);angular.module("siteGeneratorStaticsConsumerAppInternal").component("siteDropdownOld",{templateUrl:"views/top-bar/site-dropdown/site-dropdown-old.html",controller:s})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(2),r=n.STATES,a=function(){function e(e,t,i,n,r,a,s,l,c){var d=this;this.assistantManager=e,this.consumerBiLogger=t,this.applicationState=i,this.storyServices=n,this.tpaService=r,this.initService=a,this.$state=s,this.overlayManager=l,this.flags=c,this.isAppReady=!1,this.isAddSectionDropdownVisible=!1,this.DROPDOWN_STYLE_FOR_ASSISTANT="display: block !important; transform: translateX(-50%) !important; z-index: 10000000 !important;",this.isImportPageAvailable=void 0,this.getCssClassesForAddSectionTab=function(){return{active:"add-section"===d.activeTab,"disabled-button":d.isCurrentPageSinglePostBlog()}},this.initService.loaded().then(function(){d.isAppReady=!0,d.isImportPageAvailable=!!(d.flags.wizSiteConverter&&d.storyServices.story.importedSite&&d.storyServices.story.importedSite.siteAddress)}),c.stopExcessiveDSCalls&&(this.updateIsCurrentPageSinglePostBlog(),o.PubSub.subscribe(o.events.PAGE_CHANGED,function(){return d.updateIsCurrentPageSinglePostBlog()}))}return e.$inject=["assistantManager","consumerBiLogger","applicationState","storyServices","tpaService","initService","$state","overlayManager","flags"],e.prototype.updateIsCurrentPageSinglePostBlog=function(){this._isCurrentPageSinglePostBlog=this.tpaService.isCurrentPageIsBlogSinglePost()},e.prototype.showAddSectionDropdown=function(){var e=this;this.timer||(this.timer=setTimeout(function(){return e.consumerBiLogger.builder.topBarAddDropdownListOpenOnHover()},1e3)),this.isAddSectionDropdownVisible=!0},e.prototype.hideAddSectionDropdown=function(){this.timer&&clearTimeout(this.timer),this.timer=null,this.isAddSectionDropdownVisible=!1},e.prototype.shouldShowDropDownDesign=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openAddTopBarMenu")||this.isAddSectionDropdownVisible&&!this.assistantManager.isInActiveTask()},e.prototype.getAddSectionDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openAddTopBarMenu")?this.DROPDOWN_STYLE_FOR_ASSISTANT:this.isAddSectionDropdownVisible&&!this.assistantManager.isInActiveTask()?"display: flex":"display: none"},e.prototype.isCurrentPageSinglePostBlog=function(){if(this.isAppReady)return this.flags.stopExcessiveDSCalls?this._isCurrentPageSinglePostBlog:this.tpaService.isCurrentPageIsBlogSinglePost()},e.prototype.onClickAddSection=function(){this.isCurrentPageSinglePostBlog()||(this.overlayManager.setAddTargetKnown(!1),this.consumerBiLogger.sectionManagement.addSectionClick("second topbar"),this.applicationState.goToAddSectionMode())},e.prototype.onClickAddPage=function(){this.flags.keepPagesPanelOpen&&(this.applicationState.shouldReopenPagesPanel=this.shouldKeepPagesPanelOpen()),this.consumerBiLogger.pagesManager.addPageClick("second topbar"),this.applicationState.goToAddPageMode()},e.prototype.onClickAddImportedPage=function(){this.applicationState.goToImportPagePanel()},e.prototype.onClickAddApp=function(){this.applicationState.goToAddAppMode()},e.prototype.shouldKeepPagesPanelOpen=function(){return!(!this.$state.is(r.BUILDER_PAGES)&&!this.$state.is(r.BUILDER_SELECTED_PAGE))},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("addTabDropdownOld",{templateUrl:"views/top-bar/add-tab-dropdown/add-tab-dropdown-old.html",controller:a,bindings:{activeTab:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(60);angular.module("siteGeneratorStaticsConsumerAppInternal").component("topBar",{templateUrl:"views/top-bar/top-bar.html",controller:n.TopBar,bindings:{topBarState:"<"}})},function(e,t,i){"use strict";var n=function(){function e(){}return e.prototype.switchToDesktopEditMode=function(){this.onSelect({mode:"desktop"})},e.prototype.switchToMobileEditMode=function(){this.onSelect({mode:"mobile"})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("displayModeInline",{templateUrl:"views/top-bar/display-mode-inline.html",controller:n,bindings:{mode:"<",onSelect:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.undoRedo=e}return e.$inject=["undoRedo"],e.prototype.onUndo=function(){this.undoRedo.undo(!0)},e.prototype.onRedo=function(){this.undoRedo.redo(!0)},Object.defineProperty(e.prototype,"canUndo",{get:function(){return this.undoRedo.canUndo()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this.undoRedo.canRedo()},enumerable:!0,configurable:!0}),e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("undoRedoControls",{templateUrl:"views/top-bar/undo-redo-controls.html",controller:n})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(20),o=function(){function e(e){this.consumerBiLogger=e}return e.$inject=["consumerBiLogger"],e.prototype.onClickBackButton=function(){this.consumerBiLogger.builder.previewSiteClosePage(n.BIModeType.previewInWelcomeTour,"back")},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("backButton",{templateUrl:"views/top-bar/back-button.html",controller:o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=function(){function e(e,t,i,n){this.applicationState=e,this.storyServices=t,this.$translate=i,this.$state=n}return e.$inject=["applicationState","storyServices","$translate","$state"],e.prototype.onClickPages=function(){var e=this.storyServices.story.selectedPage;e?this.applicationState.goToPage(e):this.applicationState.goToPageManager()},e.prototype.isPagesPanelOpen=function(){return[n.STATES.BUILDER_ADD_PAGE,n.STATES.BUILDER_SELECTED_PAGE,n.STATES.BUILDER_PAGES,n.STATES.BUILDER_PAGES_SEO].indexOf(this.$state.$current.name)>-1},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("pagesTab",{templateUrl:"views/top-bar/pages-tab.html",controller:o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),o=function(){function e(e,t,i,n){this.previewScale=e,this.applicationState=t,this.consumerBiLogger=i,this.flags=n,this.onZoomOut=this.zoomOut,this.onZoomIn=this.zoomIn}return e.$inject=["previewScale","applicationState","consumerBiLogger","flags"],Object.defineProperty(e.prototype,"canZoomOut",{get:function(){return!(this.flags.largerStage&&this.previewScale.getScale()<=n.PreviewScale.MinScale)&&(this.isZoomEnabled()&&this.previewScale.getScaleFactor()>n.PreviewScale.MinScaleFactor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canZoomIn",{get:function(){return this.isZoomEnabled()&&this.previewScale.getScaleFactor()<n.PreviewScale.MaxScaleFactor},enumerable:!0,configurable:!0}),e.prototype.zoomOut=function(){this.canZoomOut&&(this.previewScale.zoomOut(!0,this.toggleMode?4:1),this.consumerBiLogger.builder.zoomInOut("zoom out",Math.round(100*this.previewScale.getScaleFactor())))},e.prototype.zoomIn=function(){this.canZoomIn&&(this.previewScale.zoomIn(!0,this.toggleMode?4:1),this.consumerBiLogger.builder.zoomInOut("zoom in",Math.round(100*this.previewScale.getScaleFactor())))},e.prototype.isZoomEnabled=function(){return!this.applicationState.isOnAddState()&&this.applicationState.isInDesktopEditMode()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("zoomControls",{templateUrl:"views/top-bar/zoom-controls.html",controller:o,bindings:{toggleMode:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i){this.tpaDiscovery=e,this.applicationState=t,this.consumerBiLogger=i,this.shouldShowManage=!1}return e.$inject=["tpaDiscovery","applicationState","consumerBiLogger"],e.prototype.showDropdown=function(){var e=this;this.timer||(this.timer=setTimeout(function(){return e.consumerBiLogger.apps.manageDropdownListOpenOnHover()},1e3)),this.shouldShowManage=!0},e.prototype.hideDropdown=function(){this.timer&&clearTimeout(this.timer),this.timer=null,this.shouldShowManage=!1},e.prototype.isVisible=function(){return n.size(this.tpaDiscovery.manageableTPAs)>0},e.prototype.showSingleTpa=function(){return this.getManageableTPAs()&&1===n.size(this.getManageableTPAs())},e.prototype.singleTpa=function(){var e=this.getManageableTPAs();return e[Object.keys(e)[0]]},e.prototype.singleTpaType=function(){var e=this.getManageableTPAs();return Object.keys(e)[0]},e.prototype.hasTpa=function(){return this.getManageableTPAs()&&n.size(this.getManageableTPAs())>0},e.prototype.showMultiTpa=function(){return this.getManageableTPAs()&&n.size(this.getManageableTPAs())>1},e.prototype.getManageableTPAs=function(){return this.tpaDiscovery.manageableTPAs},e.prototype.getRelevantTPANode=function(e){return this.tpaDiscovery.manageableTPAs[e].naiveNode},e.prototype.shouldShowManageDropDown=function(){return this.shouldShowManage},e.prototype.getManageDropdownStyle=function(){return this.shouldShowManage?{display:"flex"}:{display:"none"}},e.prototype.onAllAppsClick=function(){this.applicationState.goToAddAppMode()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("manageTpa",{templateUrl:"views/top-bar/manage-tpa.html",controller:o,bindings:{alwaysDropdown:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=function(){function e(e,t,i){this.applicationState=e,this.consumerBiLogger=t,this.assistantManager=i,this.DROPDOWN_STYLE_FOR_ASSISTANT="display: block !important; transform: translateX(-50%) !important; z-index: 10000000 !important;"}return e.$inject=["applicationState","consumerBiLogger","assistantManager"],e.prototype.showSiteDesignDropdown=function(){var e=this;this.timer||(this.timer=setTimeout(function(){return e.consumerBiLogger.siteDesign.designDropdownListOpenOnHover()},1e3)),this.isSiteDesignDropdownVisible=!0},e.prototype.hideSiteDesignDropdown=function(){this.timer&&clearTimeout(this.timer),this.timer=null,this.isSiteDesignDropdownVisible=!1},e.prototype.openNewColorationPanel=function(){this.consumerBiLogger.siteDesign.customizeDesignColorPaletteMode(n.BIOrigins.TopBar),this.applicationState.goToColorationPanel()},e.prototype.onCustomizeSelectedKit=function(){return this.applicationState.goToDesignKitMode()},e.prototype.openFonts=function(){this.applicationState.goToFontsPanel(n.BIOrigins.TopBar)},e.prototype.shouldShowDropDownDesign=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDesignTopBarMenu")||this.isSiteDesignDropdownVisible&&!this.assistantManager.isInActiveTask()},e.prototype.onClickDesign=function(){this.consumerBiLogger.siteDesign.designPanelIsLoaded("header"),this.applicationState.goToDesignMode()},e.prototype.openAnimationPanel=function(){this.consumerBiLogger.siteDesign.openAnimationList(),this.applicationState.goToAnimationPanel(n.BIOrigins.TopBar)},e.prototype.getSiteDesignDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDesignTopBarMenu")?this.DROPDOWN_STYLE_FOR_ASSISTANT:this.isSiteDesignDropdownVisible&&!this.assistantManager.isInActiveTask()?"display: flex":"display: none"},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("siteDesignDropdown",{templateUrl:"views/top-bar/site-design-dropdown.html",controller:o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(20),o=i(44),r=function(){function e(e,t,i,n,o,r,a,s,l,c,d){this.applicationState=e,this.publishService=t,this.consumerBiLogger=i,this.storyServices=n,this.CcDialogBuilder=o,this.metaDataService=r,this.consumerPublishService=a,this.$timeout=s,this.$document=l,this.flags=c,this.signUpNotifier=d,this.isPublishingFinished=!1,this.showPublishAnimation=!1}return e.$inject=["applicationState","publishService","consumerBiLogger","storyServices","CcDialogBuilder","metaDataService","consumerPublishService","$timeout","$document","flags","signUpNotifier"],e.prototype.publishCompleteCB=function(){var e=this;this.metaDataService.getMetadata(this.storyServices.story.id,this.applicationState.setStoryMetadata.bind(this.applicationState),!0),this.applicationState.isPublishing=!1,this.showPublishAnimation=!0,this.isPublishingFinished=!0,this.$timeout(function(){e.showPublishAnimation=!1,e.isPublishingFinished=!1},1300)},e.prototype.publisher=function(){var e=this;this.applicationState.isPublishing=!0,this.consumerPublishService.publishStory().then(function(){e.consumerBiLogger.builder.publishSuccess(!1),e.publishCompleteCB()})},e.prototype.shouldShowPublishDialog=function(){return this.storyServices.story.popupConfigurations[o.PublishCongrats.PublishCongratsPopupKey]},e.prototype.onClickPublish=function(e){var t=this;this.flags.newPreviewMode||this.applicationState.goToBuilder(!0);var i=this.applicationState.isPreviewDisplay()?this.applicationState.isFirstTimePreview()?n.BIModeType.previewInWelcomeTour:n.BIModeType.previewInBuilder:n.BIModeType.builder;this.showPublishAnimation=!1,this.consumerBiLogger.builder.topBarPublishSiteClick(i),this.shouldShowPublishDialog()?this.publisher():this.CcDialogBuilder.show({biDialogName:"publish congrats",parent:this.$document.body,targetEvent:e,onComplete:function(){angular.element(".md-dialog-container").addClass("tour-modal")},template:'<md-dialog aria-label="Publish dialog" class="big-modal">    <publish-dialog></publish-dialog></md-dialog>',controller:["$scope",function(e){e.publisher=t.publisher.bind(t)}]}).then(function(){t.showPublishAnimation=!0,t.publishCompleteCB()})},Object.defineProperty(e.prototype,"isPublishing",{get:function(){return this.applicationState.isPublishing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isColorsInverted",{get:function(){return this.inverted},enumerable:!0,configurable:!0}),e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("publishButton",{templateUrl:"views/top-bar/publish-button.html",controller:r,bindings:{inverted:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.accountManager=e,this.consumerBiLogger=t}return e.$inject=["accountManager","consumerBiLogger"],e.prototype.$onInit=function(){var e=this;this.accountManager.getUserDetails().then(function(t){e.accountDetails=t})},e.prototype.showDefaultProfileImage=function(){return!this.accountDetails||!this.accountDetails.userHasProfileImage},e.prototype.showDropdown=function(){this.isDropdownVisible||(this.isDropdownVisible=!0,this.consumerBiLogger.builder.topBarAccountMenuDialogOpen())},e.prototype.hideDropdown=function(){this.isDropdownVisible=!1},e.prototype.shouldShowAccountDropdown=function(){return this.isDropdownVisible},e.prototype.onMySitesClick=function(){this.accountManager.onMySitesClick()},e.prototype.onFeedbackClick=function(){this.accountManager.onFeedbackClick()},e.prototype.onNewSiteClick=function(){this.accountManager.onNewSiteClick()},e.prototype.onSettingsClick=function(){this.accountManager.onSettingsClick()},e.prototype.onPaymentsClick=function(){this.accountManager.onPaymentsClick()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("accountMenu",{templateUrl:"views/top-bar/account-menu.html",controller:n})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(2),r=function(){function e(e,t,i,n,r,a,s,l,c){var d=this;this.assistantManager=e,this.consumerBiLogger=t,this.applicationState=i,this.storyServices=n,this.tpaService=r,this.initService=a,this.$state=s,this.overlayManager=l,this.flags=c,this.isAppReady=!1,this.isAddSectionDropdownVisible=!1,this.DROPDOWN_STYLE_FOR_ASSISTANT="display: block !important; transform: translateX(-50%) !important; z-index: 10000000 !important;",this.isImportPageAvailable=void 0,this.getCssClassesForAddSectionTab=function(){return{active:"add-section"===d.activeTab,"disabled-button":d.isCurrentPageSinglePostBlog()}},this.initService.loaded().then(function(){d.isAppReady=!0,d.isImportPageAvailable=!!(d.flags.wizSiteConverter&&d.storyServices.story.importedSite&&d.storyServices.story.importedSite.siteAddress)}),c.stopExcessiveDSCalls&&(this.updateIsCurrentPageSinglePostBlog(),o.PubSub.subscribe(o.events.PAGE_CHANGED,function(){return d.updateIsCurrentPageSinglePostBlog()}))}return e.$inject=["assistantManager","consumerBiLogger","applicationState","storyServices","tpaService","initService","$state","overlayManager","flags"],e.prototype.updateIsCurrentPageSinglePostBlog=function(){this._isCurrentPageSinglePostBlog=this.tpaService.isCurrentPageIsBlogSinglePost()},e.prototype.showAddSectionDropdown=function(){var e=this;this.timer||(this.timer=setTimeout(function(){return e.consumerBiLogger.builder.topBarAddDropdownListOpenOnHover()},1e3)),this.isAddSectionDropdownVisible=!0},e.prototype.hideAddSectionDropdown=function(){this.timer&&clearTimeout(this.timer),this.timer=null,this.isAddSectionDropdownVisible=!1},e.prototype.shouldShowDropDownDesign=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openAddTopBarMenu")||this.isAddSectionDropdownVisible&&!this.assistantManager.isInActiveTask()},e.prototype.getAddSectionDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openAddTopBarMenu")?this.DROPDOWN_STYLE_FOR_ASSISTANT:this.isAddSectionDropdownVisible&&!this.assistantManager.isInActiveTask()?"display: flex":"display: none"},e.prototype.isCurrentPageSinglePostBlog=function(){if(this.isAppReady)return this.flags.stopExcessiveDSCalls?this._isCurrentPageSinglePostBlog:this.tpaService.isCurrentPageIsBlogSinglePost()},e.prototype.onClickAddSection=function(){this.isCurrentPageSinglePostBlog()||(this.overlayManager.setAddTargetKnown(!1),this.consumerBiLogger.sectionManagement.addSectionClick("second topbar"),this.applicationState.goToAddSectionMode())},e.prototype.onClickAddPage=function(){this.flags.keepPagesPanelOpen&&(this.applicationState.shouldReopenPagesPanel=this.shouldKeepPagesPanelOpen()),this.consumerBiLogger.pagesManager.addPageClick("second topbar"),this.applicationState.goToAddPageMode()},e.prototype.onClickAddImportedPage=function(){this.applicationState.goToImportPagePanel()},e.prototype.onClickAddApp=function(){this.applicationState.goToAddAppMode()},e.prototype.shouldKeepPagesPanelOpen=function(){return!(!this.$state.is(n.STATES.BUILDER_PAGES)&&!this.$state.is(n.STATES.BUILDER_SELECTED_PAGE))},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("addTabDropdown",{templateUrl:"views/top-bar/add-tab-dropdown/add-tab-dropdown.html",controller:r,bindings:{activeTab:"<"}})},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(27),r=i(60),a=i(12),s=function(e){function t(t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I){var P=e.call(this)||this;return P.clientTopology=t,P.menuService=i,P.pagesManager=n,P.consumerBiLogger=o,P.flags=r,P.applicationState=a,P.assistantManager=s,P.$state=l,P.storyServices=c,P.modelTree=d,P.$document=u,P.CcDialogBuilder=p,P.tpaService=g,P.CONSUMER_DIALOGS=h,P.consumerDialogs=m,P.$window=f,P.staticsUrls=v,P.$translate=S,P.publishService=y,P.initService=T,P.accountManager=b,P.$timeout=I,P.siteInitialized=!1,P.initService.loaded().then(function(){P.siteInitialized=!0}),P}return n(t,e),t.$inject=["clientTopology","menuService","pagesManager","consumerBiLogger","flags","applicationState","assistantManager","$state","storyServices","modelTree","$document","CcDialogBuilder","tpaService","CONSUMER_DIALOGS","consumerDialogs","$window","staticsUrls","$translate","publishService","initService","accountManager","$timeout"],t.prototype.isSitePublished=function(){return!!this.siteInitialized&&this.publishService.isSitePublished()},t.prototype.getMetadata=function(){return this.applicationState.getStoryMetadata()},Object.defineProperty(t.prototype,"showBusinessInfo",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showChangeBusinessDetails",{get:function(){return this.flags.changeBusinessDetails},enumerable:!0,configurable:!0}),t.prototype.onClickMyBusinessInfo=function(e){this.consumerBiLogger.builder.topBarEditBusinessInfoClick(),this.CcDialogBuilder.show({parent:this.$document.body,targetEvent:e,biDialogName:this.CONSUMER_DIALOGS.BUSINESS_DETAILS,template:'<md-dialog aria-label="Business details" class="big-modal"><business-info-modal></business-info-modal></md-dialog>'})},t.prototype.isManualSave=function(){return this.applicationState.isSupportStaffEditing()||this.flags.disableAutoSave},t.prototype.onClickConnectDomain=function(e){this.consumerBiLogger.builder.topBarConnectDomainClick(),this.CcDialogBuilder.show({parent:this.$document.body,targetEvent:e,template:'<md-dialog aria-label="Publish dialog" class="big-modal">\n                   <publish-dialog screen="connect" source="'+r.TopBar.ConnectDomainSource+'"></publish-dialog>\n                 </md-dialog>'})},t.prototype.onClickMyDashboard=function(){this.consumerBiLogger.builder.topBarGoToMyDashboard(),this.openExternalLink("dashboardUri")},t.prototype.onClickSiteSettings=function(){this.consumerBiLogger.builder.topBarGoToSiteSettings(),this.openExternalLink("siteSettingsUri")},t.prototype.onClickSiteHistory=function(){var e="https://www.wix.com/my-account/sites/"+this.storyServices.metaSiteId+"/history/";this.$window.open(e,"_blank")},t.prototype.onClickStartNewSite=function(){this.consumerBiLogger.builder.topBarCreateNewSite();this.$window.open("https://www.wix.com/new/vertical?ref=ADI","_blank")},t.prototype.onClickViewLiveSite=function(){this.consumerBiLogger.builder.topBarViewSiteClick(),this.openExternalLink("publicUri")},t.prototype.onClickFeedback=function(){this.consumerBiLogger.builder.topBarGiveFeedbackClick();var e=this.flags.newADIFeedback?"https://www.wix.com/adi-forum/wix-adi":this.$translate.instant("help.give-feedback");this.$window.open(e,"_blank")},t.prototype.onMySitesClick=function(){this.accountManager.onMySitesClick()},t.prototype.onNewSiteClick=function(){this.accountManager.onNewSiteClick()},t.prototype.onClickSEOWiz=function(){this.consumerBiLogger.builder.topBarSeoPanelGetFoundOnGoogleClick("topbar"),this.$window.open(this.staticsUrls.getSeoWizUrl("ADI_SITE_MENU"),"_blank")},t.prototype.onClickNews=function(){this.$window.open("https://www.wix.com/release/notes/wix-adi","_blank")},t.prototype.onClickChangeBusinessDetails=function(){this.consumerDialogs.showDialog(a.ConsumerDialogTypes.CHANGE_BUSINESS_DETAILS_POPUP)},t.prototype.openExternalLink=function(e){var t=this.getStoryMetadataByKey(e);t&&this.$window.open(t,"_blank")},t.prototype.getStoryMetadataByKey=function(e){var t=this.getMetadata();return t&&t[e]},t.prototype.showDropDown=function(){return this.handleOpened(),e.prototype.showDropDown.call(this)},t.prototype.hideDropDown=function(){return this.handleClosed(),e.prototype.hideDropDown.call(this)},t.prototype.handleOpened=function(){var e=this;this.reportBiMenuOpenedPromise=this.$timeout(function(){e.reportBiMenuOpenedPromise=null,e.consumerBiLogger.builder.topBarSiteMenuDialogOpen()},2e3)},t.prototype.handleClosed=function(){this.reportBiMenuOpenedPromise&&this.$timeout.cancel(this.reportBiMenuOpenedPromise)},t.prototype.showDropDownViaAssistantTask=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDropdown")},t.prototype.isShowDropDown=function(){return e.prototype.isShowDropDown.call(this)||this.showDropDownViaAssistantTask()},t.prototype.getInlineCustomStyle=function(){if(this.showDropDownViaAssistantTask())return"transform: translateX(-50%) !important; z-index: 10000000 !important;"},t}(o.BaseDropDown);angular.module("siteGeneratorStaticsConsumerAppInternal").component("siteDropdown",{templateUrl:"views/top-bar/site-dropdown/site-dropdown.html",controller:s})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=function(){function e(e){this.goToEditorService=e}return e.$inject=["goToEditorService"],e.prototype.goToEditor=function(){this.goToEditorService.launchDialog(n.BIOrigins.TopBar)},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("goToEditorLink",{templateUrl:"views/top-bar/site-dropdown/go-to-editor-link.html",controller:o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=function(){function e(e){this.goToEditorService=e}return e.$inject=["goToEditorService"],e.prototype.goToEditor=function(){this.goToEditorService.launchDialog(n.BIOrigins.TopBar)},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("goToEditorLinkOld",{templateUrl:"views/top-bar/site-dropdown/go-to-editor-link-old.html",controller:o})},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,i,n,o){var r=e.call(this)||this;return r.saleService=t,r.consumerBiLogger=i,r.$timeout=n,r.flags=o,r}return n(t,e),t.$inject=["saleService","consumerBiLogger","$timeout","flags"],t.prototype.showDropDown=function(){var t=this;e.prototype.showDropDown.call(this),!this.flags.newDealerApi||this.upgradeEventWasSent||this.isTimeoutActive||(this.isTimeoutActive=!0,this.$timeout(function(){t.isTimeoutActive=!1,e.prototype.isShowDropDown.call(t)&&(t.consumerBiLogger.dialogs.upgradeBannerIsDisplayed(t.saleService.isSale()?"upgrade-sale":"upgrade-default"),t.upgradeEventWasSent=!0)},2e3))},t}(i(27).BaseDropDown);angular.module("siteGeneratorStaticsConsumerAppInternal").component("upgradeTabPopup",{templateUrl:"views/top-bar/upgrade-tab-popup/upgrade-tab-popup.html",controller:o,bindings:{metaSiteId:"<"}})},function(e,t,i){"use strict";angular.module("siteGeneratorStaticsConsumerAppInternal").component("upgradePopupDefault",{templateUrl:"views/top-bar/upgrade-tab-popup/upgrade-popup-default.html",bindings:{metaSiteId:"="}})},function(e,t,i){"use strict";angular.module("siteGeneratorStaticsConsumerAppInternal").component("upgradePopupSeasonalCampaign",{templateUrl:"views/top-bar/upgrade-tab-popup/upgrade-popup-seasonal-campaign.html",bindings:{metaSiteId:"=",discount:"="}})},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(27),r=i(187),a=i(20),s=i(12),l=function(e){function t(t,i,n,o,r,a,s,l,c,d,u,p,g,h){var m=e.call(this)||this;return m.previewModeToggleService=t,m.applicationState=i,m.storyServices=n,m.consumerDialogs=o,m.flags=r,m.$log=a,m.consumerBiLogger=s,m.consumerBiLoggerHelpers=l,m.previewService=c,m.$timeout=d,m.CONSUMER_DIALOGS=u,m.assistiveMessage=p,m.$translate=g,m.$q=h,m}return n(t,e),t.$inject=["previewModeToggleService","applicationState","storyServices","consumerDialogs","flags","$log","consumerBiLogger","consumerBiLoggerHelpers","previewService","$timeout","CONSUMER_DIALOGS","assistiveMessage","$translate","$q"],t.prototype.currentEditMode=function(){return this.applicationState.isInMobileEditMode()?"mobile":"desktop"},t.prototype.handleDisplayModeSelect=function(e){this.flags.newTopBar&&this.flags.newPreviewMode&&this.applicationState.isPreviewDisplay()?this.handleDisplayModeSelectPreview(e):"desktop"===e?this.switchToDesktopEditMode():this.switchToMobileEditMode()},t.prototype.showDialog=function(e){var t=this,i=!this.previewService.isSitePublished()&&this.storyServices.story.mobileEditorActive,n=i?this.switchEditorWithLogging("mobile"):this.$q.when();this.consumerDialogs.showDialog(s.ConsumerDialogTypes.EXISTING_USER_FIRST_TIME_MOBILE_EDITOR_POPUP).then(function(){t.storyServices.story.popupConfigurations[e]=!0,i||t.switchEditorWithLogging("mobile")},function(){n.then(function(){t.$timeout(t.applicationState.disableMobileEditor,r.Builder.ANIMATION_LENGTH-50)})})},t.prototype.switchToDesktopEditMode=function(){this.switchEditorWithLogging("desktop")},t.prototype.switchToMobileEditMode=function(){var e=this,t="first-time-in-mobile-editor";this.flags.debug||!this.shouldShowPopup()||this.storyServices.story.popupConfigurations[t]?this.switchEditorWithLogging("mobile").then(function(){e.showAssistiveMessageIfFirstTime(t)}):this.showDialog(t)},t.prototype.handleDisplayModeSelectPreview=function(e){var t=this.applicationState.isFirstTimePreview()?a.BIModeType.previewInWelcomeTour:a.BIModeType.previewInBuilder;"desktop"===e?this.previewModeToggleService.openDesktopPreview():this.previewModeToggleService.openMobilePreview(),this.consumerBiLogger.builder.previewSiteSwitchToMobileDesktopView(t,e)},t.prototype.shouldShowPopup=function(){return this.previewService.isSitePublished()&&!this.storyServices.story.mobileEditorActive},t.prototype.showAssistiveMessageIfFirstTime=function(e){this.flags.debug||this.shouldShowPopup()||this.storyServices.story.popupConfigurations[e]||(this.showAssistiveMessageWithBiLogging(),this.storyServices.story.popupConfigurations[e]=!0)},t.prototype.showAssistiveMessageWithBiLogging=function(){this.consumerBiLogger.dialogs.show(null,null,null,this.CONSUMER_DIALOGS.WELCOME_TO_MOBILE_EDITOR_NEW,null,null),this.applicationState.isSilent()||this.showAssistiveMessage()},t.prototype.showAssistiveMessage=function(){var e=this;this.assistiveMessage.show({target:$('[data-hook="browser-wrapper"]'),xOffset:-2,titleText:this.$translate.instant("popups.welcome-to-mobile-editor-new.heading"),text:this.$translate.instant("popups.welcome-to-mobile-editor-new.text"),icon:"EditMobileFirstTime.svg",durationBeforeEntrance:500,durationOfEntrance:300,durationOfExit:300,animationXOffset:-20,animationYOffset:0,onActionCallback:function(){return e.consumerBiLogger.dialogs.approveChanges(null,null,null,e.CONSUMER_DIALOGS.WELCOME_TO_MOBILE_EDITOR_NEW,null,null)},onHideCallback:function(){return e.consumerBiLogger.dialogs.cancel(null,null,null,e.CONSUMER_DIALOGS.WELCOME_TO_MOBILE_EDITOR_NEW,null,null)},template:'<first-time-mobile-editor-tooltip heading="titleText" text="text" icon="icon" button-text="actionText" on-action="onAction()" on-hide="onHide()"></first-time-mobile-editor-tooltip>'})},t.prototype.switchEditorWithLogging=function(e){var t=this;return this.prepareBiLogger(e),this.$q.when().then(function(){return"mobile"===e?t.applicationState.goToMobilePage(t.storyServices.story.selectedPage):t.applicationState.disableMobileEditor()}).then(function(){t.sendBiAfterLoadFinished()}).catch(function(e){t.$log.error(e)})},t.prototype.sendBiAfterLoadFinished=function(){var e=this.consumerBiLoggerHelpers.popPanelSource();e&&this.consumerBiLogger.builder.switchBuilderTypeMobileDesktopSuccess(e,this.applicationState.isInDesktopEditMode()?"desktop":"mobile")},t.prototype.prepareBiLogger=function(e){this.currentEditMode()!==e&&(this.consumerBiLoggerHelpers.setPanelSource("top bar"),this.consumerBiLogger.builder.switchBuilderTypeMobileDesktopClick("top bar",e),this.consumerBiLoggerHelpers.resetLoadTime())},t}(o.BaseDropDown);angular.module("siteGeneratorStaticsConsumerAppInternal").component("switchEditModeDropdown",{templateUrl:"views/top-bar/switch-edit-mode-dropdown/switch-edit-mode-dropdown.html",controller:l})},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(27),s=i(0),l=function(e){function t(t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f){var v=e.call(this)||this;return v.applicationState=t,v.storyServices=i,v.flags=n,v.$log=o,v.$timeout=r,v.undoStateManager=a,v.$translate=s,v.$http=l,v.$q=c,v.initService=d,v.BackendStory=u,v.storyManager=p,v.undoRedo=g,v.introManager=h,v.$window=m,v.siteState=f,v.init(),v}return n(t,e),t.$inject=["applicationState","storyServices","flags","$log","$timeout","undoStateManager","$translate","$http","$q","initService","BackendStory","storyManager","undoRedo","introManager","$window","siteState"],t.prototype.init=function(){var e=this;this.initService.loaded().then(function(){return e.getAllAvailableLanguages()})},t.prototype.getAllAvailableLanguages=function(){var e=this;if(this.storyServices.story){var t="/_api/translation-node-server/"+("translate/progress/"+this.extractInstanceIdFromStoryId(this.storyServices.story.id));this.$http.get(t).success(function(t){e.availableLanguages=t.filter(function(e){return"en"!==e.locale})})}else console.log("Story not available")},t.prototype.sendContentElementsEN=function(){var e=this.storyServices.story.storyLocales.en.contentElements,t="/_api/translation-node-server/"+("translate/addtemplate/"+this.extractInstanceIdFromStoryId(this.storyServices.story.id));this.$http.post(t,JSON.stringify(e)).success(function(e){return console.log("success: ",e)})},t.prototype.getTranslatedContentElements=function(e){var t=this,i="/_api/translation-node-server/"+("translate/"+this.extractInstanceIdFromStoryId(this.storyServices.story.id)+"/"+e);return this.undoRedo.delayAndDisableAutoSave(),this.$http.get(i).success(function(e){t.copyValuesToContentElements(e,t.storyServices.story.storyLocales.en.contentElements)})},t.prototype.createNewStory=function(e){return this.BackendStory.build().create(e,this.storyServices.story,!1,"ADI-translated-template")},t.prototype.createTranslatedTemplate=function(e){return o(this,void 0,void 0,function(){var t,i,n;return r(this,function(o){switch(o.label){case 0:return[4,this.getTranslatedContentElements(e)];case 1:return o.sent(),[4,this.createNewStory(this.siteState.getSiteName()+"_"+e)];case 2:return t=o.sent(),i=this.$window.location.href,n=i.substring(0,i.indexOf("#")),this.$window.location.href=n+"#!/builder/story/"+t.id,this.$window.location.reload(),[2]}})})},t.prototype.extractInstanceIdFromStoryId=function(e){return e.indexOf(":")>-1?e.substr(0,e.indexOf(":")):e},t.prototype.copyValuesToContentElements=function(e,t){s.forEach(t,function(t,i){s.forEach(t,function(t,n){if(e[i]&&e[i][n])switch(t.type){case"text":t.value=e[i][n];break;case"button":e[i][n].value.callToAction&&(t.value.callToAction=e[i][n].value.callToAction);break;case"media":t.value.forEach(function(t,o){e[i][n].value[o]&&(e[i][n].value[o].Title&&(t.Title=e[i][n].value[o].Title),e[i][n].value[o].Description&&(t.Description=e[i][n].value[o].Description))})}})})},t}(a.BaseDropDown);angular.module("siteGeneratorStaticsConsumerAppInternal").component("templateTranslationDropdown",{templateUrl:"views/top-bar/template-translation-dropdown/template-translation-dropdown.html",controller:l})},function(e,t,i){"use strict";angular.module("siteGeneratorStaticsConsumerAppInternal").directive("stateClass",["$state",function(e){return{restrict:"A",link:function(t,i,n){var o=n.stateClass||"stateClass";function r(e){return e&&e.data&&e.data[o]}i.addClass(r(e.current)),t.$on("$stateChangeSuccess",function(e,t,n,o){i.removeClass(r(o)),i.addClass(r(t))})}}}])},function(e,t){angular.module("siteGeneratorStaticsConsumerAppInternal").directive("storyContainer",function(){"use strict";return{replace:!0,template:"<div ui-view></div>"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(12),r=i(1),a=i(0),s=function(){function e(e,t,i,o,r,a,s,l,c,d,u,p){var g=this;this.previewService=e,this.consumerDialogs=t,this.consumerPublishService=i,this.$http=o,this.$q=r,this.siteNameApi=a,this.consumerBiLogger=s,this.storyServices=l,this.siteState=c,this.flags=d,this.undoRedo=u,this.$log=p,this.nextCongratsScreenIndex=0,d.stopExcessiveDSCalls&&(this.updateIsSitePublished(),this.updateIsDomainConnected(),n.PubSub.subscribe(n.events.PUBLISH,function(){return g.updateIsSitePublished()}))}return e.$inject=["previewService","consumerDialogs","consumerPublishService","$http","$q","siteNameApi","consumerBiLogger","storyServices","siteState","flags","undoRedo","$log"],e.prototype.updateIsSitePublished=function(){this._isSitePublished=this.previewService.isSitePublished()},e.prototype.updateIsDomainConnected=function(){this._isDomainConnected=this.previewService.isDomainConnected()},e.prototype.getCongratsState=function(){var t=0;return this.isPremium()?t=this.isDomainConnected()?e.PromoteScreenIndex:e.NoPremiumScreenIndex:(t=this.nextCongratsScreenIndex,this.changeToNextCongratsScreen()),e.CongratsScreens[t]},e.prototype.getSiteDomainInfo=function(){var t=this,i=this.siteState.getMetaSiteId();return this.$http({method:"POST",url:e.PremiumStateApiUrl+i}).then(function(e){return{isDomainConnected:t.isDomainConnectedInXMLResponse(e.data),sitePublishedDomain:t.getPublishedSiteDomain(e.data),isSitePremium:t.isSitePremiumInXMLResponse(e.data)}})},e.prototype.changeToNextCongratsScreen=function(){this.nextCongratsScreenIndex=1-this.nextCongratsScreenIndex},e.prototype.changeSiteNameIfNeededAndValid=function(e){var t=this,i=this.getSiteName();if(i!==e){var n=this.siteState.getMetaSiteId();return this.siteNameApi.rename(n,e).then(function(){if(t.previewService.setSiteName(e),e=t.getSiteName(),!t.isDomainConnected()){var n=t.getPublicUrl().slice(0,-i.length);t.previewService.setPublicUrl(n+e)}return e})}return this.$q.resolve(i)},e.prototype.publishConsumerStory=function(){var e=this;return this.undoRedo.disableAutoSave(),this.consumerPublishService.publishStory().then(function(){n.PubSub.fire(n.events.PUBLISH),e.undoRedo.enableAutoSave()},function(t){e.undoRedo.enableAutoSave();var i=t;t.stack?i=t.stack:t.document&&t.document.errorType?i=t.document.errorType:"object"==typeof i&&(i=JSON.stringify(i));var n="error publishing story "+i;e.consumerBiLogger.fatal(r.BIErrorCodes.DSPublishStoryFailed,n),e.flags.debug&&e.$log.error(n);var s=e.siteState.getDsSaveErros();return a.get(t,["document","errorType"])===s.SAVE_PUBLISH_DISABLED_ON_SERVER?(delete e.storyServices.waitsForSave,e.consumerDialogs.showDialog(o.ConsumerDialogTypes.DS_SAVE_PUBLISH_DISABLED_ON_SERVER_POPUP)):409===t.status||"CONCURRENT_SAVE_ERROR"===a.get(t,["document","errorType"])?e.consumerDialogs.showDialog(o.ConsumerDialogTypes.STORY_CONFLICTING_CHANGES_POPUP):e.consumerDialogs.showDialog(o.ConsumerDialogTypes.PUBLISH_FAILED_POPUP).then(function(){return e.publishConsumerStory()})})},e.prototype.getPublicUrl=function(){return this.previewService.getPublicUrl()},e.prototype.getUsername=function(){return this.previewService.getUsername()},e.prototype.getSiteName=function(){return this.previewService.getSiteName()},e.prototype.validateSiteName=function(e){return this.previewService.validateSiteName(e)},e.prototype.isSitePublished=function(){return this.flags.stopExcessiveDSCalls?this._isSitePublished:this.previewService.isSitePublished()},e.prototype.isDomainConnected=function(){return this.flags.stopExcessiveDSCalls?this._isDomainConnected:this.previewService.isDomainConnected()},e.prototype.isPremium=function(){return this.previewService.isPremium()},Object.defineProperty(e.prototype,"freeDomain",{get:function(){return this.previewService.getFreeDomain()},enumerable:!0,configurable:!0}),e.prototype.isDomainConnectedInXMLResponse=function(t){var i=angular.element(t).find("domainName");if(a.isEmpty(i))return!1;var n=angular.element(t).find("checkStatus").text();return a.parseInt(n)===e.DomainConnectedSuccessCode},e.prototype.getPublishedSiteDomain=function(t){var i=angular.element(t).find("domainName").text();return a.isEmpty(i)||a.includes(i,e.UrlPrefix)||(i=e.UrlPrefix+i),a.isEmpty(i)?null:i},e.prototype.isSitePremiumInXMLResponse=function(e){return!a.isEmpty(angular.element(e).find("cycle"))},e.NoPremiumScreenIndex=0,e.PromoteScreenIndex=2,e.CongratsScreens=["one-action","three-actions-social","three-actions-promote"],e.DomainConnectedSuccessCode=0,e.UrlPrefix="https://",e.PremiumStateApiUrl="//www.wix.com/_api/wix/getDocPremiumState2?siteGuid=",e}();t.PublishService=s,angular.module("siteGeneratorStaticsConsumerAppInternal").service("publishService",s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n){this.$element=e,this.viewerScrollController=t,this.siteState=i,this.sitePages=n,this.scrollbarWidth=this.viewerScrollController.getScrollbarWidth()}return e.$inject=["$element","viewerScrollController","siteState","sitePages"],e.prototype.getPreviewUrl=function(){return this.previewUrl||"aaa"},e.prototype.$postLink=function(){var e=this,t=this.$element.find("iframe")[0];t.onload=function(){var i=t.contentWindow,o=i.setInterval(function(){try{e.sitePages.navigateToPage(e.page),e.siteState.setPreviewMode(),i.clearInterval(o)}catch(e){n.noop(e)}},10)}},e.prototype.getWidthWithScrollbar=function(){return{width:320+this.scrollbarWidth}},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("mobilePreview",{templateUrl:"views/preview/mobile-preview.html",controller:o,bindings:{previewUrl:"@",page:"@"}})},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(15),r=i(174),a=i(0),s=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H,O,_,D,$){var N=this;if(this.defaultsService=e,this.layoutSolver=t,this.simpleSolutionManager=i,this.solutionFetcher=n,this.mobileSolutionManager=o,this.$q=r,this.modelTree=a,this.layoutPresetHelperService=s,this.MediaPreferences=l,this.storyServices=c,this.applicationState=d,this.flags=u,this.$window=p,this.FeatureList=g,this.PageFeatureList=h,this.prettyAlgoRules=m,this.$injector=f,this.clusters=v,this.LayoutUtils=S,this.overlayManager=y,this.sectionBackgroundService=T,this.mediaOverride=b,this.patternService=I,this.solutionManager=P,this.sitePartTypes=M,this.designKit=E,this.designKitStrips=w,this.layoutSelectionStoreProvider=C,this.presetPreviewFlagUtils=A,this.tpaService=L,this.themeChooser=B,this.Solution=k,this.slideShowService=H,this.mediaGallery=O,this.cropFaceService=_,this.mediaOpacity=D,this.nodeFetcher=$,this.flags.debug&&this.flags.prettyAlgo){var x=this.$injector.get("prettyAlgoDX");x.init().then(function(){return x.getRulesFromDB()}).then(function(e){N.prettyAlgoRules=e,console.log("loaded rules from firebase",e)})}}return e.$inject=["defaultsService","layoutSolver","simpleSolutionManager","solutionFetcher","mobileSolutionManager","$q","modelTree","layoutPresetHelperService","MediaPreferences","storyServices","applicationState","flags","$window","FeatureList","PageFeatureList","prettyAlgoRules","$injector","clusters","LayoutUtils","overlayManager","sectionBackgroundService","mediaOverride","patternService","solutionManager","sitePartTypes","designKit","designKitStrips","layoutSelectionStoreProvider","presetPreviewFlagUtils","tpaService","themeChooser","Solution","slideShowService","mediaGallery","cropFaceService","mediaOpacity","nodeFetcher"],e.prototype.isHomePage=function(){return this.storyServices.story.selectedPage===this.modelTree.homePageId},e.prototype.setConvertedPresetBg=function(e,t){this.flags.sectionMedia&&(e.preset.convertedPreset&&this.setImageBg(e,e.node,t),e.preset.convertedHeaderPreset&&this.setImageBg(e,e.node.children[0],t,"header"))},e.prototype.getCurrentPresetNodes=function(){var e=this.nodeFetcher.getCurrentNodeResult(),t=e&&e.node;if(t){var i=this.solutionFetcher.getSectionSolution(this.storyServices.story.selectedPage,t.getId(),e.sitePart);return{current:this.createCurrentSectionPreview(t,i),nodes:[t],sitePart:e.sitePart}}},e.prototype.getPresetGroups=function(e,t,i){var n=[t.data.groups[0]];if(i)switch(e.contentElementType){case"ListHeader":n=[t.data.groups[0]];break;case"ListFooter":return void(n=[]);default:n=a.filter(t.data.groups,function(e){return!e.isHeader&&!e.isFooter})}return a.some(a.get(n&&n[0],["columns","singleColumnProps"]),function(e){return"image"===e.backgroundMode})||["image","imageOrColor"].indexOf(a.get(n&&n[0],["columns","backgroundMode"]))>-1?[]:n},e.prototype.changePreset=function(e,t,i){t.preset=ob.deepClone(t.preset);var n=this.getPresetGroups(e,t.preset,i);this.mediaOverride.changeC2CtoFullWidth(t.preset.data,n),a.each(n,function(e){a.each(e.layouts,function(e){var t=a.get(e.selections,["overrides","strips"]);a.each(t,function(e){a.each(e,function(e){e.strip&&(e.strip.paddingTop=40,e.strip.paddingBottom=40)})})})});var o=this.getMediaFieldName(e);e.argsMatchingPolicy[o]&&("ListHeader"===e.contentElementType?t.preset.convertedHeaderPreset=!0:t.preset.convertedPreset=!0)},e.prototype.turnMediaOffForConvertedPreset=function(e,t){var i=this.getMediaFieldName(e);"ListHeader"===e.contentElementType?t.preset.convertedHeaderPreset&&(e.argsMatchingPolicy[i]=!1):t.preset.convertedPreset&&(e.argsMatchingPolicy[i]=!1)},e.prototype.convertPartialPreset=function(e,t){return t.preset.data.isList||0!==t.preset.data.groups[0].id.indexOf("Partial lg ")||(t.preset.convertedPreset=!0,this.turnMediaOffForConvertedPreset(e,t)),!0},e.prototype.convertAllOnMediaCoast2CoastPreset=function(e,t,i,n){if(void 0===n&&(n=!1),e.isListItem)return!0;var r=a.get(this.getPresetGroups(e,t.preset,i),[0,"layouts",0]);if(!r)return!0;if(1===r.cluster)return r.mediaType===o.PresetMediaTypes.COAST2COAST&&this.changePreset(e,t,i),this.turnMediaOffForConvertedPreset(e,t),!0;if(!a.some(e.argsMatchingPolicy))return!0;var s=this.LayoutUtils.transformStructureToStringArray(r,r.structure),l=this.LayoutUtils.transformStructureToStringArray(r,r.onMediaStructure),c=r.argsSignature.split("#"),d=e.contentElement.calculateUnwantedArgs(),u=c.filter(function(e){return d.find(function(t){return t===e})});if(1===this.clusters.calculateFallBackClusterAndStructure(s,l,u,[],!e.isListItem).cluster&&r.mediaType===o.PresetMediaTypes.COAST2COAST){if(n){var p=a.intersection(a.flatten(s),u);if(p.length>0){var g=a.find(a.keys(e.contentElement.values),function(t){return e.contentElement.values[t].signature===p[0]});g&&(e.argsMatchingPolicy[g]=!0)}}return!1}return!0},e.prototype.fillArgsMatchingPolicy=function(e,t,i,n,o){var r=this.getOptimalFieldMasksArray(t.preset,e,n);r.length<=i&&(i=r.length-1);var s=r[i];e.contentElement.calculateWantedArgs(),a.each(e.contentElement.values,function(t,i){e.argsMatchingPolicy[i]=s.indexOf(t.signature)>-1});var l=e.contentElement.getReferenceFields();a.each(l,function(e,t){e&&-1===s.indexOf(t)&&(l[t]=!1)}),e.contentElement.setReferenceFields(l),this.flags.sectionMedia&&o&&this.convertAllOnMediaCoast2CoastPreset(e,t,n,!0),e.contentElement.getNonBlankFields(),a.some(e.argsMatchingPolicy)||(e.userHidden=e.isListHeader()||e.isListFooter())},e.prototype.getOptimalFieldMasksArray=function(e,t,i){var n=e.data.isList?"items":"single",o=t.contentElementType;"ListHeader"===t.contentElementType?(n="header",o=i.contentElementType):"ListFooter"===t.contentElementType&&(n="footer",o=i.contentElementType);var r=this.layoutPresetHelperService.getPresetPropertyValue(e,"fieldMasks",o,n),s=this.isHomePage();return r=a.sortBy(r,function(e){return 1===e.length&&-1===e[0]?0:s?e.length:-e.length})},e.prototype.getMediaFieldName=function(e){return e.isList()?{item:this.getItemMediaFieldName(a.first(this.modelTree.getListItems(e))),header:this.getItemMediaFieldName(this.modelTree.getListHeader(e))}:this.getItemMediaFieldName(e)},e.prototype.getItemMediaFieldName=function(e){var t;return a.each(e.contentElement.values,function(e,i){"media"===e.type&&(t=i)}),t},e.prototype.getBgColorOption=function(){return{mediaType:"color"}},e.prototype.getBgOptions=function(e){this.applicationState.isPagePrettyRulesActive&&(e.image=this.removeImagesAlreadyOnPage(e.image));var t=[this.getBgColorOption()],i=e.image||[];return i.splice(0,0,this.getBgColorOption()),{bgOptions:e,bgForPresetWithContent:t,bgForPresetWithContentLength:t.length,bgForPresetWithoutContent:i,bgForPresetWithoutContentLength:i.length}},e.prototype.removeImagesAlreadyOnPage=function(e){var t=a(this.PageFeatureList.getImageList(this.storyServices.story.selectedPage)).filter(function(e){return"image"===e.mediaType}).map(function(e){return e.relativeUri}).uniq().value();return a.filter(e,function(e){return-1===t.indexOf(e.relativeUri)})},e.prototype.getSectionBgOptions=function(e){return e.isList()?{headerBg:this.getBgOptions(this.sectionBackgroundService.getBackgroundOptions(e,"header")),bg:this.getBgOptions(this.sectionBackgroundService.getBackgroundOptions(e))}:this.getBgOptions(this.sectionBackgroundService.getBackgroundOptions(e))},e.prototype.setImageBg=function(e,t,i,n){if(void 0===n&&(n="body"),!t.userHidden){var o=this.sectionBackgroundService.getBackgroundOptions(t,n),r=o.image[i%o.image.length];"header"===n?e.headerBg=r:e.bg=r}},e.prototype.isShapePreset=function(e,t){var i;if(e.isListItem){var n=a.filter(t.data.groups,function(e){return!e.isHeader&&!e.isFooter});i=a.first(n).layouts[0].mediaType}else i=t.data.groups[0].layouts[0].mediaType;return i===o.PresetMediaTypes.SHAPE},e.prototype.getNodeBg=function(e,t,i,n,o,r){return void 0===r&&(r=!1),this.hasContentMedia(e,t,i)||r?n.bgForPresetWithContent[o%n.bgForPresetWithContentLength]:n.bgForPresetWithoutContent[o%n.bgForPresetWithoutContentLength]},e.prototype.hasContentMedia=function(e,t,i){return e.argsMatchingPolicy[i]},e.prototype.setSectionBackground=function(e,t,i,n){if(e.node.isList()){var o=this.modelTree.getListHeader(e.node),r=void 0,s=void 0;if(this.hasContentMedia(o,e.preset,t.header)||i%2!=0||(r=this.getNodeBg(o,e.preset,t.header,n.headerBg,i),a.isEqual(this.getBgColorOption(),r)||(s=this.getBgColorOption())),!s){var l=a.first(this.modelTree.getListItems(e.node)),c=0===a.filter(e.preset.data.groups,function(e){return e.layouts.length>1}).length;s=this.getNodeBg(l,e.preset,t.item,n.bg,i,c)}e.bg=s,(this.flags.lodash4?a.isEqual:a.eq)(s,r)||(e.headerBg=r)}else e.bg=this.getNodeBg(e.node,e.preset,t,n,i)},e.prototype.isMediaOnMedia=function(e,t,i){var n,o=this.sectionBackgroundService.getBackground(e),r=o&&"color"!==o.mediaType&&"pattern"!==o.mediaType;if(e.isList()){var s=this.modelTree.getListHeader(e),l=a.first(this.modelTree.getListItems(e));n=this.hasContentMedia(l,t,i.item);var c=this.sectionBackgroundService.getBackground(e,"header"),d=this.hasContentMedia(s,t,i.header),u=c&&"color"!==c.mediaType&&"pattern"!==c.mediaType;return n&&r||d&&u}return(n=this.hasContentMedia(e,t,i))&&r},e.prototype.generateFlattenedListOfPreviewsForTpa=function(e,t){a.first(t)||(t=[{}]);var i=[],n=this.modelTree.canInvertTpa(e)&&this.isDarkTpaBackground(e);return a.each(t,function(t){i.push({node:e,preset:t,isInverted:n,isTpa:!0})}),this.flags.debug&&0===i.length&&i.push({node:e,preset:null,isInverted:n,isTpa:!0}),i},e.prototype.getLgStripColorByNode=function(e){var t=this.simpleSolutionManager.getSectionSolution(e.containerPageId,e.id);return t&&t[0]&&t[0].getLgData().strip.color},e.prototype.isDarkTpaBackground=function(e){var t=this.getLgStripColorByNode(e);return e.containerPageId&&t?t===this.designKit.darkColorsSantaFormat[0]:this.themeChooser.coloration.isActiveKitColorationModeIsDark()},e.prototype.orderPresetsByPrettyAlgo=function(e,t){var i=this,o=e.map(function(e){return new i.FeatureList(e)}),a=new this.FeatureList(t),s=r.prettyAlgoRuleEngine.getScores(this.prettyAlgoRules,a,o),l=e.map(function(e,t){return n({},e,s[t],{features:o[t]})}).sort(function(e,t){return t.score-e.score});return console.log("pa - NUMBER OF PRESETS",l.length),l},e.prototype.getWantedArgsSignature=function(e){if(e.isList()){var t=this.modelTree.getListHeader(e),i=this.modelTree.getListFooter(e),n=a.first(this.modelTree.getListItems(e));return a.map([t,n,i],function(e){return e&&e.contentElement.getWantedArgs(!1,!0)||""}).join("#")}return e.contentElement.getWantedArgs(!1,!0)},e.prototype.convertToBgObj=function(e){if(e){var t={mediaType:e.mediaType};return"color"!==e.mediaType&&(t.mediaId=this.mediaGallery.getItemId(e),"image"===e.mediaType&&(t.alignment=this.cropFaceService.getAlignmentByFacePosition(e),t.hasFaces=[].concat(a.get(e,"fileInput.face")).length>0)),t}},e.prototype.calculateSolution=function(e,t){var i,n=this;if(e.dummyPageIdSuffix?i=e.dummyPageIdSuffix:(i="|"+e.node.id+"|"+this.getWantedArgsSignature(e.node),"header"===t&&(i+="|"+a.map(e.flags).join())),this.flags.debugShowAllFields){var o=void 0;o=e.node.isList()?e.node.children:[e.node],a.each(o,function(e){a.each(e.contentElement.values,function(t,i){"text"!==t.type&&"button"!==t.type||-1!==["ContactFormTitle","country","gate","state","street","zipCode","city"].indexOf(t.subType)||(e.argsMatchingPolicy[i]=!0)})})}return this.layoutSolver.createLayoutPresetPreviewSolution(e.preset,e.node,e.isClone,i,{preferredMedia:e.node.preferredMedia,bg:this.convertToBgObj(e.bg),headerBg:this.convertToBgObj(e.headerBg),resetOpacity:!a.get(e,["preset","data","isMobile"])}).then(function(t){return t?(t.sourcePageName=e.sourcePageName,t.sourceName=e.sourceName,t.prettyAlgo={score:e.score,rules:e.rules,features:e.features},e.flags&&(t.flags=e.flags),n.slideShowService.setIsSlideShow(t.dummyPageId,t.node.id,n.isSlideShow(t)),n.$q.when(t)):n.$q.reject("Could not find any solution to this preset")})},e.prototype.isSlideShow=function(e){return a(e.flags).includes("slideShowPreset")},e.prototype.generateColorOptions=function(e,t){void 0===t&&(t=!1);var i=e.isList()&&!this.modelTree.getListHeader(e).isUserHidden(),n=this.flags.sectionMedia&&this.sectionBackgroundService.getBackground(e),o=n&&n.mediaType!==core.BgMediaTypes.COLOR&&n.mediaType!==core.BgMediaTypes.PATTERN,r=this.flags.sectionMedia&&this.sectionBackgroundService.getBackground(e,"header")||n,s=i&&r&&r.mediaType!==core.BgMediaTypes.COLOR&&r.mediaType!==core.BgMediaTypes.PATTERN,l=this.solutionFetcher.getSectionSolution(e.containerPageId,e.id),c=this.designKit.getConfigurationOfLg(l[0]),d=a.sortBy(this.sectionBackgroundService.getUniqueConfigurationsOfActiveKit(),function(e){return e.id!==c.id});return e.isTpa||e.isTpaWidget?this.getTpaPreset(e).then(function(t){return a(d).filter(function(e){return"D1"===e.display||"L1"===e.display}).map(function(i){return{node:e,confId:i.id,isTpa:!0,isInverted:"D1"===i.display,preset:t}}).flatten().value()}):a(d).map(function(n){return!i||t&&!s?{node:e,confId:n.id}:a.map(d,function(t){return{node:e,headerConfId:n.id,confId:t.id}})}).flatten().filter(function(e){return!(o&&3!==e.confId||s&&3!==e.headerConfId)}).value()},e.prototype.getTpaPreset=function(e){var t=this.tpaService.getTpaPreset(e).id;return this.defaultsService.getPresetsForNode(e).then(function(e){return e.find(function(e){return e.id===t})})},e.prototype.createColorOptionSolution=function(e,t){var i=this,n=e.confId,o=e.headerConfId;return t=t||"layoutPresetPreview_switchColor_"+n+"_"+(o||0),this.simpleSolutionManager.duplicateSectionForPreview(e.node,t).then(function(t){return i.designKit.setSpecificConfigurationForSectionByConfId(t.solution,n,o),i.preparePresetPreviewForRender(i.sitePartTypes.BODY,t),i.flags.listItemOverrideColor&&(t.preset=e),t})},e.prototype.preparePresetPreviewForRender=function(e,t,i){this.solutionManager.preparePresetPreviewForRender(e,t,i)},e.prototype.cloneCurrentSectionForPreview=function(e,t,i){var n="layoutPresetPreview_clone_"+t+"|"+e.id+(i||"");return this.simpleSolutionManager.duplicateSectionForPreview(e,n,t)},e.prototype.createCurrentSectionPreview=function(e,t){var i=this,n=this.layoutSelectionStoreProvider.cloneLayoutSelectionStoreForPresetPreview();this.applicationState.isInMobileEditMode()&&(t=this.mobileSolutionManager.getMobileSolution(t));var o,r=a.map(t,function(e){var t=ob.deepClone(e.getLgData());if(e.isMobile()){var i=a.get(e.getDesktopLG().getLgData(),["strip","color"]);i&&a.set(t,["strip","color"],i)}return t});this.flags.mergedHeader&&(o=this.presetPreviewFlagUtils.getPreviewFlagsByNode(e,!1)||[]);var s={prettyAlgo:void 0,node:e,preset:void 0,solution:t,previewNode:e,lss:n,dummyPageId:this.storyServices.story.selectedPage,stripData:[],stripSizes:[],lgDataArray:r,flags:o},l=a.map(s.solution,function(e){return i.solutionManager.hasStripOnLE(e)});return this.solutionManager.mergeDecorativeStrips(s.solution,s.lgDataArray,l,s.stripData,s.stripSizes),s},e.prototype.getFirstSectionPreview=function(e){var t=e.children[1];if(t){var i=this.solutionFetcher.getSectionSolution.bind(this.solutionFetcher)(e.id,t.id);return this.createCurrentSectionPreview(t.id,i)}},e.prototype.wrapHeaderWithFirstSectionPreviews=function(e,t){if(t.solution){var i=(t=a.assign({},t,{lgDataArray:ob.deepClone(t.lgDataArray)})).solution[0].segments[0],n=this.designKitStrips.getLgStripDescriptors(t.solution),o=this.designKitStrips.getHeaderStripDescriptor(i.isMobile?void 0:e.solution,this.flags.coreHeaderFooterDesignKitConfig?this.designKit.getHeaderBg():void 0),r=this.designKitStrips.getFooterStripDescriptor(this.flags.coreHeaderFooterDesignKitConfig?this.designKit.getFooterBg():void 0),s=this.designKit.getGsu(i.getLayoutSelectionStore());this.designKitStrips.manageBodyStripsPadding(n,t.lgDataArray,s,o,r)}return[e,t]},e}();t.PresetHelpers=s,angular.module("siteGeneratorBuilderInternal").service("presetHelpers",s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n){this.flags=e,this.curatedPreviewPresets=t,this.$log=i,this.presetHelpers=n}return e.$inject=["flags","curatedPreviewPresets","$log","presetHelpers"],e.prototype.groupByCuratedPreviews=function(e,t){var i=this,o=this.curatedPreviewPresets.rows.map(function(t){return e.map(function(e){var o=i.filterPreviewEntriesByCuratedRow(e.previewEntries,e.node,t);return i.flags.noRandomForAutomationTests||(o=n.shuffle(o)),Object.assign({},e,{previewEntries:o})})}),r=(t=t.map(function(e){return e%o.length})).map(function(e){return o[e]});return this.logResult(r,t),r},e.prototype.logResult=function(e,t){if(this.flags.debug||this.flags.isRecordingFullStorySession){this.$log.info("page preset previews curated previews selected:",t);var i=e.map(function(e){return e.map(function(e){return{nodeId:e.node.id,nodeType:e.node.getSpecificContentElementType(),previewEntryIds:e.previewEntries.map(function(e){return e.preset?e.preset.id:e}).sort(function(e,t){return e>t?1:-1})}})});this.$log.info("page preset previews grouped by curated previews:",i)}},e.prototype.filterPreviewEntriesByCuratedRow=function(e,t,i){var o=this;return e.filter(function(e){return e.preset}).filter(function(e){var r=o.getCuratedOptions(i,t);return!n.isArray(r)||-1!==r.indexOf(e.preset.id)}).filter(function(e,t,i){var n=i.every(function(e){return!o.isInlinePreset(e)});return o.isInlinePreset(e)||n})},e.prototype.isInlinePreset=function(e){var t=e.node,i=this.presetHelpers.getMediaFieldName(t);return t.isList()?t.argsMatchingPolicy[i.item]:t.argsMatchingPolicy[i]},e.prototype.getCuratedOptions=function(e,t){var i=t.getSpecificContentElementType(),n=this.curatedPreviewPresets.aliases[i];if("string"==typeof n)return e[n]},e}();t.CuratedPresetsFilter=o,angular.module("siteGeneratorBuilderInternal").service("curatedPresetsFilter",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(15),o=i(0),r=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h){this.presetHelpers=e,this.modelTree=t,this.applicationState=i,this.mediaOverrideManager=n,this.sitePartTypes=o,this.storyServices=r,this.PageFeatureList=a,this.overlayManager=s,this.$injector=l,this.flags=c,this.presetSettingsService=d,this.sectionBackgroundService=u,this.slideShowService=p,this.wizWebsite=g,this.wizContentManager=h}return e.$inject=["presetHelpers","modelTree","applicationState","mediaOverrideManager","sitePartTypes","storyServices","PageFeatureList","overlayManager","$injector","flags","presetSettingsService","sectionBackgroundService","slideShowService","wizWebsite","wizContentManager"],e.prototype.createPreviewsFromExistingNodes=function(e,t,i){var n=this;if(i)return e.sort(function(e){return e.containerPageName?0:1}).map(function(e){return{node:n.modelTree.duplicateNodeAndContentElementForPresetPreview(e),sourcePageName:e.containerPageName,sourceName:e.containerSourceName,isClone:!0,staticRoundRobin:!0}});var r=o.first(e);return t.map(function(e){var t=n.modelTree.duplicateNodeAndContentElementForPresetPreview(r);return n.wizWebsite.isConvertingSite()?(o.each(t.contentElement.values,function(e,i){t.argsMatchingPolicy[i]=n.wizContentManager.introUserValues[t.contentElement.type]&&n.wizContentManager.introUserValues[t.contentElement.type][i]}),"Contact"===t.contentElement.type&&(t.argsMatchingPolicy["address for google map"]=n.wizContentManager.introUserValues.Contact&&n.wizContentManager.introUserValues.Contact["address for google map"],t.argsMatchingPolicy["Contact form email"]=!0)):n.flags.presetSettings?n.presetSettingsService.applyPresetSettings(t,e,!1,void 0,!0):n.presetHelpers.fillArgsMatchingPolicy(t,e,e.maskIndex),{node:t,preset:e.preset,sourcePageName:null,sourceName:null,isClone:!0}})},e.prototype.createPreviewsFromDrafts=function(e,t,i){var n=this;return t.map(function(t,r){var a=(r+i)%e.length,s=n.modelTree.duplicateNodeAndContentElementForPresetPreview(e[a]);if(n.$injector.get("wizWebsite").isConvertingSite()){if(s.isList()){var l=s.children[0],c=o.last(s.children);l.userHidden=!o.some(l.argsMatchingPolicy),c.userHidden=!o.some(c.argsMatchingPolicy)}}else s.isList()?s.children.forEach(function(e){n.flags.presetSettings?n.presetSettingsService.applyPresetSettings(e,t,!0,s):n.presetHelpers.fillArgsMatchingPolicy(e,t,t.maskIndex,s,!0)}):n.flags.presetSettings?n.presetSettingsService.applyPresetSettings(s,t,!0):n.presetHelpers.fillArgsMatchingPolicy(s,t,t.maskIndex,void 0,!0);var d={node:s,preset:t.preset,sourcePageName:null,sourceName:null,isClone:!0};return n.presetHelpers.setConvertedPresetBg(d,Math.floor(r/e.length)),d})},Object.defineProperty(e.prototype,"isAddMode",{get:function(){return this.applicationState.isAddMode()},enumerable:!0,configurable:!0}),e.prototype.hasBgAndColumn=function(e){var t=this.mediaOverrideManager.getAllowedMediaOverride(e);return this.sectionBackgroundService.getBackground(e).mediaType!==core.BgMediaTypes.COLOR&&t===n.PresetMediaTypes.COLUMNBG},e.prototype.createPreviewCombination=function(e,t,i,n,r,a,s){var l=this;void 0===s&&(s=!0);var c,d=this.modelTree.duplicateNodeAndContentElementForPresetPreview(e);if(d.isList()){var u=this.modelTree.getListItems(d)[0],p=r.item;a&&(u.argsMatchingPolicy[p]=!u.argsMatchingPolicy[p],this.avoidEmptyPreview(u,p));var g=o.filter(t.preset.data.groups,function(e){return!e.isHeader&&!e.isFooter});if(c="image"===o.get(g&&g[0],["columns","backgroundMode"]),!u.argsMatchingPolicy[p]&&c){if(!a)return!1;u.argsMatchingPolicy[p]=!0}}else a&&(d.argsMatchingPolicy[r]=!d.argsMatchingPolicy[r]);var h={node:d,preset:t.preset,fitMode:t.fitMode,sourcePageName:null,sourceName:null,isClone:!0};if(h.node.isList()?o.every(h.node.children,function(e){return l.presetHelpers.convertAllOnMediaCoast2CoastPreset(e,h,h.node)}):this.presetHelpers.convertAllOnMediaCoast2CoastPreset(h.node,h)&&this.presetHelpers.convertPartialPreset(h.node,h)){if((s||this.presetHelpers.isMediaOnMedia(d,t.preset,r))&&this.presetHelpers.setSectionBackground(h,r,Math.floor(i/n),this.presetHelpers.getSectionBgOptions(d)),this.presetHelpers.setConvertedPresetBg(h,Math.floor(i/n)),h.node.isList())!h.node.children[0].userHidden&&(c||this.slideShowService.isSlideShow(h.node))&&h.headerBg&&"color"!==h.headerBg.mediaType&&(h.headerBg=this.presetHelpers.getBgColorOption());return h.dummyPageIdSuffix="|"+d.id+"|"+this.presetHelpers.getWantedArgsSignature(d)+"|"+a,h}return null},e.prototype.avoidEmptyPreview=function(e,t){o.every(e.argsMatchingPolicy,function(e){return!e})&&(e.argsMatchingPolicy[t]=!0)},e.prototype.createPreviewBgPermutations=function(e,t,i){var n=this,r=[],a=e.length;return o.each(e,function(e){var s=n.presetHelpers.getMediaFieldName(e);o.each(t,function(t,o){if(!n.hasBgAndColumn(e)){var l=void 0;l=!!i.isChangeBgSupported&&!(o<4);var c=n.createPreviewCombination(e,t,o,a,s,!1,l);c&&r.push(c)}}),o.each(t,function(t,o){var l;l=!!i.isChangeBgSupported&&!(o<4);var c=n.createPreviewCombination(e,t,o,a,s,!0,l);c&&r.push(c)})}),r},e.prototype.generateNewPreviews=function(e,t,i){var n=e.filter(function(e){return e.isDraft}),o=n.length,r=[];if(this.flags.presetSettings&&(t=ob.deepClone(t)),0===i){var a=e.filter(function(e){return!e.isDraft});r=r.concat(this.createPreviewsFromExistingNodes(a,t,o>0))}o>0?r=r.concat(this.createPreviewsFromDrafts(n,t,i)):(a=e.filter(function(e){return!e.isDraft}))&&i>0&&"Contact"===a[0].contentElementType&&(r=r.concat(this.createPreviewsFromExistingNodes(a,t,!1)));return r},e.prototype.generateAlternativePreviews=function(e,t){return t.map(function(t){return e.map(function(e){return{node:e,preset:t.preset,sourcePageName:null,sourceName:null,isClone:!1,fitMode:t.fitMode}})}).reduce(function(e,t){return e.concat(t)},[])},e.prototype.generateAlternativePreviewsWithBg=function(e,t,i){return this.createPreviewBgPermutations(e,t,i)},e}();t.PresetPreviewGenerator=r,angular.module("siteGeneratorBuilderInternal").service("presetPreviewGenerator",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o){this.flags=e,this.presetHelpers=t,this.applicationState=i,this.$window=n,this.defaultsService=o}return e.$inject=["flags","presetHelpers","applicationState","$window","defaultsService"],e.prototype.sort=function(e,t){return this.flags.prettyAlgo||this.flags.noRandomForAutomationTests?this.fakeSort(e,t):this.rectangleSort(e,t)},Object.defineProperty(e.prototype,"isAddMode",{get:function(){return this.applicationState.isAddMode()},enumerable:!0,configurable:!0}),e.prototype.fakeSort=function(e,t){return this.flags.presetSettings?e.map(function(e){return{preset:e}}).concat(e.map(function(e){return{preset:e}})):e.map(function(e){return{preset:e,maskIndex:0}}).concat(e.map(function(e){return{preset:e,maskIndex:1}}))},e.prototype.rectangleSort=function(e,t){var i=this;this.printPrioritiesDebug(e,t);var o=[];if(this.flags.presetSettings)n.each(e,function(e){var n=i.defaultsService.getPriority(e,t),r=n%10;o[r]=o[r]||[],o[r].push({preset:e,priority:n})}),o=n.flatten(n.zip(o));else{var r=10;if(n.each(e,function(e){var n=i.defaultsService.getPriority(e,t);n<10&&(n+=r++);var a=Math.floor(n/10),s=n%10;o[s]||(o[s]=[]),o[s][a]={preset:e,maskIndex:0}}),this.isAddMode){var a=e[0];this.presetHelpers.getOptimalFieldMasksArray(a,t).length>1&&(o=o.concat(n.map(o,function(e){if(e)return n.map(e,function(e){if(e)return{preset:e.preset,maskIndex:1}})})))}}var s=this.applicationState.generateRandomOffset(t.getContentElementType(),o.length);return s>0&&this.insertArray(o,o.splice(0,s)),n.filter(n.flatten(o),function(e){return!!e})},e.prototype.insertArray=function(e,t){Array.prototype.splice.apply(e,[e.length,0].concat(t))},e.prototype.printPrioritiesDebug=function(e,t){var i=this;if(this.flags.debugMode){var o=n(e).filter(function(e){return e.data.priority}).groupBy(function(e){return i.defaultsService.getPriority(e,t)}).value(),r=n.map(e,function(e){return e.id});this.$window.console.log("%cPreset Priorities: "+n.keys(o),"color:green"),n.each(o,function(e,o){e.length>1&&i.$window.console.log("%cDuplication of Priority ["+t.contentElementType+"] ["+o+"] Preset IDs: "+n.map(e,function(e){return e.id}),"color:red")}),this.$window.console.log("%cPreset IDs: "+r,"color:green")}},e}();t.PresetPreviewSorter=o,angular.module("siteGeneratorBuilderInternal").service("presetPreviewSorter",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h){this.modelTree=e,this.storyServices=t,this.mergedHeaderService=i,this.mergedHeaderMergeableChecker=n,this.fixedHeaderService=o,this.presetPreviewFlagUtils=r,this.layoutSelectionStoreProvider=a,this.themeChooser=s,this.sectionManager=l,this.applicationState=c,this.flags=d,this.designKit=u,this.$q=p,this.$timeout=g,this.$rootScope=h}return e.$inject=["modelTree","storyServices","mergedHeaderService","mergedHeaderMergeableChecker","fixedHeaderService","presetPreviewFlagUtils","layoutSelectionStoreProvider","themeChooser","sectionManager","applicationState","flags","designKit","$q","$timeout","$rootScope"],e.prototype.isHeaderNode=function(e){return e&&"GeneralDescription"===e.contentElementType&&"footer"!==e.containerPageId},e.prototype.currentPageHasSections=function(){var e=this.modelTree.getNodeById(this.storyServices.story.selectedPage);return e&&e.children.length>1},e.prototype.decorateHeaderPreviews=function(e){var t=this;return e.map(function(e){return e.flags=t.presetPreviewFlagUtils.decorateHeaderPreview(e.flags),e})},e.prototype.clonePreviewWithoutFlags=function(e){var t={};return e.lss&&(t.lss=angular.copy(e.lss)),Object.assign(t,n.omit(e,["flags","lss"]))},e.prototype.getAllHeaderModes=function(e,t,i){void 0===i&&(i=!1);var o=e.flags||["none"],r=["fix","none"];return t&&(i&&!this.flags.mergedHeaderPhase2?this.mergedHeaderService.isHeaderMerged()&&(r=["mergeHeader"]):r.push("mergeHeader")),n.difference(r,o)},e.prototype.generateHeaderPreviews=function(e,t,i){var o=this;void 0===i&&(i=!1);var r=this.getAllHeaderModes(e,t,i).map(function(t){return"none"===t?o.clonePreviewWithoutFlags(e):Object.assign({},e,{flags:[t]})}).concat(e);return i&&this.mergedHeaderService.isHeaderMerged()&&(r=n.filter(r,function(e){return n.includes(e.flags,"mergeHeader")})),r},e.prototype.setFromCurrentPreset=function(e,t){return t.map(function(t){return t.flags=e,t})},e.prototype.permutateHeaderPreviews=function(e,t){var i=this,n=this.applicationState.isInMobileEditMode();if(this.flags.mergedHeaderPhase2&&n)return this.setFromCurrentPreset(t,e);var o=this.mergedHeaderService.isHeaderMergeable(void 0,{validateHeaderSolution:!1,validateIsFixed:!1},n);return e.map(function(e){return i.generateHeaderPreviews(e,o,n)}).reduce(function(e,t){return e.concat(t)},[])},e.prototype.addHeaderPreviews=function(e,t,i){if(this.isHeaderNode(t)&&this.currentPageHasSections()){var n=this.permutateHeaderPreviews(e,i);return this.decorateHeaderPreviews(n)}return e},e.prototype.normalizeHeaderPreview=function(e){this.sectionManager.setConfigurationForSection(e)},e.prototype.isHeaderSolutionMergeable=function(e){return this.flags.mergedHeaderPhase2?this.mergedHeaderMergeableChecker.isHeaderSolutionMergeable(e):this.mergedHeaderService.isHeaderSolutionMergeable(e)},e.prototype.isValidHeaderPreview=function(e){return!(n.includes(e.flags,"mergeHeader")&&!this.isHeaderSolutionMergeable(e.solution))&&!(n.includes(e.flags,"fix")&&!this.fixedHeaderService.isHeaderSolutionFixable(e.solution))},e.prototype.getHeaderAvailableBackgroundColors=function(e){return void 0===e&&(e=!1),(this.flags.lodash4?n.uniqBy:n[String("unique")])(this.themeChooser.coloration.getColorsForCurrentColoration("header",e),function(e){return e.hex.toUpperCase()})},e.prototype.getFooterAvailableBackgroundColors=function(){return(this.flags.lodash4?n.uniqBy:n[String("unique")])(this.themeChooser.coloration.getColorsForCurrentColoration("footer"),function(e){return e.hex.toUpperCase()})},e.prototype.shouldShowFixLabel=function(e,t){return void 0===t&&(t=!1),this.flags.mergedHeader&&e.flags&&"fix"===e.flags[0]&&(!this.flags.mergedHeaderPhase2||!t)},e.prototype.notifyHeaderPreviewUpdated=function(e){var t,i=this;switch(e){case"headerType":t=preset.UPDATE_SELECTED_PREVIEWS_KEY;break;case"headerBg":t=preset.UPDATE_ALL_PREVIEWS_KEY}this.$timeout(function(){return i.$rootScope.$broadcast(t)})},e.prototype.resetPreviewFlags=function(e){e.flags=this.presetPreviewFlagUtils.getPreviewFlagsByNode(e.node,!0)},e}();t.HeaderPresetUtils=o,angular.module("siteGeneratorBuilderInternal").service("headerPresetUtils",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a,s,l){this.modelTree=e,this.storyServices=t,this.mergedHeaderService=i,this.layoutSelectionStoreProvider=n,this.mediaOverrideManager=o,this.sectionBackgroundService=r,this.flags=a,this.slideShowService=s,this.themeChooser=l}return e.$inject=["modelTree","storyServices","mergedHeaderService","layoutSelectionStoreProvider","mediaOverrideManager","sectionBackgroundService","flags","slideShowService","themeChooser"],e.prototype.getSlideShowPresetType=function(e){return e.data.properties&&e.data.properties.slideShow},Object.defineProperty(e.prototype,"supportedContentTypes",{get:function(){return["Testimonial","Event","News","Project","Feature","TeamMember","Service","Product","Project"]},enumerable:!0,configurable:!0}),e.prototype.isNodeSupportSlideShow=function(e){return n.some(e.children)&&e.children[0].isListItem&&this.supportedContentTypes.indexOf(e.contentElementType)>=0&&(e.isDummy()||"color"===this.sectionBackgroundService.getBackground(e).mediaType)&&!("Gallery"===this.getSelectedMediaTypeForSlideShow(e))},e.prototype.getSelectedMediaTypeForSlideShow=function(e){var t=this.slideShowService.childrenExceptHeaderAndFooter(e);return this.mediaOverrideManager.getCurrentSelectedMediaTypeLabel(t[0])},e.prototype.isPresetSupportSlideShow=function(e){return this.getSlideShowPresetType(e)===core.SlideShowValues.Only},e.prototype.addSlideShowPresetFlag=function(e){e.flags=e.flags||[],e.flags.push(SlideShowService.SLIDE_SHOW_PRESET)},e.prototype.permutateSlideShowPreview=function(e){return this.addSlideShowPresetFlag(e),[e]},e.prototype.debugSlideShowPreset=function(e){return this.flags.debugSlideShow&&e.flags&&e.flags.indexOf("slideShowPreset")>-1},e.prototype.addSlideShowPreviews=function(e){var t=this;return n.map(e,function(e){var i=e.preset;return i&&t.isPresetSupportSlideShow(i)?t.permutateSlideShowPreview(e):e}),e.reduce(function(e,t){return e.concat(t)},[])},e.prototype.removeNonSlideShowPreviews=function(e){return n.filter(e,function(e){return n.includes(e.flags,SlideShowService.SLIDE_SHOW_PRESET)})},e}();t.SlideShowPresetUtils=o,angular.module("siteGeneratorBuilderInternal").service("slideShowPresetUtils",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n){this.layoutSelectionStoreProvider=e,this.mergedHeaderService=t,this.applicationState=i,this.flags=n}return e.$inject=["layoutSelectionStoreProvider","mergedHeaderService","applicationState","flags"],e.prototype.isHeaderNode=function(e){return e&&"GeneralDescription"===e.contentElementType&&"footer"!==e.containerPageId},e.prototype.getPreviewFlagsByNode=function(e,t){return this.isHeaderNode(e)?this.getCurrentPageHeaderFlags(t):void 0},e.prototype.getCurrentPageHeaderFlags=function(e){var t=[];return this.applicationState.isInMobileEditMode()&&!this.flags.mergedHeaderPhase2||this.layoutSelectionStoreProvider.getLayoutSelectionStore().getFixedHeader()&&t.push("fix"),this.mergedHeaderService.isHeaderMerged()&&t.push("mergeHeader"),e&&this.decorateHeaderPreview(t),t.length?t:void 0},e.prototype.decorateHeaderPreview=function(e){return e?e.push("limitLastPresetHeight"):e=["limitLastPresetHeight"],e},e}();t.PresetPreviewFlagUtils=n,angular.module("siteGeneratorBuilderInternal").service("presetPreviewFlagUtils",n)},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),r=function(){function e(e,t,i,n){this.flags=e,this.modelTree=t,this.presetHelpers=i,this.lssModifier=n}return e.$inject=["flags","modelTree","presetHelpers","lssModifier"],e.prototype.applyFieldMask=function(e,t,i,n,r){e.contentElement.calculateWantedArgs(),o.each(e.contentElement.values,function(t,n){e.argsMatchingPolicy[n]=i.indexOf(t.signature)>-1});var a=e.contentElement.getReferenceFields();o.each(a,function(e,t){e&&-1===i.indexOf(t)&&(a[t]=!1)}),e.contentElement.setReferenceFields(a),this.flags.sectionMedia&&r&&(n&&!e.isListHeader()||this.presetHelpers.convertAllOnMediaCoast2CoastPreset(e,t,n,!0),n||this.presetHelpers.convertPartialPreset(e,t)),e.contentElement.getNonBlankFields(),o.some(e.argsMatchingPolicy)||(e.userHidden=e.isListHeader()||e.isListFooter())},e.prototype.getPartKey=function(e,t){var i=e.preset.data.isList?core.SettingsPart.items:core.SettingsPart.single;return"ListHeader"===t?i=core.SettingsPart.header:"ListFooter"===t&&(i=core.SettingsPart.footer),i},e.prototype.getSettingPerPart=function(e,t,i){var n=this.getAllSettingsPerPart(e,i);if(i!==core.SettingsPart.header&&i!==core.SettingsPart.footer||(t%=n.length),n.length-1>=t)return n[t]},e.prototype.getAllSettingsPerPart=function(e,t){var i=e[t],n=this.presetHelpers.isHomePage();return o.filter(i,function(e){return e.usage===core.SettingsUsage.all||(n?e.usage===core.SettingsUsage.homePage:e.usage===core.SettingsUsage.innerPage)})},e.prototype.filterPresetsBySettings=function(e,t,i){var n=this;return e=o.map(e,function(e){return e.settings=n.getSetting(e,t[0].contentElementType,i,t[0].isList()),e}),o.filter(e,function(e){return!!e.settings})},e.prototype.splitPresetsBySettings=function(e,t){var i=this;if(e[0]&&e[0].preset.data.isList){var r=[],a=t[0],s=o.filter(a.children,function(e){return!e.isListHeader()&&!e.isListFooter()&&!e.userHidden}).length,l=a.getContentElementType();return o.each(e,function(e){var t=e.preset.data.properties.settings;if(t){var a=t[l]||t.all,c=i.getAllSettingsPerPart(a,core.SettingsPart.items),d=void 0;if(i.flags.headlessApi){var u=o.find([3,2,1],function(e){return s%e==0});d=o.map(c,function(e){return n({},e,{itemsPerRow:s%e.itemsPerRow==0?e.itemsPerRow:u})})}else d=o.filter(c,function(e){return s%e.itemsPerRow==0});d=(i.flags.lodash4?o.uniqBy:o[String("uniq")])(d,function(e){return e.itemsPerRow}),o.each(d,function(t){var n=ob.deepClone(e);i.lssModifier.adjustPresetNumOfItemsInRow(n.preset,t.itemsPerRow),r.push(n)})}}),r}return e},e.prototype.getSetting=function(e,t,i,n){var o=e.preset.data.properties.settings;if(o){var r=o[t]||o.all,a={};if(n?(a[core.SettingsPart.header]=this.getSettingPerPart(r,i,core.SettingsPart.header),a[core.SettingsPart.items]=this.getSettingPerPart(r,i,core.SettingsPart.items),a[core.SettingsPart.footer]=this.getSettingPerPart(r,i,core.SettingsPart.footer)):a[core.SettingsPart.single]=this.getSettingPerPart(r,i,core.SettingsPart.single),a[core.SettingsPart.single]||a[core.SettingsPart.items])return a}},e.prototype.applyPresetSettings=function(e,t,i,n,o){var r=this.getPartKey(t,e.contentElementType),a=t.settings[r];if(this.applyFieldMask(e,t,a.fieldMask,n,i),e.isListHeader()||e.isListFooter()||(this.lssModifier.changePresetTextAlign(e.contentElement,t.preset,a.textAlignment),this.lssModifier.changePresetOnMediaPosition(e.contentElement,t.preset,a.boxPositionOnMedia)),this.lssModifier.changePresetPartialLg(t.preset,a.contentColumnPosition),!o&&a.itemsPerRow&&n){var s=this.modelTree.getListItems(n),l=a.itemsPerRow*a.numberOfRows,c=s.length-l;c>0&&n.children.splice(n.children.indexOf(s[l]),c),this.lssModifier.adjustPresetNumOfItemsInRow(t.preset,a.itemsPerRow)}},e}();t.PresetSettingsService=r,angular.module("siteGeneratorBuilderInternal").service("presetSettingsService",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(15),o=function(){function e(e,t,i,n,o){this.presetFeatureDetector=e,this.presetListItemFeatureDetector=t,this.mediaOverride=i,this.lssModifier=n,this.FeatureList=o}return e.$inject=["presetFeatureDetector","presetListItemFeatureDetector","mediaOverride","lssModifier","FeatureList"],e.prototype.isPresetConvertible=function(e,t,i){var o=new this.FeatureList({preset:e,node:t}),r=function(e,i){return!t.isList()&&e||t.isList()&&i},a=function(){return!r(o.isColumnBG,o.isListColumnBG)&&(r(o.isImage,o.isListImage)||r(o.isExtVideo,o.isListExtVideo)||r(o.galleryType===n.MediaOverrideManager.MO_SLIDESHOW,o.listGalleryType===n.MediaOverrideManager.MO_SLIDESHOW))};if(i){return a()&&!r(o.isSideBySide&&o.hasDecorativeBox,!1)&&!r(!1,o.listHasDecorativeBox)&&!r(o.isShape,o.isListShape)&&!r(o.isCoastToCoast,o.isListCoastToCoast)&&!r(o.isCircularImage,o.isListCircularImage)&&!r(o.hasTextOnMedia,o.listHasTextOnMedia)&&!r(!1,o.isListZigZag)}return a()},e.prototype.convertPreset=function(e,t,i){var n=this;e=ob.deepClone(e);var o=ob.deepClone(this.mediaOverride.default),r=this.getFeatureDetector(t),a={node:t,preset:e},s=r.getOrCreateMediaPreferredOverride(a,o),l=i?"full":"fill";if(s.name="Image",s.superType="media",s.type="media",s.sourceProperties.imageScaling=l,s.properties.displayMode=l,t.isList()){var c=e.data.groups.filter(function(e){return!e.isHeader&&!e.isFooter}),d=c[0].layouts[0].selections.overrides.media;c.forEach(function(e){e.layouts.forEach(function(e){e.selections.overrides.media=d})})}return 1===r.getNumberOfColumns(a)&&(t.isList()?t.children.filter(function(e){return!e.isListHeader()&&!e.isListFooter()}).forEach(function(t){n.lssModifier.changePresetTextAlign(t.contentElement,e,"center")}):this.lssModifier.changePresetTextAlign(t.contentElement,e,"center")),e},e.prototype.getFeatureDetector=function(e){return e.isList()?this.presetListItemFeatureDetector:this.presetFeatureDetector},e}();t.FitModePresetConverter=o,angular.module("siteGeneratorBuilderInternal").service("fitModePresetConverter",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(75),o=i(0),r=function(){function e(e,t,i){this.FeatureList=e,this.slideShowPresetUtils=t,this.presetFeatureDetector=i}return e.$inject=["FeatureList","slideShowPresetUtils","presetFeatureDetector"],e.prototype.setAllPreviews=function(e){var t=this;this.allPreviews=e,this.previewsFeatures=this.allPreviews.map(function(e){return new t.FeatureList(e)})},e.prototype.unsetAllPreviews=function(){this.allPreviews=void 0,this.previewsFeatures=void 0},e.prototype.getAllPreviews=function(){return this.allPreviews},e.prototype.getFeatureFromPreview=function(e){var t=this.allPreviews.indexOf(e);return this.previewsFeatures[t]},e.prototype.getPresetData=function(e){var t=this.presetIdToPreview(e);return this.getFeatureFromPreview(t)},e.prototype.isInlineBottomMedia=function(e){var t=this.getPresetData(e);return t.hasMedia&&this.isInline(t)&&t.endsWithMedia},e.prototype.isInlineTopBox=function(e){var t=this.getPresetData(e);return this.isInline(t)&&t.hasDecorativeTextBox&&t.isMediaStretched},e.prototype.isInlineTopText=function(e){var t=this.getPresetData(e);return this.isInline(t)&&!t.hasDecorativeTextBox&&t.textPosition.indexOf("on")>-1},e.prototype.isInlineCircular=function(e){var t=this.getPresetData(e);return this.isInline(t)&&t.isCircularImage},e.prototype.isInlineShadow=function(e){var t=this.presetIdToPreview(e),i=this.getPresetData(e);return this.isInline(i)&&this.presetFeatureDetector.hasShadow(t)},e.prototype.isInlineWithMedia=function(e,t){var i=this.getFeatureFromPreview(e);return this.isInline(i)&&this.isMediaType(e,t)},e.prototype.isCoastToCoast=function(e){return this.getFeatureFromPreview(e).isCoastToCoast},e.prototype.isCoastToCoastWithBoxOnTop=function(e){var t=this.getFeatureFromPreview(e);return this.isCoastToCoast(e)&&t.hasDecorativeTextBox},e.prototype.isCoastToCoastMediaNotTop=function(e){var t=this.getFeatureFromPreview(e);return this.isCoastToCoast(e)&&!t.startsWithMedia},e.prototype.isCoastToCoastMediaIsTop=function(e){var t=this.getFeatureFromPreview(e);return this.isCoastToCoast(e)&&t.startsWithMedia&&!t.endsWithMedia},e.prototype.isRegularBG=function(e){var t=this.getFeatureFromPreview(e);return t.isBackground&&!t.isColumnBG},e.prototype.isColumnBG=function(e){return this.getFeatureFromPreview(e).isColumnBG},e.prototype.isColumnsStrechedMedia=function(e){var t=this.getFeatureFromPreview(e);return t.isColumn()&&t.isMediaStretched},e.prototype.isSlideShow=function(e){return this.slideShowPresetUtils.isPresetSupportSlideShow(e.preset)},e.prototype.isGallery=function(e,t){return this.getFeatureFromPreview(e).galleryType===t},e.prototype.isMediaType=function(e,t){var i=this.getFeatureFromPreview(e);return i.hasMedia&&i.mediaType.indexOf(t)>-1},e.prototype.getMediaType=function(e){return this.getFeatureFromPreview(e).mediaType},e.prototype.isWithoutImage=function(e){return!this.getFeatureFromPreview(e).hasMedia},e.prototype.isInline=function(e){return!e.isCoastToCoast&&!e.isColumnBG},e.prototype.presetIdToPreview=function(e){return o.find(this.allPreviews,function(t){return t.preset.id===e})},e.prototype.presetIdToPreviews=function(e){return o.filter(this.allPreviews,function(t){return t.preset.id===e})},e.prototype.isListShapeWithHeaderMedia=function(e){var t=this.getFeatureFromPreview(e);return this.isListMediaType(e,n.FeatureDetector.MediaTypes.shape)&&this.isListWithHeader(e)&&t.isCoastToCoast},e.prototype.isListMediaType=function(e,t){var i=this.getFeatureFromPreview(e);return i.listHasMedia&&i.listMediaType.indexOf(t)>-1},e.prototype.isListZigZag=function(e,t,i){var n=this.getFeatureFromPreview(e);return n.listZigZagType===t&&n.numberOfListItemsInRow===i},e.prototype.isListFull=function(e){return 1===this.getFeatureFromPreview(e).numberOfListItemsInRow},e.prototype.isListPart=function(e){return this.getFeatureFromPreview(e).numberOfListItemsInRow>1},e.prototype.isListWithTextBox=function(e,t){var i=this.getFeatureFromPreview(e);return"full"===t?this.isListFull(e)&&i.hasDecorativeTextBox:"part"===t?this.isListPart(e)&&i.hasDecorativeTextBox:void 0},e.prototype.isListWithCircularImages=function(e){return this.getFeatureFromPreview(e).isListCircularImage},e.prototype.isListWithHeader=function(e){return this.getFeatureFromPreview(e).hasListHeader},e}();t.PresetPreviewAnalyzer=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("presetPreviewAnalyzer",r).run(["presetPreviewAnalyzer","$window",function(e,t){t.presetPreviewAnalyzer=e}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(14),o=i(0),r=function(){function e(e,t,i,n,o,r,a){this.presetFeatureDetector=e,this.sitePartTypes=t,this.overlayManager=i,this.fitModePresetConverter=n,this.flags=o,this.modelTree=r,this.presetHelpers=a}return e.$inject=["presetFeatureDetector","sitePartTypes","overlayManager","fitModePresetConverter","flags","modelTree","presetHelpers"],e.prototype.create=function(e,t){return{node:t,strategyMode:n.PresetsStrategyMode.Change,isBackgroundSupported:!1,isChangeBgPermutationSupported:!1,filterPresets:e?this.onlyFitModePresets.bind(this):this.onlyImagePresets.bind(this),orderPresets:this.orderPresetsByCluster.bind(this),preCalculate:e?this.setFitMode.bind(this):this.setUnFitMode.bind(this),validatePresetPreview:e?this.validateFitModePreset.bind(this):null}},e.prototype.createInterleaving=function(e){return{node:e,strategyMode:n.PresetsStrategyMode.Change,isBackgroundSupported:this.flags.sectionMedia,isChangeBgPermutationSupported:this.flags.sectionMedia,filterPresets:null,orderPresets:this.orderPresetsByChunks.bind(this),preCalculate:this.interleaveFitMode.bind(this)}},e.prototype.onlyFitModePresets=function(e,t){var i=this;return e.filter(function(e){return i.fitModePresetConverter.isPresetConvertible(e,t[0],!0)})},e.prototype.onlyImagePresets=function(e,t){var i=this;return e.filter(function(e){return i.fitModePresetConverter.isPresetConvertible(e,t[0],!1)})},e.prototype.orderPresetsByChunks=function(e,t){var i=this,n=this.getRelevantNode(t[0]),o=this.overlayManager.listSpanManager.getSegmentByNodeId(n.id,this.sitePartTypes.BODY).getLE().cluster,r=function(e){return e.map(function(e){var o=i.getRelevantLayout(e,t[0]),r=i.presetFeatureDetector.enhanceWithRealStructure({},o,n).cluster;return{preset:e,fitMode:i.fitModePresetConverter.isPresetConvertible(e,t[0],!0),cluster:r}})}(e),a=r.filter(function(e){return e.fitMode}).sort(function(e,t){return e.cluster===o?-1:t.cluster===o?1:0}),s=r.map(function(e){var t=ob.deepClone(e);return t.fitMode=!1,t});return a.concat(s)},e.prototype.orderPresetsByCluster=function(e,t){var i=this,n=this.getRelevantNode(t[0]),o=e.map(function(e){var o=i.getRelevantLayout(e,t[0]);return{preset:e,cluster:i.presetFeatureDetector.enhanceWithRealStructure({},o,n).cluster}}),r=this.overlayManager.listSpanManager.getSegmentByNodeId(n.id,this.sitePartTypes.BODY).getLE().cluster;return o.sort(function(e,t){return e.cluster===r?-1:t.cluster===r?1:19===e.cluster||21===e.cluster?-1:19===t.cluster||21===t.cluster?1:0})},e.prototype.getRelevantNode=function(e){return e.isList()?o.find(this.modelTree.getListItems(e),function(e){return!e.isUserHidden()}):e},e.prototype.getRelevantLayout=function(e,t){return t.isList()?e.data.groups.find(function(e){return!e.isHeader&&!e.isFooter}).layouts[0]:e.data.groups[0].layouts[0]},e.prototype.interleaveFitMode=function(e,t){return this.setDisplayMode(e,e.fitMode)},e.prototype.setFitMode=function(e){return this.setDisplayMode(e,!0)},e.prototype.setUnFitMode=function(e){return this.setDisplayMode(e,!1)},e.prototype.switchMediaToInline=function(e){var t=this.presetHelpers.getMediaFieldName(e.node);e.node.argsMatchingPolicy[t]=!0,e.bg=this.presetHelpers.getBgColorOption()},e.prototype.setDisplayMode=function(e,t){return t&&this.switchMediaToInline(e),e.preset=this.fitModePresetConverter.convertPreset(e.preset,e.node,t),e},e.prototype.validateFitModePreset=function(e,t){var i=function(e){return e.solution.find(function(e){return"ListHeader"!==e.contentType&&"ListFooter"!==e.contentType}).segments[0]}(t),n=i.getLE(),o=n.getLayoutSelectionStore().getImageStretch(i,n);if(!o)return!0;var r=function(e){return e.layout.find(function(e){return"container"===e.type&&"decorative"===e.containerRole})}(n);if(!r)return!0;var a=n.getMediaLayout(),s=a.left-o.left,l=a.top-o.top,c=a.width+o.left+o.right,d=a.height+o.top+o.bottom,u={x:s,y:l},p={x:u.x+c,y:u.y+d},g={x:r.left,y:r.top},h={x:g.x+r.width,y:g.y+r.height};return!this.areRectsOverlapping(u,p,g,h)},e.prototype.areRectsOverlapping=function(e,t,i,n){return!(e.x>n.x||i.x>t.x)&&!(e.y>n.y||t.y<i.y)},e}();t.FitModePresetsStrategyOptions=r,angular.module("siteGeneratorBuilderInternal").service("fitModePresetsStrategyOptions",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(14),o=function(){function e(e,t,i,n,o){this.flags=e,this.presetHelpers=t,this.sectionBackgroundService=i,this.$injector=n,this.mediaTypeResolver=o}return e.$inject=["flags","presetHelpers","sectionBackgroundService","$injector","mediaTypeResolver"],e.prototype.create=function(){return{strategyMode:n.PresetsStrategyMode.Change,isBackgroundSupported:this.flags.sectionMedia,isChangeBgPermutationSupported:this.flags.sectionMedia,preCalculate:this.preCalculate.bind(this)}},e.prototype.preCalculate=function(e){return e.preset.data.isMobile?(e.node.preferredMedia=void 0,e):(this.shouldRemoveBackground(e)&&this.removeBackground(e),this.addPreferredMedia(e),e)},e.prototype.shouldRemoveBackground=function(e){if(this.flags.med_keepMediaTypeWhenChangingLayout&&this.getMediaTypeFromPreview(e)===cc.MediaPreviewType.Pattern)return e.node.argsMatchingPolicy[this.presetHelpers.getMediaFieldName(e.node)]=!1,!1;return!0},e.prototype.hasBackground=function(e){return this.sectionBackgroundService.getBackground(e).mediaType!==core.BgMediaTypes.COLOR},e.prototype.getRelevantLayout=function(e){return e.data.isList?e.data.groups.find(function(e){return!e.isHeader&&!e.isFooter}).layouts[0]:e.data.groups[0].layouts[0]},e.prototype.getRelevantNode=function(e){return e.isList()&&(e=e.children.find(function(e){return!e.isUserHidden()&&!e.isListHeader()&&e.isListItem})||e),e},e.prototype.presetIsOnMedia=function(e){return!!this.getRelevantLayout(e).onMediaStructure},e.prototype.removeBackground=function(e){if(!e.node.isList()&&this.hasBackground(e.node)&&!this.presetIsOnMedia(e.preset)){var t=this.presetHelpers.getMediaFieldName(e.node);e.node.argsMatchingPolicy[t]=!0,e.bg=this.presetHelpers.getBgColorOption()}return e},e.prototype.addPreferredMedia=function(e){var t=this.getMediaTypeFromPreview(e);return this.flags.med_keepMediaTypeWhenChangingLayout&&(e.node.preferredMedia=this.getPreferredMediaType(t)),this.flags.med_supportGallery&&t===cc.MediaPreviewType.MultipleImages&&(e.node.preferredMedia="gallery"),e},e.prototype.getMediaTypeFromPreview=function(e){var t=this.getRelevantNode(e.node);return this.mediaTypeResolver.getType(t)},e.prototype.getPreferredMediaType=function(e){return this.headless=this.headless||this.$injector.get("headless"),this.headless.previewMediaTypeToPreferredMedia(e)},e}();t.MedPresetsStrategyOptions=o,angular.module("siteGeneratorBuilderInternal").service("medPresetsStrategyOptions",o)},function(e,t){angular.module("siteGeneratorBuilderInternal").constant("curatedPreviewPresets",{rows:[{Header:["5a2512a22f7c48caae403273"],Footer:["56d2905e49f9964900f9e90b"],Contact:["5a7710331feac620f68c779a"],Welcome:["5a01a5ec88dd176f8076fe54","5a01cc5da02be1247206faf1","5a26baf45d28a044b46ce812","5a26c1675d28a044b46ce814"],About:["5a16e95bb74025b81a61f455","5a2577dcd8e1a9507c20165d","5a01cc5da02be1247206faf1","5a01a5ec88dd176f8076fe54","5a26b0716b3423af42051fdd"],"Opening Hours":["5a0b1d0fafa6457906258cb5","5a0b1d37afa6457906258cb6","5a0b1d97afa6457906258cb8"],Quote:["5a1a8e34f0f3e37de5010dd8"],Headliner:["5a37eed7402ae538f0ab1801","5a37ef03402ae538f0ab1802"],Services:["5a2e8c6d87d33911dc6d479e","5acf2d5437b1633f41333607","5a16b565b20a505919a9af01"],Testimonials:["59db5e94cd70c914003b28dd"],FAQ:["5a1d84f2f72e89ddd32b3246"],CV:["5a1d87bee3b856d3df511fc0"],Clients:["5a1ea92a063373812fe67124"],"Team Members":["5a2531a5899c13668a27abcd"]},{Header:["5a25273b841c6dd81faf34c0"],Footer:["56d2905e49f9964900f9e90b"],Contact:["5a8e966ccb08f2c961905d1c"],Welcome:["5a780ed3ab9e4263b4352a05"],About:["5ac24510e18cdda174c6fb8a","5a26b13f6b3423af42051fe0"],"Opening Hours":["5abcf1136eb8ee1527148d55"],Quote:["5a1a8d0ff0f3e37de5010dd5","5b1fc037447abf8631bde8e7"],Headliner:["5a37eeaf402ae538f0ab1800"],Services:["5a0c4bbb8d6593558b2215dd","5a0c4c0b8d6593558b2215de"],Testimonials:["59da33cdeaf8b1140073c5e8"],FAQ:["5a1d84f2f72e89ddd32b3246"],CV:["5a1d8847e3b856d3df511fc1"],Clients:["5a1ea92a063373812fe67124"],"Team Members":["5a2540a1899c13668a27abce"]},{Header:["5a44b54343e7d88955ccb333"],Footer:["56d2905e49f9964900f9e90b"],Contact:["5a77145d1feac620f68c779b"],Welcome:["5a257793d8e1a9507c20165c"],About:["5a01cdffa02be1247206faf5","5a01cd3ca02be1247206faf3"],"Opening Hours":["5abcf1136eb8ee1527148d55"],Quote:["5a1a8e34f0f3e37de5010dd8"],Headliner:["5a37eed7402ae538f0ab1801","5a37ef03402ae538f0ab1802"],Services:["5a0c49afc917e0238d3f835f","5a09b1bf0495cf4ebf062098","5a0c49f1c917e0238d3f8360","5a411088fa0281edf060629e","5ac25cfc70beb9996d675cdc"],Testimonials:["5a1be8993d8b3e9de36c405b"],FAQ:["5a1d84f2f72e89ddd32b3246"],CV:["5a1d88fbe3b856d3df511fc2"],Clients:["5a1ea92a063373812fe67124"],"Team Members":["5a255752814a1531a555aaa5","5a2563f3171ee42833ad8f13"]},{Header:["5a2512a22f7c48caae403273"],Footer:["56d28c34a2424f9a00290863"],Contact:["5a8e980ccb08f2c961905d1d"],Welcome:["5a01cccea02be1247206faf2"],About:["5a257832d8e1a9507c20165e","5a16e9eab74025b81a61f456"],"Opening Hours":["5a0b1cc1afa6457906258cb4"],Quote:["5a1a8d0ff0f3e37de5010dd5","5b1fc037447abf8631bde8e7"],Headliner:["5a37eeaf402ae538f0ab1800"],Services:["5aef0ca7378733708a6e0ebe","5a16b565b20a505919a9af01","5b30c74fe700ffb755c6e6f3","5b30c88ce700ffb755c6e6f4","5b548831f5a6daf43f961a8e","5b55e1ba6eb78f0e6def630c","5b55e4ea0239bc3e44ed757c"],Testimonials:["5a687bf3dcaba52cd26994f9"],FAQ:["5a1d8551f72e89ddd32b3247"],CV:["5a1d87bee3b856d3df511fc0"],Clients:["5a1ea9da063373812fe67125"],"Team Members":["5a25648b171ee42833ad8f15"]},{Header:["5900aa7088524514007e9cb0"],Footer:["56d2905e49f9964900f9e90b"],Contact:["5a8c25240a94c8d8e4918b6a"],Welcome:["5a01cdffa02be1247206faf5","5ac25033817c1b5084a32934","5a01cd3ca02be1247206faf3"],About:["5ac24510e18cdda174c6fb8a","5a26b13f6b3423af42051fe0"],"Opening Hours":["5a0b1d65afa6457906258cb7"],Quote:["5a1a8d0ff0f3e37de5010dd5"],Headliner:["5a37ef39402ae538f0ab1804"],Services:["5aef0370d583ba88c827cca9","5a16ceeb83855c70f0edd8f5"],Testimonials:["5a1be8993d8b3e9de36c405b"],FAQ:["5a1d84f2f72e89ddd32b3246"],CV:["5a1d8847e3b856d3df511fc1"],Clients:["5a1ea92a063373812fe67124"],"Team Members":["5a2531a5899c13668a27abcd"]},{Header:["5a2512a22f7c48caae403273"],Footer:["56d28c34a2424f9a00290863"],Contact:["5a8e966ccb08f2c961905d1c"],Welcome:["5a2577dcd8e1a9507c20165d","5a16e95bb74025b81a61f455"],About:["5a01cccea02be1247206faf2","5b1ce4e7ae7370db3f96e8e9"],"Opening Hours":["5a0b1cc1afa6457906258cb4"],Quote:["5b1fc037447abf8631bde8e7","5a1a8d0ff0f3e37de5010dd5"],Headliner:["5a37eeaf402ae538f0ab1800"],Services:["5a16bf6eb20a505919a9af04","5a2e8c6d87d33911dc6d479e"],Testimonials:["5a1be9583d8b3e9de36c405e"],FAQ:["5a1d8551f72e89ddd32b3247"],CV:["5a1d88fbe3b856d3df511fc2"],Clients:["5a1ea9da063373812fe67125"],"Team Members":["5a2563f3171ee42833ad8f13","5a255752814a1531a555aaa5"]},{Header:["5a2512a22f7c48caae403273"],Footer:["56d2905e49f9964900f9e90b"],Contact:["5a77145d1feac620f68c779b"],Welcome:["5a01a5ec88dd176f8076fe54","5a01cc5da02be1247206faf1","5a26baf45d28a044b46ce812","5a26c1675d28a044b46ce814"],About:["5ac24510e18cdda174c6fb8a","5a01cd3ca02be1247206faf3"],"Opening Hours":["5abcf1136eb8ee1527148d55"],Quote:["5a1a8e55f0f3e37de5010dd9"],Headliner:["5a37eed7402ae538f0ab1801","5a37ef03402ae538f0ab1802"],Services:["5a09b1bf0495cf4ebf062098","5a411088fa0281edf060629e","5ac25cfc70beb9996d675cdc","5b1e91646c71834ec4d95de7","5b1f89766c71834ec4d95de8","5b548831f5a6daf43f961a8e","5b55e1ba6eb78f0e6def630c","5b55e4ea0239bc3e44ed757c"],Testimonials:["59db5e94cd70c914003b28dd"],FAQ:["5a1d84f2f72e89ddd32b3246"],CV:["5a1d87bee3b856d3df511fc0"],Clients:["5a1ea92a063373812fe67124"],"Team Members":["5a254171899c13668a27abd1"]},{Header:["5a25273b841c6dd81faf34c0"],Footer:["56d28c34a2424f9a00290863"],Contact:["5a8e980ccb08f2c961905d1d"],Welcome:["5a780e46ab9e4263b4352a04"],About:["5a26b13f6b3423af42051fe0","5a257832d8e1a9507c20165e","5a16e9eab74025b81a61f456"],"Opening Hours":["5a0b1d65afa6457906258cb7"],Quote:["5b1fc037447abf8631bde8e7","5a1a8d0ff0f3e37de5010dd5"],Headliner:["5a37eeaf402ae538f0ab1800"],Services:["5a16cf5083855c70f0edd8f6","5a16b565b20a505919a9af01","5b1e91646c71834ec4d95de7","5b1f89766c71834ec4d95de8"],Testimonials:["5a687bf3dcaba52cd26994f9"],FAQ:["5a1d8551f72e89ddd32b3247"],CV:["5a1d8847e3b856d3df511fc1"],Clients:["5a1ea9da063373812fe67125"],"Team Members":["5a2540a1899c13668a27abce"]},{Header:["5a2512a22f7c48caae403273"],Footer:["56d28c34a2424f9a00290863"],Contact:["5a8e980ccb08f2c961905d1d"],Welcome:["5a257832d8e1a9507c20165e","5a16e9eab74025b81a61f456"],About:["5a01cccea02be1247206faf2","5b1ce4e7ae7370db3f96e8e9"],"Opening Hours":["5abcf1136eb8ee1527148d55"],Quote:["5a1a8d0ff0f3e37de5010dd5"],Headliner:["5a37eeaf402ae538f0ab1800"],Services:["5aef0ca7378733708a6e0ebe","5a16bf6eb20a505919a9af04","5b30c74fe700ffb755c6e6f3","5b30c88ce700ffb755c6e6f4"],Testimonials:["5a1be9583d8b3e9de36c405e"],FAQ:["5a1d8551f72e89ddd32b3247"],CV:["5a1d88fbe3b856d3df511fc2"],Clients:["5a1ea9da063373812fe67125"],"Team Members":["5a25648b171ee42833ad8f15"]},{Header:["5a25268fee123130f20b4c98"],Footer:["56d28c34a2424f9a00290863"],Contact:["5a77163a1feac620f68c779c"],Welcome:["5a37f324be9cb5eb1e8a621d"],About:["5a16e818b74025b81a61f454","5a16e516b74025b81a61f44e"],"Opening Hours":["5abcf2826eb8ee1527148d58"],Quote:["5b1fc037447abf8631bde8e7","5a1a8d0ff0f3e37de5010dd5"],Headliner:["5a37ef78402ae538f0ab1805"],Services:["5a0c49f1c917e0238d3f8360","5a09b1bf0495cf4ebf062098","5b55e55b0239bc3e44ed757d","5b55eccb0239bc3e44ed757f"],Testimonials:["5a1be8db3d8b3e9de36c405c"],FAQ:["5a1d8551f72e89ddd32b3247"],CV:["5a1d87bee3b856d3df511fc0"],Clients:["5a1ea9da063373812fe67125"],"Team Members":["59da3498d873ea1300a5f02d"]},{Header:["5a2512a22f7c48caae403273"],Footer:["56d28c34a2424f9a00290863"],Contact:["5a8c25240a94c8d8e4918b6a"],Welcome:["5a01cd76a02be1247206faf4","5a3bc5af88838d7398d460d0"],About:["5a01cd76a02be1247206faf4","5a26b1f76b3423af42051fe3"],"Opening Hours":["5a0b1d65afa6457906258cb7"],Quote:["5a1a8e55f0f3e37de5010dd9","5b1fc037447abf8631bde8e7"],Headliner:["5a37eeaf402ae538f0ab1800"],Services:["5aef0370d583ba88c827cca9","5a16ceeb83855c70f0edd8f5","5a143ff21d80af6f76ae308e"],Testimonials:["5a1be9583d8b3e9de36c405e"],FAQ:["5a1d8551f72e89ddd32b3247"],CV:["5a1d8847e3b856d3df511fc1"],Clients:["5a1ea9da063373812fe67125"],"Team Members":["5a2563ad171ee42833ad8f12"]},{Header:["5a2513f5b498f4636cafd66c"],Footer:["56d2905e49f9964900f9e90b"],Contact:["5a77145d1feac620f68c779b"],Welcome:["5a257720d8e1a9507c20165b"],About:["5a01cccea02be1247206faf2","5b1ce4e7ae7370db3f96e8e9"],"Opening Hours":["5a0b1cc1afa6457906258cb4"],Quote:["5a1a8d0ff0f3e37de5010dd5"],Headliner:["5a37eeaf402ae538f0ab1800"],Services:["5aef0ca7378733708a6e0ebe","5a16bf6eb20a505919a9af04","5b30c74fe700ffb755c6e6f3","5b30c88ce700ffb755c6e6f4"],Testimonials:["5a1be8db3d8b3e9de36c405c"],FAQ:["5a1d84f2f72e89ddd32b3246"],CV:["5a1d88fbe3b856d3df511fc2"],Clients:["5a1ea92a063373812fe67124"],"Team Members":["5a255752814a1531a555aaa5","5a2563f3171ee42833ad8f13"]}],aliases:{Header:"Header",Footer:"Footer",Contact:"Contact",Welcome:"Welcome",About:"About",Homepage_about:"About",Inner_about:"About",OpeningHours:"Opening Hours",Quote:"Quote","Quote Single":"Quote","Testimonial Single":"Quote",Widget:"Headliner",TPA_Header:"Headliner",Service:"Services",Product:"Services",Project:"Services",Feature:"Services",Event:"Services",News:"Services","Testimonial List":"Testimonials",Testimonial:"Testimonials",FAQ:"FAQ",CV:"CV",Client:"Clients",TeamMember:"Team Members"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){var n=this;this.flags=e,this.$timeout=t,this.$window=i,this.showIt=!1,this.$window.addEventListener("mousedown",function(e){!n.showIt&&!n.timeout||$(e.target).parents().andSelf().is("logo-extraction-popup")||n.hideLogoPopup()})}return e.$inject=["flags","$timeout","$window"],e.prototype.shouldShowPopup=function(){return this.showIt},e.prototype.showLogoPopup=function(e,t,i,n){var o=this;this.hideLogoPopup(),this.timeout=this.$timeout(function(){o.getLogoColoration=i,o.origin=e,o.anchorSelector=t,o.showIt=!0},n),this.timeout.then(function(){o.getLogoColoration()})},e.prototype.hideLogoPopup=function(){this.origin=null,this.anchorSelector=null,this.showIt=!1,this.timeout&&(this.$timeout.cancel(this.timeout),this.timeout=null)},e.prototype.getAnchorSelector=function(){return this.anchorSelector},e.prototype.getOrigin=function(){return this.origin},e}();t.LogoExtractionPopupService=n,angular.module("siteGeneratorBuilderInternal").service("logoExtractionPopupService",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e){this.modelTree=e}return e.$inject=["modelTree"],e.prototype.getLogoURL=function(){var e=this.modelTree.getGeneralInformation(),t=n.get(e.contentElement.getFieldValue("Logo"),"value[0]");return t&&LogoColorService.getResizedWixImageURL(t)},e.prototype.isLogoVisible=function(){return!0},e}();t.BuilderLogoPersistence=o,angular.module("siteGeneratorBuilderInternal").service("builderLogoPersistence",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(1),r=i(0),a=function(){return function(e,t,i,n,o,r,a){void 0===t&&(t=!0),void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=null),void 0===r&&(r=!1),void 0===a&&(a=!1),this.story=e,this.refresh=t,this.setTheme=i,this.forceDsSave=n,this.revision=o,this.saveWithDs=r,this.mobileEditor=a}}(),s=5e3,l=function(){function e(e,t,i,n,o,a,l,c,d){var u=this;this.undoStateManager=e,this.$timeout=t,this.obMonitoring=i,this.autoSaveNotifier=n,this.$location=o,this.consumerBiLogger=a,this.applicationState=l,this.exitNotification=c,this.flags=d,this.ongoingSave={shouldSetTheme:!1,shouldDsSave:!1,reset:function(){u.ongoingSave.shouldSetTheme=!1,u.ongoingSave.shouldDsSave=!1}},this.maxInMemorySavedStories=10,this.maxOperationsPerSave=5,this.maxTimeBetweenSavesInMilliSeconds=1e4,this.normalAutoSave={maxOperationsPerSave:5,maxTimeBetweenSavesInMilliSeconds:this.maxTimeBetweenSavesInMilliSeconds},this.slowAutoSave={maxOperationsPerSave:1e4,maxTimeBetweenSavesInMilliSeconds:5184e6},this.undoCheckpoints=[],this.redoCheckpoints=[],this.timeoutPromise=null,this.unsavedRevisions=0,this.canUndo=function(){return u.undoCheckpoints.length>0},this.canRedo=function(){return u.redoCheckpoints.length>0},this.captureInitialState=function(){return u.updateCurrentState()},this.captureTextOperation=r.throttle(function(){return u.captureOperation(!1,!1,!1,!1,!0)},s,{leading:!1,trailing:!0}),this.setStoryDebounced=r.debounce(this.setStory,1e3),r.has(this.$location.search(),"delayAutoSave")&&this.delayAutoSave()}return e.$inject=["undoStateManager","$timeout","obMonitoring","autoSaveNotifier","$location","consumerBiLogger","applicationState","exitNotification","flags"],e.prototype.captureOperation=function(e,t,i,o,r){void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===r&&(r=!1),this.obMonitoring.mark({name:"captureOperation"}),this.flags.mergedHeader&&n.PubSub.fire(n.events.BEFORE_CAPTURE_OPERATION);var a=this.applicationState.isInMobileEditMode();this.currentState.refresh=e||a,this.currentState.forceDsSave=i,this.currentState.saveWithDs=o,this.currentState.setTheme=t,this.currentState.mobileEditor=a,this.flags.disableUndoRedo||(this.undoCheckpoints.push(this.currentState),this.redoCheckpoints=[],this.updateCurrentState(o),this.maintainUndoListSize()),this.handleAutoSave(!1,r),this.obMonitoring.measure({name:"captureOperation"})},e.prototype.undo=function(e){void 0===e&&(e=!1),this.canUndo()&&this.undoOrRedo("undo",e,this.undoCheckpoints,this.redoCheckpoints)},e.prototype.redo=function(e){void 0===e&&(e=!1),this.canRedo()&&this.undoOrRedo("redo",e,this.redoCheckpoints,this.undoCheckpoints)},e.prototype.delayAndDisableAutoSave=function(){this.disableAutoSave(),this.delayAutoSave()},e.prototype.disableAutoSave=function(){this.cancelAllTimeouts()},e.prototype.enableAutoSave=function(){this.handleAutoSave()},e.prototype.reloadAndResetToLatest=function(){var e=this;return this.undoStateManager.loadStoryRevision(void 0,!0,!0).then(function(){return e.resetState()})},e.prototype.resetState=function(){this.updateCurrentState()},e.prototype.updateCurrentState=function(e,t){void 0===e&&(e=!1),this.currentState=new a(this.undoStateManager.getCurrentStory(),!0,!1,!1,null,e||this.currentState&&this.currentState.saveWithDs,!(!this.currentState||!this.currentState.mobileEditor)),t&&r.assign(this.currentState,t)},e.prototype.undoOrRedo=function(e,t,i,n){this.consumerBiLogger.builder.undoRedoLastChange(e);var o=i.pop(),r=this.currentState;n.push(this.currentState),this.currentState=o,this.ongoingSave.shouldSetTheme=this.ongoingSave.shouldSetTheme||r.setTheme||o.setTheme,this.ongoingSave.shouldDsSave=this.ongoingSave.shouldDsSave||r.forceDsSave||o.forceDsSave,t?this.setStoryDebounced(e,o):this.setStory(e,o)},e.prototype.setStory=function(t,i){var a=this;this.obMonitoring.mark({name:t}),this.updateStoryToNewState(i,t).then(function(){a.handleAutoSave(a.ongoingSave.shouldDsSave),a.ongoingSave.reset(),a.updateCurrentState(!1,r.pick(i,e.PROPERTIES)),a.obMonitoring.measure({name:t}),a.consumerBiLogger.builder.undoRedoSucces(t)}).then(function(){n.PubSub.fire(n.events.NEW_STATE_STORY_WAS_SET)}).catch(function(e){return a.consumerBiLogger.err(o.BIErrorCodes.UndoRedoFailed,e?JSON.stringify(e):"Unable to undo/redo")})},e.prototype.updateStoryToNewState=function(e,t){return e.story?this.undoStateManager.setStory(e.story,e.refresh,this.ongoingSave.shouldSetTheme,e.mobileEditor):this.loadStoryRevision(t,e)},e.prototype.loadStoryRevision=function(e,t){var i=this;return this.consumerBiLogger.builder.undoRedoLastChangeFetchFromServer(e),this.undoStateManager.loadStoryRevision(t.revision,t.refresh,t.setTheme,t.mobileEditor).then(function(){return i.consumerBiLogger.builder.undoRedoSuccessRetrieveFromServer(e)})},e.prototype.maintainUndoListSize=function(){var e=r.filter(this.undoCheckpoints,function(e){return e&&null!==e.story});e.length>this.maxInMemorySavedStories&&(e[0].story=null),this.undoCheckpoints=this.undoCheckpoints.filter(function(e){return e&&(null!==e.story||null!==e.revision)})},e.prototype.handleAutoSave=function(e,t){var i=this;if(void 0===e&&(e=!1),void 0===t&&(t=!1),e||this.unsavedRevisions===this.maxOperationsPerSave-1)this.autoSave(e);else{var n=this.flags.smallActionsSaveLess&&t?.25:1;this.unsavedRevisions+=n,this.toggleOnBeforeUnloadWarning(),null===this.timeoutPromise&&(this.timeoutPromise=this.$timeout(function(){return i.autoSave(!1)},this.maxTimeBetweenSavesInMilliSeconds))}},e.prototype.toggleOnBeforeUnloadWarning=function(){this.flags.lessBeforeUnloadWarnings&&(this.unsavedRevisions>0?this.exitNotification.on():this.exitNotification.off())},e.prototype.autoSave=function(e){var t=this;if(this.obMonitoring.mark({name:"autoSave"}),!this.applicationState.isOnAddState()){var i=this.currentState,n=e||this.currentState.saveWithDs,o=this.undoStateManager.saveStory(n,this.currentState.story).then(function(e){return i.revision=e}).then(function(){t.toggleOnBeforeUnloadWarning()});return this.currentState.saveWithDs=!1,this.autoSaveNotifier.onSave(o),this.cancelAllTimeouts(),this.unsavedRevisions=0,o.then(function(){return t.obMonitoring.measure({name:"autoSave",data:{shouldSaveRevision:e}})}),o}this.cancelAllTimeouts()},e.prototype.manualSave=function(){return this.autoSave(!0)},e.prototype.cancelAllTimeouts=function(){this.timeoutPromise&&(this.$timeout.cancel(this.timeoutPromise),this.timeoutPromise=null)},e.prototype.delayAutoSave=function(){r.assign(this,this.slowAutoSave)},e.prototype.setSlowAutoSave=function(e){void 0===e&&(e=!1),r.assign(this,e?this.slowAutoSave:this.normalAutoSave)},e.prototype.startSlowAutoSave=function(){this.setSlowAutoSave(!0)},e.prototype.endSlowAutoSave=function(){var e=this;return this.setSlowAutoSave(!1),this.autoSave(!0).then(function(){e.undoCheckpoints.length=0,e.undoStateManager.markAsMajorRevision()})},e.PROPERTIES=["refresh","forceDsSave","setTheme","revision","saveWithDs"],e}();t.UndoRedo=l,angular.module("siteGeneratorBuilderInternal").service("undoRedo",l)},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),a=(function(){function e(){}e.STORY_REVISION_CHANGED="storyRevisionChanged"}(),function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p){this.storyServices=e,this.wizardService=t,this.consumerPublishService=i,this.Story=n,this.layoutSolver=o,this.pagesManager=r,this.applicationState=a,this.themeChooser=s,this.menuService=l,this.spinnerService=c,this.siteState=d,this.consumerBiLogger=u,this.flags=p}return e.$inject=["storyServices","wizardService","consumerPublishService","Story","layoutSolver","pagesManager","applicationState","themeChooser","menuService","spinnerService","siteState","consumerBiLogger","flags"],e.prototype.getCurrentStory=function(){return this.storyServices.story.getCurrentState()},e.prototype.setStory=function(e,t,i,n){var o=this;return this.spinnerService.waitForMe("setStory"),t&&(this.applicationState.clearContentFocus(),this.applicationState.goToBuilder()),e.revision=this.storyServices.story.revision,this.storyServices.story.setState(e),this.pagesManager.changeStory().then(function(){return o.pagesManager.goToPage(o.storyServices.story.selectedPage)}).then(function(){o.wizardService.setFixedHeader()}).then(function(){return n?o.layoutSolver.onNodeChanged().then(function(){return o.applicationState.isInMobileEditMode()?o.storyServices.calculateAndRenderDesktopAndMobilePages("current",!1,!1,!0):o.applicationState.goToMobilePage(o.storyServices.story.selectedPage,!0)}):o.applicationState.isInMobileEditMode()?o.applicationState.disableMobileEditor().then(function(){return o.layoutSolver.onNodeChanged()}):o.layoutSolver.onNodeChanged()}).then(function(){if(i)return o.themeChooser.setStoryStyles(o.storyServices.story,!0)}).then(function(){return r.PubSub.fire(r.events.STORY_REVISION_CHANGED),o.siteState.waitForChanges()}).then(function(){o.menuService.refresh()}).finally(function(){o.spinnerService.imDone("setStory")})},e.prototype.saveStory=function(e,t){return n(this,void 0,void 0,function(){var e=this;return o(this,function(t){switch(t.label){case 0:return this.consumerBiLogger.builder.autosaveStart(!1),this.flags.templateSite?(this.flags.templateSite=!1,[4,this.consumerPublishService.markStoryAsCreated()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2,this.consumerPublishService.saveStory(void 0,void 0,!0).then(function(){return e.consumerBiLogger.builder.autosaveEnd(),e.storyServices.story.revision})]}})})},e.prototype.markAsMajorRevision=function(){return this.storyServices.story.markAsMajorRevision()},e.prototype.loadStoryRevision=function(e,t,i,n){var o=this;return void 0===n&&(n=!1),this.spinnerService.waitForMe("loadStoryRevision"),this.Story.getStoryDataByVersion(this.storyServices.story.id,e).then(function(e){return e.revision=o.storyServices.story.revision,o.setStory(e,t,i,n)}).finally(function(){o.spinnerService.imDone("loadStoryRevision")})},e}());t.UndoStateManager=a,angular.module("siteGeneratorStaticsConsumerAppInternal").service("undoStateManager",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(56),r=i(0),a=function(){function e(e,t,i,n){this.publishService=e,this.flags=t,this.storyServices=i,this.publishTimer=n,t.headlessApi||this.subscribeEvents()}return e.$inject=["publishService","flags","storyServices","publishTimer"],e.prototype.handlePublishRelatedEvents=function(){this.publishService.isSitePublished()||(n.PubSub.fire(n.events.PUBLISH_INTERACTIONS_UPDATED),this.flags.smartAssistTpa&&this.publishTimer.isTimeToPublish()&&n.PubSub.fire(n.events.TPA_INTERACTIONS_UPDATED))},e.prototype.subscribeEvents=function(){var e=this;this.flags.smartAssistTpa&&(n.PubSub.subscribe(n.events.STORY_SAVE_AFTER_SITE_CHANGE,function(){e.incrementStoryValue(o.PublishTimer.revisionsUpdatedKey),e.handlePublishRelatedEvents()}),n.PubSub.subscribe(n.events.PREVIEW_ENTERED,function(){e.incrementStoryValue(o.PublishTimer.previewEnteredKey),e.handlePublishRelatedEvents()}),n.PubSub.subscribe(n.events.PUBLISH,function(){e.incrementStoryValue(o.PublishTimer.publishClickedKey),n.PubSub.fire(n.events.TPA_INTERACTIONS_UPDATED)}),n.PubSub.subscribe(n.events.TPA_ADDED,function(){n.PubSub.fire(n.events.TPA_INTERACTIONS_UPDATED)}),n.PubSub.subscribe(n.events.BUSINESS_MANAGER_CLOSED,function(){n.PubSub.fire(n.events.TPA_INTERACTIONS_UPDATED)}))},e.prototype.incrementStoryValue=function(e){var t=(r.get(this.storyServices.story,e)||0)+1;r.set(this.storyServices.story,e,t)},e}();t.SubscribersEvents=a,angular.module("siteGeneratorBuilderInternal").service("subscribersEvents",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r){var a=this;this.undoStateManager=e,this.urlStateKeeper=t,this.consumerBiLogger=i,this.modelTree=n,this.pagesManager=o,this.$window=r,this.onHashChange=function(){var e=+a.urlStateKeeper.getFlag("previewRevision");if(!isNaN(e))return a.consumerBiLogger.pauseBI(),e!==a.previewRevision?(a.previewRevision=e,a.undoStateManager.loadStoryRevision(e,!1,!0).then(function(){return a.pagesManager.goToPage(a.modelTree.homePageId)})):void 0;a.consumerBiLogger.restoreBI()}}return e.$inject=["undoStateManager","urlStateKeeper","consumerBiLogger","modelTree","pagesManager","$window"],e.prototype.init=function(){angular.element(this.$window).on("hashchange",this.onHashChange)},e.prototype.reset=function(){angular.element(this.$window).off("hashchange",this.onHashChange)},e}();t.RevisionReloader=n,angular.module("siteGeneratorBuilderInternal").service("revisionReloader",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(12),o=function(){function e(e,t,i,n,o){this.flags=e,this.consumerDialogs=t,this.assistantManager=i,this.$rootScope=n,this.anonService=o,this.savingState="idle",this.saveRetryTime=null,this.lastSuccessfulSave=null,this.autosaveCounter=0,this.shouldCountAutosaves=!1,this.autosavePopupThreshold=2,e.autosavePopupThreshold&&(this.autosavePopupThreshold=e.autosavePopupThreshold)}return e.$inject=["flags","consumerDialogs","assistantManager","$rootScope","anonService"],e.prototype.onSave=function(e){var t=this;return this.setState("saving"),e.then(function(){return t.onSaveSuccess()},function(e){return t.onSaveError(e)}).then(function(){return t.$rootScope.$digest()})},e.prototype.startCountingAutosaves=function(){this.shouldCountAutosaves=!0,this.autosaveCounter=0},e.prototype.onSaveSuccess=function(){this.setState("idle"),this.lastSuccessfulSave=(new Date).getTime(),this.saveRetryTime=null,this.assistantManager.isInActiveTask()||(this.shouldCountAutosaves&&this.autosaveCounter++,this.autosaveCounter!==+this.autosavePopupThreshold||this.anonService.isAnonymousUser()||this.consumerDialogs.showDialog(n.ConsumerDialogTypes.AUTOSAVE_POPUP))},e.prototype.onSaveError=function(e){this.setState("waitingForResave"),this.saveRetryTime=e?e.retryTime:1},e.prototype.setState=function(e){this.savingState=e},e}();t.AutoSaveNotifier=o,angular.module("siteGeneratorBuilderInternal").service("autoSaveNotifier",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(12),r=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u){this.consumerDialogs=e,this.$interval=t,this.assistantManager=i,this.anonService=n,this.autoSaveNotifier=o,this.publishTimer=r,this.CcDialogBuilder=a,this.$window=s,this.signUpLoginPopUp=l,this.wizardService=c,this.storyServices=d,this.userService=u,this.repeat=!1,this.revisionCounter=0}return e.$inject=["consumerDialogs","$interval","assistantManager","anonService","autoSaveNotifier","publishTimer","CcDialogBuilder","$window","signUpLoginPopUp","wizardService","storyServices","userService"],e.prototype.startSignUpNotifier=function(){this.anonService.isAnonymousUser()&&(this.setSignUpRepeatInterval(),this.subscribeEvents())},e.prototype.signUp=function(){var e=this;this.assistantManager.isInActiveTask()||(this.closeDialog(),this.consumerDialogs.showDialog(o.ConsumerDialogTypes.SIGN_UP).then(function(){e.showSignUpPopup("signUpReminderPopup")}))},e.prototype.onLoginSignUp=function(){this.anonService.unMarkAnonUser(),this.unRegisterWindowFocusListener(),this.transferToSingedInMode(),n.PubSub.fire(n.events.RELOAD_SANTA),this.wizardService.reloadSantaIframe()},e.prototype.showSignUpPopup=function(e){this.signUpLoginPopUp.open("signup",e,this.onLoginSignUp.bind(this),"&origin="+e)},e.prototype.transferToSingedInMode=function(){this.cancelSignUpNotify(),this.autoSaveNotifier.startCountingAutosaves(),this.publishTimer.startPublishTimer()},e.prototype.subscribeEvents=function(){var e=this;this.revisionCounterListenerUnsubscribe||(this.revisionCounterListenerUnsubscribe=n.PubSub.subscribe(n.events.STORY_SAVE_AFTER_SITE_CHANGE,function(){e.revisionCounter++,e.signUpAfterRevetion()}))},e.prototype.canceSignUpRepeatInterval=function(){this.$interval.cancel(this.interval)},e.prototype.setSignUpRepeatInterval=function(){var t=this;this.interval||(this.interval=this.$interval(function(){t.repeat||t.startRepeat(),t.signUp()},e.SingUpReapetDurationMs))},e.prototype.startRepeat=function(){this.revisionCounterListenerUnsubscribe(),this.repeat=!0},e.prototype.signUpAfterRevetion=function(){this.repeat||this.revisionCounter!==e.MaxRevetions||(this.resumeSignUpInterval(),this.signUp())},e.prototype.resumeSignUpInterval=function(){this.startRepeat(),this.canceSignUpRepeatInterval(),this.setSignUpRepeatInterval()},e.prototype.cancelSignUpNotify=function(){this.revisionCounterListenerUnsubscribe(),this.canceSignUpRepeatInterval()},e.prototype.closeDialog=function(){this.CcDialogBuilder.cancel()},e.prototype.registerWindowFocusListener=function(){this.anonService.isAnonymousUser()&&(this.listener=this.isUserSessionMarkedAsAnonymous.bind(this),this.$window.addEventListener("focus",this.listener))},e.prototype.unRegisterWindowFocusListener=function(){this.$window.removeEventListener("focus",this.listener)},e.prototype.isUserSessionMarkedAsAnonymous=function(){var e=this;this.storyServices.story&&this.userService.isAnonymousUser().then(function(t){t||e.onLoginSignUp()})},e.SingUpReapetDurationMs=6e5,e.MaxRevetions=20,e}();t.SignUpNotifier=r,angular.module("siteGeneratorBuilderInternal").service("signUpNotifier",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.localStorageService=e,this.clientTopology=t,this.flags=i}return e.$inject=["localStorageService","clientTopology","flags"],e.prototype.createBaseData=function(e){return{storyId:e,createdOn:(new Date).getTime()}},e.prototype.isStorageValid=function(t){return!!t&&((new Date).getTime()-t.createdOn)/1e3/60/60/24<=e.ANON_STORAGE_EXPIRY_DAYS},e.prototype.addToLocalStorage=function(t){this.isAnonymousUser()&&this.localStorageService.set(e.ANON_STORAGE_KEY,this.createBaseData(t))},e.prototype.unMarkAnonUser=function(){this.clientTopology.isAnonymous=!1,this.localStorageService.remove(e.ANON_STORAGE_KEY)},e.prototype.isAnonymousUser=function(){return this.flags.AnonymousFlowEnabled&&this.clientTopology.isAnonymous},e.prototype.getStoryId=function(){if(this.isAnonymousUser()){var t=this.localStorageService.get(e.ANON_STORAGE_KEY);if(this.isStorageValid(t))return t.storyId}},e.ANON_STORAGE_KEY="ADIAnon",e.ANON_STORAGE_EXPIRY_DAYS=14,e}();t.AnonService=n,angular.module("siteGeneratorBuilderInternal").service("anonService",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(41),o=i(0),r=function(){function e(e,t,i,n,o,r,a,s){this.$p=e,this.flags=t,this.modelTree=i,this.menuService=n,this.layoutSelectionStoreProvider=o,this.siteState=r,this.tpaHeader=a,this.$translate=s}return e.$inject=["$p","flags","modelTree","menuService","layoutSelectionStoreProvider","siteState","tpaHeader","$translate"],e.prototype.nodeHasAnchorMenu=function(e){return!!this.menuService.getLinkToNode(e)},e.prototype.getChildrenWithAnchor=function(e){return o(e).map("children").flatten().filter(this.nodeHasAnchorMenu.bind(this)).value()},e.prototype.getVisiblePageNodes=function(){return o.reject(this.modelTree.getPagesNodes(),function(e){return e.hidePage||e.tpaExtraPage})},e.prototype.addAnchorsToMenu=function(e){var t=this;return o.each(e,function(e){t.menuService.addLinkToNode(e)})},e.prototype.removeAnchorsFromMenu=function(e){var t=this;return o.each(e,function(e){t.menuService.removeLinkToNode(e)})},e.prototype.orderAnchors=function(e,t,i){for(var n=1,r=1,a=function(){var a=e[n];s.menuService.ensureLinkToNodePosition(a,r+i.length-1),o.find(t,function(e){return e.header.id===a.id})?n+=2:n++,r++},s=this;n<e.length;)a()},e.prototype.calcMenuAnchors=function(){var e,t,i=this,r=this.modelTree.getPagesNodes(),a=this.getVisiblePageNodes();if(1===a.length){var s=o.first(a),l=o(s.children).reject(o.method("isUserHidden")).value(),c=o(this.layoutSelectionStoreProvider.getLayoutSelectionStore().getSolutionLGs(s.id)).keys().uniq().value(),d=function(e){return 0===e||c.indexOf(l[e].id)<0};e=o.reject(l,function(e,t){return i.nodeHasAnchorMenu(e)||d(t)}),t=o.filter(l,function(e,t){return i.nodeHasAnchorMenu(e)&&d(t)});var u=null;if(this.flags.tpaHeader&&(u=this.tpaHeader.getTpaHeaderArray(l)),this.flags.tpaHeader){if(o.some(u)){var p=this.tpaHeader.getTpaAnchors(u,e,t,l);e=p.nodesToSetAnchor,t=p.nodesToRemoveAnchor}o.each(e,function(e){if(e.contentElementType===n.TPAHeader.TPA_HEADER_CE_TYPE&&!e.alias)return e.alias=i.$translate.instant("builder.sections.Tpa_Header"),e})}this.removeAnchorsFromMenu(t),this.addAnchorsToMenu(e),this.flags.tpaHeader?this.orderAnchors(l,u,r):o.each(l,function(e,t){t>0&&i.menuService.ensureLinkToNodePosition(e,t+r.length-1)})}else t=this.getChildrenWithAnchor(r),this.removeAnchorsFromMenu(t)},e}();t.ConsumerMenu=r,angular.module("siteGeneratorBuilderInternal").service("consumerMenu",r)},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.home=0]="home",e[e.regular=1]="regular",e[e.bookings=2]="bookings",e[e.stores=3]="stores",e[e.blog=4]="blog",e[e.contact=5]="contact"}(n||(n={}));var o=function(){function e(e,t,i,n){this.modelTree=e,this.menuService=t,this.tpaService=i,this.consumerMenu=n}return e.$inject=["modelTree","menuService","tpaService","consumerMenu"],e.prototype.isTpaPage=function(e){return e.tpaExtraPage||e.tpaSection},e.prototype.getTpaType=function(e){return this.tpaService.getNaiveType(e.tpaExtraPage||e.tpaSection)},e.prototype.isContact=function(e){return e.children[1]&&"Contact"===e.children[1].contentElementType},e.prototype.getPageType=function(e){return this.isTpaPage(e)?n[this.getTpaType(e).toLowerCase()]:this.isContact(e)?n.contact:this.modelTree.isHomePageId(e.id)?n.home:n.regular},e.prototype.replacePages=function(e,t){return this.getPageOrder(e)-this.getPageOrder(t)},e.prototype.getPageOrder=function(e){var t=this.modelTree.getPageNodeById(e.id),i=this.getPageType(t);return this.isBlogAsHomePage&&i===n.blog&&(i=n.home),i},e.prototype.sortMenuItems=function(e){this.isBlogAsHomePage=e,this.menuService.menuItems.sort(this.replacePages.bind(this)),this.menuService.refresh(),this.consumerMenu.calcMenuAnchors()},e}();t.SiteBuilderPages=o,angular.module("siteGeneratorBuilderInternal").service("siteBuilderPages",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.wixAngularTopology=e,this.$translate=t,this.consumerBiLoggerHelpers=i,this.MEDIA_GALLERY_CSS_URL=this.wixAngularTopology.staticsUrl+"/styles/media-gallery-customize.css"}return e.$inject=["wixAngularTopology","$translate","consumerBiLoggerHelpers"],Object.defineProperty(e.prototype,"mediaGalleryCssUrl",{get:function(){return this.MEDIA_GALLERY_CSS_URL},enumerable:!0,configurable:!0}),e.prototype.getSeoWizUrl=function(e){return"https://www.wix.com/dashboard/"+this.consumerBiLoggerHelpers.getMetaSiteId()+"/promote-seo?referralInfo="+e},e}();t.StaticsUrls=n,angular.module("siteGeneratorCommon").service("staticsUrls",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(0),r=function(){function e(e,t,i,o,r,a,s,l){var c=this;this.$translate=e,this.applicationParameters=t,this.sitePartTypes=i,this.modelTree=o,this.tpaService=r,this.menuService=a,this.flags=s,this.storyServices=l,this.isDirty=!1,this.toTPADictionary=this._toTPADictionary.bind(this),this.deleteUnmanageableTPAs=this._deleteUnmanageableTPAs.bind(this),this.toManageableTPATuple=this._toManageableTPATuple.bind(this),this._manageableTPAs={},this.storyServices.onRenderedPart(function(e,t,i,n,o,r){t===c.sitePartTypes.BODY&&(c.isDirty=!0)}),n.PubSub.subscribe(n.events.PAGE_DELETED,function(){return c.isDirty=!0})}return e.$inject=["$translate","applicationParameters","sitePartTypes","modelTree","tpaService","menuService","flags","storyServices"],Object.defineProperty(e.prototype,"manageableTPAs",{get:function(){return this.isDirty&&(this.updateAvailableTPAs(),this.isDirty=!1),this._manageableTPAs},enumerable:!0,configurable:!0}),e.prototype.forceUpdateAvailableTPAs=function(){this.updateAvailableTPAs()},e.prototype.updateAvailableTPAs=function(){this._manageableTPAs=o.chain(this.getAllTPANodes()).mapKeys(this.toTPADictionary).each(this.deleteUnmanageableTPAs).mapValues(this.toManageableTPATuple).value()},e.prototype._toTPADictionary=function(e){return this.tpaService.getNaiveType(e.contentElementType)},e.prototype._deleteUnmanageableTPAs=function(e,t,i){var n=this.applicationParameters.tpaTypes[t];n&&!n.topBarTitle&&delete i[t]},e.prototype._toManageableTPATuple=function(e,t){return{naiveNode:e,menuItem:this.getTpaMenuItem(this.applicationParameters.tpaTypes[t])}},e.prototype.getAllTPANodes=function(){if(this.flags.smartAssistTpa)return this.modelTree.getAllTpaNodesFromAllPages();var e=[];return o.each(this.modelTree.getPagesNodes(),function(t){t&&t.children&&(e=t.children.filter(function(e){return!e.userHidden&&e.isTpa||e.isTpaWidget}).concat(e))}),e},e.prototype.getTpaMenuItem=function(e){return{title:this.$translate.instant("builder.manage-tpa",{TPA:e&&e.topBarTitle}),nameAsObject:e&&e.topBarTitle,icon:e&&(e.icon||"cc-icon-"+e.type.toLowerCase())}},e}();t.TPADiscovery=r,angular.module("siteGeneratorBuilderInternal").service("tpaDiscovery",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.ceHasPresets=function(e){return-1===["Stores_Shopping_Cart_Widget","Stores_Thank_You_Widget","Blog_Single_Post_Widget","Events"].indexOf(e)},e}();t.ListSpanUtils=n,angular.module("siteGeneratorBuilderInternal").service("listSpanUtils",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a){this.mergedHeaderService=e,this.designKit=t,this.$q=i,this.flags=n,this.themeChooser=o,this.storyServices=r,this.layoutSelectionStoreProvider=a}return e.$inject=["mergedHeaderService","designKit","$q","flags","themeChooser","storyServices","layoutSelectionStoreProvider"],e.prototype.setHeaderMerged=function(e,t){var i=this;return this.setHeaderDark(e).then(function(n){return i.mergedHeaderService.setHeaderMerged(e,t).then(function(){return n})})},e.prototype.setHeaderDark=function(e){return e&&!this.designKit.isSitePartDark("header")?this.setSitePartBg("D1","header").then(function(){return!0}):this.$q.when(!1)},e.prototype.setSitePartBg=function(e,t){var i=this;return this.updateBackgroundInLSS(this.flags.mergedHeaderPhase2?t+"Background":"headerBackground",e),this.designKit.setConfigurationForHeaderFooter(this.flags.mergedHeaderPhase2?t:"header"),this.$q.when().then(function(){return i.flags.mergedHeaderPhase2?i.themeChooser.updateSitePartBg(t):i.themeChooser.updateHeaderBg()}).then(function(){return i.storyServices.reRender("header")})},e.prototype.updateBackgroundInLSS=function(e,t){var i=this.layoutSelectionStoreProvider.getLayoutSelectionStore();n.set(i.siteOverrides,e,t)},e}();t.HeaderFooterDecorator=o,angular.module("siteGeneratorBuilderInternal").service("headerFooterDecorator",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=["setValue","removeValue","postMessage","setStyleParam","setExternalId"],r=["closeWindow","isSupported","siteInfo","appIsAlive","registerEventListener","stylesReady"],a=function(){function e(e,t,i,o,r,a,s){var l=this;this.$window=e,this.editorHandlers=t,this.siteTpa=i,this.tpaPostMessageCommon=o,this.applicationState=r,this.undoRedo=a,this.siteState=s,this.callHandler=function(e,t){if(!e.compId||"tpaSettings"===e.compId){var i=l.applicationState.getSelectedTpaComponentRef();n.merge(e,{compId:i&&i.id})}l.editorHandlers[e.type]?l.editorHandlers[e.type].call(l,l.siteTpa.dsForPostMessagesHandlers(),e,t):(n.merge(e,{originFrame:"editor"}),l.siteTpa.tpaHandler(e,t)),l.shouldCaptureOperation(e.type)&&l.captureOperationFunc()},this.captureOperationFunc=n.debounce(function(){return l.siteState.waitForChanges().then(function(){return l.undoRedo.captureOperation(!0,!1,!1,!0)})},400,{leading:!1,trailing:!0})}return e.$inject=["$window","editorHandlers","siteTpa","tpaPostMessageCommon","applicationState","undoRedo","siteState"],e.prototype.handleTPAMessage=function(e){var t;try{e.data?t=JSON.parse(e.data):e.originalEvent&&e.originalEvent.data&&(e=e.originalEvent,t=JSON.parse(e.data))}catch(e){return}t&&this.tpaPostMessageCommon.isTPAMessage(t)&&this.callHandler(t,this.tpaPostMessageCommon.generateResponseFunction(e.source,t))},e.prototype.init=function(){this.$window.addEventListener("message",this.handleTPAMessage.bind(this),!1)},e.prototype.shouldCaptureOperation=function(e){return this.editorHandlers[e]?o.indexOf(e)>=0:!n.startsWith(e,"get")&&-1===r.indexOf(e)},e}();t.TpaPostMessageService=a,angular.module("siteGeneratorStaticsConsumerAppInternal").service("tpaPostMessageService",a)},function(e,t,i){"use strict";angular.module("siteGeneratorStaticsConsumerAppInternal").service("tpaPostMessageCommon",function(){var e={TPA_MESSAGE:"TPA",TPA_MESSAGE2:"TPA2",TPA_RESPONSE:"TPA_RESPONSE",UI_LIB_RESPONSE:"UI_LIB_RESPONSE",PINGPONG_PREFIX:"pingpong:"},t=function(e,t,i){if(!_.isUndefined(e)){var n="";try{n=JSON.stringify(t)}catch(e){return}e.postMessage||(e=e.contentWindow),e.postMessage(n,i||"*")}},i=function(e){return"[UNKNOWN]"===e.compId};return{Intents:e,callPostMessage:t,generateResponseFunction:function(i,n){var o=e.TPA_RESPONSE;return _.includes(["openColorPicker","openFontPicker"],n.type)&&(o=e.UI_LIB_RESPONSE),function(e){try{t(i,{intent:o,callId:n.callId,type:n.type,res:e,status:!0})}catch(e){}}},isTPAMessage:function(t){return(t.intent===e.TPA_MESSAGE||t.intent===e.TPA_MESSAGE2)&&!i(t)},fixOldPingPongMessageType:function(t){return t.replace(e.PINGPONG_PREFIX,"")}}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e){this.applicationState=e}return e.$inject=["applicationState"],e.prototype.getViewMode=function(e,t,i){return i(this.applicationState.isPreviewDisplay()?"preview":"editor")},e.prototype.editorIsApplicationInstalled=function(e,t,i){var o=n.get(t,"data.appDefinitionId");i(e.tpa.app.isInstalled(o,!1))},e}();t.PreviewHandlers=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("previewHandlers",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o){this.$window=e,this.flags=t,this.siteTpa=i,this.tpaPostMessageCommon=n,this.previewHandlers=o}return e.$inject=["$window","flags","siteTpa","tpaPostMessageCommon","previewHandlers"],e.prototype.callHandler=function(e,t){this.previewHandlers[e.type](this.siteTpa.dsForPostMessagesHandlers(),e,t)},e.prototype.shouldHandleMessage=function(e){return Boolean(this.previewHandlers[e.type])},e.prototype.isPreviewMessage=function(e){return"TPA_PREVIEW"===e.intent},e.prototype.generateResponseFunction=function(e,t){var i=this;return function(n){var o={intent:"TPA_PREVIEW",callId:t.callId,type:t.type,res:n,status:!0};i.tpaPostMessageCommon.callPostMessage(e,o)}},e.prototype.handlePreviewMessage=function(e){var t;try{e.data?t=JSON.parse(e.data):e.originalEvent&&e.originalEvent.data&&(e=e.originalEvent,t=JSON.parse(e.data))}catch(e){return}t&&this.isPreviewMessage(t)&&this.shouldHandleMessage(t)&&this.callHandler(t,this.generateResponseFunction(e.source,t))},e.prototype.init=function(){(this.flags.tpaPreviewMessageService||this.flags.blog2)&&this.$window.addEventListener("message",this.handlePreviewMessage.bind(this),!1)},e}();t.TpaPreviewMessageService=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("tpaPreviewMessageService",n)},function(e,t,i){"use strict";angular.module("siteGeneratorStaticsConsumerAppInternal").service("editorHandlers",["flags","undoRedo","modelTree","CONSUMER_DIALOGS","$log","CcDialogBuilder","tpaSettings","applicationState","tpaStyleService","tpaService","linkEditorCAB","linkBuilder",function(e,t,i,n,o,r,a,s,l,c,d,u){function p(e){return e.components.data.get(s.getSelectedTpaComponentRef())}var g=function(e,t,i,n){e.tpa.appMarket.getDataAsync(t).then(function(t){var o=function(e,t,i,n){n=n||{};var o=_.assign(_.pick(t,["name","appIcon","colorSvgIcon","packages","features","price","upgradeBenefits","upgradeTitle","upgradedToYearly","appDefinitionId"]),_.pick(i,"vendorProductId"));o.packages=_.reject(t.packages,{id:"oneTime"});var r={appDefId:i.appDefinitionId,referralAdditionalInfo:n.origin};return o.upgradeUrl=e.tpa.billing.getSiteUpgradeUrl(r),o}(e,t,n);i(o.upgradeUrl)})};function h(e){var t;return i.getPagesNodes().some(function(i){return i.children.some(function(i){if(i.isTpaNode()){var n=i.widgetRef||c.getCompRef(i.contentElementType);if(n&&n.id===e)return t=i,!0}})}),t}function m(e){var t={vw:0,px:0};if(e=(e||"").trim()){var i=parseInt(e,10),n=e.substr(i.toString().length);"%"===n&&(n="vw"),t[n]=i}return t}return{isFullWidth:function(e,t,i){var n=h(t.compId);i(n?!(!n.dockToWidget||!n.dockToWidget.fullWidth):null)},setFullWidth:function(e,i,n){var r=h(i.compId);r?(r.setTpaFullWidth(!!_.get(i,"data.stretch")),r.dockToWidget.margins.left=m(i.data.options&&i.data.options.margins&&i.data.options.margins.left),r.dockToWidget.margins.right=m(i.data.options&&i.data.options.margins&&i.data.options.margins.right),o.info("TPA full width state change",i.compId,r.dockToWidget.fullWidth,r.dockToWidget.margins.left,r.dockToWidget.margins.right),c.updateStyle(r,void 0,void 0,function(){t.captureOperation(),n(!0)})):n(!1)},setValue:function(e,t,i){var n=e.components.get.byId(t.compId);e.tpa.data.set(n,t.data.key,t.data.value,t.data.scope,i)},removeValue:function(e,t,i){var n=e.components.get.byId(t.compId);e.tpa.data.remove(n,t.data.key,t.data.scope,i)},getValue:function(e,t,i){if(t.data.scope===e.tpa.data.SCOPE.APP){var n=p(e);e.tpa.data.app.get(n.applicationId,t.data.key,i)}else{var o=e.components.get.byId(t.compId);e.tpa.data.comp.get(o,t.data.key,i)}},getValues:function(e,t,i){if(t.data.scope===e.tpa.data.SCOPE.APP){var n=p(e);e.tpa.data.app.getMulti(n.applicationId,t.data.keys,i)}else{var o=e.components.get.byId(t.compId);e.tpa.data.comp.getMulti(o,t.data.keys,i)}},trackAppUpgrade:_.noop(),getWixUpgradeUrl:function(e,t,i){var n=e.components.data.get(e.components.get.byId(t.compId)),o=e.tpa.app.getData(n.applicationId);e.tpa.app.hasPremiumOffering(o.applicationId)&&function(e,t,i,n){g(e,t,i,n)}(e,o.appDefinitionId,i,o)},//!
postMessage:function(e,t){var i=p(e);i&&e.tpa.change.trigger.settingsUpdated(i.applicationId,t.data.compId,t.data.message)},superAppsOpenMediaDialog:_.noop(),setStyleParam:function(e,t,i){l.setStyleParam(e,t.compId,t.data,i),e.tpa.style.setParamOldSDK(t.compId,t.data)},appIsAlive:function(e,t,i){i(e.tpa.style.get(t.compId))},stylesReady:_.noop(),getDashboardAppUrl:_.noop(),getWindowPlacement:_.noop(),settingsOpenModal:_.noop(),addComponent:_.noop(),setExternalId:function(e,t,i){var n=e.components.get.byId(t.compId);e.tpa.comp.setExternalId(n,t.data.externalId,i)},getExternalId:function(e,t,i){var n=e.components.get.byId(t.compId);i(e.tpa.comp.getExternalId(n))},closeWindow:function(e,t){a.closeSettings(t.data.message)},publish:function(e,t){switch(_.get(t,["data","eventKey"])){case"TPA_PUB_SUB_OB_ON_HELP":!function(e){var t=_.get(e,["data","eventData","url"]);t?r.showSupportIframe(t,n.TPA_HELP):o.info("tpa sent onHelp with invalid data")}(t);break;case"TPA_PUB_SUB_OB_ON_MANAGE":!function(e,t){var i=_.get(t,["compId"]);if(i){var n=e.components.get.byId(i),r=e.components.data.get(n);c.openManageForApp(r.applicationId,_.get(t,["data","eventData","state"]))}else o.info("tpa sent onManage with invalid data")}(e,t)}},getStyleByCompId:function(e,t,i){i(e.tpa.style.get(t.compId))},openBillingPage:function(e,t){var i=e.components.data.get(e.components.get.byId(t.compId)),n=e.tpa.app.getData(i.applicationId).appDefinitionId;a.openBillingPage(n)},openMediaDialog:_.noop(),openReviewInfo:_.noop(),openLinkPanel:function(e,t,i){var n=h(t.compId),o={linkDetails:t.data.link?u.fromDSLink(t.data.link):{},node:n,biSource:"ProGallery"};d.show(o).then(function(e){if(e){var t=u.toDSLink(e);i(t)}})},setWindowPlacement:_.noop()}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(2),r=i(14),a=i(59),s=i(12),l=i(0),c=function(){function e(e,t,i,n,o,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w){var C=this;if((this.presetsStrategyFactory=e,this.sectionManager=t,this.consumerBiLogger=i,this.spinnerService=n,this.pagesPanelManager=o,this.tpaSettings=a,this.consumerDialogs=s,this.tpaService=l,this.pagesManager=c,this.modelTree=d,this.$state=u,this.consumerBiLoggerHelpers=p,this.tpaDiscovery=g,this.chatManager=h,this.masterPageManager=m,this.applicationState=f,this.$q=v,this.flags=S,this.documentServicesPlatformService=y,this.documentServicesPlatformSupport=T,this.storyServices=b,this.sitePartTypes=I,this.CcDialogBuilder=P,this.$translate=M,this.CONSUMER_DIALOGS=E,this.modelTreeHelpers=w,this.appsAvailableAndOrder=[core.TpaWidgetTypes.Chat_Widget,core.TpaTypes.Stores,core.TpaTypes.Blog,core.TpaTypes.Bookings,S.membersArea&&core.TpaTypes.Members,S.wixForum&&core.TpaTypes.Forum,S.widgetAppsPanel&&core.TpaWidgetTypes.Instagram_Widget,S.widgetAppsPanel&&core.TpaWidgetTypes.Music_Widget,S.widgetAppsPanel&&core.TpaWidgetTypes.BandsInTown_Widget,S.widgetAppsPanel&&core.TpaWidgetTypes.Video_Widget,S.widgetAppsPanel&&core.TpaWidgetTypes.Events_Multiple].filter(Boolean),this.appsAvailableAndOrder2=[{ceType:core.TpaWidgetTypes.Chat_Widget,isWidget:!1,openManagement:!1,onOpenAppClick:function(e){return h.openChatSettings(e)},addApp:function(e){return C.chatManager.addChat(e)},removeApp:function(){return C.chatManager.removeChat()},isAppInstalled:function(){return C.masterPageManager.isMasterPageChildAdded(core.TpaWidgetTypes.Chat_Widget)}},{ceType:core.TpaTypes.Stores,isWidget:!1,openManagement:!0,onOpenAppClick:void 0},{ceType:core.TpaTypes.Blog,isWidget:!1,openManagement:!0,onOpenAppClick:void 0},{ceType:core.TpaTypes.Bookings,isWidget:!1,openManagement:!0,onOpenAppClick:void 0},S.membersArea&&{ceType:core.TpaTypes.Members,isWidget:!1,openManagement:!1,onOpenAppClick:function(){return C.applicationState.goToPagesPanel().then(function(){return C.goToFirstMembersPage()})},addApp:function(){return C.documentServicesPlatformSupport.addMembersArea().then(function(){return C.applicationState.goToPagesPanel()})},removeApp:function(){return C.deleteMembersArea()},isAppInstalled:function(){return C.documentServicesPlatformService.hasMembersArea()}},S.wixForum&&{ceType:core.TpaTypes.Forum,isWidget:!1,openManagement:!0,onOpenAppClick:void 0},S.widgetAppsPanel&&{ceType:core.TpaWidgetTypes.Instagram_Widget,isWidget:!0,openManagement:!1,onOpenAppClick:function(){return C.openSettingsPanel(core.TpaWidgetTypes.Instagram_Widget)}},S.widgetAppsPanel&&{ceType:core.TpaWidgetTypes.Music_Widget,isWidget:!0,openManagement:!0,onOpenAppClick:void 0},S.widgetAppsPanel&&{ceType:core.TpaWidgetTypes.BandsInTown_Widget,isWidget:!0,openManagement:!1,onOpenAppClick:function(){return C.openSettingsPanel(core.TpaWidgetTypes.BandsInTown_Widget)}},S.widgetAppsPanel&&{ceType:core.TpaWidgetTypes.Video_Widget,isWidget:!0,openManagement:!0,onOpenAppClick:void 0},S.widgetAppsPanel&&{ceType:core.TpaWidgetTypes.Events_Multiple,isWidget:!0,openManagement:!0,onOpenAppClick:void 0},S.widgetAppsPanel&&{ceType:core.TpaWidgetTypes.Events_Single,isWidget:!0,openManagement:!0,onOpenAppClick:void 0}].filter(Boolean),S.blog2)&&!(S.widgetAppsPanel?this.isTpaAppInstalled(core.TpaTypes.Blog):this.isAppInstalled(core.TpaTypes.Blog)))if(S.widgetAppsPanel){var A=this.appsAvailableAndOrder2.map(function(e){return e.ceType}).indexOf(core.TpaTypes.Blog);this.appsAvailableAndOrder2[A].ceType=core.TpaTypes.Blog2,this.appsAvailableAndOrder2[A].isAppInstalled=function(){return C.isTpaAppInstalled(core.TpaTypes.Blog2)}}else{A=this.appsAvailableAndOrder.indexOf(core.TpaTypes.Blog);this.appsAvailableAndOrder.splice(A,1,core.TpaTypes.Blog2)}this.strategy=this.presetsStrategyFactory.create(r.PresetsStrategyType.Tpa,{strategyMode:r.PresetsStrategyMode.Add})}return e.$inject=["presetsStrategyFactory","sectionManager","consumerBiLogger","spinnerService","pagesPanelManager","tpaSettings","consumerDialogs","tpaService","pagesManager","modelTree","$state","consumerBiLoggerHelpers","tpaDiscovery","chatManager","masterPageManager","applicationState","$q","flags","documentServicesPlatformService","documentServicesPlatformSupport","storyServices","sitePartTypes","CcDialogBuilder","$translate","CONSUMER_DIALOGS","modelTreeHelpers"],e.prototype.isTpaAppInstalled=function(e){return this.modelTree.getTpaNodesByTypeFromAllPages(e).length>0},e.prototype.addWidget=function(e){var t=this,i=[{value:PagesManager.BlankPageId,name:this.$translate.instant("general.new-page")}].concat(this.modelTreeHelpers.getPagesWithoutTpaExtra().map(function(e){return{name:e.getDisplayName(),value:e.getId()}}));return this.CcDialogBuilder.showPositiveContinuedAction({heading:this.$translate.instant("popups.add-app.heading",{TPA:this.$translate.instant("builder.apps-panel.app.title."+e.ceType)}),text:this.$translate.instant("popups.movesection.text"),acceptButtonText:this.$translate.instant("general.add"),rejectButtonText:this.$translate.instant("general.cancel"),dropDownItems:i,dropDown:i.find(function(e){return e.value===t.storyServices.story.selectedPage}),biDialogName:this.CONSUMER_DIALOGS.MOVE_SECTION,showHelpButton:!1}).then(function(e){return t.pagesManager.createOrGetPage(e.selected.value,t.$translate.instant("general.blank"))}).then(function(i){return(t.isCurrentPage(i)?t.$q.when():t.sectionManager.goToPage(i)).then(function(){return t.strategy.generateListOfPreviews([t.getAppAvailableNode(e)])}).then(function(n){var o;e.isWidget&&(o=i.children[i.children.length-1].id),t.addTpaApp(n[0],e.isWidget,i.getId(),o)})})},e.prototype.addTpaApp2=function(e){var t=this;e.isWidget?this.addWidget(e):this.strategy.generateListOfPreviews([this.getAppAvailableNode(e)]).then(function(i){return t.addTpaApp(i[0],e.isWidget)})},e.prototype.addTpaApp=function(e,t,i,r){var a=this;this.spinnerService.waitForMe("onAddApp");var s=Date.now();this.sectionManager.handlePreviewSelected(e,!1,i,this.sitePartTypes.BODY,r).then(function(e){return t?a.openPanel(e):a.$state.go(n.STATES.BUILDER_PAGES)}).then(function(){return o.PubSub.fire(o.events.ADD_TPA_PAGE)}).then(function(){return a.consumerBiLogger.pagesManager.addTpaPackageSuccess(a.consumerBiLoggerHelpers.extraPagesCount(),a.tpaService.getAppId(e.node,!0),null,Date.now()-s,e.node.getId(),null)}).finally(function(){return a.spinnerService.imDone("onAddApp")})},e.prototype.removeTpaPage=function(e,t){var i=this,n=this.modelTree.getTpaPageNodeByType(e),o=this.tpaService.getAppIdByType(this.tpaService.getNaiveType(e)),r=this.tpaService.getInstanceId(n),a=this.pagesManager.getPageNodeIdBySantaPageId(this.tpaService.getPageIdByTpaType(e));return this.consumerDialogs.showDialog(s.ConsumerDialogTypes.DELETE_TPA_PAGE_POPUP,e).then(function(){return i.consumerBiLogger.apps.removeTpaStart(e,o,r,n.getId())}).then(function(){return i.pagesPanelManager.deletePage(a)}).then(function(){return i.tpaDiscovery.forceUpdateAvailableTPAs()}).then(function(){return!i.flags.widgetAppsPanel&&t()}).then(function(){i.consumerBiLogger.apps.removeTpaPackageSuccess(i.consumerBiLoggerHelpers.extraPagesCount(),o,e,null,n.getId(),r)})},e.prototype.isAppInstalled2=function(e){return e.isAppInstalled?e.isAppInstalled():this.isTpaAppInstalled(e.ceType)},e.prototype.isAppInstalled=function(e){return a.ChatManager.isChat(e)?this.masterPageManager.isMasterPageChildAdded(e):this.flags.membersArea&&e===core.TpaTypes.Members?this.documentServicesPlatformService.hasMembersArea():!!this.modelTree.getTpaPageNodeByType(e)},e.prototype.removeWidgetInstances=function(e){var t=this;return this.consumerDialogs.showDialog(s.ConsumerDialogTypes.DELETE_ALL_TPA_WIDGETS_POPUP,e).then(function(){Promise.all(t.modelTree.getTpaNodesByTypeFromAllPages(e).map(function(e){return t.sectionManager.deleteSection(e,"more-actions",!0)}))})},e.prototype.removeApp2=function(e){return e.removeApp?e.removeApp():e.isWidget?this.removeWidgetInstances(e.ceType):this.removeTpaPage(e.ceType,void 0)},e.prototype.deleteMembersArea=function(){var e=this;return(this.flags.dontGoToPage?this.pagesPanelManager.setSelectedPageAndGoTo(this.modelTree.homePageId):this.pagesPanelManager.setSelectedPage(this.modelTree.homePageId)).then(function(){return e.documentServicesPlatformSupport.uninstallMembersArea()}).then(function(){return e.applicationState.goToPagesPanel()})},e.prototype.removeApp=function(e,t){return a.ChatManager.isChat(e.ceType)?this.chatManager.removeChat().then(function(){return t()}):this.flags.membersArea&&e.ceType===core.TpaTypes.Members?this.deleteMembersArea():this.isAppInstalled(e.ceType)?this.removeTpaPage(e.ceType,t):void 0},e.prototype.getAppAvailableNode=function(e){return e.isWidget?this.modelTree.getTpaWidgetNodesByType(e.ceType)[0]:this.modelTree.getTpaNodeByType(e.ceType)},e.prototype.addApp=function(e,t){var i=this,n=this.tpaService.getAppIdByType(this.tpaService.getNaiveType(e.ceType));this.consumerBiLogger.apps.addTpaStart(e.ceType,n),!this.flags.widgetAppsPanel||!e.isWidget&&this.isAppInstalled2(e)?a.ChatManager.isChat(e.ceType)?this.chatManager.addChat(t):this.flags.membersArea&&e.ceType===core.TpaTypes.Members?this.documentServicesPlatformSupport.addMembersArea().then(function(){return i.applicationState.goToPagesPanel()}):this.isAppInstalled(e.ceType)||this.addTpaApp(e.preview,!1):e.addApp?e.addApp(t,e):this.addTpaApp2(e)},e.prototype.getMostRelevantWidgetNode=function(e){var t=this.modelTree.getNodeById(this.storyServices.story.selectedPage);return this.modelTree.getTpaWidgetsInPage(t,e)[0]||this.modelTree.getTpaNodesByTypeFromAllPages(e)[0]},e.prototype.openSettingsPanel=function(e){var t=this.getMostRelevantWidgetNode(e);this.openPanel(t)},e.prototype.isCurrentPage=function(e){return this.storyServices.story.selectedPage===e.containerPageId},e.prototype.openPanel=function(e){var t=this;return(this.isCurrentPage(e)?this.$q.when():this.pagesPanelManager.goToPage(this.modelTree.getNodeById(e.containerPageId)).then(function(){return t.$q.when()})).then(function(){return t.applicationState.setContentFocus(e.getId(),t.sitePartTypes.BODY),t.applicationState.goToEditMode()})},e.prototype.onOpenAppClick=function(e,t){var i=this;a.ChatManager.isChat(e)?this.chatManager.openChatSettings(t):this.flags.membersArea&&e===core.TpaTypes.Members&&this.applicationState.goToPagesPanel().then(function(){return i.goToFirstMembersPage()})},e.prototype.goToFirstMembersPage=function(){var e=l.first(this.documentServicesPlatformService.getMembersChildren());return e?this.pagesManager.goToPage(e.id):this.$q.when()},e.prototype.shouldOpenManagementOnOpenApp=function(e){return!(a.ChatManager.isChat(e)||this.flags.membersArea&&e===core.TpaTypes.Members)},e.prototype.generatePackages=function(){var e=this,t=this.modelTree.getTpaNodes().concat(this.modelTree.getAvailableWidgetsNodes()),i=this.appsAvailableAndOrder.map(function(i){return a.ChatManager.isChat(i)?e.$q.when().then(function(){return{ceType:core.TpaWidgetTypes.Chat_Widget,isInstalled:e.isAppInstalled(i)}}):e.strategy.generateListOfPreviews([l.find(t,{contentElementType:i})]).then(function(t){return{ceType:i,isInstalled:e.isAppInstalled(i),preview:t[0]}})});return this.$q.all(i)},e.prototype.getAppsPackages=function(){var e=this;return l.filter(this.appsAvailableAndOrder2,function(t){return e.shouldShowApp(t)})},e.prototype.shouldShowApp=function(e){return e.ceType!==core.TpaTypes.Members||!!this.flags.membersArea&&!!this.documentServicesPlatformService.suggestMembersArea()},e.prototype.getApps=function(){var e=this;return this.generatePackages().then(function(t){return t=l.filter(t,function(t){return e.shouldShowApp(t)})})},e.prototype.isDeletable=function(e){var t=this.modelTree.getTpaPageNodeByType(e);return t&&this.modelTree.isHomePage(t)},e}();t.AppsManager=c,angular.module("siteGeneratorBuilderInternal").service("appsManager",c)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f){var v=this;this.flags=e,this.pagesManager=t,this.nodeManipulationService=i,this.menuService=n,this.modelTree=o,this.storyServices=r,this.undoRedo=a,this.documentServicesMediator=s,this.documentServicesPlatformService=l,this.sitePartTypes=c,this.mobileSolutionManager=d,this.tpaSolutionManager=u,this.documentServicesPlatformApi=p,this.$p=g,this.$rootScope=h,this.consumerBiLogger=m,this.tpaService=f,this.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];v.flags.debugMembersArea&&console.info.apply(console,["%cPlatform API","color: magenta"].concat(e))}}return e.$inject=["flags","pagesManager","nodeManipulationService","menuService","modelTree","storyServices","undoRedo","documentServicesMediator","documentServicesPlatformService","sitePartTypes","mobileSolutionManager","tpaSolutionManager","documentServicesPlatformApi","$p","$rootScope","consumerBiLogger","tpaService"],e.prototype.init=function(){var e=this;this.documentServicesPlatformService.onTpaRemoved=function(){e.documentServicesMediator.waitForChanges().then(function(){return e.updatePages()})},this.documentServices=this.documentServicesMediator.documentServices,this.flags.membersArea&&this.activatePlatformSupport()},e.prototype.onMembersAreaInstallStarted=function(){var t=this.tpaService.getAppIdByType(e.MEMBERS_TYPE);this.consumerBiLogger.apps.addTpaStart(e.MEMBERS_TYPE,t),this.installStartTime=Date.now()},e.prototype.onMembersAreaInstallFinished=function(){var e=this.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId,t=this.getAppPages(e);this.consumerBiLogger.pagesManager.addTpaPackageSuccess(t.length,e,!1,Date.now()-this.installStartTime,"",null)},e.prototype.activatePlatformSupport=function(){var e=this.createApi();this.documentServices.platform.init(e)},e.prototype.createApi=function(){return this.documentServicesPlatformApi(this,this.documentServices,this.flags.debugMembersArea&&this.trace).createApi()},e.prototype.generatePanelToken=function(e){return n.uniqueId("platform_"+e+"_")},e.prototype.goToHomePage=function(){var e=this;return this.trace("pagesManager.goToHomePage"),this.pagesManager.goToHomePage().then(function(){e.trace("pagesManager.goToHomePage <==")})},e.prototype.addMembersArea=function(){var e=this;return this.documentServicesPlatformService.addMembersArea().then(function(){e.storyServices.reRender(e.sitePartTypes.HEADER)})},e.prototype.uninstallMembersArea=function(){return this.documentServicesPlatformService.uninstallMembersArea()},e.prototype.getAppPages=function(e){var t=[];if(e)for(var i=0,n=this.documentServices.routers.pages.getDynamicPagesList();i<n.length;i++){var o=n[i];o.appDefinitionId===e&&(t=t.concat(o.pages.map(function(e){return{id:e.id,title:e.title,tpaPageId:e.tpaPageId}})))}return t},e.prototype.onPagesChanged=function(){this.undoRedo.captureOperation(),this.$rootScope.$digest()},e.prototype.removeNode=function(e){var t=this;return this.trace("pagesManager.removePagelink",e.id),this.pagesManager.removePageLink(e.id).then(function(){return t.trace("nodeManipulationService.deletePageById",e.id,t.sitePartTypes.BODY),t.flags.coreCleanLssOnRemove?t.nodeManipulationService.deletePage(e,t.sitePartTypes.BODY,function(e){return t.pagesManager.goToPage(e)}):t.nodeManipulationService.deletePageById(e.id,t.sitePartTypes.BODY,function(e){return t.pagesManager.goToPage(e)})})},e.prototype.updatePages=function(){var t=this;this.trace("updatePages");var i=this.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId,o=this.documentServices.platform.getAppDataByAppDefId(i),r=this.getAppPages(i),a=n.find(this.modelTree.getPagesNodes(),function(e){return!(!e.membersArea||!e.membersArea.isParent)}),s=!1;if(a){if(0===r.length){this.documentServicesPlatformService.onMembersAreaLastPageRemoved(),this.consumerBiLogger.apps.removeTpaPackageSuccess(1,this.tpaService.getAppIdByType(e.MEMBERS_TYPE),"",!1,"","");var l=n.filter(this.modelTree.getPagesNodes(),function(e){return e.membersArea});return this.$p.all(l.map(function(e){return s=!0,t.removeNode(e)})).then(function(){s&&t.onPagesChanged(),t.trace("<== updatePages")}).then(function(){return t.goToHomePage()})}}else{if(0===r.length)return this.$p.when();this.trace("modelTree.addPageToTree",o.appDefinitionName),(a=this.modelTree.addPageToTree(o.appDefinitionName)).membersArea={isParent:!0},a.hidePage=!0,this.trace("menuService.addLinkToPage",a),this.menuService.addLinkToPage(a),this.documentServicesPlatformService.onMembersAreaFirstPageAdded(),s=!0}var c=r.map(function(e){var i=n.find(t.modelTree.getPagesNodes(),function(t){return t.membersArea&&!t.membersArea.isParent&&t.membersArea.pageId===e.id});if(!i)return t.trace("modelTree.addPageToTree",e.title),(i=t.modelTree.addPageToTree(e.title)).membersArea={pageId:e.id,tpaPageId:e.tpaPageId,isParent:!1},i.hidePage=!0,i.children[0].userHidden=!0,t.trace("menuService.addLinkToPage",i,a.id),t.menuService.addLinkToPage(i,a.id),s=!0,i}).filter(function(e){return!!e});return n.sequencePromises(c,function(i){var n=Date.now(),o=t.modelTree.getTpaNodeByType("Members_Page"),r=t.modelTree.duplicateNodeAndContentElementForPresetPreview(o),a=t.modelTree.addNewNode(r,i),s=i.membersArea.pageId,l=t.documentServices.pages.getReference(s),c=(t.documentServices.components.getChildren(l)||[void 0])[0];return c&&(a.widgetRef=c,a.membersArea={componentType:t.documentServices.components.getType(c),membersMenu:t.documentServicesPlatformService.getMembersMenuComponent()}),t.tpaSolutionManager.createTpaPageSolution(a,i).then(function(e){return t.mobileSolutionManager.createMobileSolution(t.sitePartTypes.BODY,e)}).then(function(){t.consumerBiLogger.pagesManager.addNewPageSuccess2("",a.contentElementType,i.getDisplayName(),a.getId(),"",0,0,"",t.tpaService.getAppIdByType(e.MEMBERS_TYPE),"by app",Math.round(Date.now()-n),!1)})}).then(function(){var e=n.filter(t.modelTree.getPagesNodes(),function(e){return e.membersArea&&!e.membersArea.isParent});return Promise.all(e.map(function(e){if(!n.find(r,{id:e.membersArea.pageId}))return s=!0,t.removeNode(e)}))}).then(function(){var e=t.documentServices.pages.getPagesData().find(function(e){return"all_members"===e.tpaPageId});if(e){var i=t.modelTree.getPagesNodes().find(function(e){return"AllMembers"===e.tpaSection});i||((i=t.modelTree.addPageToTree(e.title)).tpaSection="AllMembers",i.children[0].userHidden=!1,t.menuService.addLinkToPage(i),t.pagesManager.ensurePages())}}).then(function(){s&&t.onPagesChanged(),t.trace("<== updatePages")})},e.MEMBERS_TYPE="Members",e}();t.DocumentServicesPlatformSupport=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("documentServicesPlatformSupport",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e){this.$translate=e}return e.$inject=["$translate"],e.prototype.isEmail=function(e){var t=new RegExp(this.$translate.instant("regex.email_format"));return n.isString(e)&&t.test(e)},e.prototype.isPhone=function(e){return n.isString(e)&&/^[ \(\)\-\+\d]+$/.test(e)&&e.length<=core.GENERAL_VALIDATIONS.MAX_PHONE_NUMBER_LENGTH},e.prototype.isUrl=function(e){return n.isString(e)&&/^(?:(?:https?|ftp):\/\/)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9]+-?)*[a-z0-9]+)(?:\.(?:[a-z0-9]+-?)*[a-z0-9]+)*(?:\.(?:[a-z]{2,9})))(?::\d{2,5})?(?:\/[-\w:@&?=+,.!/~*'%$_;]*)?(#[a-z_.-][a-z0-9+\$_.-]*)?$/i.test(e)},e.prototype.isWebsite=function(e){var t=new RegExp("^(http[s]?://|www.)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-zA-Z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");return e&&!e.startsWith("http")&&(e="http://"+e),!e||t.test(e)},e.prototype.isPageName=function(e){return n.isString(e)&&/^([a-z-][a-z0-9-]*)+?$/i.test(e)},e}();t.Validation=o,angular.module("siteGeneratorCommon").service("validation",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i){this.siteModelData=e,this.modelTree=t,this.storyServices=i}return e.$inject=["siteModelData","modelTree","storyServices"],e.prototype.validateSocialLink=function(e){if(!e||!(e.url||e.data&&e.data.link))return!1;var t=e.url||e.data.link;return e.invalidDefaultURL=this.isDefaultUrl(t),!!SocialLinkManager.urlValidation.exec(t)&&!e.invalidDefaultURL},e.prototype.isDefaultUrl=function(e){return-1!==this.getDefaultSocialLinksArray().indexOf(e)},e.prototype.getDefaultSocialLinksArray=function(){return this._defaultSocialLinks||(this._defaultSocialLinks=this.getDefaultSocialValues()),this._defaultSocialLinks},e.prototype.getDefaultSocialValues=function(){var e=n.find(this.modelTree.data.children,{contentElementType:"Social"}),t=this.siteModelData.getDefaultValues(e,this.storyServices.story);return t?t.SocialButtons.map(function(e){return e.Link.targetUrl}):[]},e.DEFAULT_SOCIAL_LINKS=["https://www.facebook.com/wix","https://twitter.com/Wix","https://www.linkedin.com/company/wix-com"],e}();t.SocialLinksValidator=o,angular.module("siteGeneratorBuilderInternal").service("socialLinksValidator",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(0),r=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m){this.themeChooser=e,this.undoRedo=t,this.modelTree=i,this.spinnerService=n,this.$q=o,this.flags=r,this.colorationUtils=a,this.fontCustomizationService=s,this.fontSize=l,this.fontUtils=c,this.animationKit=d,this.animationUtils=u,this.backgroundScrollService=p,this.pagesManager=g,this.layoutSelectionStoreProvider=h,this.componentStyleOverrideSolver=m,this.animationPatterns=this.animationKit.getPatternsOptions()}return e.$inject=["themeChooser","undoRedo","modelTree","spinnerService","$q","flags","colorationUtils","fontCustomizationService","fontSize","fontUtils","animationKit","animationUtils","backgroundScrollService","pagesManager","layoutSelectionStoreProvider","componentStyleOverrideSolver"],e.prototype.setActiveMainKit=function(e){var t=this;return this.flags.mergedHeader&&this.deleteHeaderAndFooterBackgroundsFromLss(),this.componentStyleOverrideSolver.clearAllOverrides(),this.modelTree.dirtifyAllPages(),this.fontCustomizationService.resetFontSize(),this.fontSize.resetFontOverrides(),this.spinnerService.waitForMe("setActiveKit"),this.colorationUtils.initialize().then(function(){return t.themeChooser.setThemeByID({color:e,font:e})}).then(function(){t.themeChooser.serializeMainKitSelection(e),t.themeChooser.serializeColorKitSelection(),t.themeChooser.serializeFontKitSelection(),t.colorationUtils.resetColoration(),t.resetAnimations(),t.undoRedo.captureOperation(!1,!0)}).finally(function(){n.PubSub.fire(n.events.SWITCH_DESIGN_KIT),t.spinnerService.imDone("setActiveKit")})},e.prototype.getPaletteColors=function(){return this.colorationUtils.getPaletteColors()},e.prototype.getActiveFontTheme=function(){return this.themeChooser.getActiveFontTheme()},e.prototype.getActiveFontThemeAsThumbnail=function(){return this.fontUtils.convertFontDataToThumbnail(this.getActiveFontTheme())},e.prototype.getActiveTheme=function(){return this.themeChooser.getActiveTheme("mainKit")},e.prototype.getActiveAnimationPatterns=function(){return o.find(this.animationPatterns,{id:this.animationUtils.getActivePatternForSite()})},e.prototype.getDefaultAnimationPatterns=function(){return o.find(this.animationPatterns,{id:this.animationUtils.getDefaultSiteAnimation()})},e.prototype.deleteHeaderAndFooterBackgroundsFromLss=function(){var e=this.layoutSelectionStoreProvider.getLayoutSelectionStore().siteOverrides;e&&(delete e.headerBackground,delete e.footerBackground)},e.prototype.isKitOveridden=function(){var e=this.getActiveTheme(),t=!this.isActiveFontKit(e),i=!!this.fontCustomizationService.getFontSizeAllSite(),n=!this.isActiveColorKit(e),o=this.isKitColorationOverriden(),r=!this.isKitAnimationChanged(),a=this.isScrollEffectNotDefault(),s=this.pagesManager.getPagesTransition()!==this.pagesManager.getDefaultPagesTransition();return i||t||n||o||r||a||s},e.prototype.getActiveKitDefaultColors=function(){return this.themeChooser.coloration.getActiveKitDefaultColors()},e.prototype.isActiveFontKit=function(e){return this.themeChooser.getChosenFonts().font_0.themeId===e.id},e.prototype.isActiveColorKit=function(e){return this.themeChooser.getActiveTheme("color")===e},e.prototype.isKitColorationOverriden=function(){return this.colorationUtils.isColorationModeOverriden()||this.colorationUtils.areKitColorsOverriden()},e.prototype.isKitAnimationChanged=function(){var e=this.getActiveAnimationPatterns(),t=this.getDefaultAnimationPatterns();return e.label===t.label},e.prototype.isScrollEffectNotDefault=function(){return this.backgroundScrollService.getSiteOverride()!==this.backgroundScrollService.getDefaultScrollType()},e.prototype.resetAnimations=function(){var e=this.animationUtils.getDefaultSiteAnimation();this.animationUtils.setSiteAnimationPattern(e),this.backgroundScrollService.setDefaultScrollType(),this.pagesManager.setDefaultPagesTransition()},e}();t.DesignKitManager=r,angular.module("siteGeneratorBuilderInternal").service("designKitManager",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),o=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v){this.flags=e,this.$q=t,this.componentStyleOverrideSolver=i,this.catalogStylesRegistrar=n,this.modelTreeHelpers=o,this.notification=r,this.storyServices=a,this.catalog=s,this.undoRedo=l,this.simpleSolutionManager=c,this.consumerBiLogger=d,this.catalogItemSorter=u,this.$rootScope=p,this.siteState=g,this.visualValidation=h,this.$timeout=m,this.nodeFetcher=f,this.applicationState=v,this.catalogIds=[],this._scrollCloseThreshold=100,this.initDialog()}return e.$inject=["flags","$q","componentStyleOverrideSolver","catalogStylesRegistrar","modelTreeHelpers","notification","storyServices","catalog","undoRedo","simpleSolutionManager","consumerBiLogger","catalogItemSorter","$rootScope","siteState","visualValidation","$timeout","nodeFetcher","applicationState"],e.prototype.setCatalogItem=function(e,t){var i=this.getNode();this.consumerBiLogger.contentEditor.changeButtonStyleClick(t+1,i.id),this.flags.dsNewStyleApi||this.catalogStylesRegistrar.registerSingleStyleInDocumentServices(this.catalogType,e),this.componentStyleOverrideSolver.setCatalogItem(i,this.catalogType,e),this.undoRedo.captureOperation(!1,!1),this.notifyIfAppliesToAllListItems(i),this.close(),this.refreshStage(i),this.consumerBiLogger.contentEditor.changeButtonStyleSuccess(t+1,i.id)},e.prototype.refreshStage=function(e){var t=this.simpleSolutionManager.getSectionSolution(e.containerPageId,e.id);this.simpleSolutionManager.setSolutionDirty(t),this.storyServices.recalculateCurrentPage(!0)},e.prototype.isActiveCatalogItem=function(e){var t=this.getNode();return e===this.componentStyleOverrideSolver.getCatalogId(t,this.catalogType)},e.prototype.close=function(){"function"==typeof this.onSelect&&this.onSelect(),this.consumerBiLogger.contentEditor.popupDialogIsClosed(this.catalogType+" style","button")},e.prototype.notifyIfAppliesToAllListItems=function(e){var t=this;this.modelTreeHelpers.isItemOfList(e)&&(this.flags.disableUndoRedo?this.notification.show("toasters.list-item-design-changed"):this.notification.show("toasters.list-item-design-changed","general.undo",function(){t.undoRedo.undo()}))},e.prototype.getNode=function(){var e=this.nodeFetcher.getNode(this.nodeId,this.applicationState.getContentFocus().sitePart);return e&&e.node},e.prototype.initDialog=function(){var e=this;this.catalogIds=Object.keys(this.catalog[this.catalogType]),this.catalogIds.sort(function(t,i){return e.catalogItemSorter.sort(t,i)}),this.consumerBiLogger.contentEditor.popupDialogIsLoaded(this.catalogType+" style","button"),this.flags.buttonStyleOverrideDisableScroll||this.$timeout(function(){return e.bindCloseOnScroll()},1200)},e.prototype.bindCloseOnScroll=function(){var e,t=this;this.scrollDeregistrationCallback=this.$rootScope.$on(n.ViewerScrollController.PreviewScrollEvent,function(i,n){"number"==typeof e?Math.abs(e-n)>t._scrollCloseThreshold&&(t.close(),"function"==typeof t.scrollDeregistrationCallback&&t.scrollDeregistrationCallback()):e=n})},e}();angular.module("siteGeneratorEditorInternal").component("catalogStylesDialog",{controller:o,templateUrl:"views/editor/catalog-styles-dialog.html",bindings:{catalogType:"=",text:"=",nodeId:"=",onSelect:"=?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.$element=e,this.catalogPreviewGenerator=t;var i=this.catalogPreviewGenerator.generate(this.catalogType,this.catalogId,this.text);this.$element.append(i)}return e.$inject=["$element","catalogPreviewGenerator"],e}();angular.module("siteGeneratorEditorInternal").component("catalogStylesPreview",{controller:n,bindings:{catalogType:"<",catalogId:"<",text:"<"}})},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(30),r=i(194),a=i(195),s=i(1),l=function(e){function t(t,i,n,o,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M){var E,w=e.call(this,P)||this;return w.$scope=t,w.CONSUMER_DIALOGS=i,w.nodeTitleManager=n,w.consumerBiLogger=o,w.CcDialogBuilder=a,w.$translate=s,w.storyServices=l,w.consumerBiLoggerHelpers=c,w.modelTree=d,w.nodeFetcher=u,w.flags=p,w.menuService=g,w.tipManager=h,w.sectionBackgroundManager=m,w.applicationState=f,w.$element=v,w.editorEventManager=S,w.slideShowService=y,w.$timeout=T,w.singlePanelBackManager=b,w.$rootScope=I,w.sectionHeightUIService=M,w.unsubscribers=[],w.setSectionHeightState=function(e){w.applicationState.isSectionHeightMode()&&w.sectionHeightUIService.setChangeSectionHeightState(e)},w.flags.sectionMedia&&w.isItemSupportBackground?w.background=w.sectionBackgroundManager.getSelectedBackgroundAsThumbnail():w.background=null,t.$watch("$ctrl.node",function(e){if(e){try{var t=w.nodeFetcher.getNode(w.node.id);E=r.ListPanel.filterChildren(t.parent.children),w.flags.cardsToPanels?w.currentItem=E.findIndex(function(e){return e.id===w.node.id})+1:w.currentItem=E.indexOf(w.node)+1,w.totalItems=E.length}catch(e){w.currentItem=1,w.totalItems=1}if(w.node.isListItem&&w.slideShowService.isSlideShow(w.node.identifyingNode)){var i=E.filter(function(e){return!e.userHidden}).indexOf(w.node);if(i>-1){var n=w.slideShowService.getMoveToSlideObj(i);w.slideShowService.slidesNavigation(w.node.identifyingNode,SlideShowService.MOVE_TO_SLIDE,n),w.slideShowService.setSelectedItem(w.node.identifyingNodeId,w.node.id)}}w.isItem?(w.consumerBiLoggerHelpers.openedPanelStack.push("list item"),w.consumerBiLogger.contentEditor.panelIsLoaded(w.node.getId(),w.node.getSpecificContentElementType(),w.node.alias,w.consumerBiLoggerHelpers.popPanelSource())):(w.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId!==w.node.id&&(w.consumerBiLoggerHelpers.openedPanelStack.push("main"),w.consumerBiLogger.contentEditor.panelIsLoaded(w.node.getId(),w.node.getSpecificContentElementType(),w.node.alias,w.consumerBiLoggerHelpers.popPanelSource())),w.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId=w.node.id)}}),t.$watch("$ctrl.currentItem",function(e,t){if(void 0!==w.currentItem&&e!==t){w.consumerBiLoggerHelpers.setPanelSource("navigate item");var i=E[w.currentItem-1];w.flags.cardsToPanels&&(w.node=i),w.editorEventManager.editListItem({id:i.id,label:w.nodeTitleManager.getNodeTitleValue(i),hidden:i.isUserHidden()})}}),w.showContentDelay=!w.flags.cardsToPanels||w.isItem?0:CcPanelFrame.SHOW_CONTENT_DELAY,w.flags.cardsToPanels&&(w.unsubscribers.push(w.$rootScope.$on("$stateChangeSuccess",function(){w.updateNested()})),w.updateNested()),w.updateTitle(),w.flags.largerStage&&w.setSectionHeightState(!0),w}return n(t,e),t.$inject=["$scope","CONSUMER_DIALOGS","nodeTitleManager","consumerBiLogger","CcDialogBuilder","$translate","storyServices","consumerBiLoggerHelpers","modelTree","nodeFetcher","flags","menuService","tipManager","sectionBackgroundManager","applicationState","$element","editorEventManager","slideShowService","$timeout","singlePanelBackManager","$rootScope","helpDialogManager","sectionHeightUIService"],t.prototype.stateIsChangeHeight=function(){return this.sectionHeightUIService.stateIsChangeHeight()},t.prototype.$onDestory=function(){this.unsubscribers.forEach(function(e){return e()})},t.prototype.updateNested=function(){this.flags.membersArea?this.applicationState.childId()===a.NodeEditorManager.SOCIAL_ID&&this.loadSocialEditorIdHas():this.applicationState.childId()&&this.loadSocialEditorIdHas(),this.showNested=this.shouldShowNested()},t.prototype.hasSocial=function(){return this.isHeader||this.isFooter||"Contact"===this.node.contentElementType},t.prototype.loadSocialEditorIdHas=function(){this.hasSocial()&&(this.editedNode=this.node,this.updateTitle())},t.prototype.updateTitle=function(){this.title=this._title},t.prototype.shouldShowReturn=function(){return this.flags.cardsToPanels&&(this.isItem||!!this.editedNode)},Object.defineProperty(t.prototype,"isListItem",{get:function(){return this.node.isListItem},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_title",{get:function(){return this.flags.cardsToPanels&&this.editedNode?this.$translate.instant("builder.social-panel.title"):this.nodeTitleManager.nodeTitle(this.node)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentElement",{get:function(){return this.node.contentElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHeader",{get:function(){return"GeneralDescription"===this.node.contentElementType&&"footer"!==this.node.containerPageId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFooter",{get:function(){return"GeneralDescription"===this.node.contentElementType&&"footer"===this.node.containerPageId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNested",{get:function(){return this.isItem},enumerable:!0,configurable:!0}),t.prototype.closeSinglePanel=function(){this.flags.cardsToPanels?(this.applicationState.goToBuilder(),this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop()):(this.isItem?(this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop()):(void 0!==this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId&&(this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop()),this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId=void 0),this.editorEventManager.closePanel(this.node.id)),this.applicationState.clearContentFocus()},t.prototype.openSinglePanelHelp=function(){var e="help.section.edit("+this.node.contentElementType+")",t=this.$translate.instant(e);this.flags.cardsToPanels&&this.editedNode?t=this.$translate.instant("help.social.menu"):t!==e&&""!==t||(t=this.node.isListItem||this.node.nodeDescription.isListItem?this.$translate.instant("help.section.editListItem"):this.flags.sectionMedia?this.$translate.instant("help.section.sectionMedia.editSection"):this.$translate.instant("help.section.editSection")),this.isFooter&&(t=this.$translate.instant("help.section.edit(Footer)")),this.applicationState.isInMobileEditMode()&&(t=this.$translate.instant("help.section.editMobileSection")),this.CcDialogBuilder.showSupportIframe(t,this.CONSUMER_DIALOGS.SINGLE_PANEL_HELP)},t.prototype.showNameInMenuEditor=function(){return this.modelTree.isSiteMenuVisible()&&null!==this.menuService.getLinkToNode(this.node)&&!this.applicationState.isInMobileEditMode()},t.prototype.onEditBackground=function(){this.applicationState.goToSectionBackgroundPanel(s.BIOrigins.ContentPanel)},Object.defineProperty(t.prototype,"isItemSupportBackground",{get:function(){return!this.isHeader&&!this.isFooter&&!this.node.isListItem},enumerable:!0,configurable:!0}),t.prototype.shouldShowHeader=function(){return!this.flags.cardsToPanels||!this.isItem},t.prototype.onReturn=function(){this.editedNode=void 0,this.flags.cardsToPanels?this.singlePanelBackManager.back():this.applicationState.goToEditChildMode(),this.updateTitle()},t.prototype.showFooter=function(){return this.isItem||this.showPanelMessage()},t.prototype.showPanelMessage=function(){return this.flags.cardsToPanels&&this.applicationState.isInMobileEditMode()&&!this.isNested},t.prototype.shouldShowNested=function(){return!!this.editedNode||this.shouldShowMediaSettings()||this.shouldShowLoginBar()||this.flags.largerStage&&(this.applicationState.isInSectionColorPanel()||this.applicationState.isInSectionFontPanel()||this.applicationState.isInSectionAnimationPanel()||this.applicationState.isInSlideShowAnimationPanel())},t.prototype.shouldShowLoginBar=function(){return this.applicationState.isInEditLogin()},t.prototype.shouldShowMediaSettings=function(){return this.applicationState.isInEditSectionMedia()||this.applicationState.isInEditPatterns()},t}(o.PanelBase);angular.module("siteGeneratorEditorInternal").component("singlePanel",{templateUrl:"views/editor/single-panel.html",controller:l,bindings:{node:"=",childId:"=?",onItemToPage:"&?",isItem:"=?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(57),o=i(0),r=function(){function e(e,t,i,n,r){var a=this;this.slideShowService=e,this.applicationState=t,this.flags=i,this.$timeout=n,this.nodeFetcher=r,this.navigateInSlides=o.throttle(function(e,t){a.slideShowService.slidesNavigation(a.node.identifyingNode,t,null);var i=a.slideShowService.getSelectedItem(a.node.identifyingNodeId);i?a.slideShowService.selectUnHiddenItemByOperation(a.node.identifyingNode,i,t):a.slideShowService.setSelectedItem(a.node.identifyingNodeId,a.node.id),a.node=a.getSelectedNode(),e.stopPropagation(),a.$timeout(function(){a.applicationState.goToEditMode(a.node.id)})},2e3*SlideShowService.TRANSITION_DURATION,{leading:!0,trailing:!1})}return e.$inject=["slideShowService","applicationState","flags","$timeout","nodeFetcher"],e.prototype.isShowOverlay=function(){return $(document.body).hasClass(n.SegmentOverlay.segmentHoveredClass)&&this.applicationState.isInEditMode()&&this.slideShowService.isSlideShow(this.node.identifyingNode)},e.prototype.getNavigationMessage=function(){return this.slideShowService.getNavigationMessage(this.node.identifyingNode)},Object.defineProperty(e.prototype,"nextSlide",{get:function(){return SlideShowService.NEXT_SLIDE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prevSlide",{get:function(){return SlideShowService.PREV_SLIDE},enumerable:!0,configurable:!0}),e.prototype.getSelectedNode=function(){var e=this.slideShowService.getSelectedItem(this.node.identifyingNodeId);return this.nodeFetcher.getNode(e).node||this.node},e}();angular.module("siteGeneratorEditorInternal").component("slideShowNavigationOverlay",{templateUrl:"views/editor/slide-show-navigation-overlay.html",controller:r,bindings:{node:"="}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(195),o=i(0),r=function(){function e(e,t,i,n,r,a,s,l,c,d,u){var p=this;this.$scope=e,this.modelTree=t,this.CcDialogBuilder=i,this.$translate=n,this.CONSUMER_DIALOGS=r,this.consumerBiLoggerHelpers=a,this.consumerBiLogger=s,this.editorEventManager=l,this.socialLinksHelpers=c,this.socialPanelManager=d,this.flags=u,this.node=this.modelTree.getNodeByContentElementName("Social"),this.$scope.$watch("$ctrl.node",function(e,t){p.socialLinks=p.socialLinksHelpers.extractSocialLinks(p.node)}),this.$scope.$watch("$ctrl.socialLinks",o.debounce(function(e,t){e!==t&&p.socialPanelManager.updateSocialLinks(e,p.editedNode)},500),!0),this.consumerBiLoggerHelpers.openedPanelStack.push("social"),this.consumerBiLogger.contentEditor.panelIsLoaded(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.consumerBiLoggerHelpers.popPanelSource())}return e.$inject=["$scope","modelTree","CcDialogBuilder","$translate","CONSUMER_DIALOGS","consumerBiLoggerHelpers","consumerBiLogger","editorEventManager","socialLinksHelpers","socialPanelManager","flags"],Object.defineProperty(e.prototype,"title",{get:function(){return this.$translate.instant("builder.social-panel.title")},enumerable:!0,configurable:!0}),e.prototype.closeSocialPanel=function(){this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop(),this.editorEventManager.closePanel(n.NodeEditorManager.SOCIAL_ID)},e.prototype.openSocialPanelHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.social.menu"),this.CONSUMER_DIALOGS.SOCIAL_PANEL_HELP)},e}();angular.module("siteGeneratorEditorInternal").component("socialPanel",{templateUrl:"views/editor/social-panel.html",controller:r,bindings:{editedNode:"="}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o){var r=this;this.$scope=e,this.socialLinkManager=t,this.applicationParameters=i,this.modelTree=n,this.consumerBiLogger=o,this.labelFilter=function(e){var t=r.socialLinkManager,i=t.getPlatformNameByUrl(e);if(i&&i!==SocialLinkManager.VALID_CUSTOM_LINK){var n=t.getPlatformRelativePath(e);return"/"===n[0]&&(n=n.substring(1,n.length)),n}return e},this.isDraggable=!1!==this.isDraggable,this.newSocialUrl=""}return e.$inject=["$scope","socialLinkManager","applicationParameters","modelTree","consumerBiLogger"],e.prototype.$onInit=function(){var e=this;this.data.forEach(function(t){t.platform=e.socialLinkManager.getPlatformNameByUrl(t.url)||e.socialLinkManager.invalidPlatformName,t.icon=e.socialLinkManager.getPlatformIconClass(t.platform,!0)})},e.prototype.canAddSocialLink=function(){return this.data.length<this.applicationParameters.maxSocialLinks},e.prototype.onNewPlatform=function(){if(this.canAddSocialLink()){var e=this.newSocialUrl;if(e){var t=this.socialLinkManager.getPlatformNameByUrl(e);this.data.push({platform:t||this.socialLinkManager.invalidPlatformName,url:e,icon:this.socialLinkManager.getPlatformIconClass(t,!0)}),this.newSocialUrl=""}}},e.prototype.removePlatform=function(e){n.pull(this.data,e),this.consumerBiLogger.contentEditor.valueWasDeleted(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,"social","link")},e.prototype.onToggle=function(e){this.consumerBiLogger.contentEditor.clickOnHideUnhideComponent(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,"social","link",e.hidden?"hide":"unhide","social-panel")},e.prototype.onEdit=function(e){""===e.url?this.removePlatform(e):(e.platform=this.socialLinkManager.getPlatformNameByUrl(e.url)||this.socialLinkManager.invalidPlatformName,e.icon=this.socialLinkManager.getPlatformIconClass(e.platform,!0))},e.prototype.getIconClassForNewSocialUrl=function(){var e=this.socialLinkManager.getPlatformNameByUrl(this.newSocialUrl);return e?this.socialLinkManager.getPlatformIconClass(e):"cc-icon-social-placeholder"},e.prototype.getInvalidtooltipName=function(e){return e.invalidDefaultURL?"intro_card_url_default":"intro_card_url_invalid"},e}();angular.module("siteGeneratorEditorInternal").component("socialPanelInner",{templateUrl:"views/editor/social-panel-inner.html",controller:o,bindings:{data:"=",isDraggable:"=?",node:"<",noHide:"=?",itemValidator:"&?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.$scope=e,this.flags=t,this.linkDetailsManager=i,this.buttons=[],this.MAX_BUTTON_NUMBER=2,this.watchers=[]}return e.$inject=["$scope","flags","linkDetailsManager"],e.prototype.$onInit=function(){this.addWatchers(),this.buttons=this.buildButtons(this.fieldData.value)},e.prototype.addWatchers=function(){var e=this;this.watchers.push(this.$scope.$watch(function(){return e.field.data.value},function(){e.buttons=e.buildButtons(e.field.data.value)})),this.fieldData.value.extraButtons&&this.fieldData.value.extraButtons.forEach(function(t,i){e.watchers.push(e.$scope.$watch(function(){return e.field.data.value.extraButtons[i]},function(){e.buttons=e.buildButtons(e.field.data.value)}))})},e.prototype.clearWatchers=function(){this.watchers.forEach(function(e){return e()}),this.watchers=[]},e.prototype.updateWatchers=function(){this.clearWatchers(),this.addWatchers()},e.prototype.onChangeButtonText=function(e,t){0===t?this.fieldData.value.callToAction=e:t>0&&this.fieldData.value.extraButtons&&(this.fieldData.value.extraButtons[t-1].callToAction=e),this.onChange({value:this.fieldData.value})},e.prototype.buildButtons=function(e){var t=this.flattenButtonsFromFieldData(e);return this.buildButtonsDataWithLinkState(t)},e.prototype.buildButtonsDataWithLinkState=function(e){var t=this;return e.map(function(e){return t.buttonFieldDataBuilder(e)})},e.prototype.buttonFieldDataBuilder=function(e){var t=this.linkDetailsManager.isLinked(e);return{value:e.callToAction,iconVisible:t,buttonVisible:!t,iconName:"rich-text:link",buttonText:"Add Link",placeHolder:"Edit Button Text"}},e.prototype.handleOnOrderChange=function(e,t){var i=function(e,t,i){return e.splice(i,0,e.splice(t,1)[0]),e}(this.flattenButtonsFromFieldData(this.fieldData.value),e,t),n=this.unflattenButtonsFromLinkDetails(this.normalizeLinkDetails(i));this.field.data.value=n,this.buttons=this.buildButtons(this.fieldData.value),this.onChange({value:this.fieldData.value})},e.prototype.addButton=function(){var e=this.fieldData.value;this.addDefaultButtonData(e),this.updateWatchers(),this.buttons=this.buildButtons(this.fieldData.value),this.onChange({value:this.fieldData.value})},e.prototype.removeButton=function(e){var t=this.flattenButtonsFromFieldData(this.fieldData.value);t.splice(e,1);var i=this.unflattenButtonsFromLinkDetails(this.normalizeLinkDetails(t));this.field.data.value=i,this.updateWatchers(),this.buttons=this.buildButtons(this.fieldData.value),this.onChange({value:this.fieldData.value})},e.prototype.createNewButton=function(){return{callToAction:"Learn More",enable:!0}},Object.defineProperty(e.prototype,"toggleState",{get:function(){var e=this.fieldData.value.enable,t=this.fieldData.value.extraButtons&&this.fieldData.value.extraButtons.some(function(e){return e.enable});return e||t},enumerable:!0,configurable:!0}),e.prototype.handleToggle=function(e){this.field.active!==e&&this.onToggle({visibility:e}),this.onChange({value:this.fieldData.value})},e.prototype.addDefaultButtonData=function(e){var t=this,i=this.createNewButton();e.extraButtons||(e.extraButtons=[]),e.extraButtons.push(i);var n=e.extraButtons.length-1;this.watchers.push(this.$scope.$watch(function(){return t.field.data.value.extraButtons[n]},function(){t.buttons=t.buildButtons(t.field.data.value)}))},e.prototype.flattenButtonsFromFieldData=function(e){var t=[],i=ob.deepClone(e);t.push(i);var n=i.extraButtons;return n&&delete(t=t.concat(n))[0].extraButtons,t},e.prototype.normalizeLinkDetails=function(e){return e.forEach(function(e,t){0===t&&"enable"in e?delete e.enable:t>0&&(e.enable=!0)}),e},e.prototype.unflattenButtonsFromLinkDetails=function(e){var t=e[0];return e.length>1&&(t.extraButtons=e.slice(1)),t},e.prototype.handleOnEditLink=function(e){this.onEditLink({buttonNumber:e})},Object.defineProperty(e.prototype,"active",{get:function(){return this.field.active},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focused",{get:function(){return this.field.focused},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldData",{get:function(){return this.field.data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMultiButton",{get:function(){return!this.isListItem&&!this.isHeaderFooter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addButtonActive",{get:function(){return this.active&&this.buttons.length<this.MAX_BUTTON_NUMBER},enumerable:!0,configurable:!0}),e}();angular.module("siteGeneratorEditorInternal").component("buttonFieldEditor",{templateUrl:"views/editor/button-field-editor.html",controller:n,bindings:{label:"@?",field:"=",adiAutomation:"@?",debounceDelay:"=?",onToggle:"&",onChange:"&",onEditLink:"&",disableToggle:"=?",isListItem:"<",isHeaderFooter:"<"}})},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),r=i(17),a=i(15),s=i(43),l=i(1),c=i(254),d=i(0),u=function(){function e(e,t,i,n,r,a,s,l,c,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H){var O=this;this.$q=e,this.assistiveMessage=t,this.$scope=i,this.fieldEditorConfiguration=n,this.nodeTitleManager=r,this.socialLinkManager=a,this.linkEditorCAB=s,this.consumerBiLogger=l,this.modelTree=c,this.validation=u,this.$translate=p,this.socialLinksValidator=g,this.spinnerService=h,this.slideShowService=m,this.storyServices=f,this.mediaOverrideManager=v,this.mediaService=S,this.richTextService=y,this.designKit=T,this.$timeout=b,this.flags=I,this.applicationState=P,this.$element=M,this.osUtils=E,this.editorEventManager=w,this.contentElementFieldManager=C,this.documentServicesPlatformService=A,this.cabbie=L,this.CONSUMER_DIALOGS=B,this.assistantManager=k,this.CcDialogBuilder=H,this.fieldMouseEnter=!1,this.showTextManagerLink=!1,this.config={email:{validator:function(e){return O.validation.isEmail(e)},errorMessage:this.$translate.instant("general.email.invalid")}},this.debouncedUpdateViewer=d.debounce(this.updateViewer,this.fieldEditorConfiguration.getDebounceDelay(this.field)),this.handleChangeInSupportedTextManagerField=function(){O.cabbie.isOpen(O.textManagerTagName)?(O.forceFocus=!0,O.disableSelectAllOnFocus=!0,O.shouldFocusOnChangeValue=!0):O.shouldFocusOnChangeValue=!1},this.shouldOpenTextManagerOnFocus=function(e){var t=O.storyServices.story.textManager.fieldsGroupOpenPanelOnFocus;return!t||t&&!t[e]},this.textManagerTagName="TextManagerDialog",this.fieldTitle=this.getFieldTitle(),this.unsubscribe=n.isTextType(this.fieldData)&&o.PubSub.subscribe(o.events.BLINK_FIELD,function(e){e===O.field&&O.blinkField()}),i.$watch("$ctrl.field",function(){O.fieldEditorConfiguration.isRichTextInput(O.fieldData)&&O.initRichText(),O.initTextValue()}),i.$watch("$ctrl.field.focused",function(e){e&&O.scrollToField()})}return e.$inject=["$q","assistiveMessage","$scope","fieldEditorConfiguration","nodeTitleManager","socialLinkManager","linkEditorCAB","consumerBiLogger","modelTree","validation","$translate","socialLinksValidator","spinnerService","slideShowService","storyServices","mediaOverrideManager","mediaService","richTextService","designKit","$timeout","flags","applicationState","$element","osUtils","editorEventManager","contentElementFieldManager","documentServicesPlatformService","cabbie","CONSUMER_DIALOGS","assistantManager","CcDialogBuilder"],e.prototype.getAutomationLabel=function(){return this.field.data.type+"-"+this.field.data.subType},e.prototype.$onDestroy=function(){this.unsubscribe&&this.unsubscribe()},e.prototype.isDisableMediaToggle=function(){return!(!this.isInMobileEditMode||!this.slideShowService.isSlideShow(this.node.identifyingNode)||this.mediaOverrideManager.getAllowedMediaOverride(this.node)!==a.PresetMediaTypes.COAST2COAST)},e.prototype.$onInit=function(){this.scrollParent=angular.element(this.$element.parents(".cc-panel-body")),this.isInMobileEditMode=this.applicationState.isInMobileEditMode(),this.mediaToggleDisabled=this.isDisableMediaToggle(),this.debounceDelay=0,this.flags.twoButtonSection||this.flags.newButtonControl||this.updateILink(),this.validator=d.get(this.config,this.fieldData.subType+".validator"),this.validateEmail(),this.fieldEditorConfiguration.isSocialInput(this.fieldData)&&this.watchSocialLinks()},e.prototype.blinkField=function(){var e=this;this.blink=!0,this.$timeout(function(){e.blink=!1},250)},e.prototype.scrollToField=function(){var e=this.$element[0],t=this.calculateHeightCompensation(),i=Math.max(0,e.offsetTop-t-12);c.domHelpers.scrollInsideContainer(this.scrollParent,i,1e3)},e.prototype.calculateHeightCompensation=function(){if(this.fieldEditorConfiguration.isRichTextInput(this.fieldData)&&!this.$element.find(".in-focus").length){var e=this.$element.parent().find("p22-rich-text-toolbar"),t=this.$element.parent().find(".in-focus"),i=this.$element.find("p22-rich-text-toolbar"),n=e.index(t);if(e.index(i)>n)return t.height()}return 0},e.prototype.initRichText=function(){this.designKitFormatting=this.designKit.getFormattingForRichTextEditor(this.modelTree.getGeneralInformation()!==this.node&&this.node||null,this.fieldData.subType),this.richTextStylesManager=e.richTextStylesManager,this.richTextLinksManager=this.richTextService.getEditorLinksManager(),this.displayedRTTSections=[cc.RTTSection.BoldUnderlineItalic,cc.RTTSection.Linking,cc.RTTSection.ClearFormatting],this.fieldData.subType!==core.ElementSubTypes.LongText&&"address"!==this.fieldData.subType||this.displayedRTTSections.push(cc.RTTSection.Listing),this.maxRowsOnBlur=this.fieldData.subType===core.ElementSubTypes.LongText?8:2,this.initRichTextValue()},e.prototype.initRichTextValue=function(){this.richTextValue=this.richTextService.isRichText(this.fieldData.value)?this.richTextService.unMarkRichText(this.fieldData.value):this.richTextService.transformForEditor(this.fieldData.value,this.designKitFormatting)},e.prototype.initTextValue=function(){this.fieldEditorConfiguration.isTextInput(this.fieldData)&&(this.textInputValue=this.getTextValue(this.fieldData.value),this.isInMobileEditMode&&this.richTextService.isRichText(this.textInputValue)&&(this.textInputValue=this.richTextService.toPlainText(this.textInputValue)))},e.prototype.getTextValue=function(e){return this.fieldEditorConfiguration.isButton(this.fieldData)?e.callToAction:e},e.prototype.watchSocialLinks=function(){var e=this,t=this.modelTree.getNodeByContentElementName("Social");this.$scope.$watch(function(){return t.contentElement.getValuesByMediaType().icon},function(t){return e.socialItems=e.createSocialItems(t)},!0)},Object.defineProperty(e.prototype,"isMediaAutocomplete",{get:function(){return this.field.suggestedContent&&this.field.suggestedContent.length>0&&d.has(this.field.suggestedContent[0],"media")},set:function(e){d.map([],function(){return[]})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldData",{get:function(){return this.field.data},enumerable:!0,configurable:!0}),e.prototype.validateEmail=function(){this.validator&&(this.isValid=this.validator(this.fieldData.value),this.isValid||(this.errorMessage=this.config[this.fieldData.subType].errorMessage))},e.prototype.getDebounceDelay=function(){return this.debounceDelay},e.prototype.isArgsFitsField=function(e){return e&&this.field.contentElement.type===e.contentElementType&&this.fieldData.type===e.type&&this.fieldData.subType===e.subType},Object.defineProperty(e.prototype,"isHighlighted",{get:function(){return this.isArgsFitsField(this.highlightArg)},enumerable:!0,configurable:!0}),e.prototype.createSocialItems=function(e){var t=this;return d.map(e,function(e){return{cssClass:t.socialLinkManager.getPlatformIconClass(e.platform),data:{link:e.Link.targetUrl}}})},e.prototype.onRichTextLinkCommand=function(e){var t=this,i={linkDetails:this.richTextService.getLink(e)||{},node:this.node,biSource:"richtext"};return this.linkEditorCAB.show(i).then(function(i){if(t.richTextService.removeLink(e),!d.isEmpty(i))return t.richTextService.addLink(i)})},e.prototype.resetRichText=function(e){var t=this,i=this.richTextService.resetFormatting(e);this.onChange(i,!1),this.richTextValue=null,this.$timeout(function(){t.initRichTextValue()})},e.prototype.isEmptyValue=function(e){return this.richTextService.isEmpty(e)},e.prototype.updateViewer=function(e,t){this.flags.sectionMedia||t!==r.IEditEventType.TypeChange||o.PubSub.fire(o.events.MEDIA_TYPE_CHANGE,this.node);var i=d.clone(this.fieldData);i.value=e;var a=n({},this.field,{data:i}),s=this.mediaOverrideManager.getFieldDataType(this.fieldData.subType,this.node);this.consumerBiLogger.contentEditor.updateField(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"",this.field.key,s),this.editorEventManager.fieldChanged(a,!1,t,l.BIOrigins.EditPanel)},e.prototype.onChange=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=r.IEditEventType.ValueChange),this.onValueChange&&this.onValueChange(this.field),this.flags.textManagerUxImprovement&&this.isTextManagerEnabled()&&this.handleChangeInSupportedTextManagerField(),!d.isUndefined(e)||this.fieldData.type===core.ElementTypes.Media){if(t&&this.isEmptyValue(e)&&(e="",this.richTextValue=null),!(e||t||this.fieldData.type!==core.ElementTypes.Text&&(this.fieldData.type!==core.ElementTypes.Button||this.flags.newButtonControl||this.flags.twoButtonSection)))return this.isValid=!0,this.fieldData.type!==core.ElementTypes.Button||this.flags.newButtonControl||this.flags.twoButtonSection?this.fieldData.value="":this.fieldData.value.callToAction=e,void this.debouncedUpdateViewer(e,i);if(!d.isUndefined(e)&&!this.flags.newButtonControl&&!this.flags.twoButtonSection)if(this.fieldData.type===core.ElementTypes.Button)this.fieldData.value.callToAction=e;else{var n=d.has(e,"text")?e.text:e;this.fieldData.value=t&&n?this.richTextService.tryToExtractPlainText(n,this.designKitFormatting)||this.richTextService.markRichText(n):n}if((this.flags.newButtonControl||this.flags.twoButtonSection)&&!d.isUndefined(e)&&this.fieldData.type!==core.ElementTypes.Button){n=d.has(e,"text")?e.text:e;this.fieldData.value=t&&n?this.richTextService.tryToExtractPlainText(n,this.designKitFormatting)||this.richTextService.markRichText(n):n}this.debouncedUpdateViewer(e,i),e||!t?this.validateEmail():this.isValid=!0}},e.prototype.onMaskChange=function(e){this.onFieldToggle(this.field),e&&this.fieldEditorConfiguration.isRichTextInput(this.fieldData)&&this.initRichTextValue(),this.isInMobileEditMode&&!e&&this.maybeShowAssistiveMessage("popup.hide-field-in-mobile","tip_content.first_time_hide_field")},e.prototype.maybeShowAssistiveMessage=function(e,t){var i=this;return this.storyServices.story.popupConfigurations[e]?this.$q.when():(this.storyServices.story.popupConfigurations[e]=!0,this.spinnerService.waitForStop().then(function(){return i.assistiveMessage.show({target:i.$element.find('[data-hook="toggle-icon"]:visible'),xOffset:23,text:i.$translate.instant(t)})}))},e.prototype.onSocialItemClick=function(){this.editorEventManager.editSocial()},e.prototype.onRichTextCommand=function(e,t){var i=t?"on":"off",n=P23RichTextInput.getCKEditorCommandName(e);this.consumerBiLogger.contentEditor.richTextClick(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"",i,n,this.field.key,this.fieldData.subType,this.field.data.value,this.field.data.value&&this.field.data.value.length)},e.prototype.socialButtonsParagraph=function(){var e=this;return this.socialItems&&this.socialItems.length&&d.every(this.socialItems.map(function(t){return e.socialLinksValidator.validateSocialLink({url:t.data.link})}))?"":this.$translate.instant("builder.field-editor.social-paragraph")},e.prototype.onLinkItemEdit=function(e){this.flags.twoButtonSection||this.flags.newButtonControl?this.contentElementFieldManager.onLinkItemEditNew(this.field,this.node,l.BIOrigins.EditPanel,e):this.contentElementFieldManager.onLinkItemEdit(this.field,this.node,l.BIOrigins.EditPanel)},e.prototype.updateILink=function(){this.fieldData.linkAsILink=this.fieldEditorConfiguration.getILink(this.fieldData)},e.prototype.goToDesktopContentPanel=function(){var e=this,t=this.applicationState.getContentFocus();$(".cc-tooltip").remove(),this.applicationState.goToBuilder().then(function(){return e.applicationState.disableMobileEditor()}).then(function(){e.applicationState.setContentFocus(t.nodeId,t.sitePart),e.applicationState.goToEditMode()})},Object.defineProperty(e.prototype,"isFieldAllowedForTextManager",{get:function(){var e=this;return!this.field.key||!d.find(["phone number","email","fax","address for display","copyrightmessage","businessname","address for google map"],function(t){return d.includes(e.field.key.toLowerCase(),t)})},enumerable:!0,configurable:!0}),e.prototype.isTextManagerEnabled=function(){return this.isFieldAllowedForTextManager&&!this.isInMobileEditMode&&this.flags.textManager},e.prototype.getImportedSiteAddress=function(){return this.flags.textManager&&this.storyServices.story.importedSite?this.storyServices.story.importedSite.siteAddress:""},e.prototype.isInImportedTextTask=function(){var e=this.assistantManager.getActiveTask();return e&&"importContentAssistantTask"===e.id},e.prototype.onFieldFocused=function(){if(!(this.flags.textManager&&this.flags.textManagerTours&&this.isInImportedTextTask())&&this.flags.textManagerUxImprovement&&this.isTextManagerEnabled()){var e="title"===this.fieldData.subType||"subTitle"===this.fieldData.subType?"short":"long";this.shouldOpenTextManagerOnFocus(e)&&(this.$element.find(".text-manager-link-adi, .text-manager-link-imported").addClass("flash-animation"),this.openTextManager(),this.storyServices.story.textManager.fieldsGroupOpenPanelOnFocus=this.storyServices.story.textManager.fieldsGroupOpenPanelOnFocus||{},this.storyServices.story.textManager.fieldsGroupOpenPanelOnFocus[e]=!0)}},e.prototype.openTextManager=function(){var e=this;this.field.focused=!1,this.forceFocus=!0,this.flags.textManagerUxImprovement&&this.isTextManagerEnabled()&&(this.forceFocus=!1),this.showTextManagerLink=!0;var t=this.getImportedSiteAddress();this.flags.textManager&&this.flags.textManagerTours&&this.isInImportedTextTask()&&this.assistantManager.gotoNextAction(),this.cabbie.show({target:'[field-title="'+this.getFieldTitle()+'"] p6-control-header',element:this.textManagerTagName,position:{offsetX:23,minY:91},attributes:{onReplace:this.onTextManagerReplaceText.bind(this),onAppend:this.onTextManagerAppendText.bind(this),sectionType:this.field.contentElement&&this.field.contentElement.type,fieldName:this.fieldData.subType,siteAddress:t,node:this.node},hideBackdrop:!0,disableCloseClickingOutside:this.assistantManager.isInActiveTask(),hideAttribute:"closeDialog"}).then(function(){e.flags.textManagerUxImprovement&&e.isTextManagerEnabled()&&(e.disableSelectAllOnFocus=!1),e.forceFocus=!1,e.field.focused=!1,e.showTextManagerLink=!1})},e.prototype.getFieldTitle=function(){return this.fieldEditorConfiguration.getFieldTitle(this.fieldData,this.node)},e.prototype.isTextField=function(){return this.fieldEditorConfiguration.isRichTextInput(this.fieldData)||this.fieldEditorConfiguration.isTextInput(this.fieldData)||this.fieldEditorConfiguration.isLongTextInput(this.fieldData)},e.prototype.onTextManagerReplaceText=function(e){this.richTextValue||this.flags.textManager&&""===this.fieldData.value?this.richTextValue=e:this.textInputValue?this.textInputValue=e:this.fieldData.value=e,this.onChange(e)},e.prototype.onTextManagerAppendText=function(e){this.onTextManagerReplaceText((this.richTextValue||this.textInputValue||this.fieldData.value)+" "+e)},e.prototype.getTextManagerTooltip=function(){return this.getImportedSiteAddress()?"text-manager-link-imported":"text-manager-link-adi"},e.prototype.getFieldActionLabel=function(){return this.getImportedSiteAddress()?this.$translate.instant("text-manager.field-editor.imported-text"):this.$translate.instant("text-manager.field-editor.your-text")},e.prototype.getExtraTextInputValues=function(){return this.flags.twoButtonSection&&this.isInMobileEditMode&&this.fieldEditorConfiguration.isButton(this.fieldData)&&this.fieldData.value&&this.fieldData.value.extraButtons&&this.fieldData.value.extraButtons.filter(function(e){return e.enable})||[]},e.prototype.onFieldMouseLeave=function(){this.fieldMouseEnter=!1},e.prototype.onFieldMouseEnter=function(){this.fieldMouseEnter=!0},e.prototype.shouldShowLoginField=function(){return this.flags.membersArea&&!!this.documentServicesPlatformService.getMembersParent()&&this.fieldEditorConfiguration.isLogin(this.fieldData)},e.prototype.openLoginBarPanel=function(){this.applicationState.goToEditChildMode(s.ApplicationState.LOGIN)},e.prototype.onTooltipClick=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.members.login-panel"),this.CONSUMER_DIALOGS.MEMBERS_LOGIN_SETTINGS)},e.richTextStylesManager={getFonts:function(){return{}},getThemes:function(){return{}},getCssData:function(){var e={"adi-ux-fonts":{id:"adi-ux-fonts",value:"//static.parastorage.com/services/third-party/fonts/Helvetica/fontFace.css",isLink:!0,force:!1},theme_fonts:{id:"theme_fonts",value:".cke_editable p,.cke_editable h1,.cke_editable h2,.cke_editable h3,.cke_editable h4,.cke_editable h5,.cke_editable h6,.cke_editable div,.cke_editable li,.cke_editable ol,.cke_editable ul {-webkit-font-smoothing: antialiased;font: normal normal 300 16px/24px HelveticaNeueW01-55Roma,HelveticaNeueW02-55Roma,HelveticaNeueW10-55Roma,\"'Helvetica Neue', Helvetica, Arial, Meiryo, 'Hiragino Kaku Gothic Pro W3', 'Hiragino Kaku Gothic Pro', sans-serif\";color:#20303c;}::selection {background-color:#d3edff}.cke_editable a {color:#4196e0}.cke_editable ol,.cke_editable ul {margin-top:0;margin-bottom:0}",isLink:!1,force:!1}};return e}},e}();angular.module("siteGeneratorEditorInternal").component("fieldEditor",{templateUrl:"views/editor/field-editor.html",controller:u,bindings:{field:"=",node:"=",highlightArg:"=",clickArg:"=",onFieldToggle:"&",onValueChange:"&?",toggleDisabled:"=?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(1),r=i(0),a=function(){function e(e,t,i,o,a,s,l,c,d,u,p,g,h,m,f,v){var S=this;this.$scope=e,this.$timeout=t,this.overlaySegmentManager=i,this.contentElementFieldManager=o,this.onstageActionsManager=a,this.applicationState=s,this.ONSTAGE_EVENTS=l,this.wizardService=c,this.linkEditorCAB=d,this.fieldEditorConfiguration=u,this.editorEventManager=p,this.$element=g,this.flags=h,this.assistiveMessage=m,this.storyServices=f,this.$translate=v,this.fieldWeightForSorting=function(){var e={button:90,"Social.SocialButtons":100};return S.flags.subscribeInFooter&&(e.Subscribe=80,e.CopyrightMessage=110),e},this.getFieldArgs=function(e){return{contentElementType:e.contentElement.type,type:e.data.type,subType:e.data.subType}},this.resetLastHoveredField=function(){return S.overlaySegmentManager.lastHoveredArgs=null},this.resetHoveredFieldWithDelay=r.debounce(this.resetLastHoveredField,1e3),this.setLastHoveredField=function(e){return S.overlaySegmentManager.lastHoveredArgs=S.getFieldArgs(e)},this.onMouseEnter=this.setLastHoveredField,this.onClicked=function(e){return S.overlaySegmentManager.lastClickedArgs=S.getFieldArgs(e)},this.isInMobileEditMode=function(){return S.applicationState.isInMobileEditMode()},this.unsubscribe=n.PubSub.subscribe(n.events.NEW_STATE_STORY_WAS_SET,this.prepareFields.bind(this)),this.flags.cardsToPanels?this.$scope.$watch("$ctrl.node",function(){return S.prepareFields()}):this.prepareFields(),this.$scope.$watch("$ctrl.overlaySegmentManager.lastHoveredArgs",function(e){return S.highlightArg=S.getLayoutArgs(e)}),this.$scope.$watch("$ctrl.overlaySegmentManager.lastClickedArgs",function(e){return S.clickArg=S.getLayoutArgs(e)}),this.maybeShowFirstTimeTooltip()}return e.$inject=["$scope","$timeout","overlaySegmentManager","contentElementFieldManager","onstageActionsManager","applicationState","ONSTAGE_EVENTS","wizardService","linkEditorCAB","fieldEditorConfiguration","editorEventManager","$element","flags","assistiveMessage","storyServices","$translate"],e.prototype.$onDestory=function(){this.unsubscribe&&this.unsubscribe()},e.prototype.maybeShowFirstTimeTooltip=function(){this.showMessageInMobileEditPanel(),this.showMessageInDesktopEditHeaderPanel()},e.prototype.showMessageInMobileEditPanel=function(){var e="first-time-in-mobile-content-panel";this.applicationState.isInMobileEditMode()&&!this.storyServices.story.popupConfigurations[e]&&(this.showAssistiveMessage("node-editor-wrapper","tip_content.first-time-mobile-content-panel"),this.storyServices.story.popupConfigurations[e]=!0,$(".intro-tooltip").addClass("content-panel-tooltip-top"))},e.prototype.showMessageInDesktopEditHeaderPanel=function(){this.flags.silentMode||!this.applicationState.isInEditMode()||this.applicationState.isInMobileEditMode()||!this.applicationState.isHeaderContent()||this.storyServices.story.popupConfigurations["first-time-in-desktop-header-panel"]||(this.showAssistiveMessage("node-editor-wrapper","tip_content.first-time-desktop-content-panel"),this.storyServices.story.popupConfigurations["first-time-in-desktop-header-panel"]=!0,$(".intro-tooltip").addClass("content-panel-tooltip-top"))},e.prototype.showAssistiveMessage=function(e,t){this.assistiveMessage.show({target:$('[data-hook="'+e+'"]'),xOffset:-4,durationBeforeEntrance:500,durationOfEntrance:300,durationOfExit:300,animationXOffset:-20,animationYOffset:0,text:this.$translate.instant(t)})},e.prototype.onLinkItemEdit=function(e){return this.contentElementFieldManager.onLinkItemEdit(e,this.node,o.BIOrigins.EditPanel)},Object.defineProperty(e.prototype,"contentElement",{get:function(){return this.node?this.node.contentElement:null},enumerable:!0,configurable:!0}),e.prototype.getLayoutArgs=function(e){var t=null;return e&&(this.overlaySegmentManager.isActiveSegmentNodeId(this.node.id,this.node.contentElement.isSpecialListItem())||this.overlaySegmentManager.isActiveSegmentNodeId("header",!1)&&"GeneralDescription"===this.node.contentElementType)&&(t=e),t},e.prototype.temporaryHighlight=function(e){this.setLastHoveredField(e),this.resetHoveredFieldWithDelay()},Object.defineProperty(e.prototype,"fields",{get:function(){return this.isInMobileEditMode()?r.filter(this._fields,"visible"):this._fields},enumerable:!0,configurable:!0}),e.prototype.updateToggleDisable=function(){if(this.isInMobileEditMode()){var e=this.fields.filter(function(e){return e.active});this._fields.forEach(function(t){return t.lastActiveField=1===e.length&&e[0]===t})}},e.prototype.onFieldToggle=function(e){this.onAnyFieldToggle&&this.onAnyFieldToggle(),this.contentElementFieldManager.toggleField(e,this.node,o.BIOrigins.EditPanel),this.updateToggleDisable()},Object.defineProperty(e.prototype,"nodeId",{get:function(){return this.node.id},enumerable:!0,configurable:!0}),e.prototype.prepareFields=function(){var e=this;this._fields=this.contentElementFieldManager.getNodeAndReferencedFields(this.contentElement,this.node),this._fields=r.sortBy(this._fields,function(t){return e.fieldWeightForSorting()[t.key]||0}),this.updateToggleDisable(),!this.flags.mergedHeader&&this.applicationState.isHeaderContent()&&this.addFixedHeaderField(),this.fields.length>0&&(this.fields[this.fields.length-1].lastField=!0)},e.prototype.addFixedHeaderField=function(){var e=this,t={key:"fixedHeader",contentElement:this.contentElement,data:{type:core.ElementTypes.FixedHeader,subType:core.ElementSubTypes.FixedHeader,value:!0,displayName:this.$translate.instant("builder.field-editor.single.freeze-header"),helpTooltip:"header_fixed_header"}};Object.defineProperty(t,"active",{get:function(){return e.wizardService.isFixedHeader()},set:function(t){e.wizardService.setFixedHeader(t)},enumerable:!0,configurable:!0}),this.fields.unshift(t)},e}();angular.module("siteGeneratorEditorInternal").component("contentElementEditor",{templateUrl:"views/editor/content-element-editor.html",controller:a,bindings:{node:"=",onItemToPage:"&",isItem:"=",onAnyFieldToggle:"&?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(2),r=i(17),a=i(0),s=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H,O,_,D,$,N){var x=this;this.onstageActionsManager=e,this.ONSTAGE_EVENTS=t,this.$stateParams=i,this.$scope=n,this.$rootScope=o,this.$state=r,this.modelTree=a,this.nodeFetcher=s,this.simpleSolutionManager=l,this.sectionManager=c,this.layoutSelectionStoreProvider=d,this.applicationState=u,this.storyServices=p,this.undoRedo=g,this.$element=h,this.notification=m,this.tipManager=f,this.TipManagerTypeMap=v,this.linkDetailsManager=S,this.mediaOverrideManager=y,this.initService=T,this.spinnerService=b,this.consumerBiLogger=I,this.flags=P,this.osUtils=M,this.focusKeeper=E,this.nodeChangeReporter=w,this.contentManager=C,this.colorationUtils=A,this.mobileSolutionManager=L,this.logoExtractionPopupService=B,this.layoutSolver=k,this.lssModifier=H,this.sitePartTypes=O,this.logoHandler=_,this.editorEventManager=D,this.nodeEditorManager=$,this.contentElementFieldManager=N,this.unsubscribers=[],this.showNested=!1,T.loaded().then(function(){return C.initialize(p.story)}).then(function(){x.init(),x.initEventHandlers()})}return e.$inject=["onstageActionsManager","ONSTAGE_EVENTS","$stateParams","$scope","$rootScope","$state","modelTree","nodeFetcher","simpleSolutionManager","sectionManager","layoutSelectionStoreProvider","applicationState","storyServices","undoRedo","$element","notification","tipManager","TipManagerTypeMap","linkDetailsManager","mediaOverrideManager","initService","spinnerService","consumerBiLogger","flags","osUtils","focusKeeper","nodeChangeReporter","contentManager","colorationUtils","mobileSolutionManager","logoExtractionPopupService","layoutSolver","lssModifier","sitePartTypes","logoHandler","editorEventManager","nodeEditorManager","contentElementFieldManager"],e.prototype.init=function(){var e=this.nodeFetcher.getNode(this.nodeId);this.node=e&&e.node,this.sitePart=e&&e.sitePart,this.node?(this.nodeChangeReporter.init(this.node),this.childId&&(this.isItemEditor?this.showItemEditor():this.isSocialEditor&&this.showSocialEditor()),this.tipManager.show(this.TipManagerTypeMap.EDIT,this.node.alias||this.node.contentElementType)):this.applicationState.goToBuilder()},e.prototype.$onDestroy=function(){this.unsubscribers.forEach(function(e){return e()})},e.prototype.isTpa=function(){return this.node.isTpaNode()},e.prototype.initEventHandlers=function(){var e=this;this.unsubscribers=[this.editorEventManager.onNodeChanged(function(t){return e.updateViewer(t)}),this.editorEventManager.onEditListItem(function(t){return e.loadItemEditor(t.item)}),this.editorEventManager.onItemToPage(function(t){return e.itemToPage(t.item)}),this.editorEventManager.onEditSocial(function(){return e.loadSocialEditor()}),this.editorEventManager.onClosePanel(function(t){return e.handleClose()})],this.unsubscribers.push(this.onstageActionsManager.subscribe(this.ONSTAGE_EVENTS.EDIT_CONTENT,function(){e.isSocialEditor&&e.handleClose()})),this.unsubscribers.push(o.PubSub.subscribe(o.events.STORY_REVISION_CHANGED,function(){e.init()}))},e.prototype.itemToPage=function(e){this.makeIntoPage(this.getRealItem(e))},e.prototype.getRealItem=function(e){return a.find(this.node.children,function(t){return t.id===e.id})},e.prototype.updateViewer=function(e){switch(e.whatChanged){case r.IEditEventType.ParagraphColumnsToggle:this.toggleParagraphColumns(e);break;case r.IEditEventType.SetMapStyle:this.setMapStyle(e);break;default:this.handleMediaChange(e)}},e.prototype.toggleParagraphColumns=function(e){this.lssModifier.toggleParagraphColumns(e.node),this.nodeEditorManager.updateViewer(e)},e.prototype.setMapStyle=function(e){this.nodeEditorManager.updateViewer(e)},e.prototype.fullUpdateViewer=function(e){this.nodeEditorManager.updateViewer(e),this.updateViewer(e)},e.prototype.handleMediaChange=function(e){if(e.field.value&&e.field.value.media&&e.field.value.text){var t=a.find(e.node.contentElement.values,{type:core.ElementTypes.Media});t&&(t.value[0]=e.field.value.media);var i=this.$element.find(".nested-panel ng-transclude");i.scrollTop(0),i.perfectScrollbar("update")}},e.prototype.loadItemEditor=function(e){this.nodeEditorManager.loadItemEditor(e)},e.prototype.loadSocialEditor=function(){this.nodeEditorManager.loadSocialEditor()},e.prototype.showItemEditor=function(){var e=this,t=a.find(this.node.children,function(t){return t.id===e.childId});void 0!==t&&(this.showNested=!0,this.editedNode=t)},e.prototype.showSocialEditor=function(){this.showNested=!0,this.editedNode=this.node},Object.defineProperty(e.prototype,"showMediaSettings",{get:function(){return this.nodeEditorManager.mediaSettingsActive},enumerable:!0,configurable:!0}),e.prototype.showMediaSettingsEditor=function(){this.$state.go(n.STATES.BUILDER_MEDIA_SETTINGS,this.$stateParams)},e.prototype.hideMediaSettingsEditor=function(){this.$state.go(n.STATES.BUILDER_EDIT,this.$stateParams)},Object.defineProperty(e.prototype,"isList",{get:function(){return"contentElementList"===this.node.getNodeType()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isItemEditor",{get:function(){return this.nodeEditorManager.isItemEditor()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSocialEditor",{get:function(){return this.nodeEditorManager.isSocialEditor()},enumerable:!0,configurable:!0}),e.prototype.handleClose=function(){this.showNested?(this.showNested=!1,this.editedNode=null,this.$state.go(".",{childId:void 0})):this.applicationState.goToBuilder(!0)},e.prototype.makeIntoPage=function(e){this.nodeEditorManager.makeIntoPage(e)},e.prototype.getNodeTypeForCss=function(){return this.node&&this.node.contentElementType&&this.node.contentElementType.toLowerCase()},e}();t.NodeEditor=s,angular.module("siteGeneratorEditorInternal").component("nodeEditor",{templateUrl:"views/editor/node-editor.html",controller:s,bindings:{nodeId:"=",childId:"=?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=function(){function e(e,t,i,n,o){var r=this;this.undoRedo=e,this.$scope=t,this.consumerBiLogger=i,this.menuService=n,this.flags=o,this.validator=function(e){return e.trim().length>0},this.defaultName=this.node.alias||this.node.contentElementType,this.value=this.initialValue,this.$scope.$watch(function(){return r.node.getMetadatum(MenuService.NameInMenu)},function(){r.value=r.initialValue,r.menuService.updateLinkToNode(r.node,r.value)})}return e.$inject=["undoRedo","$scope","consumerBiLogger","menuService","flags"],Object.defineProperty(e.prototype,"initialValue",{get:function(){return this.node.getMetadatum(MenuService.NameInMenu)||this.defaultName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rectifiedValue",{get:function(){return this.validator(this.value)?this.value.trim():this.defaultName},enumerable:!0,configurable:!0}),e.prototype.onChangeValue=function(e){this.value=e.trim(),this.menuService.updateLinkToNode(this.node,this.rectifiedValue)},e.prototype.onBlur=function(){this.value=this.rectifiedValue,this.value!==this.initialValue&&(this.consumerBiLogger.contentEditor.updateField(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"","nameInMenu","text"),this.node.setMetadatum(MenuService.NameInMenu,this.value),this.undoRedo.captureOperation(!1),this.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"","nameInMenu","text","",this.value.length,0,void 0,0,"","",!1,!1))},e.prototype.onToggle=function(){var e=!this.node.getMetadatum(MenuService.HiddenFromMenu);this.consumerBiLogger.contentEditor.clickOnHideUnhideComponent(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"","showInMenu","text",e?"hide":"unhide",n.BIOrigins.EditPanel),this.node.setMetadatum(MenuService.HiddenFromMenu,e),this.menuService.updateLinkToNodeVisibility(this.node),this.undoRedo.captureOperation(!1),this.consumerBiLogger.contentEditor.componentWasHiddenSuccess(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"","showInMenu","text",e?"hide":"unhide",n.BIOrigins.EditPanel)},e.prototype.isActive=function(){return!this.node.getMetadatum(MenuService.HiddenFromMenu)},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("nameInMenuEditor",{templateUrl:"views/editor/name-in-menu-editor.html",controller:o,bindings:{node:"="}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(193),o=function(){function e(e,t,i,o,r,a,s,l){var c=this;this.$rootScope=e,this.$scope=t,this.tpaService=i,this.applicationState=o,this.editorEventManager=r,this.$stateParams=a,this.siteTpa=s,this.flags=l,this.cacheKiller=(new Date).getTime(),this.triggerChange=function(){return c.cacheKiller=(new Date).getTime()},this.init=function(){if(c.node&&c.canEdit(c.node)){c.compRef=c.node.isTpa?c.tpaService.getCompRef(c.node.contentElementType):c.node.widgetRef,c.applicationState.setSelectedTpaComponentRef(c.compRef);var e=c.tpaService.getEditWidgetUrl(c.node);c.$stateParams.panelType&&(e+="&panelType="+c.$stateParams.panelType),c.iFrameUrl=e+"&"+c.cacheKiller}else c.applicationState.goToBuilder()},this.$scope.$watch("this.$stateParams.panelType",this.triggerChange),this.$scope.$watch("$ctrl.node",this.triggerChange),this.deregisterCloseEvent=this.$rootScope.$on(n.TpaSettings.TPA_EVENT_CLOSE_WINDOW,this.triggerChange),this.$scope.$watch(function(){return c.cacheKiller},this.init)}return e.$inject=["$rootScope","$scope","tpaService","applicationState","editorEventManager","$stateParams","siteTpa","flags"],e.prototype.$onDestroy=function(){this.deregisterCloseEvent(),this.siteTpa.triggerSettingsClosedEvent(this.tpaService.getNaiveType(this.node.getContentElementType()))},e.prototype.canEdit=function(e){return e.isTpaNode()&&this.tpaService.getEditWidgetUrl(e)},e.prototype.onClose=function(){this.editorEventManager.closePanel(this.node.id)},e}();angular.module("siteGeneratorBuilderInternal").component("tpaEditor",{templateUrl:"views/editor/tpa-editor.html",controller:o,bindings:{node:"="}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(17),o=i(0),r=function(){function e(e){this.$rootScope=e}return e.$inject=["$rootScope"],e.prototype.fieldChanged=function(e,t,i,o,r){void 0===t&&(t=!1),void 0===i&&(i=n.IEditEventType.ValueChange);var a={contentElementField:e,key:e.key,field:e.data,maskChanged:t,whatChanged:i,extraData:r};o&&(a.BIOrigin=o),this.send(n.EditorEvents.FIELD_CHANGED,a)},e.prototype.nodeChangedOnFieldChanged=function(e){var t=this;return this.onReceive(n.EditorEvents.FIELD_CHANGED,function(i){var r=e(i);t.send(n.EditorEvents.NODE_FIELD_CHANGED,o.assign(i,r))})},e.prototype.nodeChanged=function(e){this.send(n.EditorEvents.NODE_FIELD_CHANGED,e)},e.prototype.editListItem=function(e){this.send(n.EditorEvents.EDIT_LIST_ITEM,{item:e})},e.prototype.itemToPage=function(e){this.send(n.EditorEvents.ITEM_TO_PAGE,{item:e})},e.prototype.editSocial=function(){this.send(n.EditorEvents.EDIT_SOCIAL,{})},e.prototype.closePanel=function(e){this.send(n.EditorEvents.CLOSE_PANEL,{id:e})},e.prototype.backgroundChanged=function(){this.send(n.EditorEvents.BACKGROUND_CHANGED,{})},e.prototype.onNodeChanged=function(e){return this.onReceive(n.EditorEvents.NODE_FIELD_CHANGED,e)},e.prototype.onEditListItem=function(e){return this.onReceive(n.EditorEvents.EDIT_LIST_ITEM,e)},e.prototype.onItemToPage=function(e){return this.onReceive(n.EditorEvents.ITEM_TO_PAGE,e)},e.prototype.onEditSocial=function(e){return this.onReceive(n.EditorEvents.EDIT_SOCIAL,e)},e.prototype.onClosePanel=function(e){return this.onReceive(n.EditorEvents.CLOSE_PANEL,e)},e.prototype.onBackgroundChanged=function(e){return this.onReceive(n.EditorEvents.BACKGROUND_CHANGED,e)},e.prototype.send=function(e,t){this.$rootScope.$emit(e,t)},e.prototype.onReceive=function(e,t,i){return void 0===i&&(i=!0),this.$rootScope.$on(e,function(e,n){i&&e.preventDefault(),t(n)})},e}();t.EditorEventManager=r,angular.module("siteGeneratorEditorInternal").service("editorEventManager",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(14),r=i(55),a=i(17),s=i(15),l=i(1),c=i(0),d=function(){function e(e,t,i,o,r,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H,O,_,D,$){var N=this;this.onstageActionsManager=e,this.ONSTAGE_EVENTS=t,this.$scope=i,this.undoRedo=o,this.overlaySegmentManager=r,this.overlayManager=s,this.mediaGallery=l,this.consumerMediaUtils=c,this.$compile=d,this.notification=u,this.applicationState=p,this.flags=g,this.storyServices=h,this.mediaOverrideManager=m,this.$timeout=f,this.consumerBiLogger=v,this.consumerBiLoggerHelpers=S,this.previewScale=y,this.linkEditorCAB=T,this.cropFaceService=b,this.mediaEditorManager=I,this.previewListCAB=P,this.$element=M,this.columnService=E,this.selections=w,this.sectionMedia=C,this.sectionMediaSetter=A,this.mediaSectionUtils=L,this.$stateParams=B,this.CcDialogBuilder=k,this.$translate=H,this.$rootScope=O,this.mediaOpacityManager=_,this.nodeEditorManager=D,this.editorEventManager=$,this.overrideToggleDisabled=!1,this.unsubscribers=[],this.updateCurrentMedia=function(){N.active=N.active||N.mediaSectionUtils.nodeHasBackground(N.node),N.currentMedia=N.sectionMedia.getMedia(N.node)},this.handleMediaChange=function(e){e&&e.changed&&N.onMediaChange({whatChanged:a.IEditEventType.ValueChange})},this.fixExtVideoThumbnail(),void 0===this.active&&(this.active=!0),this.flags.sectionMedia&&this.updateCurrentMedia(),this.flags.cardsToPanels?this.unsubscribers.push(this.$rootScope.$on("$stateChangeSuccess",function(){return N.updateMediaAndType()})):this.mediaEditorManager.setCurrentMediaType(this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(this.node)),this.isInMobileEditMode=this.applicationState.isInMobileEditMode(),this.visibleMediaTypes=this.getVisibleMediaTypes(),this.updateCurrentMediaType(),this.label=this.initLabel(),this.tabLabels=this.initTabLabels(),this.disableMediaChangeButton=this.isInMobileEditMode,this.seg=this.mediaEditorManager.getCurrentSegment(),this.initImageFitMode(),this.initAlignmentDropdown(),this.disableToggleIfAllColumnBackgroundsHaveMedia(),this.flags.sectionMedia&&(this.unsubscribers.push(n.PubSub.subscribe(n.events.MEDIA_CHANGED_BY_SYSTEM,function(){return N.updateCurrentMediaType()})),this.unsubscribers.push(this.onstageActionsManager.subscribe(this.ONSTAGE_EVENTS.HIDE,function(e){N.nodeEditorManager.isMediaField(e)&&(N.active=!1,N.updateCurrentMedia())})),this.unsubscribers.push(this.editorEventManager.onNodeChanged(function(e){N.nodeEditorManager.isMediaField(e.field)&&N.updateCurrentMedia()})),this.flags.fixUpdateBGInPanel&&this.unsubscribers.push(this.editorEventManager.onBackgroundChanged(function(){N.updateCurrentMedia()})))}return e.$inject=["onstageActionsManager","ONSTAGE_EVENTS","$scope","undoRedo","overlaySegmentManager","overlayManager","mediaGallery","consumerMediaUtils","$compile","notification","applicationState","flags","storyServices","mediaOverrideManager","$timeout","consumerBiLogger","consumerBiLoggerHelpers","previewScale","linkEditorCAB","cropFaceService","mediaEditorManager","previewListCAB","$element","columnService","selections","sectionMedia","sectionMediaSetter","mediaSectionUtils","$stateParams","CcDialogBuilder","$translate","$rootScope","mediaOpacityManager","nodeEditorManager","editorEventManager"],e.prototype.$onDestroy=function(){this.unsubscribers.forEach(function(e){return e()})},e.prototype.fixExtVideoThumbnail=function(){var e=this;this.media&&this.media.filter(function(e){return e.mediaType===core.MediaItemTypes.ExtVideo}).forEach(function(t){return e.consumerMediaUtils.addExtVideoThumbnail(t)})},e.prototype.updateCurrentMediaType=function(){this.currentTab=this.getCurrentTab()},e.prototype.disableToggleIfAllColumnBackgroundsHaveMedia=function(){var e=this;if(this.isInMobileEditMode&&this.seg&&!this.toggleDisabled){var t=this.seg.containingLG.getDesktopLG();if(t.columns){var i=c.flatten(t.columns);this.overrideToggleDisabled=this.toggleDisabled=c.every(i,function(t){return e.columnService.hasMediaBackground(t)})}}},e.prototype.isToggleDisabled=function(){return this.overrideToggleDisabled||this.toggleDisabled},e.prototype.changeLink=function(){var e=this.mediaOverrideManager.getActiveMediaValue(this.node),t={linkDetails:e.Link,node:this.node,biSource:"media"};this.linkEditorCAB.show(t).then(function(t){return e.Link=t})},e.prototype.initAlignmentDropdown=function(){var e=this;this.flags.alignmentDropDownInFirstPanel&&this.seg&&(this.imageAlignmentOptions=this.mediaOverrideManager.listAlignmentOptions(),this.$scope.$watch(function(){return e.seg.getAlignment()},function(t){e.selectedImageAlignment=e.mediaOverrideManager.getAlignmentOption(t)})),this.flags.alignmentDropDownInFirstPanel&&this.seg&&this.$scope.$watch(function(){return e.seg.getAlignment()},function(t){var i=r.ImagePositions.getLabelDetailsByPosName(t);e.selectedPositionName=i.selectedPosition,e.selectedPositionImage=i.imagePosition,e.selectedPositionIndex=r.ImagePositions.invertedPosToDetails[t]})},e.prototype.toggle=function(e){var t=this;this.flags.sectionMedia&&!this.applicationState.isInMobileEditMode()||!this.onToggle?this.sectionMediaSetter.toggle(this.node,e,this.field).then(function(){t.updateMediaAndType()}):this.onToggle({visibility:e}),this.flags.textManager&&n.PubSub.fire(n.events.MEDIA_TOGGLED,{field:this.field,node:this.node})},e.prototype.updateMediaAndType=function(){this.updateCurrentMedia(),this.updateCurrentMediaType()},e.prototype.openCropper=function(e,t){this.mediaEditorManager.openCropper()},e.prototype.mediaTypeChange=function(e){var t=this;this.mediaEditorManager.setCurrentMediaType(e),this.consumerMediaUtils.biSwitchMediaTypeClick(this.node,e),this.initImageFitMode();var i=this.mediaOverrideManager.getAllowedMediaOverride(this.node)===s.PresetMediaTypes.COAST2COAST,n=this.mediaOverrideManager.getAllowedMediaOverride(this.node)===s.PresetMediaTypes.COLUMNBG;switch(e){case cc.MediaPreviewType.SingleImage:this.mediaOverrideManager.setMediaOverride(this.node,i?s.MediaOverrideManager.MO_STRIP_IMAGE:s.MediaOverrideManager.MO_IMAGE),this.mediaOverrideManager.setFitMode(this.node,this.imageFitMode);break;case cc.MediaPreviewType.MultipleImages:this.mediaOverrideManager.setMediaOverride(this.node,i?s.MediaOverrideManager.MO_STRIP_SLIDESHOW:s.MediaOverrideManager.MO_SLIDESHOW);break;case cc.MediaPreviewType.ExtVideo:this.mediaOverrideManager.setMediaOverride(this.node,s.MediaOverrideManager.MO_VIDEO);break;case cc.MediaPreviewType.Video:this.mediaOverrideManager.setMediaOverride(this.node,n?s.MediaOverrideManager.MO_WIX_VIDEO:s.MediaOverrideManager.MO_STRIP_VIDEO);break;case cc.MediaPreviewType.Shape:this.setSmallImageOverrideWithOnlyOneVisibleMediaByType("shape");break;case cc.MediaPreviewType.Clipart:this.setSmallImageOverrideWithOnlyOneVisibleMediaByType("clipart")}this.initAlignmentDropdown(),this.onMediaChange({whatChanged:a.IEditEventType.TypeChange}),(this.node.isListItem||this.node.nodeDescription&&this.node.nodeDescription.isListItem)&&"ListHeader"!==this.node.contentElementType&&"ListFooter"!==this.node.contentElementType&&(this.flags.disableUndoRedo?this.notification.show("toasters.list-item-media-type-changed"):this.notification.show("toasters.list-item-media-type-changed","general.undo",function(){t.undoRedo.undo()}))},e.prototype.mediaChange=function(e){var t=this;this.disableMediaChangeButton||(this.disableMediaChangeButton=!0,this.consumerMediaUtils.biReplaceMediaClick(this.node,e),this.consumerMediaUtils.biCheckIfReplaceLogoClick(this.node,l.BIOrigins.HeaderPanel),this.consumerBiLoggerHelpers.organizeMediaNode=this.node,this.mediaEditorManager.mediaChange(this.field,this.contentElement,l.BIOrigins.EditPanel).then(this.handleMediaChange).finally(function(){t.disableMediaChangeButton=!1}))},e.prototype.changeGallery=function(){var e=this,t=this.mediaOverrideManager.getAvailableGalleries(this.node),i=this.mediaOverrideManager.getAllowedMediaOverride(this.node),n=!1;this.CcDialogBuilder.show({autoWrap:!1,hasBackdrop:!1,templateUrl:"views/editor/gallery-picker.html",clickOutsideToClose:!0,onRemoving:function(){n||e.consumerBiLogger.contentEditor.galleryLayoutWindowClosed(e.node.getId(),e.node.getSpecificContentElementType(),e.node.alias,null,t.length,i===s.PresetMediaTypes.SHAPE?"shape":i===s.PresetMediaTypes.COAST2COAST?"full width":i===s.PresetMediaTypes.IMAGE?"image":"")},controller:["$scope","CcDialogBuilder",function(o,r){o.galleries=t,o.onSelect=function(o){o&&o.gallery&&e.mediaOverrideManager.setGallery(e.node,o.gallery)&&(n=!0,e.onMediaChange({whatChanged:a.IEditEventType.GalleryLayoutChange}),e.consumerBiLogger.contentEditor.galleryLayoutChanged(e.node.getId(),e.node.getSpecificContentElementType(),e.node.alias,o.gallery.name,t.length,t.indexOf(o),i===s.PresetMediaTypes.SHAPE?"shape":i===s.PresetMediaTypes.COAST2COAST?"full width":i===s.PresetMediaTypes.IMAGE?"image":"")),r.hide()},o.getDisplayName=function(e){return e.name},e.consumerBiLogger.contentEditor.galleryLayoutWindowOpened(e.node.getId(),e.node.getSpecificContentElementType(),e.node.alias,t.length,i===s.PresetMediaTypes.SHAPE?"shape":i===s.PresetMediaTypes.COAST2COAST?"full width":i===s.PresetMediaTypes.IMAGE?"image":"")}]})},e.prototype.openSettingsPanel=function(){this.consumerBiLogger.contentEditor.mediaSettingsShow(this.node.getId(),this.node.getContentElementType(),this.node.alias,this.consumerMediaUtils.mediaTypeToString(this.mediaEditorManager.getCurrentMediaType()),this.consumerMediaUtils.mediaTypeToGalleryType(this.mediaEditorManager.getCurrentMediaType())),this.nodeEditorCtrl.showMediaSettingsEditor()},e.prototype.onReplace=function(){this.flags.cardsToPanels?this.applicationState.goToSectionMediaPanel(this.$stateParams.childId):this.applicationState.goToMediaSettingsPanel(this.$stateParams.childId),this.consumerBiLoggerHelpers.setPanelSource(l.BIOrigins.ClickEditMedia)},e.prototype.setSmallImageOverrideWithOnlyOneVisibleMediaByType=function(e){this.toggleAllMediaByType("shape",!1),this.toggleAllMediaByType("clipart",!1),this.toggleFirstMediaByType(e,!0),this.contentElement.fillValuesByMediaType(),this.mediaOverrideManager.setMediaOverride(this.node,s.MediaOverrideManager.MO_IMAGE)},e.prototype.toggleAllMediaByType=function(e,t){var i=this,n=this.getMediaField();this.contentElement.hiddenMedia[e]=this.contentElement.hiddenMedia[e]||{};var o=c.get(this.contentElement.hiddenMedia,e);c.forEach(n.value,function(n){n.mediaType===e&&(o[i.mediaGallery.getItemId(n)]=!t)})},e.prototype.initImageFitMode=function(){var e=c.get(this,"applicationState.contentFocus.sitePart");this.imageFitMode=this.flags.sectionMedia&&!this.applicationState.isInMobileEditMode()&&"body"===e&&this.mediaOverrideManager.isFitMode(this.node)},e.prototype.toggleFirstMediaByType=function(e,t){var i=this.getMediaField(),n=c.find(i.value,function(t){return t.mediaType===e});n&&(this.contentElement.hiddenMedia[e]=this.contentElement.hiddenMedia[e]||{},c.get(this.contentElement.hiddenMedia,e)[this.mediaGallery.getItemId(n)]=!t)},e.prototype.showNewMediaControl=function(){return this.flags.sectionMedia&&!this.applicationState.isInMobileEditMode()},e.prototype.getMediaField=function(){return c.find(this.contentElement.values,function(e){return"media"===e.type})},e.prototype.getCurrentTab=function(){return this.flags.sectionMedia?this.sectionMedia.getMediaType(this.node):this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(this.node)},e.prototype.getVisibleMediaTypes=function(){return this.isInMobileEditMode?[this.currentTab]:this.mediaSectionUtils.getVisibleMediaTypes(this.node)},e.prototype.initLabel=function(){return"GeneralDescription"===this.node.getContentElementType()?this.$translate.instant("builder.field-editor.single.logo"):this.$translate.instant("builder.field-editor.single.media")},e.prototype.initTabLabels=function(){if("GeneralDescription"===this.node.getContentElementType()){var e={};return e[cc.MediaPreviewType.Shape]=this.$translate.instant("editor.media-settings.logo.shape"),e[cc.MediaPreviewType.Clipart]=this.$translate.instant("editor.media-settings.logo.image"),e}return null},Object.defineProperty(e.prototype,"isImageCropEnabled",{get:function(){if(this.isInMobileEditMode)return!1;if(this.imageFitMode)return!1;var e=this.mediaOverrideManager.getAllowedMediaOverride(this.node);return e!==s.PresetMediaTypes.COAST2COAST&&e!==s.PresetMediaTypes.COLUMNBG},enumerable:!0,configurable:!0}),e.prototype.onDontCropChange=function(e){var t=this,i=this.imageFitMode,n=e?o.PresetsStrategyType.FitMode:o.PresetsStrategyType.UnFitMode,r=e?"fitmode":"unfitmode";this.imageFitMode=e,this.previewListCAB.show({target:this.$element.find('[data-hook="media-preview"]'),title:"popups."+r+".heading",text:"popups."+r+".text",nodes:[this.node.identifyingNode],strategyType:n}).then(function(e){e||(t.imageFitMode=i)})},e.prototype.canChangeAlignment=function(){return this.flags.alignmentDropDownInFirstPanel&&!this.isInMobileEditMode&&this.seg&&this.seg.shouldAlignImage()},e.prototype.changeAlignment=function(e){var t=c.get(this,"seg.node.contentElement.allValuesByMediaType.image[0].relativeUri");this.seg.updateAlignment(t,e),this.onMediaChange({whatChanged:a.IEditEventType.AlignmentChange})},e.prototype.onPositionClicked=function(e){this.changeAlignment(e)},e.prototype.onAlignmentChange=function(e){this.changeAlignment(e.value)},e.prototype.hasZeroOpacity=function(){return this.mediaOpacityManager.hasZeroOpacity(this.node)},e.prototype.resetOpacity=function(){this.mediaOpacityManager.userResetOpacity(this.node);var e=this.mediaOpacityManager.getOpacity(this.node);this.consumerBiLogger.contentEditor.changeImageOpacity(!0,e,this.node.id,this.node&&this.node.alias,this.node.getSpecificContentElementType())},e}();angular.module("siteGeneratorEditorInternal").component("mediaEditor",{templateUrl:"views/editor/media-editor.html",require:{nodeEditorCtrl:"^?nodeEditor"},controller:d,bindings:{media:"=",field:"=",active:"<?",node:"=",contentElement:"=",onMediaChange:"&",onToggle:"&",mediaTooltip:"@?",onTooltipLinkClick:"&?",toggleDisabled:"="}})},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var r,a,s=i(30),l=i(4),c=i(0);!function(e){e[e.everyone=0]="everyone",e[e.approved=1]="approved"}(r||(r={})),function(e){e[e.signup=0]="signup",e[e.login=1]="login"}(a||(a={}));var d=function(e){function t(t,i,n,s,l,d,u,p,g,h,m,f,v,S,y,T,b){var I=e.call(this,b)||this;return I.$scope=t,I.previewScale=i,I.applicationState=n,I.CONSUMER_DIALOGS=s,I.CcDialogBuilder=l,I.$translate=d,I.cabbie=u,I.undoRedo=p,I.layoutSolver=g,I.pagesManager=h,I.initService=m,I.$q=f,I.modelTree=v,I.consumerBiLogger=S,I.documentServicesMediator=y,I.documentServicesPlatformService=T,I.initService.loaded().then(function(){I.contentElement=I.modelTree.getGeneralInformation().getContentElement(),I.contentElementValue=I.contentElement.values.Login.value,I.contentElementValue=o({enableGoogleLogin:!0,enableFacebookLogin:!0,policies:[],isLoginFirst:!1,isAutoApproved:!1},I.contentElementValue),I.contentElement.values.Login.value=I.contentElementValue,I.whoCanBeMemberOptions=[{key:r.everyone,label:I.$translate.instant("members-area.signup-settings-panel.who-can-be-member.option.everyone")},{key:r.approved,label:I.$translate.instant("members-area.signup-settings-panel.who-can-be-member.option.approved")}];var e=I.contentElementValue.isAutoApproved?r.everyone:r.approved;I.whoCanBeMember=I.whoCanBeMemberOptions.find(function(t){return t.key===e}),I.showFirstOptions=[{key:a.signup,label:I.$translate.instant("members-area.signup-settings-panel.which-option-show-first.option.signup")},{key:a.login,label:I.$translate.instant("members-area.signup-settings-panel.which-option-show-first.option.login")}];var t=I.contentElementValue.isLoginFirst?a.login:a.signup;I.whichOptionShowFirst=I.showFirstOptions.find(function(e){return e.key===t}),I.loginVendorsListItems=[{key:core.SignupVendors.google,hidden:!I.contentElementValue.enableGoogleLogin,label:I.$translate.instant("members-area.signup-settings-panel.allow-social-login.option.google")},{key:core.SignupVendors.facebook,hidden:!I.contentElementValue.enableFacebookLogin,label:I.$translate.instant("members-area.signup-settings-panel.allow-social-login.option.facebook")}],I.policiesLinks={},I.policies=c.cloneDeep(I.contentElementValue.policies),I.policies.length||I.policies.push({key:core.MembersPolicies.termsOfUse,active:!1},{key:core.MembersPolicies.privacyPolicy,active:!1});var i=I.policies.findIndex(function(e){return e.key===core.MembersPolicies.codeOfConduct});I.documentServicesPlatformService.hasSocialLayer()?i<0&&I.policies.push({key:core.MembersPolicies.codeOfConduct,active:!1}):i>0&&I.policies.splice(i,1);for(var n=0,s=I.policies;n<s.length;n++){var l=s[n];l.active&&l.link&&(I.policiesLinks[l.key]=I.getPolicyLink(l.link))}}),I}return n(t,e),t.$inject=["$scope","previewScale","applicationState","CONSUMER_DIALOGS","CcDialogBuilder","$translate","cabbie","undoRedo","layoutSolver","pagesManager","initService","$q","modelTree","consumerBiLogger","documentServicesMediator","documentServicesPlatformService","helpDialogManager"],t.prototype.whoCanBeMemberChange=function(e){this.contentElementValue.isAutoApproved=e!==r.approved,this.whoCanBeMember=this.whoCanBeMemberOptions.find(function(t){return t.key===e}),this.onFieldChanged(!0),this.consumerBiLogger.members.memberSignupSettingWhoCanBeAMemberClick("onboarding",e&&e.toString(),"[msid]",0,"")},t.prototype.whichOptionShowFirstChange=function(e){this.contentElementValue.isLoginFirst=e===a.login,this.whichOptionShowFirst=this.showFirstOptions.find(function(t){return t.key===e}),this.onFieldChanged(!1),this.consumerBiLogger.members.memberSignupSettingShowFirstClick("onboarding",e&&e.toString(),"[msid]",0,"")},t.prototype.onSocialToggle=function(e){switch(e.key){case core.SignupVendors.facebook:this.contentElementValue.enableFacebookLogin=!e.hidden,this.consumerBiLogger.members.memberSignupSettingSocialAndCommunityToggle("onboarding",this.contentElementValue.enableFacebookLogin,"facebook","[msid]",0,"");break;case core.SignupVendors.google:this.contentElementValue.enableGoogleLogin=!e.hidden,this.consumerBiLogger.members.memberSignupSettingSocialAndCommunityToggle("onboarding",this.contentElementValue.enableGoogleLogin,"google","[msid]",0,"")}this.onFieldChanged(!1)},t.prototype.onPoliciesChanged=function(){this.contentElementValue.policies=this.policies.map(function(e){return{key:e.key,active:e.active,link:e.link}})},t.prototype.onPolicyToggle=function(e,t){void 0===t&&(t=!1);var i=this.policies.find(function(t){return t.key===e});i.active=!t&&!i.active,i.active||(this.policiesLinks[e]=void 0,i.link=void 0),this.onPoliciesChanged(),this.consumerBiLogger.members.memberSignupSettingPoliciesToggle("onboarding",i.active,"privacy","[msid]",0,""),this.onFieldChanged(!1)},t.prototype.getPolicyLink=function(e){return{value:this.modelTree.getPageById(e),state:!0,id:e}},t.prototype.updateLink=function(e,t){var i,n=this;if(this.linkUpdateSuccessfully=!0,t.value===PagesManager.BlankPageId){var o=this.$translate.instant("members-area.signup-settings-panel."+e+".page-name");i=this.pagesManager.addPage(o).then(function(e){return n.pagesManager.togglePageVisibility(e),{name:o,value:e.getId()}})}else i=this.$q.when(t);i.then(function(t){n.policiesLinks[e]=n.getPolicyLink(t.value),n.policies.find(function(t){return t.key===e}).link=t.value,n.onPoliciesChanged(),n.onFieldChanged(!1)})},t.prototype.disablePolicy=function(e){this.linkUpdateSuccessfully||this.policiesLinks[e]&&this.policiesLinks[e].state||this.onPolicyToggle(e,!0)},t.prototype.onClickLink=function(e){var t=this;this.linkUpdateSuccessfully=!1;var i=this.policiesLinks[e]&&{value:this.policiesLinks[e].id},n=this.modelTree.getPagesNodes(),o={value:PagesManager.BlankPageId,name:this.$translate.instant("general.new-page")},r=n.map(function(e){return{value:e.getId(),name:e.getDisplayName()}});r.unshift(o),this.cabbie.show({target:'[data-hook="link-input-'+e+'"]',element:"c28-dropdown-action",attributes:{optionsList:r,selectedOption:i,headline:this.$translate.instant("members-area.signup-settings-panel."+e+".label"),subText:this.$translate.instant("link-details.page.select-page.text"),doneLabel:this.$translate.instant("link-details.dialog.ok"),closeLabel:this.$translate.instant("link-details.dialog.cancel"),showHelpButton:!1,onDone:function(i){return t.updateLink(e,i)}},hideAttribute:"onClose",position:{positionX:l.AssistantPositionX.Right,positionY:l.AssistantPositionY.Center}}).then(function(){return t.disablePolicy(e)})},t.prototype.getTooltip=function(e){return"members-area.signup-settings-panel."+e+".link"},t.prototype.onTooltipClick=function(e){switch(e.key){case"termsOfUse":this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.members.terms-of-use"),this.CONSUMER_DIALOGS.MEMBERS_TERMS_OF_USE);break;case"privacyPolicy":this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.members.privacy-policy"),this.CONSUMER_DIALOGS.MEMBERS_PRIVACY_POLICY)}},t.prototype.closePanel=function(){this.applicationState.goToBuilder()},t.prototype.onHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.members.signup-settings-panel"),this.CONSUMER_DIALOGS.MEMBERS_SIGNUP_SETTINGS)},t.prototype.onReturn=function(){},t.prototype.onFieldChanged=function(e){var t=this;this.layoutSolver.handleValueChange(this.contentElement,"Login",!1).then(function(){return e&&t.layoutSolver.onNodeChanged()}).then(function(){return t.undoRedo.captureOperation()})},t}(s.PanelBase);angular.module("siteGeneratorStaticsConsumerAppInternal").component("membersSignupSettingsPanel",{templateUrl:"views/editor/members-signup-settings-panel.html",controller:d})},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(30),r=i(0),a="members-area.login-bar-panel.",s=[{label:"hello-member",value:"helloMember"},{label:"welcome",value:"welcome"},{label:"member-name",value:"memberName"}],l=[{label:"pic-and-text",value:"avatarAndText"},{label:"text",value:"textOnly"},{label:"pic",value:"avatarOnly"}],c=function(e){function t(t,i,n,o,r,c,d,u,p,g,h){var m=e.call(this,h)||this;m.$scope=t,m.previewScale=i,m.applicationState=n,m.CONSUMER_DIALOGS=o,m.modelTree=r,m.layoutSolver=c,m.undoRedo=d,m.CcDialogBuilder=u,m.$translate=p,m.consumerBiLogger=g;var f=function(e){return function(t){var i=t.label,n=t.value;return{label:m.$translate.instant(e+i),value:n}}};return m.additionalTextOptions=s.map(f(a+"additional-text.option.")),m.showOptions=l.map(f(a+"login-bar-show.option.")),m.contentElement=m.modelTree.getGeneralInformation().getContentElement(),m}return n(t,e),t.$inject=["$scope","previewScale","applicationState","CONSUMER_DIALOGS","modelTree","layoutSolver","undoRedo","CcDialogBuilder","$translate","consumerBiLogger","helpDialogManager"],Object.defineProperty(t.prototype,"showValue",{get:function(){var e=this.contentElement.values.Login.value;return r.find(this.showOptions,function(t){return t.value===e.loginBarShow})||this.showOptions[0]},set:function(e){var t=this.contentElement.values.Login.value;t.loginBarShow=e.value,this.onFieldChanged(),this.consumerBiLogger.members.loginBarSettingLoginBarShow("onboarding",t.loginBarShow,"[msid]",0,"")},enumerable:!0,configurable:!0}),t.prototype.onFieldChanged=function(){var e=this;this.layoutSolver.handleValueChange(this.contentElement,"Login",!1).then(function(){return e.layoutSolver.onNodeChanged()}).then(function(){return e.undoRedo.captureOperation()})},Object.defineProperty(t.prototype,"hasAdditionalText",{get:function(){switch(this.showValue.value){case"avatarOnly":return!1;default:return!0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"additionalTextValue",{get:function(){var e=this.contentElement.values.Login.value;return r.find(this.additionalTextOptions,function(t){return t.value===e.loginBarText})||this.additionalTextOptions[0]},set:function(e){var t=this.contentElement.values.Login.value;t.loginBarText=e.value,this.onFieldChanged(),this.consumerBiLogger.members.loginBarSettingLoginLogoutTextChange("onboarding",t.loginBarText,"[msid]",0,"")},enumerable:!0,configurable:!0}),t.prototype.onTooltipClick=function(){},t.prototype.closePanel=function(){this.applicationState.goToBuilder()},t.prototype.openSignupSettings=function(){var e=this;this.applicationState.goToPagesPanel().then(function(){e.applicationState.goToSignupPanel()})},t.prototype.onHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.members.login-panel"),this.CONSUMER_DIALOGS.MEMBERS_LOGIN_SETTINGS)},t.prototype.showChange=function(e){console.log()},t.prototype.additionalTextChange=function(e){console.log()},t}(o.PanelBase);angular.module("siteGeneratorStaticsConsumerAppInternal").component("loginBarPanel",{templateUrl:"views/editor/login-bar-panel.html",controller:c})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(20),o=function(){function e(e,t){this.previewModeToggleService=e,this.consumerBiLogger=t,this.previewModeToggleService.init()}return e.$inject=["previewModeToggleService","consumerBiLogger"],e.prototype.$onDestroy=function(){this.previewModeToggleService.destroy()},e.prototype.hideMobilePreview=function(){this.previewModeToggleService.openDesktopPreview(),this.consumerBiLogger.builder.previewSiteSwitchToMobileDesktopView(n.BIModeType.previewInBuilder,"desktop")},e.prototype.openMobilePreview=function(){this.previewModeToggleService.openMobilePreview(),this.consumerBiLogger.builder.previewSiteSwitchToMobileDesktopView(n.BIModeType.previewInBuilder,"mobile")},e.prototype.onStopPreview=function(){this.previewModeToggleService.stopPreview(),this.consumerBiLogger.builder.previewSiteClosePage(n.BIModeType.previewInBuilder,"edit site")},e.prototype.isMobilePreview=function(){return this.previewModeToggleService.isMobilePreview()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("previewModeToggle",{templateUrl:"views/preview/preview-mode-toggle.html",controller:o,bindings:{}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=function(){function e(e,t,i,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P){var M=this;this.modelTree=t,this.$state=i,this.$scope=o,this.$stateParams=r,this.$window=a,this.CcDialogBuilder=s,this.$translate=l,this.$timeout=c,this.previewService=d,this.pagesManager=u,this.rendererSeo=p,this.undoRedo=g,this.initService=h,this.consumerBiLogger=m,this.consumerBiLoggerHelpers=f,this.tpaService=v,this.staticsUrls=S,this.flags=y,this.CONSUMER_DIALOGS=T,this.validation=b,this.richTextUtils=I,this.seoManager=P,this.seoErrorHandler={pageTitleSEO:{isValid:!0,isRequired:!0,validatorConfigKey:"title",isErrorShown:!1},descriptionSEO:{isValid:!0,validatorConfigKey:"description",isErrorShown:!1},metaKeywordsSEO:{isValid:!0,validatorConfigKey:"keywords",isErrorShown:!1},pageUriSEO:{isValid:!0,isRequired:!0,validatorConfigKey:"url",isErrorShown:!1}},this.state={},this.defaults={},this.config={description:{validation:{validator:function(e){var t=e||"";return M.seoManager.validateSeoDescription(t)},tooltip:"seo_description_validation"},helpTooltip:"seo_description_tooltip",placeholder:this.$translate.instant("seo_panel.description.placeholder")},title:{validation:{validator:function(e){var t=e||"";return M.seoManager.validateSeoTitle(t)},tooltip:"seo_title_validation"},helpTooltip:"seo_title_tooltip"},keywords:{validation:{validator:function(e){var t=e||"";return M.seoManager.validateSeoKeywords(t)},tooltip:"seo_keywords_validation"},helpTooltip:"seo_keywords_tooltip",placeholder:this.$translate.instant("seo_panel.keywords.placeholder")},url:{validation:{validator:function(e){var t=e||"";return M.validation.isPageName(t)},tooltip:"seo_url_validation"},helpTooltip:"seo_url_tooltip"}},this.indexableCheckbox={label:this.$translate.instant("seo_panel.search_results.placeholder")},this.openSeoPanelHelp=function(){M.CcDialogBuilder.showSupportIframe(M.$translate.instant("help.pages.seo"),M.CONSUMER_DIALOGS.SEO_PANEL_HELP)},this.updateValueAndSaveForm=function(e){M.seoErrorHandler[e].isRequired&&0===M.state[e].value.length&&(M.state[e].value=M.defaults[e]),M.saveForm(e)},this.saveForm=function(e){if(M.shouldSaveForm(e)){"indexable"===e&&M.updateCheckboxInnerState(),M.updateModel(e),M.updateAppState();var t=M.pageNode.contentElement.values[e],i=t.value+"";M.consumerBiLogger.pagesManager.seoPanelFieldWasUpdated(M.tpaService.getAppIdByPageNode(M.pageNode),e,t.type,i,i.length)}},this.$onInit=function(){M.initService.loaded().then(function(){M.pageId=M.$stateParams.pageId,M.pageNode=t.getPageNodeById(M.pageId),M.ce=M.pageNode&&M.pageNode.getContentElement()||{},M.initInnerState(),M.consumerBiLogger.pagesManager.seoPanelIsLoaded(v.getAppIdByPageNode(M.pageNode)),M.state.pageTitleSEO.value=M.state.pageTitleSEO.value||M.defaults.pageTitleSEO,M.state.pageUriSEO.value=M.state.pageUriSEO.value||M.defaults.pageUriSEO,M.$scope.$watch(function(){return M.state.pageTitleSEO.value},function(e,t){M.showErrorIfNeeded("pageTitleSEO",e,t)}),M.$scope.$watch(function(){return M.state.descriptionSEO.value},function(e,t){M.showErrorIfNeeded("descriptionSEO",e,t)}),M.$scope.$watch(function(){return M.state.metaKeywordsSEO.value},function(e,t){M.showErrorIfNeeded("metaKeywordsSEO",e,t)}),M.$scope.$watch(function(){return M.state.pageUriSEO.value},function(e,t){M.showErrorIfNeeded("pageUriSEO",e,t)}),M.$scope.$watch(function(){return M.ce.values.displayName.value},function(t,i){t!==i&&(e.isSitePublished()?(M.state.displayName.value=t,M.updateState()):M.initInnerState())}),M.unsubscribeOverlayBackdropClick=n.PubSub.subscribe(n.events.OVERLAY_BACKDROP_CLICK,function(){return M.onOverlayBackdropClick()})})},this.$scope.$on("$destroy",function(){M.consumerBiLogger.pagesManager.pagesPanelWasClosed("seo panel"),M.unsubscribeOverlayBackdropClick()})}return e.$inject=["siteState","modelTree","$state","$scope","$stateParams","$window","CcDialogBuilder","$translate","$timeout","previewService","pagesManager","rendererSeo","undoRedo","initService","consumerBiLogger","consumerBiLoggerHelpers","tpaService","staticsUrls","flags","CONSUMER_DIALOGS","validation","richTextUtils","seoManager"],e.prototype.onOverlayBackdropClick=function(){this.unsubscribeOverlayBackdropClick(),this.closeSeoPanel()},e.prototype.showErrorIfNeeded=function(e,t,i){var n=this,o=this.seoErrorHandler[e].isErrorShown,r=this.seoErrorHandler[e].validatorConfigKey;"url"===r&&(t=t.toLowerCase(),this.state[e].value=t),this.config[r].validation.validator(t)||(""!==t&&this.config[r].validation.validator(i)&&(this.state[e].value=i),o||(this.seoErrorHandler[e].isValid=!1,this.seoErrorHandler[e].isErrorShown=!0,this.$timeout(function(){n.seoErrorHandler[e].isValid=!0,n.seoErrorHandler[e].isErrorShown=!1},5e3)))},e.prototype.closeSeoPanel=function(){this.$state.go("^")},e.prototype.updateAppState=function(){this.rendererSeo.setPageSEO(this.pageNode,this.pagesManager.getPageIdByName(this.pageNode.getId())),this.undoRedo.captureOperation(!1)},e.prototype.shouldSaveForm=function(e){return this.hasValueChanged(e)},e.prototype.hasValueChanged=function(e){return"indexable"===e||this.state[e].value!==this.ce.values[e].value},e.prototype.updateModel=function(e){this.ce.values[e].value=this.state[e].value},e.prototype.updateDefaultsAndIndexableCheckbox=function(){var e=this.pagesManager.getPageIdByName(this.pageId),t=this.modelTree.getGeneralInformation().contentElement.values,i=t.BusinessName&&t.BusinessName.value&&this.richTextUtils.toPlainText(t.BusinessName.value);this.defaults=ob.deepClone(this.seoManager.getPageSEODefaults(this.pageNode.displayName,e,i,t))},e.prototype.initInnerState=function(){this.updateDefaultsAndIndexableCheckbox(),this.state=ob.deepClone(this.ce.values),this.indexableCheckbox.checked=!this.state.indexable.value},e.prototype.updateState=function(){this.updateDefaultsAndIndexableCheckbox(),this.state.pageTitleSEO.value=this.ce.values.pageTitleSEO.value},e.prototype.updateCheckboxInnerState=function(){this.state.indexable.value=!this.indexableCheckbox.checked},e.prototype.wixSEOWizUrl=function(){return this.staticsUrls.getSeoWizUrl("ADI_PAGE_SEO")},e.prototype.onSEOWizClick=function(){this.consumerBiLogger.builder.topBarSeoPanelGetFoundOnGoogleClick("seo panel")},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("seoPanel",{templateUrl:"views/seo-panel.html",controller:o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(68),o=function(){function e(e,t,i,n,o,r,a,s){this.$translate=e,this.CONSUMER_DIALOGS=t,this.CcDialogBuilder=i,this.$q=n,this.publishService=o,this.$timeout=r,this.consumerPublishService=a,this.consumerBiLogger=s,this.domainModel="free-domain",this.username=this.publishService.getUsername(),this.siteName=this.publishService.getSiteName(),this.validateSiteName()}return e.$inject=["$translate","CONSUMER_DIALOGS","CcDialogBuilder","$q","publishService","$timeout","consumerPublishService","consumerBiLogger"],e.prototype.closeChooseDomainDialog=function(){this.onClose()},e.prototype.validateSiteName=function(){this.siteNameValidation=this.publishService.validateSiteName(this.siteName),this.siteNameValidation.success=this.doesNewNameEqualToExistingSite()||this.siteNameValidation.success},e.prototype.onChangeSiteName=function(){var e=this;this.validateSiteName(),this.siteNameValidation.success?this.$timeout(function(){return e.invalidSiteNameTooltip=""},0):(this.invalidSiteNameTooltip="publish_error_"+(this.siteNameValidation.errorCode||"site_name_invalid").toLowerCase(),this.$timeout(function(){return e.showValidationErrorTooltip()},0))},e.prototype.nextStep=function(){var e=this;this.consumerBiLogger.builder.firstPublishClick(this.domainModel),this.publishService.changeSiteNameIfNeededAndValid(this.siteName).then(function(){return e.consumerPublishService.publishStory()}).then(function(){e.consumerBiLogger.builder.publishSuccess(!0),"free-domain"===e.domainModel?e.setState({$value:n.PublishDialogStates.CONGRATS}):e.setState({$value:n.PublishDialogStates.CONNECT})})},e.prototype.doesNewNameEqualToExistingSite=function(){return this.siteName===this.publishService.getSiteName()},Object.defineProperty(e.prototype,"validationTooltip",{get:function(){return angular.element("#invalid-name-tooltip")},enumerable:!0,configurable:!0}),e.prototype.showValidationErrorTooltip=function(){this.validationTooltip.tooltipster("show")},e.prototype.openChooseDomainHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.publish"),this.CONSUMER_DIALOGS.PUBLISH_CHOOSE_DOMAIN_HELP)},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("publishChooseDomain",{templateUrl:"views/publish/publish-choose-domain.html",controller:o,bindings:{setState:"&",onClose:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(44);angular.module("siteGeneratorStaticsConsumerAppInternal").component("publishCongrats",{templateUrl:"views/publish/publish-congrats.html",controller:n.PublishCongrats,bindings:{referral:"@"},require:{publishDialogCtrl:"^publishDialog"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(192),o=i(60),r=function(){function e(e,t,i,n){this.$translate=e,this.CONSUMER_DIALOGS=t,this.consumerBiLogger=i,this.CcDialogBuilder=n,this.consumerBiLogger.builder.connectDomainPageView(this.source,this.referral)}return e.$inject=["$translate","CONSUMER_DIALOGS","consumerBiLogger","CcDialogBuilder"],e.prototype.goToNewDomain=function(){this.publishDialogCtrl.goToNewDomain()},e.prototype.goToConnectDomain=function(){this.publishDialogCtrl.goToConnectDomain()},e.prototype.onClose=function(){this.publishDialogCtrl.skipToCongrats("close")},e.prototype.onCancel=function(){this.publishDialogCtrl.skipToCongrats("later")},Object.defineProperty(e.prototype,"biSource",{get:function(){switch(this.source){case o.TopBar.ConnectDomainSource:return this.CONSUMER_DIALOGS.TOPBAR_CONNECT_DOMAIN_HELP;case n.FakeBrowser.ConnectDomainSource:return this.CONSUMER_DIALOGS.FAKEBROWSER_CONNECT_DOMAIN_HELP;default:return this.CONSUMER_DIALOGS.PUBLISH_CONNECT_DOMAIN_HELP}},enumerable:!0,configurable:!0}),e.prototype.openConnectDomainHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.connectDomain"),this.biSource)},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("publishConnectDomain",{templateUrl:"views/publish/publish-connect-domain.html",controller:r,bindings:{source:"@",referral:"@",domain:"@"},require:{publishDialogCtrl:"^publishDialog"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(68);angular.module("siteGeneratorStaticsConsumerAppInternal").component("publishDialog",{templateUrl:"views/publish/publish-dialog.html",controller:n.PublishDialog,bindings:{source:"@",screen:"@",domain:"@"}})},function(e,t,i){"use strict";angular.module("siteGeneratorStaticsConsumerAppInternal").component("taskAnimation",{templateUrl:"views/animations/task-animation.html",bindings:{isTaskFinished:"=",isTaskRunning:"=",hideFinishedMessage:"<",runningMessage:"@",finishedMessage:"@"}})},function(e,t,i){"use strict";angular.module("siteGeneratorCommon").component("doubleSpinner",{templateUrl:"views/animations/double-spinner.html"})},function(e,t,i){"use strict";o.$inject=["chroma","themeChooserUtils"],Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);function o(e,t){return function(i){var n=t.toDarkColor(i.mainColor,i),o=e(n).hsv(),r=o[0],a=o[1]<.05?0:.2,s=r,l=(s+30)%360,c=e.hsv(s,a,.8).alpha(.6),d=e.hsv(l,a,.9).alpha(.3),u=e.hsv(s,a,.5).alpha(.1);return{gradientStart:c,gradientEnd:d,active:e.hsv(s,a,.5).alpha(.15),hover:u}}}angular.module("siteGeneratorStaticsConsumerAppInternal").factory("getStageBackgroundColors",o).constant("defaultToastDuration",6e3).constant("getKitName",function(e){return e?n.without(e.name.split("-"),"all").join("-"):""}).constant("createGuid",function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(59),o=i(0),r=(function(){}(),function(){function e(e,t,i,n,o,r){this.modelTree=e,this.storyServices=t,this.sitePartTypes=i,this.applicationState=n,this.$stateParams=o,this.flags=r}return e.$inject=["modelTree","storyServices","sitePartTypes","applicationState","$stateParams","flags"],e.prototype.getNode=function(e,t){if(!e)return null;if(t&&(e=this.getCorrectNodeId({sitePart:t,nodeId:e})),"header"===e)return{parent:null,node:this.modelTree.getGeneralInformation(),sitePart:this.sitePartTypes.HEADER};if("footer"===e)return{parent:null,node:this.modelTree.getFooterInformation(),sitePart:this.sitePartTypes.FOOTER};var i=this.modelTree.isMasterPageChild(e)?core.masterPage:this.storyServices.story.selectedPage,n=this.modelTree.findNodeAndParentAndPageByNodeId(e,i);return n&&n.node?{parent:n.parentNode,node:n.node,sitePart:this.sitePartTypes.BODY}:null},e.prototype.getCurrentNodeResult=function(){var e=this.applicationState.getContentFocus(),t=this.getCorrectNodeId(e);return t?this.getNode(t):null},e.prototype.getCurrentNode=function(){var e=this.getCurrentNodeResult();return e?e.node:null},e.prototype.getCurrentActiveNode=function(){var e=this.getCurrentNode();return e?e.isList()?this.getSpecificNode(e):e:null},e.prototype.getSpecificNode=function(e){var t=this,i=o.find(e.children,function(e){return e.id===t.$stateParams.childId});return i||e.children[0]},e.prototype.getCorrectNodeId=function(e){return o.isEmpty(e)?null:e.sitePart===this.sitePartTypes.FOOTER||e.sitePart===this.sitePartTypes.HEADER?e.sitePart:e.nodeId},e.prototype.getCurrentCorrectNodeId=function(e,t){if(e&&!t)throw"please supply sitePart";return this.getCorrectNodeId(e?{nodeId:this.modelTree.findIdentifyingNodeId(e),sitePart:t}:this.applicationState.getContentFocus())},e.prototype.getNodeByContentElement=function(e,t){return e.contentElement&&t.id&&t.id===e.contentElement.id||e.contentElement===t?e:t.id?o.find(e.children,function(e){return e.contentElement.id===t.id}):o.find(e.children,{contentElement:t})},e.prototype.getNodeSitePart=function(e){return this.flags.refactorOSIActions?e===this.modelTree.getGeneralInformation()?this.sitePartTypes.HEADER:e===this.modelTree.getFooterInformation()?this.sitePartTypes.FOOTER:this.sitePartTypes.BODY:this.isGeneralDescription(e)?"footer"!==e.containerPageId?this.sitePartTypes.HEADER:this.sitePartTypes.FOOTER:this.sitePartTypes.BODY},e.prototype.isNodeBody=function(e){return this.getNodeSitePart(e)===this.sitePartTypes.BODY},e.prototype.isGeneralDescription=function(e){return e&&"GeneralDescription"===e.getContentElementType()},e.prototype.isCurrentNodeTpa=function(e){return void 0===e&&(e=this.getCurrentNode()),!!e&&!!e.isTpaNode()},e.prototype.isCurrentNodeTpaPanel=function(e){return void 0===e&&(e=this.getCurrentNode()),!!e&&(n.ChatManager.isChat(e.contentElementType)||e.contentElementType===core.TpaWidgetTypes.Instagram_Widget||e.contentElementType===core.TpaTypes.Blog2||e.contentElementType===core.TpaWidgetTypes.Blog2_Custom_Feed_Widget)},e}());t.NodeFetcher=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("nodeFetcher",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.sitePartTypes=e,this.layoutSolver=t,this.simpleSolutionManager=i}return e.$inject=["sitePartTypes","layoutSolver","simpleSolutionManager"],e.prototype.getSectionSolution=function(e,t,i){if(!e&&!t&&!i)throw"can't get solution without pageId, nodeId or sitePart";return i&&i!==this.sitePartTypes.BODY?this.layoutSolver.getSelectedSolution(i):this.simpleSolutionManager.getSectionSolution(e,t)},e}();t.SolutionFetcher=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("solutionFetcher",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=function(){function e(e,t,i,o,r,a,s,l,c){var d=this;this.SmartAssistManager=e,this.smartAssistHelpers=t,this.storyServices=i,this.smartAssistConf=o,this.publishService=r,this.flags=a,this.undoRedo=s,this.smartAssistPublishManager=l,this.applicationState=c,a.headlessApi||n.PubSub.subscribe(n.events.NEW_STATE_STORY_WAS_SET,function(){d.SmartAssistManager.reset(),d.evaluateAllIssues()})}return e.$inject=["SmartAssistManager","smartAssistHelpers","storyServices","smartAssistConf","publishService","flags","undoRedo","smartAssistPublishManager","applicationState"],e.prototype.init=function(){this.initSmartAssistConfiguration(),this.evaluateAllIssues()},e.prototype.initSmartAssistConfiguration=function(){var e=this;this.storyServices.story.smartAssist||(this.storyServices.story.smartAssist={});var t={onCloseIssues:function(t){e.SmartAssistManager.unmute(t),n.PubSub.fire(n.events.SMART_ASSIST_ISSUES_CLOSED,t)},onMuteIssues:function(){e.undoRedo.captureOperation(),n.PubSub.fire(n.events.SMART_ASSIST_ISSUES_MUTED)},onUnmuteIssues:function(){e.undoRedo.captureOperation()},onOpenIssues:!this.issuesExisted&&function(){!e.publishService.isSitePublished()||e.storyServices.story.smartAssist.issuesExisted||e.applicationState.previewRevision()||(e.storyServices.story.smartAssist.issuesExisted=!0,e.undoRedo.captureOperation())}};n.PubSub.subscribeOnce(n.events.PUBLISH,function(){e.storyServices.story.smartAssist.issuesExisted=!!Object.keys(e.SmartAssistManager.getActiveIssues()).length,e.smartAssistPublishManager.evaluatePublishIssue()}),this.SmartAssistManager.init(this.smartAssistConf.getPotentialIssues(),this.storyServices.story.smartAssist,t)},e.prototype.evaluateAllIssues=function(){this.smartAssistHelpers.evaluateAllSocialRelated(),this.smartAssistHelpers.evaluateAllButtonsRelated(),this.smartAssistHelpers.evaluateAllPublishRelated(),this.flags.smartAssistTpa&&this.smartAssistHelpers.evaluateAllTpaRelated(),this.flags.textManager&&this.smartAssistHelpers.evaluateAllImportRelated()},Object.defineProperty(e.prototype,"issuesExisted",{get:function(){return this.storyServices.story.smartAssist.issuesExisted},enumerable:!0,configurable:!0}),e}();t.SmartAssistState=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistState",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(71),o=i(13),r=i(0),a=function(){function e(e,t,i,n,r,a,s){var l=this;this.SmartAssistManager=e,this.modelTreeHelpers=t,this.smartAssistTpaHelpers=i,this.flags=n,this.storyServices=r,this.textManagerHelpers=a,this.nodeTitleManager=s,this.evaluateAllSocialRelated=function(){l.SmartAssistManager.evaluateIssue({contexts:l.modelTreeHelpers.getAllSocialsRelatedNodes(),issueNamespaceId:o.namespaces.SOCIALS})},this.evaluateAllButtonsRelated=function(){l.SmartAssistManager.evaluateIssue({contexts:l.modelTreeHelpers.getAllNodesWithContentElement(!0),issueNamespaceId:o.namespaces.BUTTONS})},this.evaluateAllPublishRelated=function(){l.SmartAssistManager.evaluateIssue({issueNamespaceId:o.namespaces.PUBLISH,issueTypeId:o.issueTypeIds.PUBLISH_SITE_INTERVAL})},this.evaluateAllImportRelated=function(){l.evaluateAllImportContentRelated(),l.evaluateAllImportImagesRelated()},this.evaluateAllImportContentRelated=function(){if(l.flags.textManager&&l.storyServices.story.importedSite&&l.storyServices.story.importedSite.siteAddress)if(l.isTextManagerImportedContentTipEverSuggested())l.SmartAssistManager.evaluateIssue({issueNamespaceId:o.namespaces.IMPORT,issueTypeId:o.issueTypeIds.IMPORTED_CONTENT});else{var e=l.textManagerHelpers.getSupportedContentFields();l.SmartAssistManager.evaluateIssue({contexts:[l.modelTreeHelpers.getFirstNodeWithFieldEnabled(e)],issueNamespaceId:o.namespaces.IMPORT,issueTypeId:o.issueTypeIds.IMPORTED_CONTENT})}},this.evaluateAllImportImagesRelated=function(){l.flags.textManager&&l.storyServices.story.importedSite&&l.storyServices.story.importedSite.siteAddress&&(l.isTextManagerImportedImagesTipEverSuggested()?l.SmartAssistManager.evaluateIssue({issueNamespaceId:o.namespaces.IMPORT,issueTypeId:o.issueTypeIds.IMPORTED_IMAGES}):l.SmartAssistManager.evaluateIssue({contexts:[l.textManagerHelpers.getNodeForImportImages()],issueNamespaceId:o.namespaces.IMPORT,issueTypeId:o.issueTypeIds.IMPORTED_IMAGES}))},this.evaluateAllTpaRelated=function(){l.smartAssistTpaHelpers.evaluateIssues()}}return e.$inject=["SmartAssistManager","modelTreeHelpers","smartAssistTpaHelpers","flags","storyServices","textManagerHelpers","nodeTitleManager"],e.prototype.activeIssuesByIssueTypeId=function(e){return r.values(this.SmartAssistManager.getActiveIssues()).filter(function(t){return t.issueType.id===e})},e.prototype.isTextManagerImportedContentTipEverSuggested=function(){return this.storyServices.story.smartAssist&&r.get(this.storyServices.story,n.AssistantManager.textManagerImportedContentDoneKey)},e.prototype.isTextManagerImportedImagesTipEverSuggested=function(){return this.storyServices.story.smartAssist&&this.storyServices.story.smartAssist[n.AssistantManager.textManagerImportedImagesDoneKey]},e.prototype.getGeneralIssueInfo=function(){return{pageName:"General",pageId:"",sectionName:"",sectionPosition:100}},e.prototype.getTpaIcon=function(e){return"cc-icon-smart-assist-tpa-"+e.smartAssistData.iconName},e.prototype.getIssuePageInfo=function(e){var t=e.alias;return this.flags.smartAssistTpa&&this.smartAssistTpaHelpers.isSupportedTpaType(e)&&(t=e.smartAssistData.automationId),{pageName:this.modelTreeHelpers.getPageAliasById(e.containerPageId),pageId:e.containerPageId,sectionName:t,sectionPosition:this.getSectionPosition(e)}},e.prototype.getSectionPosition=function(e){return this.modelTreeHelpers.getPositionInPage(e)},e}();t.SmartAssistHelpers=a,angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistHelpers",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13);angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistButtonsIssueTypes",["smartAssistButtonsManager","unlinkedButtonTask","modelTreeHelpers",function(e,t,i){return[{id:n.issueTypeIds.UNLINKED_BUTTON,generateIdByContext:function(t){return e.generateId(t)},action:function(e){return t.start(e)},trigger:function(t){return e.isNodeHasButtonLinkIssue(t)},validateContext:function(e){return i.validateNode(e)},config:{priority:1,isInterrupt:!1}}]}])},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(13),r=i(0);angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistButtonsIssueUIDataBuilders",["$translate","fieldEditorConfiguration","nodeTitleManager","modelTreeHelpers","smartAssistHelpers",function(e,t,i,a,s){return(l={})[o.issueTypeIds.UNLINKED_BUTTON]=function(o){var l=a.isItemOfList(o),c={icon:"cc-icon-smart-assist-connect-button",pageInfo:s.getIssuePageInfo(o)};return n({},c,l?{text:e.instant("smart-assist.unlinked-button-issue.text-for-list-items",{listItemName:i.getNodeTitleValue(o)}),issueDivider:"content"}:{text:e.instant("smart-assist.unlinked-button-issue.text",{buttonName:r.find(o.contentElement.values,function(e){return t.isButton(e)}).value.callToAction}),issueDivider:"content"})},l;var l}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(13),r=i(0),a=function(){function e(e,t,i,r,a,s,l){var c=this;this.flags=e,this.nodeFetcher=t,this.fieldEditorConfiguration=i,this.linkDetailsManager=r,this.SmartAssistManager=a,this.modelTreeHelpers=s,this.smartAssistHelpers=l;var d=[n.events.PAGE_SHOWN,n.events.PAGE_DUPLICATED,n.events.PAGE_HIDDEN,n.events.PAGE_DELETED,n.events.SECTION_ADDED,n.events.SECTION_MOVED,n.events.SECTION_DUPLICATED,n.events.SECTION_DELETED,n.events.LIST_ITEM_ADDED_OR_SHOWN,n.events.LIST_ITEM_DELETED_OR_HIDDEN,n.events.LINK_OF_FIELD_UPDATED,n.events.CREATED_PAGE_FROM_ITEM];e.headlessApi||(d.forEach(function(e){n.PubSub.subscribe(e,c.runEvaluateOnButtons.bind(c))}),n.PubSub.subscribe(n.events.FIELD_TOGGLED,function(e){var t=e.node,i=e.field;t.containerPageId&&"button"===i.data.type&&c.SmartAssistManager.evaluateIssue({contexts:c.modelTreeHelpers.isItemOfList(t)?c.modelTreeHelpers.getItemsOfList(t.identifyingNode):[t],issueNamespaceId:o.namespaces.BUTTONS})}))}return e.$inject=["flags","nodeFetcher","fieldEditorConfiguration","linkDetailsManager","SmartAssistManager","modelTreeHelpers","smartAssistHelpers"],e.prototype.runEvaluateOnButtons=function(e){var t="Page"===e.contentElementType?this.modelTreeHelpers.getNodesWithContentElementOfPages([e]):[e],i=r.flatten(t.map(function(e){return e&&e.isList()?e.children:e}));this.SmartAssistManager.evaluateIssue({contexts:i,issueNamespaceId:o.namespaces.BUTTONS})},e.prototype.isNodeHasButtonLinkIssue=function(e){return!(!e||e.userHidden||this.modelTreeHelpers.isPageOfNodeHidden(e))&&this.isButtonUnlinked(e)},e.prototype.isButtonUnlinked=function(e){var t=this,i=r.findKey(e.contentElement.values,function(e){return t.fieldEditorConfiguration.isButton(e)}),n=e.contentElement.values[i],o=e.argsMatchingPolicy[i];if(!n||!o)return!1;if(this.flags.newButtonControl||this.flags.twoButtonSection){var a=n.value;return!this.linkDetailsManager.isLinked(a)}return!this.fieldEditorConfiguration.getILink(n).state},e.prototype.generateId=function(e){return e?e.id:""},e}();t.SmartAssistButtonsManager=a,angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistButtonsManager",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13);angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistLayoutIssueTypes",["smartAssistLayoutManager","betterLayoutTask","imageUpscaleTask","modelTreeHelpers",function(e,t,i,o){return[{id:n.issueTypeIds.BETTER_LAYOUT,generateIdByContext:function(t){return e.generateId(t.node)},action:function(e){return t.start(e)},trigger:function(t){return e.isSectionUgly(t.node)},validateContext:function(e){return o.validateNode(e.node)},config:{priority:1,isInterrupt:!1}},{id:n.issueTypeIds.IMAGE_UPSCALE,generateIdByContext:function(t){return e.generateId(t.node)},action:function(e){return i.start(e)},trigger:function(t){return e.isImageUpscaleRequired(t.node)},validateContext:function(e){return o.validateNode(e.node)},config:{priority:1,isInterrupt:!1}}]}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13);angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistLayoutIssueUIDataBuilders",["$translate","smartAssistHelpers",function(e,t){return(i={})[n.issueTypeIds.BETTER_LAYOUT]=function(i){return{pageInfo:t.getIssuePageInfo(i.node),icon:"cc-icon-assistant-bucket-section-design",text:e.instant("smart-assist.better-layout-issue.text",{sectionType:i.node.alias}),fixIssueText:e.instant("smart-assist.better-layout-issue.fix"),issueDivider:"content"}},i[n.issueTypeIds.IMAGE_UPSCALE]=function(i){return{pageInfo:t.getIssuePageInfo(i.node),icon:"cc-icon-assistant-bucket-image",text:e.instant("smart-assist.image-upscale-issue.text"),fixIssueText:e.instant("smart-assist.image-upscale-issue.fix"),issueDivider:"content"}},i;var i}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(13),r=function(){function e(e,t,i,n,o,r){this.sectionLayoutSuggestions=e,this.SmartAssistManager=t,this.applicationState=i,this.sectionMedia=n,this.imageUpscale=o,this.flags=r,!r.betterLayoutSuggestions&&!r.superRes||r.headlessApi||(this.subsribeToNodeEvents(),this.subscribeToPageEvents())}return e.$inject=["sectionLayoutSuggestions","SmartAssistManager","applicationState","sectionMedia","imageUpscale","flags"],e.prototype.isSectionUgly=function(e){return this.sectionLayoutSuggestions.isSectionUgly(e)},e.prototype.isImageUpscaleRequired=function(e){if(this.sectionMedia.isImage(e)){var t=this.imageUpscale.isSuperUpscaleRequired(e),i=this.imageUpscale.isSuperUpscaled(e);return t&&!i}return!1},e.prototype.generateId=function(e){return e?e.id:""},e.prototype.subsribeToNodeEvents=function(){var e=this;[n.events.CONTENT_UPDATED,n.events.SECTION_DESIGN_CHANGED,n.events.LIST_ITEM_ADDED_OR_SHOWN,n.events.LIST_ITEM_DELETED_OR_HIDDEN].forEach(function(t){n.PubSub.subscribe(t,e.evaluateIssues.bind(e))}),n.PubSub.subscribe(n.events.MEDIA_UPSCALE_CHANGED,this.evaluateImageUpscaleLayoutIssue.bind(this))},e.prototype.subscribeToPageEvents=function(){var e=this;[n.events.SITE_IS_LOADED,n.events.SWITCH_DESIGN_KIT,n.events.SWITCH_FONT_KIT,n.events.CHANGE_FONT_SIZE,n.events.PAGE_CHANGED].forEach(function(t){n.PubSub.subscribe(t,function(){e.applicationState.getPageNodeInFocus().children.forEach(function(t){t.isUserHidden()||e.evaluateIssues(t)})})})},e.prototype.evaluateIssues=function(e){this.evaluateBetterLayoutSuggestionsIssue(e),this.evaluateImageUpscaleLayoutIssue(e)},e.prototype.evaluateBetterLayoutSuggestionsIssue=function(e){this.flags.betterLayoutSuggestions},e.prototype.evaluateImageUpscaleLayoutIssue=function(e){var t=this;this.flags.superRes&&e&&this.SmartAssistManager.evaluateIssue({contexts:Array.isArray(e)?e.map(function(e){return t.createImageUpscaleLayoutContext(e)}):[this.createImageUpscaleLayoutContext(e)],issueNamespaceId:o.namespaces.LAYOUT,issueTypeId:o.issueTypeIds.IMAGE_UPSCALE})},e.prototype.createBetterLayoutContext=function(e){return{node:e.identifyingNode}},e.prototype.createImageUpscaleLayoutContext=function(e){return{node:e.isListHeader()?e.identifyingNode:e}},e}();t.SmartAssistLayoutManager=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistLayoutManager",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13);angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistSocialsIssueTypes",["smartAssistSocialsManager","socialDefaultLinksTask","modelTreeHelpers",function(e,t,i){return[{id:n.issueTypeIds.SOCIALS_DEFAULT_LINKS,validateContext:function(e){return i.validateNode(e)},action:function(e){return t.start(e)},trigger:function(t){return e.isSocialsHasDefaultAndVisibleLink(t)},isSingleton:!0,config:{priority:1,isInterrupt:!1}}]}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13);angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistSocialsIssueUIDataBuilders",["$translate","smartAssistHelpers","flags",function(e,t,i){return(o={})[n.issueTypeIds.SOCIALS_DEFAULT_LINKS]=function(n){return{text:e.instant("smart-assist.socials-default-links-issue.text"),pageInfo:i.smartAssistTpa&&t.getGeneralIssueInfo(),icon:"cc-icon-smart-assist-connect-socials",issueDivider:"general"}},o;var o}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(0),r=function(){function e(e,t,i,o,r,a,s,l,c){var d=this;this.flags=e,this.nodeFetcher=t,this.fieldEditorConfiguration=i,this.SmartAssistManager=o,this.modelTreeHelpers=r,this.smartAssistHelpers=a,this.socialLinksHelpers=s,this.socialLinksValidator=l,this.ReferenceFieldTypes=c;var u=[n.events.PAGE_SHOWN,n.events.PAGE_DUPLICATED,n.events.SECTION_ADDED,n.events.SECTION_MOVED,n.events.PAGE_DELETED,n.events.PAGE_HIDDEN,n.events.SECTION_DELETED,n.events.SOCIAL_LINKS_UPDATED];e.headlessApi||(u.forEach(function(e){n.PubSub.subscribe(e,d.smartAssistHelpers.evaluateAllSocialRelated)}),n.PubSub.subscribe(n.events.FIELD_TOGGLED,function(e){"social"===e.field.data.subType&&d.smartAssistHelpers.evaluateAllSocialRelated()}))}return e.$inject=["flags","nodeFetcher","fieldEditorConfiguration","SmartAssistManager","modelTreeHelpers","smartAssistHelpers","socialLinksHelpers","socialLinksValidator","ReferenceFieldTypes"],e.prototype.getSocialsNode=function(){return this._socialsNode||(this._socialsNode=this.modelTreeHelpers.getSocialNode()),this._socialsNode},e.prototype.isSocialsHasDefaultAndVisibleLink=function(e){var t=this,i=o.get(e,"contentElement.referenceFields")||{};return!(!e||!i[this.ReferenceFieldTypes.SOCIAL]||this.modelTreeHelpers.isPageOfNodeHidden(e))&&this.socialLinksHelpers.extractSocialLinks(this.getSocialsNode()).some(function(e){return!e.hidden&&t.socialLinksValidator.isDefaultUrl(e.url)})},e}();t.SmartAssistSocialsManager=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistSocialsManager",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13);angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistPublishIssueTypes",["smartAssistPublishManager","publishSiteIntervalTask","modelTreeHelpers",function(e,t,i){return[{id:n.issueTypeIds.PUBLISH_SITE_INTERVAL,validateContext:function(){return!0},action:function(e){return t.start(e)},trigger:function(){return e.isTimeToPublish()},config:{priority:1,isInterrupt:!1}}]}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13);angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistPublishIssueUIDataBuilders",["$translate","smartAssistHelpers","flags",function(e,t,i){return(o={})[n.issueTypeIds.PUBLISH_SITE_INTERVAL]=function(n){return{text:e.instant("smart-assist.publish_site_interval-issue.text"),pageInfo:i.smartAssistTpa&&t.getGeneralIssueInfo(),icon:"cc-icon-smart-assist-publish"}},o;var o}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=function(){function e(e,t,i,o,r){var a=this;this.flags=e,this.SmartAssistManager=t,this.publishTimer=i,this.subscribersEvents=o,this.smartAssistHelpers=r,this.evaluatePublishIssue=function(){a.smartAssistHelpers.evaluateAllPublishRelated()},e.headlessApi||n.PubSub.subscribe(n.events.PUBLISH_INTERACTIONS_UPDATED,this.evaluatePublishIssue)}return e.$inject=["flags","SmartAssistManager","publishTimer","subscribersEvents","smartAssistHelpers"],e.prototype.isTimeToPublish=function(){return this.publishTimer.isTimeToPublish()},e}();t.SmartAssistPublishManager=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistPublishManager",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13),o=i(0);angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistTpaIssueTypes",["smartAssistTpaManager","tpaSettings","modelTreeHelpers","assistantManager",function(e,t,i,r){return o.map(core.TpaTypes,function(a){return{id:n.issueTypeIds[a],validateContext:function(e){return!!o.find(i.getTpaNodesFromAllPages(),function(t){return t.id===e.id})},generateIdByContext:function(e){return e.id+"-"+e.smartAssistData.id},action:function(e){t.openTpaAction(e),r.stop()},trigger:function(t){return e.isShowTpaTip(t)},isSingleton:!1,config:{priority:1,isInterrupt:!1}}})}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(13),r=i(0),a=function(){function e(e,t,i,n,o,r,a,s,l){this.modelTreeHelpers=e,this.applicationParameters=t,this.SmartAssistManager=i,this.tpaUrlBuilder=n,this.$q=o,this.$translate=r,this.storesFunnelApi=a,this.$injector=s,this.bookingsFunnelApi=l,this._assistantTabListService=null}return e.$inject=["modelTreeHelpers","applicationParameters","SmartAssistManager","tpaUrlBuilder","$q","$translate","storesFunnelApi","$injector","bookingsFunnelApi"],Object.defineProperty(e.prototype,"assistantTabListService",{get:function(){return this._assistantTabListService||(this._assistantTabListService=this.$injector.get("assistantTabListService")),this._assistantTabListService},enumerable:!0,configurable:!0}),e.prototype.muteFixedIssues=function(e,t){var i=this.SmartAssistManager.getActiveIssuesByFilter(o.namespaces.TPA,e),n=r.filter(i,function(e){return!r.find(t,function(t){return r.isEqual(e.context.smartAssistData.link,t.link)})});this.SmartAssistManager.mute(n)},e.prototype.isIssueTypeAlreadyExist=function(e){var t=this.SmartAssistManager.getActiveIssues(),i=r.filter(t,function(e,t){return e.namespaceId===o.namespaces.TPA});return r.find(i,function(t){return t.context&&t.context.smartAssistData&&t.context.smartAssistData.link.type===e})},e.prototype.removeTpaIssues=function(e){var t=this,i=this.SmartAssistManager.getActiveIssuesByFilter(o.namespaces.TPA,e);r.each(i,function(e){t.SmartAssistManager.evaluateIssue({contexts:[e.context],issueNamespaceId:o.namespaces.TPA,issueTypeId:e.context.contentElementType})})},Object.defineProperty(e.prototype,"supportedTpaTypes",{get:function(){return[this.applicationParameters.tpaTypes.Stores.type,this.applicationParameters.tpaTypes.Bookings.type]},enumerable:!0,configurable:!0}),e.prototype.isSupportedTpaType=function(e){return r.includes(this.supportedTpaTypes,e.contentElementType)},e.prototype.evaluateIssues=function(){var e=this,t=this.modelTreeHelpers.getTpaNodesFromAllPages(),i=r.filter(t,function(t){return e.isSupportedTpaType(t)});r.some(i)&&r.each(i,function(t){var i=t,a=i.contentElement.type,s=e.tpaUrlBuilder.getTpaInstance(a,i).instance,l=e.$q.resolve([]);a===e.applicationParameters.tpaTypes.Stores.type?l=e.storesFunnelApi.getFunnelData(e.$translate.instant,s):a===e.applicationParameters.tpaTypes.Bookings.type&&(l=e.bookingsFunnelApi.getFunnelData(e.$translate.instant,s)),l.then(function(i){e.muteFixedIssues(a,i),i.length>0&&e.assistantTabListService.selectSmartAssistTab(),r.each(i,function(i,n){var a=r.clone(t);a.smartAssistData=i,a.smartAssistData.id=n,e.SmartAssistManager.evaluateIssue({contexts:[a],issueNamespaceId:o.namespaces.TPA,issueTypeId:a.contentElementType})}),n.PubSub.fire(n.events.TPA_SMART_ASSIST_ISSUES_UPDATED)})})},e}();t.SmartAssistTpaHelpers=a,angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistTpaHelpers",a)},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0);angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistTpaIssueUIDataBuilders",["$translate","fieldEditorConfiguration","nodeTitleManager","modelTreeHelpers","smartAssistHelpers",function(e,t,i,r,a){return o.reduce(core.TpaTypes,function(e,t){return n({},e,((i={})[t]=function(e){var t={icon:a.getTpaIcon(e),pageInfo:a.getIssuePageInfo(e)};return n({},t,{text:e.smartAssistData.title,issueDivider:"upgrade"===e.smartAssistData.link.type?"upgrade":"general"})},i));var i},{})}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(56),r=i(0),a=function(){function e(e,t,i,o,a){var s=this;this.flags=e,this.smartAssistHelpers=t,this.storyServices=i,this.publishTimer=o,this.smartAssistTpaHelpers=a,this.evaluateTpaIssue=function(){s.smartAssistHelpers.evaluateAllTpaRelated()},this.previewsCountBeforeTrigger=1,e.headlessApi||(n.PubSub.subscribe(n.events.TPA_INTERACTIONS_UPDATED,function(){s.flags.smartAssistTpa&&s.evaluateTpaIssue()}),n.PubSub.subscribe(n.events.TPA_DELETED,function(e){if(s.flags.smartAssistTpa){var t=r.find(e.children,function(e){return r.includes(s.smartAssistTpaHelpers.supportedTpaTypes,e.contentElementType)});t&&(s.smartAssistTpaHelpers.removeTpaIssues(t.contentElementType),s.evaluateTpaIssue())}}))}return e.$inject=["flags","smartAssistHelpers","storyServices","publishTimer","smartAssistTpaHelpers"],e.prototype.generateId=function(e){return e?e.id:""},e.prototype.isShowTpaTip=function(e){var t=r.get(this.storyServices.story,o.PublishTimer.publishClickedKey)||0,i=!!e&&(t>=this.previewsCountBeforeTrigger||this.publishTimer.isTimeToPublish());if(i){var n=e.smartAssistData,a=this.smartAssistTpaHelpers.isIssueTypeAlreadyExist(n.link.type);if(n&&n.link.type&&a)return r.isEqual(r.omit(a.context.smartAssistData,"id"),r.omit(n,"id"))}return i},e}();t.SmartAssistTpaManager=a,angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistTpaManager",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=function(){function e(e,t,i,o,r,a,s,l){var c=this;this.SmartAssistManager=e,this.modelTreeHelpers=t,this.smartAssistHelpers=i,this.textManagerHelpers=o,this.flags=r,this.storyServices=a,this.sectionMedia=s,this.applicationState=l,this.IMPORT_RELATED_EVENTS=[n.events.PAGE_SHOWN,n.events.PAGE_DUPLICATED,n.events.PAGE_HIDDEN,n.events.PAGE_DELETED,n.events.SECTION_ADDED,n.events.SECTION_MOVED,n.events.SECTION_DUPLICATED,n.events.SECTION_DELETED,n.events.LIST_ITEM_ADDED_OR_SHOWN,n.events.LIST_ITEM_DELETED_OR_HIDDEN,n.events.LINK_OF_FIELD_UPDATED,n.events.CREATED_PAGE_FROM_ITEM,n.events.SWITCH_MODE,n.events.MEDIA_TYPE_CHANGE,n.events.SECTION_DESIGN_CHANGED,n.events.IMPORT_TIP_DONE],r.headlessApi||(this.IMPORT_RELATED_EVENTS.forEach(function(e){n.PubSub.subscribe(e,c.smartAssistHelpers.evaluateAllImportRelated)}),n.PubSub.subscribe(n.events.FIELD_TOGGLED,function(e){var t=e.node,i=e.field;c.isFieldSupported(t,i)&&c.smartAssistHelpers.evaluateAllImportContentRelated()}),n.PubSub.subscribe(n.events.MEDIA_TOGGLED,function(e){var t=e.node,i=e.field;c.isFieldSupported(t,i)&&c.smartAssistHelpers.evaluateAllImportImagesRelated()}))}return e.$inject=["SmartAssistManager","modelTreeHelpers","smartAssistHelpers","textManagerHelpers","flags","storyServices","sectionMedia","applicationState"],e.prototype.isImportToursExist=function(){return this.getImportToursNames().length>0},e.prototype.getImportToursNames=function(){return this.flags.textManager&&this.flags.textManagerTours?(this.isShowImportContentTip()?["importContentAssistantTask"]:[]).concat(this.isShowImportImagesTip()?["importImagesAssistantTask"]:[]):[]},e.prototype.isFieldSupported=function(e,t){return this.flags.textManager&&this.flags.textManagerTours&&e.containerPageId&&-1!==[core.ElementSubTypes.Title,core.ElementSubTypes.Subtitle,core.ElementSubTypes.LongText,core.ElementSubTypes.Image].indexOf(t.data.subType)},e.prototype.isShowImportContentTip=function(){if(this.applicationState.isInMobileEditMode()||this.smartAssistHelpers.isTextManagerImportedContentTipEverSuggested())return!1;var e=this.textManagerHelpers.getNodeForImportContent(),t=this.storyServices.story.importedSite;return!!e&&t&&t.isTextFound},e.prototype.isShowImportImagesTip=function(){if(this.applicationState.isInMobileEditMode()||this.smartAssistHelpers.isTextManagerImportedImagesTipEverSuggested())return!1;var e=this.textManagerHelpers.getNodeForImportImages(),t=this.storyServices.story.importedSite;return!!e&&t&&t.isMediaFound},e}();t.SmartAssistImportManager=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistImportManager",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13);angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistImportIssueUIDataBuilders",["$translate","smartAssistHelpers",function(e,t){return(i={})[n.issueTypeIds.IMPORTED_CONTENT]=function(i){return{text:e.instant("smart-assist.import-content-issue.text"),pageInfo:t.getIssuePageInfo(i),icon:"cc-icon-assistant-bucket-imported-content",fixIssueText:e.instant("smart-assist.import-content-issue.fix"),issueDivider:"imported-content"}},i[n.issueTypeIds.IMPORTED_IMAGES]=function(i){return{text:e.instant("smart-assist.import-images-issue.text"),pageInfo:t.getIssuePageInfo(i),icon:"cc-icon-assistant-bucket-imported-content",fixIssueText:e.instant("smart-assist.import-images-issue.fix"),issueDivider:"imported-content"}},i;var i}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13);angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistImportIssueTypes",["smartAssistImportManager","importTask","modelTreeHelpers",function(e,t,i){return[{id:n.issueTypeIds.IMPORTED_CONTENT,validateContext:function(){return!0},action:function(e){return t.start(e)},trigger:function(t){return e.isShowImportContentTip()},config:{priority:1,isInterrupt:!1}},{id:n.issueTypeIds.IMPORTED_IMAGES,validateContext:function(){return!0},action:function(e){return t.start(e)},trigger:function(t){return e.isShowImportImagesTip()},config:{priority:1,isInterrupt:!1}}]}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(257),r=i(256),a=i(258),s=i(259),l=i(260),c=i(261),d=i(255),u=i(269),p=i(262),g=i(263),h=i(264),m=i(265),f=i(266),v=i(267),S=i(268),y=function(){function e(e,t,i,y,T){var b=this,I=n.noop,P={validateNumber:function(e){null===e||isFinite(e)||I("invalid number",e)},validateString:function(t){return null!==(t=e.sanitizePII(t))&&"string"!=typeof t&&I("Invalid string",t),t},validateGuid:function(e){null===e||"string"==typeof e&&/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/.test(e.toLowerCase())||I("Invalid guid",e)},onError:I,_log:n.noop,log:function(t){y.predictionModel&&y.debug&&T.setEvent(t.src,t.evid);var o=e.getOwnerId();o&&(t.ownerId=o);var r=e.getUserRoles();r&&(t.roles=r);var a=n[String("pick")](t,function(e){return null!==e});return i.log(a)}},M=!1;this.pauseBI=function(){M||(P._log=P.log,P.log=n.noop,M=!0)},this.restoreBI=function(){P._log&&M&&(P.log=P._log,M=!1)},this.apps=new o.AppsConsumerBiLogger(e,t,P),this.automation=new r.AutomationConsumerBiLogger(e,t,P),this.builder=new a.BuilderConsumerBiLogger(e,t,P),this.contentEditor=new s.ContentEditorConsumerBiLogger(e,t,P),this.dialogs=new l.DialogsConsumerBiLogger(e,t,P),this.intro=new c.IntroConsumerBiLogger(e,t,P),this.med=new d.MedConsumerBiLogger(e,t,P),this.members=new u.MembersConsumerBiLogger(e,t,P),this.pagesManager=new p.PagesManagerConsumerBiLogger(e,t,P),this.provisioning=new g.ProvisioningConsumerBiLogger(e,t,P),this.sectionDesign=new h.SectionDesignConsumerBiLogger(e,t,P),this.sectionManagement=new m.SectionManagementConsumerBiLogger(e,t,P),this.siteDesign=new f.SiteDesignConsumerBiLogger(e,t,P),this.tips=new v.TipsConsumerBiLogger(e,t,P),this.tour=new S.TourConsumerBiLogger(e,t,P),this.warn=function(e,t){return b.errorEvent(e,t,20)},this.err=function(e,t){return b.errorEvent(e,t,30)},this.fatal=function(e,t){return b.errorEvent(e,t,40)},this.errorEvent=function(t,n,o){return n=n&&n.substr(0,1600),i.log({adapter:"trg",src:66,evid:10,cat:1,iss:1,sev:o,errc:t,dsc:n,ver:e.getVersion(),did:e.getStoryId(),msid:e.getMetaSiteId(),esi:e.getEsi(),adiBuilderType:e.getAdiBuilderType()})}}return e.$inject=["consumerBiLoggerHelpers","clientTopology","wixBiLogger","flags","prediction"],e}();t.ConsumerBiLogger=y,angular.module("siteGeneratorCommon").service("consumerBiLogger",y)},function(e,t,i){"use strict";angular.module("siteGeneratorStaticsConsumerAppInternal").factory("BackendStoryLocale",function(){return{build:function(e){return e}}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(1),r=i(0),a=function(e,t,i,n){return e.resolve().then(t).then(function(e){return e},function(o){if(++i>=n)throw o;var r=e.defer(),s=1===i?0:1e3*Math.pow(2,i-2);return setTimeout(function(){a(e,t,i,n).then(r.resolve,r.reject)},s),r.promise})},s=function(){function e(e,t,i,n,o,r,a,s){this.consumerBiLogger=e,this.flags=t,this.storyManager=i,this.$q=n,this.previewService=o,this.introManager=r,this.storyServices=a,this.dbStory=s,this.saving=null,this.publishing=null,this.savingAsTemplate=null,this.markingAsMajor=null,this.owner={},this.selectedStyle={},this.selectedPage="",this.bft="{}"}return e.prototype.fromDbStory=function(){var t={revision:this.dbStory.revision,id:e.calcId(this.dbStory)},i={userRoles:this.dbStory.userRoles?this.dbStory.userRoles.split(","):[],ownerId:this.dbStory.ownerId,isDraft:!!this.dbStory.isDraft,headlessSiteBuildDone:!!this.dbStory.blob.headlessSiteBuildDone,createdFromTemplate:!!this.dbStory.blob.createdFromTemplate};return r.assign(t,this.dbStory.blob,i),t},e.prototype.toDbStory=function(e){this.dbStory.blob=r.omit(e,"revision"),this.dbStory.blob.adiFeatures=this.dbStory.blob.adiFeatures||{},this.dbStory.blob.adiFeatures.htmlRevision=!0,this.dbStory.blob.htmlRevision=this.previewService.getHtmlRevision(),this.dbStory.blob.headlessSiteBuildDone=e.headlessSiteBuildDone,this.dbStory.blob.createdFromTemplate=e.createdFromTemplate,this.dbStory.revision=e.revision},e.prototype.saveStory=function(e,t,i,n){var r=this;if(this.saving)this.checkIfStoryIsHanging();else{this.latestSave=(new Date).getTime();var a=e.id?this.update(e):this.create(t,e,i,n);this.saving=a.catch(function(e){return r.consumerBiLogger.err(o.BIErrorCodes.SaveStoryFailed,JSON.stringify(e))}).finally(function(){i&&(e.isDraft=!0),r.saving=null})}return this.saving},e.prototype.markCreated=function(t,i){return this.flags.headlessApi&&!this.dbStory.storyId.metaSiteId&&(this.dbStory.storyId.metaSiteId=this.storyServices.metaSiteId),this.storyManager.markCreated(this.dbStory,this.flags.templateSite?"":e.BLANK_TEMPLATE_META_SITE_ID,this.flags.headlessApi?i:this.dbStory.siteId)},e.prototype.publishStory=function(e){var t=this;return this.publishing||(this.publishing=this.storyManager.publish(this.dbStory).then(function(t){return e.revision=t,e}).catch(function(e){return t.consumerBiLogger.err(o.BIErrorCodes.PublishStoryFailed,JSON.stringify(e))}).finally(function(){return t.publishing=null})),this.publishing},e.prototype.saveStoryAsTemplate=function(e){var t=this;return this.savingAsTemplate||(this.savingAsTemplate=this.storyManager.saveAsTemplate(this.dbStory).then(function(t){return e.revision=t,e}).catch(function(e){return t.consumerBiLogger.err(o.BIErrorCodes.PublishStoryFailed,JSON.stringify(e))}).finally(function(){return t.savingAsTemplate=null})),this.savingAsTemplate},e.prototype.markStoryAsMajorRevision=function(e){var t=this;return this.markingAsMajor||(this.markingAsMajor=this.storyManager.markAsMajorRevision(this.dbStory).then(function(t){return e.revision=t,e}).catch(function(e){return t.consumerBiLogger.err(o.BIErrorCodes.MarkMajorRevisionStoryFailed,JSON.stringify(e))}).finally(function(){t.markingAsMajor=null})),this.markingAsMajor},e.prototype.update=function(e){var t=this;return this.toDbStory(e.getCurrentState(!0)),this.dbStory.htmlRevision=this.previewService.getHtmlRevision(),this.storyManager.update(this.dbStory).then(function(i){return t.dbStory=i,e.revision=i.revision,e})},Object.defineProperty(e.prototype,"websiteUrl",{get:function(){return this.introManager.data&&this.introManager.data.contactDetails?this.introManager.data.contactDetails.website:""},enumerable:!0,configurable:!0}),e.prototype.headlessFirstSave=function(e,t){return this.doFirstUpdate(e,t)},e.prototype.doFirstUpdate=function(t,i){var n=this;t.id=e.calcId(i),t.siteId=i.siteId,this.dbStory=i,t.revision=i.revision,t.flags=(this.flags.lodash4?r.pickBy:r[String("pick")])(r.omit(this.flags,r.functions(this.flags)),r.identity);var o=t.getCurrentState();return this.introManager.data&&(o.industryId=this.introManager.data.category.industryId,o.structureId=this.introManager.data.category.structureId,o.selectedOffers=this.introManager.data.serviceOffer),this.flags.introWebsiteAddressField&&(o.websiteUrl=this.websiteUrl),this.toDbStory(o),a(this.$q,function(){return n.storyManager.update(n.dbStory)},0,4).then(function(e){return t.revision=e.revision,n.dbStory=e,t.setState(n.fromDbStory(),!0),t})},e.prototype.create=function(t,i,n,o){var r=this;void 0===n&&(n=!1);var a={templateMetaSiteId:e.BLANK_TEMPLATE_META_SITE_ID,suggestedSiteName:t,initiator:o};return n&&(a.creationPhase="DuringIntro"),this.storyManager.create2(a).then(function(e){return r.doFirstUpdate(i,e)})},e.prototype.createFromTemplate=function(e,t){var i=this,n={templateMetaSiteId:t.metaSiteId,suggestedSiteName:e};return this.storyManager.create2(n).then(function(e){return i.doFirstUpdate(i.storyServices.story,e)})},e.prototype.checkIfStoryIsHanging=function(){(new Date).getTime()-this.latestSave>=6e4&&this.consumerBiLogger.warn(o.BIErrorCodes.SaveStoryHangs,"save story is hanging")},e.BLANK_TEMPLATE_META_SITE_ID="bb80349d-97a4-48a5-b9f2-8ddc2463709a",e}();angular.module("siteGeneratorStaticsConsumerAppInternal").factory("BackendStory",["consumerBiLogger","flags","$q","$window","$state","storyManager","storyServices","applicationState","previewService","introManager","clientTopology","wixAngular","$location","storyApi","metaDataVersion","healthCheck",function(e,t,i,o,r,a,l,c,d,u,p,g,h,m,f,v){function S(n){return v.validateAndFix(n),(n.blob.createdFromTemplate||c.isTemplatesUser())&&(t.invertTpaPalette=!0,t.mergedHeader=!0,t.overrideContainerBgColor=!0,t.resizeLogo=!0,t.fullWidthTpaMargin=!0,t.mediaBackground=!0,t.overlappingStrip=!0,t.textManager=!0,t.textManagerTours=!0,t.imageBgColor=!0,t.mobileMediaBackgroundPadding=!0),new s(e,t,a,i,d,u,l,n)}return s.build=function(n){return new s(e,t,a,i,d,u,l,n&&n.dbStory||void 0)},s.find=function(e,i){var d=s.parseId(e);return o.storyCache&&o.storyCache[e]&&!i?o.storyCache[e].then(function(e){return S(a.preload(d,e))}):t.templateSite?function(e){var t={templateMetaSiteId:e,suggestedSiteName:"My",creationPhase:"DuringIntro"};return a.createFromTemplate(t).then(function(e){return e.isDraft=!0,r.go(n.STATES.BUILDER_STORY,{storyId:s.calcId(e)},{reload:!0}),m.metadata(e.storyId).then(function(t){return c.setStoryMetadata(t),l.metaSiteId=e.storyId.metaSiteId,l.siteId=e.siteId,p.siteMediaToken=t.siteMediaToken,e.blob.createdFromTemplate=!0,S(e)})})}(d.metaSiteId):a.get(d,i).then(function(e){return S(e)})},s.parseId=function(e){if(e&&-1!==e.indexOf(":")){var t=e.split(":");return{instanceId:t[0],metaSiteId:t[1]}}},s.calcId=function(e){return e.storyId.instanceId+":"+e.storyId.metaSiteId},s.getContentVersion=function(){return p&&p.contentVersionNumber},s.getStaticsVersion=function(){return g.staticsUrl.split("/").splice(-2,1)[0]},s.getMetadataVersion=function(){return f},s}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(177),o=function(){function e(e,t,i,n,o,r,a){this.storyApi=e,this.$q=t,this.storyServices=i,this.clientTopology=n,this.BackendStory=o,this.localStorageService=r,this.flags=a}return e.$inject=["storyApi","$q","storyServices","clientTopology","BackendStory","localStorageService","flags"],e.prototype.getMetadata=function(e,t,i){var o=this;if(this.storyMetadata&&!i||this.flags.templateSite)return this.$q.when(this.storyMetadata);var r=this.BackendStory.parseId(e);return this.storyApi.metadata(r).then(function(i){if(o.storyMetadata=i,t&&t(i),o.storyServices.metaSiteId=i.htmlEditorUri?i.htmlEditorUri.match(/metaSiteId=[^"]*/)[0].split("=")[1]:r.metaSiteId,o.storyServices.siteId=i.htmlEditorId||i.htmlEditorUri.match(/edit\/[^?]*/)[0].split("/")[1],o.flags.loadPreviewAsap){var a=n.localStorageUtils.createStoryIdsKey(e);o.localStorageService.set(a,{siteId:o.storyServices.siteId,metaSiteId:o.storyServices.metaSiteId})}return o.clientTopology.siteMediaToken=i.siteMediaToken,i})},e}();t.MetaDataService=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("metaDataService",o)},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),a=i(192),s=i(56),l=i(0),c=function(){function e(e,t,i,n,o,a,c,d,u,p,g,h,m,f){var v=this;this.$q=e,this.suggestDomainApi=t,this.storyServices=i,this.modelTreeHelpers=n,this.publishService=o,this.documentServicesMediator=a,this.clientTopology=c,this.flags=d,this.anonService=p,this.signUpNotifier=g,this.CcDialogBuilder=h,this.consumerBiLogger=m,this.$document=f,d.newTopBar&&d.suggestDomain&&(r.PubSub.subscribeOnce(r.events.SITE_IS_LOADED,function(){!l.get(v.storyServices.story,s.PublishTimer.previewEnteredKey)&&r.PubSub.subscribeOnce(r.events.PREVIEW_EXITED,function(){v.displayPopupWhenReady()})}),!this.publishService.isSitePublished()&&r.PubSub.subscribeOnce(r.events.PUBLISH,function(){v.displayPopupWhenReady(!0)})),!c.production&&(u.sd=this)}return e.$inject=["$q","suggestDomainApi","storyServices","modelTreeHelpers","publishService","documentServicesMediator","clientTopology","flags","$window","anonService","signUpNotifier","CcDialogBuilder","consumerBiLogger","$document"],e.prototype.populateSuggestions=function(e){return n(this,void 0,void 0,function(){var t=this;return o(this,function(i){return!this.clientTopology.production&&console.dir("CALLED populate Domain Suggestions"),this.publishService.isPremium()?[2,this.$q.when(null)]:(this.populatePromise||(this.consumerBiLogger.builder.suggestedDomainApiRequest(),this.populatePromise=this.suggestDomainApi.getSuggestedDomains({metaSiteId:this.storyServices.metaSiteId,businessName:e}).then(function(e){return t.suggestedDomains=e&&e.suggestions&&e.suggestions.map(function(e){return e.domainName}),t.consumerBiLogger.builder.suggestedDomainApiResponse(t.suggestedDomains.toString()),t.mainSuggestedDomain=t.suggestedDomains&&t.suggestedDomains[0]||"",t.suggestedDomains}).finally(function(){t.populatePromise=null})),[2,this.populatePromise])})})},e.prototype.getSuggestedDomains=function(e){return n(this,void 0,void 0,function(){var t;return o(this,function(i){switch(i.label){case 0:return[4,this.documentServicesMediator.whenInitialized()];case 1:return i.sent(),this.publishService.isPremium()?[2,this.$q.when(null)]:(t=this.modelTreeHelpers.getBusinessName(),e=e||t!==this.lastBusinessName,this.lastBusinessName=t,e||!this.suggestedDomains?[2,this.populateSuggestions(t)]:[2,this.$q.when(this.suggestedDomains)])}})})},e.prototype.getSuggestedDomain=function(){return this.mainSuggestedDomain},e.prototype.displayPopupWhenReady=function(e){var t=this;this.getSuggestedDomains(e).then(function(e){e&&e.length&&(!t.clientTopology.production&&console.dir("DISPLAY SUGGEST DOMAIN POPUP"),t.showSuggestPopup())})},e.prototype.showSuggestPopup=function(){this.displaySuggestDomainPopup=!0},e.prototype.hideSuggestPopup=function(){this.displaySuggestDomainPopup=!1},e.prototype.isDisplayPopup=function(){return this.displaySuggestDomainPopup},e.prototype.openConnectDomainDialog=function(e,t){this.anonService.isAnonymousUser()?this.signUpNotifier.showSignUpPopup("openConnectDomainDialog"):this.CcDialogBuilder.show({parent:this.$document.body,targetEvent:e,onComplete:function(){angular.element(".md-dialog-container").addClass("tour-modal")},template:'<md-dialog aria-label="Publish dialog" class="big-modal"><publish-dialog screen="connect" '+(t?'domain="'+t+'"':"")+' source="'+a.FakeBrowser.ConnectDomainSource+'"></publish-dialog></md-dialog>'})},e}();t.SuggestDomainService=c,angular.module("siteGeneratorStaticsConsumerAppInternal").service("suggestDomainService",c)},function(e,t,i){"use strict";angular.module("siteGeneratorStaticsConsumerAppInternal").service("stories",["$q",function(e){return{loadStoryLocales:function(){return e.when()}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(12),r=i(1),a=i(0),s=function(){function e(e,t,i,n,o,r,a,s){this.$q=e,this.siteState=t,this.obMonitoring=i,this.storyServices=n,this.spinnerService=o,this.consumerBiLogger=r,this.consumerDialogs=a,this.flags=s,this.KNOWN_SERVER_ERRORS=[409],this.saveCount=0}return e.$inject=["$q","siteState","obMonitoring","storyServices","spinnerService","consumerBiLogger","consumerDialogs","flags"],e.prototype.changePageCB=function(){},e.prototype.getMetaSiteDetails=function(){return this.$q.when()},e.prototype.customPromise=function(){return this.$q.when()},e.prototype.togglePreview=function(){return!1},e.prototype.saveStory=function(){var e=this,t=this.storyServices.story;return(t?t.save():this.$q.when(!1)).then(function(){n.PubSub.fire(n.events.STORY_SAVE_AFTER_SITE_CHANGE),e.saveCount=0}).catch(function(t){return e.onObError(t,"ob save")})},e.prototype.publishStory=function(){var e=this,t=this.storyServices.story;return(t?t.publish():this.$q.when(!1)).catch(function(t){return e.onObError(t,"ob publish")})},e.prototype.onDsSaveStart=function(){this.consumerBiLogger.builder.autosaveStart(!0)},e.prototype.onObError=function(e,t){if(!e.handledEvent){var i=e.status;return this.KNOWN_SERVER_ERRORS.indexOf(i)<0&&(++this.saveCount>=2&&(e.handledEvent=!0,this.consumerDialogs.showDialog(o.ConsumerDialogTypes.SAVE_VALIDATION_ERROR_POPUP)),this.obMonitoring.error("ob save error: "+JSON.stringify(e))),this.$q.reject()}},e.prototype.onDsSaveError=function(e){if(!e.handledEvent){var t=this.siteState.getDsSaveErros();if(e.document)switch(e.document.errorType){case t.DUPLICATE_COMPONENTS:case t.DATA_REFERENCE_MISMATCH:case t.MISSING_CONTAINERS:e.handledEvent=!0,this.spinnerService.forceStop(),this.consumerDialogs.showDialog(o.ConsumerDialogTypes.SAVE_VALIDATION_ERROR_POPUP);default:this.consumerBiLogger.err(r.BIErrorCodes.DSSaveFailed,"error during ds save: "+e.document.errorType)}else this.obMonitoring.error("ob save error: "+JSON.stringify(e));this.flags.closePublishPopupOnSaveFailed&&n.PubSub.fire(n.events.DS_SAVE_FAILED)}},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").factory("wizardCallbacksService",["$injector","storyServices","Story","StoryLocale","modelTree","menuService","BackendStory","applicationState","modelSerialize","layoutSelectionStoreProvider","flags","healthCheck","richTextLinks",function(e,t,i,n,o,r,l,c,d,u,p,g,h){return a.assign(i,{create:function(e){var t=i.build(e);return t.storyLocales={en:n.build()},t},find:function(e){return l.find(e,c.previewRevision()).then(function(e){var t=e.dbStory.isDraft?i.create(e):new i(e);return t.setState(e.fromDbStory(),!0),t})},getStoryDataByVersion:function(e,t){return l.find(e,t).then(function(e){return e.fromDbStory()})}}),i.prototype.save=function(e,t,i){return void 0===t&&(t=!1),g.validateBeforeSave(),this.sourceObject.saveStory(this,e,t,i)},i.prototype.markAsMajorRevision=function(){return this.sourceObject.markStoryAsMajorRevision(this)},i.prototype.saveAsTemplate=function(){return this.sourceObject.saveStoryAsTemplate(this)},i.prototype.markCreated=function(e){return this.sourceObject.markCreated(this,e)},i.prototype.headlessFirstSave=function(){return this.sourceObject.headlessFirstSave(this,this.dbStory)},i.prototype.publish=function(){return this.sourceObject.publishStory(this)},i.prototype.getActiveLocale=function(){var e=this.storyLocales[this.activeLocale]||{};return t.metaSiteId&&t.siteId&&(e.savedSites=e.savedSites||{},e.savedSites.undefined=e.savedSites.undefined||{},e.savedSites.undefined.metaSiteId=t.metaSiteId,e.savedSites.undefined.siteId=t.siteId),e},i.prototype.getCurrentState=function(e){void 0===e&&(e=!1);var t=this.getActiveLocale(),i={description:this.description,selectedPage:this.selectedPage,name:this.name,selectedStyle:this.selectedStyle,contentElements:this.contentElements,activeLocale:this.activeLocale,archived:this.archived,industryId:this.industryId,structureId:this.structureId,selectedOffers:this.selectedOffers,contentVersion:l.getContentVersion(),staticsVersion:l.getStaticsVersion(),metadataVersion:l.getMetadataVersion(),privateMediaFolderId:this.privateMediaFolderId||"",coloration:this.coloration,smartAssist:this.smartAssist,headlessSiteBuildDone:this.headlessSiteBuildDone,createdFromTemplate:this.createdFromTemplate,revision:this.revision,flags:this.flags,locale:{savedSites:function(e){return{undefined:e?a.omit(e.undefined,["metaSiteId","siteId"]):{}}}(t.savedSites),contentElements:t.contentElements,layoutSelections:u.getLayoutSelectionStore().serialize(!1,!0),styles:t.styles},userRoles:this.userRoles,ownerId:this.ownerId,importedSite:this.importedSite};return e&&(i.locale.renderedModel=d.serialize(o.getPagesList())),i.popupConfigurations=this.popupConfigurations,p.textManager&&(i.tipMessages=this.tipMessages,p.textManagerUxImprovement&&(i.textManager=this.textManager)),i.visitedTasks=this.visitedTasks,i.mobileEditorActive=this.mobileEditorActive,this.flags.introWebsiteAddressField&&(i.websiteUrl=this.websiteUrl||""),i.tourState=this.tourState||{},i.nodeIdToSlideshowTransition=this.nodeIdToSlideshowTransition||{},i.revisionsUpdated=this.revisionsUpdated||0,o.data&&(i.mainMenu=r.serialize(),i.bft=o.serialize(!0),i.richTextLinks=h.getData()),ob.deepClone(i)},i.prototype.setState=function(e,t){if(a.assign(this,e),e.locale){var i=a.isString(e.locale)?JSON.parse(e.locale):ob.deepClone(e.locale);this.storyLocales[this.activeLocale]=i,this.selectedStyle=a.isString(e.selectedStyle)?JSON.parse(e.selectedStyle):ob.deepClone(e.selectedStyle),e.contentElements=e.contentElements||{},e.flags=e.flags||{},this.contentElements=a.isString(e.contentElements)?JSON.parse(e.contentElements):ob.deepClone(e.contentElements),t||(r.deserialize(e.mainMenu),this.bft=o.deserialize(e.bft),u.getLayoutSelectionStore().deserialize(i.layoutSelections)),t&&e.locale.renderedModel&&d.deserialize(e.locale.renderedModel)}},e.instantiate(s)}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n){this.$q=e,this.$http=t,this.wixCookies=i,this.anonymousUserApi=n}return e.$inject=["$q","$http","wixCookies","anonymousUserApi"],e.prototype.getCurrentUser=function(){return this.$q.when({})},e.prototype.hasUnattachedOwnedDomain=function(){var e=this;return this.$http.get("/_api/premium-management/external/userHasUnattachedDomains").then(function(t){return 200===t.status?t.data:e.$q.reject(t)})},e.prototype.getUUID=function(){return this.wixCookies.userGUID},e.prototype.isAnonymousUser=function(){return this.anonymousUserApi.isAnonymousUser()},e}();t.UserService=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("userService",n)},function(e,t,i){"use strict";!function(){function e(e,t,i,n,o,r){var a,s,l=new Set,c=r+"resources/";function d(i,o){var r=i.file(o);if(r){var a=(new Date).getTime(),s=r.asText(),l=(new Date).getTime()-a,c=JSON.parse(s),d=(new Date).getTime()-a-l;return n.debugMode&&t.info("extracted entry with key "+(o||"undefined")+" in zip (extraction: "+l+"ms, parse: "+d+"ms)"),e.resolve(c)}return n.debugMode&&t.info("found no entry with key "+(o||"undefined")+" in zip"),e.reject()}function u(t){var i=e.defer();return JSZipUtils.getBinaryContent(c+t+".zip.js",function(e,t){e?i.reject(e):i.resolve(new JSZip(t))}),i.promise}function p(t,i,n){return l.has(i)?e.when():function(e,t){return e?d(e,t):o.get(c+"LayoutElements/"+encodeURIComponent(t)+".raw.js",{cache:!0}).then(function(e){return e.data})}(t,i).then(n).catch(function(){}).finally(function(){return l.add(i)})}this.loadLayoutElements=function(){u("LayoutElements").then(function(e){a=e})},this.loadContactProtoTypeLayoutElements=function(){return u("ContactProtoTypeLayoutElements").then(function(e){return s=e,e})},this.init=function(e){var t=this;return t.loadContactProtoTypeLayoutElements().then(function(i){return d(i,"").then(e).then(t.loadLayoutElements)})},this.prepareContactLEsForFetch=function(e){return p(s,"Contact",e)},this.prepareLEsForFetch=function(e,t,i){return p(a,e+"_"+t,i)}}e.$inject=["$q","$log","wixAngularTopology","flags","$http","metaDataBaseUrl"],angular.module("siteGeneratorStaticsConsumerAppInternal").service("layoutElementsFetcher",e)}()},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,i,n){this.userDetailsApi=e,this.$q=t,this.$window=i,this.consumerBiLogger=n,this.GRAVATAR_BLANK_IMG="?d=blank",this.ACCOUNT_MENU_LINKS={NEW_SITE:"https://www.wix.com/new/vertical?ref=ADI",MY_SITES:"https://www.wix.com/account/sites",SETTINGS:"https://www.wix.com/account/settings",PAYMENTS:"https://premium.wix.com/wix/api/mpContainerStaticController#/billings",FEEDBACK:"https://docs.google.com/a/wix.com/forms/d/e/1FAIpQLSfjsqvj25HjJANvaarciEGyqSlBsfLzfhpVk17le6hPxIcUTQ/viewform"}}return e.$inject=["userDetailsApi","$q","$window","consumerBiLogger"],e.prototype.init=function(){this.accountDetails=this.fetchUserData()},e.prototype.fetchUserData=function(){return this.$q.all({details:this.getAccountNameAndEmail(),picture:this.getAccountPicture()}).then(function(e){return n({},e.details,e.picture)})},e.prototype.getAccountNameAndEmail=function(){return this.userDetailsApi.getMyAccountDetails().then(function(e){return{fullName:e.first&&e.last?e.first+" "+e.last:e.username,email:e.email}})},e.prototype.getAccountPicture=function(){var e=this;return this.userDetailsApi.getUserAvatar().then(function(t){return{profileImage:t.profileImage,userHasProfileImage:e.userHasProfileImage(t.profileImage)}})},e.prototype.getUserDetails=function(){return this.accountDetails},e.prototype.userHasProfileImage=function(e){return e&&!e.endsWith(this.GRAVATAR_BLANK_IMG)},e.prototype.onMySitesClick=function(){this.goToPage(this.ACCOUNT_MENU_LINKS.MY_SITES,"my sites")},e.prototype.onFeedbackClick=function(){this.consumerBiLogger.builder.topBarGiveFeedbackClick(),this.goToPage(this.ACCOUNT_MENU_LINKS.FEEDBACK)},e.prototype.onNewSiteClick=function(){this.consumerBiLogger.builder.topBarCreateNewSite(),this.goToPage(this.ACCOUNT_MENU_LINKS.NEW_SITE)},e.prototype.onSettingsClick=function(){this.goToPage(this.ACCOUNT_MENU_LINKS.SETTINGS,"account settings")},e.prototype.onPaymentsClick=function(){this.goToPage(this.ACCOUNT_MENU_LINKS.PAYMENTS,"billing&payments")},e.prototype.goToPage=function(e,t){void 0===t&&(t=""),this.$window.open(e,"_blank"),t&&this.consumerBiLogger.builder.topBarClickOnLinkToOneOfTheAccountPages(t)},e}();t.AccountManager=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("accountManager",o)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,i,n,o,r,a){return e.call(this,t,i,n,o,r,a)||this}return n(t,e),t.$inject=["mediaOverride","clusters","applicationParameters","PresetMediaType","LayoutUtils","BoxDecorationTypes"],t.prototype.getNumberOfListItems=function(e){return this.areListItemsInTheSameGroup(e)?this.getLG(e).layouts.length:e.preset.data.groups.filter(function(e){return!e.isHeader&&!e.isFooter}).length},t.prototype.enhanceListItemWithRealStructure=function(e){var t=this.getLG(e),i=this.getLE(e);Object.assign(t,this.enhanceWithRealStructure(t,i,this.getNode(e)))},t.prototype.getNumberOfItemsInRow=function(e){return e.preset.data.itemsInRow||1},t.prototype.getNode=function(e){return e.node.children.find(function(e){return!e.userHidden&&"ListHeader"!==e.contentElementType})},t.prototype.getContentType=function(e){return e.preset.data.contentType+"List"},t.prototype.getLG=function(e){return e.preset.data.groups.find(function(e){return!e.isHeader&&!e.isFooter})},t.prototype.areListItemsInTheSameGroup=function(e){return this.getLG(e).layouts.length>1},t.prototype.getStructure=function(e){return this.getLG(e).realStructure},t}(i(270).PresetFeatureDetector);t.PresetListItemFeatureDetector=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("presetListItemFeatureDetector",o)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,i,n,o,r,a){return e.call(this,t,i,n,o,r,a)||this}return n(t,e),t.$inject=["mediaOverride","PresetMediaType","applicationParameters","selections","sectionBackgroundService","BoxDecorationTypes"],t.prototype.enhanceListItemWithRealStructure=function(e){},t.prototype.getNumberOfItemsInRow=function(e){var t=this.getListItemGroups(e);return t[0].columns?t[0].columns.length:1},t.prototype.getNumberOfListItems=function(e){var t=this.getListItemGroups(e);return t[0].columns?t[0].columns.length:t.length},t.prototype.getListItemGroups=function(e){return e.groups.filter(function(e){return"ListHeader"!==e.contentType&&"ListFooter"!==e.contentType})},t}(i(271).SectionFeatureDetector);t.SectionListItemFeatureDetector=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionListItemFeatureDetector",o)},function(e,t,i){"use strict";s.$inject=["sectionFeatureDetector","presetFeatureDetector","presetListItemFeatureDetector","sectionListItemFeatureDetector","LayoutUtils","clusters"];var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var r={};function a(e,t,i){if(i){var o="_memoized_"+t,a=i.get;return e[o]=r,n({},i,{get:function(){return this[o]===r&&(this[o]=a.call(this)),this[o]}})}}function s(e,t,i,n,r,s){return function(){function r(o){o.preset?(this.featureDetector=t,this.listItemFeatureDetector=i,this.listData=this.data=this.createDataFromPreset(o)):(this.featureDetector=e,this.listItemFeatureDetector=n,this.data=this.getLayoutElementFromSection(o),this.listData=o)}return r.prototype.createDataFromPreset=function(e){return e.preset.data.isList&&this.listItemFeatureDetector.enhanceListItemWithRealStructure(e),this.featureDetector.enhanceWithRealStructure(e,e.preset.data.groups[0].layouts[0])},r.prototype.getLayoutElementFromSection=function(e){var t=e.groups.find(function(e){return"ListHeader"!==e.contentType&&"ListFooter"!==e.contentType});if(t&&t.segments[0])return t.segments[0].getLENoError()},Object.defineProperty(r.prototype,"horizontalTextAlignment",{get:function(){return this.featureDetector.getHorizontalTextAlignment(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasColumns",{get:function(){return this.featureDetector.hasColumns(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"numberOfColumns",{get:function(){return this.featureDetector.getNumberOfColumns(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isColumnBG",{get:function(){return this.featureDetector.isColumnBG(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"textWidth",{get:function(){return this.featureDetector.getTextWidth(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isMediaStretched",{get:function(){return this.featureDetector.isMediaStretched(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isCoastToCoast",{get:function(){return this.featureDetector.isMediaStrip(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isSideBySide",{get:function(){return this.featureDetector.isSideBySide(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mediaType",{get:function(){return this.featureDetector.getMediaType(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isShape",{get:function(){return this.mediaType===core.MediaItemTypes.Shape},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isImage",{get:function(){return this.mediaType===core.MediaItemTypes.Image},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isExtVideo",{get:function(){return this.mediaType===core.MediaItemTypes.ExtVideo},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"galleryType",{get:function(){return this.featureDetector.getGalleryType(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mediaUrls",{get:function(){return this.featureDetector.getMediaUrls(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mediaObjects",{get:function(){return this.featureDetector.getMediaObjects(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mediaWidth",{get:function(){return this.featureDetector.getMediaWidth(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"startsWithMedia",{get:function(){return this.featureDetector.startsWithMedia(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endsWithMedia",{get:function(){return this.featureDetector.endsWithMedia(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mediaPosition",{get:function(){return void 0===this.hasMedia||void 0===this.hasText?[]:this.featureDetector.getMediaPosition(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"textPosition",{get:function(){return void 0===this.hasMedia||void 0===this.hasText?[]:this.featureDetector.getTextPosition(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasMedia",{get:function(){return this.featureDetector.hasMedia(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasBackgroundMedia",{get:function(){return this.featureDetector.hasSectionBackgroundImage(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasText",{get:function(){return this.featureDetector.hasText(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasTextOnMedia",{get:function(){return this.textPosition&&-1!==this.textPosition.indexOf("on")},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columns",{get:function(){return this.featureDetector.getColumns(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isList",{get:function(){return this.featureDetector.isList(this.listData)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isListColumnBG",{get:function(){if(this.isList)return this.listItemFeatureDetector.isColumnBG(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isListCoastToCoast",{get:function(){if(this.isList)return this.listItemFeatureDetector.isMediaStrip(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isListShape",{get:function(){if(this.isList)return this.listMediaType===core.MediaItemTypes.Shape},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isListImage",{get:function(){if(this.isList)return this.listMediaType===core.MediaItemTypes.Image},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isListExtVideo",{get:function(){if(this.isList)return this.listMediaType===core.MediaItemTypes.ExtVideo},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isListZigZag",{get:function(){if(this.isList)return this.featureDetector.isListZigZag(this.listData)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isListSideBySide",{get:function(){if(this.isList)return this.listItemFeatureDetector.isSideBySide(this.listData)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"listZigZagType",{get:function(){if(this.isList)return this.featureDetector.getListZigZagType(this.listData)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasListHeader",{get:function(){return this.featureDetector.hasListHeader(this.listData)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"numberOfListItemsInRow",{get:function(){if(this.isList)return this.listItemFeatureDetector.getNumberOfItemsInRow(this.listData)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"listItemTextWidth",{get:function(){if(this.isList)return this.textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"listItemHorizontalTextAlignment",{get:function(){if(this.isList)return this.horizontalTextAlignment},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"listItemTextPosition",{get:function(){return this.isList?this.listItemFeatureDetector.getTextPosition(this.data):[]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"listItemMediaPosition",{get:function(){if(this.isList)return this.mediaPosition},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasDecorativeBox",{get:function(){return this.featureDetector.hasBox(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasDecorativeTextBox",{get:function(){return this.hasText&&this.hasDecorativeBox},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasPattern",{get:function(){return this.featureDetector.hasPattern(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasShadow",{get:function(){return this.featureDetector.hasShadow(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isCircularImage",{get:function(){return this.featureDetector.isCircularImage(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isListCircularImage",{get:function(){if(this.isList)return this.listItemFeatureDetector.isCircularImage(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"listMediaType",{get:function(){if(this.isList)return this.listItemFeatureDetector.getMediaType(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"listGalleryType",{get:function(){if(this.isList)return this.listItemFeatureDetector.getGalleryType(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"listHasMedia",{get:function(){if(this.isList)return this.listItemFeatureDetector.hasMedia(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"listHasDecorativeBox",{get:function(){if(this.isList)return this.listItemFeatureDetector.hasBox(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"listHasTextOnMedia",{get:function(){if(this.isList)return this.listItemTextPosition&&-1!==this.listItemTextPosition.indexOf("on")},enumerable:!0,configurable:!0}),r.prototype.isSameMedia=function(e){return this.hasMedia&&e.hasMedia&&this.mediaUrls[0]===e.mediaUrls[0]},r.prototype.isSameTextAlignment=function(e){return this.hasText&&e.hasText&&this.horizontalTextAlignment===e.horizontalTextAlignment},o([a],r.prototype,"horizontalTextAlignment",null),o([a],r.prototype,"hasColumns",null),o([a],r.prototype,"numberOfColumns",null),o([a],r.prototype,"isColumnBG",null),o([a],r.prototype,"textWidth",null),o([a],r.prototype,"isMediaStretched",null),o([a],r.prototype,"isCoastToCoast",null),o([a],r.prototype,"isSideBySide",null),o([a],r.prototype,"mediaType",null),o([a],r.prototype,"isShape",null),o([a],r.prototype,"isImage",null),o([a],r.prototype,"isExtVideo",null),o([a],r.prototype,"galleryType",null),o([a],r.prototype,"mediaUrls",null),o([a],r.prototype,"mediaObjects",null),o([a],r.prototype,"mediaWidth",null),o([a],r.prototype,"startsWithMedia",null),o([a],r.prototype,"endsWithMedia",null),o([a],r.prototype,"mediaPosition",null),o([a],r.prototype,"textPosition",null),o([a],r.prototype,"hasMedia",null),o([a],r.prototype,"hasBackgroundMedia",null),o([a],r.prototype,"hasText",null),o([a],r.prototype,"hasTextOnMedia",null),o([a],r.prototype,"columns",null),o([a],r.prototype,"isList",null),o([a],r.prototype,"isListColumnBG",null),o([a],r.prototype,"isListCoastToCoast",null),o([a],r.prototype,"isListShape",null),o([a],r.prototype,"isListImage",null),o([a],r.prototype,"isListExtVideo",null),o([a],r.prototype,"isListZigZag",null),o([a],r.prototype,"isListSideBySide",null),o([a],r.prototype,"listZigZagType",null),o([a],r.prototype,"hasListHeader",null),o([a],r.prototype,"numberOfListItemsInRow",null),o([a],r.prototype,"listItemTextWidth",null),o([a],r.prototype,"listItemHorizontalTextAlignment",null),o([a],r.prototype,"listItemTextPosition",null),o([a],r.prototype,"listItemMediaPosition",null),o([a],r.prototype,"hasDecorativeBox",null),o([a],r.prototype,"hasDecorativeTextBox",null),o([a],r.prototype,"hasPattern",null),o([a],r.prototype,"hasShadow",null),o([a],r.prototype,"isCircularImage",null),o([a],r.prototype,"isListCircularImage",null),o([a],r.prototype,"listMediaType",null),o([a],r.prototype,"listGalleryType",null),o([a],r.prototype,"listHasMedia",null),o([a],r.prototype,"listHasDecorativeBox",null),o([a],r.prototype,"listHasTextOnMedia",null),r}()}angular.module("siteGeneratorStaticsConsumerAppInternal").factory("FeatureList",s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),angular.module("siteGeneratorStaticsConsumerAppInternal").constant("prettyAlgoRules",[{approved:!1,conditionA:{hasColumns:!0,hasMedia:!0,hasText:!0,mediaPosition:["left"],mediaWidth:620,numberOfColumns:2,textPosition:["right"],textWidth:"part"},conditionB:{hasColumns:!0,hasMedia:!0,hasText:!0,mediaPosition:["left"],mediaWidth:460,numberOfColumns:2},example:"http://prntscr.com/fqzxsr",label:"",name:"2:1 image left to text + 1:1 image left to text",owner:"yanayn",score:-2},{approved:!1,conditionA:{hasColumns:!0,hasMedia:!0,hasText:!0,mediaPosition:["left"],mediaWidth:620,numberOfColumns:2,textPosition:["right"],textWidth:"part"},conditionB:{hasMedia:!0,horizontalTextAlignment:"center",isCoastToCoast:!0},example:"http://prntscr.com/fqzzpi",label:"",name:"2:1 image left to text + c2c media below text aligned center",owner:"yanayn",score:2},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textWidth:"full"},conditionB:{endsWithMedia:!1,hasBox:!0,hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"http://prntscr.com/fliobg",name:"Box between media Pretty",owner:"Yonatan",score:1},{approved:!1,conditionA:{hasMedia:!0,horizontalTextAlignment:"center",isCoastToCoast:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasColumns:!1,hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isCoastToCoast:!1,mediaPosition:["above"],startsWithMedia:!0,textPosition:["below"],textWidth:"full"},example:"http://prntscr.com/fp8qzl",name:"Center text below C2C image + image above center text",owner:"shayca0",score:1},{approved:!0,conditionA:{hasBox:!1,hasColumns:!0,hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],mediaType:["Image"],numberOfColumns:2,textPosition:["left"],textWidth:"part"},conditionB:{hasColumns:!1,hasMedia:!0,mediaPosition:["right"],mediaType:["Image"],textPosition:["left"],textWidth:"part"},example:"https://prnt.sc/fliodp",name:"Columns and non-Column same side",owner:"Yanay",score:-1},{approved:!0,conditionA:{hasBox:!1,hasColumns:!0,hasMedia:!0,mediaPosition:["right"],mediaType:["Image"],numberOfColumns:2,textPosition:["left"]},conditionB:{hasColumns:!0,hasMedia:!0,mediaPosition:["right"],mediaType:["Image"],numberOfColumns:2,textPosition:["left"]},example:"https://prnt.sc/fliodp",name:"Columns same side Ugly",owner:"Yanay",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"part"},conditionB:{hasMedia:!0,mediaPosition:["left"],textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/u5BvTblf",name:"Diagonal text pretty",owner:"Noa",score:1},{approved:!0,conditionA:{endsWithMedia:!1,hasMedia:!0,isCoastToCoast:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,textWidth:"part"},example:"https://prnt.sc/fmsyce",name:"Diagonal text pretty 2",owner:"Yonatan",score:1},{approved:!1,conditionA:{hasColumns:!0,hasText:!0,horizontalTextAlignment:"center",mediaPosition:["right"],numberOfColumns:2,textPosition:["left"],textWidth:"part"},conditionB:{hasColumns:!1,hasMedia:!0,hasText:!0,horizontalTextAlignment:"left",isCoastToCoast:!1,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},example:"https://prnt.sc/flir04",name:"Left text column above image with left text",owner:"shayca0",score:1},{approved:!1,conditionA:{isList:!0,listItemTextPosition:["on"],listItemTextWidth:"part",numberOfListItemsInRow:3},conditionB:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isCoastToCoast:!1,mediaPosition:["above"],startsWithMedia:!0},example:"http://prntscr.com/fp9p6q",name:"List 3 columns + image above text centered",owner:"shayca0",score:1},{approved:!0,conditionA:{endsWithMedia:!1,hasText:!0,isList:!0,listItemTextPosition:["below"],numberOfListItemsInRow:3},conditionB:{hasMedia:!0,hasText:!0,mediaPosition:["above"],startsWithMedia:!0},example:"https://prnt.sc/flioo0",name:"List centered and a large image Pretty- should replace to same alignment",owner:"shayca0",score:1},{approved:!0,conditionA:{isList:!0,listItemHorizontalTextAlignment:"center",listItemTextPosition:["below"],numberOfListItemsInRow:3},conditionB:{hasMedia:!0,mediaType:["Gallery"],textPosition:["left"],textWidth:"part"},example:"https://prnt.sc/flixvs",name:"List centered and gallery Ugly",owner:"Inbal",score:-1},{approved:!0,conditionA:{isList:!0,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",numberOfListItemsInRow:3},conditionB:{hasMedia:!0,mediaPosition:["right"],mediaType:["Gallery"],mediaWidth:620,textPosition:["left"],textWidth:"part"},example:"https://prnt.sc/flixvs",name:"List centered with half left aligned Ugly",owner:"inbal ",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaWidth:940,textPosition:["above"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaWidth:940,textPosition:["above"],textWidth:"full"},example:"https://screencast.com/t/scEA5cXKJ0V9",name:"Media Pretty 940",owner:"Karina",score:1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,mediaType:["Gallery"]},conditionB:{hasColumns:!0,hasMedia:!0,startsWithMedia:!0},example:"https://prnt.sc/fliu1s",name:"Paired C2C Gallery and columns Ugly",owner:"Yonatan",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],startsWithMedia:!0,textPosition:["below"]},example:"http://prntscr.com/flimp7",name:"Paired C2C media Ugly 1",owner:"Shay",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],startsWithMedia:!0,textPosition:["below"]},example:"",name:"Paired C2C media Ugly 2",owner:"Shay",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,textPosition:["above"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,startsWithMedia:!0,textPosition:["on"]},example:"https://prnt.sc/fliqrv",name:"Paired C2C media Ugly 3",owner:"Shay",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},example:"https://www.absolutesocialagency.com/",name:"Paired Media 3",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaType:["Gallery"],textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaType:["Gallery"]},example:"http://bellanightside.wixsite.com/forestdogs",name:"Paired Media Gallery Ugly",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaType:["Video"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaType:["Video"],textPosition:["below"]},example:"http://sachin2panday.wixsite.com/stxaviersnagra",name:"Paired Media Videos Ugly",owner:"Karina",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,mediaType:["Video"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],mediaType:["Video"],startsWithMedia:!0},example:"PARALAX + VIDEO C2C",name:"Paired Video In the meantime",owner:"Shay",score:-1},{approved:!0,conditionA:{isSameMedia:!0},conditionB:{isSameMedia:!0},example:"",name:"Same Media",owner:"Shay",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasBox:!1,hasMedia:!0,isCoastToCoast:!0,isList:!1,mediaPosition:["below"],mediaType:["Gallery"],startsWithMedia:!1,textPosition:["above"],textWidth:"full"},conditionB:{endsWithMedia:!1,hasBox:!1,hasMedia:!0,isCoastToCoast:!0,isList:!1,mediaPosition:["above"],mediaType:["Image"],startsWithMedia:!0,textPosition:["below"],textWidth:"full"},example:"https://prnt.sc/flimp7",name:"Strip gallery & Strip Image Ugly",owner:"Yonatan",score:-1},{approved:!0,conditionA:{hasMedia:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaWidth:460,textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/Pq0PWTlbr",name:"Text Alignment Pretty 1",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,isList:!0,isListZigZag:!1,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],mediaPosition:["above"],mediaType:["Shape"],mediaWidth:60,numberOfListItemsInRow:3,startsWithMedia:!0,textPosition:["below"],textWidth:"full"},example:"https://www.screencast.com/t/dqqX4ZJzT9",name:"Text Alignment Pretty 1 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{isList:!0,isListZigZag:!1,listItemHorizontalTextAlignment:"center",listItemTextPosition:["on"],numberOfListItemsInRow:3},example:"https://www.screencast.com/t/D9i6chZ9kvga",name:"Text Alignment Pretty 1 Lists column",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,textWidth:"part"},example:"https://screencast.com/t/w4EdxB810mD",name:"Text Alignment Pretty 2",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/6dvsEefsSZr",name:"Text Alignment Pretty 3",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaWidth:460,textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/aiFsy2bI87",name:"Text Alignment Pretty 4",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaWidth:620,textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/J0bvg4AK3wR",name:"Text Alignment Pretty 5",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],mediaWidth:620,textPosition:["left"],textWidth:"part"},example:"https://www.screencast.com/t/ezV5N4orPS",name:"Text Alignment Pretty 6",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},conditionB:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaWidth:460,startsWithMedia:!0,textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/kftMHkt5QaD",name:"Text Alignment Pretty 7",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],textPosition:["left"],textWidth:"part"},conditionB:{hasMedia:!0,textPosition:["above"],textWidth:"full"},example:"http://12raouff.wixsite.com/website",name:"Text Alignment Ugly 1",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"https://www.screencast.com/t/dQF4b5NKP",name:"Text Alignment Ugly 10",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"https://www.screencast.com/t/dQF4b5NKP",name:"Text Alignment Ugly 11",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaWidth:940,textPosition:["below"],textWidth:"full"},example:"https://www.screencast.com/t/IkMgB5iaM",name:"Text Alignment Ugly 12",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!1,textWidth:"full"},conditionB:{hasMedia:!1,textWidth:"full"},example:"http://joyanngoodridge.wixsite.com/advancedlearning",name:"Text Alignment Ugly 2",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],textPosition:["left"],textWidth:"part"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],textPosition:["right"],textWidth:"part"},example:"http://smbatha3871.wixsite.com/website",name:"Text Alignment Ugly 3",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!1,textWidth:"full"},example:"http://pattorsiello.wixsite.com/website",name:"Text Alignment Ugly 4",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},example:"http://jordanclark84.wixsite.com/website",name:"Text Alignment Ugly 5",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,textPosition:["on"]},conditionB:{hasMedia:!0,mediaPosition:["below"],textPosition:["above"]},example:"https://rioterradevelopmen.wixsite.com/website",name:"Text Alignment Ugly 6",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,mediaPosition:["right"],textPosition:["left"],textWidth:"part"},conditionB:{hasMedia:!0,mediaPosition:["left"],textPosition:["right"],textWidth:"part"},example:"https://marmoladynka.wixsite.com/kakapo",name:"Text Alignment Ugly 7",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],mediaType:["Image"],mediaWidth:460,textPosition:["left"],textWidth:"part"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaType:["Image"],mediaWidth:460,textPosition:["right"],textWidth:"part"},example:"https://linafacepainting.wixsite.com/website",name:"Text Alignment Ugly 8",owner:"Karina",score:-10},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaType:["Image"],mediaWidth:940,textPosition:["below"],textWidth:"full"},example:"",name:"Text Alignment Ugly 9",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{isList:!0,isListZigZag:!1,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",numberOfListItemsInRow:3},example:"https://www.screencast.com/t/3IF39nJsk",name:"Text Blocks Pretty 1 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{isList:!0,isListZigZag:!1,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",numberOfListItemsInRow:1},example:"https://www.screencast.com/t/QhIXPTmuw",name:"Text Blocks Pretty 2 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"http://zahratelatela.wixsite.com/website",name:"Text Blocks Ugly 1",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!1,isCoastToCoast:!1,isList:!0,textWidth:"full"},example:"https://www.screencast.com/t/xUTXBDGiQJo",name:"Text Blocks Ugly 1 Lists",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"https://www.screencast.com/t/bawiNhytF",name:"Text Blocks Ugly 10",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"http://kimschulz1.wixsite.com/petportraits",name:"Text Blocks Ugly 2",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:460,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaType:["Shape"],textPosition:["above"],textWidth:"full"},example:"https://cleaningangelsllcva.wixsite.com/cleaning",name:"Text Blocks Ugly 4",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:460,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaType:["Shape"],textPosition:["above"],textWidth:"full"},example:"https://andrewrezin.wixsite.com/website",name:"Text Blocks Ugly 5",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:460,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaType:["Shape"],textPosition:["above"],textWidth:"full"},example:"https://ibtnickhalverson.wixsite.com/imagineballet",name:"Text Blocks Ugly 6",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!1,textWidth:"full"},conditionB:{hasMedia:!1,textWidth:"full"},example:"https://leigh925.wixsite.com/website",name:"Text Blocks Ugly 7",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,mediaPosition:["below"],mediaWidth:940,textPosition:["above"],textWidth:"full"},conditionB:{hasMedia:!0,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},example:"https://cowanmillbaptist.wixsite.com/cowanmill",name:"Text Blocks Ugly 8",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"https://www.screencast.com/t/bawiNhytF",name:"Text Blocks Ugly 9",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaWidth:940,textPosition:["above"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,isList:!0,mediaPosition:["above"],mediaType:["Shape"],mediaWidth:60,startsWithMedia:!0,textPosition:["below"],textWidth:"full"},example:"https://www.screencast.com/t/zUMvGoOfiN0",name:"Text alignment pretty 2 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,isList:!0,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",mediaPosition:["above"],mediaType:["Shape"],mediaWidth:60,numberOfListItemsInRow:3,startsWithMedia:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},example:"https://www.screencast.com/t/hj0wyQHXeh",name:"Text alignment pretty 3 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,isList:!0,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",mediaPosition:["above"],mediaType:["Shape"],mediaWidth:60,numberOfListItemsInRow:3,startsWithMedia:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},example:"https://www.screencast.com/t/hj0wyQHXeh",name:"Text alignment ugly 1 Lists",owner:"Karina",score:-1},{approved:!0,conditionA:{endsWithMedia:!1,hasMedia:!0,hasText:!0,isCoastToCoast:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,startsWithMedia:!0,textPosition:["below"]},example:"http://prntscr.com/fmsuwb",name:"Text below C2C + C2C above text",owner:"shayca0",score:-1},{approved:!1,conditionA:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!1,hasText:!0,horizontalTextAlignment:"left"},example:"http://prntscr.com/fp8m2h",name:"Text below C2C + only text below",owner:"shayca0",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,hasText:!0,isCoastToCoast:!0,textWidth:"full"},example:"https://prnt.sc/fmt1tl",name:"Text below C2C + text above C2C",owner:"shayca0",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["above"]},example:"https://screencast.com/t/5Zpik5v3",name:"Text block alignment ugly",owner:"Shay",score:-1},{approved:!1,compareFeaturesCondition:{sameTextAlignment:!1},conditionA:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"left",isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasColumns:!0,hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isColumnBG:!1,mediaPosition:["right"],numberOfColumns:2,textPosition:["left"],textWidth:"part"},example:"https://prnt.sc/fqz48x",label:"",name:"left text on C2C + centered text left to media",owner:"inbalt3",score:-1},{approved:!1,compareFeaturesCondition:{sameTextAlignment:!1},conditionA:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"left",isCoastToCoast:!1,isList:!0,listItemHorizontalTextAlignment:"left",listItemTextPosition:["below"],mediaPosition:["above"],textPosition:["below"]},conditionB:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isCoastToCoast:!0,mediaPosition:["above"],mediaType:"image",textPosition:["below","on"],textWidth:"full"},example:"https://prnt.sc/fqzjzo",label:"text below image  940 align text + c2c image full text below align center",name:"text below image  940 align text + c2c image full text below align center",owner:"or6793",score:1},{approved:!1,compareFeaturesCondition:{sameTextAlignment:!1},conditionA:{hasMedia:!0,hasText:!0,isCoastToCoast:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,hasText:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},name:"text below image + C2C above text same alignment",owner:"shayca0",score:1}])},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=function(){function e(e,t){var i=this;this.flags=e,this.$translate=t,this.list=this.flags.newAddSectionsOrder?[{id:"Welcome",ceType:"Welcome",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"About",ceType:"About",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Services",ceType:"Service",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Testimonials",ceType:"Testimonial",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Contact",ceType:"Contact",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Team Members",ceType:"TeamMember",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Pro Gallery",ceType:"ProGallery_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Gallery",ceType:"Portfolio",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Instagram",ceType:"Instagram_Widget",uniqOnCeType:!0,cardinality:1,flag:"instagram",item:{hidden:[[]],labels:{}}},{id:"Video Player",ceType:"Video_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Music Player",ceType:"Music_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Blog",ceType:"Blog",uniqOnCeType:!0,hideInAllSections:!0,cardinality:1,flag:"tpaHeader",item:{hidden:[[]],labels:{}}},{id:"Blog Post Gallery",ceType:"Blog_Post_Gallery",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Blog2",ceType:"Blog2",uniqOnCeType:!0,hideInAllSections:!0,cardinality:1,flag:"blog2",item:{hidden:[[]],labels:{}}},{id:"Blog2 Custom Feed",ceType:core.TpaWidgetTypes.Blog2_Custom_Feed_Widget,uniqOnCeType:!0,flag:"blog2",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Product Gallery",ceType:"Stores_Grid_Gallery_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Product Slider",ceType:"Stores_Slider_Gallery_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Featured Product",ceType:"Stores_Product_specific_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Event",ceType:core.TpaWidgetTypes.Events_Single,uniqOnCeType:!0,cardinality:1,flag:"wixEvents",item:{hidden:[[]],labels:{}}},{id:"Events List",ceType:core.TpaWidgetTypes.Events_Multiple,uniqOnCeType:!0,cardinality:1,flag:"wixEvents",item:{hidden:[[]],labels:{}}},{id:"Subscribe",ceType:"GetSubscribers_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"FAQ",ceType:"FAQ",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Projects",ceType:"Project",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Clients",ceType:"Client",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Features",ceType:"Feature",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Quote",ceType:"Quote",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Opening Hours",ceType:"OpeningHours",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"CV",ceType:"CV",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Tour Dates",ceType:"BandsInTown_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"News",ceType:"News",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Products",ceType:"Product",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Events",aliasKey:this.flags.wixEvents?"Past_Events":"Event",ceType:"Event",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Section Title",ceType:"Tpa_Header",uniqOnCeType:!0,cardinality:1,flag:"tpaHeader",item:{hidden:[[]],labels:{}}},{id:"Headliner",ceType:"Widget",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Stores",ceType:"Stores",uniqOnCeType:!0,hideInAllSections:!0,cardinality:1,flag:"tpaHeader",item:{hidden:[[]],labels:{}}},{id:"Bookings Widget",ceType:"Bookings_Widget",uniqOnCeType:!0,cardinality:1,flag:"bookingsWidget",item:{hidden:[[]],labels:{}}},{id:"Files",ceType:"Files",uniqOnCeType:!0,cardinality:3,flag:"smallPresets",item:{hidden:[[]],labels:{}}},{id:"Price List",ceType:"Price",uniqOnCeType:!0,cardinality:3,flag:"smallPresets",item:{hidden:[[]],labels:{}}},{id:"Schedule",ceType:"ScheduleItem",uniqOnCeType:!0,cardinality:3,flag:"smallPresets",item:{hidden:[[]],labels:{}}},{id:"Forum",ceType:"Forum",uniqOnCeType:!0,hideInAllSections:!0,cardinality:1,flag:"wixForum",item:{hidden:[[]],labels:{}}}]:[{id:"Welcome",ceType:"Welcome",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Services",ceType:"Service",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"About",ceType:"About",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Team Members",ceType:"TeamMember",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Testimonials",ceType:"Testimonial",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Projects",ceType:"Project",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Products",ceType:"Product",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Clients",ceType:"Client",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Features",ceType:"Feature",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"FAQ",ceType:"FAQ",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Events",aliasKey:this.flags.wixEvents?"Past_Events":"Event",ceType:"Event",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"News",ceType:"News",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Contact",ceType:"Contact",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Opening Hours",ceType:"OpeningHours",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Quote",ceType:"Quote",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"CV",ceType:"CV",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Headliner",ceType:"Widget",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Gallery",ceType:"Portfolio",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Subscribe",ceType:"GetSubscribers_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Instagram",ceType:"Instagram_Widget",uniqOnCeType:!0,cardinality:1,flag:"instagram",item:{hidden:[[]],labels:{}}},{id:"Featured Product",ceType:"Stores_Product_specific_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Product Slider",ceType:"Stores_Slider_Gallery_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Product Gallery",ceType:"Stores_Grid_Gallery_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Blog Post Gallery",ceType:"Blog_Post_Gallery",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Blog",ceType:"Blog",uniqOnCeType:!0,hideInAllSections:!0,cardinality:1,flag:"tpaHeader",item:{hidden:[[]],labels:{}}},{id:"Stores",ceType:"Stores",uniqOnCeType:!0,hideInAllSections:!0,cardinality:1,flag:"tpaHeader",item:{hidden:[[]],labels:{}}},{id:"Music Player",ceType:"Music_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Tour Dates",ceType:"BandsInTown_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Pro Gallery",ceType:"ProGallery_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Bookings Widget",ceType:"Bookings_Widget",uniqOnCeType:!0,cardinality:1,flag:"bookingsWidget",item:{hidden:[[]],labels:{}}},{id:"Event",ceType:core.TpaWidgetTypes.Events_Single,uniqOnCeType:!0,cardinality:1,flag:"wixEvents",item:{hidden:[[]],labels:{}}},{id:"Events List",ceType:core.TpaWidgetTypes.Events_Multiple,uniqOnCeType:!0,cardinality:1,flag:"wixEvents",item:{hidden:[[]],labels:{}}},{id:"Video Player",ceType:"Video_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Section Title",ceType:"Tpa_Header",uniqOnCeType:!0,cardinality:1,flag:"tpaHeader",item:{hidden:[[]],labels:{}}},{id:"Files",ceType:"Files",uniqOnCeType:!0,cardinality:3,flag:"smallPresets",item:{hidden:[[]],labels:{}}},{id:"Price List",ceType:"Price",uniqOnCeType:!0,cardinality:3,flag:"smallPresets",item:{hidden:[[]],labels:{}}},{id:"Schedule",ceType:"ScheduleItem",uniqOnCeType:!0,cardinality:3,flag:"smallPresets",item:{hidden:[[]],labels:{}}},{id:"Blog2",ceType:"Blog2",uniqOnCeType:!0,hideInAllSections:!0,cardinality:1,flag:"blog2",item:{hidden:[[]],labels:{}}},{id:"Blog2 Custom Feed",ceType:core.TpaWidgetTypes.Blog2_Custom_Feed_Widget,uniqOnCeType:!0,flag:"blog2",cardinality:1,item:{hidden:[[]],labels:{}}}],this.sectionItem={hidden:[[]],labels:{},prefix:""},this.list&&this.list.length&&this.list.forEach(function(e){return e.alias=i.$translate.instant("builder.sections."+(e.aliasKey||e.ceType))})}return e.prototype.getSectionOfceType=function(e){var t=this.list.find(function(t){return t.ceType===e});if(t)return n({},t,{item:this.sectionItem,header:this.sectionItem,footer:this.sectionItem})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").factory("defaultSections",["flags","$translate",function(e,t){return new o(e,t)}])},function(e,t,i){"use strict";var n=function(){function e(){this.list=[{name:"intro_delete",type:"hint",appearance:"info"},{name:"intro_card_url_invalid",type:"hint",appearance:"error"},{name:"intro_card_website_address_invalid",type:"hint",appearance:"error"},{name:"intro_card_email_invalid",type:"rich",appearance:"error"},{name:"intro_card_url_default",type:"rich",appearance:"error"},{name:"menu_home",type:"hint",appearance:"info"},{name:"menu_add_section",type:"hint",appearance:"info"},{name:"menu_add_dropdown",type:"hint",appearance:"info"},{name:"menu_add_page",type:"hint",appearance:"info"},{name:"menu_undo",type:"hint",appearance:"info"},{name:"menu_redo",type:"hint",appearance:"info"},{name:"menu_preview",type:"rich",appearance:"info"},{name:"menu_publish",type:"hint",appearance:"info"},{name:"menu_saved_text",type:"hint",appearance:"info"},{name:"best_match",type:"hint",appearance:"info"},{name:"zoom_in",type:"hint",appearance:"info"},{name:"zoom_out",type:"hint",appearance:"info"},{name:"overlay_plus",type:"hint",appearance:"info"},{name:"overlay_edit",type:"hint",appearance:"info"},{name:"overlay_settings",type:"hint",appearance:"info"},{name:"overlay_change_preset",type:"hint",appearance:"info"},{name:"suggest_layout_change",type:"rich",appearance:"info"},{name:"overlay_gear",type:"hint",appearance:"info"},{name:"overlay_delete",type:"hint",appearance:"info"},{name:"overlay_move_up",type:"hint",appearance:"info"},{name:"overlay_move_down",type:"hint",appearance:"info"},{name:"overlay_move_page",type:"hint",appearance:"info"},{name:"overlay_duplicate_section",type:"hint",appearance:"info"},{name:"overlay_rotate_color_section",type:"hint",appearance:"info"},{name:"overlay_enlarge_font_section",type:"hint",appearance:"info"},{name:"overlay_shrink_font_section",type:"hint",appearance:"info"},{name:"overlay_enlarge_section_height",type:"hint",appearance:"info"},{name:"overlay_shrink_section_height",type:"hint",appearance:"info"},{name:"overlay_print_additional_height",type:"hint",appearance:"info"},{name:"overlay_image_fit_section",type:"hint",appearance:"info"},{name:"overlay_reset_font_section",type:"hint",appearance:"info"},{name:"overlay_change_column_position",type:"hint",appearance:"info"},{name:"overlay_connect_domain",type:"rich",appearance:"info"},{name:"preview_toggle_desktop",type:"hint",appearance:"info"},{name:"preview_toggle_mobile",type:"hint",appearance:"info"},{name:"edit_mode_toggle_desktop",type:"hint",appearance:"info"},{name:"edit_mode_toggle_mobile",type:"hint",appearance:"info"},{name:"social_validation",type:"hint",appearance:"error"},{name:"seo_title_validation",type:"hint",appearance:"error"},{name:"seo_description_validation",type:"hint",appearance:"error"},{name:"seo_keywords_validation",type:"rich",appearance:"error"},{name:"seo_url_validation",type:"rich",appearance:"error"},{name:"seo_title_tooltip",type:"rich",appearance:"info"},{name:"seo_description_tooltip",type:"rich",appearance:"info"},{name:"seo_keywords_tooltip",type:"rich",appearance:"info"},{name:"seo_url_tooltip",type:"rich",appearance:"info"},{name:"next_item",type:"hint",appearance:"info"},{name:"previous_item",type:"hint",appearance:"info"},{name:"drag_section",type:"hint",appearance:"info"},{name:"close_preview",type:"hint",appearance:"info"},{name:"crop_cancel",type:"hint",appearance:"info"},{name:"crop_apply",type:"hint",appearance:"info"},{name:"publish_error_site_name_is_not_string",type:"hint",appearance:"error"},{name:"publish_error_site_name_too_short",type:"rich",appearance:"error"},{name:"publish_error_site_name_too_long",type:"rich",appearance:"error"},{name:"publish_error_site_name_already_exists",type:"hint",appearance:"error"},{name:"publish_error_site_name_invalid_chars",type:"hint",appearance:"error"},{name:"publish_error_site_name_invalid",type:"hint",appearance:"error"},{name:"publish_error_site_name_ends_with_hyphen",type:"hint",appearance:"error"},{name:"tpa_bookings_settings",type:"hint",appearance:"info"},{name:"tpa_stores_settings",type:"hint",appearance:"info"},{name:"tpa_blog_settings",type:"hint",appearance:"info"},{name:"header_fixed_header",type:"rich",appearance:"info"},{name:"section_name_in_menu",type:"rich",appearance:"info"},{name:"design_coloration_palette_list",type:"rich",appearance:"info"},{name:"design_coloration_logo_palette",type:"rich",appearance:"info"},{name:"design_kit_reset",type:"hint",appearance:"info"},{name:"design_coloration_palette_edit",type:"hint",appearance:"info"},{name:"design_change_animation",type:"hint",appearance:"info"},{name:"design_coloration_help",type:"rich",appearance:"info"},{name:"design_coloration_mode_toggle",type:"rich",appearance:"info"},{name:"design_change_font",type:"hint",appearance:"info"},{name:"design_coloration_main_color",type:"rich",appearance:"info"},{name:"design_coloration_add_color",type:"hint",appearance:"info"},{name:"design_advanced_colors_reset",type:"hint",appearance:"info"},{name:"section_menu_clicked",type:"rich",appearance:"info",compiled:!0},{name:"page_menu_clicked",type:"rich",appearance:"info",compiled:!0},{name:"animation_animation_type_help",type:"rich",appearance:"info"},{name:"animation_scroll_effects_help",type:"rich",appearance:"info"},{name:"slideshow-transition-help",type:"rich",appearance:"info"},{name:"animation_page_transition_help",type:"rich",appearance:"info"},{name:"intro_website_help",type:"rich",appearance:"info"},{name:"design_coloration_readability_positive",type:"rich",appearance:"info"},{name:"design_coloration_readability_negative",type:"rich",appearance:"info"},{name:"design_header_type_transparent_home",type:"rich",appearance:"info"},{name:"design_header_type_transparent_non_home",type:"rich",appearance:"info"},{name:"design_header_type_transparent_disabled",type:"rich",appearance:"info"},{name:"design_header_type_fixed",type:"rich",appearance:"info"},{name:"section_background_categories_color",type:"rich",appearance:"info"},{name:"section_background_categories_media",type:"rich",appearance:"info"},{name:"section_background_categories_pattern",type:"rich",appearance:"info",compiled:!0},{name:"mobile_text_field_disabled",type:"rich",compiled:!0,appearance:"info"},{name:"mobile_media_edit_disabled",type:"rich",compiled:!0,appearance:"info"},{name:"user_web_address",type:"rich",compiled:!0,interactive:!0,appearance:"info"},{name:"floating-go-to-editor-link",type:"rich",appearance:"info"},{name:"web-address-is-not-valid",type:"rich",appearance:"info"},{name:"media-settings.size-button.cropped",type:"hint",appearance:"info"},{name:"media-settings.size-button.croppedheader",type:"hint",appearance:"info"},{name:"media-settings.size-button.uncropped",type:"hint",appearance:"info"},{name:"media-settings.size-button.strip",type:"hint",appearance:"info"},{name:"media-settings.size-button.stripheader",type:"hint",appearance:"info"},{name:"media-settings.size-button.column",type:"hint",appearance:"info"},{name:"media-settings.size-button.background",type:"hint",appearance:"info"},{name:"media-settings.size-button.backgroundheader",type:"hint",appearance:"info"},{name:"media-settings.size-button.backgroundlist",type:"hint",appearance:"info"},{name:"media-settings.size-button.backgroundfull",type:"hint",appearance:"info"},{name:"media-settings.size-button.gallery",type:"hint",appearance:"info"},{name:"media-settings.disabled-tab-video",type:"hint",appearance:"info",compiled:!0,interactive:!0},{name:"media-settings.disabled-tab-gallery",type:"hint",appearance:"info",compiled:!0,interactive:!0},{name:"image",type:"hint",appearance:"info"},{name:"video",type:"hint",appearance:"info"},{name:"gallery",type:"hint",appearance:"info"},{name:"pattern",type:"hint",appearance:"info"},{name:"shape",type:"hint",appearance:"info"},{name:"brightness",type:"hint",appearance:"info"},{name:"saturation",type:"hint",appearance:"info"},{name:"link-details-paypal.fixed",type:"hint",appearance:"info"},{name:"link-details-paypal.toggle.on",type:"hint",appearance:"info"},{name:"link-details-paypal.toggle.off",type:"hint",appearance:"info"},{name:"section-name",type:"hint",appearance:"info"},{name:"text-manager-link-imported",type:"rich",appearance:"info"},{name:"text-manager-link-adi",type:"rich",appearance:"info"},{name:"members-area.signup-settings-panel.termsOfUse.link",type:"hint",appearance:"info",compiled:!0,interactive:!0},{name:"members-area.signup-settings-panel.privacyPolicy.link",type:"hint",appearance:"info",compiled:!0,interactive:!0},{name:"members-area.signup-settings-panel.codeOfConduct.link",type:"hint",appearance:"info",compiled:!0,interactive:!0},{name:"members-area.field-editor.button",type:"hint",appearance:"info",compiled:!0,interactive:!0},{name:"members-area.info-popup",type:"hint",appearance:"info",compiled:!0,interactive:!0},{name:"focal-point.hint",type:"hint",appearance:"info"},{name:"import-site.import-page.already-imported",type:"hint",appearance:"info",compiled:!0,interactive:!0}]}return e.prototype.registerTooltips=function(e){_.each(this.list,function(t){var i=_.omit(t,"name");e.setToolTip(t.name,i)})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("consumerTooltips",new n).run(["ccTooltipManager",function(e){(new n).registerTooltips(e)}])},function(e,t){angular.module("siteGeneratorStaticsConsumerAppInternal").constant("kitToPrimaryColor",{maison:"#193340",playground:"#50daea",vogue:"#f4e4cc",soho:"#1e1e96",indulge:"#b3894c",bouquet:"#f3dada",midnight:"#9b8158",merlot:"#5f0038",breeze:"#46b5ef",elegant:"#3a3b3f",agile:"#f44345",bounce:"#f270b6",evolution:"#1777cb",cadenza:"#500008",rosewater:"#f5bbb2",minimal:"#ffffff",sugar:"#655773",horizon:"#38c098","hi-rise":"#22384d",fuse:"#207af5",vintage:"#cb5139",bold:"#ffb703",classic:"#ffffff",skyscraper:"#41b7c4",sophisticated:"#f65100",clean:"#e5f0f1",chic:"#fbf883",spark:"#f64028",fresh:"#9db946",forest:"#382a23",intensity:"#31d677",delight:"#fdef8c",upbeat:"#ef4135",smart:"#334ed7","jet-black":"#16161a",timeless:"#e7e9df",rustic:"#0d3a35",innovative:"#17c37b",charming:"#ffbfb3",fun:"#f2d261",funky:"#f73f52",sincere:"#f9e666",army:"#574a3d",royal:"#edeadc",organic:"#a2ce63",tender:"#68cba7",dynamic:"#448d4e",pure:"#f4bb97"})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(t,i){var n=this;this.flags=t,this.$translate=i,this.populateData=function(){return n.buildFontDataObject(e.newKit_data)},this.translateStaticText=function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t].name=n.$translate.instant("design.font-data."+t+".name"),e[t].description=n.$translate.instant("design.font-data."+t+".description"))},this.createFontDataObject=function(e){return{name:n.$translate.instant("design.font-data."+e+".name"),description:n.$translate.instant("design.font-data."+e+".description"),fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"}},this.buildFontDataObject=function(e){var t={};return e.forEach(function(e){t[e]=n.createFontDataObject(e)}),t},this.data=this.populateData()}return e.$inject=["flags","$translate"],e.original_data={agile:{name:"Agile",description:"Vivacious and swift with a dash of spontaneity",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},army:{name:"Army",description:"A commanding presence, both strong and tenacious",fontNameSize:32,fontDescriptionSize:13,fontName:"font_0",fontDescription:"font_9"},"black-ice":{name:"Black Ice",description:"Compelling and intense with a magnetic nature",fontNameSize:22,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},"black-ice-2":{name:"Black Ice 2",description:"Compelling and intense with a magnetic nature",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},bold:{name:"Bold",description:"An adventurous spirit that's loud and proud",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_2",fontDescription:"font_9"},"bold-2":{name:"Bold 2",description:"An adventurous spirit that's loud and proud",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_2",fontDescription:"font_9"},bounce:{name:"Bounce",description:"A burst of kinetic energy, bright and animated",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},bouquet:{name:"Bouquet",description:"Lovely and inviting with a celebratory feel",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_2",fontDescription:"font_9"},breeze:{name:"Breeze",description:"A gust of cool mountain air, brisk and refreshing",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},"breeze-2":{name:"Breeze 2",description:"A gust of cool mountain air, brisk and refreshing",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},cadenza:{name:"Cadenza",description:"Intense yet harmonious, like the sound of a powerful symphony",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},"cadenza-2":{name:"Cadenza 2",description:"Intense yet harmonious, like the sound of a powerful symphony",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},charming:{name:"Charming",description:"A charismatic character, both dashing and suave",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},chic:{name:"Chic",description:"Effortless style and poise with a hint of glamour",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_7",fontDescription:"font_9"},"chic-2":{name:"Chic 2",description:"Effortless style and poise with a hint of glamour",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_7",fontDescription:"font_9"},classic:{name:"Classic",description:"A graceful nature, truly tasteful and polished",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},clean:{name:"Clean",description:"Neat and balanced, like a perfectly blank slate",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},"clean-2":{name:"Clean 2",description:"Neat and balanced, like a perfectly blank slate",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},"deep-forest":{name:"Deep Forest",description:"A woodsy, free spirited vibe that's intriguing and pleasant",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},delight:{name:"Delight",description:"Engaging and joyful with a spark of jubilation",fontNameSize:22,fontDescriptionSize:11,fontName:"font_0",fontDescription:"font_9"},"delight-2":{name:"Delight 2",description:"Engaging and joyful with a spark of jubilation",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},dynamic:{name:"Dynamic",description:"A thrill-seeking quality, energetic and audacious",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},elegant:{name:"Elegant",description:"A beauty that never fades, both upscale and exquisite",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_2",fontDescription:"font_9"},evolution:{name:"Evolution",description:"Visionary and progressive with a contemporary touch",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},fresh:{name:"Fresh",description:"Like freshly cut grass on a summer day, crisp and invigorating",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},"fresh-2":{name:"Fresh 2",description:"Like freshly cut grass on a summer day, crisp and invigorating",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},fun:{name:"Fun",description:"Bold, bright and buzzing with an upbeat tone",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},funky:{name:"Funky",description:"An out-of-the-box vibe, uniquely hip and colorful",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},fuse:{name:"Fuse",description:"Deliberate and strong with unwavering focus",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},"hi-rise":{name:"Hi Rise",description:"Established and professional, a highly approachable feel",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},horizon:{name:"Horizon",description:"Simple yet stunning, like a sunset over the ocean",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},"horizon-2":{name:"Horizon 2",description:"Simple yet stunning, like a sunset over the ocean",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},indulge:{name:"Indulge",description:"Luxuriously classy while exuding an air of gentle refinement",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},innovative:{name:"Innovative",description:"Creative and modern with a spark of cutting-edge discovery",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},intensity:{name:"Intensity",description:"A fierce vibe with electric energy and determination",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},"jet-black":{name:"Jet black",description:"A serious tone, sleek and striking with a dash of resilience",fontNameSize:32,fontDescriptionSize:13,fontName:"font_0",fontDescription:"font_9"},maison:{name:"Maison",description:"Like a grand estate in the French countryside, elegant and fine",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},merlot:{name:"Merlot",description:"Rich, tasteful and full-bodied, like a fine red wine",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},midnight:{name:"Midnight",description:"An unsolved mystery, both vivid and captivating",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},minimal:{name:"Minimal",description:"Balance and simplicity with a touch of refinement",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},organic:{name:"Organic",description:"A cheerful nature, authentic and friendly",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},playground:{name:"Playground",description:"Youthful and lighthearted with a sense of pure joy",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},"playground-2":{name:"Playground 2",description:"Youthful and lighthearted with a sense of pure joy",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},pure:{name:"Pure",description:"Wholesome, natural and kind with a genuine quality",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},rosewater:{name:"Rosewater",description:"Enchanting, delicate and just the right touch of romance",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},royal:{name:"Royal",description:"An air of aristocratic dignity and a modern, confident feel",fontNameSize:32,fontDescriptionSize:13,fontName:"font_0",fontDescription:"font_9"},rustic:{name:"Rustic",description:"Simple country charm garnished with an urban twist",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},serene:{name:"Serene",description:"A light, tranquil tone that's pleasant and relaxed",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},sincere:{name:"Sincere",description:"Cool and candid with an earnest approach",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},skyscraper:{name:"Skyscraper",description:"Cosmopolitan style with an influential, modern feel",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},smart:{name:"Smart",description:"Professional and intelligent, with a look that's easy on the eyes",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},soho:{name:"Soho",description:"Contemporary taste with a touch of downtown class",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},sophisticated:{name:"Sophisticated",description:"A seasoned world traveler, refined and cultured",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},spark:{name:"Spark",description:"Sharp and inspired with a flicker of excitement",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_2",fontDescription:"font_9"},sugar:{name:"Sugar",description:"Sweet and lively with a hint of spice and everything nice",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_6",fontDescription:"font_9"},"sugar-2":{name:"Sugar 2",description:"Sweet and lively with a hint of spice and everything nice",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_6",fontDescription:"font_9"},tender:{name:"Tender",description:"Soft and gentle with a warm, welcoming character",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},timeless:{name:"Timeless",description:"An enduring, ageless look that never goes out of style",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},unplugged:{name:"Unplugged",description:"An edgy vibe, raw and exposed",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},upbeat:{name:"Upbeat",description:"Bright and optimistic with a captivating energy",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},vintage:{name:"Vintage",description:"A retro tone, like a valuable antique that's been renewed",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"},vogue:{name:"Vogue",description:"Striking glamour with a touch of je ne sais quoi",fontNameSize:void 0,fontDescriptionSize:void 0,fontName:"font_0",fontDescription:"font_9"}},e.newKit_data=["agile","army","black-ice","black-ice-2","bold","bold-2","bounce","bouquet","breeze","breeze-2","cadenza","cadenza-2","charming","chic","chic-2","classic","clean","clean-2","deep-forest","delight","delight-2","dynamic","elegant","evolution","fresh","fresh-2","fun","funky","fuse","hi-rise","horizon","horizon-2","indulge","innovative","intensity","jet-black","maison","merlot","midnight","minimal","organic","playground","playground-2","pure","rosewater","royal","rustic","serene","sincere","skyscraper","smart","soho","sophisticated","spark","sugar","sugar-2","tender","timeless","unplugged","upbeat","vintage","vogue","retro","lovely","sky-high","grand","hype","wild-rose","indie","lush","vivid","play","luxury","inspire","agency"],e}();t.FontDataForThumbnail=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("fontDataForThumbnail",n)},function(e,t,i){"use strict";var n=function(){return function(){this.HIDE="HIDE",this.RENAME_BUTTON="RENAME_BUTTON",this.EDIT_LIST_ITEM="EDIT_LIST_ITEM",this.HIDE_LIST_ITEM="HIDE_LIST_ITEM",this.TOGGLE_PARAGRAPH_COLUMNS="TOGGLE_PARAGRAPH_COLUMNS",this.DELETE_LIST_ITEM="DELETE_LIST_ITEM",this.DUPLICATE_LIST_ITEM="DUPLICATE_LIST_ITEM",this.LIST_ITEM_TO_PAGE="LIST_ITEM_TO_PAGE",this.OPEN_MEDIA_MANAGER="OPEN_MEDIA_MANAGER",this.CROP_IMAGE="CROP_IMAGE",this.EDIT_BACKGROUND="EDIT_BACKGROUND",this.MANAGE_PAGES="MANAGE_PAGES",this.OPEN_SETTINGS="OPEN_SETTINGS",this.LINK_TO="LINK_TO",this.MEDIA_LINK_TO="MEDIA_LINK_TO",this.TO_SETTING_MEDIA_LINK_TO="TO_SETTING_MEDIA_LINK_TO",this.FOCUS_CONTENT="FOCUS_CONTENT",this.EDIT_CONTENT="EDIT_CONTENT",this.OPEN_SEO="OPEN_SEO",this.OPEN_SOCIAL_PANEL="OPEN_SOCIAL_PANEL",this.CHANGE_GALLERY_TYPE="CHANGE_GALLERY_TYPE",this.OVERRIDE_FIELD_COLOR="OVERRIDE_FIELD_COLOR",this.RESIZE_TEXT="RESIZE_TEXT",this.SET_MAP_STYLE="SET_MAP_STYLE",this.EDIT_COMPONENT_STYLE="EDIT_COMPONENT_STYLE",this.OPEN_CHAT_SETTINGS="OPEN_CHAT_SETTINGS",this.OPEN_CHAT_DESIGN="OPEN_CHAT_DESIGN",this.OPEN_CHAT_INBOX="OPEN_CHAT_INBOX",this.DELETE_CHAT="DELETE_CHAT",this.UPGRADE_CHAT="UPGRADE_CHAT"}}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("ONSTAGE_EVENTS",new n)},function(e,t,i){"use strict";var n=function(){function e(){}return e.prototype.updateCurrentlyManagedInstance=function(e,t){this.currentlyManagedTpaInstanceId=t},e.prototype.getCurrentlyManagedInstance=function(){return this.currentlyManagedTpaInstanceId},e}();angular.module("siteGeneratorCommon").constant("tpaAppInstanceHolder",new n)},function(e,t,i){"use strict";var n=function(){return function(){this.SOCIAL="Social.SocialButtons"}}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("ReferenceFieldTypes",new n)},function(e,t,i){"use strict";var n="38f506af329446808f6b0913b3051ac3",o="1447b0d08ae54f339389d93600b48cb3",r="17bb6eaf73a949a0abade081f0d76f8a",a="c5a7486dfb13414eb757cea280c3abc7",s="0b8beb6d9d044950a456670808fbb6ff",l="8d7469989bc94c149705fd89b841a8c7",c="ffd6c91234724759a3c781ee36317122",d="926ff10303a241aa9780df15912445eb",u="c95f7bb9230045b0b9f1078c2bed072e",p="6d75e25bd8f74b8b81c028e9ce47c91e",g="8c1b8a60f05a4b138cf275471b33a889",h="a0ca57f916ff472d9dbd31b6f6a47f97",m="cf5c80f663174fa186e661e0300744d0",f="58d2020100684a8f9d99b42b06586386",v="7135aa503abc4036aec6c68ffc0f77e9",S="0d12a546341b4e45acfd5d3f2aa85a8c",y="f68efda9f95f4f108cd20f393fb00476",T="a3e5d0f97cc14254be39cceec5bdddb6",b="1ca66d45ffa9497bb28237a0d079c52c",I="1c874f799c5c4cbcb2dc6a96f4fdadb8",P="563f7de9c0e84007b96929a0a44710d9",M="3b4fe84d33b648e79ba5529127983a1f",E="f9f5a1e2ecfb4fcf81e230aff6b12cd3",w="85be46201f94401889304800c3b66dfe",C="d8300df8de6a43e1b2c3402e5cf958f5",A="df3153a0027741a497560575c38cf954",L={"Abril Fatface":n,"Amatic SC":"f467d5835e1a4224931812483db6f97f","Anonymous Pro":o,Anton:r,"Aref Ruqaa":a,Arizonia:s,Arvo:l,"Averia Serif Libre":c,Bangers:r,"Barlow Condensed":d,"Berkshire Swash":n,Boogaloo:u,Caveat:p,Chonburi:n,"Clicker Script":g,Comfortaa:l,"Concert One":h,Corben:m,"Cormorant Garamond":a,Damion:f,"Dancing Script":g,Dynalight:a,"Elsie Swash Caps":m,"Emblema One":v,"Emilys Candy":m,"Fontdiner Swanky":v,"Fredoka One":S,"Fugaz One":y,Graduate:T,"Gravitas One":n,"Great Vibes":b,Kalam:S,"Kaushan Script":s,Knewave:v,"Krona One":T,"Life Savers":I,"Lilita One":P,Limelight:M,"Luckiest Guy":r,"Merienda One":g,"Montserrat Alternates":s,Montserrat:l,"Oleo Script":E,Oranienbaum:w,Pacifico:g,"Passion One":C,"Patua One":l,Peralta:l,"Pirata One":M,Playball:g,"Playfair Display":c,"Poiret One":s,Pompiere:u,Poppins:S,Questrial:m,Quicksand:l,Raleway:p,Rancho:I,Ribeye:h,"Ribeye Marrow":b,Roboto:y,"Rock Salt":p,Rokkitt:"4ad2735e51024f2a963e337214b36895","Rozha One":n,Rye:"7e5422c14723495a98f329432a00d287",Sail:A,"Seaweed Script":g,Shrikhand:A,"Sirin Stencil":M,"Six Caps":d,"Sonsie One":A,"Special Elite":o,"Spicy Rice":P,Sriracha:C,"Stardos Stencil":a,"Stint Ultra Expanded":o,"Suez One":P,Teko:r,"Titan One":v,UnifrakturMaguntia:E,Unkempt:I,"Vast Shadow":b,Vidaloka:w,"Wire One":"692e84e36b3948e386d8481c70975be0","Work Sans":s,Yellowtail:f,"Yeseva One":c,Yesteryear:m};angular.module("siteGeneratorStaticsConsumerAppInternal").constant("FONT_TO_KIT",L)},function(e,t,i){"use strict";angular.module("siteGeneratorContentManagerInternal").constant("contentCMSFallback",{industryAncestry:["9e0d43c23f82998a6ac269b5","0e7f141a196bcc3bd9ed0670"],pages:[{id:"1fe99a018486bb847d2d8fe5",name:"Home",sections:[{id:"Welcome",ceType:"Welcome",cardinality:1,header:{prefix:"",hidden:[],labels:{}},footer:{prefix:"",hidden:[],labels:{}},item:{prefix:"",hidden:[],labels:{longText:"Description"}},dbId:"0cb352d003dfebe801b8a3ea",syncWithBooking:"none",preferredMedia:null},{id:"About",ceType:"Homepage_about",cardinality:1,header:{prefix:"",hidden:[],labels:{}},footer:{prefix:"",hidden:[],labels:{}},item:{prefix:"",hidden:[],labels:{longText:"Description"}},dbId:"7d8e9fb29d64167e6762f2e0",syncWithBooking:"none",preferredMedia:null}],optional:!1}],contentItems:[{industryIds:[],structureIds:["e51e11f3597e0c565deb792f"],sectionIds:["Welcome"],content:{title:["{{GeneralDescription.BusinessName}}"],subTitle:["Doing Business the Right Way"],longText:["Welcome to {{GeneralDescription.BusinessName}}. Our main goal is to always achieve a high level of customer satisfaction with the services and products that we provide. This simple approach has effectively fueled our growth since we opened our doors in {{GeneralDescription.YearFounded}}. We’re thrilled you’ve decided to visit us - please browse our site to discover what we’re all about."],button:["Get in Touch"]},sets:[]},{industryIds:[],structureIds:["e51e11f3597e0c565deb792f"],sectionIds:["About"],content:{title:["About Us"],subTitle:["Our Background"],longText:["As one of the leading local businesses in the {{Contact.City}} area, we attribute our reputation to the lasting customer relationships we’ve developed throughout the years. We believe that all of our customers deserve the highest level of service, and we are committed to providing just that. Get in touch today to learn more."],button:["Contact"]},sets:[]}],kits:["56ea6ad2688a379f00b7d1f1","56a9cb909abbe1240060883c","56dff911433b5a5b001fe394","57021f5f0ac9962e00c8e5d4","56e59effcc38532900200577","579ef944a10db9520021b737","5868d4eb6764341f00cac0c6","56e57bfd917ec97a001e0f1a","571cadb3ff1cf8f8009ba1e7","585fb8e641d27e20005b9b63","570267dce69a766d001fbb20","585fac6a41d27e20005b9b5e","56e6d6d18d7e8364002629da","56e178c9aeeaf64900372cd6","56e0514d203a352000f655b4","56e03c0d40213a5700098eee","56f8e5ff2479f32000bb279a","56dd4d23a23c9120000cdae0","56d45a44952a2d370028a4da","56e52efbe394dda300b8519c","56f7c38a0b19ae2e00eaab27","56e7d6b101e8043700af8382","56f3b343c9e0624900dfb8f1","56e98ace8b6487fc00c58822","56f801b45cd1577600f36112","56e91b1c7471472e009ffa46","5702657d8b893b91002cde69","56dd4bc6ea63ca680027c89e","56f93d103f30a72e0004f8d5","56e80ad06c755b9a00887e26","570243aca24ae92e00ad3204","56f26ee2596068370028f88e","56f9147e2479f32000bb279b","56dff99f9a628e8800362dd4","56e17e13f241a288009888d1","56e52be07e8ffe5b00846e59","570225f6e4b8ef9a00841798","56a49c8dfb85744900a2b2b1","57b05bd92560436d00544050","57b07fc1b0ff73640098ce3e","56e964357ab3fc3700a1197f","584d5fbdc8e7512000dad50f","5682a826a81c70310001c611","5682ae70a81c70310001c64c","5697e4d67bfbe94400385a70","568297b6208c4c310054508b","587b3a36c587ef1400686bc5","587b7e7dc25b1014009cba44","587b9783c587ef1400686bca","587babe4c25b1014009cba49","5869222c7f055d1f00e42a28"],placeholders:[]})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(196),o=i(0),r=function(){function e(e,t){this.$interpolate=e,this.flags=t}return e.$inject=["$interpolate","flags"],e.prototype.interpolateSingleValue=function(e,t,i,r){if(!o.isString(e))return{content:e,score:1,isFinal:!0};var a=this.$interpolate(e,!0,null,!0);if(!a)return{content:e,score:1,isFinal:!0};var s=a({});if(s)return{content:s,score:n.ContentScores.scoreForUsingDefaultValues,isFinal:!0};var l=a(t);if(l)return{content:l,score:n.ContentScores.scoreForUsingTemplateValues,isFinal:!0};var c=a(i);if(c)return{content:c,score:n.ContentScores.scoreForUsingPlaceholderValues,isFinal:!0};var d=a(r),u=void 0!==d,p=u?n.ContentScores.scoreForUsingDefaultValues:1;return{content:d||e,score:p,isFinal:u}},e}();t.ContentInterpolator=r,angular.module("siteGeneratorContentManagerInternal").service("contentInterpolator",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(41),o=i(70),r=i(272),a=i(0),s=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p){this.consumerBiLogger=e,this.ContentElement=t,this.contentAllocator=i,this.contentElementUtils=n,this.contentMapCreator=o,this.siteModelData=r,this.mediaGallery=a,this.contentNormalizer=s,this.contentInterpolator=l,this.nodeTitleManager=c,this.textRepository=d,this.$translate=u,this.flags=p,this.contentItemElements={},this.backgroundMedia={},this.lastSocialImageCount=0,this.preparedImages=[]}return e.$inject=["consumerBiLogger","ContentElement","contentAllocator","contentElementUtils","contentMapCreator","siteModelData","mediaGallery","contentNormalizer","contentInterpolator","nodeTitleManager","textRepository","$translate","flags"],e.prototype.initialize=function(e){this.contentItemElements=e,this.flags.sectionMedia&&this.initBackgroundRepository()},e.prototype.generate=function(e,t){return void 0===t&&(t=0),1===e.cardinality?this.generateSingleContentElement(e,t):this.generateListContentElement(e,t)},e.prototype.generateListContentElement=function(e,t){var i=this;void 0===t&&(t=0);var n=e.cardinality;this.flags.presetSettings&&(n=core.maxListCardinality);var o={self:{items:a.range(0,n).map(function(e){return{}}),header:{},footer:{}}};return{type:e.ceType,items:a.range(0,n).map(function(n){return i.generateSingleContentElement(e,n+t,o.self.items[n],{self:o.self.items[n]},!0,e.ceType)}),header:this.generateSingleContentElement(this.createListSection(e,!0),0,o.self.header,o,!1,e.ceType),footer:this.generateSingleContentElement(this.createListSection(e,!1),0,o.self.footer,o,!1,e.ceType)}},e.prototype.getMediaFieldValue=function(e,t,i){var n=t;e.setValues&&0===t.length&&(n=this.contentAllocator.getMediaValue(e.setValues,i,!1));var o=a.uniq(a.map(n,function(e){return e.mediaType}));return{content:n.concat(this.contentAllocator.getMediaValue(e.itemValues,i,!0,o))}},e.prototype.getNonMediaFieldValue=function(e,t,i,n){var o=t.setValues||t.itemValues,r=this.createSortedScoresWithSelfValues(o,n);if(!r.length)return null;var a=r[i%r.length];return a.setItems&&(this.setItems=a.setItems),this.flags.includeIdInContentElement?this.contentAllocator.getFieldValueAndId(a,e):{content:this.contentAllocator.getFieldValue(a,e)}},e.prototype.generateSingleContentElement=function(e,t,i,o,r,s){var l=this;void 0===t&&(t=0),void 0===i&&(i={}),void 0===o&&(o={self:i}),void 0===r&&(r=!1),void 0===s&&(s=""),void 0!==this.flags.contentOffset&&(t=parseInt(this.flags.contentOffset,10));var c=this.flags.textManager?this.contentElementUtils.getAdjustedCEType(e.id,e.ceType):this.getAdjustedCEType(e),d=new this.ContentElement(c,null);this.flags.tpaHeader&&n.TPAHeader.addExtraFields(d);var u=this.resolveContentItemElements(e);this.setFallbackDefaultValues(c,r,s),this.resetSets();var p=0;return a.forEach(d.values,function(e,n){var r=function(e,i){var n=l.resolveItemValuesForField(u,e,t);if(!n.itemValues)return l.getDefaultValue(c,i);if("media"===e.type){var r=l.useSocialImages(c);return r.length&&(d.usesSocialImages=!0),p=l.preparedImages?l.preparedImages.length:0,l.getMediaFieldValue(n,r,t)}return l.getNonMediaFieldValue(e,n,t,o)||l.getDefaultValue(c,i)}(e,n);e.value=r.content,l.flags.includeIdInContentElement&&(e.id=r.id),i[e.subType]=e.value}),l.flags.preferSocialImages&&l.contentMapCreator.settings.socialImageUsagefilter.indexOf(c.toLowerCase())>-1&&l.consumerBiLogger.sectionManagement.fetchImagesInAddSectionPanel(p,"recommended",e.id,c),this.setupFieldLabels(d,e),this.setHiddenMedia(d),this.flags.sectionMedia&&!r&&this.addBackgroundMedia(d,e),d},e.prototype.getAdjustedCEType=function(e){return this.isListHeader(e)?"ListHeader":this.isListFooter(e)?"ListFooter":e.ceType.trim()},e.prototype.resolveContentItemElements=function(e){var t=this.flags.textManager?this.contentElementUtils.getCeType(e.id,e.ceType):this.getSectionCEType(e),i=t in this.contentItemElements?ob.deepClone(this.contentItemElements[t]):{},n=ob.deepClone(i);return e.id&&e.id!==t&&this.handleAliasContentOverride(i,e.id.trim()),this.removeLowerScoredContent(i),this.completeMissingMediaTypes(i.image,n.image),i},e.prototype.handleAliasContentOverride=function(e,t){var i=this.contentItemElements[t]||{};a.keys(i).forEach(function(t){var n=t in e,o=!!n&&a.some(e[t],function(e){return!!e.setItems}),r=a.some(i[t],function(e){return!!e.setItems});n&&o&&!r||(e[t]=i[t])})},e.prototype.removeLowerScoredContent=function(e){a.keys(e).forEach(function(t){var i=0,n=0;a.forEach(e[t],function(e){e.setItems&&e.score>n&&(n=e.score),!e.setItems&&e.score>i&&(i=e.score)}),n>0?e[t]=a.filter(e[t],function(e){return!(e.score!==n||!e.setItems)}).map(function(e,i){var n=a.find(e.setItems,function(e){return e.field===t});return n&&n.index>i&&(n.index=i),e}):i>0&&(e[t]=a.filter(e[t],function(e){return e.score===i}))})},e.prototype.resetSets=function(){this.setItems=null,this.setContent={}},e.prototype.resolveItemValuesForField=function(e,t,i){var n=e&&e[t.subType],o=this.contentItemElements[r.ContentMapCreator.DefaultSectionKey],s=ob.deepClone(a.get(o,t.subType)),l=this.tryGetSetValues(t),c=ob.deepClone(n||s);return l||this.setItems||(c=this.setupSetsIfNeeded(e,n,s,i)),"media"===t.type&&this.completeMissingMediaTypes(c,s),{itemValues:c,setValues:l}},e.prototype.completeMissingMediaTypes=function(e,t){if(e){var i=this.getAllMediaTypes(e),n=this.scoreMissingMediaByType(t,i),o=n.content,r=n.maxScoreByType;this.addMissingMediaByTypeScore(e,o,r)}},e.prototype.getAllMediaTypes=function(e){var t=e.map(function(e){return a.map(e.content,function(e){return e.mediaType})});return a(t).flatten().uniq().value()},e.prototype.scoreMissingMediaByType=function(e,t){var i=this,n=[],o={};return e?(e.forEach(function(e){var r=i.removeContentEntriesByMediaType(e,t);n.push(r),r.content.forEach(function(t){var i=a.get(o,t.mediaType,0);e.score>i&&(o[t.mediaType]=e.score)})}),{content:n,maxScoreByType:o}):{content:n,maxScoreByType:o}},e.prototype.addMissingMediaByTypeScore=function(e,t,i){a.forEach(t,function(t){var n=ob.deepClone(t);a.remove(n.content,function(e){var n=i[e.mediaType];return t.score<n}),e.push(n)})},e.prototype.removeContentEntriesByMediaType=function(e,t){var i=ob.deepClone(e);return a.remove(i.content,function(e){return a.includes(t,e.mediaType)}),i},e.prototype.setupSetsIfNeeded=function(e,t,i,n){var o=null,a=t?n%t.length:0;return t&&t.length>0&&t[a].setItems?(this.setItems=t[a].setItems,this.setContent=e,o=t):i&&i.length>0&&i[0].setItems?(this.setItems=i[0].setItems,this.setContent=ob.deepClone(this.contentItemElements[r.ContentMapCreator.DefaultSectionKey]),o=i):o=t||i,o},e.prototype.isRestoreValues=function(e){return!(this.flags.tpaHeader&&e===n.TPAHeader.TPA_HEADER_CE_TYPE)},e.prototype.getDefaultValue=function(e,t){var i=e+"."+this.contentNormalizer.normalizeKey(t);if(a.has(this.contentMapCreator.settings.replacements,i)){var n=a.get(this.contentMapCreator.settings.replacements,i);if(void 0!==n&&this.isRestoreValues(e))return{content:n}}return this.fallbackDefaultValues?{content:this.fallbackDefaultValues[t]}:t===core.ElementTypes.Button?{content:{callToAction:"Click Me"}}:{content:void 0}},e.prototype.setFallbackDefaultValues=function(e,t,i){this.fallbackDefaultValues=this.siteModelData.getDefaultValuesForCeType(e,t,i),a.isArray(this.fallbackDefaultValues)&&this.fallbackDefaultValues.length>0&&(this.fallbackDefaultValues=this.fallbackDefaultValues[0])},e.prototype.tryGetSetValues=function(e){var t=this.setItems?a.find(this.setItems,{field:e.subType}):null,i=t&&this.setContent[e.subType][t.index];return i?[i]:null},e.prototype.createSortedScoresWithSelfValues=function(e,t){var i=this,n=a.map(e,function(e){return i.interpolateNonFinal(e,t)}).filter(function(e){return e.isFinal});return a.sortBy(n,function(e){return-e.score})},e.prototype.interpolateNonFinal=function(e,t){if(!e.isFinal){var i=this.contentInterpolator.interpolateSingleValue(e.content,t,a.merge(this.contentMapCreator.replacementsWithPlaceholders,t),a.merge(this.contentMapCreator.replacementsWithDefaults,t));return i.score*=e.score,e.id&&!i.id&&(i.id=e.id),i}return e},e.prototype.createListSection=function(e,t){var i=angular.copy(e);return t?(i.id+="_ListHeader",i.item=e.header):(i.id+="_ListFooter",i.item=e.footer),i},e.prototype.getSectionCEType=function(e){return this.isListHeader(e)?e.ceType+"_ListHeader":this.isListFooter(e)?e.ceType+"_ListFooter":e.ceType},e.prototype.isListHeader=function(e){return(!this.flags.tpaHeader||e.id!==n.TPAHeader.TPA_HEADER_ID)&&(e.id&&e.id.endsWith("Header"))},e.prototype.isListFooter=function(e){return e.id&&e.id.endsWith("Footer")},e.prototype.setHiddenMedia=function(t){var i=this;t.setHiddenMedia({});var n=a.find(t.values,{type:core.ElementTypes.Media});if(n){var o={},r=a.filter(n.value,function(e){return"image"===e.mediaType});a.drop(r,e.MaxInitialActiveImages).forEach(function(e){o[i.mediaGallery.getItemId(e)]=!0}),t.setHiddenMedia({image:o})}},e.prototype.scoreImage=function(e){var t=0;if(e.width*e.height*e.fileSize!=0){t+=e.width/1e3>1?1:0,t+=e.height/1e3>1?1:0;var i=e.height/e.width;t+=i>.7&&i<1.5?1:0,t+=Math.log(1e3*e.file_size/(e.width*e.height))}return t},e.prototype.prepareImages=function(){var e=this,t=this.contentMapCreator.settings.getSocialImages();if(t&&(0===this.lastSocialImageCount||t.length>this.lastSocialImageCount)){var i=a.chain(t).filter(function(e){return"picture"===e.mediaType}).each(function(t){e.contentNormalizer.convertFromWixmpSearchResult(t),t.mediaType="image",t.score=e.scoreImage(t)})[this.flags.lodash4?"orderBy":String("sortByOrder")]("score","desc").value();this.lastSocialImageCount=t.length,this.preparedImages=i}},e.prototype.useSocialImages=function(e){return this.contentMapCreator.settings.socialImageUsagefilter&&this.contentMapCreator.settings.getSocialImages&&this.contentMapCreator.settings.socialImageUsagefilter.indexOf(e.toLowerCase())>-1?(this.prepareImages(),a.filter(this.preparedImages.slice(20),function(){return a.random(0,20)>2})):[]},e.prototype.getMediaField=function(e){var t=Object.keys(e.values).find(function(t){return function(e){return"media"===e.type}(e.values[t])});return t&&e.values[t]},e.prototype.createListMediaField=function(e){return e.values.ListImage={type:core.ElementTypes.Media,subType:"image",value:[]}},e.prototype.addBackgroundMedia=function(e,t){var i=this,n=this.flags.textManager?this.contentElementUtils.isListHeader(t.id)||this.contentElementUtils.isListFooter(t.id):this.isListHeader(t)||this.isListFooter(t),r=this.getMediaField(e);if(!r&&n&&(r=this.createListMediaField(e)),r){var s,l={};if(r.value=r.value||[],r.value.forEach(function(e){var t=i.mediaGallery.getItemId(e);t in i.backgroundMedia?(e.usage=core.MediaUsageType.All,l[t]=!0):e.usage=core.MediaUsageType.Content}),"Welcome"!==e.type)a.keys(this.backgroundMedia).forEach(function(e){e in l||r.value.push(i.backgroundMedia[e])});else{var c=o.ContentDefaults.BackgroundImages.map(function(e){return Object.assign({},e,{usage:core.MediaUsageType.Bg})});(s=r.value).push.apply(s,c)}}},e.prototype.initBackgroundRepository=function(){var e=this,t=this.generateSingleContentElement({id:"Welcome",ceType:"Welcome"}),i=t&&t.values.WelcomeMedia;i&&i.value&&i.value.filter(function(e){return e.mediaType===core.MediaItemTypes.Image||e.mediaType===core.MediaItemTypes.Video}).map(function(e){return Object.assign({},e,{usage:core.MediaUsageType.Bg})}).forEach(function(t){return e.backgroundMedia[e.mediaGallery.getItemId(t)]=t}),o.ContentDefaults.BackgroundImages.map(function(e){return Object.assign({},e,{usage:core.MediaUsageType.Bg})}).forEach(function(t){return e.backgroundMedia[e.mediaGallery.getItemId(t)]=t})},e.prototype.setupFieldLabels=function(e,t){var i=t.item;"ListHeader"===t.ceType||t.id&&t.id.endsWith("ListHeader")?i=t.header:"ListFooter"===t.ceType||t.id&&t.id.endsWith("ListFooter")?i=t.footer:t.cardinality,a.forEach(e.values,function(e){i&&i.labels&&e.subType in i.labels&&(e.displayName=i.labels[e.subType])})},e.prototype.getTpaMetaSiteIds=function(){return a.reduce(this.contentItemElements,function(e,t,i){return t.metasite&&(e[i]=t.metasite[0].content),e},{})},e.MaxInitialActiveImages=6,e}();t.ContentElementGenerator=s,angular.module("siteGeneratorContentManagerInternal").service("contentElementGenerator",s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(41),o=i(0),r=function(){function e(e,t){this.flags=e,this.fieldEditorConfiguration=t,this.LIST_HEADER="ListHeader",this.LIST_FOOTER="ListFooter"}return e.$inject=["flags","fieldEditorConfiguration"],e.prototype.getCeType=function(e,t){return this.getListType(e,t)},e.prototype.getAdjustedCEType=function(e,t){return this.isListHeader(e)?this.LIST_HEADER:this.isListFooter(e)?this.LIST_FOOTER:t.trim()},e.prototype.getFieldsStatuses=function(e,t){var i=t.reduce(function(e,t,i){return e[t]=!1,e},{}),n=o.get(e,"contentElement.values");return n&&o.each(n,function(n,o){-1!==t.indexOf(n.subType)&&e.argsMatchingPolicy[o]&&(i[n.subType]=!0)}),i},e.prototype.getListType=function(e,t){return this.isListHeader(e)?t+"_"+this.LIST_HEADER:this.isListFooter(e)?t+"_"+this.LIST_FOOTER:t},e.prototype.isListHeader=function(e){return(!this.flags.tpaHeader||e!==n.TPAHeader.TPA_HEADER_ID)&&(e&&e.endsWith("Header"))},e.prototype.isListFooter=function(e){return e&&e.endsWith("Footer")},e}();t.ContentElementUtils=r,angular.module("siteGeneratorContentManagerInternal").service("contentElementUtils",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(241),o=i(1),r=i(0),a=function(){function e(t,i,n,o,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I){var P=this;this.consumerBiLogger=t,this.cmsApi=i,this.defaultsService=n,this.contentCMSFallback=o,this.contentElementGenerator=a,this.contentMapCreator=s,this.contentSuggestSections=l,this.contentModelTree=c,this.defaultSections=d,this.contentNormalizer=u,this.applicationState=p,this.storyServices=g,this.$q=h,this.wixmpServices=m,this.applicationParameters=f,this.flags=v,this.$translate=S,this.textRepository=y,this.textManagerHelpers=T,this.clientTopology=b,this.newThemesCmsMapping=I,this.socialImageRetryCount=0,this.shouldRetrySocialImages=function(){return P.socialImageRetryCount<=e.socialImageRetryCountMax||!P.socialImages||P.socialImages.length<e.enoughSocialImages},this.mockDefaults={GeneralDescription:r.zipObject(e.mockDefaultsValues,e.mockDefaultsValues)},this.mockDefaults.GeneralDescription.title="Business Name"}return e.$inject=["consumerBiLogger","cmsApi","defaultsService","contentCMSFallback","contentElementGenerator","contentMapCreator","contentSuggestSections","contentModelTree","defaultSections","contentNormalizer","applicationState","storyServices","$q","wixmpServices","applicationParameters","flags","$translate","textRepository","textManagerHelpers","clientTopology","newThemesCmsMapping"],e.prototype.initialize=function(e){var t=this;return this._initialized?this.initParams.industryId===e.industryId&&this.initParams.structureId===e.structureId?this._initialized.then(function(){return t.initSocialImages()}):(this._initialized.stop(),this._initialized=this.initializeInternal(e,{reloading:!0}),this._initialized):(this._initialized=this.initializeInternal(e),this._initialized)},e.prototype.updateSiteContentFromCMS=function(e,t,i){var n=this,o=[];return r.each(i,function(i){var a=t[i];a&&r.each(a,function(t){o.push({text:t.content,source:n.$translate.instant("text-manager.default-source"),sectionTypesData:e.map(function(e){return{sectionType:e,relevance:t.score||0}}),textGroup:i})})}),o},e.prototype.handleTextLoaded=function(e){var t=this,i=[],n=this.textManagerHelpers.getSupportedContentFields();r.each(e,function(e,o){i=i.concat(t.updateSiteContentFromCMS([o],e,n))}),this.textRepository.handleContentLoaded(i)},e.prototype.initializeInternal=function(e,t){var i=this;return void 0===t&&(t={}),this.initParams=e,n.stoppable(this.cmsApi.load(this.initParams)).catch(function(){return i.cmsApi.load(r.clone(intro.DEFAULT_CATEGORY))}).catch(function(){return i.contentCMSFallback}).then(function(e){e.kits=i.replaceWithNewKitIds(e.kits),i.cmsData=e}).then(function(){return i.initSocialImages()}).then(function(){i.buildContentMap(),i.buildAliasToTypeMap()}).then(function(){if(i.flags.textManager){if(t.reloading){var e={source:i.$translate.instant("text-manager.default-source"),isReject:!0};i.textRepository.removeTexts(e)}i.handleTextLoaded(i.contentMap)}})},e.prototype.replaceWithNewKitIds=function(e){var t=this,i=e?e.map(function(i){var n=t.newThemesCmsMapping[i];return t.flags.debug&&void 0===n&&console.log("CMS kit Id not found in kitMapping"),void 0===n?e:n}):[];return r.uniq(i)},e.prototype.isSocialImageEnabled=function(){return this.flags.preferSocialImages&&this.storyServices.story&&this.storyServices.story.privateMediaFolderId},e.prototype.initSocialImages=function(){var e=this;return this.isSocialImageEnabled()&&this.shouldRetrySocialImages()?this.wixmpServices.getSocialImages(this.storyServices.story.privateMediaFolderId,!0).then(function(){e.socialImageRetryCount+=1,e.socialImages=e.wixmpServices.socialImages&&e.wixmpServices.socialImages.data,e.socialImages&&e.consumerBiLogger.warn(o.BIErrorCodes.GeneralWarning,"Social Images found: "+e.socialImages.length)}):this.$q.when()},e.prototype.buildContentMap=function(){var e=this,t={structureId:this.initParams.structureId,industryId:this.initParams.industryId,contentItems:this.cmsData.contentItems,placeholders:this.cmsData.placeholders,replacements:this.contentModelTree.getValues(),defaultReplacements:this.mockDefaults,getSocialImages:function(){return e.socialImages},socialImageUsagefilter:[]};this.flags.preferSocialImages&&(t.socialImageUsagefilter="all"===this.flags.preferSocialImages?["about","inner_about","homepage_about","welcome","contact"]:["about","inner_about","homepage_about"]),this.contentMap=this.contentMapCreator.createMap(t),this.contentElementGenerator.initialize(this.contentMap)},e.prototype.buildAliasToTypeMap=function(){var e=this;return this.aliasToTypeMap={},r.forEach(this.cmsData.pages,function(t){r.forEach(t.sections,function(t){t.id&&t.id!==t.ceType&&(e.aliasToTypeMap[t.id]=t.ceType)})}),this.aliasToTypeMap},e.prototype.getAliasForType=function(e){return r.findKey(this.aliasToTypeMap,function(t){return t===e})},e.prototype.getKitIds=function(){return this.cmsData&&this.cmsData.kits},e.prototype.suggestedSections=function(e){var t=void 0===e?{}:e,i=(t.isHomepage,t.siteHasStore);return this.throwIfNotInitialized(),this.contentSuggestSections.suggest(this.cmsData.pages,this.defaultSections.list,i)},e.prototype.suggestedSectionsByPage=function(e){this.throwIfNotInitialized();var t=r.find(this.cmsData.pages,function(t){return t.name===e});return r.map(t.sections,function(e){return{ceType:e.ceType,id:e.id,section:e,isCurrentPage:!1,isRecommendedPage:!0,isRecommendedForSite:!1,rawSectionBrief:e}})},e.prototype.suggestedPages=function(e,t){void 0===t&&(t=!0),this.throwIfNotInitialized();var i=this.cmsData.pages.slice(1),n=this.contentSuggestSections.suggestPages(i,this.defaultSections.list,e);if(t){var o=this.$translate.instant("builder.sections.blank"),r=this.$translate.instant("builder.sections.blank");n.pageSuggestions.push({id:o,pageTitle:r,isBlank:!0,ceType:"Blank",rawSectionBrief:{}})}return n},e.prototype.prepareDrafts=function(e,t,i){var n=this;void 0===t&&(t=1),void 0===i&&(i=0);var o=this.generateRandomOffset(e);return r.range(t).map(function(t){return n.contentElementGenerator.generate(e.rawSectionBrief,i+t+o)})},e.prototype.generateRandomOffset=function(e){return this.applicationState.generateRandomOffset(e.id?e.id:e.ceType)},e.prototype.getTpaMetaSiteIds=function(){var e=this.contentElementGenerator.getTpaMetaSiteIds(),t=this.applicationParameters.tpaTypes.Stores.type,i=this.applicationParameters.tpaTypes.Blog.type;if(e[t]=e[t]||"e681103e-6662-41ca-8196-f995c9f0558d",this.flags.blog2){var n=void 0;if(this.flags.newBlogWithContent&&(n=e[i]),!n)switch(this.clientTopology.locale){case"en":default:n="e72eb9dd-897b-4083-918c-782aae3fb8cf";break;case"pt":n="48e35e77-9b98-4afa-a1b2-2ce8540716d1";break;case"de":n="6b4d2ab9-7054-4207-8088-631482e05260";break;case"es":n="c7b57a2d-8bad-4687-bfd3-8c3124c60c04";break;case"fr":n="25b0f56f-fa98-4234-98c1-37d4a09a9045";break;case"ja":n="b93d73f3-37a8-46e9-9d14-2b15df77c23a";break;case"ru":n="cfc09767-64bf-4d80-ba05-5aaa6d5365b4"}e.Blog2=n,e.Blog2_Custom_Feed_Widget=n}else e[i]=e[i]||"b0ee2dd4-d99b-42b4-a04e-d3a80588ed27";return e},e.prototype.contentOptions=function(e,t,i,n){var o=this;return void 0===n&&(n=!1),this.contentMap[e]&&this.contentMap[e][t]?n?r.find(this.contentMap[e][t],function(e){return o.isTextMatch(e,i)&&o.setHasImage(e)})?r.filter(this.contentMap[e][t],function(e){return o.isTextMatch(e,i)&&o.setHasImage(e)}).map(function(t){return o.createMediaTextOption(e,t)}):[]:r.filter(this.contentMap[e][t],function(e){return o.isTextMatch(e,i)&&!e.setItems}).map(function(e){return"string"==typeof e.content?o.contentNormalizer.normalizeText(e.content):e}):[]},e.prototype.createMediaTextOption=function(e,t){var i=r.find(t.setItems,{field:"image"}),n=this.contentMap[e][i.field][i.index];return{text:this.contentNormalizer.normalizeText(t.content),media:this.contentNormalizer.normalizeMedia(n.content.length?n.content[0]:n.content)}},e.prototype.isTextMatch=function(e,t){return e.isFinal&&(void 0===t||-1!==e.content.indexOf(t))},e.prototype.setHasImage=function(e){return e.setItems&&!!r.find(e.setItems,{field:"image"})},e.prototype.throwIfNotInitialized=function(){if(!this.cmsData)throw"Content Manager called without proper initialization";this.initSocialImages()},e.mockDefaultsValues=["title","practice1","practice3","teamMember1","teamMember3","newsItemTitle2","clientName2","eventName2","eventName3","industry2","service","typeOfTrip1","typeOfTrip3","vacationSpecial1","vacationSpecial3","newsItem1","newsItem3","customerName1","customerName3","jobTitle2","date","industry1","industry3","travelDestination1","travelDestination3","newsItemDate","companySize","practice2","yearFounded","city","teamMember2","year","openingHours"],e.enoughSocialImages=10,e.socialImageRetryCountMax=5,e}();t.ContentManager=a,angular.module("siteGeneratorContentManagerInternal").service("contentManager",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n){this.contentManager=e,this.wizContentManager=t,this.wizWebsite=i,this.flags=n}return e.$inject=["contentManager","wizContentManager","wizWebsite","flags"],e.prototype.provider=function(){return this.wizWebsite.isConvertingSite()?this.wizContentManager:this.contentManager},e.prototype.suggestedSections=function(e){return this.provider().suggestedSections(e)},e.prototype.prepareDrafts=function(e,t,i){return void 0===t&&(t=1),void 0===i&&(i=0),this.provider().prepareDrafts(e,t,i)},e.prototype.suggestedSectionsByPage=function(e,t){return this.provider().suggestedSectionsByPage(e,t)},e}();t.ContentSource=n,angular.module("siteGeneratorContentManagerInternal").service("contentSource",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i){this.modelTree=e,this.storyServices=t,this.contentNormalizer=i}return e.$inject=["modelTree","storyServices","contentNormalizer"],e.prototype.isSectionInTree=function(e){var t=this.storyServices.story.selectedPage,i=this.modelTree.getPageNodeById(t),o=i&&i.children;return n.filter(o,function(t){var i=t.getContentElementType()===e.ceType||t.parentContentElementType===e.ceType,n=e.id===e.ceType||e.id===t.alias;return("Homepage_about"===e.ceType||"OpeningHours"===e.ceType||"Contact"===e.ceType||!e.id||n)&&i}).length>0},e.prototype.getPageTitleValues=function(){return n.map(this.modelTree.getPagesNodes(),function(e){return e.alias})},e.prototype.getValues=function(){var e=this,t={};return this.modelTree.traverse(function(i){var n=i.getContentElementType();return n&&(t[n]=e.getNodeValues(i)),0}),t},e.prototype.getNodeValues=function(e){var t=this,i={},o=e.getContentElement();return o&&o.values?(n.forEach(o.values,function(e,n){if(e.value){var o=t.contentNormalizer.normalizeKey(n);i[o]=e.value}}),i):i},e}();t.ContentModelTree=o,angular.module("siteGeneratorContentManagerInternal").service("contentModelTree",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(70),o=i(0),r=function(){function e(e,t){this.contentNormalizer=e,this.flags=t}return e.$inject=["contentNormalizer","flags"],e.prototype.fillDefaultValue=function(e,t,i){return(!e||0===e.length&&i)&&(e=[].concat(n.ContentDefaults[t])),e},e.prototype.getMediaValue=function(e,t,i,n){var r=this;void 0===i&&(i=!1),void 0===n&&(n=[]);var a=this.getMediaContent(e,t,core.MediaItemTypes.Video),s=this.getMediaContent(e,t,core.MediaItemTypes.Image),l=this.getMediaContent(e,t,core.MediaItemTypes.Shape),c=this.getMediaContent(e,t,core.MediaItemTypes.Clipart),d=this.getMediaContent(e,t,core.MediaItemTypes.ExtVideo);return a=this.fillDefaultValue(a,"bgVideo",i),s=this.fillDefaultValue(s,"images",i),l=this.fillDefaultValue(l,"shape",i),c=this.fillDefaultValue(c,"clipart",i),d=this.fillDefaultValue(d,"extVideo",i),s.concat(l).concat(c).concat(a).concat(d).filter(function(e){return!o.includes(n,e.mediaType)}).map(function(e){return r.contentNormalizer.normalizeMedia(e)})},e.prototype.getFieldValue=function(e,t){var i=e&&e.content;return"string"==typeof i&&(i=this.contentNormalizer.normalizeText(i)),t.type===core.ElementTypes.Button?{callToAction:i}:i},e.prototype.getFieldValueAndId=function(e,t){return{content:this.getFieldValue(e,t),id:e&&e.id}},e.prototype.getMediaContent=function(e,t,i){var n=this,r={},a=0;if(o.filter(e,function(e){return e.score}).forEach(function(e){var t=o.filter(e.content,function(e){return e.mediaType===i});if(t.length>0){var n=r[e.score]||[];e.score>a&&(a=e.score),r[e.score]=n.concat(t)}}),0===a)return[];var s=r[a];return o.range(0,s.length).map(function(e){var i=n.cycleIndex(t+e,s.length);return n.contentNormalizer.normalizeMedia(s[i])})},e.prototype.cycleIndex=function(e,t){return e%t},e}();t.ContentAllocator=r,angular.module("siteGeneratorContentManagerInternal").service("contentAllocator",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o){this.contentModelTree=e,this.storyServices=t,this.modelTree=i,this.flags=n,this.$translate=o}return e.$inject=["contentModelTree","storyServices","modelTree","flags","$translate"],e.prototype.suggest=function(t,i,o){var r=this;this.flags.tpaHeader&&(i=n.reject(i,function(e){return e.hideInAllSections}));var a=n.filter(i,function(e){return!e.flag||!!r.flags[e.flag]}),s=this.sectionListFromPageList(t).concat(this.suggestDefaults(a)),l=this.generateUniqueSuggestions(s);return o&&(l=n.filter(l,function(t){return!t.isRecommendedForSite||-1===e.blacklistedAliasesForStore.indexOf(t.rawSectionBrief.id)})),{suggestions:l,selectedIndex:n.findIndex(l,function(e){return!r.contentModelTree.isSectionInTree(e.rawSectionBrief)}),remainingSuggestedSections:n.filter(l,function(e){return!r.contentModelTree.isSectionInTree(e.rawSectionBrief)&&e.isRecommendedForPage}).length}},e.prototype.suggestPages=function(t,i,o){var r=t.map(function(e){return{ceType:e.sections[0].ceType,id:e.sections[0].id,pageTitle:e.name,isRecommendedPage:!e.optional,isRecommendedForSite:!0,rawSectionBrief:e.sections[0]}});o&&(r=n.filter(r,function(t){return-1===e.blacklistedPageNamesForStore.indexOf(t.id)}));var a=this.contentModelTree.getPageTitleValues();return{pageSuggestions:r,selectedIndex:n.findIndex(r,function(e){return-1===a.indexOf(e.pageTitle)})}},e.prototype.suggestDefaults=function(e){return n.map(e,function(e){return{section:e,isCurrentPage:!1,isRecommendedPage:!1,isRecommendedForSite:!1}})},e.prototype.generateUniqueSuggestions=function(e){var t=this,i=e.map(function(e){var i=e.section,n=e.isCurrentPage,o=e.isRecommendedPage,r=e.isRecommendedForSite;return{ceType:i.ceType,id:i.id?i.id:t.$translate.instant("builder.sections."+i.ceType),alias:i.alias,isRecommendedForPage:n,isRecommendedPage:o,isRecommendedForSite:r,isUsedAlready:t.modelTree.isTypeUsedInPage(i.id,i.ceType),rawSectionBrief:i}}),o=n.sortBy(i,function(e){return e.isRecommendedPage?0:1}),r=n.sortBy(o,function(e){return e.isRecommendedForPage?0:1});return this.flags.lodash4?n.uniqBy(r,"id"):n[String("uniq")](r,!1,"id")},e.prototype.sectionListFromPageList=function(e){var t=this;return n.flatten(e.map(function(e){return e.sections.map(function(i){return{section:i,isCurrentPage:t.isCurrentPage(e),isRecommendedPage:!e.optional,isRecommendedForSite:!0}})}))},e.prototype.isCurrentPage=function(e){var t=this.storyServices.story&&this.storyServices.story.selectedPage;if(!t)return!1;var i=this.modelTree.getPageNodeById(t);if(!i)return!1;var n=e.name.trim().toLowerCase(),o=i.alias;return!!o&&o.trim().toLowerCase()===n},e.DefaultHomePageName="home",e.blacklistedAliasesForStore=["All Products","Collections","Products","Custom Design","Customer Favorites","Featured Inventory","Gift Cards","Gift Certificates","Gift Certificates","Gift Shop","Home & Personal","Inventory","Merchandise","My Products","New Collection","New Releases","Our Collection","Our Inventory","Packing Supplies","Parts","Shop","Wedding Arrangements","Special Offers","Specialty Items","Used Products","Used Collection","What we buy","Our Products"],e.blacklistedPageNamesForStore=["Products","Our Products","Special Offers","Shop","Merchandise","Store","Packing Supplies","Gift Shop","Mobile App","Our Inventory","Inventory","My Products","Products By Request","Custom Design","Gift Cards","Gift Certificates","Home & Personal","Books","Parts","Specialty Items"],e}();t.ContentSuggestSections=o,angular.module("siteGeneratorContentManagerInternal").service("contentSuggestSections",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o){this.nodeFetcher=e,this.sitePartTypes=t,this.richTextService=i,this.$translate=n,this.flags=o}return e.$inject=["nodeFetcher","sitePartTypes","richTextService","$translate","flags"],e.prototype.getNodeTitleValue=function(e){var t="Testimonial"===e.getContentElementType()?core.ElementSubTypes.Subtitle:core.ElementSubTypes.Title,i=n.findKey(e.contentElement.values,function(e){return e.subType===t});return i?this.humanize(e.contentElement.values[i].value):null},e.prototype.isListHeaderFooter=function(e){return e.isListItem&&("ListHeader"===e.contentElement.type||"ListFooter"===e.contentElement.type)},e.prototype.nodeTitle=function(e){return e.contentElement?this.resolveNodeTitle(e):e.alias||this.$translate.instant("builder.sections."+e.getContentElementType())},e.prototype.resolveNodeTitle=function(e){var t=this.nodeFetcher.getNodeSitePart(e),i=e.contentElement.type;return e.alias?this.isListHeaderFooter(e)?e.alias+i:e.alias:t===this.sitePartTypes.HEADER?this.$translate.instant("builder.sections.header"):t===this.sitePartTypes.FOOTER?this.$translate.instant("builder.sections.footer"):"Homepage_about"===i||"Inner_about"===i?this.$translate.instant("builder.sections.About"):this.$translate.instant("builder.sections."+i)},e.prototype.fieldLabel=function(e,t,i){return e.displayName?e.displayName:e.subType===core.ElementSubTypes.Image&&e.type===core.ElementTypes.Media?this.$translate.instant("builder.field-editor.single.media"):this.labelBySubtype(e.subType,i,t)},e.prototype.labelBySubtype=function(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),e){var n="item"===i,o=this.labelFieldKey(e,n,t),r=this.$translate.instant(o);switch(i){case"header":return this.$translate.instant("builder.field-editor.list-header",{text:r});case"footer":return this.$translate.instant("builder.field-editor.list-footer",{text:r});case"item":return e===core.ElementSubTypes.Button?r:this.$translate.instant("builder.field-editor.list-item",{text:r})}return r}},e.prototype.labelFieldKey=function(e,t,i){var n="Contact"===i,o="GeneralDescription"===i;switch(e){case core.ElementSubTypes.Title:return o?"builder.field-editor.single.business-name":t?"builder.field-editor.list.item.title":"builder.field-editor.single.title";case core.ElementSubTypes.Subtitle:return o?"builder.field-editor.single.tagline":"builder.field-editor.single.subtitle";case core.ElementSubTypes.Copyright:return"builder.field-editor.single.copyright-message";case"menu":return"builder.field-editor.single.menu";case core.ElementSubTypes.Email:return"builder.field-editor.single.site-email";case core.ElementSubTypes.LongText:return t||n?"builder.field-editor.list.item.long":"builder.field-editor.single.long";case core.ElementSubTypes.Form:return"builder.field-editor.single.form";case core.ElementSubTypes.Button:return"builder.field-editor.single.button";case core.ElementSubTypes.Address:return"builder.field-editor.single.address";case core.ElementSubTypes.Phone:return"builder.field-editor.single.phone-number";case core.ElementSubTypes.Fax:return"builder.field-editor.single.fax";case core.ElementSubTypes.Map:return"builder.field-editor.single.map";case core.ElementSubTypes.Social:return"builder.field-editor.social-title";case core.ElementSubTypes.Login:return"builder.field-editor.login-title";case core.ElementTypes.Subscribe:return"builder.field-editor.subscribe";default:return e}},e.prototype.humanize=function(e){if(!e)return"";this.richTextService.isRichText(e)&&(e=this.richTextService.unMarkRichText(e),e=this.richTextService.resetFormatting(e));var t=e.replace(/_/g,"").trim();return 0===t.length?"":t[0].toUpperCase()+t.substring(1)},e}();t.NodeTitleManager=o,angular.module("siteGeneratorContentManagerInternal").service("nodeTitleManager",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m){this.$q=e,this.$translate=t,this.contentManager=i,this.defaultSections=n,this.ContentElement=o,this.richTextService=r,this.richTextLinks=a,this.miscUtils=s,this.wixWizDataManager=l,this.wizWebsite=c,this.siteConverterConf=d,this.siteConverterLogs=u,this.wizUtils=p,this.flags=g,this.contentElementUtils=h,this.clientTopology=m,this.numOfSectionsAdded=0,this.mediaByUrl={},this.introUserValues={},this.contactSuggestion={ceType:"Contact",id:"Contact",isRecommendedForPage:!0,isRecommendedForSite:!0,isUsedAlready:!1,rawSectionBrief:{id:"Contact",ceType:"Contact",cardinality:1,header:{prefix:"",hidden:[],labels:{}},footer:{prefix:"",hidden:[],labels:{}},item:{prefix:"",hidden:[],labels:{longText:"Description "}},dbId:"084f0ea5f7db69db5469a903",syncWithBooking:"none",preferredMedia:null}},this.contactPage={ceType:"Contact",id:"Contact",pageTitle:"Contact",isRecommendedPage:!0,isRecommendedForSite:!0,rawSectionBrief:{id:"Contact",ceType:"Contact",cardinality:1,header:{prefix:"",hidden:[],labels:{}},footer:{prefix:"",hidden:[],labels:{}},item:{prefix:"",hidden:[],labels:{}},syncWithBooking:"none",preferredMedia:null}}}return e.$inject=["$q","$translate","contentManager","defaultSections","ContentElement","richTextService","richTextLinks","miscUtils","wixWizDataManager","wizWebsite","siteConverterConf","siteConverterLogs","wizUtils","flags","contentElementUtils","clientTopology"],e.prototype.resetState=function(){this.numOfSectionsAdded=0},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i;(i=this.siteConverterLogs).trace.apply(i,[101].concat(e))},e.prototype.setCurrentUrl=function(e){this.currentUrl=e},e.prototype.getCurrentMediaFolderId=function(){var e=this.mediaByUrl[this.currentUrl];return e&&e.folderId},e.prototype.suggestedSections=function(e){var t=this,i=void 0===e?{}:e,o=i.isHomepage,r=void 0!==o&&o;i.siteHasStore;return this.resetState(),{suggestions:this.getSectionsFromWizPage(this.getWizMainPage()).map(function(e){return t.extractSectionSuggestionFromWizBlock(e)}).concat(r?this.contactSuggestion:[]).filter(n.isObject),selectedIndex:0,remainingSuggestedSections:null}},e.prototype.prepareDrafts=function(e,t,i){var n=this.contentManager.prepareDrafts(e,t,i);return e.data?[this.generateContentElement(e,n[0])]:n},e.prototype.suggestedSectionsByPage=function(e,t){return void 0===t&&(t={}),"Contact"===e?[this.contactSuggestion]:this.suggestedSections(t).suggestions},e.prototype.uploadMedia=function(e,t,i,n){var o=this.generateMediaItemsMap(t),r=Object.keys(o),a={mediaUrls:r,mediaItemsMap:o};return this.mediaByUrl[e]=a,r.length?this.wixWizDataManager.uploadMediaToFolder(this.clientTopology.siteMediaToken,r,i,n).then(function(e){a.folderId=e}):this.$q.when()},e.prototype.prepareMedia=function(e){var t=this,i=this.mediaByUrl[e],n=i.mediaUrls,o=i.mediaItemsMap,r=i.folderId;return r?this.wixWizDataManager.getMediasFromFolder(r,n).then(function(e){return(e=e.map(function(e){return t.miscUtils.mediaGalleryAdapter.convertToMediaObject(e)})).forEach(function(e,t){e&&(e.Title=o[n[t]].title)}),i.preparedMedia=t.miscUtils.keyBy(e,"sourceUrl"),e}):this.$q.when()},e.prototype.isMediaFound=function(e){var t=this.generateMediaItemsMap(e);return Object.keys(t).length>0},e.prototype.generateMediaItemsMap=function(e){var t=n.flattenDeep(this.miscUtils.deepGet(e,"media")).filter(function(e){return e.src}),i=t.map(function(e){return e.src});return n.zipObject(i,t)},e.prototype.isListHeader=function(e){return e.id&&e.id.endsWith("Header")},e.prototype.isListFooter=function(e){return e.id&&e.id.endsWith("Footer")},e.prototype.getAdjustedCEType=function(e){return this.isListHeader(e)?"ListHeader":this.isListFooter(e)?"ListFooter":e.ceType.trim()},e.prototype.generateContentElement=function(e,t){return 1===e.rawSectionBrief.cardinality?this.generateSingleContentElement(e,e.data.contents,t):this.generateListContentElement(e,t)},e.prototype.generateSingleContentElement=function(e,t,i,n,o,r,a,s){void 0===n&&(n={}),void 0===o&&(o={self:n}),void 0===r&&(r=!1),void 0===a&&(a=""),void 0===s&&(s=-1);var l=this.flags.textManager?this.contentElementUtils.getAdjustedCEType(e.rawSectionBrief.id,e.rawSectionBrief.ceType):this.getAdjustedCEType(e.rawSectionBrief),c=new this.ContentElement(l,null);return c.setArgsMatchingPolicy({}),this.populateValuesInContentElement(c,t,i,r,s),c},e.prototype.populateValuesInContentElement=function(e,t,i,o,r){var a=this;void 0===t&&(t={}),n.forEach(e.values,function(n,s){var l=a.getFieldValueByFieldType(n,t,i,s);if(l){e.values[s].value=l;var c=e.getArgsMatchingPolicy();c[s]=c[s]||"button"!==n.subType&&!!l||!!l.callToAction}else n.subType===core.ElementSubTypes.Image?e.values[s].value=ob.deepClone(i.values[s].value):o&&n.subType===core.ElementSubTypes.Title&&(e.values[s].value=a.$translate.instant("site-converter.default.item-title",{index:r+1}))})},e.prototype.getFieldValueByFieldType=function(e,t,i,n){switch(e.subType){case core.ElementSubTypes.Image:return this.getMediaFromWizMediaArray(t.media,ob.deepClone(i.values[n].value));case core.ElementSubTypes.LongText:return this.getText(t.rawParagraph,t.paragraph);case core.ElementSubTypes.Subtitle:return this.getText(t.rawSubtitle,t.subtitle);case core.ElementSubTypes.Title:return this.getText(t.rawTitle,t.title);case core.ElementSubTypes.Button:return this.getButtonValueFromWizLink(t.button)}},e.prototype.getText=function(e,t){if(void 0===t&&(t=""),e){var i=this.richTextService.convertToValidHtml(this.removeLinks(e));this.log("richText, plaintext",t,t.length);var n=this.wizUtils.cleanRichText(i);if(this.log("richText, cleaned",n.length,n),this.shouldFallbackToPlainText(n,t))return this.log("richText, rich text too long, falling back to plain text"),t;var o=this.richTextService.markRichText(i);return this.log("richText, rich",i),o}return t},e.prototype.shouldFallbackToPlainText=function(e,t){return e.trim().split(/\s/).length>t.trim().split(/\s/).length},e.prototype.removeLinks=function(e){var t="(?:(?:\\s+[-_A-Za-z0-9]+(?:\\s*=\\s*(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?)*)",i=new RegExp("<a\\s*"+t+"(href\\s*=\\s*('|\")(?:(?!\\2).)+\\2)?"+t+">(.*?)</a>","gim");return e.replace(i,function(e,t,i,n){return n})},e.prototype.generateListContentElement=function(e,t){var i=this,o={self:{items:n.range(0,e.rawSectionBrief.cardinality).map(function(e){return{}}),header:{},footer:{}}},r={type:e.ceType,items:n.range(0,e.rawSectionBrief.cardinality).map(function(n){return i.generateSingleContentElement(e,e.data.contents.list[n],t.items[n%t.items.length],o.self.items[n],{self:o.self.items[n]},!0,e.ceType,n)}),header:this.generateSingleContentElement(this.createListSection(e,!0),e.data.contents.header,t.header,o.self.header,o,!1,e.ceType),footer:this.generateSingleContentElement(this.createListSection(e,!1),e.data.contents.footer,t.footer,o.self.footer,o,!1,e.ceType)},a=r.items[0],s=a.getArgsMatchingPolicy();return n.forEach(a.values,function(e,t){s[t]=n.some(r.items,function(e){return e.getArgsMatchingPolicy()[t]})}),n.forEach(r.items,function(e){e.setArgsMatchingPolicy(s)}),r},e.prototype.createListSection=function(e,t){var i=angular.copy(e);return t?(i.id+="_ListHeader",i.rawSectionBrief.id+="_ListHeader",i.rawSectionBrief.item=e.rawSectionBrief.header):(i.id+="_ListFooter",i.rawSectionBrief.id+="_ListFooter",i.rawSectionBrief.item=e.rawSectionBrief.footer),i},e.prototype.getURLFromWizLink=function(e){return e.url},e.prototype.getMediaFromWizMedia=function(e){var t=this.mediaByUrl[this.currentUrl];return t&&t.preparedMedia&&t.preparedMedia[e.src]?t.preparedMedia[e.src]:"video"===e.type?{Description:"",Title:"",Link:{},height:e.height,width:e.width,mediaType:"extVideo",videoUrl:e.src}:e.relativeUri?e:{Description:"",Title:"",fileName:"",height:200,mediaType:e.type,platform:"wizMedia",relativeUri:"//static.wixstatic.com/shapes/92535d40ff564d3a9f61477bcdceb206.svg",width:200}},e.prototype.getMediaFromWizMediaArray=function(e,t){var i=this;if(e){var o=e.sort(function(e,t){return t.background&&!e.background?1:!t.background&&e.background?-1:0}).map(function(e){return i.getMediaFromWizMedia(e)}).filter(function(e){return e});if(o.length){var r=n.groupBy(t,function(e){return e.mediaType}),a=n.groupBy(o,function(e){return e.mediaType}),s=[];return n.each(r,function(e,t){s.push.apply(s,a[t]||r[t])}),s}}},e.prototype.getButtonValueFromWizLink=function(e){return e?{callToAction:e.text||"",targetUrl:this.getURLFromWizLink(e),isPageRef:!1}:{callToAction:"",media:[],targetUrl:""}},e.prototype.getSectionsFromWizPage=function(e){return e.sections.filter(function(e){return"single"===e.type||"list"===e.type})},e.prototype.extractSectionSuggestionFromWizBlock=function(e){var t,i;switch(e.type){case"single":t=this.getSingleCEType(),i=1,this.numOfSectionsAdded++;break;case"list":var n=e.list.map?Math.min.apply(Math,e.list.map(function(e){return e.media?Math.min.apply(Math,e.media.map(function(e){return Math.min(e.realWidth,e.width)})):-1})):-1;t=this.getListCEType(n),i=e.list.length,this.numOfSectionsAdded++}var o=this.defaultSections.list.filter(function(e){return e.ceType===t})[0].id;return{ceType:t,id:o,isRecommendedForPage:!0,rawSectionBrief:{id:o,ceType:t,cardinality:i,item:{prefix:"",hidden:[[]],labels:{}},header:{prefix:"",hidden:[[]],labels:{}},footer:{prefix:"",hidden:[[]],labels:{}}},origin:"wiz",data:{type:"wizBlock",contents:e}}},e.prototype.getSingleCEType=function(){return 0===this.numOfSectionsAdded?"Welcome":"About"},e.prototype.getListCEType=function(e){return e>0&&e<this.siteConverterConf.SMALL_IMAGE_WIDTH_HIGH_BOUNDARY?"Client":"Service"},e.prototype.getWizMainPage=function(){return n.first(this.getWizSite().pages.filter(function(e){return"/"===e.path}))},e.prototype.getWizSite=function(){return this.wizWebsite.getSite()},e}();t.WizContentManager=o,angular.module("siteGeneratorContentManagerInternal").service("wizContentManager",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.sortOrder=["text","square","round6","round"]}return e.prototype.sort=function(e,t){var i=this.getPrefixIndex(e),n=this.getPrefixIndex(t);return i!==n?i-n:e>t?1:-1},e.prototype.getPrefixIndex=function(e){var t;for(t=0;t<this.sortOrder.length&&!e.startsWith(this.sortOrder[t]);t++);return t},e}();t.CatalogItemSorter=n,angular.module("siteGeneratorEditorInternal").service("catalogItemSorter",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o){this.flags=e,this.visualValidation=t,this.themeChooser=i,this.catalog=n,this.componentElementCreator=o}return e.$inject=["flags","visualValidation","themeChooser","catalog","componentElementCreator"],e.prototype.generate=function(e,t,i){var o=this.getDiv(e,t),r=angular.element(this.visualValidation.innerChild(o[0]));r.html(n.htmlEncode(i));var a={"box-sizing":"border-box",position:"static","line-height":"32px"};return o.css(Object.assign({height:"32px",width:"90px",display:"flex","justify-content":"center","align-items":"center"},a)),r.css(Object.assign({"font-size":"10px",width:"auto",display:"block",webkitFontSmoothing:"auto"},a)),o},e.prototype.getDiv=function(e,t){var i=angular.element("<div />");angular.element("<span></span>").appendTo(i);var n=this.catalog[e][t];return this.componentElementCreator.applyBorder(n,i),this.componentElementCreator.applyRadius(n,i),this.componentElementCreator.applyBoxShadow(n,i),i.css("font",this.getFontStyle()),"1"===n.properties["alpha-bg"]&&i.css("backgroundColor","#000000"),"1"===n.properties["alpha-brd"]&&i.css("borderColor","#000000"),"color_11"===n.properties.txt&&i.css("color","#ffffff"),i},e.prototype.getFontStyle=function(){var e=this.themeChooser.getActiveFontTheme().kitFonts.BTN.font;return this.themeChooser.getFontStyle(e).replace(/\+/g," ")},e}();t.CatalogPreviewGenerator=o,angular.module("siteGeneratorEditorInternal").service("catalogPreviewGenerator",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=i(0),r=function(){function e(e,t,i,r){var a=this;this.onstageActionsManager=e,this.ONSTAGE_EVENTS=t,this.cabbie=i,this.flags=r,this.onstageActionKeyToCatalogType={button:"buttons","Contact form email":"contactForms"},this.onstageActionsManager.subscribe(this.ONSTAGE_EVENTS.EDIT_COMPONENT_STYLE,function(e){var t=e.data,i=e.node,r=t.type,s=a.onstageActionKeyToCatalogType[r];a.cabbie.show({target:'[data-overlay-id="'+i.id+"-"+r+'"]',element:"catalog-styles-dialog",attributes:{catalogType:s,text:(a.flags.lodash4?o.upperFirst:o.capitalize)(r),nodeId:i.id},hideAttribute:"onSelect",position:{positionX:n.AssistantPositionX.Left,positionY:n.AssistantPositionY.Center}})})}return e.$inject=["onstageActionsManager","ONSTAGE_EVENTS","cabbie","flags"],e}();t.CatalogStylesManager=r,angular.module("siteGeneratorEditorInternal").service("catalogStylesManager",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(15),o=function(){function e(e,t,i,n,o,r){this.mediaOverrideManager=e,this.mediaGalleryAdapter=t,this.mediaOrganizeAdapter=i,this.consumerBiLogger=n,this.$translate=o,this.videoProvidersUtils=r}return e.$inject=["mediaOverrideManager","mediaGalleryAdapter","mediaOrganizeAdapter","consumerBiLogger","$translate","videoProvidersUtils"],e.prototype.getChangeMediaMethod=function(e,t){var i=this.mediaOverrideManager.getAllowedMediaOverride(e)===n.PresetMediaTypes.COAST2COAST;switch(t){case cc.MediaPreviewType.SingleImage:return this.mediaGalleryAdapter.selectImage.bind(this.mediaGalleryAdapter,i);case cc.MediaPreviewType.MultipleImages:return this.mediaOrganizeAdapter.selectGallery.bind(this.mediaOrganizeAdapter);case cc.MediaPreviewType.ExtVideo:return this.mediaOrganizeAdapter.selectExtVideo.bind(this.mediaOrganizeAdapter);case cc.MediaPreviewType.Video:return this.mediaGalleryAdapter.selectVideo.bind(this.mediaGalleryAdapter);case cc.MediaPreviewType.Shape:return this.mediaGalleryAdapter.selectShape.bind(this.mediaGalleryAdapter);case cc.MediaPreviewType.Clipart:return this.mediaGalleryAdapter.selectClipart.bind(this.mediaGalleryAdapter)}},e.prototype.biSwitchMediaTypeClick=function(e,t){this.consumerBiLogger.contentEditor.switchMediaTypeClick(e.getId(),e.getSpecificContentElementType(),e.alias,this.mediaTypeToString(t))},e.prototype.biReplaceMediaClick=function(e,t){this.consumerBiLogger.contentEditor.clickOnReplaceOrganizeMedia(e.getId(),e.getSpecificContentElementType(),e.alias,this.mediaTypeToString(t))},e.prototype.biCheckIfReplaceLogoClick=function(e,t){"Header"===e.getSpecificContentElementType()&&this.consumerBiLogger.intro.clickOnReplaceLogoIntroWelcometourBuilder("no-tour",t)},e.prototype.biReplaceMediaLoaded=function(e,t,i){this.consumerBiLogger.contentEditor.replaceMediaWindowIsLoaded(e.getId(),e.getSpecificContentElementType(),e.alias,this.mediaTypeToString(t),this.mediaTypeToGalleryType(t),i,null)},e.prototype.biReplaceMediaClosed=function(e,t,i){this.consumerBiLogger.contentEditor.closeMediaWindow(e.getId(),e.getContentElementType(),e.alias,this.mediaTypeToString(t),this.mediaTypeToGalleryType(t),i)},e.prototype.biReplaceMediaApproved=function(e,t,i,n){this.consumerBiLogger.contentEditor.approveChangesInTheMediaWindow(n,e.getId(),e.getContentElementType(),e.alias,this.mediaTypeToString(t),this.mediaTypeToGalleryType(t),i)},e.prototype.mediaTypeToString=function(e){switch(e){case cc.MediaPreviewType.SingleImage:case cc.MediaPreviewType.MultipleImages:return"image";case cc.MediaPreviewType.ExtVideo:return"extVideo";case cc.MediaPreviewType.Shape:return"shape";case cc.MediaPreviewType.Clipart:return"clipart";case cc.MediaPreviewType.Video:return"bgVideo";default:return"unknown_type"}},e.prototype.mediaTypeToGalleryType=function(e){switch(e){case cc.MediaPreviewType.SingleImage:case cc.MediaPreviewType.Shape:case cc.MediaPreviewType.Clipart:case cc.MediaPreviewType.Video:return"single item";case cc.MediaPreviewType.MultipleImages:return"gallery";case cc.MediaPreviewType.ExtVideo:return"external video"}return null},e.prototype.mediaTypeToLabel=function(e){switch(e){case cc.MediaPreviewType.SingleImage:return this.$translate.instant("editor.media-settings.types.image");case cc.MediaPreviewType.Shape:case cc.MediaPreviewType.Clipart:return this.$translate.instant("editor.media-settings.types.shape");case cc.MediaPreviewType.ExtVideo:case cc.MediaPreviewType.Video:return this.$translate.instant("editor.media-settings.types.video");case cc.MediaPreviewType.MultipleImages:return this.$translate.instant("editor.media-settings.types.gallery")}},e.prototype.isVideo=function(e){return e===cc.MediaPreviewType.Video||e===cc.MediaPreviewType.ExtVideo||e===core.MediaItemTypes.ExtVideo||e===core.MediaItemTypes.Video},e.prototype.addExtVideoThumbnail=function(e){if(e.mediaType===core.MediaItemTypes.ExtVideo&&!e.thumbnailUrl){var t=this.videoProvidersUtils.getVideoThumbnailUrl(e.videoUrl,e);t.then?t.then(function(t){e.thumbnailUrl=t}):e.thumbnailUrl=t}},e}();t.ConsumerMediaUtils=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("consumerMediaUtils",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n){this.simpleSolutionManager=e,this.modelTree=t,this.userOverrides=i,this.designKit=n,this.patterns=[{bg:"D1",containers:["D2","D3"]},{bg:"D1",containers:["L1","D3"]},{bg:"D1",containers:["D2","L3"]},{bg:"D1",containers:["L1","L3"]},{bg:"D1",containers:["D3","L3"]},{bg:"L1",containers:["D1","D3"]},{bg:"L1",containers:["L2","D3"]},{bg:"L1",containers:["D1","L3"]},{bg:"L1",containers:["L2","L3"]},{bg:"L1",containers:["D3","L3"]},{bg:"D1",containers:["D2","D3","L3"]},{bg:"D1",containers:["L1","D3","L3"]},{bg:"L1",containers:["D1","D3","L3"]},{bg:"L1",containers:["L2","D3","L3"]}]}return e.$inject=["simpleSolutionManager","modelTree","userOverrides","designKit"],e.prototype.isListWithColorBox=function(e){if(!e.isList())return!1;var t=this.simpleSolutionManager.getSectionSolution(e.containerPageId,e.getId()).find(function(e){return!e.isListHeader()}).segments[0];return t.hasColumnWithColorBackground()||t.hasDecorativeContainerLayout()},e.prototype.getApplicablePatterns=function(e,t){var i=this.modelTree.getListItems(e).filter(function(e){return!e.userHidden});return this.patterns.filter(function(e){return e.bg===t&&e.containers.length<=i.length})},e.prototype.getPatternSignature=function(e){return"Pattern:"+e.bg+"$"+e.containers.join(",")},e.prototype.applyPattern=function(e,t,i){var o=this;n(e).map(function(e){return e.segments}).flatten().value().filter(function(e){return e.getSegmentNode().isListItemBody()}).forEach(function(e,n){var r=e.getSegmentNode();if(!i||r===i){var a=t.containers[n%t.containers.length];o.userOverrides.setFieldColorOverride(r,"box",a);var s=o.designKit.isDarkColorWithNewColoration(a)?"L1":"D1",l=e.getLE(),c=e.hasColumnWithColorBackground();l.layoutArray.forEach(function(e){l.isTextOrButtonField(e)&&(e.boxParentOverrideKey||void 0===e.onMediaIndex&&c)&&o.userOverrides.setFieldColorOverride(r,e.subType,s)})}})},e.prototype.detectPattern=function(e){var t=this,i=n.get(e,"[0].segments[0]"),o=i&&this.modelTree.findIdentifyingNode(i.getSegmentNode());if(o&&this.isListWithColorBox(o)){var r=this.designKit.getConfigurationOfLg(e.find(function(e){return!e.isListHeader()})).display,a=this.getApplicablePatterns(o,r);if(a&&a.length){var s=n(e).filter(function(e){return!e.isListHeader()&&!e.isListFooter()}).map(function(e){return e.segments}).flatten().map(function(e){return t.userOverrides.getFieldColorOverride(e.getSegmentNode(),"box")}).value();if(!s.some(function(e){return!e}))return a.find(function(e){return s.every(function(t,i){return t===e.containers[i%e.containers.length]})})}}},e}();t.ColorationPattern=o,angular.module("siteGeneratorBuilderInternal").service("colorationPattern",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(17),r=i(15),a=i(1),s=i(0),l=function(){function e(e,t,i,r,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C){var A=this;this.$rootScope=e,this.modelTree=t,this.applicationState=i,this.contentManager=r,this.consumerBiLogger=s,this.mediaOverrideManager=l,this.createGuid=c,this.flags=d,this.nodeFetcher=u,this.$timeout=p,this.onstageActionsManager=g,this.layoutSelectionStoreProvider=h,this.ONSTAGE_EVENTS=m,this.editorEventManager=f,this.nodeEditorManager=v,this.linkEditorCAB=S,this.fieldEditorConfiguration=y,this.SmartAssistManager=T,this.$injector=b,this.sectionMediaSetter=I,this.modelTreeHelpers=P,this.smartAssistHelpers=M,this.sitePartTypes=E,this.$translate=w,this.sectionMedia=C,this.referenceFieldsMap={},this.nodeFieldsMap={},this.resetFocus=function(e){var t=e||A.nodeFetcher.getCorrectNodeId(A.applicationState.getContentFocus()),i=A.nodeFetcher.getNode(t);if(i){var n=i.node,o=A.extractFieldsFromNode(n).find(function(e){return e.focused});o&&(o.focused=null)}},f.nodeChangedOnFieldChanged(this.createEditEvent.bind(this)),f.onNodeChanged(function(e){A.nodeEditorManager.updateViewer(e)}),this.resetMaps(),g.subscribe(this.ONSTAGE_EVENTS.EDIT_CONTENT,function(e){var t=A.getFields(e.contentElement,A.nodeFetcher.getCurrentActiveNode());t.forEach(function(e){return e.focused=!1}),A.$timeout(function(){t.forEach(function(t){return t.focused=t===e}),n.PubSub.fire(n.events.BLINK_FIELD,e)})}),g.subscribe(this.ONSTAGE_EVENTS.HIDE,function(e){A.toggleField(e,A.nodeFetcher.getCurrentActiveNode(),a.BIOrigins.OSI)}),g.subscribe(this.ONSTAGE_EVENTS.LINK_TO,function(e){A.onLinkItemEdit(e,A.nodeFetcher.getCurrentActiveNode(),a.BIOrigins.OSI)}),this.flags.sectionTextSplitParagraph&&g.subscribe(this.ONSTAGE_EVENTS.TOGGLE_PARAGRAPH_COLUMNS,function(e){f.fieldChanged(e,!0,o.IEditEventType.ParagraphColumnsToggle,a.BIOrigins.OSI)}),g.subscribe(this.ONSTAGE_EVENTS.SET_MAP_STYLE,function(e){var t=g.getSegment(),i=A.layoutSelectionStoreProvider.getLayoutSelectionStore(),n=i.getMapStyleOverride(t,e.data.subType),r=e.actionData.name;r!==n&&(i.setMapStyleOverride(t,e.data.subType,r),f.fieldChanged(e,!1,o.IEditEventType.SetMapStyle,a.BIOrigins.OSI,e.actionData))}),n.PubSub.subscribe(n.events.SWITCH_MODE,this.resetMaps.bind(this)),n.PubSub.subscribe(n.events.NEW_STATE_STORY_WAS_SET,this.resetMaps.bind(this))}return e.$inject=["$rootScope","modelTree","applicationState","contentManager","consumerBiLogger","mediaOverrideManager","createGuid","flags","nodeFetcher","$timeout","onstageActionsManager","layoutSelectionStoreProvider","ONSTAGE_EVENTS","editorEventManager","nodeEditorManager","linkEditorCAB","fieldEditorConfiguration","SmartAssistManager","$injector","sectionMediaSetter","modelTreeHelpers","smartAssistHelpers","sitePartTypes","$translate","sectionMedia"],e.prototype.resetMaps=function(){this.referenceFieldsMap={},this.nodeFieldsMap={}},e.prototype.extractFieldsFromNode=function(e){var t=this;return(e.isList()?e.children:[e]).reduce(function(e,i){return e.concat(t.getFields(i.contentElement,i))},[])},e.prototype.getFields=function(e,t){return this.getNodeFields(e,t).concat(this.getReferencedFields(e,t))},e.prototype.onLinkItemEdit=function(e,t,i){var r=this,a={linkDetails:e.data.value,node:t,biSource:"button"};return this.linkEditorCAB.show(a).then(function(a){e.data.value=a,r.editorEventManager.fieldChanged(e,!1,o.IEditEventType.ValueChange,i),r.flags.newButtonControl||r.flags.twoButtonSection||(e.data.linkAsILink=r.fieldEditorConfiguration.getILink(e.data)),n.PubSub.fire(n.events.LINK_OF_FIELD_UPDATED,t)})},e.prototype.onLinkItemEditNew=function(e,t,i,r){var a=this;void 0===r&&(r=0);var s={linkDetails:this.getLinkDetailsFromField(e,r),node:t,biSource:"button"};return this.linkEditorCAB.show(s).then(function(s){e=a.updateLinkDetailsInField(e,s,r),a.editorEventManager.fieldChanged(e,!1,o.IEditEventType.ValueChange,i),n.PubSub.fire(n.events.LINK_OF_FIELD_UPDATED,t)})},e.prototype.getLinkDetailsFromField=function(e,t){var i=e.data.value;return t>0&&i.extraButtons&&(i=i.extraButtons[t-1]),i},e.prototype.updateLinkDetailsInField=function(e,t,i){void 0===i&&(i=0);var n=e.data;return 0===i?n.value=t:i>0&&n.value.extraButtons&&(n.value.extraButtons[i-1]=t),e},e.prototype.toggleField=function(e,t,i){try{var r=!e.active;if(this.consumerBiLogger.contentEditor.clickOnHideUnhideComponent(t.getId(),t.getSpecificContentElementType(),t.alias,e.key,e.data.subType,r?"unhide":"hide",i),this.flags.sectionMedia&&this.nodeEditorManager.isMediaField(e)&&!this.applicationState.isInMobileEditMode()){var a=this.getNodeToToggle(t);this.sectionMediaSetter.toggle(a,!1)}else e.active=r,this.editorEventManager.fieldChanged(e,!0,o.IEditEventType.VisibilityChange,i);n.PubSub.fire(n.events.FIELD_TOGGLED,{field:e,node:t})}catch(i){throw console.error("can't toggle field:",e,t),i}},e.prototype.getNodeToToggle=function(e){return this.modelTreeHelpers.isItemOfList(e)?e:(e.isList()&&this.modelTree.getListHeader(e),e)},e.prototype.createEditEvent=function(e){try{var t=e.contentElementField.contentElement,i=this.nodeFetcher.getCurrentNode(),n=e.extraData&&e.extraData.node||this.nodeFetcher.getNodeByContentElement(i,t),o=this.getReferencedFields(n.contentElement,n),r=o&&s.findIndex(o,{key:e.key});return s.assign(e,{node:n,parent:null,isReferencedField:o&&-1!==r})}catch(t){throw console.error("createEditEvent: '"+t+"' for "+e),t}},e.prototype.defineVisibleProperty=function(e,t,i,n){this.applicationState.isInDesktopEditMode()?i.visible=!0:i.visible=n?this.isReferencedFieldActive(e,t):this.isFieldActive(e,t)},e.prototype.defineActiveProperty=function(e,t,i,n){var o=this;this.applicationState.isInMobileEditMode()?Object.defineProperty(n,"active",{get:function(){return!o.isFieldHiddenMobile(t,i)},set:function(e){t.getMobileArgsPolicy()[i]=!e},enumerable:!0,configurable:!0}):Object.defineProperty(n,"active",{get:function(){return o.isFieldActive(t,i)},set:function(e){t.getArgsMatchingPolicy()[i]=e,e||o.makeSureMobileHasAtLeastOneVisibleField(t,e)},enumerable:!0,configurable:!0})},e.prototype.makeSureMobileHasAtLeastOneVisibleField=function(e,t){var i=e.getArgsMatchingPolicy();if(!e.calculateWantedArgs(!0,!0).length){var n=e.getMobileArgsPolicy();if(!this.exposeMobileHiddenField(n,i)){var o=e.getReferenceFields(),r=e.getMobileReferenceFields();this.exposeMobileHiddenField(r,o)}}},e.prototype.exposeMobileHiddenField=function(e,t){return s.some(e,function(i,n){if(t[n]&&e[n])return e[n]=!1,!0})},e.prototype.defineActiveReferenceProperty=function(e,t,i,n){var o=this;this.applicationState.isInMobileEditMode()?Object.defineProperty(n,"active",{get:function(){return!o.isReferencedFieldHiddenMobile(t,i)},set:function(e){t.getMobileReferenceFields()[i]=!e}}):Object.defineProperty(n,"active",{get:function(){return o.isReferencedFieldActive(t,i)},set:function(e){t.getReferenceFields()[i]=e,e||o.makeSureMobileHasAtLeastOneVisibleField(t,e)}})},e.prototype.getNodeAndReferencedFields=function(e,t){return this.getNodeFields(e,t).concat(this.getReferencedFields(e,t))},e.prototype.getNodeFields=function(e,t,i){return void 0===i&&(i=!0),e&&e.values&&t?(s.isUndefined(e.id)&&(e.id=this.createGuid()),this.nodeFieldsMap[e.id]||(n=this.generateNodeFields(e,t,i).sort(function(t,i){return e.sortFields(t.key)-e.sortFields(i.key)}),this.nodeFieldsMap[e.id]=n),this.nodeFieldsMap[e.id]):[];var n},e.prototype.generateNodeFields=function(e,t,i){var n=this;void 0===i&&(i=!0);var o=this.getSupportedMediaType(t),r=t&&t.alias,a=this.getRelevantFields(e,t);return s.map(a,function(a,s){var l=t&&t.getContentElementType?t.getContentElementType():e.type,c=i?n.calculateSuggestedContent(r||l,l,a.subType,o):[],d={key:s,data:a,contentElement:e,suggestedContent:c};return n.defineActiveProperty(t,e,s,d),n.defineVisibleProperty(e,s,d,!1),d})},e.prototype.getReferencedFields=function(e,t){if(!e||!e.type||!t)return[];var i=[];return s.isUndefined(e.id)&&(e.id=this.createGuid()),this.referenceFieldsMap[e.id]||(i=this.generateReferenceFields(e,t),this.referenceFieldsMap[e.id]=i),this.referenceFieldsMap[e.id]},e.prototype.generateReferenceFields=function(e,t){var i=this,n=[],o=this.modelTree.getAllVisibleContentElements(),r=this.getContentElementReferencedFields(e,t);return s.keys(r).forEach(function(a){var l=s.find(o,{type:a});if(l){var c=s.map(r[a],function(n){var o=a+"."+n,r=l.values[n];if(r){var s={key:o,data:r,contentElement:e};return i.defineVisibleProperty(e,o,s,!0),i.defineActiveReferenceProperty(t,e,o,s),s}});n.push.apply(n,c)}}),n},e.prototype.getRelevantFields=function(e,t){var i=[];return"GeneralDescription"===e.type?(i=this.isFooter(t)?["BusinessTagline","Logo","Menu","button","Login"]:["CopyrightMessage","fax","address for display","Subscribe"],this.flags.membersArea&&e.values.Login.value.hasMembersArea||i.push("Login")):"Testimonial"===e.type?i=["CustomerPosition"]:"Contact"===e.type?i=["Contact form title"]:"ListFooter"===e.type&&i.push("ListImage"),this.applicationState.isInMobileEditMode()&&i.push("Menu"),s.omit(e.values,i)},e.prototype.getSupportedMediaType=function(e){if(null===e)return"";var t=this.mediaOverrideManager.getAllowedMediaOverride(e);return t===r.PresetMediaTypes.SHAPE?"shape":t===r.PresetMediaTypes.IMAGE?"image":null},e.prototype.getHeaderReferencedFields=function(){return{Contact:["phone number"],Social:["SocialButtons"]}},e.prototype.getFooterReferencedFields=function(){return{Contact:["phone number","fax","address for display"],Social:["SocialButtons"]}},e.prototype.getContactReferencedFields=function(){return{Social:["SocialButtons"]}},e.prototype.getContentElementReferencedFields=function(e,t){return"Contact"===e.type?this.getContactReferencedFields():"GeneralDescription"===e.type?this.isFooter(t)?this.getFooterReferencedFields():this.getHeaderReferencedFields():{}},e.prototype.isFooter=function(e){return"footer"===e.containerPageId},e.prototype.isFieldActive=function(e,t){return null===e.getArgsMatchingPolicy||!!e.getArgsMatchingPolicy()[t]},e.prototype.isFieldHiddenMobile=function(e,t){return null!==e.getMobileArgsPolicy&&e.getMobileArgsPolicy()[t]},e.prototype.isReferencedFieldActive=function(e,t){var i=e.getReferenceFields();return null!==i&&t in i&&i[t]},e.prototype.isReferencedFieldHiddenMobile=function(e,t){var i=e.getMobileReferenceFields();return null!==i&&t in i&&i[t]},e.prototype.calculateSuggestedContent=function(e,t,i,n){if(!("Service"===t||"FAQ"===t||"Feature"===t||"Client"===t)||i!==core.ElementSubTypes.Title)return[];var o="Feature"===t||"Client"===t,r=this.contentManager.contentOptions(e,i,"",o),a=this.enforceSupportedMediaType(r,n);if(0===a.options.length&&e!==t){var s=this.contentManager.contentOptions(t,i,"",o);return this.enforceSupportedMediaType(s,n).options}return a.options},e.prototype.enforceSupportedMediaType=function(e,t){if(0===e.length)return{options:[],hasMedia:!1};var i=!1;return s.has(e[0],"media")&&(e=s.map(e,function(e){return e.media.mediaType===t?e:e.text}),i=!0),{options:e,hasMedia:i}},e.prototype.isEveryHeaderFieldHidden=function(e){if(e.sitePart===this.sitePartTypes.HEADER){var t=e.node;return 0===this.getNodeAndReferencedFields(t.contentElement,t).filter(function(e){return e.visible}).length}},e}();t.ContentElementFieldManager=l,angular.module("siteGeneratorEditorInternal").service("contentElementFieldManager",l)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a,s,l,c){this.$q=e,this.$rootScope=t,this.$compile=i,this.$log=n,this.modelTree=o,this.pagesManager=r,this.$translate=a,this.validation=s,this.flags=l,this.clientTopology=c}return e.$inject=["$q","$rootScope","$compile","$log","modelTree","pagesManager","$translate","validation","flags","clientTopology"],e.prototype.getLinkDetailsHandler=function(){var e=this;return{editLinkCallback:function(t,i){return e.getEditLinkCallback(t,i)},linkDetailsToILink:function(t){return e.generateILink(t)}}},e.prototype.getEditLinkCallback=function(e,t){var i=this,o=n.assign(this.$rootScope.$new(),{value:t});return this.$compile('<link-details value="value"></link-details>')(o).appendTo(angular.element(e)),{save:function(){var e=i.$q.defer();return o.$broadcast("linkDetails.save",e),e.promise.then(function(e){return i.$log.log(e),e})}}},e.prototype.getAnchorType=function(e){return"page-anchor"===e.type?"page":"anchor"},e.prototype.ensureHttpPrefix=function(e){return!e||/^(http):\/\//i.test(e)||-1!=="http://".indexOf(e)||/^(https):\/\//i.test(e)||-1!=="https://".indexOf(e)?e:"http://"+e},e.prototype.convertLinkDetailsToStateWeb=function(e,t){return e.isPageRef=!1,e.targetUrl=this.ensureHttpPrefix(t),this.validation.isUrl(t)?(delete e.paypal,delete e.link,delete e.targetPage,delete e.targetEmail,delete e.targetPhone,this.$q.when(e)):this.$q.reject("linkDetailsManager: invalid url")},e.prototype.convertLinkDetailsToStateEmail=function(e,t){return e.isPageRef=!1,e.targetEmail=t,this.validation.isEmail(t)?(delete e.link,delete e.targetPage,delete e.targetUrl,delete e.targetPhone,delete e.paypal,this.$q.when(e)):this.$q.reject("linkDetailsManager: invalid email")},e.prototype.convertLinkDetailsToStatePhone=function(e,t){return e.isPageRef=!1,e.targetPhone=t,this.validation.isPhone(t)?(delete e.paypal,delete e.link,delete e.targetPage,delete e.targetUrl,delete e.targetEmail,this.$q.when(e)):this.$q.reject("linkDetailsManager: invalid phone number")},e.prototype.cleanBusinessName=function(e){var t=$("<div />").html(e).children();return t.length>0?t.text():e},e.prototype.convertLinkDetailsToPaypal=function(e,t){return e.isPageRef=!1,e.paypal=t,this.validation.isEmail(t.email)?(e.paypal.name=this.cleanBusinessName(e.paypal.name),delete e.link,delete e.targetPage,delete e.targetUrl,delete e.targetEmail,delete e.targetPhone,this.$q.when(e)):this.$q.reject("linkDetailsManager: invalid business email")},e.prototype.convertLinkDetailsToStateNone=function(e){return delete e.isPageRef,delete e.link,delete e.targetPage,delete e.targetUrl,delete e.targetEmail,delete e.targetPhone,delete e.paypal,this.$q.when(e)},e.prototype.convertLinkDetailsToStatePage=function(e,t){return delete e.targetUrl,delete e.targetEmail,delete e.targetPhone,delete e.paypal,this.setPageLink(e,t),this.$q.when(e)},e.prototype.convertLinkDetailsToStateDocument=function(e){return e.file?(e.isPageRef=!1,e.file={id:e.file.id,url:e.file.fileUrl,name:e.file.title},e.targetUrl=this.getTargetUrlForDocument(e.file),delete e.paypal,this.$q.when(e)):this.convertLinkDetailsToStateNone(e)},e.prototype.setPageLink=function(e,t){var i=this.getAnchorType(t);e.isPageRef=!0,"page"===i?(delete e.link,e.targetPage=t.id):"anchor"===i&&(e.link=this.addAnchor(t),delete e.targetPage)},e.prototype.getTargetUrlForDocument=function(e){return this.clientTopology.filesBaseUrl+e.url},e.prototype.getAnchorId=function(e){return"anchor"===this.getAnchorType(e)?e.getId():e.id},e.prototype.resolveTargetPage=function(e){return this.isPage(e)?e.targetPage||e.link.targetPage:this.isWeb(e)?e.targetUrl:""},e.prototype.resolveLinkToType=function(e){if(this.isNone(e))return"none";if(this.isPhone(e))return"phone";if(this.isEmail(e))return"email";if(this.isPage(e))return"page";if(this.isWeb(e))return"web";if(this.isDocument(e))return"document";if(this.isPaypal(e))return"paypal";throw new Error("linkTo type unknown")},e.prototype.isNone=function(e){return!(e.hasOwnProperty("isPageRef")||e.hasOwnProperty("link")||e.hasOwnProperty("targetPage")||e.hasOwnProperty("targetUrl")||e.hasOwnProperty("targetEmail")||e.hasOwnProperty("targetPhone"))},e.prototype.isDocument=function(e){return!!e.file},e.prototype.isPage=function(e){return!0===e.isPageRef},e.prototype.isWeb=function(e){return!1===e.isPageRef&&!e.file&&e.targetUrl},e.prototype.isPaypal=function(e){return!!e.paypal},e.prototype.isEmail=function(e){return!e.file&&e.targetEmail},e.prototype.isPhone=function(e){return!e.file&&e.targetPhone},e.prototype.getPages=function(){var e=this.modelTree.getPagesNodes();return n.filter(e,function(e){return!e.userHidden})},e.prototype.getMainPages=function(){var e=this.modelTree.getPagesNodes(),t=[];return n.filter(e,function(e){if(e.userHidden)return!1;var i=-1!==t.indexOf(e.alias);return i||t.push(e.alias),!i})},e.prototype.isLinkBroken=function(e){if(!this.isPage(e))return!1;var t=e.link&&e.link.nodeId||e.targetPage,i=e.link&&e.link.targetPage||e.targetPage;return!this.findNodeByIdInPage(t,i)},e.prototype.findNodeByIdInPage=function(e,t){var i;if(i="string"==typeof t?this.modelTree.findPageNodeByName(t):t)return e===i.getId()?i:i.children.find(function(t){return e===t.getId()})},e.prototype.findNodeById=function(e){var t,i=this;return this.getPages().forEach(function(n){if(t)return!1;t=i.findNodeByIdInPage(e,n)}),t},e.prototype.linkDetailsToString=function(e){return e&&e.hasOwnProperty("isPageRef")?this.isLinkBroken(e)?null:this.isDocument(e)?e.file.name:this.isWeb(e)?e.targetUrl:this.isEmail(e)?e.targetEmail:this.isPhone(e)?e.targetPhone:this.isPaypal(e)?this.$translate.instant("link-details.paypal.label"):e.targetPage?this.modelTree.getPageById(e.targetPage):this.isAnchorLink(e)?e.link.anchorName:null:null},e.prototype.isLinked=function(e){return!!this.linkDetailsToString(e)},e.prototype.getLinkfromNode=function(e){return n.get(e,"contentElement.values.button.value")},e.prototype.isAnchorLink=function(e){return!!n.get(e,"link")},e.prototype.updateLinkDetailsOnPageMove=function(e,t){var i=this,n=t.getId(),o=e.getId();this.modelTree.traverse(function(t){var r=i.getLinkfromNode(t);if(r&&r.isPageRef)if(i.isAnchorLink(r)){var a=r.link;a.targetPage===n&&a.nodeId===o&&(r.link=i.generateAnchorLink(e),i.modelTree.markPageNodeAsDirty(t))}else r.targetPage===n&&(r.targetPage=e.containerPageId,i.modelTree.markPageNodeAsDirty(t))},!1)},e.prototype.generateILink=function(e){var t=this.linkDetailsToString(e);return{value:t||this.$translate.instant("general.no-link"),state:!!t}},e.prototype.generateAnchorLink=function(e){var t=this.pagesManager.getAnchorLinkObj(e);return{nodeId:e.getId(),targetPage:e.containerPageId,type:t.type,anchorName:this.modelTree.getAnchorName(e)}},e.prototype.addAnchor=function(e){return this.pagesManager.addAnchorLink(e),this.generateAnchorLink(e)},e.prototype.targetUrlIsDocument=function(e){return n(e).includes(this.clientTopology.filesBaseUrl)},e.prototype.getBusinessNameAndEmail=function(){var t=this.modelTree.getGeneralInformation().contentElement.values,i=t.BusinessName,n=t.MainEmail;return{name:i.value||e.DEFAULT_BUSINESS_NAME,email:n.value||e.DEFAULT_MAIN_EMAIL}},e.DEFAULT_BUSINESS_NAME="My Site",e.DEFAULT_MAIN_EMAIL="info@mysite.com",e}();t.LinkDetailsManager=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("linkDetailsManager",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p){this.modelTree=e,this.undoRedo=t,this.flags=i,this.userOverrides=n,this.storyServices=o,this.designKit=r,this.selections=a,this.nodeFetcher=s,this.simpleSolutionManager=l,this.notification=c,this.consumerBiLogger=d,this.componentStyles=u,this.solutionStatusCodes=p}return e.$inject=["modelTree","undoRedo","flags","userOverrides","storyServices","designKit","selections","nodeFetcher","simpleSolutionManager","notification","consumerBiLogger","componentStyles","solutionStatusCodes"],e.prototype.resetListItemOverrideColor=function(e,t){var i=this;this.userOverrides.resetFieldColorOverride(e),this.storyServices.reRender(this.nodeFetcher.getNodeSitePart(e)).then(function(){return i.undoRedo.captureOperation()}).then(function(){return i.consumerBiLogger.contentEditor.resetContentColorSuccess(t,e.getId(),e.alias,e.getSpecificContentElementType())}).then(function(){i.flags.disableUndoRedo?i.notification.show("toasters.list-item.reset"):i.notification.show("toasters.list-item.reset","general.undo",function(){return i.undoRedo.undo()})})},e.prototype.applyColorListItemOverrides=function(e){var t=this;this.userOverrides.applyColorListItemOverrides(e),this.storyServices.reRender(this.nodeFetcher.getNodeSitePart(e)).then(function(){return t.undoRedo.captureOperation()}).then(function(){t.flags.disableUndoRedo?t.notification.show("toasters.list-item.apply-to-all"):t.notification.show("toasters.list-item.apply-to-all","general.undo",function(){return t.undoRedo.undo()})})},e.prototype.isListItemsIdentical=function(e){var t=this,i=e.getLE();if(!i||i.solutionStatus!==this.solutionStatusCodes.pass)return!0;var o=this.modelTree.findIdentifyingNode(e.findIdentifyingNode()),r=this.simpleSolutionManager.getSectionSolution(o.containerPageId,o.id),a=n(r).map(function(e){return e.segments}).flatten().filter(function(t){return t.node.isListItemBody()&&e!==t}).value(),s=n(i.layoutArray).filter(function(e){return i.isTextOrButtonField(e)||i.isDecorativeContainerLayout(e)}).map(function(e){return{type:e.type,subType:(e.subType||e.type)+t.componentStyles.getDecorationUniqueID(e)}}).value();e.hasColumnWithColorBackground()&&s.push({type:"container",subType:"columnBg"});var l=s.map(function(n){return t.getFieldColor(e,i,n.type,n.subType)});return!a.some(function(e){var i=s.map(function(i){return t.getFieldColor(e,e.getLE(),i.type,i.subType)});return!(t.flags.lodash4?n.isEqual:n.eq)(i,l)})},e.prototype.isFillButton=function(e){return e.type===core.ElementTypes.Button&&this.designKit.isButtonWithBg(e.style)},e.prototype.getFieldColor=function(e,t,i,n){var o=this.userOverrides.getFieldColorOverride(e.getSegmentNode(),n);return o||(o="text"===i?this.designKit.santaToKitFormat(this.designKit.getColorByField(n,e,t)):"button"===i?this.designKit.santaToKitFormat(this.designKit.getComponentCustomColor(e,"buttonbg")):this.designKit.santaToKitFormat(this.designKit.getComponentCustomColor(e,n))),o},e.prototype.isSegmentReadable=function(e){var t=this,i=e.getLENoError();return!i||i.solutionStatus!==this.solutionStatusCodes.pass||!i.layoutArray.some(function(n){if(i.isTextOrButtonField(n)&&!t.isFillButton(n)){var o=t.getFieldColor(e,i,n.type,n.subType),r=t.designKit.getColorOfFirstBackground(i,n,!0);return!t.designKit.isContrastValid(r,o)}return!1})},e}();t.SectionColors=o,angular.module("siteGeneratorBuilderInternal").service("sectionColors",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n){this.linkDetailsManager=e,this.applicationState=t,this.flags=i,this.nodeTitleManager=n}return e.$inject=["linkDetailsManager","applicationState","flags","nodeTitleManager"],e.prototype.isTextType=function(e){return"text"===e.type},e.prototype.isTextSubType=function(e){return e.subType===core.ElementSubTypes.Text||e.subType===core.ElementSubTypes.Title||e.subType===core.ElementSubTypes.Subtitle||e.subType===core.ElementSubTypes.LongText||e.subType===core.ElementSubTypes.Address||e.subType===core.ElementSubTypes.Email||e.subType===core.ElementSubTypes.Copyright||e.subType===core.ElementSubTypes.Phone||e.subType===core.ElementSubTypes.Fax||e.subType===core.ElementSubTypes.Map||e.subType===core.ElementSubTypes.ContactFormTitle},e.prototype.isMobile=function(){return this.applicationState.isInMobileEditMode()},e.prototype.isTextInput=function(e){return this.isMobile()?this.isTextType(e)&&this.isTextSubType(e)||this.isButton(e):this.isTextType(e)&&this.isTextSubType(e)&&!this.isRichTextField(e)},e.prototype.isLongTextInput=function(e){return!1},e.prototype.isRichTextInput=function(e){return!this.isMobile()&&(this.isTextType(e)&&this.isRichTextField(e))},e.prototype.isRichTextField=function(e){return e.subType===core.ElementSubTypes.Title||e.subType===core.ElementSubTypes.Subtitle||e.subType===core.ElementSubTypes.LongText||e.subType===core.ElementSubTypes.Address||e.subType===core.ElementSubTypes.Copyright},e.prototype.isButtonInput=function(e){return this.isButton(e)&&!this.isMobile()},e.prototype.isButton=function(e){return e.type===core.ElementTypes.Button&&e.subType===core.ElementSubTypes.Button},e.prototype.isImage=function(e){return e.type===core.ElementTypes.Media&&e.subType===core.ElementSubTypes.Image},e.prototype.isSocial=function(e){return e.type===core.ElementTypes.Media&&e.subType===core.ElementSubTypes.Social},e.prototype.isSocialInput=function(e){return this.isSocial(e)&&!this.isMobile()},e.prototype.isBoolean=function(e){return e.type===core.ElementTypes.Menu||e.type===core.ElementTypes.Subscribe||e.type===core.ElementTypes.FixedHeader||e.subType===core.ElementSubTypes.Form||this.isSocial(e)&&this.isMobile()},e.prototype.isMedia=function(e){return this.isImage(e)&&!this.isSocial(e)},e.prototype.isCheckbox=function(e){return e.type===core.ElementTypes.Menu||e.subType===core.ElementSubTypes.Form||this.isSocial(e)&&this.isMobile()||e.type===core.ElementTypes.Subscribe},e.prototype.isLogin=function(e){return e.type===core.ElementTypes.Widget&&e.subType===core.ElementSubTypes.Login},e.prototype.getDebounceDelay=function(t){return t.data&&t.data.subType===core.ElementSubTypes.Image?0:t.suggestedContent&&t.suggestedContent.length>0?e.DEFAULT_SUGGESTION_DEBOUNCE:e.DEFAULT_DEBOUNCE},e.prototype.getFieldTitle=function(e,t){var i=t.getContentElementType(),n=null;return t.isListItem&&(n="ListHeader"===i?"header":"ListFooter"===i?"footer":"item"),e.displayName||this.nodeTitleManager.fieldLabel(e,n,i)},e.prototype.getILink=function(e){return this.linkDetailsManager.generateILink(e.value)},e.DEFAULT_DEBOUNCE=200,e.DEFAULT_SUGGESTION_DEBOUNCE=500,e}();t.FieldEditorConfiguration=n,angular.module("siteGeneratorEditorInternal").service("fieldEditorConfiguration",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(17),o=i(1),r=i(0),a=function(){function e(e,t,i,n,o){this.selections=e,this.designKit=t,this.undoRedo=i,this.nodeEditorManager=n,this.consumerBiLogger=o,this.fontSizes=["font_0","font_2","font_6","font_5"]}return e.$inject=["selections","designKit","undoRedo","nodeEditorManager","consumerBiLogger"],e.prototype.getFontsLength=function(){return this.fontSizes.length},e.prototype.getFontSizeIndex=function(e,t){var i=r.get(this.selections.getForNodeByType(e),["fontOverrides",t.data.subType],this.designKit.getFontOverride(e,t.data.subType,null,null)),n=this.fontSizes.indexOf(i);return n>-1?n:0},e.prototype.setFontSize=function(e,t,i){var a=this,s=this.fontSizes[i],l=this.getFontSizeIndex(e,t);if(l!==i){var c=l>i?"down":"up";this.consumerBiLogger.contentEditor.changeComponentFontSize(t.data.subType,c,s),r.set(this.selections.getForNodeByType(e),["fontOverrides",t.data.subType],s);var d={node:e,isReferencedField:!1,key:t.key,field:t.data,contentElementField:t,maskChanged:!1,whatChanged:n.IEditEventType.ValueChange,BIOrigin:o.BIOrigins.OSI};this.nodeEditorManager.updateViewer(d).then(function(){return a.undoRedo.captureOperation()})}},e.prototype.resetFontOverrides=function(){this.selections.getLss().resetAllFontOverrides()},e}();t.FontSize=a,angular.module("siteGeneratorBuilderInternal").service("fontSize",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(17),o=i(1),r=i(0),a=function(){function e(e,t,i,n){this.mediaOverrideManager=e,this.colorationUtils=t,this.logoExtractionPopupService=i,this.undoRedo=n,this.logoOrigin=o.BIOrigins.UnknownSource}return e.$inject=["mediaOverrideManager","colorationUtils","logoExtractionPopupService","undoRedo"],e.prototype.handleLogoChange=function(e,t){var i=this;this.colorationUtils.saveLogoPaletteAsCustom();var r=this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(e.node)!==cc.MediaPreviewType.Clipart;if(t&&!r){var a=e.node.contentElement.getFieldValue("Logo").value[0];this.logoOrigin=o.BIOrigins.HeaderPanel;var s=function(){return i.lazyGetLogoColorationPromise(a)};e.whatChanged===n.IEditEventType.ValueChange?this.logoExtractionPopupService.showLogoPopup(this.logoOrigin,".c4-preview-wrapper",s,1e3):s()}else this.logoExtractionPopupService.hideLogoPopup()},e.prototype.lazyGetLogoColorationPromise=function(e){return this.prevPromise&&r.isEqual(e,this.prevPromiseImageDescription)?this.prevPromise:(this.prevPromiseImageDescription=e,this.prevPromise=this.getLogoColoration(e),this.prevPromise)},e.prototype.getLogoColoration=function(e){var t=this;return this.colorationUtils.initialize().then(function(){return t.colorationUtils.preparePaletteFromLogo(e,t.logoOrigin)}).then(function(e){return t.colorationUtils.setLogoColors(e),t.undoRedo.captureOperation(!1,!0),e})},e}();t.LogoHandler=a,angular.module("siteGeneratorEditorInternal").service("logoHandler",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o){this.sitePartTypes=e,this.layoutSolver=t,this.mediaSectionUtils=i,this.modelTree=n,this.undoRedo=o,this.coreLogoSizes=[.5,.75,1,1.5,2]}return e.$inject=["sitePartTypes","layoutSolver","mediaSectionUtils","modelTree","undoRedo"],e.prototype.core2consumer=function(e){return this.coreLogoSizes.indexOf(e)-2},e.prototype.consumer2core=function(e){return this.coreLogoSizes[e+2]},e.prototype.getLogoSize=function(){var e=this.getSiteHeaderLE(),t=e&&e.layoutArray.find(function(t){return e.isMediaLayout(t)}),i=t&&t.mediaSize||1;return this.core2consumer(i)},e.prototype.setLogoSize=function(e){var t=this,i=this.getSiteHeaderLE();if(i){var n=i.getLayoutSelectionStore(),o=this.consumer2core(e);n.setMediaSize(i,o),this.mediaSectionUtils.updateFieldOnViewer(this.modelTree.getGeneralInformation()).then(function(){return t.undoRedo.captureOperation()})}},e.prototype.getSiteHeaderLE=function(){var e=this.layoutSolver.getSelectedSolution(this.sitePartTypes.HEADER);return e&&e.length&&e[0].segments[0].getLE()},e}();t.LogoSizeService=n,angular.module("siteGeneratorBuilderInternal").service("logoSizeService",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(17),o=i(0),r=function(){function e(e,t,i,n,o){this.solutionFetcher=e,this.mediaSectionUtils=t,this.sectionBackgroundService=i,this.modelTree=n,this.solutionManager=o}return e.$inject=["solutionFetcher","mediaSectionUtils","sectionBackgroundService","modelTree","solutionManager"],e.prototype.getBackgroundAlignment=function(e){return this.sectionBackgroundService.getBackgroundAlignment(e,"body")},e.prototype.getInlineAlignment=function(e){var t=this.solutionFetcher.getSectionSolution(e.containerPageId,this.modelTree.findIdentifyingNodeId(e));return this.solutionManager.getSegmentForNode(t,e).getAlignment()},e.prototype.setBackgroundAlignment=function(e,t,i){return this.sectionBackgroundService.setBackgroundAlignment(e,t,i),this.sectionBackgroundService.updateViewer(e.identifyingNode)},e.prototype.setInlineAlignment=function(e,t){var i=this.solutionFetcher.getSectionSolution(e.containerPageId,this.modelTree.findIdentifyingNodeId(e)),r=this.solutionManager.getSegmentForNode(i,e),a=o.get(e,"contentElement.allValuesByMediaType.image[0].relativeUri");return r.updateAlignment(a,t),this.mediaSectionUtils.updateFieldOnViewer(e,null,n.IEditEventType.AlignmentChange)},e}();t.MediaAlignment=r,angular.module("siteGeneratorEditorInternal").service("mediaAlignment",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(18),o=i(2),r=function(){function e(e,t,i,n,r,a,s,l,c,d,u){var p=this;this.mediaOpacity=e,this.designKit=t,this.themeChooser=i,this.simpleSolutionManager=n,this.modelTree=r,this.sitePartTypes=a,this.mediaSectionUtils=s,this.storyServices=l,this.undoRedo=c,this.flags=d,this.consumerBiLogger=u,o.PubSub.subscribe(o.events.MEDIA_REPLACED,function(e){return p.reset(e)})}return e.$inject=["mediaOpacity","designKit","themeChooser","simpleSolutionManager","modelTree","sitePartTypes","mediaSectionUtils","storyServices","undoRedo","flags","consumerBiLogger"],e.prototype.getMediaBgPalette=function(){return this.themeChooser.coloration.getColorsForCurrentColoration("header",!0)},e.prototype.getBgColor=function(e){var t,i=this.mediaOpacity.getColor(e);return i?this.designKit.getKitFormatColor(i):(t=e.isListItem?this.simpleSolutionManager.getNodeSelectedLg(this.modelTree.findIdentifyingNode(e),e.isListHeader()?"header":"list"):this.simpleSolutionManager.getSectionSolution(e.containerPageId,e.id)[0],this.designKit.getConfigurationOfLg(t).display)},e.prototype.setBgColor=function(e,t,i){var n=this;return this.consumerBiLogger.contentEditor.changeColorBehindImage(e.getId(),i.toString(),e.alias,e.getContentElementType()),this.mediaOpacity.setColor(e,t),this.storyServices.reRender(this.sitePartTypes.BODY,e.containerPageId).then(function(){n.undoRedo.captureOperation(!1)})},e.prototype.getOpacity=function(e){return 100*this.mediaOpacity.getOpacity(e)},e.prototype.setOpacity=function(e,t){var i=this;return this.mediaOpacity.setOpacity(e,t/100),this.storyServices.reRender(this.sitePartTypes.BODY,e.containerPageId).then(function(){i.undoRedo.captureOperation(!1)})},e.prototype.reset=function(e,t,i){return void 0===t&&(t=!0),void 0===i&&(i=!0),t&&this.mediaOpacity.resetOpacity(e),i&&this.mediaOpacity.resetColor(e),this.storyServices.reRender(this.sitePartTypes.BODY,this.storyServices.story.selectedPage)},e.prototype.hasZeroOpacity=function(e){return 0===this.getUserMediaOpacity(e)},e.prototype.getUserMediaOpacity=function(e){return this.mediaOpacity.getUserMediaOpacity(e)},e.prototype.userResetOpacity=function(e){var t=this;return this.reset(e,!0,!1).then(function(){t.undoRedo.captureOperation(!1)})},e.prototype.showMediaOpacity=function(e){return this.mediaSectionUtils.getMediaLayoutFormat(e)!==n.MediaLayoutFormats.Inline},e}();t.MediaOpacityManager=r,angular.module("siteGeneratorEditorInternal").service("mediaOpacityManager",r)},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),r=i(17),a=i(15),s=i(1),l=i(0),c=function(){function e(e,t,i,n,r,a,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E){var w=this;this.$timeout=e,this.flags=t,this.storyServices=i,this.mediaGallery=n,this.undoRedo=r,this.cropFaceService=a,this.linkEditorCAB=l,this.editorEventManager=c,this.applicationState=d,this.consumerBiLogger=u,this.nodeFetcher=p,this.mediaOverrideManager=g,this.ONSTAGE_EVENTS=h,this.consumerMediaUtils=m,this.consumerBiLoggerHelpers=f,this.overlaySegmentManager=v,this.previewScale=S,this.overlayManager=y,this.onstageActionsManager=T,this.nodeEditorManager=b,this.sectionMedia=I,this.CcDialogBuilder=P,this.galleryTypeCAB=M,this.mediaTypeResolver=E,this.handleMediaChange=function(e,t,i,n,r,a,l){return o.PubSub.fire(o.events.MEDIA_REPLACED,e),w.consumerMediaUtils.biReplaceMediaApproved(e,n,a,l),r&&(i.fillValuesByMediaType(),o.PubSub.fire(o.events.CONTENT_UPDATED,e),w.flags.sectionMedia?w.sectionMedia.updateMedia(e):w.updateViewer(e,t,s.BIOrigins.OSI)),{changed:r,numTotal:a,mediaType:n}},this.handleCancellingOfMediaChange=function(e,t,i){w.consumerMediaUtils.biReplaceMediaClosed(e,t,i)},T.subscribe(h.OPEN_MEDIA_MANAGER,function(e){var t=w.nodeFetcher.getCurrentActiveNode(),i=w.flags.sectionMedia?E.getType(t):w.mediaOverrideManager.getCurrentSelectedMediaPreviewType(t);w.mediaChange(e,e.contentElement,s.BIOrigins.OSI,i)}),T.subscribe(h.CROP_IMAGE,function(e){w.openCropper()}),T.subscribe(h.MEDIA_LINK_TO,function(e){w.changeLink()}),T.subscribe(h.CHANGE_GALLERY_TYPE,function(t){w.flags.sectionMedia?e(function(){var e=w.nodeFetcher.getCurrentActiveNode();w.galleryTypeCAB.openGalleryType(e,w.galleryTypeCAB.getSizeDropdownButton())}):w.changeGallery()}),T.subscribe(h.OPEN_SETTINGS,function(e){w.openSettingsPanel()})}return e.$inject=["$timeout","flags","storyServices","mediaGallery","undoRedo","cropFaceService","linkEditorCAB","editorEventManager","applicationState","consumerBiLogger","nodeFetcher","mediaOverrideManager","ONSTAGE_EVENTS","consumerMediaUtils","consumerBiLoggerHelpers","overlaySegmentManager","previewScale","overlayManager","onstageActionsManager","nodeEditorManager","sectionMedia","CcDialogBuilder","galleryTypeCAB","mediaTypeResolver"],e.prototype.setCurrentMediaType=function(e){this.currentMediaType=e},e.prototype.getCurrentMediaType=function(){return this.currentMediaType},e.prototype.openSettingsPanel=function(){var e=this.nodeFetcher.getCurrentActiveNode(),t=this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(e);this.consumerBiLogger.contentEditor.mediaSettingsShow(e.getId(),e.getContentElementType(),e.alias,this.consumerMediaUtils.mediaTypeToString(t),this.consumerMediaUtils.mediaTypeToGalleryType(t))},e.prototype.changeGallery=function(){var e=this,t=this.nodeFetcher.getCurrentActiveNode(),i=this.mediaOverrideManager.getAvailableGalleries(t),n=this.mediaOverrideManager.getAllowedMediaOverride(t),o=!1;this.CcDialogBuilder.show({autoWrap:!1,hasBackdrop:!1,templateUrl:"views/editor/gallery-picker.html",clickOutsideToClose:!0,onRemoving:function(){o||e.consumerBiLogger.contentEditor.galleryLayoutWindowClosed(t.getId(),t.getSpecificContentElementType(),t.alias,null,i.length,n===a.PresetMediaTypes.SHAPE?"shape":n===a.PresetMediaTypes.COAST2COAST?"full width":n===a.PresetMediaTypes.IMAGE?"image":"")},controller:["$scope","CcDialogBuilder",function(l,c){l.galleries=i,l.onSelect=function(l){l&&l.gallery&&e.mediaOverrideManager.setGallery(t,l.gallery)&&(o=!0,e.nodeEditorManager.updateViewer(e.createEvent(s.BIOrigins.OSI,r.IEditEventType.GalleryLayoutChange)),e.consumerBiLogger.contentEditor.galleryLayoutChanged(t.getId(),t.getSpecificContentElementType(),t.alias,l.gallery.name,i.length,i.indexOf(l),n===a.PresetMediaTypes.SHAPE?"shape":n===a.PresetMediaTypes.COAST2COAST?"full width":n===a.PresetMediaTypes.IMAGE?"image":"")),c.hide()},l.getDisplayName=function(e){return e.name},e.consumerBiLogger.contentEditor.galleryLayoutWindowOpened(t.getId(),t.getSpecificContentElementType(),t.alias,i.length,n===a.PresetMediaTypes.SHAPE?"shape":n===a.PresetMediaTypes.COAST2COAST?"full width":n===a.PresetMediaTypes.IMAGE?"image":"")}]})},e.prototype.handleMediaPropertiesChange=function(e){var t=this.createEvent(s.BIOrigins.MediaSetting,e);return this.nodeEditorManager.updateViewer(t)},e.prototype.createEvent=function(e,t,i,n,o){void 0===t&&(t=r.IEditEventType.ValueChange),i=i||this.getMediaValueProjection(),n=n||Object.keys(i)[0];var a=this.nodeFetcher.getCurrentActiveNode();return{key:n,field:i[n],subField:o,maskChanged:!1,whatChanged:t,node:a,isReferencedField:!1,BIOrigin:e}},e.prototype.getMediaValueProjection=function(){var e=this.nodeFetcher.getCurrentActiveNode();return l.reduce(e.contentElement.values,function(e,t,i){return"media"===t.type&&(e[i]=t),e},{})},e.prototype.mediaChange=function(e,t,i,n){var o=this;if(void 0===n&&(n=this.currentMediaType),!this.applicationState.isInMobileEditMode()){var r=this.nodeFetcher.getCurrentActiveNode(),a=this.consumerMediaUtils.getChangeMediaMethod(r,n),s={contentElement:t,media:t.getMediaField().value};return this.consumerBiLoggerHelpers.organizeMediaNode=r,this.consumerMediaUtils.biReplaceMediaLoaded(r,n,i),a(s,this.getCurrentSegment()).then(function(a){return o.handleMediaChange(r,e,t,n,a.isChanged,a.numTotal,i)},function(){return o.handleCancellingOfMediaChange(r,n,i)})}},e.prototype.changeLink=function(){var e=this,t=this.nodeFetcher.getCurrentActiveNode(),i=this.mediaOverrideManager.getActiveMediaValue(t),n={linkDetails:i.Link,node:t,biSource:"media"};this.linkEditorCAB.show(n).then(function(t){i.Link=t,e.nodeEditorManager.updateViewer(e.createEvent(s.BIOrigins.OSI))})},e.prototype.openCropper=function(e,t){var i=this,n=this,o=this.getCurrentSegment(),r=this.nodeFetcher.getCurrentActiveNode(),a=o.getLE(),s=this.overlaySegmentManager.getMediaOverlayPosition(r.getId()),c=this.previewScale.getScale();this.imageLayout=a.getMediaLayout();var d=this.calculateViewportStyle(s,o,c),u=$(".overlay-viewport"),p=u.height();if(!e){var g=d.height+64;if(g>p)return this.previewScale.setScaleFactor((p/g).toFixed(1)-.1),this.$timeout(function(){return i.openCropper(!0,t)},300)}if(!t){var h=$('[data-hook="fake-browser-bar"]'),m=h.offset().top+h.outerHeight(),f=d.top,v=f+d.height;if(f<m||v>p&&f>m){var S=u.scrollTop();return $(".overlay-viewport").animate({scrollTop:S-m+(this.flags.updatedCropper?d.top-64:d.top)},500),this.$timeout(function(){return i.openCropper(e,!0)},550)}}var y=[a.getArgValue(this.imageLayout.argIndex)[0]];this.imgData=l.map(y,function(e){var t=n.cropFaceService.getLimitingAlpha(4e3,4e3,e.width,e.height);return{uri:n.mediaGallery.itemToThumbnailUrl(e,Math.round(t*e.width),Math.round(t*e.height)),width:e.width,height:e.height,relativeUri:e.relativeUri}});var T=l.map(y,function(e){var t=o.node.getCropOfImage(n.imageLayout.argIndex,e.relativeUri,n.imageLayout);if(t)return{x:t.x,y:t.y,h:t.height,w:t.width}});this.CcDialogBuilder.show({template:'\n        <md-dialog class="cropper-md-dialog">\n          <cropper-controller\n            node="node"\n            crop="crop"\n            autoclose="autoClose"\n            imgdata="imgData"\n            viewport="viewport"\n            consumer-bi-logger="consumerBiLogger"\n            oncropclose="onCropClose"\n            bindoutsideclick="bindOutsideClick"\n          ></cropper-controller>\n        </md-dialog>',hasBackdrop:!1,locals:{node:r,crop:T,autoclose:!0,imgData:this.imgData,viewport:d,consumerBiLogger:n.consumerBiLogger,onCropClose:this.onCropClose.bind(this)},onRemoving:function(){i.applicationState.setCropperMode(!1),c&&i.previewScale.setScaleFactor(c)},controller:["$scope","CcDialogBuilder","crop","autoclose","imgData","viewport","onCropClose","node","consumerBiLogger","applicationState",function(e,t,i,o,r,a,s,l,c,d){d.setCropperMode(!0),e.crop=i,e.autoclose=o,e.imgData=r,e.viewport=a,e.consumerBiLogger=c,e.node=l,e.bindOutsideClick=function(t){e.onOutsideClick=t},e.onCropClose=function(e,i){t.hide(),s(e,i)},n.consumerBiLogger.contentEditor.cropImageDialogIsShown(l.getId(),l.getSpecificContentElementType(),l.alias)}]})},e.prototype.onCropClose=function(e,t){var i=this;if("ok"===e){var n=this.nodeFetcher.getCurrentActiveNode();l.forEach(this.imgData,function(e,o){t[o]&&(t[o].source="manual",n.setCropData(i.imageLayout.argIndex,e.relativeUri,i.imageLayout,t[o]))});var r=void 0;(r=this.storyServices.reRender()).then instanceof Function&&r.then(function(){o.PubSub.fire(o.events.CONTENT_UPDATED,n)}),this.undoRedo.captureOperation()}},e.prototype.calculateViewportStyle=function(e,t,i){var n=t.getLE(),o=t.getLayoutSelectionStore().getImageStretch(t,n);return{left:e.left-(o&&o.left||0)*i,top:e.top-(o&&o.top||0)*i,width:e.width+((o&&o.left||0)+(o&&o.right||0))*i,height:e.height+((o&&o.top||0)+(o&&o.bottom||0))*i}},e.prototype.getCurrentSegment=function(){var e=this.nodeFetcher.getCurrentNodeResult(),t=e&&e.sitePart,i=this.nodeFetcher.getCurrentActiveNode();if("header"!==t)return i&&this.applicationState&&this.applicationState.getContentFocus()&&this.overlayManager.listSpanManager.getSegmentByNodeId(i.getId(),t)},e.prototype.updateViewer=function(e,t,i){var n=this.overrideFieldDataValue(t,null),o=this.mediaOverrideManager.getFieldDataType(t.data.subType,e);this.consumerBiLogger.contentEditor.updateField(e.getId(),e.getSpecificContentElementType(),e.alias||"",t.key,o),this.editorEventManager.fieldChanged(n,!1,r.IEditEventType.ValueChange,i)},e.prototype.overrideFieldDataValue=function(e,t){var i=l.clone(e.data);return i.value=t,n({},e,{data:i})},e}();t.MediaEditorManager=c,angular.module("siteGeneratorEditorInternal").service("mediaEditorManager",c)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a,s){this.mediaOrganizeDataAdapter=e,this.$q=t,this.$translate=i,this.miscUtils=n,this.flags=o,this.contentNormalizer=r,this.mediaGalleryCustomTabBuilder=a,this.mediaGallery=s,this.miscUtils.mediaGalleryAdapter=this}return e.$inject=["mediaOrganizeDataAdapter","$q","$translate","miscUtils","flags","contentNormalizer","mediaGalleryCustomTabBuilder","mediaGallery"],e.prototype.openMediaManager=function(e,t,i){var n=this,o=window.MediaManager,r=window.MediaManagerApi,a=function(e){switch(e){case core.MediaItemTypes.Image:return o.categories.IMAGE;case core.MediaItemTypes.Video:return o.categories.VIDEO;case core.MediaItemTypes.Shape:return o.categories.VECTOR_ART;case core.MediaItemTypes.Clipart:return o.categories.IMAGE;case core.MediaItemTypes.Document:return o.categories.DOCUMENT;default:return o.categories.IMAGE}}(t),s={onSuccess:function(e){return n.onMediaFrameItems&&n.onMediaFrameItems(e)},onCancel:function(e){return n.onMediaFrameCancel&&n.onMediaFrameCancel()},multiSelect:!1,recommended:t!==core.MediaItemTypes.Document?e.sections.map(function(e){var t={sectionTitle:e.title,sectionItems:e.data};return e.action&&(t.moreButton={caption:e.action.title,linkTo:e.action.url}),t}):void 0,translation:{submitButton:this.$translate.instant("general.apply")}};o.open(a,r.origins.ADI,s)},e.prototype.convertToMediaOrganizerFormat=function(e,t){var i=Object.assign({},e,{fileName:e.title||"",relativeUri:("shape"===t?e.fileUrl:e.uri)||"",width:Number(e.width)||0,height:Number(e.height)||0,Title:e.title||e.Title||"",Description:e.Description||"",Link:e.Link||{},mediaType:t,active:!0});return this.flags.reduceMediaBlob?this.contentNormalizer.normalizeMedia(i):i},e.prototype.convertToMediaObject=function(e){var t={fileName:e.name,fileUrl:e.fileUrl,height:e.height,width:e.width,relativeUri:e.id,sourceUrl:e.sourceUrl,fileInput:e.fileInput};return n.defaults(t,{Link:{},Description:"",Title:"",fileName:"",mediaType:"image"})},e.prototype.selectMediaByType=function(e,t,i,n){var o=this;return void 0===t&&(t=[]),this.mediaGalleryCustomTabBuilder.buildCustomTabData(t,e,i).then(function(r){return o.openMediaManager(r,e,i),o.managingResultsActiveState(t,e,n)})},e.prototype.selectContentElementMediaByType=function(e,t,i,o){var r=this,a=this.mediaOrganizeDataAdapter.prepareData(e||{contentElement:{},media:[]},t).filter(function(e){return r.validImageItem(e)});return this.selectMediaByType(t,a,i,o).then(function(i){r.handleInvalidrelativeUri(i);var s=(r.flags.lodash4?n.uniqBy:n[String("unique")])(i.concat(a),"relativeUri"),l=r.mediaOrganizeDataAdapter.handleResult(s,e,t,t!==core.MediaItemTypes.Video);return o&&(l.data=i),l})},e.prototype.selectImage=function(e,t,i,n){return this.segment=i,this.selectContentElementMediaByType(t,core.MediaItemTypes.Image,e,n)},e.prototype.selectVideo=function(e,t,i){return this.selectContentElementMediaByType(e,core.MediaItemTypes.Video,null,i)},e.prototype.selectShape=function(e){return this.selectContentElementMediaByType(e,core.MediaItemTypes.Shape)},e.prototype.selectClipart=function(e){return this.selectContentElementMediaByType(e,core.MediaItemTypes.Clipart)},e.prototype.selectLogo=function(){return this.selectMediaByType("image")},e.prototype.selectDocument=function(){return this.selectMediaByType("document")},e.prototype.handleInvalidrelativeUri=function(e){void 0===e&&(e=[]),e.filter(function(e){return"file"===e.relativeUri}).forEach(function(e){var t=e.fileBaseUrl.match(/\d+.*/);t&&""!==t[0]&&(e.relativeUri=e.uri=t[0])})},e.prototype.validImageItem=function(e){return e&&0!==e.width&&0!==e.height},e.prototype.validImageItems=function(e){var t=this;return e&&e.length&&e.filter(function(e){return t.validImageItem(e)}).length},e.prototype.managingResultsActiveState=function(e,t,i){var n=this;return this.$q(function(o,r){n.onMediaFrameItems=function(a){if(n.validImageItems(a.items)){var s=a.items.map(function(e){return n.convertToMediaOrganizerFormat(e,t)}),l=i?function(e){return"video"===t?e:e.map(function(e){return e.active=!1,e})}(s):function(t){var i=e.map(function(e){return e.active=!1,e});return t.filter(function(e){var t=n.mediaGallery.getItemId(e),o=i.findIndex(function(e){return n.mediaGallery.getItemId(e)===t});if(-1!==o){var r=i[o];return r.active=!0,r.width===e.width&&r.height===e.height||(i[o]=e),!1}return!0}).concat(i)}(s);o(l)}else r()},n.onMediaFrameCancel=function(){r()}})},e}();t.MediaGalleryAdapter=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("mediaGalleryAdapter",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a){this.wixmp=e,this.RECOMMENDED_TAB_PARAMS=t,this.storyServices=i,this.flags=n,this.clientTopology=o,this.$translate=r,this.$q=a}return e.$inject=["wixmp","RECOMMENDED_TAB_PARAMS","storyServices","flags","clientTopology","$translate","$q"],e.prototype.getPrivateMedia=function(e){return"video"===e||"shape"===e?{data:[]}:(this.flags.MediaManager3||this.flags.MediaManager3Migrate?this.wixmp.Source(this.wixmp.sources.PRIVATE_SITE,{siteMediaToken:this.clientTopology.siteMediaToken}):this.wixmp.Source(this.wixmp.sources.PRIVATE)).items.list(this.storyServices.story.privateMediaFolderId)},e.prototype.getPublicMedia=function(e,t){if("document"===e)return this.$q.when({data:[]});var i=t?this.RECOMMENDED_TAB_PARAMS.BG_IMAGE_PUBLIC_ROOT_GUID:this.RECOMMENDED_TAB_PARAMS[e.toUpperCase()+"_PUBLIC_ROOT_GUID"];return this.wixmp.Source(this.wixmp.sources.PUBLIC).items.list(i)},e.prototype.prepareRecommendedSection=function(e){return{title:this.$translate.instant("media-organize.custom-tab.recommended-section"),data:e}},e.prototype.prepareSectionPreview=function(e,t,i,n){var o,r;return t.length>i?(o=n,r=i-1):(o=void 0,r=i),{title:e,data:t.slice(0,r),action:o}},e.prototype.preparePrivateSection=function(e){var t=this.$translate.instant("media-organize.custom-tab.from-business");return this.prepareSectionPreview(t,e,this.RECOMMENDED_TAB_PARAMS.PRIVATE_IMAGES_AMOUNT,{url:"MY_MEDIA",title:this.$translate.instant("media-organize.custom-tab.show-all")})},e.prototype.preparePublicSection=function(e){var t=this.$translate.instant("media-organize.custom-tab.free");return this.prepareSectionPreview(t,e,this.RECOMMENDED_TAB_PARAMS.PUBLIC_IMAGES_AMOUNT,{url:"WIX_MEDIA",title:this.$translate.instant("media-organize.custom-tab.show-all")})},e.prototype.convertToPictureFormat=function(e){return Object.assign({},e,{name:e.Title,width:e.width,height:e.height,fileUrl:"media/"+e.relativeUri,id:e.relativeUri,mediaType:"picture",originalUrl:"//static.wixstatic.com/media/"+e.relativeUri,previewUrl:"//static.wixstatic.com/media/"+e.relativeUri+"_srb_375_375_75_22_0.5_1.20_0.00_jpg_srb",thumbnailUrl:"//static.wixstatic.com/media/"+e.relativeUri+"_srz_210_210_75_22_0.5_1.20_0.00_jpg_srz"})},e.prototype.convertToShapeFormat=function(e){return Object.assign({},e,{name:e.Title,fileUrl:e.relativeUri,id:e.relativeUri,mediaType:"shape",originalUrl:"//static.wixstatic.com/"+e.relativeUri,previewUrl:"//static.wixstatic.com/"+e.relativeUri,thumbnailUrl:"//static.wixstatic.com/"+e.relativeUri})},e.prototype.convertToVideoFormat=function(e){var t=Object.assign({},e,{name:e.Title,id:e.relativeUri,originalUrl:"//static.wixstatic.com/"+e.fileUrl,videoPreviewUrls:["//video.wixstatic.com/video/"+e.relativeUri+"/1080p/mp4/file.mp4"],thumbnailUrl:e.thumbnailUrl,previewUrl:e.thumbnailUrl});return this.flags.reduceMediaBlob&&(t.fileName=t.relativeUri,t.fileUrl="video/"+t.relativeUri),t},e.prototype.convertToMediaGalleryFormat=function(e,t){switch(t){case"image":case"clipart":return this.convertToPictureFormat(e);case"shape":return this.convertToShapeFormat(e);case"video":return this.convertToVideoFormat(e)}},e.prototype.buildCustomTabData=function(e,t,i){var n=this;return this.$q.all([this.getPrivateMedia(t),this.getPublicMedia(t,i)]).then(function(i){var o=n.prepareRecommendedSection(e.map(function(e){return n.convertToMediaGalleryFormat(e,t)})),r=n.preparePrivateSection(i[0].data),a=n.preparePublicSection(i[1].data);return{title:n.$translate.instant("media-organize.custom-tab.title"),sections:[o,r,a]}})},e}();t.MediaGalleryCustomTabBuilder=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("mediaGalleryCustomTabBuilder",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a){this.organizeMedia=e,this.mediaOrganizeDataAdapter=t,this.linkDetailsManager=i,this.$translate=n,this.mediaGalleryCustomTabBuilder=o,this.mediaGallery=r,this.flags=a}return e.$inject=["organizeMedia","mediaOrganizeDataAdapter","linkDetailsManager","$translate","mediaGalleryCustomTabBuilder","mediaGallery","flags"],e.prototype.selectImage=function(e){var t=this;return this.organizeMedia.open({title:"Media Manager",subtitle:"Select Image",suggestionsTitle:"Other suggested images, select an image to replace the one on top",dataSource:this.mediaOrganizeDataAdapter.prepareData(e,"image"),type:"image",mode:"single",linkDetailsHandler:this.linkDetailsManager.getLinkDetailsHandler()}).then(function(i){return t.mediaOrganizeDataAdapter.handleResult(i,e,"image",!0)})},e.prototype.selectGallery=function(e,t,i,o){var r,a=this,s=this.mediaOrganizeDataAdapter.prepareData(e,"image");return r=o||(e?s:[]),this.mediaGalleryCustomTabBuilder.buildCustomTabData(r,"image").then(function(e){return a.organizeMedia.open({title:a.$translate.instant("media-organize.gallery.title"),subtitle:a.$translate.instant("media-organize.gallery.subtitle"),dataSource:r,customData:e,type:"image",mode:"gallery",linkDetailsHandler:a.linkDetailsManager.getLinkDetailsHandler(),helpPage:a.$translate.instant("help.organizemedia.imagegallery")})}).then(function(t){var o=(a.flags.lodash4?n.uniqBy:n[String("unique")])(t.concat(s),function(e){return a.mediaGallery.getItemId(e)});if(e){i&&((t=t.filter(function(e){return e.active})).map(function(e){var t=a.mediaGallery.getItemId(e);e.active=!!n.get(n.find(s,function(e){return a.mediaGallery.getItemId(e)===t}),"active")}),o=(a.flags.lodash4?n.uniqBy:n[String("unique")])(s.concat(t),function(e){return a.mediaGallery.getItemId(e)}));var r=a.mediaOrganizeDataAdapter.handleResult(o,e,"image",!1);return r.data=t,r}return o})},e.prototype.selectVideo=function(e){var t=this;return this.organizeMedia.open({title:this.$translate.instant("media-organize.type.title"),subtitle:this.$translate.instant("media-organize.video.subtitle"),suggestionsTitle:this.$translate.instant("media-organize.video.suggestions-title"),dataSource:this.mediaOrganizeDataAdapter.prepareData(e,"video"),type:"video",mode:"single"}).then(function(i){return t.mediaOrganizeDataAdapter.handleResult(i,e,"video",!1)})},e.prototype.selectExtVideo=function(e){var t=this;return this.organizeMedia.open({title:this.$translate.instant("media-organize.type.title"),subtitle:this.$translate.instant("media-organize.video.subtitle"),suggestionsTitle:this.$translate.instant("media-organize.video.suggestions-title"),dataSource:this.mediaOrganizeDataAdapter.prepareData(e,"extVideo"),type:"extVideo",mode:"single",helpPage:this.$translate.instant("help.organizemedia.singleextvideo")}).then(function(i){return t.mediaOrganizeDataAdapter.handleResult(i,e,"extVideo",!1)})},e.prototype.selectShape=function(e){var t=this;return this.organizeMedia.open({title:this.$translate.instant("media-organize.type.title"),subtitle:this.$translate.instant("media-organize.shape.subtitle"),suggestionsTitle:this.$translate.instant("media-organize.shape.suggestions-title"),dataSource:this.mediaOrganizeDataAdapter.prepareData(e,"shape"),type:"shape",mode:"single",linkDetailsHandler:this.linkDetailsManager.getLinkDetailsHandler()}).then(function(i){return t.mediaOrganizeDataAdapter.handleResult(i,e,"shape",!1)})},e.prototype.selectClipart=function(e){var t=this;return this.organizeMedia.open({title:this.$translate.instant("media-organize.type.title"),subtitle:this.$translate.instant("media-organize.clipart.subtitle"),suggestionsTitle:this.$translate.instant("media-organize.clipart.suggestions-title"),dataSource:this.mediaOrganizeDataAdapter.prepareData(e,"clipart"),type:"clipart",mode:"single",linkDetailsHandler:this.linkDetailsManager.getLinkDetailsHandler()}).then(function(i){return t.mediaOrganizeDataAdapter.handleResult(i,e,"clipart",!1)})},e}();t.MediaOrganizeAdapter=o,angular.module("siteGeneratorEditorInternal").service("mediaOrganizeAdapter",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t){this.mediaGallery=e,this.flags=t}return e.$inject=["mediaGallery","flags"],e.prototype.prepareData=function(e,t){var i=this;return n(e.media).filter(function(e){return t===e.mediaType})[this.flags.lodash4?"uniqBy":String("unique")](function(e){return i.mediaGallery.getItemId(e)}).map(function(o){var r=n.get(e.contentElement.hiddenMedia,t,{})[i.mediaGallery.getItemId(o)]||!1;return n.assign(o,{active:!r})}).value()},e.prototype.handleResult=function(e,t,i,o){var r=this;this.normalizeMedia(e,i);var a=t.media.filter(function(e){return e.mediaType!==i}),s=t.media.filter(function(e){return e.mediaType===i}),l=n.map(s,function(e){return r.mediaGallery.getItemId(e)}),c=n.map(e,function(e){return r.mediaGallery.getItemId(e)}),d=t.contentElement.hiddenMedia[i]||{};if(o){var u=n.difference(c,l),p=n.difference(l,c),g=ob.deepClone(d);n.each(u,function(e){g[e]=!0}),n.each(p,function(e){delete g[e]});var h=n.find(s,function(e){return!d[r.mediaGallery.getItemId(e)]}),m=n.find(e,function(e){return e.active}),f=g[this.mediaGallery.getItemId(m)];delete g[this.mediaGallery.getItemId(m)],f&&h&&(g[this.mediaGallery.getItemId(h)]=f),n.pull(e,m),e.unshift(m),t.contentElement.hiddenMedia[i]=g}else{var v=e.filter(function(e){return!e.active}).map(function(e){return r.mediaGallery.getItemId(e)});t.contentElement.hiddenMedia[i]=n.zipObject(v,n.times(v.length,n.constant(!0)))}t.media.length=0,t.media.push.apply(t.media,e.concat(a));var S=!n.isEqual(s,e),y=!n.isEqual(d,t.contentElement.hiddenMedia[i]);return{isChanged:S||y,numTotal:e.filter(function(e){return e.active}).length,data:e}},e.prototype.normalizeMedia=function(e,t){n.each(e,function(e){e.mediaType=t})},e}();t.MediaOrganizeDataAdapter=o,angular.module("siteGeneratorEditorInternal").service("mediaOrganizeDataAdapter",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(190),o=i(18),r=i(17),a=i(15),s=i(1),l=i(0),c=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S){var y=this;this.sectionBackgroundService=e,this.editorEventManager=t,this.solutionFetcher=i,this.mediaOverrideManager=n,this.flags=o,this.modelTree=r,this.nodeFetcher=a,this.nodeEditorManager=s,this.$q=l,this.applicationState=c,this.mediaTypeResolver=d,this.sectionBackgroundManager=u,this.undoRedo=p,this.mediaGallery=g,this.nodeEditorBiReporter=h,this.modelTreeHelpers=m,this.$log=f,this.solutionManager=v,this.slideShowService=S,this.colorBgOption={mediaType:"color",confId:-1},this.darkColorBgOption={mediaType:"color",confId:3,color:"D1"},this.isMediaActive=function(e,t){return void 0===t&&(t=y.getMediaKey(e)),y.applicationState.isInMobileEditMode()?e.getMobileArgsPolicy()[t]:e.getArgsMatchingPolicy()[t]},this.setMediaActive=function(e,t,i){void 0===t&&(t=y.getMediaKey(e)),y.applicationState.isInMobileEditMode()?e.getMobileArgsPolicy()[t]=i:e.getArgsMatchingPolicy()[t]=i}}return e.$inject=["sectionBackgroundService","editorEventManager","solutionFetcher","mediaOverrideManager","flags","modelTree","nodeFetcher","nodeEditorManager","$q","applicationState","mediaTypeResolver","sectionBackgroundManager","undoRedo","mediaGallery","nodeEditorBiReporter","modelTreeHelpers","$log","solutionManager","slideShowService"],e.prototype.toggleFirstMediaByType=function(e,t,i,n){var o=l.find(i.value,function(t){return t.mediaType===e});o&&(n.contentElement.hiddenMedia[e]=n.contentElement.hiddenMedia[e]||{},l.get(n.contentElement.hiddenMedia,e)[this.mediaGallery.getItemId(o)]=!t)},e.prototype.setSmallImageOption=function(e,t){var i=this,n=e.contentElement.getMediaField();return this.toggleAllMediaByType("shape",!1,n,e),this.toggleAllMediaByType("clipart",!1,n,e),this.toggleFirstMediaByType(t,!0,n,e),e.contentElement.fillValuesByMediaType(),this.flags.headlessApi?(this.getMediaField(e.contentElement).active=!0,this.$q.when(!0)):this.changeMediaFieldVisibility(e,!0).then(function(){return i.mediaOverrideManager.setMediaOverride(e,a.MediaOverrideManager.MO_IMAGE)}).then(function(){return i.updateFieldOnViewer(e)}).then(function(){return!0})},e.prototype.toggleAllMediaByType=function(e,t,i,n){var o=this;n.contentElement.hiddenMedia[e]=n.contentElement.hiddenMedia[e]||{};var r=l.get(n.contentElement.hiddenMedia,e);l.forEach(i.value,function(i){i.mediaType===e&&(r[o.mediaGallery.getItemId(i)]=!t)})},e.prototype.isFitMode=function(e){var t="GeneralDescription"!==e.getContentElementType();return this.flags.sectionMedia&&t&&this.mediaOverrideManager.isFitMode(e)},e.prototype.isShapeVisible=function(e){return this.mediaOverrideManager.getAllowedMediaOverride(e)===a.PresetMediaTypes.SHAPE&&!!this.solutionFetcher.getSectionSolution(e.containerPageId,e.id)[0].segments[0].getLE().getMediaLayout()},e.prototype.listBackgroundType=function(e){e=this.modelTree.findIdentifyingNode(e);var t=this.sectionBackgroundService.getBackground(e);return this.sectionBackgroundService.getBackground(e,"header")||t.mediaType===core.BgMediaTypes.COLOR?t.mediaType===core.BgMediaTypes.COLOR?o.MediaSizeOptions.BackgroundHeader:o.MediaSizeOptions.BackgroundList:o.MediaSizeOptions.BackgroundFull},e.prototype.getSolution=function(e){return this.solutionFetcher.getSectionSolution(e.containerPageId,this.modelTree.findIdentifyingNodeId(e))},e.prototype.isListHeaderHidden=function(e,t){return void 0===t&&(t=this.getSolution(e)),e.isListHeader()&&t&&!t[0].isListHeader()},e.prototype.getMediaLayoutFormat=function(e){var t=this.getSolution(e);if(!t||!this.nodeFetcher.isNodeBody(e))return o.MediaLayoutFormats.Inline;if(this.isListHeaderHidden(e,t))return o.MediaLayoutFormats.Background;var i=this.solutionManager.getSegmentForNode(t,e).getLE();if(i.getMediaLayout()){if(1===i.cluster)return o.MediaLayoutFormats.Background;switch(this.mediaOverrideManager.getAllowedMediaOverride(e)){case a.PresetMediaTypes.COLUMNBG:return o.MediaLayoutFormats.Column;case a.PresetMediaTypes.COAST2COAST:return o.MediaLayoutFormats.Strip;default:return o.MediaLayoutFormats.Inline}}return o.MediaLayoutFormats.Background},e.prototype.layoutHasColumns=function(e){return this.mediaOverrideManager.getAllowedMediaOverride(e)===a.PresetMediaTypes.COLUMNBG},e.prototype.layoutHasStrip=function(e){return this.mediaOverrideManager.getAllowedMediaOverride(e)===a.PresetMediaTypes.COAST2COAST},e.prototype.layoutHasOnMedia=function(e){return e=this.modelTree.findIdentifyingNode(e),1===this.solutionFetcher.getSectionSolution(e.containerPageId,e.id)[0].segments[0].getLE().cluster},e.prototype.switchToColumnBackground=function(e,t){return this.switchToInline(e,t)},e.prototype.switchToBackgroundHeader=function(e,t,i){var n=this;void 0===i&&(i=!0),e=this.modelTree.findIdentifyingNode(e);var o=this.getBgOptionByType(e,t,i);return o&&(this.sectionBackgroundService.setBackground(e,this.colorBgOption),this.sectionBackgroundService.setBackground(e,o,"header")),this.changeMediaFieldVisibilityAndUpdateViewer(this.modelTree.getListHeader(e),!1).then(function(){o&&n.sectionBackgroundService.setBackground(e,o,"header")})},e.prototype.switchToFullListBackground=function(e,t,i){void 0===i&&(i=!0),e=this.modelTree.findIdentifyingNode(e);var n=this.getBgOptionByType(e,t,i);return n&&(this.sectionBackgroundService.setBackground(e,n),this.sectionBackgroundService.setBackground(e,n,"header")),this.changeMediaFieldVisibilityAndUpdateViewer(this.modelTree.getListHeader(e),!1)},e.prototype.switchToListBackground=function(e,t,i){void 0===i&&(i=!0),e=this.modelTree.findIdentifyingNode(e);var n=this.getBgOptionByType(e,t,i);return n&&(this.sectionBackgroundService.setBackground(e,n),this.sectionBackgroundService.setBackground(e,this.colorBgOption,"header")),this.changeMediaFieldVisibilityAndUpdateViewer(this.modelTree.getListHeader(e),!1)},e.prototype.switchToBackground=function(e,t,i){var n=this;void 0===i&&(i=!0);var o=this.getBgOptionByType(e,t,i);return o&&this.sectionBackgroundService.setBackground(e,o),this.changeMediaFieldVisibilityAndUpdateViewer(e,!1).then(function(){n.flags.fixUpdateBGInPanel&&n.editorEventManager.backgroundChanged()})},e.prototype.getSectionCurrentBgIfKeep=function(e,t){var i=this.sectionBackgroundManager.getBackgroundSingleOrList(e);if(i&&this.mediaTypeResolver.toCoreType(t,!1)===i.mediaType)return i},e.prototype.getBgOptionByType=function(e,t,i){if(void 0===i&&(i=!0),i||t===cc.MediaPreviewType.Pattern){var o=this.getSectionCurrentBgIfKeep(e,t);if(o)return o}var r,a=this.sectionBackgroundService.getBackgroundOptions(e);switch(t){case cc.MediaPreviewType.SingleImage:(r=ob.deepClone(a.image[0])).backgroundColor=this.darkColorBgOption;break;case cc.MediaPreviewType.Video:(r=ob.deepClone(a.video[0])).backgroundColor=this.darkColorBgOption;break;case cc.MediaPreviewType.ExtVideo:r=a.extVideo[0];break;case cc.MediaPreviewType.Pattern:r=a.pattern[0];break;case cc.MediaPreviewType.MultipleImages:r={mediaType:"gallery",galleryType:n.SectionBackgroundManager.STRIP_SLIDESHOW,galleryProps:{},mediaItems:a.image,backgroundColor:this.darkColorBgOption}}return r},e.prototype.updateViewerForListITem=function(e){return this.updateViewerForInline(e,r.IEditEventType.ValueChange),this.$q.resolve()},e.prototype.switchToStrip=function(e,t){var i=this;return this.inlineOn(e).then(function(){return i.stripOverride(e,t)})},e.prototype.switchToInline=function(e,t){var i=this;return this.inlineOn(e).then(function(){return i.inlineOverride(e,t)})},e.prototype.inlineOverride=function(e,t){var i=this.mediaOverrideManager.getGallery(e),n=this.getOverrideByType(e,t,!1);n&&(i&&i.name===n||this.mediaOverrideManager.setMediaOverride(e,n),this.updateViewerForInline(e,r.IEditEventType.TypeChange))},e.prototype.stripOverride=function(e,t){var i=this.mediaOverrideManager.getGallery(e),n=this.getOverrideByType(e,t,!0);n&&(i&&i.name===n||this.mediaOverrideManager.setMediaOverride(e,n),this.updateViewerForInline(e,r.IEditEventType.TypeChange))},e.prototype.getOverrideByType=function(e,t,i){switch(t){case cc.MediaPreviewType.SingleImage:return i?a.MediaOverrideManager.MO_STRIP_IMAGE:a.MediaOverrideManager.MO_IMAGE;case cc.MediaPreviewType.MultipleImages:var n=this.mediaOverrideManager.getGallery(e);if(!(this.mediaOverrideManager.getMediaTypeFromGallery(n)===cc.MediaPreviewType.MultipleImages))return i?a.MediaOverrideManager.MO_STRIP_SLIDESHOW:a.MediaOverrideManager.MO_SLIDESHOW;break;case cc.MediaPreviewType.ExtVideo:case cc.MediaPreviewType.Video:return this.layoutHasColumns(e)?a.MediaOverrideManager.MO_WIX_VIDEO:i?a.MediaOverrideManager.MO_STRIP_VIDEO:a.MediaOverrideManager.MO_VIDEO}return null},e.prototype.updateViewerForInline=function(e,t){if(!this.flags.headlessApi){var i=this.getMediaField(e.contentElement,e);this.editorEventManager.fieldChanged(i,!1,t,s.BIOrigins.MediaSetting,{node:e}||void 0)}},e.prototype.nodeHasBackground=function(e){return!this.modelTreeHelpers.isItemOfList(e)&&!e.isListFooter()&&!!this.getBackgroundMedia(e)},e.prototype.nodeMediaIsShown=function(e){return this.isMediaActive(e.contentElement)||this.nodeHasBackground(e)},e.prototype.getBackgroundMedia=function(e){var t=this.sectionBackgroundManager.getBackgroundSingleOrList(e);if(t&&t.mediaType!==core.BgMediaTypes.COLOR)return this.getBgAsMedia(e,t)},e.prototype.getBgAsMedia=function(e,t){if(t.mediaType===core.BgMediaTypes.PATTERN)return this.mediaOverrideManager.convertBgPatternToMedia(e,t);var i=t.mediaType===core.BgMediaTypes.GALLERY?core.BgMediaTypes.IMAGE:t.mediaType;return e.contentElement.allValuesByMediaType[i].find(function(e){return l.includes(t.mediaId||t.mediaIds[0],e.relativeUri)})},e.prototype.isMediaSizeBackground=function(e){return e===o.MediaSizeOptions.Background||e===o.MediaSizeOptions.BackgroundFull||e===o.MediaSizeOptions.BackgroundHeader||e===o.MediaSizeOptions.BackgroundList},e.prototype.reportBackgroundVisibilityBI=function(e,t){var i,n=this.getMediaField(e.contentElement),o=this.createEvent(e,n,r.IEditEventType.VisibilityChange),a=((i={})[n.key]=t,i);this.nodeEditorBiReporter.reportBi(o,a,this.nodeEditorManager.getParent(o))},e.prototype.resetBackgroundAndGetIt=function(e){if(!this.modelTreeHelpers.isItemOfList(e)){var t=this.modelTree.findIdentifyingNode(e),i={header:t.isList()?this.sectionBackgroundService.getBackground(t,"header"):null,body:this.sectionBackgroundService.getBackground(t)};return t.isList()&&this.sectionBackgroundService.setBackground(t,this.colorBgOption,"header"),this.sectionBackgroundService.setBackground(t,this.colorBgOption),i}},e.prototype.restoreBackground=function(e,t){if(!this.modelTreeHelpers.isItemOfList(e)){var i=this.modelTree.findIdentifyingNode(e);this.sectionBackgroundService.setBackground(i,t.body),i.isList()&&t.header&&this.sectionBackgroundService.setBackground(i,t.header,"header"),this.undoRedo.captureOperation()}},e.prototype.inlineOn=function(e){return this.moveMediaBgToInline(e),this.resetBackgroundAndGetIt(e),this.changeMediaFieldVisibilityAndUpdateViewer(e,!0)},e.prototype.moveMediaBgToInline=function(e){var t=this.sectionBackgroundManager.getBackgroundSingleOrList(e);if(t){var i=this.getMediaField(e.contentElement).data.value;switch(t.mediaType){case core.BgMediaTypes.IMAGE:var n=i.findIndex(function(e){return l.includes(t.mediaId,e.relativeUri)});n>-1?i.unshift.apply(i,i.splice(n)):this.$log.error("can't find the image in media",t);break;case core.BgMediaTypes.VIDEO:var o=l(i).filter(function(e){return e.mediaType===core.MediaItemTypes.Video}).each(function(e){return e.active=!1}).find(function(e){return l.includes(t.mediaId,e.relativeUri)});o&&(o.active=!0),o||this.$log.error("can't find the video in media",t);break;default:this.$log.warn("don't know how to move "+t.mediaType+" to inline")}}},e.prototype.createEvent=function(e,t,i,n){return void 0===n&&(n=s.BIOrigins.EditPanel),{node:e,isReferencedField:!1,key:t.key,field:t.data,contentElementField:t,maskChanged:i===r.IEditEventType.VisibilityChange,whatChanged:i,BIOrigin:n}},e.prototype.updateGalleryOnViewer=function(e,t){t||(t=this.getMediaField(e.contentElement));var i=this.createEvent(e,t,r.IEditEventType.GalleryLayoutChange);this.nodeEditorManager.updateViewer(i)},e.prototype.updateFieldOnViewer=function(e,t,i){void 0===i&&(i=r.IEditEventType.VisibilityChange),t||(t=this.getMediaField(e.contentElement));var n=this.createEvent(e,t,i);return this.nodeEditorManager.updateViewer(n)},e.prototype.getMediaKey=function(e){return Object.keys(e.values).find(function(t){return"media"===e.values[t].type})},e.prototype.getMediaField=function(e,t){var i=this,n=this.getMediaKey(e),o=e.values[n];return{key:n,data:o,get active(){return i.isMediaActive(e,n)},set active(t){i.setMediaActive(e,n,t)},contentElement:e,node:t}},e.prototype.changeMediaFieldVisibility=function(e,t){var i=this.getMediaField(e.contentElement);return i.active&&i.active===t?this.$q.when(!1):(i.active=t,this.updateFieldOnViewer(e,i).then(function(){return!0}))},e.prototype.updateViewerInternal=function(e){return this.flags.headlessApi?this.$q.when():this.applicationState.isHeaderContent()?(this.updateViewerForInline(e,r.IEditEventType.ValueChange),this.$q.when()):this.sectionBackgroundService.updateViewer(this.modelTree.findIdentifyingNode(e))},e.prototype.changeMediaFieldVisibilityAndUpdateViewer=function(e,t){var i=this;return this.changeMediaFieldVisibility(e,t).then(function(){return i.updateViewerInternal(e)})},e.prototype.getVisibleMediaTypes=function(e){switch(this.mediaOverrideManager.getAllowedMediaOverride(e)){case a.PresetMediaTypes.SHAPE:return[cc.MediaPreviewType.Clipart,cc.MediaPreviewType.Shape];case a.PresetMediaTypes.IMAGE:return this.getAllowedMediaTypes(e,[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.ExtVideo]);case a.PresetMediaTypes.COAST2COAST:return this.getAllowedMediaTypes(e,[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.Video]);case a.PresetMediaTypes.AGGREGATOR:return[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages];case a.PresetMediaTypes.COLUMNBG:return[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.Video];default:return[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.ExtVideo]}},e.prototype.getAllowedMediaTypes=function(e,t){return e.isListItem&&this.slideShowService.isSlideShow(e.identifyingNode)?t.filter(function(e){return e!==cc.MediaPreviewType.MultipleImages}):t},e.prototype.isImageType=function(e,t){return e===cc.MediaPreviewType.SingleImage&&(!t||t===o.MediaSizeOptions.Cropped||t===o.MediaSizeOptions.Uncropped)},e.prototype.isSmallImageType=function(e){return e===cc.MediaPreviewType.Clipart||e===cc.MediaPreviewType.Shape},e}();t.MediaSectionUtils=c,angular.module("siteGeneratorEditorInternal").service("mediaSectionUtils",c)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(18),o=i(1),r=function(){function e(e,t,i,n,o,r,a,s,l,c){this.flags=e,this.consumerMediaUtils=t,this.mediaSectionUtils=i,this.mediaTypeResolver=n,this.modelTree=o,this.PresetMediaType=r,this.slideShowService=a,this.modelTreeHelpers=s,this.applicationState=l,this.undoRedo=c}return e.$inject=["flags","consumerMediaUtils","mediaSectionUtils","mediaTypeResolver","modelTree","PresetMediaType","slideShowService","modelTreeHelpers","applicationState","undoRedo"],e.prototype.getSelectedOption=function(e){var t=this.getMediaType(e),i=this.getOptions(e,t);return i&&i.items.length>0?i.items[i.selectedIndex]:null},e.prototype.getOptions=function(e,t){if(e.isListItem&&!this.modelTreeHelpers.isItemOfList(e)&&this.slideShowService.isSlideShow(e.identifyingNode))return this.getOptionsForSlideShow(e);switch(t){case cc.MediaPreviewType.SingleImage:return this.removeBgForListItem(e,this.getImageOptions(e));case cc.MediaPreviewType.MultipleImages:return this.removeBgForListItem(e,this.getGalleryOptions(e));case cc.MediaPreviewType.Video:return this.removeBgForListItem(e,this.getVideoOptions(e));case cc.MediaPreviewType.ExtVideo:return this.removeBgForListItem(e,this.getExternalVideoOptions(e));case cc.MediaPreviewType.Pattern:return this.getPatternOptions(e);case cc.MediaPreviewType.Clipart:case cc.MediaPreviewType.Shape:return this.buildOptions([n.MediaSizeOptions.Uncropped])}return this.buildOptions([])},e.prototype.updateMedia=function(e){var t=this;return this.updateMediaInternal(e).then(function(){return t.undoRedo.captureOperation(!1)})},e.prototype.updateMediaInternal=function(e){var t=this.mediaTypeResolver.getType(e);if(this.flags.sectionMedia&&this.modelTreeHelpers.isItemOfList(e))return this.mediaSectionUtils.updateViewerForListITem(e);var i=this.getSelectedOption(e);switch(i){case n.MediaSizeOptions.Box:case n.MediaSizeOptions.Cropped:case n.MediaSizeOptions.CroppedHeader:case n.MediaSizeOptions.Uncropped:return this.mediaSectionUtils.switchToInline(e,t);case n.MediaSizeOptions.Strip:case n.MediaSizeOptions.StripHeader:return this.mediaSectionUtils.switchToStrip(e,t);case n.MediaSizeOptions.Column:return this.mediaSectionUtils.switchToColumnBackground(e,t);case n.MediaSizeOptions.Background:return this.mediaSectionUtils.switchToBackground(e,t,!1);case n.MediaSizeOptions.BackgroundHeader:return this.mediaSectionUtils.switchToBackgroundHeader(e,t,!1);case n.MediaSizeOptions.BackgroundList:return this.mediaSectionUtils.switchToListBackground(e,t,!1);case n.MediaSizeOptions.BackgroundFull:return this.mediaSectionUtils.switchToFullListBackground(e,t,!1);default:return Promise.reject("can't handle media size: "+i)}},e.prototype.getMedia=function(e){return this.getMediaByType(e,this.getMediaType(e))},e.prototype.isHeaderWithNoMedia=function(e){return this.applicationState.isHeaderContent()&&!this.mediaSectionUtils.isMediaActive(e.contentElement)},e.prototype.hasBackgroundOrHasNoMedia=function(e){return!this.modelTreeHelpers.isItemOfList(e)&&this.mediaSectionUtils.getMediaLayoutFormat(e)===n.MediaLayoutFormats.Background},e.prototype.getMediaByType=function(e,t){if(!this.isHeaderWithNoMedia(e)){if(e.isList()&&!e.contentElement){var i=this.modelTree.getListHeader(e);i&&(e=i)}if(this.hasBackgroundOrHasNoMedia(e)){var n=this.mediaSectionUtils.getBackgroundMedia(e);if(n)return n}var o=this.mediaTypeResolver.toCoreType(t);if(o){var r=e.contentElement.getValuesByMediaType()[o][0];return r.mediaType===core.MediaItemTypes.ExtVideo&&this.consumerMediaUtils.addExtVideoThumbnail(r),r}}},e.prototype.hasAnyMedia=function(e){var t=!!this.mediaSectionUtils.getBackgroundMedia(e),i=this.mediaSectionUtils.isMediaActive(e.contentElement);return t||i},e.prototype.getMediaType=function(e){return this.mediaTypeResolver.getType(e)},e.prototype.getVisibleMediaTypes=function(e,t,i){var r=this;if(this.applicationState.isInMobileEditMode())return[{mediaType:this.getMediaType(e)}];var a=t===n.MediaLayoutFormats.Background?cc.MediaPreviewType.Video:cc.MediaPreviewType.ExtVideo,s=function(){var t=[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,a];return r.modelTreeHelpers.isItemOfList(e)||t.push(cc.MediaPreviewType.Pattern),t},l=function(e,t){return angular.extend({},{mediaType:e},{disabled:!0,tooltip:t,onTooltipClick:function(){return r.applicationState.goToSwitchPresetMode(o.BIOrigins.MediaSetting)},showTooltipIcon:!1})};switch(i){case this.PresetMediaType.SHAPE:return this.applicationState.isHeaderContent()?[{mediaType:cc.MediaPreviewType.Clipart},{mediaType:cc.MediaPreviewType.Shape}]:[{mediaType:cc.MediaPreviewType.Clipart},{mediaType:cc.MediaPreviewType.Shape},l(cc.MediaPreviewType.ExtVideo,"media-settings.disabled-tab-video"),l(cc.MediaPreviewType.MultipleImages,"media-settings.disabled-tab-gallery")];case this.PresetMediaType.IMAGE:return this.getAllowedMediaTypes(e,s());case this.PresetMediaType.COAST2COAST:return this.getAllowedMediaTypes(e,[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.Video,cc.MediaPreviewType.Pattern]);case this.PresetMediaType.AGGREGATOR:return this.convertToMediaTypeTabs([cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.Pattern]);case this.PresetMediaType.COLUMNBG:if(e.isListHeader()){var c=this.convertToMediaTypeTabs([cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.Video,cc.MediaPreviewType.Pattern]);return this.mediaSectionUtils.isListHeaderHidden(e)&&(c=c.filter(function(e){return e.mediaType!==cc.MediaPreviewType.MultipleImages})),c}return this.convertToMediaTypeTabs([cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.Video]);default:return this.convertToMediaTypeTabs(s())}},e.prototype.isImage=function(e){return this.getMediaType(e)===cc.MediaPreviewType.SingleImage},e.prototype.getOptionsForSlideShow=function(e){var t={};return t.items=[n.MediaSizeOptions.BackgroundHeader,n.MediaSizeOptions.StripHeader],t.selectedIndex=0,t},e.prototype.removeBgForListItem=function(e,t){return this.slideShowService.isSlideShow(this.modelTree.findIdentifyingNode(e))?t.items=[t.items[t.selectedIndex]]:this.modelTreeHelpers.isItemOfList(e)&&(t.items=t.items.filter(function(e){return e!==n.MediaSizeOptions.Background})),t.items[t.selectedIndex]||(t.selectedIndex=0),t},e.prototype.getImageOptions=function(e){switch(this.mediaSectionUtils.getMediaLayoutFormat(e)){case n.MediaLayoutFormats.Inline:var t=this.mediaSectionUtils.isFitMode(e);if(e.isListHeader()&&!t)return this.buildOptions([n.MediaSizeOptions.CroppedHeader,n.MediaSizeOptions.BackgroundHeader,n.MediaSizeOptions.BackgroundList,n.MediaSizeOptions.BackgroundFull]);var i=t?n.MediaSizeOptions.Uncropped:n.MediaSizeOptions.Cropped;return this.buildOptions([n.MediaSizeOptions.Cropped,n.MediaSizeOptions.Uncropped,n.MediaSizeOptions.Background],i);case n.MediaLayoutFormats.Strip:return e.isListHeader()?this.buildOptions([n.MediaSizeOptions.StripHeader,n.MediaSizeOptions.BackgroundHeader,n.MediaSizeOptions.BackgroundList,n.MediaSizeOptions.BackgroundFull]):this.buildOptions([n.MediaSizeOptions.Strip,n.MediaSizeOptions.Uncropped,n.MediaSizeOptions.Background]);case n.MediaLayoutFormats.Column:return this.buildOptions([n.MediaSizeOptions.Column,n.MediaSizeOptions.Uncropped,n.MediaSizeOptions.Background]);case n.MediaLayoutFormats.Background:if(e.isListHeader()){var o=this.mediaSectionUtils.listBackgroundType(e),r=[n.MediaSizeOptions.BackgroundHeader,n.MediaSizeOptions.BackgroundList,n.MediaSizeOptions.BackgroundFull];return this.buildOptions(r,o)}return this.mediaSectionUtils.isShapeVisible(e)?this.buildOptions([n.MediaSizeOptions.Background]):this.mediaSectionUtils.layoutHasColumns(e)?this.buildOptions([n.MediaSizeOptions.Column,n.MediaSizeOptions.Uncropped,n.MediaSizeOptions.Background],n.MediaSizeOptions.Background):this.mediaSectionUtils.layoutHasOnMedia(e)?this.buildOptions([n.MediaSizeOptions.Uncropped,n.MediaSizeOptions.Background],n.MediaSizeOptions.Background):this.mediaSectionUtils.layoutHasStrip(e)?this.buildOptions([n.MediaSizeOptions.Strip,n.MediaSizeOptions.Uncropped,n.MediaSizeOptions.Background],n.MediaSizeOptions.Background):this.buildOptions([n.MediaSizeOptions.Cropped,n.MediaSizeOptions.Uncropped,n.MediaSizeOptions.Background],n.MediaSizeOptions.Background);default:throw new Error("Uknown media layout format")}},e.prototype.getGalleryOptions=function(e){switch(this.mediaSectionUtils.getMediaLayoutFormat(e)){case n.MediaLayoutFormats.Inline:return this.buildOptions([n.MediaSizeOptions.Box,n.MediaSizeOptions.Background]);case n.MediaLayoutFormats.Strip:return this.buildOptions([n.MediaSizeOptions.Strip,n.MediaSizeOptions.Background]);case n.MediaLayoutFormats.Column:return this.buildOptions([n.MediaSizeOptions.Column,n.MediaSizeOptions.Background]);case n.MediaLayoutFormats.Background:return e.isListHeader()?this.buildOptions([n.MediaSizeOptions.BackgroundHeader]):this.mediaSectionUtils.isShapeVisible(e)?this.buildOptions([n.MediaSizeOptions.Background]):this.mediaSectionUtils.layoutHasColumns(e)?this.buildOptions([n.MediaSizeOptions.Column,n.MediaSizeOptions.Background],n.MediaSizeOptions.Background):this.mediaSectionUtils.layoutHasOnMedia(e)?this.buildOptions([n.MediaSizeOptions.Background]):this.mediaSectionUtils.layoutHasStrip(e)?this.buildOptions([n.MediaSizeOptions.Strip,n.MediaSizeOptions.Background],n.MediaSizeOptions.Background):this.buildOptions([n.MediaSizeOptions.Box,n.MediaSizeOptions.Background],n.MediaSizeOptions.Background);default:throw new Error("Uknown media layout format")}},e.prototype.getVideoOptions=function(e){switch(this.mediaSectionUtils.getMediaLayoutFormat(e)){case n.MediaLayoutFormats.Strip:return this.buildOptions([n.MediaSizeOptions.Strip,n.MediaSizeOptions.Background]);case n.MediaLayoutFormats.Column:return this.buildOptions([n.MediaSizeOptions.Column,n.MediaSizeOptions.Background]);case n.MediaLayoutFormats.Background:if(e.isListHeader()){if(e.isUserHidden())return this.buildOptions([n.MediaSizeOptions.BackgroundList]);var t=this.mediaSectionUtils.listBackgroundType(e),i=[n.MediaSizeOptions.BackgroundHeader,n.MediaSizeOptions.BackgroundList,n.MediaSizeOptions.BackgroundFull];return this.buildOptions(i,t)}return this.mediaSectionUtils.isShapeVisible(e)?this.buildOptions([n.MediaSizeOptions.Background]):this.mediaSectionUtils.layoutHasColumns(e)?this.buildOptions([n.MediaSizeOptions.Column,n.MediaSizeOptions.Background],n.MediaSizeOptions.Background):this.mediaSectionUtils.layoutHasOnMedia(e)?this.buildOptions([n.MediaSizeOptions.Background]):this.mediaSectionUtils.layoutHasStrip(e)?this.buildOptions([n.MediaSizeOptions.Strip,n.MediaSizeOptions.Background],n.MediaSizeOptions.Background):this.buildOptions([n.MediaSizeOptions.Box,n.MediaSizeOptions.Background],n.MediaSizeOptions.Background);default:throw new Error("Uknown media layout format")}},e.prototype.getExternalVideoOptions=function(e){return this.buildOptions([n.MediaSizeOptions.Box,n.MediaSizeOptions.Background])},e.prototype.getPatternOptions=function(e){if(e.isListHeader()){if(e.isUserHidden())return this.buildOptions([n.MediaSizeOptions.BackgroundList]);var t=this.mediaSectionUtils.listBackgroundType(e),i=[n.MediaSizeOptions.BackgroundHeader,n.MediaSizeOptions.BackgroundList,n.MediaSizeOptions.BackgroundFull];return this.buildOptions(i,t)}return this.buildOptions([n.MediaSizeOptions.Background])},e.prototype.buildOptions=function(e,t){return void 0===t&&(t=null),t?{items:e,selectedIndex:e.findIndex(function(e){return e===t})}:{items:e,selectedIndex:0}},e.prototype.filterTabAsSlideshow=function(e){return e.isListItem&&this.slideShowService.isSlideShow(e.identifyingNode)},e.prototype.getAllowedMediaTypes=function(e,t){return this.filterTabAsSlideshow(e)||this.mediaSectionUtils.isListHeaderHidden(e)?this.convertToMediaTypeTabs(t.filter(function(e){return e!==cc.MediaPreviewType.MultipleImages&&e!==cc.MediaPreviewType.Pattern})):this.convertToMediaTypeTabs(t)},e.prototype.convertToMediaTypeTabs=function(e){var t=this;return e.map(function(e){return t.convertToMediaTypeTab(e)})},e.prototype.convertToMediaTypeTab=function(e,t,i){return void 0===t&&(t=!0),{mediaType:e,disabled:!t,tooltip:i}},e}();t.SectionMedia=r,angular.module("siteGeneratorEditorInternal").service("sectionMedia",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(18),o=i(0),r=function(){function e(e,t,i,n,o,r,a,s,l,c){this.mediaFitCAB=e,this.$q=t,this.consumerMediaUtils=i,this.undoRedo=n,this.sectionMedia=o,this.mediaTypeResolver=r,this.mediaSectionCache=a,this.mediaSizeResolver=s,this.mediaSectionUtils=l,this.$log=c}return e.$inject=["mediaFitCAB","$q","consumerMediaUtils","undoRedo","sectionMedia","mediaTypeResolver","mediaSectionCache","mediaSizeResolver","mediaSectionUtils","$log"],e.prototype.toggle=function(e,t,i){var o,r=this;try{if(!(this.sectionMedia.hasAnyMedia(e)!==t))return this.$log.log("toggle was called but nothing to do",t),this.$q.when(!1)}catch(e){this.$log.error(e)}if(t){var a=this.mediaSectionCache.get(e),s=a.mediaType,l=a.mediaSizeOption;return l===n.MediaSizeOptions.Uncropped&&(l=n.MediaSizeOptions.Cropped),this.setOption(e,s,l).then(function(){r.mediaSectionUtils.isMediaSizeBackground(l)&&r.mediaSectionUtils.reportBackgroundVisibilityBI(e,!0)})}return this.setUnChangedSectionCache(e),this.mediaSectionUtils.nodeHasBackground(e)&&(o=this.mediaSectionUtils.resetBackgroundAndGetIt(e),this.mediaSectionUtils.reportBackgroundVisibilityBI(e,!1)),this.mediaSectionUtils.changeMediaFieldVisibilityAndUpdateViewer(e,!1).catch(function(){o&&(r.mediaSectionUtils.restoreBackground(e,o),r.mediaSectionUtils.getMediaField(e.contentElement).active=!1)}).then(function(){return r.undoRedo.captureOperation()})},e.prototype.setOption=function(e,t,i){var n=this;if(!i){var o=this.sectionMedia.getSelectedOption(e),r=this.sectionMedia.getMediaType(e);t=this.fixTargetType(o,t),i=this.mediaSizeResolver.resolve(r,o,t)}return this.mediaSectionCache.set(e,t,i),this.setOptionInternal(e,t,i).then(function(e){var t=n.normalizeResult(e);return t.doCapture&&n.undoRedo.captureOperation(!1),t.changed})},e.prototype.isVideoInlineSize=function(e){return e===n.MediaSizeOptions.Box||e===n.MediaSizeOptions.Cropped||e===n.MediaSizeOptions.Uncropped},e.prototype.fixTargetType=function(e,t){return this.consumerMediaUtils.isVideo(t)?this.isVideoInlineSize(e)?cc.MediaPreviewType.ExtVideo:cc.MediaPreviewType.Video:t},e.prototype.setImageOption=function(e,t){var i=this;switch(t){case n.MediaSizeOptions.Background:return this.mediaSectionUtils.switchToBackground(e,cc.MediaPreviewType.SingleImage);case n.MediaSizeOptions.BackgroundHeader:return this.mediaSectionUtils.switchToBackgroundHeader(e,cc.MediaPreviewType.SingleImage);case n.MediaSizeOptions.BackgroundFull:return this.mediaSectionUtils.switchToFullListBackground(e,cc.MediaPreviewType.SingleImage);case n.MediaSizeOptions.BackgroundList:return this.mediaSectionUtils.switchToListBackground(e,cc.MediaPreviewType.SingleImage);case n.MediaSizeOptions.Cropped:return this.mediaSectionUtils.getMediaLayoutFormat(e)===n.MediaLayoutFormats.Inline&&this.mediaSectionUtils.isFitMode(e)?this.mediaFitCAB.open(e,!1).then(function(e){return{changed:e,doCapture:!1}}):this.mediaSectionUtils.switchToInline(e,cc.MediaPreviewType.SingleImage);case n.MediaSizeOptions.Uncropped:var o=this.sectionMedia.getSelectedOption(e);return this.mediaFitCAB.open(e,!0).then(function(t){return{changed:t||i.undoFitMode(e,o),doCapture:!1}});case n.MediaSizeOptions.Column:return this.mediaSectionUtils.switchToColumnBackground(e,cc.MediaPreviewType.SingleImage);case n.MediaSizeOptions.Strip:return this.mediaSectionUtils.switchToStrip(e,cc.MediaPreviewType.SingleImage);default:return this.$q.reject("Can't set image to size "+t)}},e.prototype.setUnChangedSectionCache=function(e){this.mediaSectionCache.set(e,this.sectionMedia.getMediaType(e),this.sectionMedia.getSelectedOption(e))},e.prototype.normalizeResult=function(e){var t=o.isUndefined(e);return"boolean"==typeof e||t?{doCapture:!0,changed:e||t}:e},e.prototype.undoFitMode=function(e,t){return t!==n.MediaSizeOptions.Cropped&&this.setImageOption(e,t).then(function(){return!1})},e.prototype.setOptionInternal=function(e,t,i){switch(t){case cc.MediaPreviewType.SingleImage:return this.setImageOption(e,i);case cc.MediaPreviewType.MultipleImages:return this.setGalleryOption(e,i);case cc.MediaPreviewType.Video:case cc.MediaPreviewType.ExtVideo:return this.setVideoOption(e,i);case cc.MediaPreviewType.Pattern:return this.setPatternOption(e,i);case cc.MediaPreviewType.Clipart:case cc.MediaPreviewType.Shape:return this.mediaSectionUtils.setSmallImageOption(e,this.mediaTypeResolver.toCoreType(t));default:return this.$q.reject("Unsupported mediaType")}},e.prototype.setGalleryOption=function(e,t){switch(t){case n.MediaSizeOptions.Background:return this.mediaSectionUtils.switchToBackground(e,cc.MediaPreviewType.MultipleImages);case n.MediaSizeOptions.BackgroundHeader:return this.mediaSectionUtils.switchToBackgroundHeader(e,cc.MediaPreviewType.MultipleImages);case n.MediaSizeOptions.BackgroundFull:return this.mediaSectionUtils.switchToFullListBackground(e,cc.MediaPreviewType.MultipleImages);case n.MediaSizeOptions.BackgroundList:return this.mediaSectionUtils.switchToListBackground(e,cc.MediaPreviewType.MultipleImages);case n.MediaSizeOptions.Box:return this.mediaSectionUtils.switchToInline(e,cc.MediaPreviewType.MultipleImages);case n.MediaSizeOptions.Column:return this.mediaSectionUtils.switchToColumnBackground(e,cc.MediaPreviewType.MultipleImages);case n.MediaSizeOptions.Strip:return this.mediaSectionUtils.switchToStrip(e,cc.MediaPreviewType.MultipleImages);default:return this.$q.reject("Can't set gallery to size "+t)}},e.prototype.setVideoOption=function(e,t){switch(t){case n.MediaSizeOptions.Background:return this.mediaSectionUtils.switchToBackground(e,cc.MediaPreviewType.Video);case n.MediaSizeOptions.BackgroundHeader:return this.mediaSectionUtils.switchToBackgroundHeader(e,cc.MediaPreviewType.Video);case n.MediaSizeOptions.BackgroundFull:return this.mediaSectionUtils.switchToFullListBackground(e,cc.MediaPreviewType.Video);case n.MediaSizeOptions.BackgroundList:return this.mediaSectionUtils.switchToListBackground(e,cc.MediaPreviewType.Video);case n.MediaSizeOptions.Box:return this.mediaSectionUtils.switchToInline(e,cc.MediaPreviewType.ExtVideo);case n.MediaSizeOptions.Column:return this.mediaSectionUtils.switchToColumnBackground(e,cc.MediaPreviewType.Video);case n.MediaSizeOptions.Strip:return this.mediaSectionUtils.switchToStrip(e,cc.MediaPreviewType.Video);default:return this.$q.reject("Can't set video to size "+t)}},e.prototype.setPatternOption=function(e,t){switch(t){case n.MediaSizeOptions.Background:return this.mediaSectionUtils.switchToBackground(e,cc.MediaPreviewType.Pattern);case n.MediaSizeOptions.BackgroundHeader:return this.mediaSectionUtils.switchToBackgroundHeader(e,cc.MediaPreviewType.Pattern);case n.MediaSizeOptions.BackgroundFull:return this.mediaSectionUtils.switchToFullListBackground(e,cc.MediaPreviewType.Pattern);case n.MediaSizeOptions.BackgroundList:return this.mediaSectionUtils.switchToListBackground(e,cc.MediaPreviewType.Pattern);case n.MediaSizeOptions.Column:return this.mediaSectionUtils.switchToColumnBackground(e,cc.MediaPreviewType.Pattern);default:return this.$q.reject("Can't set pattern to size "+t)}},e}();t.SectionMediaSetter=r,angular.module("siteGeneratorEditorInternal").service("sectionMediaSetter",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(18),o=i(15),r=function(){function e(e,t,i,n){this.selections=e,this.nodeFetcher=t,this.modelTreeHelpers=i,this.mediaOverrideManager=n}return e.$inject=["selections","nodeFetcher","modelTreeHelpers","mediaOverrideManager"],e.prototype.set=function(e,t,i){this.selections.getForNode(e).mediaSizeOptions={mediaType:t,mediaSizeOption:i}},e.prototype.get=function(e){var t=this.selections.getForNode(e).mediaSizeOptions;return t&&(t.mediaType||t.mediaSizeOption)?t:this.modelTreeHelpers.isItemOfList(e)?{mediaType:cc.MediaPreviewType.SingleImage,mediaSizeOption:n.MediaSizeOptions.Cropped}:this.nodeFetcher.isNodeBody(e)&&!this.isSectionMediaShape(e)?e.isListHeader()?{mediaType:cc.MediaPreviewType.SingleImage,mediaSizeOption:n.MediaSizeOptions.BackgroundHeader}:{mediaType:cc.MediaPreviewType.SingleImage,mediaSizeOption:n.MediaSizeOptions.Background}:{mediaType:cc.MediaPreviewType.Clipart,mediaSizeOption:n.MediaSizeOptions.Box}},e.prototype.isSectionMediaShape=function(e){return this.mediaOverrideManager.getAllowedMediaOverrideForSingleOrList(e)===o.PresetMediaTypes.SHAPE},e}();t.MediaSectionCache=r,angular.module("siteGeneratorEditorInternal").service("mediaSectionCache",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(18),o=i(0),r=function(){function e(e){this.$log=e,this.transitions={},this.initTransitions()}return e.$inject=["$log"],e.prototype.resolve=function(e,t,i){var n=o.get(this.transitions,i+"."+e+"."+t);return n||((t?this.$log.info:this.$log.error)("couldn't find a target size from type: "+e+" size: "+(t||"unknown size(!!)")+" to "+i),t)},e.prototype.initTransitions=function(){var e=n.MediaSizeOptions,t=cc.MediaPreviewType;this.transitions[t.SingleImage]={},this.transitions[t.SingleImage][t.MultipleImages]={},this.transitions[t.SingleImage][t.MultipleImages][e.Box]=e.Cropped,this.transitions[t.SingleImage][t.ExtVideo]={},this.transitions[t.SingleImage][t.ExtVideo][e.Box]=e.Cropped,this.transitions[t.MultipleImages]={},this.transitions[t.MultipleImages][t.SingleImage]={},this.transitions[t.MultipleImages][t.SingleImage][e.Cropped]=e.Box,this.transitions[t.MultipleImages][t.SingleImage][e.Uncropped]=e.Box,this.transitions[t.MultipleImages][t.SingleImage][e.CroppedHeader]=e.BackgroundHeader,this.transitions[t.MultipleImages][t.SingleImage][e.StripHeader]=e.BackgroundHeader,this.transitions[t.MultipleImages][t.Video]={},this.transitions[t.MultipleImages][t.Pattern]={},this.transitions[t.ExtVideo]={},this.transitions[t.ExtVideo][t.SingleImage]={},this.transitions[t.ExtVideo][t.SingleImage][e.Cropped]=e.Box,this.transitions[t.ExtVideo][t.SingleImage][e.Uncropped]=e.Box,this.transitions[t.Video]={},this.transitions[t.Video][t.SingleImage]={},this.transitions[t.Video][t.SingleImage][e.CroppedHeader]=e.BackgroundHeader,this.transitions[t.Video][t.SingleImage][e.StripHeader]=e.BackgroundHeader,this.transitions[t.Pattern]={},this.transitions[t.Pattern][t.SingleImage]={},this.transitions[t.Pattern][t.SingleImage][e.CroppedHeader]=e.BackgroundHeader,this.transitions[t.Pattern][t.SingleImage][e.StripHeader]=e.BackgroundHeader,this.transitions[t.Pattern][t.SingleImage][e.Strip]=e.Background,this.transitions[t.Pattern][t.SingleImage][e.Column]=e.Background,this.transitions[t.Pattern][t.SingleImage][e.Cropped]=e.Background,this.transitions[t.Pattern][t.SingleImage][e.Uncropped]=e.Background,this.transitions[t.Pattern][t.Video]={},this.transitions[t.Pattern][t.Video][e.Strip]=e.Background,this.transitions[t.Pattern][t.Video][e.Column]=e.Background,this.transitions[t.Pattern][t.ExtVideo]={},this.transitions[t.Pattern][t.ExtVideo][e.Box]=e.Background,this.transitions[t.Pattern][t.MultipleImages]={},this.transitions[t.Pattern][t.MultipleImages][e.Box]=e.Background,this.transitions[t.Pattern][t.MultipleImages][e.Strip]=e.Background,this.transitions[t.Pattern][t.MultipleImages][e.Column]=e.Background},e}();t.MediaSizeResolver=r,angular.module("siteGeneratorEditorInternal").service("mediaSizeResolver",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a){this.solutionFetcher=e,this.mediaOverrideManager=t,this.modelTree=i,this.nodeFetcher=n,this.modelTreeHelpers=o,this.consumerMediaUtils=r,this.sectionBackgroundManager=a}return e.$inject=["solutionFetcher","mediaOverrideManager","modelTree","nodeFetcher","modelTreeHelpers","consumerMediaUtils","sectionBackgroundManager"],e.prototype.toCoreType=function(e,t){switch(void 0===t&&(t=!0),e){case cc.MediaPreviewType.Clipart:return core.MediaItemTypes.Clipart;case cc.MediaPreviewType.ExtVideo:return core.MediaItemTypes.ExtVideo;case cc.MediaPreviewType.Pattern:return core.MediaItemTypes.Pattern;case cc.MediaPreviewType.Shape:return core.MediaItemTypes.Shape;case cc.MediaPreviewType.MultipleImages:return t?core.MediaItemTypes.Image:core.BgMediaTypes.GALLERY;case cc.MediaPreviewType.SingleImage:return core.MediaItemTypes.Image;case cc.MediaPreviewType.Video:return core.MediaItemTypes.Video}},e.prototype.getType=function(e){var t=this.nodeFetcher.getNodeSitePart(e),i=this.solutionFetcher.getSectionSolution(e.containerPageId,this.modelTree.findIdentifyingNodeId(e),t);return this.getTypeFromSolution(e,i)},e.prototype.getTypeFromSolution=function(e,t){if(t)return e.isListHeader()&&!t[0].isListHeader()?this.getMediaTypeFromBackground(e,t):this.getInlineMediaType(e,t)},e.prototype.getTypeLabel=function(e){return this.consumerMediaUtils.mediaTypeToLabel(this.getType(e))},e.prototype.getInlineMediaType=function(e,t){var i=t[0].segments[0].getLE().getMediaLayout();return this.modelTreeHelpers.isItemOfList(e)||i||!this.nodeFetcher.isNodeBody(e)?this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(e):this.getMediaTypeFromBackground(e,t)},e.prototype.getMediaTypeFromBackground=function(e,t){var i=this.sectionBackgroundManager.getBackgroundSingleOrList(e,t);if(!i)return null;switch(i.mediaType){case"image":return cc.MediaPreviewType.SingleImage;case"video":return cc.MediaPreviewType.Video;case"pattern":return cc.MediaPreviewType.Pattern;case"color":return null;case"gallery":return cc.MediaPreviewType.MultipleImages;default:return cc.MediaPreviewType.SingleImage}},e}();t.MediaTypeResolver=n,angular.module("siteGeneratorEditorInternal").service("mediaTypeResolver",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.nodeFetcher=e,this.flags=t,this.applicationState=i}return e.$inject=["nodeFetcher","flags","applicationState"],e.prototype.isPanelShouldBeCard=function(){return this.flags.cardsToPanels&&this.applicationState.isEditMode()&&this.nodeFetcher.isCurrentNodeTpa()&&!this.nodeFetcher.isCurrentNodeTpaPanel()},e}();t.CardsPanels=n,angular.module("siteGeneratorEditorInternal").service("cardsPanels",n)},function(e,t,i){"use strict";angular.module("siteGeneratorEditorInternal").constant("GOOGLE_CUSTOM_SEARCH_PARAMS",{API_KEY:"AIzaSyDpFJq5nEyslcM84d8vtPDSebsD2MDaKvI",ENGINE_ID:"002755370288863419013:qihq0vmslui"})},function(e,t,i){"use strict";var n={IMAGE_PUBLIC_ROOT_GUID:"8aa61c23-bff9-4426-ae8c-c1fd569764bf",SHAPE_PUBLIC_ROOT_GUID:"b1dbbe33-cc31-4b23-b865-a81680f70976",CLIPART_PUBLIC_ROOT_GUID:"cfad1a19-5cae-4d27-9cb7-fbf39ab6b644",VIDEO_PUBLIC_ROOT_GUID:"d6b6b972-952c-4ab0-b46a-a6c05a0a94a5",BG_IMAGE_PUBLIC_ROOT_GUID:"c2a37dfc-36cf-4bfd-b940-55bac7bdc9e6",PRIVATE_IMAGES_AMOUNT:8,PUBLIC_IMAGES_AMOUNT:24};angular.module("siteGeneratorStaticsConsumerAppInternal").service("RECOMMENDED_TAB_PARAMS",function(){return n})},function(e,t,i){"use strict";var n=function(){function e(e,t,i){this.GOOGLE_CUSTOM_SEARCH_PARAMS=e,this.$window=t,this.$http=i}return e.$inject=["GOOGLE_CUSTOM_SEARCH_PARAMS","$window","$http"],e.prototype.fromGoogleImage=function(e){return{link:e.link,title:e.title,width:e.image.width,height:e.image.height,webpageLink:e.image.contextLink}},e.prototype.search=function(e){var t=this,i=e.query.split(/\s/);return e.png&&i.indexOf("png")<0&&i.push("-png"),e.video&&i.indexOf("video")<0&&i.push("-video"),this.$http.get("https://www.googleapis.com/customsearch/v1",{params:{q:i.join(" "),num:e.maxResults,searchType:"image",rights:"(cc_publicdomain|cc_attribute|cc_sharealike|cc_noncommercial).-(cc_nonderived)",googlehost:"google.com",imgColorType:"color",imgType:"photo",cx:this.GOOGLE_CUSTOM_SEARCH_PARAMS.ENGINE_ID,key:this.GOOGLE_CUSTOM_SEARCH_PARAMS.API_KEY}}).then(function(i){return(i.data.items||[]).filter(function(i){if(0===e.hostnames.length)return!0;var n=t.$window.document.createElement("a");return n.href=i.link,e.hostnames.some(function(e){return n.hostname.endsWith("."+e)||n.hostname===e})}).map(function(e){return t.fromGoogleImage(e)})})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("googleImageSearch",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(193),o=i(1),r=function(){function e(e,t,i,n,o,r,a,s,l){this.tpaService=e,this.tpaSettings=t,this.$element=i,this.$scope=n,this.consumerBiLogger=o,this.osUtils=r,this.$attrs=a,this.modelTree=s,this.flags=l}return e.$inject=["tpaService","tpaSettings","$element","$scope","consumerBiLogger","osUtils","$attrs","modelTree","flags"],e.prototype.$postLink=function(){var e=this;this.$scope.$watch(function(){return e.tpaType},function(t){t&&e.tpaSettings.registerTpaHandlers(t,e.node)}),this.$element.bind("click",function(){return e.$scope.$apply(function(){if(e.tpaType){if(e.flags.membersArea&&"login"===e.tpaType)return;var t=e.tpaService.getAppIdByType(e.tpaType),i=e.tpaService.getInstanceId(e.node);e.consumerBiLogger.apps.clickOnManageApp(e.origin,t,e.tpaType,i),e.consumerBiLogger.provisioning.tpaIntent(i,t,e.getProvisionType(e.origin),"ADI"),e.$scope.$eval(e.beforeOpen),e.tpaSettings.openManagement(e.origin,e.node,e.tpaType)}})})},e.prototype.getProvisionType=function(e){return e===n.TpaSettings.SECTION_ORIGIN?o.SdkBIEventType.Manage:o.SdkBIEventType.Topbar},Object.defineProperty(e.prototype,"tpaType",{get:function(){return this.tpaService.getNaiveType(this.$scope.$eval(this.$attrs[e.DIRECTIVE_NAME]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"node",{get:function(){var t=this.$attrs[e.ATTR_KEYS.NODE];return t?this.$scope.$eval(t):this.modelTree.getNodeByContentElementName(this.tpaType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this.$attrs[e.ATTR_KEYS.ORIGIN]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beforeOpen",{get:function(){return this.$attrs[e.ATTR_KEYS.BEFORE_OPENING]},enumerable:!0,configurable:!0}),e.DIRECTIVE_NAME="manageTpaButton",e.ATTR_KEYS={NODE:"manageTpaButtonTpaNode",BEFORE_OPENING:"manageTpaButtonBeforeOpening",ORIGIN:"manageTpaButtonOrigin"},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").directive(r.DIRECTIVE_NAME,function(){return{controller:r,restrict:"A"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var i=this;this.locationApi=e,this.geoCoder=t,this.decodeLocation=function(e){return i.geoCoder.decode(e)}}return e.$inject=["locationApi","geoCoder"],e.prototype.getLocation=function(){return this.locationApi.getGeoLocation().then(this.decodeLocation)},e}();t.LocationManager=n,angular.module("siteGeneratorLocationManagerInternal").service("locationManager",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.$q=e}return e.$inject=["$q"],e.prototype.decode=function(e){var t={location:{lat:e.latitude,lng:e.longitude}},i=new google.maps.Geocoder,n=this.$q.defer();return i.geocode(t,function(e,t){switch(t){case google.maps.GeocoderStatus.OK:n.resolve(e[0]);break;case google.maps.GeocoderStatus.ZERO_RESULTS:n.resolve(null);break;default:n.reject(t)}}),n.promise},e}();t.GeoCoder=n,angular.module("siteGeneratorLocationManagerInternal").service("geoCoder",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),o=i(0),r=function(){function e(e,t,i,n,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H,O,_,D,$){var N=this;this.$q=e,this.$timeout=t,this.$translate=i,this.storyServices=n,this.miscUtils=r,this.CcDialogBuilder=a,this.applicationParameters=s,this.consumerBiLogger=l,this.consumerBiLoggerHelpers=c,this.flags=d,this.simpleSolutionManager=u,this.mobileSolutionManager=p,this.tpaService=g,this.tpaDefinition=h,this.nodeManipulationService=m,this.undoRedo=f,this.sitePartTypes=v,this.pagesManager=S,this.presetHelpers=y,this.layoutSolver=T,this.wizardService=b,this.consumerPublishService=I,this.notification=P,this.modelTree=M,this.modelTreeHelpers=E,this.applicationState=w,this.LayoutGroup=C,this.designKit=A,this.$injector=L,this.overlayManager=B,this.siteState=k,this.themeChooser=H,this.tpaSolutionManager=O,this.consumerMenu=_,this.defaultSections=D,this.tpaSettings=$,this.sectionNode=function(e){return N.flags.widgetAppsPanel?N.modelTree.getTpaNodeByType(e):o.find(N.modelTree.getTpaNodes(),{contentElementType:e})}}return e.$inject=["$q","$timeout","$translate","storyServices","miscUtils","CcDialogBuilder","applicationParameters","consumerBiLogger","consumerBiLoggerHelpers","flags","simpleSolutionManager","mobileSolutionManager","tpaService","tpaDefinition","nodeManipulationService","undoRedo","sitePartTypes","pagesManager","presetHelpers","layoutSolver","wizardService","consumerPublishService","notification","modelTree","modelTreeHelpers","applicationState","LayoutGroup","designKit","$injector","overlayManager","siteState","themeChooser","tpaSolutionManager","consumerMenu","defaultSections","tpaSettings"],e.prototype.addTpaWidget=function(e,t,i){var n=this;return this.nodeManipulationService.addTpaWidget(e,t,i).then(function(t){var i=n.tpaService.getNaiveType(e.contentElementType);return n.createTpaPagesSolution(t,i).then(function(){return t})})},e.prototype.getSuggestionForHeader=function(e){var t=this.defaultSections.getSectionOfceType(e.node.contentElementType);return{ceType:t.ceType,id:t.id,rawSectionBrief:t}},e.prototype.createTpaPagesSolution=function(e,t,i,n){var r=this;return void 0===i&&(i={}),o.sequencePromises(e,function(e,i){var a=o.find(e.children,function(e){return-1!==e.contentElementType.indexOf(t)}),s=r.tpaService.getAppId(a);e.alias=t;var l=Date.now();return r.consumerBiLogger.apps.addNewTpaPageStart(s,"","by app",a.getId()),r.tpaSolutionManager.createTpaPageSolution(a,e).then(function(t){r.mobileSolutionManager.createMobileSolution(r.sitePartTypes.BODY,t),r.consumerBiLogger.pagesManager.addNewPageSuccess2(n,a.getContentElementType(),e.getDisplayName(),a.getId(),"",0,0,"",s,"by app",Math.round(Date.now()-l),!1),r.consumerBiLoggerHelpers.incExtraPagesCount()})})},e.prototype.addTpa=function(e,t,i){var n=this;void 0===t&&(t=void 0),void 0===i&&(i={navigate:!0,showMSG:!0});var o=this.$q.defer();return this.nodeManipulationService.addTpa(e,function(t){return n.postAddTpa(t,e,i).then(function(e){return o.resolve(e)})},t),o.promise},e.prototype.postAddTpa=function(e,t,i){var n=this;void 0===i&&(i={navigate:!1,showMSG:!1});var o=t.contentElementType,r=this.consumerBiLoggerHelpers.getEditMode(),a=e[0];return this.createTpaPagesSolution(e,t.contentElementType,i,r).then(function(){return n.flags.tpaHeader?n.$injector.get("sectionManager").addTPAHeaderToTargetId(t,a,0):n.$q.when()}).then(function(){if(i.navigate)return n.storyServices.story.selectedPage=a.id,n.pagesManager.goToPage(a.id).then(function(){if(o===n.applicationParameters.tpaTypes.Stores.type)return n.recalculateSiteHeader()}).then(function(){if(!n.flags.tpaHeader&&n.shouldPublish(t))return n.wizardService.publishStory(void 0,void 0,!0).catch(function(){return n.$q.when()})}).then(function(){var e=n.layoutSolver.getPartSolutions("body",n.storyServices.story.selectedPage),t=e.getSelectedSolution();if(n.storyServices.emitRenderedPart("body",t,e.getSolutionHeight(),n.storyServices.story.selectedPage,"desktop"),o===n.applicationParameters.tpaTypes.Stores.type)return n.storyServices.reRender("header")})}).then(function(){if(i.showMSG){var e=n.$translate.instant("builder.section-design.TPA_NAME."+t.getContentElementType());n.notification.show(n.$translate.instant("popups.after-tpa-add.text",{TPA:e}),2e3)}return a})},e.prototype.provisionWidget=function(e,t,i){var n=e.getContentElementType(),o=this.tpaService.getNaiveType(n),r=this.tpaService.sectionType(o);return this.tpaService.isTpaAdded(o)||!r?this.$q.when(!0):"hidden"===r?this.provisionWidgetWithHiddenSections(e,t,i):this.provisionSectionForWidget(this.sectionNode(o),o)},e.prototype.provisionWidgetWithHiddenSections=function(e,t,i){return this.addTpaWidget(e,t,i)},e.prototype.provisionSectionForWidget=function(e,t){var i=this;return this.addTpa(e,void 0,{showMSG:!0}).then(function(){if(t===i.applicationParameters.tpaTypes.Stores.type)return i.recalculateSiteHeader().then(function(){return i.storyServices.reRender("header")})}).then(function(){if(i.shouldPublish(e))return i.consumerPublishService.saveStory(void 0,void 0,!0)})},e.prototype.recalculateSiteHeader=function(){var e=this,t=this.layoutSolver.getSelectedSolution(this.sitePartTypes.HEADER);return t[0].isDirty=!0,t[0].calculateLayoutGroupStatus().then(function(){return e.simpleSolutionManager.detectAndHandleHeaderOrFooterFailure(e.sitePartTypes.HEADER)})},e.prototype.shouldPublish=function(e){return e.getContentElementType()!==this.applicationParameters.tpaTypes.GetSubscribers.type&&this.userCanPublish()},e.prototype.shouldPublishForTpaWidget=function(e){if(e.isTpaWidget){var t=this.tpaService.getNaiveType(e.getContentElementType());return this.applicationParameters.tpaTypes[t].publishAfterAddition&&this.userCanPublish()}},e.prototype.userCanPublish=function(){return!this.applicationState.isSupportStaffEditing(!1)},e.prototype.handleTpaWidgetPreviewSelected=function(e,t,i,o,r,a){var s=this,l=this.$q.defer(),c=o||this.overlayManager.dropTargetId,d=c!==n.DropTargetCalculator.FirstDropTargetId&&c;return this.nodeManipulationService.addNewContentElement(t,!1,e,function(t){s.provisionWidget(t,i,a).then(function(){s.tpaSolutionManager.createTpaPageSolution(t,e,d).then(function(e){s.mobileSolutionManager.createMobileSolution(s.sitePartTypes.BODY,e),(r?s.$q.when():s.storyServices.reRender("body").then(function(){if(s.shouldPublishForTpaWidget(t))return s.consumerPublishService.saveStory(void 0,void 0,!0)})).then(function(){return r?s.$q.when():s.waitForHeightChanged(e[0])}).then(function(){return l.resolve(t)})})})},i,d),l.promise},e.prototype.waitForHeightChanged=function(e){var t=this,i=e.getBoundingHeight(),n=0;return o.whilePromises(function(e){return!e&&n<6},function(){return t.$timeout(function(){return n++,e.getBoundingHeight()!==i},500)})},e.prototype.handleTpaPreviewSelected=function(e,t,i,n,r,a){var s=this;void 0===i&&(i=!1);var l=this.$q.defer(),c=i||this.applicationState.isForcedAddMode()||this.applicationState.isAddMode();c||delete t.node.dockToWidget;var d=t.preset&&!!o.get(t.preset,"data.isFullWidth"),u=this.flags.fullWidthTpaMargin&&d&&o.get(t.preset,"data.fullWidthMargins");return t.node.setTpaFullWidth(d),this.flags.fullWidthTpaMargin&&u&&u.left&&u.right&&t.node.setTpaFullWidthMargins(u),c?t.node.isTpaWidget?this.handleTpaWidgetPreviewSelected(e,t.node,t.preset,n,r,a).then(function(i){s.consumerMenu.calcMenuAnchors();var n=t.node.contentElementType;n=s.tpaService.getNaiveType(n),l.resolve(i),s.modelTree.increasePageLastRenderRevision(e.id),r||s.undoRedo.captureOperation(),s.tpaSettings.popupAfterTpaAdded(n,!0)}):t.node.isTpa&&this.addTpa(t.node,t.preset).then(function(e){s.consumerMenu.calcMenuAnchors();var i=t.node.contentElementType,n=o.find(e.children,{contentElementType:i});return l.resolve(n),r||s.undoRedo.captureOperation(!0,!1,!0),s.tpaSettings.popupAfterTpaAdded(i),s.storyServices.recalculateCurrentPage()}):this.tpaService.updateStyle(t.node,t.preset,t.isInverted,function(){s.setTpaBackground(t),s.undoRedo.captureOperation(!0,!1,!1,!0),l.resolve(t.node)}),l.promise},e.prototype.setTpaBackground=function(e){if(this.modelTree.canInvertTpa(e.node)){var t=this.simpleSolutionManager.getSectionSolution(e.node.containerPageId,e.node.id)[0],i=t.getLgData().strip.color;this.designKit.setTpaBg(t,e.isInverted),i!==t.getLgData().strip.color&&this.storyServices.reRender("body",e.node.containerPageId)}},e.prototype.solveTPACE=function(e,t,i,n,o,r){var a=this,s=e[t],l=this.presetHelpers.generateFlattenedListOfPreviewsForTpa(n,[s])[0];return this.handleTpaPreviewSelected(i,l,null,o,!0,r).then(function(e){return a.siteState.waitForChanges().then(function(){return a.flags.tpaHeader?{node:e,preview:l}:e})}).catch(function(e){return a.$q.when()})},e}();t.TpaSectionManager=r,angular.module("siteGeneratorBuilderInternal").service("tpaSectionManager",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(1),r=function(){function e(e,t,i,n){var r=this;this.mergedHeaderService=e,this.consumerBiLogger=t,this.modelTree=i,this.flags=n,this.validateUnmerged=function(){var e=r.modelTree.getPageNodeById(r.modelTree.homePageId);r.mergedHeaderService.isHeaderMerged(e)&&(r.mergedHeaderService.isHeaderMergeable(e,r.flags.mergedHeaderPhase2?{validateHeaderSolution:!1}:{})||r.flags.dontValidateMergedHeader||r.unmerge(e))},this.validateMerged=function(){var e=r.modelTree.getPageNodeById(r.modelTree.homePageId);r.mergedHeaderService.isHeaderMerged(e)&&r.mergedHeaderService.isHeaderMergeable(e)&&r.merge(e)},this.merge=function(e){r.handleMerge(!0,e)},this.unmerge=function(e){r.handleMerge(!1,e)},this.handleMerge=function(e,t){var i=e?o.BIHeaderTypes.Transparent:o.BIHeaderTypes.Solid;r.consumerBiLogger.sectionDesign.changeHeaderTransparencyStart(o.BIInitator.System,i),r.mergedHeaderService.setHeaderMerged(e,t,e).then(function(){return r.consumerBiLogger.sectionDesign.changeHeaderTransparencySuccess(o.BIInitator.System,i)})}}return e.$inject=["mergedHeaderService","consumerBiLogger","modelTree","flags"],e.prototype.init=function(){n.PubSub.subscribe(n.events.BEFORE_CAPTURE_OPERATION,this.validateUnmerged),n.PubSub.subscribe(n.events.NEW_STATE_STORY_WAS_SET,this.validateMerged)},e}();t.MergedHeaderValidator=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("mergedHeaderValidator",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a){this.simpleSolutionManager=e,this.solutionFetcher=t,this.sectionManager=i,this.modelTree=n,this.spinnerService=o,this.flags=r,this.undoRedo=a}return e.$inject=["simpleSolutionManager","solutionFetcher","sectionManager","modelTree","spinnerService","flags","undoRedo"],e.prototype.isPartial=function(e){return 0===e.id.indexOf("Partial lg ")},e.prototype.switchColumnPosition=function(e){var t=this;this.spinnerService.waitForMe("switchColumnPosition");var i=e.containerPageId,n=e.id,o=this.solutionFetcher.getSectionSolution(i,n);if(!(1!==o.length||o[0].getSegmentSignature().length<2)){var r=o[0],a=r.getSegmentSignature(),s=this.switchColumnPositionInSignature(a),l=this.simpleSolutionManager.createSingleSegementLg(e,s,void 0,i,this.modelTree.getAllVisibleContentElements());return l.getLayoutSelectionStore().copyLgRelatedData(i,r.getUniqueIdForSolution(),l.getUniqueIdForSolution()),this.simpleSolutionManager.replaceSectionOnPage(i,n,[l]).then(function(e){var i={direction:t.simpleSolutionManager.Animation.Direction.REVERSE,type:t.simpleSolutionManager.Animation.Type.CROSS_FADE,duration:.1};return t.sectionManager.startAnimatedRender(e,i)}).then(function(){t.spinnerService.imDone("switchColumnPosition"),t.undoRedo.captureOperation()})}},e.prototype.switchColumnPositionInSignature=function(e){var t=e.split(""),i=t.pop();return t.unshift(i),t.join("")},e}();t.PartialSectionManager=n,angular.module("siteGeneratorBuilderInternal").service("partialSectionManager",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h){this.simpleSolutionManager=e,this.sectionManager=t,this.solutionFetcher=i,this.layoutSolver=n,this.storyServices=o,this.mobileSolutionManager=r,this.layoutSelectionStoreProvider=a,this.applicationState=s,this.mergedHeaderService=l,this.sitePartTypes=c,this.modelTree=d,this.undoRedo=u,this.introManager=p,this.flags=g,this.$q=h}return e.$inject=["simpleSolutionManager","sectionManager","solutionFetcher","layoutSolver","storyServices","mobileSolutionManager","layoutSelectionStoreProvider","applicationState","mergedHeaderService","sitePartTypes","modelTree","undoRedo","introManager","flags","$q"],e.prototype.handlePreviewSelected=function(e,t,i){var o=this;t=t||this.storyServices.story.selectedPage;var r=this.applicationState.getContentFocus();return this.$q.when().then(function(){i=i||r.sitePart,n.each(e.solution,function(e){return e.setPage(t)});var a=o.solutionFetcher.getSectionSolution(t,e.previewNode.getId(),i),s=i===o.sitePartTypes.BODY?t:i,l=o.layoutSelectionStoreProvider.getKeyMap(e.solution,e.previewNode);return o.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(e.lss,e.dummyPageId,s,l,void 0,!1,!0),o.mobileSolutionManager.setMobileSolution(a,e.solution),o.storyServices.renderMobileSolution(i,t).then(function(){if(o.flags.mergedHeader&&i===o.sitePartTypes.HEADER&&o.mergedHeaderService.isHeaderMerged())return o.storyServices.renderMobileSolution(o.sitePartTypes.BODY,t)}).catch(function(e){console.log(e)})}).then(function(){return o.undoRedo.captureOperation(),e.previewNode})},e.prototype.onPartCalculated=function(e,t){var i=this;if(e===this.sitePartTypes.BODY){var o=this.simpleSolutionManager.getSectionMap(t);return n.sequencePromises(o,function(n,o){var r=i.modelTree.findById(o,t);return i.mobileSolutionManager.detectAndHandleMobileSolutionFailure(e,t,r,n)})}var r=void 0,a=void 0;if(e===this.sitePartTypes.HEADER){if(r=this.modelTree.getGeneralInformation(),this.flags.waas){var s=n.get(this.introManager,"data.extra.presets.mobile.header");if(s)a={preferedPresets:n.isArray(s)?s:[s]}}}else r=this.modelTree.getFooterInformation();return this.mobileSolutionManager.detectAndHandleMobileSolutionFailure(e,e,r,this.layoutSolver.getSelectedSolution(e),a)},e}();t.MobileSectionManager=o,angular.module("siteGeneratorBuilderInternal").service("mobileSectionManager",o);var r=function(){function e(e,t){this.solutionFetcher=e,this.mobileSolutionValidator=t}return e.$inject=["solutionFetcher","mobileSolutionValidator"],e.prototype.validateMobileSolution=function(e,t,i,n){var o=this.solutionFetcher.getSectionSolution(i,n,t);return this.mobileSolutionValidator.validate(t,e,o)},e.prototype.validateMobilePreset=function(e,t,i,n){var o=this.solutionFetcher.getSectionSolution(i,n,t);return this.mobileSolutionValidator.validatePreset(t,e,o)},e}();t.MobileSectionValidator=r,angular.module("siteGeneratorBuilderInternal").service("mobileSectionValidator",r)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(1),r=function(){function e(e,t,i){this.nodeFetcher=e,this.consumerBiLogger=t,this.consumerBiLoggerHelpers=i}return e.prototype.reportBIPanelClosed=function(){var e=this.nodeFetcher.getCurrentActiveNode();this.consumerBiLogger.contentEditor.panelClosed(e.getId(),e.getSpecificContentElementType(),e.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop()},e}(),a=function(){function e(e){this.applicationState=e}return e.$inject=["applicationState"],e.prototype.isSecondLevel=function(){return this.applicationState.isColorationMode()||this.applicationState.isFontMode()||this.applicationState.isAnimationMode()},e.prototype.back=function(){return this.isSecondLevel()?this.applicationState.goToDesignMode():this.applicationState.isColorationAdvancedMode()?this.applicationState.goToColorationPanel():void 0},e}(),s=function(e){function t(t,i,n,o){var r=e.call(this,o,n,i)||this;return r.applicationState=t,r}return n(t,e),t.$inject=["applicationState","consumerBiLoggerHelpers","consumerBiLogger","nodeFetcher"],t.prototype.back=function(){if(this.applicationState.isInEditPatterns())return this.applicationState.goToSectionMediaPanel();var e=this.applicationState.isInEditSectionMedia()?this.applicationState.childId():void 0;return e||this.reportBIPanelClosed(),this.applicationState.goToEditChildMode(e)},t}(r),l=function(e){function t(t,i,n,o){var r=e.call(this,n,o,i)||this;return r.applicationState=t,r}return n(t,e),t.$inject=["applicationState","consumerBiLoggerHelpers","nodeFetcher","consumerBiLogger"],t.prototype.back=function(){return this.applicationState.isInEditPatterns()?this.applicationState.goToSectionMediaPanel():(this.reportBIPanelClosed(),this.applicationState.goToEditChildMode())},t}(r),c=function(){function e(e,t,i){this.applicationState=e,this.consumerBiLoggerHelpers=t,this.$log=i}return e.$inject=["applicationState","consumerBiLoggerHelpers","$log"],e.prototype.back=function(){return this.applicationState.isInSectionBackgroundPanel()?this.applicationState.goToSectionMediaPanel():this.applicationState.goToSwitchPresetMode(this.consumerBiLoggerHelpers.getBackOrigin(this.origin))},Object.defineProperty(e.prototype,"origin",{get:function(){return this.applicationState.isInSectionMediaSettingsPanel()?o.BIOrigins.MediaSettingsPanel:this.applicationState.isInSectionColorPanel()?o.BIOrigins.SectionColorsPanel:this.applicationState.isInSectionFontPanel()?o.BIOrigins.SectionFontPanel:this.applicationState.isInSectionOrSlideShowAnimationPanel()?o.BIOrigins.SectionAnimationPanel:void this.$log.warn("can't find origin")},enumerable:!0,configurable:!0}),e}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("designPanelBackManager",a).service("switchPresetBackManager",c).service("singlePanelBackManager",l).service("listPanelBackManager",s)},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),a=function(){function e(e,t,i){this.getStageBackgroundColors=e,this.colorationUtils=t,this.flags=i}return e.$inject=["getStageBackgroundColors","colorationUtils","flags"],e.prototype.run=function(){return n(this,void 0,void 0,function(){var e=this;return o(this,function(t){switch(t.label){case 0:return[4,this.colorationUtils.initialize()];case 1:return t.sent(),this.updateBackgroundFromPalette(),[r.events.COLOR_PALETTE_CHANGED,r.events.SWITCH_DESIGN_KIT].forEach(function(t){return r.PubSub.subscribe(t,function(){return e.updateBackgroundFromPalette()})}),[2]}})})},e.prototype.updateBackgroundFromPalette=function(){var e=this.colorationUtils.getPaletteColors();e&&this.updateBackground(e)},e.prototype.createStyle=function(){var e=window.document.getElementById("stageBackgroundColors");if(e)return e.parentNode.removeChild(e),e;var t=window.document.createElement("style");return t.setAttribute("id","stageBackgroundColors"),t},e.prototype.updateBackground=function(e){var t=this,i=this.createStyle();i.innerHTML=this.flags.largerStage?".stage {\n        background: #e8eef5;\n      }":function(){var i=t.getStageBackgroundColors(e),n=i.gradientStart,o=i.gradientEnd,r=i.active,a=i.hover;return".stage {\n        background: linear-gradient(45deg, rgba("+n.rgba()+"), rgba("+o.rgba()+")) !important;\n      }\n      .active-highlight {\n        background: rgba("+r.rgba()+") !important;\n      }\n      .hover-highlight {\n        background: rgba("+a.rgba()+") !important;\n      }"}(),window.document.body.appendChild(i)},e}();t.StageStyler=a,angular.module("siteGeneratorStaticsConsumerAppInternal").service("stageStyler",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=function(){function e(e,t){var i=this;this.$translate=e,this.flags=t,this.on=function(){return window.onbeforeunload=function(){return i.$translate.instant("general.leave-note")}},this.off=function(){return window.onbeforeunload=null},this.setLoadWarning=function(){return window.onbeforeunload=function(){return i.$translate.instant("general.still-loading")}}}return e.$inject=["$translate","flags"],e.prototype.setup=function(){var e=this;this.setLoadWarning(),n.PubSub.subscribeOnce(n.events.SITE_IS_LOADED,function(){e.flags.debugMode||e.flags.previewRevision||e.flags.lessBeforeUnloadWarnings?e.off():e.on()})},e}();t.ExitNotification=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("exitNotification",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(171),r=function(){return function(e,t){this.url=e,this.dialogName=t}}(),a=function(){function e(e,t,i,a,s,l,c,d,u,p){var g,h=this;this.$translate=e,this.applicationState=t,this.CcDialogBuilder=i,this.flags=a,this.nodeFetcher=s,this.$log=l,this.nodeEditorManager=c,this.modelTreeHelpers=d,this.slideShowService=u,this.modelTree=p,this.states={patterns:function(){return new r("help.section.sectionMedia.patternsPanel",o.CONSUMER_DIALOGS.SECTION_BACKGROUNDS_HELP)},sectionMedia:function(){return new r("help.section.sectionMedia.mediaSettingsPanel",o.CONSUMER_DIALOGS.MEDIA_SETTINGS_PANEL_HELP)}},this.model=((g={})[n.STATES.BUILDER_EDIT_PATTERNS]=function(){return h.states.patterns()},g[n.STATES.BUILDER_SECTION_DESIGN_BACKGROUND]=function(){return h.states.patterns()},g[n.STATES.BUILDER_SECTION_MEDIA_EDIT]=function(){return h.states.sectionMedia()},g[n.STATES.BUILDER_SECTION_MEDIA]=function(){return h.states.sectionMedia()},g[n.STATES.BUILDER_DESIGN_KITS]=function(){return new r("help.design.menu",o.CONSUMER_DIALOGS.DESIGN_PANEL_HELP)},g[n.STATES.BUILDER_DESIGN_KIT_COLORATION]=function(){return new r("help.design.coloration",o.CONSUMER_DIALOGS.COLORATION_PANEL_HELP)},g[n.STATES.BUILDER_DESIGN_KIT_FONTS_NEW]=function(){return new r("help.design.fonts",o.CONSUMER_DIALOGS.FONT_PANEL_HELP)},g[n.STATES.BUILDER_DESIGN_KIT_ANIMATIONS]=function(){return new r("help.design.animations",o.CONSUMER_DIALOGS.ANIMATION_PANEL_HELP)},g[n.STATES.BUILDER_PAGES_MEMBERS_SIGNUP_SETTINGS]=function(){return new r("help.members.signup-settings-panel",o.CONSUMER_DIALOGS.MEMBERS_SIGNUP_SETTINGS)},g[n.STATES.BUILDER_SELECTED_PAGE]=function(){return new r(h.applicationState.isInMobileEditMode()?"help.pages.mobile":"help.pages.menu",o.CONSUMER_DIALOGS.PAGES_PANEL_HELP)},g[n.STATES.BUILDER_EDIT_LOGIN]=function(){return new r("help.members.login-panel",o.CONSUMER_DIALOGS.MEMBERS_LOGIN_SETTINGS)},g[n.STATES.BUILDER_SWITCH_PRESET]=function(){return new r(h.applicationState.isInMobileEditMode()?"help.switch-design.mobile":h.flags.mergedHeader&&h.applicationState.isHeaderContent()?"help.switch-design.header":"help.section.replace",o.CONSUMER_DIALOGS.SECTION_REPLACE_HELP)},g[n.STATES.BUILDER_SECTION_DESIGN_COLORS]=function(){return new r("help.section.colors",o.CONSUMER_DIALOGS.SECTION_COLORS_HELP)},g[n.STATES.BUILDER_SECTION_DESIGN_FONTS]=function(){return new r("help.section.font",o.CONSUMER_DIALOGS.SECTION_FONT_HELP)},g[n.STATES.BUILDER_SECTION_DESIGN_ANIMATIONS]=function(){return new r("help.section.animations",o.CONSUMER_DIALOGS.SECTION_ANIMATIONS_HELP)},g[n.STATES.BUILDER_SLIDESHOW_ANIMATIONS]=function(){return new r("help.section.animations",o.CONSUMER_DIALOGS.SECTION_ANIMATIONS_HELP)},g[n.STATES.BUILDER_EDIT]=function(){var e=h.nodeFetcher.getCurrentActiveNode(),t=function(){if(h.applicationState.isInMobileEditMode())return"help.section.editMobileSection";if(h.nodeEditorManager.isSocialEditor())return"help.social.menu";if(h.applicationState.isFooterContent())return"help.section.edit(Footer)";if(h.applicationState.isInEditLogin())return"help.members.login-panel";var t="help.section.edit("+e.contentElementType+")";return function(e){return h.$translate.instant(e)!==e}(t)?t:h.flags.sectionMedia?"help.section.sectionMedia.editSection":"help.section.editSection"};return new r(h.$translate.instant(e.isListItem||e.nodeDescription.isListItem?h.modelTreeHelpers.isItemOfList(e)?"help.section.editListItem":h.slideShowService.isSlideShow(h.modelTree.findIdentifyingNode(e))?"help.section.editSlideShow":h.flags.sectionMedia?"help.section.sectionMedia.editListPageSection":"help.section.editListPageSection":t()),o.CONSUMER_DIALOGS.SECTION_ANIMATIONS_HELP)},g),this.flags.largerStage&&(this.model[n.STATES.BUILDER_SECTION_DESIGN_COLORS_EDIT]=function(){return new r("help.section.colors",o.CONSUMER_DIALOGS.SECTION_COLORS_HELP)},this.model[n.STATES.BUILDER_SECTION_DESIGN_FONTS_EDIT]=function(){return new r("help.section.font",o.CONSUMER_DIALOGS.SECTION_FONT_HELP)},this.model[n.STATES.BUILDER_SECTION_DESIGN_ANIMATIONS_EDIT]=function(){return new r("help.section.animations",o.CONSUMER_DIALOGS.SECTION_ANIMATIONS_HELP)},this.model[n.STATES.BUILDER_SLIDESHOW_ANIMATIONS_EDIT]=function(){return new r("help.section.animations",o.CONSUMER_DIALOGS.SECTION_ANIMATIONS_HELP)})}return e.$inject=["$translate","applicationState","CcDialogBuilder","flags","nodeFetcher","$log","nodeEditorManager","modelTreeHelpers","slideShowService","modelTree"],e.prototype.resolve=function(e){void 0===e&&(e=this.applicationState.getCurrentStateName());var t=this.model[e];if(!t)return this.$log.error("helpDialogManager: can't resolve state:",e),{url:null,dialogName:null};var i=t(),n=i.url,o=i.dialogName;return{url:n=this.$translate.instant(n),dialogName:o}},e.prototype.stateHasHelp=function(e){return void 0===e&&(e=this.applicationState.getCurrentStateName()),!!this.model[e]},e.prototype.show=function(){var e=this.resolve(),t=e.url,i=e.dialogName;if(t&&i)return this.CcDialogBuilder.showSupportIframe(this.$translate.instant(t),i);this.$log.warn("help dialog is missing the url or dialog name",t,i)},e}();t.HelpDialogManager=a,angular.module("siteGeneratorEditorInternal").service("helpDialogManager",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(59),o=function(){function e(e,t,i,n,o,r,a,s){this.masterPageOverlayModel=e,this.consumerBiLogger=t,this.overlayScroller=i,this.spinnerService=n,this.tpaSettings=o,this.tpaService=r,this.undoRedo=a,this.modelTree=s}return e.$inject=["masterPageOverlayModel","consumerBiLogger","overlayScroller","spinnerService","tpaSettings","tpaService","undoRedo","modelTree"],e.prototype.isMasterPageChildAdded=function(e){var t=this.modelTree.getNodeByContentElementName(e);return t&&!t.userHidden},e.prototype.afterAddingMasterPageApp=function(e,t){var i=e.getContentElementType();e.userHidden=!1,this.undoRedo.captureOperation(),this.spinnerService.imDone("onAddApp"),this.tpaSettings.popupAfterTpaAdded(i,!1),n.ChatManager.isChat(i)&&this.overlayScroller.scrollToBottom();var o=this.tpaService.getInstanceId(e);this.consumerBiLogger.pagesManager.addTpaPackageSuccess(0,this.tpaService.getAppId(e,!0),null,Date.now()-t,e.getId(),o)},e}();t.MasterPageManager=o,angular.module("siteGeneratorBuilderInternal").service("masterPageManager",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(251),r=i(2),a=i(0),s=function(){function e(e,t,i,n,o,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A){var L=this;this.CONSUMER_DIALOGS=e,this.applicationParameters=t,this.modelTree=i,this.tpaService=n,this.initService=o,this.pagesManager=a,this.notification=s,this.previewService=l,this.CcDialogBuilder=c,this.$translate=d,this.$state=u,this.undoRedo=p,this.menuService=g,this.flags=h,this.applicationState=m,this.$timeout=f,this.storyServices=v,this.consumerBiLogger=S,this.consumerBiLoggerHelpers=y,this.spinnerService=T,this.consumerMenu=b,this.$stateParams=I,this.sectionManager=P,this.nodeManipulationService=M,this.$q=E,this.seoManager=w,this.tpaHeader=C,this.simpleSolutionManager=A,this.saveChanges=function(){L.consumerMenu.calcMenuAnchors(),L.undoRedo.captureOperation()},this.togglePageVisibility=function(e){var t=L.modelTree.getPageNodeById(e);L.pagesManager.togglePageVisibility(t),t.hidePage?(L.notification.show("toasters.page-hidden"),r.PubSub.fire(r.events.PAGE_HIDDEN,t)):r.PubSub.fire(r.events.PAGE_SHOWN,t),L.consumerBiLogger.pagesManager.hideShowPage(t.hidePage?"hide":"show",L.tpaService.getAppIdByPageNode(t)),L.saveChanges()}}return e.$inject=["CONSUMER_DIALOGS","applicationParameters","modelTree","tpaService","initService","pagesManager","notification","previewService","CcDialogBuilder","$translate","$state","undoRedo","menuService","flags","applicationState","$timeout","storyServices","consumerBiLogger","consumerBiLoggerHelpers","spinnerService","consumerMenu","$stateParams","sectionManager","nodeManipulationService","$q","seoManager","tpaHeader","simpleSolutionManager"],e.prototype.onMountPanel=function(){var e=this;this.initService.loaded().then(function(){var t=e.consumerBiLoggerHelpers.popPanelSource();if(e.consumerBiLogger.pagesManager.pagesPanelIsLoaded(t||"second topbar"),e.flags.dataFixerMenuItems&&e.removeDuplicateItems(e.menuService.menuItems),e.applicationState.isSelectedPageMode()){var i=e.$stateParams.pageId;if(i&&!e.isSelectedPage(i)){var n=e.modelTree.getPageNodeById(i);n&&e.goToPage(n)}}})},e.prototype.onUnmountPanel=function(){this.consumerBiLogger.pagesManager.pagesPanelWasClosed("pages panel")},e.prototype.cleanTpaWidgets=function(e){var t=this,i=[];a.each(this.modelTree.getPagesNodes(),function(n){i.push.apply(i,t.modelTree.getTpaWidgetsInPage(n,e))}),this.flags.tpaHeader&&i.push.apply(i,this.tpaHeader.getTpaHeadersOfWidget(i)),a.each(i,function(e){t.nodeManipulationService.deleteNode(e,e.containerPageId,void 0,function(){t.modelTree.markPageAsDirty(e.containerPageId),t.simpleSolutionManager.removeSectionFromSolutionLGs(e.containerPageId,e.id)})})},e.prototype.widgetsWithHiddenSection=function(e){var t=this;return e.children.reduce(function(e,i){if(!i.widgetRef)return e;var n=t.tpaService.getNaiveType(i.contentElementType);return"hidden"===t.tpaService.sectionType(n)&&e.indexOf(n)<0&&e.push(n),e},[])},e.prototype.deletePage=function(e){var t=this,i=this.modelTree.getNodeById(e);if(!i)return this.$q.reject();var n,o=i.tpaSection||i.tpaExtraPage,s=this.tpaService.getAppIdByPageNode(i);return s&&(n=s&&this.tpaService.getClientSpecByAppId(s),this.consumerBiLogger.apps.removeTpaStart(o,s,n&&n.instance,i.getId())),this.$q.resolve().then(function(){if(!t.pagesManager.isHome(e)){var n=t.modelTree.getNodeById(e),s=t.$q.defer();o&&(a.each(t.pagesManager.getTpaExtraPages(o),function(i){i.id!==e&&(t.flags.coreCleanLssOnRemove?t.nodeManipulationService.deletePage(i,"body",a.noop,a.noop):t.nodeManipulationService.deletePageById(i.id,"body",a.noop,a.noop))}),t.cleanTpaWidgets(o));var l=t.flags.dontGoToPage?t.setSelectedPageAndGoTo:t.setSelectedPage,c=function(){s.resolve();var e=t.widgetsWithHiddenSection(i);if(t.flags.wixEvents&&e[0]){var o=e.map(function(e){return t.sectionManager.clearHiddenSection(e)});t.$q.all(o).then(function(){return r.PubSub.fire(r.events.PAGE_DELETED,n)})}else r.PubSub.fire(r.events.PAGE_DELETED,n)};return t.flags.coreCleanLssOnRemove?t.nodeManipulationService.deletePage(n,"body",l.bind(t),c):t.nodeManipulationService.deletePageById(e,"body",l.bind(t),c),s.promise}}).then(function(){if(t.consumerMenu.calcMenuAnchors(),t.undoRedo.captureOperation(),o===t.applicationParameters.tpaTypes.Stores.type)return t.sectionManager.recalculateSiteHeader().then(function(){return t.storyServices.reRender("header")})}).then(function(){t.applicationState.isSupportStaffEditing()}).then(function(){t.flags.smartAssistTpa&&r.PubSub.fire(r.events.TPA_DELETED,i),t.consumerBiLogger.pagesManager.deletePageSuccess(s),s&&t.consumerBiLogger.apps.removeTpaPackageSuccess(t.consumerBiLoggerHelpers.extraPagesCount(),s,null,null,i.getId(),n&&n.instance)})},e.prototype.reorderPage=function(e,t,i){var n=this;this.goToPage(e);var o=this.modelTree.getNodeById(e.id);this.consumerBiLogger.pagesManager.reorderPage(t,i,this.tpaService.getAppIdByPageNode(o)),this.saveChanges(),this.$timeout(function(){return n.menuService.refresh()})},e.prototype.goToDesktopPage=function(e){var t=this;return this.pagesManager.goToPage(e.id).then(function(){return t.storyServices.story.selectedPage=e.id})},e.prototype.goToTpaPage=function(e){var t=this.modelTree.getNodesByContentElementName(e).filter(function(e){return e.containerPageId})[0];t&&this.pagesManager.getCurrentPageName()!==t.containerPageId&&this.applicationState.goToPage(t.containerPageId)},e.prototype.goToPage=function(e,t){var i=this;if(void 0===t&&(t=!0),this.storyServices.story.selectedPage!==e.id){var o=this.consumerBiLoggerHelpers.popPanelSource();(!this.flags.newTopBar&&!this.flags.textManagerTours||t)&&this.applicationState.goToPage(e.id);var r=this.modelTree.getNodeById(e.id),a=this.tpaService.getAppIdByPageNode(r);return this.consumerBiLogger.pagesManager.clickOnPage(e.name,a,o||"pages panel"),(this.applicationState.isInMobileEditMode()?this.applicationState.goToMobilePage(e.id):this.goToDesktopPage(e)).then(function(){return i.$state.current.name===n.STATES.BUILDER_PAGES_SEO&&i.$state.go("^"),i.setSelectedPage(e.id)}).then(function(){i.consumerBiLogger.pagesManager.gotoPageSuccess(e.name,a,o||"pages panel")}).finally(function(){i.spinnerService.waitForStop().then(function(){var e=i.previewService.getOverlayContainer();e&&(e.scrollTop=0)})})}},e.prototype.renamePage=function(e,t){var i=this.modelTree.getNodeById(e);if(!i)throw e+" without a corresponding node";this.pagesManager.renamePage(e,t),r.PubSub.fire(r.events.PAGE_RENAMED),this.consumerBiLogger.pagesManager.renamePage(this.tpaService.getAppIdByPageNode(i)),this.saveChanges()},e.prototype.setSelectedPage=function(e){return this.applicationState.clearContentFocus(),this.storyServices.story.selectedPage=e,this.storyServices.recalculateCurrentPage().then(function(){r.PubSub.fire(r.events.PAGE_CHANGED)})},e.prototype.setSelectedPageAndGoTo=function(e){return this.applicationState.clearContentFocus(),this.$state.includes(n.STATES.BUILDER_PAGES)&&this.applicationState.goToPage(e),this.storyServices.story.selectedPage=e,this.storyServices.recalculateCurrentPage().then(function(){r.PubSub.fire(r.events.PAGE_CHANGED)})},e.prototype.addPage=function(){this.consumerBiLogger.pagesManager.addPageClick("pages-panel"),this.applicationState.goToAddPageMode(),this.flags.keepPagesPanelOpen&&(this.applicationState.shouldReopenPagesPanel=!0)},e.prototype.canManagePage=function(e,t){void 0===t&&(t=!0);var i=this.modelTree.getNodeById(e.id);if(!i)return!1;if(this.flags.membersArea&&i.membersArea)return i.membersArea.isParent;if(!i.tpaExtraPage)return!0;var n=this.tpaService.getNaiveType(i.tpaExtraPage);return t&&"hidden"===this.tpaService.sectionType(n)},e.prototype.canReorderPage=function(e){if(!this.flags.membersArea)return this.canManagePage(e);var t=this.modelTree.getNodeById(e.id);return(!t||!t.membersArea)&&this.canManagePage(e)},e.prototype.goToDesktopEditMode=function(){var e=this;return this.consumerBiLoggerHelpers.setPanelSource("pages panel"),this.consumerBiLogger.builder.switchBuilderTypeMobileDesktopClick("pages panel","desktop"),this.consumerBiLoggerHelpers.resetLoadTime(),this.applicationState.disableMobileEditor().then(function(){var t=e.consumerBiLoggerHelpers.popPanelSource();t&&e.consumerBiLogger.builder.switchBuilderTypeMobileDesktopSuccess(t,"desktop")}).then(function(){return e.$state.go(n.STATES.BUILDER_ADD_PAGE)})},e.prototype.openPagesPanelHelp=function(){this.CcDialogBuilder.showSupportIframe(this.getHelpPopupLink(),this.CONSUMER_DIALOGS.PAGES_PANEL_HELP)},e.prototype.getHelpPopupLink=function(){return this.$translate.instant(this.applicationState.isInMobileEditMode()?"help.pages.mobile":"help.pages.menu")},e.prototype.closePagesPanel=function(){this.flags.cardsToPanels?this.applicationState.goToBuilder():this.$state.go("^"),this.flags.keepPagesPanelOpen&&(this.applicationState.shouldReopenPagesPanel=!1)},e.prototype.isInMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},e.prototype.isSelectedPage=function(e){return this.pagesManager.isSelectedPage(e)},e.prototype.isHighlighted=function(e){return this.highlight===e},e.prototype.isDisabledPage=function(e){return this.pagesManager.isDisabledPage(e)},e.prototype.isHiddenPage=function(e){return this.pagesManager.isHiddenPage(e)},Object.defineProperty(e.prototype,"menuItems",{get:function(){return this.menuService.menuItems},enumerable:!0,configurable:!0}),e.prototype.getMenuItems=function(e,t){var i=this;return void 0===t&&(t=!0),this.menuService.getMenuItems(e).filter(function(e){return t?i.canReorderPage(e):!i.canReorderPage(e)})},e.prototype.nameIsValid=function(e){return e.length<=core.GENERAL_VALIDATIONS.PAGE_NAME_MAX_LENGTH&&!this.seoManager.hasEmoji(e)},e.prototype.isContainerOfUnmanageable=function(e){var t=this.modelTree.getNodeById(e.id);return!!(this.flags.membersArea&&t&&t.membersArea)||t&&t.tpaSection},e.prototype.iconName=function(e){if(this.pagesManager.isHome(e.id))return"cc-icon-home";var t=this.modelTree.getNodeById(e.id);if(!t)return"";var i="";return this.pagesManager.isHome(e.id)?i="cc-icon-home":t.tpaSection===this.applicationParameters.tpaTypes.Blog.type?i="cc-icon-blog":t.tpaSection===this.applicationParameters.tpaTypes.Blog2.type?i="cc-icon-blog2":t.tpaSection===this.applicationParameters.tpaTypes.Stores.type?i="cc-icon-store":t.tpaSection===this.applicationParameters.tpaTypes.Bookings.type?i="cc-icon-booking":t.tpaExtraPage===this.applicationParameters.tpaTypes.Events.type&&(i="cc-icon-events"),i},e.prototype.openActionsDialog=function(e,t,i){var n=this;this.consumerBiLogger.pagesManager.clickOnSettings(t.name);var r={idForActions:t.id,saveChanges:this.saveChanges,togglePageVisibility:this.togglePageVisibility,activePageRenameForm:i,setSelectedPage:function(e){return n.setSelectedPage(e)}},a={parent:angular.element(document.body),hasBackdrop:!1,clickOutsideToClose:!0,templateUrl:"views/page-menu-dialog.html",controller:o.PageMenuDialog,controllerAs:"$ctrl",onShowing:this.flags.dontGoToPage&&function(){n.highlight=t.id},onRemoving:this.flags.dontGoToPage&&function(){n.highlight=null},locals:{$event:this.manipulateEvent(e),selected:r}};this.CcDialogBuilder.show(a)},e.prototype.hasInfoTip=function(e){var t=this.modelTree.getNodeById(e.id);return!!t&&!!(this.flags.membersArea&&t.membersArea&&t.membersArea.isParent)},e.prototype.getInfoTip=function(e){var t=this.modelTree.getNodeById(e.id);if(t&&this.flags.membersArea&&t.membersArea&&t.membersArea.isParent)return"members-area.info-popup"},e.prototype.onTooltipClick=function(e){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.members.pages-panel"),this.CONSUMER_DIALOGS.MEMBERS_PAGES_HELP)},e.prototype.fixPageNameIfNeeded=function(e){return this.nameIsValid(e)?e:this.seoManager.removeEmojis(e).slice(0,core.GENERAL_VALIDATIONS.PAGE_NAME_MAX_LENGTH)},e.prototype.manipulateEvent=function(e){var t=angular.element(e.target).offset();return e.clientX=Math.round(t.left),e.clientY=Math.round(t.top),e},e.prototype.removeDuplicateItems=function(e){if((this.flags.lodash4?a.uniqBy:a[String("unique")])(e,function(e){return e.id}).length!==e.length){var t=[];e.forEach(function(i,n){e.slice(n+1).forEach(function(e){i.id===e.id&&t.push(n)})}),t.forEach(function(t){return e.splice(t,1)})}},e}();t.PagesPanelManager=s,angular.module("siteGeneratorBuilderInternal").service("pagesPanelManager",s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(273);angular.module("siteGeneratorStaticsConsumerAppInternal").component("fakeBrowserBar",{templateUrl:"views/preview/fake-browser-bar.html",controller:n.FakeBrowserBar,bindings:{label:"@",url:"@",onBarClick:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(1),r=i(10),a="large",s="medium",l="small",c="tiny",d=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m){var f=this;this.suggestDomainService=e,this.previewService=t,this.goToEditorService=i,this.applicationState=n,this.pagesPanelManager=o,this.cabbieHover=r,this.initService=a,this.modelTree=s,this.$translate=l,this.previewScale=c,this.flags=d,this.$rootScope=u,this.menuService=p,this.consumerBiLogger=g,this.publishService=h,this.consumerBiLoggerHelpers=m,this.pageItems=[],this.unsubscribes=[],this.isAppReady=!1,this.MAX_PAGE_CHARS=this.flags.largerStage?20:8,this.initService.loaded().then(function(){return f.isAppReady=!0})}return e.$inject=["suggestDomainService","previewService","goToEditorService","applicationState","pagesPanelManager","cabbieHover","initService","modelTree","$translate","previewScale","flags","$rootScope","menuService","consumerBiLogger","publishService","consumerBiLoggerHelpers"],e.prototype.$onInit=function(){var e=this;this.isMobileMode=this.applicationState.isInMobileEditMode(),this.$rootScope.$on("switchEditModeStart",function(t,i,n){e.isMobileMode=n}),this.initService.loaded().then(function(){e.listenToPagesChanges(),e.refreshPages()})},e.prototype.zoomedIn=function(){return this.previewScale.getScaleFactor()>r.PreviewScale.MinScaleFactor},e.prototype.getUrl=function(){return this.normelizeUrl(this.url)+" "},e.prototype.normelizeUrl=function(e){var t=e.replace(/(^\w+:|^)\/\//,"");return t.startsWith("www.")?t:"www."+t},e.prototype.shrinkString=function(e,t){if(e.length<=t)return e;var i=e.substr(0,t);return i.endsWith(".")&&(i=i.slice(0,-1)),i+"..."},e.prototype.goToEditor=function(){this.goToEditorService.launchDialog(o.BIOrigins.FloatingButton)},e.prototype.isDomainConnected=function(){return this.flags.stopExcessiveDSCalls?this.publishService.isDomainConnected():this.previewService.isDomainConnected()},e.prototype.showGoToEditor=function(){return!this.isMobileMode&&(this.flags.stopExcessiveDSCalls?this.publishService.isSitePublished():this.previewService.isSitePublished())},e.prototype.onManageClick=function(){this.shouldShowPagesDropDown&&(this.refreshPages(),this.cabbieHover.show({target:angular.element(".current-page"),element:"list-with-cfa-menu",cabClassContainer:"",tooltipCustomClass:"fake-browser-bar-manage-menu",contentSelector:".intro-tooltip-content",attributes:{items:this.pageItems,onItemClick:this.onPageClick.bind(this),cfaLabel:"Manage Pages",onCfaClick:this.onManagePages.bind(this)},hideAttribute:"closeCallback"}),this.consumerBiLogger.pagesManager.pagesDropdownListOpenOnHover())},e.prototype.onPageClick=function(e){var t=this,i=e.id,n=e.closeCallback;if(this.currentPageId!==i){this.applicationState.isPagesPanelOpen()||this.applicationState.goToBuilder();var r=this.modelTree.getPageById(i);this.consumerBiLoggerHelpers.setPanelSource(o.BIOrigins.FakeBrowser),this.pagesPanelManager.goToPage({id:i,name:r},this.applicationState.isPagesPanelOpen()).then(function(){t.currentPageName=t.shrinkString(r,t.MAX_PAGE_CHARS)}),n()}},e.prototype.onManagePages=function(e){var t=e.closeCallback;this.consumerBiLoggerHelpers.setPanelSource(o.BIOrigins.FakeBrowser),this.currentPageId?this.applicationState.goToPage(this.currentPageId):this.applicationState.goToPageManager(),t()},e.prototype.flattenPagesTree=function(e){for(var t=[],i=0,n=e;i<n.length;i++){var o=n[i];t.push(o),o.children&&o.children.length>0&&(t=t.concat(this.flattenPagesTree(o.children)))}return t},e.prototype.getPageItems=function(){var e=this,t=this.menuService.getMenuItems(this.isMobileMode);return this.flattenPagesTree(t).map(function(t){return{id:t.id,label:t.name,selected:t.id===e.currentPageId}})},e.prototype.listenToPagesChanges=function(){var e=this;[n.events.PAGE_CHANGED,n.events.SECTION_ADDED,n.events.ADD_TPA_PAGE,n.events.PAGE_RENAMED,n.events.NEW_STATE_STORY_WAS_SET].forEach(function(t){e.unsubscribes.push(n.PubSub.subscribe(t,function(){e.refreshPages()}))})},e.prototype.getWidth=function(){return this.isMobileMode?c:this.fakeBrowserSize>=820?a:this.fakeBrowserSize>=680?s:l},e.prototype.refreshPages=function(){this.pageItems=this.getPageItems(),this.shouldShowPagesDropDown=this.pageItems.length>0,this.currentPageId=this.applicationState.getPageNodeInFocus().id;var e=this.applicationState.getPageInFocus().name;this.currentPageName=this.shrinkString(e,this.MAX_PAGE_CHARS)},e.prototype.$onDestroy=function(){this.unsubscribes.forEach(function(e){e()})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("fakeBrowserBar2",{templateUrl:"views/preview/fake-browser-bar2.html",controller:d,bindings:{fakeBrowserSize:"<",label:"@",url:"@",onBarClick:"&"}})},function(e,t,i){"use strict";var n=function(){return function(){}}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("listWithCfaMenu",{templateUrl:"views/preview/list-with-cfa-menu.html",controller:n,bindings:{items:"=",onItemClick:"=",cfaLabel:"=",onCfaClick:"=",closeCallback:"=?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a,s){this.suggestDomainService=e,this.$translate=t,this.$scope=i,this.anonService=n,this.signUpNotifier=o,this.CcDialogBuilder=r,this.consumerBiLogger=a,this.$document=s}return e.$inject=["suggestDomainService","$translate","$scope","anonService","signUpNotifier","CcDialogBuilder","consumerBiLogger","$document"],e.prototype.openConnectDomainDialog=function(e){this.suggestDomainService.openConnectDomainDialog(e,this.domain)},e.prototype.$postLink=function(){var e=this;this.isVisible=this.suggestDomainService.isDisplayPopup(),this.isVisible&&this.consumerBiLogger.builder.suggestedDomainIsDisplayed(),this.domain=this.suggestDomainService.getSuggestedDomain(),this.label=this.$translate.instant("builder.fake-browser.suggest-domain-label",{domain:this.domain}),this.$scope.$watch(function(){return e.suggestDomainService.isDisplayPopup()},function(t){e.isVisible!==t&&(t&&e.consumerBiLogger.builder.suggestedDomainIsDisplayed(),e.isVisible=t)}),this.$scope.$watch(function(){return e.suggestDomainService.getSuggestedDomain()},function(t){e.domain!==t&&(e.domain=t,e.label=e.$translate.instant("builder.fake-browser.suggest-domain-label",{domain:t}))})},e.prototype.handleClose=function(){this.consumerBiLogger.builder.suggestedDomainIsDismissed(),this.suggestDomainService.hideSuggestPopup()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("suggestDomainPopup",{templateUrl:"views/preview/suggest-domain-popup.html",controller:n})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i(0);!function(e){e[e.None=0]="None",e[e.Page=1]="Page",e[e.Web=2]="Web",e[e.Document=3]="Document",e[e.Email=4]="Email",e[e.Phone=5]="Phone",e[e.Paypal=6]="Paypal"}(n||(n={}));var r=function(){function e(e,t,i,n,o,r,a,s,l,c,d){var u=this;this.$scope=e,this.pagesManager=t,this.$q=i,this.linkDetailsManager=n,this.validation=o,this.$log=r,this.$translate=a,this.CONSUMER_DIALOGS=s,this.flags=l,this.clientTopology=c,this.CcDialogBuilder=d,this.ensureValueNotBroken(),this.initLinkOptions(),this.pageItemList=[],this.anchorItemList=void 0,this.draft=angular.copy(this.value),this.draft.file&&this.adjustFileToPanel(this.draft.file),this.setCurrentLinkType(),this.setCurrentPage(),this.setCurrentAnchor(),e.$on("linkDetails.save",function(e,t){u.save().then(function(e){t.resolve(e)})}),e.$watch("$ctrl.draft.targetPhone",function(e){u.draft.targetPhone=u.transformPhone(e),u.validate()}),e.$watch("$ctrl.draft.paypal",function(){u.validate()},!0),this.validate()}return e.$inject=["$scope","pagesManager","$q","linkDetailsManager","validation","$log","$translate","CONSUMER_DIALOGS","flags","clientTopology","CcDialogBuilder"],e.prototype.transformPhone=function(e){var t=this;return e?e.split("").filter(function(e){return t.validation.isPhone(e)}).join(""):""},e.prototype.onLinkOptionChanged=function(){this.currentLinkType===n.Web&&this.linkDetailsManager.targetUrlIsDocument(this.draft.targetUrl)&&(this.draft.targetUrl=""),this.currentLinkType===n.Page&&this.linkDetailsManager.setPageLink(this.draft,this.currentAnchor),this.validate()},e.prototype.onPageSelectionChanged=function(e){this.currentPage=e,this.draft.targetPage=this.currentPage.getId(),this.refreshAnchors(),this.currentAnchor=o.first(this.anchors)},e.prototype.onAnchorSelectionChanged=function(e){this.draft.link="anchor"===this.linkDetailsManager.getAnchorType(e)?this.linkDetailsManager.generateAnchorLink(e):void 0,this.currentAnchor=e},e.prototype.onFileChange=function(e){this.draft.file=e,this.draft.file.name=e.title},e.prototype.validate=function(){switch(this.currentLinkType){case n.Web:this.isValid=void 0===this.draft.targetUrl||""===this.draft.targetUrl||this.validation.isUrl(this.draft.targetUrl);break;case n.Email:this.isValid=void 0===this.draft.targetEmail||""===this.draft.targetEmail||this.validation.isEmail(this.draft.targetEmail);break;case n.Phone:this.isValid=void 0===this.draft.targetPhone||""===this.draft.targetPhone||this.validation.isPhone(this.draft.targetPhone);break;case n.Paypal:this.isValid=!this.draft.paypal||this.validation.isEmail(this.draft.paypal.email)&&(!this.draft.paypal.fixedAmount||this.draft.paypal.amount>0);break;default:this.isValid=!0}},Object.defineProperty(e.prototype,"isOptionNone",{get:function(){return this.currentLinkType===n.None},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOptionWeb",{get:function(){return this.currentLinkType===n.Web},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOptionPage",{get:function(){return this.currentLinkType===n.Page},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOptionEmail",{get:function(){return this.currentLinkType===n.Email},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOptionDocument",{get:function(){return this.currentLinkType===n.Document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOptionPhone",{get:function(){return this.currentLinkType===n.Phone},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOptionPaypal",{get:function(){return this.currentLinkType===n.Paypal},enumerable:!0,configurable:!0}),e.prototype.save=function(){var e=this,t=this.createLinkDetails(),i=this.$q.defer();return t.then(function(){return e.removeOldAnchor()}),t.then(function(t){return e.removeFile(t)}),t.then(function(t){return e.setNewValue(t)}),t.then(function(e){return i.resolve(e)}),i.promise},e.prototype.initLinkOptions=function(){this.linkOptions=[{label:this.$translate.instant("link-details.none.label"),value:n.None},{label:this.$translate.instant("link-details.page.label"),value:n.Page},{label:this.$translate.instant("link-details.web.label"),value:n.Web},{label:this.$translate.instant("link-details.document.label"),value:n.Document},{label:this.$translate.instant("link-details.email.label"),value:n.Email},{label:this.$translate.instant("link-details.phone.label"),value:n.Phone},{label:this.$translate.instant("link-details.paypal.label"),value:n.Paypal}]},e.prototype.adjustFileToPanel=function(e){e.title=e.name,e.fileUrl=e.url},e.prototype.removeFile=function(e){return this.currentLinkType!==n.Document&&delete e.file,this.$q.when(e)},e.prototype.setNewValue=function(e){this.value=e,this.draft=angular.copy(e)},e.prototype.setCurrentLinkType=function(){this.linkDetailsManager.isDocument(this.draft)?this.currentLinkType=n.Document:this.linkDetailsManager.isPage(this.draft)?this.currentLinkType=n.Page:this.linkDetailsManager.isEmail(this.draft)?this.currentLinkType=n.Email:this.linkDetailsManager.isPhone(this.draft)?this.currentLinkType=n.Phone:this.linkDetailsManager.isWeb(this.draft)?(this.linkDetailsManager.targetUrlIsDocument(this.draft.targetUrl)&&(this.draft.targetUrl=""),this.currentLinkType=n.Web):this.linkDetailsManager.isPaypal(this.draft)?this.currentLinkType=n.Paypal:this.currentLinkType=n.None},e.prototype.setCurrentPage=function(){var e,t=this;if(!o.isEmpty(this.draft.link)||this.draft.targetPage){var i=this.draft&&this.draft.link&&this.draft.link.nodeId||this.draft.targetPage,n=this.linkDetailsManager.findNodeById(i);e=n?n.isPage()?n:this.pages.find(function(e){if(t.draft.link.targetPage)return e.getId()===t.draft.link.targetPage}):o.first(this.pages)}else e=o.first(this.pages);this.currentPage=e},e.prototype.setCurrentAnchor=function(){var e,t=this;e=o.isEmpty(this.draft.link)?o.first(this.anchors):this.anchors.find(function(e){return t.linkDetailsManager.getAnchorId(e)===t.draft.link.nodeId}),this.currentAnchor=e},Object.defineProperty(e.prototype,"pages",{get:function(){return o.isEmpty(this.pageItemList)&&(this.pageItemList=this.linkDetailsManager.getMainPages()),this.pageItemList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return o.isUndefined(this.anchorItemList)&&(this.anchorItemList=o.filter(this.currentPage.children,function(e){return e.alias||(e.alias=e.getContentElementType()),!e.userHidden}),this.anchorItemList.unshift({alias:this.$translate.instant("link-details.page.select-anchor.top-of-page"),id:this.currentPage.getId(),type:"page-anchor"})),this.anchorItemList},enumerable:!0,configurable:!0}),e.prototype.refreshAnchors=function(){this.anchorItemList=void 0},e.prototype.createLinkDetails=function(){var e=this.value,t=angular.copy(this.draft);switch(this.currentLinkType){case n.Page:return e.targetPage===t.targetPage&&o.isEqual(e.link,t.link)?this.$q.when(e):this.linkDetailsManager.convertLinkDetailsToStatePage(t,this.currentAnchor);case n.Web:return""!==t.targetUrl&&e.targetUrl!==t.targetUrl?this.linkDetailsManager.convertLinkDetailsToStateWeb(t,this.draft.targetUrl):this.$q.when(e);case n.None:return this.linkDetailsManager.convertLinkDetailsToStateNone(t);case n.Document:return e.file!==t.file?this.linkDetailsManager.convertLinkDetailsToStateDocument(t):this.$q.when(e);case n.Email:return""!==t.targetEmail&&e.targetEmail!==t.targetEmail?this.linkDetailsManager.convertLinkDetailsToStateEmail(t,this.draft.targetEmail):this.$q.when(e);case n.Phone:return""!==t.targetPhone&&e.targetPhone!==t.targetPhone?this.linkDetailsManager.convertLinkDetailsToStatePhone(t,this.draft.targetPhone):this.$q.when(e);case n.Paypal:return this.paypalHasChanged(t,e)?this.linkDetailsManager.convertLinkDetailsToPaypal(t,this.draft.paypal):this.$q.when(e)}},e.prototype.paypalHasChanged=function(e,t){return!!e.paypal&&!o.isEqual(t.paypal,e.paypal)},e.prototype.removeLinkDetails=function(e){var t,i=this;return e.link&&(t=this.anchors.find(function(t){if("anchor"===i.linkDetailsManager.getAnchorType(t))return t.getId()===e.link.nodeId})),t&&this.pagesManager.removeAnchorLink(t),this.$q.when(null)},e.prototype.removeOldAnchor=function(){return this.removeLinkDetails(this.value)},e.prototype.ensureValueNotBroken=function(){o.isObject(this.value)||(this.$log.warn("linkDetails: empty value"),this.value={}),this.linkDetailsManager.isLinkBroken(this.value)&&(this.$log.warn("linkDetails: broken link, probably page or anchor was deleted"),this.value={})},e.prototype.openPhoneHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.link.phone"),this.CONSUMER_DIALOGS.LINK_DETAILS_HELP)},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("linkDetails",{templateUrl:"views/editor/link-details.html",controller:r,bindings:{value:"=",isValid:"=?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n){var o=this;this.mediaGalleryAdapter=e,this.$filter=t,this.$scope=i,this.$timeout=n,this.draft=angular.copy(this.file),i.$watch(function(){return o.file},function(){o.draft=angular.copy(o.file)})}return e.$inject=["mediaGalleryAdapter","$filter","$scope","$timeout"],Object.defineProperty(e.prototype,"hasFile",{get:function(){return!!this.draft},enumerable:!0,configurable:!0}),e.prototype.openFileDialog=function(){var e=this;this.mediaGalleryAdapter.selectDocument().then(function(t){if(e.onFileChange){var i=t[0];e.draft||(e.draft={}),e.onFileChange({result:i})}})},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("linkDetailsDocument",{templateUrl:"views/editor/link-details-document.html",controller:n,bindings:{file:"=?",onFileChange:"&?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(274);angular.module("siteGeneratorEditorInternal").component("linkDetailsPaypal",{templateUrl:"views/editor/link-details-paypal.html",controller:n.LinkDetailsPaypal,bindings:{link:"="}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a){this.$scope=e,this.$q=t,this.CcDialogBuilder=i,this.$translate=n,this.CONSUMER_DIALOGS=o,this.linkDetailsManager=r,this.consumerBiLogger=a}return e.$inject=["$scope","$q","CcDialogBuilder","$translate","CONSUMER_DIALOGS","linkDetailsManager","consumerBiLogger"],e.prototype.$postLink=function(){this.consumerBiLogger.contentEditor.linkDialogIsLoaded(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.source)},e.prototype.close=function(){this.consumerBiLogger.contentEditor.linkDialogClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.source),this.onClose&&this.onClose()},e.prototype.save=function(){var e=this,t=this.$q.defer();this.$scope.$broadcast("linkDetails.save",t),t.promise.then(function(t){var i=e.linkDetailsManager.resolveLinkToType(t),n=e.linkDetailsManager.resolveTargetPage(t),o=e.resolvePlace(t);e.consumerBiLogger.contentEditor.linkDialogDoneClicked(e.node.getId(),e.node.getSpecificContentElementType(),e.node.alias,i,n,o,e.source),e.onSave&&e.onSave({linkDetails:t})})},e.prototype.help=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.link.menu"),this.CONSUMER_DIALOGS.LINK_DETAILS_HELP)},e.prototype.resolvePlace=function(e){return!0===e.isPageRef&&void 0===e.targetPage?e.link.nodeId:""},e}();t.LinkEditorPanel=n,angular.module("siteGeneratorEditorInternal").component("linkEditorPanel",{templateUrl:"views/editor/link-editor-panel.html",controller:n,bindings:{linkDetails:"=",node:"<",source:"<",onSave:"&",onClose:"&"}})},function(e,t){var i=function(){return function(){this.animationIcons=["Fade","Float","Fly","Fold","None","Slide","Turn"]}}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("tester",{templateUrl:"views/tester.html",controller:i})},function(e,t){var i=function(){function e(e){this.logoColorService=e,this.listOfLogos=[{url:"logos/0.png"}]}return e.$inject=["logoColorService"],e.prototype.calcPalette=function(e){var t=this,i=$('img[src="'+e.url+'"]'),n=i[0],o=i[1];e.palette=_.map(this.logoColorService.colorsFromImage(n),function(e){return t.logoColorService.rgbToHex(e)}),o.height=n.height,o.width=n.width},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("logoColorPlayground",{templateUrl:"views/logo-color-playground.html",controller:i}).directive("logoonload",function(){return{restrict:"A",link:function(e,t,i){t.bind("load",function(){})}}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r){var a=this;this.$http=e,this.$timeout=t,this.CcDialogBuilder=i,this.$interval=n,this.$window=o,this.cookieManager=r,this.data={analyzer:"",userName:"",count:"10",comment:"",onlyPremium:!1,onlyPublished:!1,onlyMyTasks:!1,specialAnalyzerName:"SpecialAnalyzer",metasiteIds:"",specialAnalyzer:"// Use the Comment field for a description\nfunction SpecialAnalyzer() {}\nSpecialAnalyzer.prototype = new BasicDataAnalyzer();\nSpecialAnalyzer.prototype.getName = function () { return 'SpecialAnalyzer'; };\nSpecialAnalyzer.prototype.getDescription = function () { return 'Return special data'; };\n\nSpecialAnalyzer.prototype.parseData = function () {\n    var data = BasicDataAnalyzer.prototype.parseData.call(this);\n\n    // JsonPath documentation can be found at http://goessner.net/articles/JsonPath/\n    data['Number of pages'] =  blobJson.read('$..[?(@.type == \"page\")]').length;\n\n    // Find the editing distance of the Welcome section from the word \"Potpourri\"\n    data['welcome-distance'] = AnalyzerEngineHelpers.getLevenshteinDistance('Potpourri', cleanRichText(getSectionLongText(getSectionId('Welcome'))));\n\n    // Can either return an array, or a single hash\n    // Note that records do not have to include all of the same fields\n    return [\n       _.merge(_.clone(data), {'Life': 'good', 'I am': 'special'}),\n       _.merge(_.clone(data), {'I am not': 'very special', 'Life': 'meep'})\n    ];\n}\n\naddAnalyzer(new SpecialAnalyzer());\n"},this.results=[],this.analyzers=[],this.refreshingTasks=!1,this.superSecretEnabled=0,this.tasksRefreshInterval=3e3,this.data.userName=this.getUsername(),this.refreshTasksList(),this.refreshAnalyzersList(),n(function(){a.refreshTasksList()},this.tasksRefreshInterval)}return e.$inject=["$http","$timeout","CcDialogBuilder","$interval","$window","cookieManager"],e.prototype.getColorByStatus=function(e){return"done"===e?"#006400":"error"===e?"#c70000":"stale"===e?"#c70000":"started"===e?"#00009c":"processing"===e?"#00009c":"post-processing"===e?"#00009c":"#000000"},e.prototype.pz=function(e){return 1===(""+e).length?"0"+e:e},e.prototype.formatDateTime=function(e){return e.getFullYear()+"/"+this.pz(e.getUTCMonth())+"/"+this.pz(e.getDate())+" "+this.pz(e.getHours())+":"+this.pz(e.getMinutes())+":"+this.pz(e.getSeconds())},e.prototype.formatDateTimeString=function(e){return this.formatDateTime(new Date(e))},e.prototype.dateFromTask=function(e){return new Date(e[1].createdAt).getTime()},e.prototype.getTaskInfoLine=function(e){var t="--";return e[2].extra&&e[2].extra.length>0?e[2].extra:("started"!==e[2].status&&"processing"!==e[2].status&&"post-processing"!==e[2].status||(t="Running for "+Math.floor((Date.now()-new Date(e[1].createdAt).getTime())/1e3)+" seconds"),"error"===e[2].status&&(t=e[2].extra),"done"===e[2].status&&(t="Took "+Math.floor((new Date(e[2].endedAt).getTime()-new Date(e[1].createdAt).getTime())/1e3)+" seconds"),t)},e.prototype.refreshTasksList=function(){var e=this;this.refreshingTasks=!0,this.$http.get("/_api/onboarding-bo-server/analyzers/tasks/list").then(function(t){e.results=t.data.sort(function(e,t){return-1*(new Date(e[1].createdAt).getTime()-new Date(t[1].createdAt).getTime())}),e.refreshingTasks=!1})},e.prototype.refreshAnalyzersList=function(){var e=this;this.$http.get("/_api/onboarding-bo-server/analyzers/list").then(function(t){e.analyzers=t.data})},e.prototype.submitTask=function(){var e=this,t={name:this.data.analyzer,count:this.data.count,preFilterOnlyPremium:this.data.onlyPremium,preFilterOnlyPublished:this.data.onlyPublished,comment:this.data.comment,specialAnalyzer:"",specialAnalyzerName:"",metasiteIds:this.data.metasiteIds};this.superSecretEnabled&&(t.specialAnalyzer=this.data.specialAnalyzer,t.specialAnalyzerName=this.data.specialAnalyzerName),this.$http.post("/_api/onboarding-bo-server/analyzers/tasks/analyze/submit",t).then(function(){e.refreshTasksList()})},e.prototype.removeTask=function(e){var t=this;this.CcDialogBuilder.showNegativeConfirmation({heading:"Remove task",text:"Are you sure you want to remove this task?",acceptButtonText:"Remove",rejectButtonText:"Cancel",icon:"delete-single.gif",biDialogName:"bo-remove-task"}).then(function(){t.$http.get("/_api/onboarding-bo-server/analyzers/tasks/remove?id="+e).then(function(){t.refreshTasksList()})})},e.prototype.getUsername=function(){var e=this.cookieManager.readCookie("wixClient");return e?e.split("|")[0].replace(/"/,""):void 0},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("analysisPlayground",{templateUrl:"views/analysis-playground.html",controller:n})},function(e,t,i){"use strict";var n=function(){function e(e,t,i,n,o){var r=this;this.$scope=e,this.googleImageSearch=t,this.$q=i,this.$window=n,this.$http=o,this.availablePOS=[{name:"Dollar",code:"$"},{name:"Colon",code:":"},{name:"Comma",code:","},{name:"Period",code:"."},{name:"Left Quote",code:"````"},{name:"Right Quote",code:"''"},{name:"Left bracket",code:"-LRB-"},{name:"Right bracket",code:"-RRB-"},{name:"Email",code:"ADD"},{name:"Affix",code:"AFX"},{name:"Coordinating conjunction",code:"CC"},{name:"Cardinal number",code:"CD"},{name:"Determiner",code:"DT"},{name:"Existential there",code:"EX"},{name:"Foreign word",code:"FW"},{name:"Go with",code:"GW"},{name:"Hyphen",code:"HYPH"},{name:"Preposition or subordinating conjunction",code:"IN"},{name:"Adjective",code:"JJ"},{name:"Adjective, comparative",code:"JJR"},{name:"Adjective, superlative",code:"JJS"},{name:"List item marker",code:"LS"},{name:"Modal",code:"MD"},{name:"Superfluous punctuation",code:"NFP"},{name:"Noun, singular or mass",code:"NN"},{name:"Noun, plural",code:"NNS"},{name:"Proper noun, singular",code:"NNP"},{name:"Proper noun, plural",code:"NNPS"},{name:"Predeterminer",code:"PDT"},{name:"Possessive ending",code:"POS"},{name:"Personal pronoun",code:"PRP"},{name:"Possessive pronoun",code:"PRP$"},{name:"Adverb",code:"RB"},{name:"Adverb, comparative",code:"RBR"},{name:"Adverb, superlative",code:"RBS"},{name:"Particle",code:"RP"},{name:"Symbol",code:"SYM"},{name:"To",code:"TO"},{name:"Interjection",code:"UH"},{name:"Verb, base form",code:"VB"},{name:"Verb, past tense",code:"VBD"},{name:"Verb, gerund or present participle",code:"VBG"},{name:"Verb, past participle",code:"VBN"},{name:"Verb, non-3rd person singular present",code:"VBP"},{name:"Verb, 3rd person singular present",code:"VBZ"},{name:"Wh-determiner",code:"WDT"},{name:"Wh-pronoun",code:"WP"},{name:"Wh-pronoun, possessive",code:"WP$"},{name:"Wh-adverb",code:"WRB"},{name:"Unknown",code:"XX"}],this.selectedPOS={},this.availablePOS.forEach(function(e){return r.selectedPOS[e.code]=!0}),this.selectedPOS.VB=!1,this.selectedPOS.VBD=!1,this.selectedPOS.VBP=!1,this.selectedPOS.VBZ=!1,this.availableNLPEngines=["natural","nltk","nlp4j"],this.selectedNLPEngines={},this.availableNLPEngines.forEach(function(e){return r.selectedNLPEngines[e]=!0}),this.initDomains(),this.options={query:"",maxResults:5,png:!0,video:!0,hostnames:[]}}return e.$inject=["$scope","googleImageSearch","$q","$window","$http"],e.prototype.initDomains=function(){var e=this;this.domainGroups={public_domain:["pixabay.com","pexels.com","public-domain-image.com","publicdomainpictures.net","pdpics.com"],creative_commons:["wikipedia.org","upload.wikimedia.org","commons.wikimedia.org","flickr.com","geograph.org.uk","freestockphotos.biz","goodfreephotos.com","deviantart.com","vimeo.com","youtube.com"],all:[]},this.availableDomains=this.domainGroups.public_domain.concat(this.domainGroups.creative_commons),this.selectedDomains={},this.domainGroup="public_domain",this.$scope.$watch("$ctrl.domainGroup",function(){e.availableDomains.forEach(function(t){e.selectedDomains[t]=!1}),e.domainGroups[e.domainGroup].forEach(function(t){e.selectedDomains[t]=!0})})},e.prototype.getTerms=function(e){var t=this,i=[];return this.$http({method:"GET",url:"http://www.wix.com/_api/site-generator-http-api/health/parts_of_speech",params:{sentence:e}}).catch(function(e){}).then(function(n){if(void 0===n)console.log("no http-api");else{if(console.log("http-api",n.data),n.data.nltk){var o=n.data.nltk.map(function(e){return{text:e[0],pos:e[1]}});i.push({engine:"nltk",terms:o})}if(n.data.natural){o=n.data.natural.map(function(e){return{text:e[0],pos:"N"===e[1]?"NN":e[1]}});i.push({engine:"natural",terms:o})}}return t.$http({method:"GET",url:"http://localhost:8080/",params:{sentence:e}})}).catch(function(e){}).then(function(e){if(void 0===e)console.log("no nlp4j");else{console.log("nlp4j",e.data);var t=[];e.data.split("\n").slice(2).filter(function(e){return e.length>0}).forEach(function(e,i,n){i%2==0&&t.push({text:n[i],pos:n[i+1]})}),i.push({engine:"nlp4j",terms:t})}return i})},e.prototype.getName=function(e){var t="";return this.availablePOS.some(function(i){if(i.code===e)return t=i.name,!0}),""===t&&(t="unrecognized code "+e),t},e.prototype.applyPOS=function(){var e=this;return this.$q.when(this.queries.trim().split("\n")).then(function(t){var i=t.map(function(t){return t=t.trim(),e.getTerms(t).then(function(e){return{query:t,results:e}})});return e.$q.all(i)}).then(function(t){var i=["Description of POS Tagging application:"];e.queries=t.map(function(t){var n=t;return console.log(n),n.results.filter(function(t){return e.selectedNLPEngines[t.engine]}).map(function(t){var n=t.terms.map(function(t){return t.text+" ("+(e.selectedPOS[t.pos]?"":"skipped, ")+e.getName(t.pos)+")"}).join(" ");return i.push("<"+t.engine+"> "+n),t}).map(function(t){return t.terms.filter(function(t){return e.selectedPOS[t.pos]}).map(function(e){return e.text})}).concat([n.query.split(" ")]).map(function(e){return e.join(" ")}).join("\n")}).join("\n"),i.push("<original>"),e.message=i.join("\n")})},e.prototype.search=function(){var e=this,t=this.queries.trim().split("\n");t.length>100?this.message="Error: please enter no more than 100 queries":(this.message="",this.$q.all(t.map(function(t){return e.googleImageSearch.search(angular.extend(angular.copy(e.options),{query:t,hostnames:Object.keys(e.selectedDomains).filter(function(t){return e.selectedDomains[t]})})).then(function(e){return{query:t,images:e}})})).then(function(t){e.results=t}))},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("imageSearchDebug",{template:'\n    <style>\n    image-search-debug {\n      width: 100%;\n      overflow: auto;\n    }\n    .result:hover .image {\n      visibility: visible;\n    }\n    .image {\n      visibility: hidden;\n    }\n    </style>\n    <textarea ng-model="$ctrl.queries" style="width: 100%;height: 300px;border: 1px solid black"></textarea>\n    <textarea style="width: 100%; height: 200px; font-family: monospace; white-space: nowrap; overflow: auto">{{$ctrl.message}}</textarea>\n    <p>\n      <label ng-repeat="pos in $ctrl.availablePOS">\n        <input type="checkbox" ng-model="$ctrl.selectedPOS[pos.code]">{{pos.name}}\n      </label>\n    </p>\n    <p>\n      <label ng-repeat="engine in $ctrl.availableNLPEngines">\n        <input type="checkbox" ng-model="$ctrl.selectedNLPEngines[engine]">{{engine}}\n      </label>\n      <button class="md-button md-raised" ng-click="$ctrl.applyPOS();">Apply Parts-of-Speech Tagging</button>\n    </p>\n    <p>\n      <select ng-model="$ctrl.domainGroup">\n        <option ng-repeat="(name, group) in $ctrl.domainGroups">{{name}}</option>\n      </select>\n      <label ng-repeat="domain in $ctrl.availableDomains">\n        <input type="checkbox" ng-model="$ctrl.selectedDomains[domain]">{{domain}}\n      </label>\n    </p>\n    <p>\n      <label><input type="checkbox" ng-model="$ctrl.options.png">Exclude png</label>\n      <label><input type="checkbox" ng-model="$ctrl.options.video">Exclude video</label>\n      <button class="md-button md-raised md-primary" ng-click="$ctrl.search();">Search</button>\n      <label><input type="number" ng-model="$ctrl.options.maxResults" step="1" min="1" max="10"> (from 1 to 10)</label>\n    </p>\n    <div ng-repeat="result in $ctrl.results" style="overflow: hidden" class="result">\n      <p style="float:left;padding:20px;font-weight:bold;font-size:1.5em">{{result.query}}</p>\n      <div class="image" style="float:left;" ng-repeat="image in result.images">\n        <a ng-href="{{image.webpageLink}}"><img title="{{image.title}}" alt="{{image.title}}" ng-src="{{image.link}}" style="width: 200px;"></a>\n        <span style="display: inherit;">{{image.width}}x{{image.height}}</span>\n      </div>\n    </div>\n    ',controller:n})},function(e,t,i){"use strict";var n=function(){function e(e,t,i){var n=this;this.cmsApi=e,this.serverSideRenderApi=t,this.$scope=i,this.businessName="",this.businessTypes=[],this.previousSuggestions=[],this.$scope.$watch("$ctrl.businessType",function(){var e=n.previousSuggestions.filter(function(e){return e.term===n.businessType});if(1===e.length)return n.industryId=e[0].industryId,void(n.structureId=e[0].structureId);n.cmsApi.suggest(n.businessType).then(function(e){n.previousSuggestions=e.filter(function(e){return"category"===e.type&&e.industryId&&e.structureId}),n.businessTypes=n.previousSuggestions.map(function(e){return e.term})})})}return e.$inject=["cmsApi","serverSideRenderApi","$scope"],e.prototype.reset=function(){this.taskId=void 0,this.siteId=void 0,this.industryId=void 0,this.structureId=void 0,this.businessName="",this.businessType=void 0,this.businessTypes=[],this.previousSuggestions=[],this.resetResults()},e.prototype.resetResults=function(){this.status=void 0,this.siteUrl=void 0,this.screenshotUrl=void 0},e.prototype.canRenderHomePage=function(){return void 0===this.taskId&&!!this.siteId},e.prototype.canCreateAndRender=function(){return void 0===this.taskId&&(this.businessName&&void 0!==this.industryId&&void 0!==this.structureId)},e.prototype.checkTaskState=function(){var e=this;void 0!==this.taskId&&this.serverSideRenderApi.getTaskStatus(this.taskId).then(function(t){if(void 0!==e.taskId)if(e.status="state: "+t.state+"\nstarted: "+new Date(t.createdAt),"wontfinish"===t.state)e.taskId=void 0;else{if("finished"!==t.state)return Promise.delay(1e3).then(function(){e.checkTaskState()});e.status+="\nfinished: "+new Date(t.updatedAt),e.screenshotUrl=t.screenshot,e.siteUrl="http://www.wix.com/website/builder#!/builder/story/"+t.siteId.instanceId+":"+t.siteId.metaSiteId,e.taskId=void 0}})},e.prototype.renderHomePage=function(){var e=this;this.canRenderHomePage()&&(console.log("render home page"),this.resetResults(),this.taskId=null,this.serverSideRenderApi.renderHomePage(this.siteId,void 0).then(function(t){console.log("the task is "+t),e.taskId=t,e.checkTaskState()}))},e.prototype.createAndRender=function(){var e=this;this.canCreateAndRender()&&(console.log("create and render"),this.resetResults(),this.taskId=null,this.serverSideRenderApi.createAndRender(this.structureId,this.industryId,this.businessName,void 0).then(function(t){console.log("the task is "+t),e.taskId=t,e.checkTaskState()}))},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("serverSideTest",{template:'\n    <style>\n.server-side-test {\n  background: white;\n  color: black;\n  width: 100%;\n  height: 100%;\n}\n.server-side-test .cc-panel-content {\n  float: left;\n}\n.server-side-test pre {\n  margin: 30px;\n  overflow: hidden;\n}\n    </style>\n    <div class="server-side-test">\n      <div class="cc-panel-content">\n        <p><c2-text-input label="Business name" value="$ctrl.businessName" disable-toggle="true"></c2-text-input></p>\n        <p><c2-text-input label="Business type" value="$ctrl.businessType" disable-toggle="true" autocomplete="$ctrl.businessTypes"></c2-text-input></p>\n        <p><button ng-class="{\'p9-primary\': true, \'-purple\': true, \'-disabled\': !$ctrl.canCreateAndRender()}" ng-disabled="!$ctrl.canCreateAndRender()" ng-click="$ctrl.createAndRender()">Create site and render it</button></p>\n\n        <p><c2-text-input label="Site id" value="$ctrl.siteId" disable-toggle="true"></c2-text-input></p>\n        <p><button ng-class="{\'p9-primary\': true, \'-purple\': true, \'-disabled\': !$ctrl.canRenderHomePage()}" ng-disabled="!$ctrl.canRenderHomePage()" ng-click="$ctrl.renderHomePage()">Render home page</button></p>\n\n        <pre>\n{{$ctrl.status}}\n<a ng-if="$ctrl.siteUrl" ng-href="{{$ctrl.siteUrl}}">Site</a>\n<a ng-if="$ctrl.screenshotUrl" ng-href="{{$ctrl.screenshotUrl}}">Screenshot</a>\n        </pre>\n        <p>\n          <button ng-class="{\'p9-primary\': true, \'-red\': true}" ng-click="$ctrl.reset()">reset</button>\n        </p>\n      </div>\n      <div class="cc-panel-content">\n      </div>\n    </div>\n    ',controller:n})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a){this.$rootScope=e,this.notify=t,this.spinnerService=i,this.defaultToastDuration=n,this.$translate=o,this.$timeout=r,this.applicationState=a,this.spinnerMessages=[]}return e.$inject=["$rootScope","notify","spinnerService","defaultToastDuration","$translate","$timeout","applicationState"],e.prototype.initSpinnerSteps=function(e){this.totalSteps=e,this.currentStep=0,this.moveToNextMessage()},e.prototype.addSpinnerSteps=function(e){this.totalSteps+=e},e.prototype.showNextStep=function(e){this.showOnSpinner({totalSteps:this.totalSteps,currentStep:this.currentStep++,message:e})},e.prototype.hide=function(){this.shouldHide=!0},e.prototype.showOnSpinner=function(e){e&&this.spinnerMessages.push(e)},e.prototype.moveToNextMessage=function(){var e=this;(this.spinnerMessages.length>1||1===this.spinnerMessages.length&&this.shouldHide)&&this.spinnerMessages.shift(),(this.spinnerMessages.length>0||!this.shouldHide)&&this.$timeout(function(){return e.moveToNextMessage()},1400,!0)},e.prototype.getSpinnerMessage=function(){if(this.spinnerMessages.length)return n.first(this.spinnerMessages)},e.prototype.popSpinnerMessage=function(){if(this.spinnerMessages.length>1||1===this.spinnerMessages.length&&this.shouldHide)return this.spinnerMessages.shift()},e.prototype.show=function(e,t,i,n){if(!this.applicationState.isSilent()){var o=this.$rootScope,r=this.notify,a=this.$translate,s=this.defaultToastDuration;void 0===n&&(n="number"==typeof t?t:s);var l,c={message:a.instant(e),templateUrl:"views/pu2-notification.html",duration:Math.max(n,0)||"0"};t&&i&&((l=o.$new()).actionName=a.instant(t.toString()),l.action=i,c.scope=l),r(c)}},e}();t.NotificationService=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("notification",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=i(67),r=i(73),a=i(10),s=i(0),l=function(){function e(e,t,i,o,a,s,l,c,d,u,p,g,h,m,f,v){var S=this;this.overlayManager=e,this.dropTargetCalculator=t,this.solutionSantaMediator=i,this.storyServices=o,this.applicationState=a,this.$rootScope=s,this.simpleSolutionManager=l,this.undoRedo=c,this.previewScale=d,this.sitePartTypes=u,this.nodeManipulationService=p,this.sectionManager=g,this.tpaService=h,this.consumerMenu=m,this.consumerBiLogger=f,this.flags=v,this.$rootScope.$on("$stateChangeSuccess",function(e,t){t.name===n.STATES.BUILDER_ADD_SECTION&&S.calculateDropTarget()}),this.$rootScope.$on(r.ViewerScrollController.PreviewScrollEvent,function(){S.overlayManager.dropTargetId&&S.calculateDropTarget()}),this.listSpanManager=this.overlayManager.listSpanManager}return e.$inject=["overlayManager","dropTargetCalculator","solutionSantaMediator","storyServices","applicationState","$rootScope","simpleSolutionManager","undoRedo","previewScale","sitePartTypes","nodeManipulationService","sectionManager","tpaService","consumerMenu","consumerBiLogger","flags"],e.prototype.onDragMouseMove=function(e){var t=this.getVisibleListSpans(),i=this.dropTargetCalculator.getClosestDropTargetInViewPort(e.clientY,t);this.overlayManager.setDropTarget(i)},e.prototype.startDrag=function(){var t=this;this.listSpansInSitePart=this.listSpanManager.getAllInBody();var i=s.findIndex(this.listSpansInSitePart,this.draggedListSpan),n=this.listSpanManager.getListSpanLayout(this.draggedListSpan),o=this.listSpansInSitePart.slice(i+1);return this.listSpanManager.toggleListSpanVisibility(this.draggedListSpan,!1).then(function(){return t.listSpanManager.setListSpanTop(t.draggedListSpan,e.HiddenListSpanTop)}).then(function(){return t.listSpanManager.moveListSpansByOffset(o,-n.height)}).then(function(){t.setPagePlaceholder(),t.previewScale.setScale(a.PreviewScale.MinScale)})},e.prototype.drop=function(){var e=this,t=this.draggedListSpan.node,i=this.sectionManager.geSectionPositionInPage(t),n=this.tpaService.getAppId(t),o=this.overlayManager.dropTargetId,r=this.storyServices.story.selectedPage,a=this.sectionManager.getAddSectionPosition();return i<a&&(a-=1),this.consumerBiLogger.sectionManagement.moveSectionWithinThePageClick(t.getId(),t.getContentElementType(),t.alias,a,i,"scroll",n),this.overlayManager.clearDropTarget(),this.nodeManipulationService.insertNodeAfter(r,t.id,o,!0),this.simpleSolutionManager.moveSectionOnPage(r,t.id,o).then(function(){return e.storyServices.reRender(e.sitePartTypes.BODY,r)}).then(function(){e.applicationState.setContentFocus(t.id,e.sitePartTypes.BODY),e.consumerMenu.calcMenuAnchors()}).then(function(){return e.endDrag()}).then(function(){e.overlayManager.calculateBodyHeight(),e.consumerBiLogger.sectionManagement.sectionMovedWithinThePageSuccess(t.getId(),t.getContentElementType(),t.alias,a,i,"scroll",n),e.undoRedo.captureOperation()})},e.prototype.cancelDrag=function(){var e=this;return this.listSpanManager.rerenderFromIndex().then(function(){return e.endDrag()})},e.prototype.endDrag=function(){var e=this;return this.listSpanManager.toggleListSpanVisibility(this.draggedListSpan,!0).then(function(){e.reset(),e.previewScale.reset(!0)})},e.prototype.setPagePlaceholder=function(){var e=this,t=(this.flags.lodash4?s.strictSumBy:s[String("sum")])(this.getVisibleListSpans(),function(t){return e.listSpanManager.getListSpanLayout(t).height});return this.listSpanManager.setPlaceholder(0,o.OverlayManager.DropTargetHeight+t)},e.prototype.getVisibleListSpans=function(){var e=this,t=s.isEmpty(this.listSpansInSitePart)?this.listSpanManager.getAllInBody():this.listSpansInSitePart;return s.reject(t,function(t){var i=t.node.id;return e.draggedListSpan&&i===e.draggedListSpan.node.id})},e.prototype.reset=function(){this.overlayManager.data.draggedListSpan=null,this.listSpansInSitePart=null,this.listSpanManager.clearPlaceholder()},e.prototype.calculateDropTarget=function(){!this.applicationState.isOnAddState()||this.overlayManager.data.draggedPresetPreview||this.overlayManager.dropTargetData.isDropTargetLocked||this.overlayManager.setDropTarget(this.dropTargetCalculator.getDropTargetInViewPort())},Object.defineProperty(e.prototype,"draggedListSpan",{get:function(){return this.overlayManager.data.draggedListSpan},enumerable:!0,configurable:!0}),e.HiddenListSpanTop=-9999,e}();t.SectionDrag=l,angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionDrag",l)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){return function(e,t){this.oldValue=e,this.newValue=t}}(),r=function(){function e(e,t,i,n,o){this.applicationState=e,this.modelTree=t,this.socialLinkManager=i,this.consumerBiLogger=n,this.$log=o}return e.$inject=["applicationState","modelTree","socialLinkManager","consumerBiLogger","$log"],e.prototype.handleValuesChanges=function(e,t){var i=n.last(t.key.split("."));if(e.contentElement&&this.isFieldRelevant(e.contentElement.type,t.key))if(this.clonedNode){if(this.clonedNode[i]){var o=this.getChangedValuesOfObjects(this.clonedNode[i],t);o&&o.newValue!==o.oldValue&&(this.sendBiEvents(t,i,o),this.init(e))}}else this.$log.error("clonedNode is empty, did you forget to call `init` before?")},e.prototype.init=function(e){var t=this.modelTree.getNodeByContentElementName("Social"),i=this.modelTree.getNodeByContentElementName("Contact"),o=e.contentElement?e.contentElement.values:{};this.clonedNode=n.merge({},t.contentElement.values,i.contentElement.values,o)},e.prototype.isFieldRelevant=function(e,t){return"GeneralDescription"===e&&("BusinessName"===t||"Logo"===t||"MainEmail"===t||"Contact.phone number"===t||"Social.SocialButtons"===t)},e.prototype.getAction=function(e,t){var i="edit";return t?e||(i="remove"):i="add",i},e.prototype.sendBiEvents=function(e,t,i){var n=this.getFieldName(t,e,i.newValue),o=this.getFieldType(t),r=this.getAction(i.newValue,i.oldValue);this.consumerBiLogger.intro.infoCardAddEditRemoveInfo(n,o,i.newValue.length,r,"header",null)},e.prototype.getChangedObject=function(e,t){if(e.length>t.length){var i=e[e.length-1];return new o(i.targetUrl,"")}if(e.length<t.length){var r=t[t.length-1];return new o("",r.targetUrl)}var a;return n.find(e,function(e,i){n.isEqual(e,t[i])||(a=new o(e.targetUrl,t[i].targetUrl))}),a?new o(a.oldValue,a.newValue):new o("","")},e.prototype.getRelevantFieldsFromObjects=function(e,t){return e.map(function(e){var i={};return t.forEach(function(t){var o=n.get(e,t),r=n.last(t.split(".")).toString();i[r]=o}),i})},e.prototype.getChangedValuesForSocial=function(e,t){var i=["Link.targetUrl"],n=this.getRelevantFieldsFromObjects(e.value,i),r=this.getRelevantFieldsFromObjects(t,i),a=this.getChangedObject(n,r);return new o(a.oldValue,a.newValue)},e.prototype.getChangedValuesForLogo=function(e,t){var i=["active","relativeUri"],n=this.getRelevantFieldsFromObjects(e.value,i),r=this.getRelevantFieldsFromObjects(t.node.contentElement.values.Logo.value,i),a=n.find(function(e){return!0===e.active}),s=r.find(function(e){return!0===e.active});return a&&s?new o(a.relativeUri,s.relativeUri):new o("","")},e.prototype.getChangedValuesOfObjects=function(e,t){if("media"===e.type){if("social"===e.subType){var i=t.field.value||t.field;return this.getChangedValuesForSocial(e,i)}return this.getChangedValuesForLogo(e,t)}return new o(e.value,t.field.value)},e.prototype.getFieldType=function(e){return"SocialButtons"===e?"social":"Logo"===e?"logo":"text"},e.prototype.getFieldName=function(e,t,i){return"SocialButtons"===e?this.socialLinkManager.getPlatformNameByUrl(i)||this.socialLinkManager.invalidPlatformName:"MainEmail"===e?"email":"BusinessName"===e?"company name":"Logo"===e?"logo":"phone number"===e?"phone":t.key},e}();t.NodeChangeReporterService=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("nodeChangeReporter",r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a){this.consumerBiLogger=e,this.mediaOverrideManager=t,this.storyServices=i,this.siteModelData=n,this.defaultContent=o,this.contentNormalizer=r,this.flags=a,this.fieldsThatShouldBeSanitized=["MainEmail","Contact.phone number"]}return e.$inject=["consumerBiLogger","mediaOverrideManager","storyServices","siteModelData","defaultContent","contentNormalizer","flags"],e.prototype.reportBi=function(e,t,i,o){if(e.maskChanged)this.consumerBiLogger.contentEditor.componentWasHiddenSuccess(e.node.getId(),e.node.getSpecificContentElementType(),e.node.alias||"",e.key,e.field.subType,t[e.key]?"unhide":"hide",e.BIOrigin),this.flags.subscribeInFooter&&"subscribe"===e.field.type&&t[e.key]&&this.consumerBiLogger.pagesManager.addTpaPackageSuccess(0,e.contentElementField.contentElement.id,null,Date.now()-o,e.node.id,null);else if("text"===e.field.type)this.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(e.node.getId(),e.node.getSpecificContentElementType(),e.node.alias||"",e.key,e.field.subType,"",this.getFieldValue(e).length,0,this.isDefaultValue(e,i),0,"","",!1,!1);else if(e.subField){var r="text"===e.subField.type?"":e.subField.value;this.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(e.node.getId(),e.node.getSpecificContentElementType(),e.node.alias||"",e.subField.name,e.subField.type,r,e.subField.value.length,0,void 0,0,"","",!1,!1)}else{var a=e.field.subType,s=0;if("image"===a){var l=e.node.contentElement.getValuesByMediaType();if(l.image){var c=l.image[0];s=n.get(c,"fileInput.face.length")||0}}var d=this.mediaOverrideManager.getFieldDataType(a,e.node);this.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(e.node.getId(),e.node.getSpecificContentElementType(),e.node.alias||"",e.key,d,"",0,s,void 0,0,"","",!1,!1)}},e.prototype.shouldSanitizePersonallyIdentifiableInfo=function(e){return e.key&&this.fieldsThatShouldBeSanitized.indexOf(e.key)>-1},e.prototype.isDefaultValue=function(e,t){var i=this.getFieldValue(e);if(!e.key||!i)return!1;if("Contact.phone number"===e.key&&i===this.defaultContent.ValuesData.ContactSingle["phone number"])return!0;var n=this.siteModelData.getDefaultValues(e.node,this.storyServices.story,t);return!!n&&i===n[e.key]},e.prototype.getFieldValue=function(e){return e.field&&e.field.value?this.contentNormalizer.normalizeRichText(e.field.value):""},e}();t.NodeEditorBiReporter=o,angular.module("siteGeneratorEditorInternal").service("nodeEditorBiReporter",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(194),r=i(0),a=function(){function e(e,t,i,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T){var b=this;this.$q=e,this.$translate=t,this.flags=i,this.onstageActionsManager=o,this.ONSTAGE_EVENTS=r,this.editorEventManager=a,this.nodeTitleManager=s,this.nodeFetcher=l,this.modelTree=c,this.nodeManipulationService=d,this.spinnerService=u,this.sectionManager=p,this.undoRedo=g,this.consumerBiLogger=h,this.notification=m,this.CONSUMER_DIALOGS=f,this.contentManager=v,this.CcDialogBuilder=S,this.storyServices=y,this.slideShowService=T,o.subscribe(r.HIDE_LIST_ITEM,function(e){b.onToggle(b.generateItem(e)).then(function(){n.PubSub.fire(n.events.LIST_ITEMS_UPDATED)})}),o.subscribe(r.DELETE_LIST_ITEM,function(e){b.onDelete(b.generateItem(e)).then(function(){n.PubSub.fire(n.events.LIST_ITEMS_UPDATED)})}),o.subscribe(r.DUPLICATE_LIST_ITEM,function(e){b.onDuplicate(b.generateItem(e)).then(function(){n.PubSub.fire(n.events.LIST_ITEMS_UPDATED)})})}return e.$inject=["$q","$translate","flags","onstageActionsManager","ONSTAGE_EVENTS","editorEventManager","nodeTitleManager","nodeFetcher","modelTree","nodeManipulationService","spinnerService","sectionManager","undoRedo","consumerBiLogger","notification","CONSUMER_DIALOGS","contentManager","CcDialogBuilder","storyServices","slideShowService"],e.prototype.generateItem=function(e,t){return{id:e.id,label:this.nodeTitleManager.getNodeTitleValue(e),hidden:e.isUserHidden(),selected:e.id===t}},e.prototype.onDuplicate=function(e,t,i){var n=this,o=i||this.nodeFetcher.getCurrentNode();t&&this.consumerBiLogger.contentEditor.clickOnAddDuplicateItemInAList(o.getId(),o.getSpecificContentElementType(),o.alias,"duplicate");var r=this.realIndexAndStatus(e,o);this.spinnerService.waitForMe("onDuplicate");var a=o.children.length;return o.children[a-1].isListFooter()&&a--,this.sectionManager.duplicateListItem(o,r.childNode,a).then(function(){n.handleAfterUpdateList("toasters.list-item-duplicated","onDuplicate"),n.consumerBiLogger.contentEditor.addDuplicateItemSuccess(o.getId(),o.getSpecificContentElementType(),o.alias,"duplicate")})},e.prototype.onDelete=function(e){var t=this,i=this.nodeFetcher.getCurrentNode(),n=this.getVisibleItems(i);if(1===n.length&&n[0].getId()===e.id)return this.sectionManager.showDeleteSectionPopup(i,"hide-or-delete-all-elements"),this.$q.when();var o=this.realIndexAndStatus(e,i),r={heading:this.$translate.instant("popups.delete-list-item.heading"),text:this.$translate.instant("popups.delete-list-item.text"),acceptButtonText:this.$translate.instant("general.delete"),rejectButtonText:this.$translate.instant("general.cancel"),icon:"delete-single.gif",biDialogName:this.CONSUMER_DIALOGS.CONFIRM_DELETE_LIST_ITEM};return this.CcDialogBuilder.showNegativeConfirmation(r).then(function(){t.spinnerService.waitForMe("onDelete");var e=t;t.nodeManipulationService.deleteNode(o.childNode,t.storyServices.story.selectedPage,!!t.flags.coreCleanLssOnRemove,function(){t.removeListItem(o.indexInVisibleItemsIgnoringHeader,null,"onDelete",o.childNode).then(function(){t.flags.disableUndoRedo?t.notification.show("toasters.list-item-deleted"):t.notification.show("toasters.list-item-deleted","general.undo",function(){e.undoRedo.undo()}),t.consumerBiLogger.contentEditor.valueWasDeleted(i.getId(),i.getSpecificContentElementType(),i.alias,"list","list item")})})})},e.prototype.onToggle=function(e,t,i){var n=this,o=this.nodeFetcher.getCurrentNode(),r=this.realIndexAndStatus(e,o);return r.shown?1===this.getVisibleItems(o).length?(this.sectionManager.showDeleteSectionPopup(o,"hide-or-delete-all-elements",function(){o.userHidden=!1,r.childNode.userHidden=!1,e.hidden=!1}),this.$q.when()):(this.nodeManipulationService.toggleNodeInlist(o,r.childNode),this.spinnerService.waitForMe("onToggleHide"),this.slideShowService.isItemExist(o.getId(),r.childNode)&&this.slideShowService.selectNextUnHiddenItem(o,r.childNode.id),t&&this.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItems("hide",o.getId(),o.getSpecificContentElementType(),o.alias),this.removeListItem(r.indexInVisibleItemsIgnoringHeader,"List item hidden","onToggleHide",r.childNode).then(function(){t&&n.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItemsSuccess("hide",o.getId(),o.getSpecificContentElementType(),o.alias)})):(this.nodeManipulationService.toggleNodeInlist(o,r.childNode),this.spinnerService.waitForMe("onToggleShow"),t&&this.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItems("unhide",o.getId(),o.getSpecificContentElementType(),o.alias),this.addListItem(r.childNode,r.indexInVisibleItemsIgnoringHeader,"List item shown","onToggleShow",!1,i).then(function(){t&&n.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItemsSuccess("unhide",o.getId(),o.getSpecificContentElementType(),o.alias)}))},e.prototype.createNewNodeFromCE=function(e,t){var i=this.nodeManipulationService.addNodeToList(t);return r.each(e.values,function(e,t){return i.contentElement.values[t]=e}),i},e.prototype.getSectionSuggestionByNode=function(e){var t={rawSectionBrief:{id:e.alias,ceType:e.getContentElementType(),cardinality:2}},i=this.contentManager.suggestedSections().suggestions,n=i&&i.find(function(t){return t.id===e.alias});return n&&n.rawSectionBrief.cardinality>1&&(t.rawSectionBrief.item=n.rawSectionBrief.item),t},e.prototype.createNewCEDraft=function(e){var t=this.getSectionSuggestionByNode(e),i=this.modelTree.getListItems(e).length;return this.contentManager.prepareDrafts(t,1,i)[0].items[0]},e.prototype.createItemNodeAndAddToList=function(e){var t=this.createNewCEDraft(e),i=this.createNewNodeFromCE(t,e);return this.spinnerService.waitForMe("onAdd"),this.addListItem(i,void 0,"toasters.list-item-added","onAdd",!0,e)},e.prototype.addListItem=function(e,t,i,n,o,r){var a=this,s=r||this.nodeFetcher.getCurrentNode();return this.sectionManager.addListItem(s,e,t,o).then(function(){a.handleAfterUpdateList(i,n),a.consumerBiLogger.contentEditor.addDuplicateItemSuccess(s.getId(),s.getSpecificContentElementType(),s.alias,"onAdd"===n?"new":"duplicate")})},e.prototype.removeListItem=function(e,t,i,n){var o=this,r=this.$q.when();return("onDelete"!==i||!n.userHidden)&&(r=this.sectionManager.removeListItem(this.nodeFetcher.getCurrentNode(),n,e)),r.then(function(){o.handleAfterUpdateList(t,i)})},e.prototype.getVisibleItems=function(e){var t=e.getContentElementType();return r.filter(e.children,function(e){return e.getContentElementType()===t&&!e.userHidden})},e.prototype.handleAfterUpdateList=function(e,t){this.undoRedo.captureOperation(!1),e&&this.notification.show(e,2e3),this.spinnerService.imDone(t)},e.prototype.realIndexAndStatus=function(e,t){var i=this.getRealItem(e,t),n=this.nodeManipulationService.nodeIndexAndStatus(t,i);if(!n)throw"cannot toggle a non list item from this flow";return n.childNode=i,n},e.prototype.getRealItem=function(e,t){return r.find(t.children,function(t){return t.id===e.id})},e.prototype.createListItems=function(e){var t=this;if(!e)return[];var i=o.ListPanel.filterChildren(e.children).find(function(e){return!e.userHidden});return this.slideShowService.isSlideShow(e)&&!this.slideShowService.getSelectedItem(e.id)&&i&&this.slideShowService.setSelectedItem(e.id,i.id),o.ListPanel.filterChildren(e.children).map(function(e){var i=t.getSelectedItem(e);return t.generateItem(e,i)})},e.prototype.getSelectedItem=function(e){var t=e.identifyingNode;return t&&this.slideShowService.isSlideShow(t)&&this.slideShowService.getSelectedItem(t.id)},e}();t.ListPanelManager=a,angular.module("siteGeneratorEditorInternal").service("listPanelManager",a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e){this.mediaGallery=e}return e.$inject=["mediaGallery"],e.prototype.extractSocialLinks=function(e){var t=this;return n.map(e.contentElement.values.SocialButtons.value,function(i){return{platform:i.platform,url:i.Link.targetUrl,hidden:!!n.get(e.hiddenMedia,["icon",t.mediaGallery.getItemId(i)])}})},e}();t.SocialLinksHelpers=o,angular.module("siteGeneratorEditorInternal").service("socialLinksHelpers",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=i(17),r=i(0),a=function(){function e(e,t,i,n,o,r,a,s,l){var c=this;this.modelTree=e,this.introDataFormatter=t,this.socialLinkManager=i,this.mediaGallery=n,this.ReferenceFieldTypes=o,this.editorEventManager=r,this.undoRedo=a,this.initService=s,this.flags=l,this.flags.cardsToPanels?s.loaded().then(function(){c.socialNode=c.modelTree.getNodeByContentElementName("Social")}):this.socialNode=this.modelTree.getNodeByContentElementName("Social")}return e.$inject=["modelTree","introDataFormatter","socialLinkManager","mediaGallery","ReferenceFieldTypes","editorEventManager","undoRedo","initService","flags"],e.prototype.updateSocialLinks=function(e,t,i){var a=this;void 0===i&&(i=this.socialNode);var s=r.get(i.contentElement.getValuesByMediaType(),["icon","length"])||0,l=this.introDataFormatter.createSocialButtons(e);i.contentElement.values.SocialButtons.value.length=0,i.contentElement.values.SocialButtons.value=l,i.hiddenMedia.icon={},r.each(l,function(t,n){(e[n].hidden||e[n].platform===a.socialLinkManager.invalidPlatformName)&&(i.hiddenMedia.icon[a.mediaGallery.getItemId(t)]=!0)}),i.contentElement.fillValuesByMediaType();var c=r.get(i.contentElement.getValuesByMediaType(),["icon","length"])||0,d=0===s&&c>0,u=s>0&&0===c||d;u&&(t.getReferenceFields()[this.ReferenceFieldTypes.SOCIAL]=d);var p={node:t,isReferencedField:!0,key:this.ReferenceFieldTypes.SOCIAL,field:i.contentElement.values.SocialButtons.value,maskChanged:u,whatChanged:o.IEditEventType.ValueChange,parent:null};this.editorEventManager.nodeChanged(p),this.undoRedo.captureOperation(),n.PubSub.fire(n.events.SOCIAL_LINKS_UPDATED)},e}();t.SocialPanelManager=a,angular.module("siteGeneratorEditorInternal").service("socialPanelManager",a)},function(e,t){var i=function(){return function(){}}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("firstTimeMobileEditorTooltip",{templateUrl:"views/first-time-mobile-editor-tooltip.html",controller:i,bindings:{heading:"=",text:"=",icon:"=",buttonText:"=",onHide:"&",onAction:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(249),o=i(4),r=function(){function e(e,t,i,n,o,r){this.$q=e,this.TourAttachedTooltip=t,this.$compile=i,this.$timeout=n,this.$translate=o,this.$rootScope=r}return e.$inject=["$q","TourAttachedTooltip","$compile","$timeout","$translate","$rootScope"],e.prototype.selectFirstIfDefined=function(e,t){return void 0!==e?e:t},e.prototype.show=function(e){var t=this,i=new this.TourAttachedTooltip,r=angular.element("<div>"),a=this.selectFirstIfDefined(e.durationBeforeEntrance,150),s=this.selectFirstIfDefined(e.durationOfEntrance,250),l=this.selectFirstIfDefined(e.animationYOffset,12),c=this.selectFirstIfDefined(e.animationXOffset,0),d=this.selectFirstIfDefined(e.durationOfExit,150),u=this.$q.defer(),p=function(){r.remove(),i.element.css({opacity:"0"}),t.$timeout(function(){return i.destroy()},d+200),u.resolve()},g=Object.assign({titleText:"ADI Assistant",actionText:this.$translate.instant("general.got-it"),xOffset:0,showTitle:!1,showDivider:!1,onAction:function(){e.onActionCallback&&e.onActionCallback(),p()},onHide:function(){e.onHideCallback&&e.onHideCallback(),p()}},e);r.on("click",p),r.css({position:"fixed",top:"0px",left:"0px",width:"calc(100%)",height:"calc(100%)",zIndex:"1000"}),angular.element("body").append(r);var h=Object.assign(this.$rootScope.$new(),g,{componentClass:"no-title-with-p9-primary-button",buttonClass:"p9-primary -small"});return i.setContent(this.$compile(g.template?g.template:'<assistant-tip\n        text="text" title-text="titleText" component-class="componentClass" action-text="actionText" button-class="buttonClass" show-title="showTitle" show-divider="showDivider" on-action="onAction()"\n        ></assistant-tip>')(h)),i.attachTo(g.target,o.AssistantPositionX.Right,o.AssistantPositionY.Center),this.$timeout(function(){i.element.find("."+n.TourAttachedTooltip.CONTENT_CLASS).css({transform:"translateX("+g.xOffset+"px)"}),i.arrowElement.css({transform:"translateX("+g.xOffset+"px)"}),i.element.css({marginLeft:c+"px",marginTop:l+"px",opacity:"0",zIndex:"1001",display:"block"}),t.$timeout(function(){return i.element.css({opacity:"1",marginTop:"0px",marginLeft:"0px",transition:"margin-top "+s+"ms ease-in-out,\n             opacity "+s+"ms ease-in-out,\n             margin-left "+s+"ms ease-in-out"})},a),t.$timeout(function(){return i.element.css({transition:"margin-top "+d+"ms ease-in-out,\n              opacity "+d+"ms ease-in-out"})},a+s+200)}),u.promise},e}();t.AssistiveMessage=r,angular.module("siteGeneratorStaticsConsumerAppInternal").service("assistiveMessage",r)},function(e,t){var i=function(){return function(){}}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("assistantTip",{controller:i,templateUrl:"views/assistant-tip.html",bindings:{text:"=",titleText:"=?",buttonClass:"=",showTitle:"=?",showDivider:"=?",componentClass:"=?",actionText:"=",onAction:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.assistantVideoService=e}return e.$inject=["assistantVideoService"],e}();angular.module("siteGeneratorTourManagerInternal").component("assistantVideo",{controller:n,templateUrl:"views/assistant/assistant-video.html",bindings:{video:"<?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,o,r,a,s,l){var c=this;this.ccTip=e,this.tipContent=t,this.tipStorageManager=i,this.TipManagerTypeMap=o,this.$rootScope=r,this.$injector=a,this.flags=s,this.consumerBiLogger=l,this.$rootScope.$on("$stateChangeSuccess",function(){c.hide()}),this.typeMap=o,this.createNewTipDebounce=n.debounce(function(e,t){c.createNewTip(e,t)},800)}return e.$inject=["ccTip","tipContent","tipStorageManager","TipManagerTypeMap","$rootScope","$injector","flags","consumerBiLogger"],e.prototype.show=function(e,t){var i=this;this.shouldDisplayTip(e,t)?this.tipStorageManager.getTip(t+"-"+e).then(function(){i.hide()}).catch(function(){i.showTip(e,t)}):this.hide()},e.prototype.hide=function(){this.lastTip&&this.ccTip.hide(this.lastTip)},e.prototype.shouldDisplayTip=function(e,t){return!1},e.prototype.showTip=function(e,t){this.consumerBiLogger.tips.show(t,e),this.lastTip?this.lastTipType===e?this.ccTip.update(this.lastTip,this.tipContent.get(e,t.toLowerCase())):(this.hide(),this.createNewTipDebounce(e,t)):this.createNewTipDebounce(e,t)},e.prototype.isClickEvent=function(e){return e&&"click"===e.type},e.prototype.createNewTip=function(e,t){var i=this;this.lastTipType=e,this.lastTip=this.ccTip.build(angular.extend(this.tipContent.get(e,t.toLowerCase()),{style:angular.extend(this.getPosition(e),{zIndex:1}),onHide:function(n){i.isClickEvent(n)&&i.consumerBiLogger.tips.close(e,t),i.lastTip=void 0}})),this.ccTip.show(this.lastTip)},e.prototype.getPosition=function(e){return e===this.TipManagerTypeMap.ADD?{top:"93px",left:"497px"}:{top:"109px",left:"335px"}},e}();t.TipManager=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("tipManager",o)},function(e,t,i){"use strict";var n=function(){return function(){this.ADD="add",this.EDIT="edit"}}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("TipManagerTypeMap",new n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.TipContentTypeMap=e,this.$translate=t}return e.$inject=["TipContentTypeMap","$translate"],e.prototype.getKey=function(e){return"tip_content."+this.currentName.toLowerCase()+"-tip."+this.currentType+"-mode."+e},e.prototype.getTranslation=function(e){return this.$translate.instant(this.getKey(e))},e.prototype.initParams=function(e,t){this.currentType=e,this.currentName=t},e.prototype.isTitle=function(e,t){return this.initParams(e,t),this.getTranslation("title")!==this.getKey("title")},e.prototype.get=function(e,t){return this.initParams(e,t),{scope:{contact:{name:this.$translate.instant("tip_content.contact.name"),profession:this.$translate.instant("tip_content.contact.profession"),img:"images/tip/rachael.jpg"},title:this.getTranslation("title"),footer:{closeButton:this.getTranslation("footer_button")}},template:this.getTranslation("content_template")}},e}();t.TipContent=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("tipContent",n)},function(e,t,i){"use strict";var n=function(){return function(){this.WELCOME="Welcome",this.ABOUT="About",this.PRODUCTS="Products",this.HOURS="Hours",this.ABOUT_US="About Us",this.OUR_HISTORY="Our History",this.ALL_PRUDUCTS="All Products",this.SPECIAL_EVENTS="Special Events",this.WEDDING_SERVICES="Wedding Services",this.SPECIALITY_ITEMS="Specialty Items",this.BAKING_CLASSES="Baking Classes",this.NEWS_AND_UPDATES="News & Updates",this.SUBSCRIBE="Subscribe",this.MEET_THE_TEAM="Meet the Team",this.OPENING_HOURS="Opening Hours",this.CONTACT="Contact"}}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("TipContentTypeMap",new n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.wixCache=e,this.$q=t,this.storyServices=i}return e.$inject=["wixCache","$q","storyServices"],e.prototype.getTip=function(e){var t=this;return this.getCache().then(function(i){return t.$q(function(n,o){t.isNameExists(i,e)?n():(t.setStorageName(i,e),o())})})},e.prototype.getStorageKey=function(){return"cc-tip-"+this.storyServices.story.id},e.prototype.getNameId=function(e){return e.toLowerCase().replace(/ /g,"-")},e.prototype.getCache=function(){return this.wixCache.get(this.getStorageKey(),{namespace:"ob"}).then(function(e){return e}).catch(function(){return{}})},e.prototype.setStorageName=function(e,t){e[this.getNameId(t)]=!0,this.wixCache.set(this.getStorageKey(),e,{namespace:"ob"})},e.prototype.isNameExists=function(e,t){return!!e[this.getNameId(t)]},e}();t.TipStorageManager=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("tipStorageManager",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a,s,l,c,d){var u=this;this.sectionManager=e,this.consumerBiLogger=t,this.undoRedo=i,this.applicationState=n,this.overlayManager=o,this.sectionDrag=r,this.simpleSolutionManager=a,this.nodeManipulationService=s,this.consumerMenu=l,this.sitePartTypes=c,this.tpaService=d,this.upClick=function(){return u.moveSection(!1)},this.downClick=function(){return u.moveSection(!0)}}return e.$inject=["sectionManager","consumerBiLogger","undoRedo","applicationState","overlayManager","sectionDrag","simpleSolutionManager","nodeManipulationService","consumerMenu","sitePartTypes","tpaService"],e.prototype.moveSection=function(e){var t=this,i=this.listSpan.node,n=this.sectionManager.geSectionPositionInPage(i),o=e?n+1:n-1,r=e?"down":"up",a=this.tpaService.getAppId(i);this.consumerBiLogger.sectionManagement.moveSectionWithinThePageClick(i.getId(),i.getContentElementType(),i.alias,o,n,r,a);var s={direction:this.simpleSolutionManager.Animation.Direction.NORMAL,type:this.simpleSolutionManager.Animation.Type.CROSS_FADE},l=i.containerPageId,c=i.id,d=this.nodeManipulationService.moveNode(c,l,e);if(-1!==d){var u=e?[c,d]:[d,c],p=u[0],g=u[1];this.applicationState.clearContentFocus(),this.simpleSolutionManager.swapAdjacentSectionsOnPage(l,p,g).then(function(e){return t.sectionManager.startAnimatedRender(e,s)}).then(function(){t.applicationState.setContentFocus(c,t.sitePartTypes.BODY),t.overlayManager.calculateBodyHeight(),t.consumerMenu.calcMenuAnchors(),t.consumerBiLogger.sectionManagement.sectionMovedWithinThePageSuccess(i.getId(),i.getContentElementType(),i.alias,o,n,r,a),t.undoRedo.captureOperation()})}},e.prototype.dragHandleClick=function(){this.applicationState.setContentFocus(this.listSpan.node.id,this.listSpan.sitePart)},e.prototype.dragStart=function(){var e=this.listSpan.node,t=this.sectionManager.geSectionPositionInPage(e),i=this.tpaService.getAppId(e);return this.consumerBiLogger.sectionManagement.moveSectionWithinThePageStartDragging(e.getId(),e.getContentElementType(),e.alias,t,i),this.undoRedo.disableAutoSave(),this.applicationState.setSteady(!1),this.overlayManager.data.draggedListSpan=this.listSpan,this.sectionDrag.startDrag()},e.prototype.dragEnd=function(){this.applicationState.setSteady(!0),this.undoRedo.enableAutoSave()},e.prototype.dragCanceled=function(){var e=this;return this.sectionDrag.cancelDrag().then(function(){e.overlayManager.clearDropTarget(),e.applicationState.setContentFocus(e.listSpan.node.id,e.listSpan.sitePart)})},e.prototype.drop=function(){this.sectionDrag.drop()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("dragHandle",{templateUrl:"views/builder/drag-handle.html",controller:n,bindings:{listSpan:"=",dragDisabled:"=",arrowUpDisabled:"=",arrowDownDisabled:"="}}),angular.module("siteGeneratorStaticsConsumerAppInternal").component("dragHandle2",{templateUrl:"views/builder/drag-handle2.html",controller:n,bindings:{listSpan:"=",dragDisabled:"=",arrowUpDisabled:"=",arrowDownDisabled:"="}})},function(e,t){},function(e,t){angular.module("siteGeneratorCommon").factory("wixmp",["$window",function(e){return e.wixmp}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n){this.consumerBiLogger=e,this.clientTopology=t,this.flags=i,this.$q=n}return e.$inject=["consumerBiLogger","clientTopology","flags","$q"],e.prototype.getSocialImages=function(e,t){var i=this;if(this.itemList&&!t)return this.$q.when(this.itemList);var n=this.$q.defer();return this.initPrivateMedia(),this.privateMediaSource.items.search(e," ").then(function(e){i.itemList=e,n.resolve(e)}),n.promise},Object.defineProperty(e.prototype,"socialImages",{get:function(){if(this.itemList&&this.itemList.data&&this.itemList.data.length)return this.itemList},enumerable:!0,configurable:!0}),e.prototype.getImagesByFolderId=function(e){return this.initPrivateMedia(),this.privateMediaSource.items.search(e," ").then(function(e){return e.data})},e.prototype.removeFolders=function(e){this.initPrivateMedia();var t=this.privateMediaSource.folders.remove(e);return Promise.all(t.map(function(e){return e.catch(function(){return null})}))},e.prototype.initPrivateMedia=function(){this.privateMediaSource||(this.privateMediaSource=this.flags.MediaManager3||this.flags.MediaManager3Migrate?new wixmp.Source(wixmp.sources.PRIVATE_SITE,{siteMediaToken:this.clientTopology.siteMediaToken}):new wixmp.Source(wixmp.sources.PRIVATE))},e}();t.WixmpServices=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("wixmpServices",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(1018),i(1019),i(1020),i(1021),i(1022),i(1023),i(1024);var n=i(1025);angular.module("siteGeneratorEditorInternal").component("imageUpscaleStatusMessage",{templateUrl:"views/editor/media-settings/image-upscale-status-message.html",controller:n.ImageUpscaleStatusMessage,bindings:{node:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(18),o=i(1),r=function(){function e(e,t,i,n,o,r,a){var s=this;this.sectionMedia=e,this.$translate=t,this.$scope=i,this.applicationState=n,this.slideShowService=o,this.sectionMediaSetter=r,this.modelTree=a,this.showMediaSizeButton=!1,this.refreshMediaSizeOptions(),this.onMediaSizeChange&&this.selectedMediaSize&&this.onMediaSizeChange({mediaSize:this.selectedMediaSize.key}),this.$scope.$watch(function(){return s.mediaType},function(){s.refreshMediaSizeOptions()})}return e.$inject=["sectionMedia","$translate","$scope","applicationState","slideShowService","sectionMediaSetter","modelTree"],e.prototype.onMediaSizeChanged=function(e){var t=this,i=this.selectedMediaSize,o=e.key;this.refreshMediaSizeButton(o),this.sectionMediaSetter.setOption(this.node,this.mediaType,o).then(function(o){if(!o)return t.selectedMediaSize=i,void t.refreshMediaSizeButton();t.selectedMediaSize=e,t.refreshMediaSizeButton(),t.onMediaSizeChange&&(t.onMediaSizeChange({mediaSize:e.key}),e.key===n.MediaSizeOptions.Uncropped&&t.refreshMediaSizeOptions())})},e.prototype.onMediaSizeButtonClick=function(){this.onButtonClick&&this.onButtonClick({mediaSize:this.selectedMediaSize.key})},e.prototype.hasSingleOption=function(){return 1===this.mediaSizeItems.length},e.prototype.refreshMediaSizeOptions=function(){var e=this,t=this.sectionMedia.getOptions(this.node,this.mediaType),i=t.selectedIndex>=0&&t.selectedIndex<t.items.length?t.selectedIndex:0;this.mediaSizeItems=t.items.map(function(t,i){return{key:t,label:function(t){return e.$translate.instant(("editor.media-settings.ms-options."+t).toLowerCase())}(t)}}),this.selectedMediaSize=t.items.length>0?this.mediaSizeItems[i]:null,this.mediaSizeItems.length>0&&this.refreshMediaSizeButton()},e.prototype.refreshMediaSizeButton=function(e){if(this.slideShowService.isSlideShow(this.modelTree.findIdentifyingNode(this.node)))this.showMediaSizeButton=!1;else switch(this.mediaType){case cc.MediaPreviewType.SingleImage:e||(e=this.selectedMediaSize.key);var t=e.toLowerCase(),i="editor.media-settings.ms-options.image."+t+".button";this.mediaSizeButtonText=this.$translate.instant(i),this.mediaSizeButtonTooltip="media-settings.size-button."+t,this.showMediaSizeButton=!0;break;case cc.MediaPreviewType.MultipleImages:this.mediaSizeButtonText=this.$translate.instant("editor.media-settings.ms-options.gallery.all.button"),this.mediaSizeButtonTooltip="media-settings.size-button.gallery",this.showMediaSizeButton=this.showButtonForGallery();break;default:return void(this.showMediaSizeButton=!1)}},e.prototype.showButtonForGallery=function(){return this.selectedMediaSize.key===n.MediaSizeOptions.Box||this.selectedMediaSize.key===n.MediaSizeOptions.Column||this.selectedMediaSize.key===n.MediaSizeOptions.Strip},e.prototype.goToSwitchPreset=function(){this.applicationState.goToSwitchPresetMode(o.BIOrigins.MediaSetting)},e}();t.MediaSizeDropdown=r,angular.module("siteGeneratorEditorInternal").component("mediaSizeDropdown",{templateUrl:"views/editor/media-settings/media-size-dropdown.html",controller:r,bindings:{node:"<",mediaType:"<",onMediaSizeChange:"&",onButtonClick:"&",automation:"@?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(2),r=i(18),a=i(17),s=i(1),l=function(){function e(e,t,i,n,r,a,s,l,c,d,u,p,g,h,m,f,v,S,y,T,b,I,P,M,E,w,C,A,L,B,k,H,O,_,D){var $=this;this.applicationState=e,this.initService=t,this.nodeFetcher=i,this.solutionFetcher=n,this.animationUtils=r,this.mediaEditorManager=a,this.mediaFitCAB=s,this.imagePositionCAB=l,this.mediaOverrideManager=c,this.consumerBiLogger=d,this.sectionMedia=u,this.mediaSectionUtils=p,this.nodeChangeReporter=g,this.headerPresetUtils=h,this.$element=m,this.consumerBiLoggerHelpers=f,this.consumerMediaUtils=v,this.galleryTypeCAB=S,this.CcDialogBuilder=y,this.$translate=T,this.modelTreeHelpers=b,this.CONSUMER_DIALOGS=I,this.onstageActionsManager=P,this.ONSTAGE_EVENTS=M,this.flags=E,this.backgroundScrollService=w,this.$rootScope=C,this.$q=A,this.sectionBackgroundService=L,this.mediaOpacityManager=B,this.storyServices=k,this.undoRedo=H,this.logoSizeService=O,this.slideShowService=_,this.imageUpscale=D,this.initService.loaded().then(function(){$.init()}),this.unsubscribes=[o.PubSub.subscribe(o.events.NEW_STATE_STORY_WAS_SET,function(){$.refreshMediaSize(),$.init()}),P.subscribe(this.ONSTAGE_EVENTS.HIDE,function(e){$.applicationState.goToEditMode()}),o.PubSub.subscribe(o.events.SECTION_DELETED,function(e){$.unsubscribe()})],this.flags.cardsToPanels&&(this.unsubscribes.push(this.$rootScope.$on("$stateChangeSuccess",function(){$.updateShowNested(),$.refreshActiveMedia()})),this.updateShowNested()),this.scrollTypeOptions=this.animationUtils.placeLabels(angular.copy(this.backgroundScrollService.getOptions()),"label","background-scroll")}return e.$inject=["applicationState","initService","nodeFetcher","solutionFetcher","animationUtils","mediaEditorManager","mediaFitCAB","imagePositionCAB","mediaOverrideManager","consumerBiLogger","sectionMedia","mediaSectionUtils","nodeChangeReporter","headerPresetUtils","$element","consumerBiLoggerHelpers","consumerMediaUtils","galleryTypeCAB","CcDialogBuilder","$translate","modelTreeHelpers","CONSUMER_DIALOGS","onstageActionsManager","ONSTAGE_EVENTS","flags","backgroundScrollService","$rootScope","$q","sectionBackgroundService","mediaOpacityManager","storyServices","undoRedo","logoSizeService","slideShowService","imageUpscale"],e.prototype.refreshOpacity=function(){this.opacity=this.mediaOpacityManager.getOpacity(this.node)},e.prototype.resetImageUpscaleMethod=function(){this.imageUpscale.setUpscaleMethod(this.node,void 0),this.flags.debug&&this.imageUpscale.printDebugInfo(this.node)},e.prototype.isMediaTypePattern=function(){return this.currentMediaType===cc.MediaPreviewType.Pattern},e.prototype.updateShowNested=function(){this.showNested=this.shouldShowNested()},e.prototype.$onDestroy=function(){this.unsubscribe()},e.prototype.unsubscribe=function(){this.unsubscribes.forEach(function(e){return e()})},e.prototype.refreshMediaSize=function(){this.currentMediaSize=this.sectionMedia.getSelectedOption(this.node)},e.prototype.setScrollTypeToNone=function(){this.backgroundScrollService.setSectionOverrideWithInheritance(this.node.identifyingNode,this.backgroundScrollService.SCROLL_TYPE.NONE),this.activeScrollType=this.getActiveScrollType()},e.prototype.onMediaChange=function(e){this.currentMediaType===cc.MediaPreviewType.SingleImage&&this.refreshOpacity(),this.flags.imageBgColor&&this.currentMediaType===cc.MediaPreviewType.SingleImage&&this.initBgColorSetting(),this.flags.superRes&&this.currentMediaType===cc.MediaPreviewType.SingleImage&&this.resetImageUpscaleMethod(),e===a.IEditEventType.GalleryLayoutChange?this.mediaSectionUtils.updateGalleryOnViewer(this.node):(this.refreshActiveMedia(),this.flags.scrollEffectInMediaSettings&&"fileInput"in this.activeMedia&&this.activeMedia.fileInput&&this.activeMedia.fileInput.face&&this.activeMedia.fileInput.face.length&&this.setScrollTypeToNone())},e.prototype.onMediaTypeChange=function(e){this.currentMediaType=e,this.refreshMediaSize(),this.refreshActiveMedia(),this.activeScrollType||this.setScrollTypeToNone()},e.prototype.onMediaSizeChange=function(e){this.refreshOpacity(),this.flags.imageBgColor&&this.nodeFetcher.isNodeBody(this.node)&&this.initBgColorSetting(),this.currentMediaSize=e,this.consumerBiLogger.contentEditor.switchMediaSizeClick(e,this.node.id,this.node&&this.node.alias,this.node.getSpecificContentElementType())},e.prototype.onMediaOpacityChange=function(e){this.mediaOpacityManager.getUserMediaOpacity(this.node)!==e/100&&(this.mediaOpacityManager.setOpacity(this.node,e),this.consumerBiLogger.contentEditor.changeImageOpacity(!1,e,this.node.id,this.node&&this.node.alias,this.node.getSpecificContentElementType()))},e.prototype.onMediaSizeAction=function(e){switch(this.currentMediaType){case cc.MediaPreviewType.SingleImage:this.onSingleImageAction(e);break;case cc.MediaPreviewType.MultipleImages:this.openGalleryType()}},e.prototype.openGalleryType=function(){this.galleryTypeCAB.openGalleryType(this.node,this.sizeDropdownElement())},e.prototype.onSingleImageAction=function(e){switch(e){case r.MediaSizeOptions.Cropped:this.openCropper();break;case r.MediaSizeOptions.Uncropped:this.openFitMode();break;case r.MediaSizeOptions.Strip:this.openImagePosition(this.flags.stripFocalPoint);break;default:this.openImagePosition()}},e.prototype.showImageSettings=function(){return this.activeMedia&&(this.isImageType()||this.isSmallImageType())},e.prototype.isSmallImageType=function(){return this.mediaSectionUtils.isSmallImageType(this.currentMediaType)},e.prototype.isImageType=function(){return this.mediaSectionUtils.isImageType(this.currentMediaType,this.currentMediaSize)},e.prototype.showVideoSettings=function(){return this.activeMedia&&this.currentMediaType===cc.MediaPreviewType.ExtVideo&&(!this.currentMediaSize||this.currentMediaSize===r.MediaSizeOptions.Box)},e.prototype.showMediaSize=function(){return this.currentMediaType!==cc.MediaPreviewType.Shape&&this.nodeFetcher.isNodeBody(this.node)},e.prototype.showScrollEffect=function(){var e=this.currentMediaType===cc.MediaPreviewType.SingleImage||this.currentMediaType===cc.MediaPreviewType.Video||this.currentMediaType===cc.MediaPreviewType.Pattern,t=!this.currentMediaSize||this.currentMediaSize===r.MediaSizeOptions.Column||this.currentMediaSize===r.MediaSizeOptions.Background||this.currentMediaSize===r.MediaSizeOptions.BackgroundHeader||this.currentMediaSize===r.MediaSizeOptions.Strip,i=!this.node||!this.slideShowService.isSlideShow(this.node.identifyingNode)||this.currentMediaSize===r.MediaSizeOptions.BackgroundHeader;return e&&t&&i&&this.nodeFetcher.isNodeBody(this.node)&&this.flags.scrollEffectInMediaSettings},e.prototype.showMediaOpacity=function(){return this.currentMediaType===cc.MediaPreviewType.SingleImage&&this.mediaOpacityManager.showMediaOpacity(this.node)},e.prototype.showMediaBgColor=function(){return this.node&&this.flags.imageBgColor&&this.showMediaOpacity()},e.prototype.getActiveScrollType=function(){return n.find(this.scrollTypeOptions,{value:this.backgroundScrollService.getActiveScrollType(this.node.identifyingNode)||this.backgroundScrollService.SCROLL_TYPE.NONE})},e.prototype.refreshScrollType=function(){return this.storyServices.reRender()},e.prototype.setScrollType=function(e){var t=this,i=this.backgroundScrollService.getLabel(e);this.consumerBiLogger.sectionDesign.changeScrollAnimationClick(this.node.alias,this.node.getContentElementType(),i,e),this.activeScrollType=e,this.backgroundScrollService.setSectionOverrideWithInheritance(this.node.identifyingNode,e),this.$q.when().then(function(){if(t.flags.sectionMedia)return t.sectionBackgroundService.updateViewer(t.node.identifyingNode)}).then(function(){return t.refreshScrollType()}).then(function(){t.undoRedo.captureOperation(!1,!0),t.consumerBiLogger.sectionDesign.changeScrollAnimationSuccess(t.node.alias,t.node.getContentElementType(),i,e)})},e.prototype.setMediaBgColor=function(e){var t=this.mediaOpacityManager.getMediaBgPalette(),i=n.find(t,function(t){return t.hex===e.backgroundColor}).color,o=n.findIndex(t,{color:i});this.mediaOpacityManager.setBgColor(this.node,i,o)},e.prototype.showLogoSize=function(){return this.flags.resizeLogo&&this.modelTreeHelpers.isSiteHeader(this.node)},e.prototype.onLogoSizeChange=function(e){this.consumerBiLogger.contentEditor.changeLogoSize(this.node.getId(),e),this.logoSizeService.setLogoSize(e)},e.prototype.closePanel=function(){this.closeBI(),this.applicationState.goToBuilder()},e.prototype.goToPrevState=function(){this.applicationState.goToEditMode(this.modelTreeHelpers.isItemOfList(this.node)?this.node.id:null)},e.prototype.onHelp=function(){var e=this.$translate.instant("help.section.sectionMedia.mediaSettingsPanel");this.CcDialogBuilder.showSupportIframe(e,this.CONSUMER_DIALOGS.MEDIA_SETTINGS_PANEL_HELP)},e.prototype.openCropper=function(){this.consumerBiLogger.contentEditor.cropImageDialogIsShown(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.mediaEditorManager.openCropper()},e.prototype.openFitMode=function(){return this.mediaFitCAB.open(this.node,!0,this.sizeDropdownElement())},e.prototype.openImagePosition=function(e){var t={target:this.sizeDropdownElement(),node:this.node,focalPoint:e,background:this.isBackground(this.currentMediaSize)};this.imagePositionCAB.show(t)},e.prototype.sizeDropdownElement=function(){return this.galleryTypeCAB.getSizeDropdownButton()},e.prototype.refreshActiveMedia=function(){this.activeMedia=this.sectionMedia.getMedia(this.node),this.activeMedia||this.applicationState.goToEditMode()},e.prototype.closeBI=function(){this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLogger.contentEditor.closeMediaWindow(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.consumerMediaUtils.mediaTypeToString(this.currentMediaType),this.consumerMediaUtils.mediaTypeToGalleryType(this.currentMediaType),s.BIOrigins.MediaSetting)},e.prototype.openBI=function(){this.consumerBiLogger.contentEditor.panelIsLoaded(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.consumerBiLoggerHelpers.popPanelSource()||s.BIOrigins.ClickEditMedia),this.consumerBiLogger.contentEditor.mediaSettingsShow(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.consumerMediaUtils.mediaTypeToString(this.currentMediaType),this.consumerMediaUtils.mediaTypeToGalleryType(this.currentMediaType))},e.prototype.init=function(){this.node=this.nodeFetcher.getCurrentActiveNode(),this.applicationState.isFooterContent()&&this.applicationState.goToEditMode(this.node.id),this.node||this.applicationState.goToBuilder(),this.nodeFetcher.isNodeBody(this.node)||this.nodeChangeReporter.init(this.node),this.currentMediaType=this.sectionMedia.getMediaType(this.node),this.openBI(),this.refreshActiveMedia(),this.refreshOpacity(),this.showLogoSize()&&(this.categoryLabels={"-2":this.$translate.instant("design.header.logo-size-.-2"),"-1":this.$translate.instant("design.header.logo-size-.-1"),0:this.$translate.instant("design.header.logo-size-.0"),1:this.$translate.instant("design.header.logo-size-.1"),2:this.$translate.instant("design.header.logo-size-.2")},this.logoSize=this.logoSizeService.getLogoSize()),this.showScrollEffect()&&(this.activeScrollType=this.getActiveScrollType()),this.flags.imageBgColor&&this.nodeFetcher.isNodeBody(this.node)&&this.initBgColorSetting()},e.prototype.initBgColorSetting=function(){this.colorItems=this.createBgColorsItems(),this.bgColor=this.getCurrentBgColor()},e.prototype.createBgColorsItems=function(){return this.mediaOpacityManager.getMediaBgPalette().map(function(e){return{backgroundColor:e.hex,automation:"bg-color-item"}})},e.prototype.getCurrentBgColor=function(){var e=this.mediaOpacityManager.getMediaBgPalette(),t=this.mediaOpacityManager.getBgColor(this.node),i=n.find(e,function(e){return e.color===t}).hex;return n.find(this.colorItems,function(e){return e.backgroundColor===i})},e.prototype.shouldShowNested=function(){return this.applicationState.isInSectionBackgroundPanel()||this.applicationState.isInEditPatterns()},e.prototype.isBackground=function(e){return e===r.MediaSizeOptions.Background||e===r.MediaSizeOptions.BackgroundFull||e===r.MediaSizeOptions.BackgroundList||e===r.MediaSizeOptions.BackgroundHeader},e}();t.MediaSettingsPanelNew=l,angular.module("siteGeneratorEditorInternal").component("mediaSettingsPanelNew",{templateUrl:"views/editor/media-settings/media-settings-panel.html",controller:l})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(18),o=i(55),r=function(){function e(e,t,i,n,o){this.mediaAlignment=e,this.consumerBiLogger=t,this.sectionMedia=i,this.undoRedo=n,this.modelTree=o}return e.$inject=["mediaAlignment","consumerBiLogger","sectionMedia","undoRedo","modelTree"],e.prototype.$postLink=function(){var e=this.background?this.mediaAlignment.getBackgroundAlignment(this.node):this.mediaAlignment.getInlineAlignment(this.node);this.selectedPosition=o.ImagePositions.invertedPosToDetails[e]},e.prototype.setPosition=function(e,t){if(this.background){var i=t===n.MediaSizeOptions.BackgroundHeader?"header":void 0;return this.mediaAlignment.setBackgroundAlignment(this.modelTree.findIdentifyingNode(this.node),e,i)}return this.mediaAlignment.setInlineAlignment(this.node,e)},e.prototype.onSelectedPositionClick=function(e){var t=this,i=this.sectionMedia.getSelectedOption(this.node),n=o.ImagePositions.posToDetails[e];this.consumerBiLogger.sectionDesign.changeBackgroundImagePositionClick(n,i,this.node.alias,this.node.getSpecificContentElementType()),this.setPosition(n,i).then(function(){t.undoRedo.captureOperation(!1),t.consumerBiLogger.sectionDesign.changeBackgroundImagePositionSuccess(n,i,t.node.alias,t.node.getSpecificContentElementType())})},e}();t.MediaPositionPanel=r,angular.module("siteGeneratorEditorInternal").component("mediaPositionPanel",{templateUrl:"views/editor/media-settings/media-position-panel.html",controller:r,bindings:{node:"<",background:"<",onClose:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(276),o=i(17),r=i(0),a=function(){function e(e,t,i){var o=this;this.mediaEditorManager=e,this.videoProvidersUtils=t,this.$translate=i,this.FIELD_CHANGE_DEBOUNCE_IN_MS=500,this.videoControlOptions=[{id:n.videoControlOptions.NEVER,label:this.$translate.instant("editor.media-settings.ext-video.controls.option.never")},{id:n.videoControlOptions.ON_HOVER,label:this.$translate.instant("editor.media-settings.ext-video.controls.option.on-hover")},{id:n.videoControlOptions.ALWAYS,label:this.$translate.instant("editor.media-settings.ext-video.controls.option.always")}],this.changeVideoUrl=r.debounce(function(e,t){try{var i=o.videoProvidersUtils.getVideoThumbnailUrl(e);if(i)o.lastValidVideoUrl=e;else{if(!t)return;o.mediaValue.videoUrl=o.lastValidVideoUrl,i=o.videoProvidersUtils.getVideoThumbnailUrl(o.lastValidVideoUrl)}o.mediaValue.thumbnailUrl="string"==typeof i?i:"",o.videoProvidersUtils.isVimeo(e)?o.mediaValue.uri="/videos/"+o.videoProvidersUtils.getVimeoId(e):delete o.mediaValue.uri,o.handleVideoSettingsChanged()}catch(e){}},this.FIELD_CHANGE_DEBOUNCE_IN_MS),this.init()}return e.$inject=["mediaEditorManager","videoProvidersUtils","$translate"],e.prototype.init=function(){this.mediaValue.controls||(this.mediaValue.controls=n.videoControlOptions.ALWAYS),this.setCurrentVideoControlOption(this.mediaValue)},e.prototype.handleVideoSettingsChanged=function(){this.mediaEditorManager.handleMediaPropertiesChange(o.IEditEventType.VideoSettingsChange)},e.prototype.changeVideoControlOption=function(e){this.mediaValue.controls=e.id,this.handleVideoSettingsChanged()},e.prototype.shouldHideVideoControls=function(){return this.videoProvidersUtils.isVimeo(this.mediaValue.videoUrl)},e.prototype.setCurrentVideoControlOption=function(e){this.selectedVideoControlOption=this.videoControlOptions[e.controls],this.lastValidVideoUrl=e.videoUrl},e}();angular.module("siteGeneratorEditorInternal").component("extVideoSettings",{templateUrl:"views/editor/media-settings/ext-video-settings.html",controller:a,bindings:{mediaValue:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(17),o=function(){function e(e,t,i,n,o){this.mediaEditorManager=e,this.nodeEditorManager=t,this.linkDetailsManager=i,this.linkEditorCAB=n,this.$scope=o,this.init()}return e.$inject=["mediaEditorManager","nodeEditorManager","linkDetailsManager","linkEditorCAB","$scope"],e.prototype.init=function(){var e=this;this.$scope.$watch("$ctrl.mediaValue",function(){return e.updateILink()})},e.prototype.onChangeMediaTitle=function(e){e=this.insureTextLength(e,core.GENERAL_VALIDATIONS.MAX_MEDIA_TITLE_LENGTH),this.mediaValue.Title=e,this.mediaEditorManager.handleMediaPropertiesChange(n.IEditEventType.MediaTitleChange)},e.prototype.onChangeMediaDescription=function(e){e=this.insureTextLength(e,core.GENERAL_VALIDATIONS.MAX_MEDIA_DESCRIPTION_LENGTH),this.mediaValue.Description=e,this.mediaEditorManager.handleMediaPropertiesChange(n.IEditEventType.MediaDescriptionChange)},e.prototype.changeLink=function(){var e=this,t={linkDetails:this.mediaValue.Link,node:this.node,biSource:"media"};this.linkEditorCAB.show(t).then(function(t){e.mediaValue.Link=t,e.updateILink(),e.mediaEditorManager.handleMediaPropertiesChange(n.IEditEventType.ValueChange)})},e.prototype.insureTextLength=function(e,t){return e.substr(0,Math.min(e.length,t))},e.prototype.updateILink=function(){this.linkAsILink=this.linkDetailsManager.generateILink(this.mediaValue.Link)},e}();angular.module("siteGeneratorEditorInternal").component("imageSettings",{templateUrl:"views/editor/media-settings/image-settings.html",controller:o,bindings:{node:"<",mediaValue:"<",showDescription:"<?"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(190),o=i(2),r=i(18),a=i(1),s=i(0),l=function(){function e(e,t,i,n,o,r,a,s,l,c,d,u,p,g,h,m,f,v,S){var y=this;this.flags=e,this.mediaEditorManager=t,this.applicationState=i,this.consumerMediaUtils=n,this.mediaOverrideManager=o,this.PresetMediaType=r,this.notification=a,this.undoRedo=s,this.editorEventManager=l,this.mediaSectionUtils=c,this.$scope=d,this.sectionMedia=u,this.nodeFetcher=p,this.$translate=g,this.modelTreeHelpers=h,this.sectionMediaSetter=m,this.modelTree=f,this.initService=v,this.$rootScope=S,this.unsubscribes=[],this.flags.cardsToPanels?this.initService.loaded().then(function(){y.init()}):this.init()}return e.$inject=["flags","mediaEditorManager","applicationState","consumerMediaUtils","mediaOverrideManager","PresetMediaType","notification","undoRedo","editorEventManager","mediaSectionUtils","$scope","sectionMedia","nodeFetcher","$translate","modelTreeHelpers","sectionMediaSetter","modelTree","initService","$rootScope"],e.prototype.initTabLabels=function(){return(e={})[cc.MediaPreviewType.SingleImage]=this.$translate.instant("editor.media-settings.tabs.image"),e[cc.MediaPreviewType.MultipleImages]=this.$translate.instant("editor.media-settings.tabs.gallery"),e[cc.MediaPreviewType.Video]=this.$translate.instant("editor.media-settings.tabs.video"),e[cc.MediaPreviewType.ExtVideo]=this.$translate.instant("editor.media-settings.tabs.video"),e[cc.MediaPreviewType.Pattern]=this.$translate.instant("editor.media-settings.tabs.pattern"),e[cc.MediaPreviewType.Clipart]=this.$translate.instant("editor.media-settings.tabs.image"),e[cc.MediaPreviewType.Shape]=this.$translate.instant("editor.media-settings.tabs.shape"),e;var e},Object.defineProperty(e.prototype,"currentMediaType",{get:function(){return this.mediaEditorManager.getCurrentMediaType()},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this;this.node||console.log("no node"),this.contentElement=this.node.contentElement,this.field=this.mediaSectionUtils.getMediaField(this.contentElement),this.isInMobileEditMode=this.applicationState.isInMobileEditMode(),this.tabLabels=this.initTabLabels(),this.initInternal(),this.$scope.$watchGroup(["$ctrl.mediaSize","$ctrl.node"],function(t,i){t!==i&&e.initInternal()}),this.unsubscribes.push(this.$rootScope.$on("$stateChangeSuccess",function(){e.initInternal()}))},e.prototype.initInternal=function(){var e=this.sectionMedia.getMediaType(this.node),t=this.mediaSectionUtils.getMediaLayoutFormat(this.node);this.mediaEditorManager.setCurrentMediaType(e),this.mediaOverride=this.mediaOverrideManager.getAllowedMediaOverride(this.node.isListHeader()?this.node:this.modelTree.findIdentifyingNode(this.node)),this.visibleMediaTypes=this.sectionMedia.getVisibleMediaTypes(this.node,t,this.mediaOverride),s.isUndefined(e)||this.updateMedia()},e.prototype.onMediaTypeChanged=function(e){var t=this;this.mediaEditorManager.setCurrentMediaType(e),this.consumerMediaUtils.biSwitchMediaTypeClick(this.node,e),this.sectionMediaSetter.setOption(this.node,e).then(function(){t.updateMedia(),t.onMediaTypeChanged&&t.onMediaTypeChange({mediaType:e}),o.PubSub.fire(o.events.MEDIA_TYPE_CHANGE,t.node)}),this.modelTreeHelpers.isItemOfList(this.node)&&(this.flags.disableUndoRedo?this.notification.show("toasters.list-item-media-type-changed"):this.notification.show("toasters.list-item-media-type-changed","general.undo",function(){t.undoRedo.undo()}))},e.prototype.getModeForSectionBackground=function(){if(!this.nodeIsList())return n.SectionBackgroundModes.NONE;switch(this.sectionMedia.getSelectedOption(this.node)){case r.MediaSizeOptions.BackgroundHeader:return n.SectionBackgroundModes.HEADER;case r.MediaSizeOptions.BackgroundList:return n.SectionBackgroundModes.LIST;default:return n.SectionBackgroundModes.NONE}},e.prototype.onReplaceClick=function(){var e=this;this.mediaEditorManager.getCurrentMediaType()!==cc.MediaPreviewType.Pattern?this.disableMediaChangeButton||(this.disableMediaChangeButton=!0,this.mediaEditorManager.mediaChange(this.field,this.contentElement,a.BIOrigins.MediaSettingsPanel).then(function(){e.updateMedia(),e.onMediaChange&&e.onMediaChange()}).finally(function(){e.disableMediaChangeButton=!1})):this.applicationState.goToSectionBackgroundPanel(a.BIOrigins.MediaSettingsPanel,this.getModeForSectionBackground())},e.prototype.onColorClick=function(){this.applicationState.goToSectionColorPanel(a.BIOrigins.MediaSetting)},e.prototype.updateMedia=function(){this.media=this.sectionMedia.getMediaByType(this.node,this.mediaEditorManager.getCurrentMediaType())},e.prototype.nodeIsList=function(){var e=s.get(this.node,"nodeDescription.isListItem")&&"ListHeader"!==this.node.contentElementType&&"ListFooter"!==this.node.contentElementType;return this.node.isListItem||e},e}();angular.module("siteGeneratorEditorInternal").component("mediaChooser",{templateUrl:"views/editor/media-settings/media-chooser.html",controller:l,bindings:{node:"<",onMediaTypeChange:"&",onMediaChange:"&",mediaSize:"<"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o,r,a,s){var l=this;this.sectionMedia=e,this.mediaEditorManager=t,this.nodeFetcher=i,this.solutionFetcher=n,this.solutionManager=o,this.modelTree=r,this.storyServices=a,this.$timeout=s,this.tooltipOptions={trigger:"custom"},this.tooltipName="focal-point.hint",this.move=function(e){l.dragObj.element.style.left=Math.max(l.dragObj.minBoundX,Math.min(e.clientX-l.dragObj.posX,l.dragObj.maxBoundX))+"px",l.dragObj.element.style.top=Math.max(l.dragObj.minBoundY,Math.min(e.clientY-l.dragObj.posY,l.dragObj.maxBoundY))+"px"},this.drop=function(){l.updateAlignment(),document.removeEventListener("mousemove",l.move,!1),document.removeEventListener("mouseup",l.drop,!1)},this.media=this.sectionMedia.getMediaByType(this.node,this.mediaEditorManager.getCurrentMediaType()),this.segment=this.getSegment(),this.panelBg=$(".focal-point-panel-image"),this.dragHandle=$(".focal-point-drag-handle"),this.focalPoint=this.segment.getFocalPoint()||{x:50,y:50}}return e.$inject=["sectionMedia","mediaEditorManager","nodeFetcher","solutionFetcher","solutionManager","modelTree","storyServices","$timeout"],e.prototype.getSegment=function(){var e=this.nodeFetcher.getCurrentActiveNode(),t=this.modelTree.findIdentifyingNodeId(e),i=this.solutionFetcher.getSectionSolution(e.containerPageId,t);return this.solutionManager.getSegmentForNode(i,e)},e.prototype.showFirstTimeTooltip=function(){this.storyServices.story.popupConfigurations[this.tooltipName]||(this.dragHandle.tooltipster("show"),$(".tooltipster-base").css("z-index",10000010),this.storyServices.story.popupConfigurations[this.tooltipName]=!0)},e.prototype.hideTooltip=function(){this.dragHandle.tooltipster("hide")},e.prototype.onImageLoaded=function(){var e=this;this.dragHandle.css("left",this.panelBg.width()/100*this.focalPoint.x-(this.focalPoint.x>50?12:0)),this.dragHandle.css("top",this.panelBg.height()/100*this.focalPoint.y-(this.focalPoint.y>50?12:0)),this.onLoaded&&this.onLoaded(),this.$timeout(function(){return e.showFirstTimeTooltip()},500)},e.prototype.drag=function(e){this.dragObj=this.makeObj(e),document.addEventListener("mousemove",this.move,!1),document.addEventListener("mouseup",this.drop,!1)},e.prototype.makeObj=function(e){var t=e.target;return{element:t,minBoundX:t.parentNode.offsetLeft,minBoundY:t.parentNode.offsetTop,maxBoundX:t.parentNode.offsetLeft+t.parentNode.offsetWidth-t.offsetWidth,maxBoundY:t.parentNode.offsetTop+t.parentNode.offsetHeight-t.offsetHeight,posX:e.clientX-t.offsetLeft,posY:e.clientY-t.offsetTop}},e.prototype.updateAlignment=function(){this.updateFocalPoint()&&(this.segment.setFocalPoint(this.focalPoint),this.storyServices.reRender())},e.prototype.updateFocalPoint=function(){var e=parseInt(n.get(this.dragObj,"element.style.left"),10),t=parseInt(n.get(this.dragObj,"element.style.top"),10);if(e&&t)return this.focalPoint=this.makeFocalPoint({x:e,y:t}),!0},e.prototype.makeFocalPoint=function(e){return{x:Math.floor((e.x+(e.x/this.panelBg.width()>.5?12:0))/this.panelBg.width()*100),y:Math.floor((e.y+(e.y/this.panelBg.height()>.5?12:0))/this.panelBg.height()*100)}},e.prototype.onDone=function(){this.onClose()},Object.defineProperty(e.prototype,"imageUrl",{get:function(){return e.MEDIA_BASE_URL+this.media.fileUrl},enumerable:!0,configurable:!0}),e.MEDIA_BASE_URL="//static.wixstatic.com/",e}();t.ImageFocalPointPanel=o,angular.module("siteGeneratorEditorInternal").component("imageFocalPointPanel",{templateUrl:"views/editor/media-settings/image-focal-point-panel.html",controller:o,bindings:{node:"<",onLoaded:"&",onClose:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.imageUpscale=e,this.imageUpscaleEditor=t,this.sectionMedia=i}return e.$inject=["imageUpscale","imageUpscaleEditor","sectionMedia"],Object.defineProperty(e.prototype,"displayFixMessage",{get:function(){return this.sectionMedia.isImage(this.node)&&this.imageUpscale.isSuperUpscaleRequired(this.node)&&!this.imageUpscale.isSuperUpscaled(this.node)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayRevertMessage",{get:function(){return this.sectionMedia.isImage(this.node)&&this.imageUpscale.isSuperUpscaled(this.node)},enumerable:!0,configurable:!0}),e.prototype.changeImageUpscale=function(){this.imageUpscaleEditor.open(this.node)},e}();t.ImageUpscaleStatusMessage=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(55);angular.module("siteGeneratorBuilderInternal").component("imagePositions",{templateUrl:"views/editor/image-positions.html",controller:n.ImagePositions,bindings:{onAlignmentChanged:"&",selectedPositionName:"@",selectedPositionImage:"@",selectedPositionIndex:"@",shouldShowParallaxParagraph:"&"}})},function(e,t,i){"use strict";var n=function(){function e(e){this.$translate=e}return e.$inject=["$translate"],e.prototype.getLabelTitle=function(){return this.$translate.instant(this.labelTitle)},e}();angular.module("siteGeneratorBuilderInternal").component("imagePositionsControl",{templateUrl:"views/editor/image-positions-control.html",controller:n,bindings:{labelTitle:"@",onAlignmentChanged:"&",selectedPositionName:"@",selectedPositionImage:"@",selectedPositionIndex:"@",shouldShowParallaxParagraph:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=function(){function e(e,t,i,o,r,a,s){var l=this;this.presetHelpers=e,this.applicationState=t,this.flags=i,this.presetPreviewFlagUtils=o,this.slideShowService=r,this.headerPresetUtils=a,this.$rootScope=s,this.isMenuVisible=!1,this.scale=.25,this.showPreviewAnimation=!1,this.unsubscribers=[],this.init=function(){l.unsubscribers.push(l.$rootScope.$on("$stateChangeSuccess",function(){l.applicationState.isInEditMode()&&l.dirty&&l.initNodesAndClearDirty()})),l.unsubscribers.push(n.PubSub.subscribe(n.events.BEFORE_CAPTURE_OPERATION,function(){return l.dirty=!0})),l.unsubscribers.push(n.PubSub.subscribe(n.events.CONTENT_UPDATED,l.initNodesAndClearDirty)),l.handleHaderChangeBackground(),l.initNodesAndClearDirty(),l.isMobile=l.applicationState.isInMobileEditMode()},this.initNodes=function(){var e=l.presetHelpers.getCurrentPresetNodes();e?(l.presetPreviews=[e.current],l.presetSitePart=e.sitePart,l.createMergedHeaderPreview()):l.applicationState.goToBuilder(),l.applyFlags()},this.initNodesAndClearDirty=function(){l.initNodes(),l.dirty=!1},this.createMergedHeaderPreview=function(){if(l.flags.mergedHeader&&"header"===l.presetSitePart){var e=l.presetHelpers.getFirstSectionPreview(l.applicationState.getPageNodeInFocus());e&&l.presetPreviews.push(e)}},this.handleHaderChangeBackground=function(){"header"===l.presetSitePart&&(l.unsubscribers.push(n.PubSub.subscribe(n.events.HEADER_FOOTER_BG_CHANGED,function(){return l.handleCurrentPreviewUpdate("headerBg")})),l.unsubscribers.push(n.PubSub.subscribe(n.events.HEADER_TYPE_CHANGED,function(){return l.handleCurrentPreviewUpdate("headerType")})))},this.applyFlags=function(){l.applyMergedHeaderFlags(),l.applySlideShowsFlags()},this.applyMergedHeaderFlags=function(){if(l.flags.mergedHeader&&"header"===l.presetSitePart&&l.presetPreviews.length>=2){var e=l.presetPreviewFlagUtils.getPreviewFlagsByNode(l.presetPreviews[0].node,!0);l.presetPreviews.forEach(function(t){t.flags=e})}},this.applySlideShowsFlags=function(){l.isSlideShowPreset(l.presetPreviews[0])&&(l.presetPreviews[0].flags=l.presetPreviews[0].flags||[],l.presetPreviews[0].flags.push("slideShowPreset"))},this.handleCurrentPreviewUpdate=function(e){l.headerPresetUtils.resetPreviewFlags(l.presetPreviews[0]),l.headerPresetUtils.notifyHeaderPreviewUpdated(e)},this.showSectionDesignMenu=function(){return l.isMenuVisible=!0},this.hideSectionDesignMenu=function(){return l.isMenuVisible=!1},this.previewMouseEnter=function(){return l.showPreviewAnimation=!0},this.previewMouseLeave=function(){return l.showPreviewAnimation=!1},this.init()}return e.$inject=["presetHelpers","applicationState","flags","presetPreviewFlagUtils","slideShowService","headerPresetUtils","$rootScope"],e.prototype.isSlideShowPreset=function(e){return e&&this.slideShowService.isSlideShow(e.node)},e.prototype.$onDestroy=function(){this.unsubscribers.forEach(function(e){return e()})},e}();angular.module("siteGeneratorBuilderInternal").component("designControl",{templateUrl:"views/editor/design-control.html",controller:o})},function(e,t,i){"use strict";angular.module("siteGeneratorStaticsConsumerAppInternal").directive("obRightClick",["$parse",function(e){return function(t,i,n){var o=e(n.obRightClick);i.bind("contextmenu",function(e){t.$apply(function(){e.preventDefault(),o(t,{$event:e})})})}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a,s,l){this.$scope=e,this.exitNotification=t,this.CcDialogBuilder=i,this.consumerPublishService=n,this.spinnerService=o,this.consumerBiLogger=r,this.wixAngularTopology=a,this.applicationState=s,this.storyServices=l,r.builder.goToEditorNotificationPageView()}return e.$inject=["$scope","exitNotification","CcDialogBuilder","consumerPublishService","spinnerService","consumerBiLogger","wixAngularTopology","applicationState","storyServices"],e.prototype.goToEditor=function(){var e=this;this.consumerBiLogger.builder.goToEditorContinueToProEditorClick(),this.CcDialogBuilder.cancel(),this.spinnerService.waitForMe("renderForEditor"),this.applicationState.setGoToEditorState(!0),this.consumerPublishService.saveStory("",!0).then(function(){return e.storyServices.story&&e.storyServices.story.markAsMajorRevision()}).then(function(){e.applicationState.setGoToEditorState(!1),e.exitNotification.off(),e.spinnerService.imDone("renderForEditor"),e.consumerBiLogger.builder.goToEditorContinueToProEditorSuccess(),e.onGoToEditor()})},e.prototype.cancel=function(){this.consumerBiLogger.builder.goToEditorClosePage(),this.CcDialogBuilder.cancel()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("gotoEditorDialog",{templateUrl:"views/editor/goto-editor-dialog.html",controller:n,bindings:{onGoToEditor:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a){this.clientTopology=e,this.applicationState=t,this.$document=i,this.CcDialogBuilder=n,this.CONSUMER_DIALOGS=o,this.$window=r,this.consumerBiLogger=a}return e.$inject=["clientTopology","applicationState","$document","CcDialogBuilder","CONSUMER_DIALOGS","$window","consumerBiLogger"],e.prototype.buildGoToEditorTemplate=function(){return'\n      <md-dialog aria-label="Go to Editor Dialog" class="go-to-editor-popup-wrapper">\n        <go-to-editor-popup on-go-to-editor="goToEditor()"></go-to-editor-popup>\n      </md-dialog>\n    '},e.prototype.openInternalLink=function(e){var t=this.getStoryMetadataByKey(e);if(t){var i=t+"&editorSessionId="+this.clientTopology.esi+"&onboarding=true";this.$window.location.href=i}},e.prototype.getStoryMetadataByKey=function(e){var t=this.applicationState.getStoryMetadata();return t&&t[e]},e.prototype.launchDialog=function(e){var t=this;this.CcDialogBuilder.show({parent:this.$document.body,biDialogName:this.CONSUMER_DIALOGS.GOTO_EDITOR,template:this.buildGoToEditorTemplate(),controller:["$scope",function(e){e.goToEditor=function(){t.openInternalLink("htmlEditorUri")}}]}),this.consumerBiLogger.builder.topBarGoToEditorClick(e)},e}();t.GoToEditorService=n,angular.module("siteGeneratorStaticsConsumerAppInternal").service("goToEditorService",n)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n,o,r,a,s){this.CcDialogBuilder=e,this.consumerBiLogger=t,this.spinnerService=i,this.consumerPublishService=n,this.storyServices=o,this.flags=r,this.$translate=a,this.exitNotification=s,this.consumerBiLogger.builder.goToEditorNotificationPageView()}return e.$inject=["CcDialogBuilder","consumerBiLogger","spinnerService","consumerPublishService","storyServices","flags","$translate","exitNotification"],e.prototype.cancel=function(){this.consumerBiLogger.builder.goToEditorClosePage(),this.closeDialog()},e.prototype.handleGoToEditor=function(){var e=this;this.consumerBiLogger.builder.goToEditorContinueToProEditorClick(),this.openLoader(),this.consumerPublishService.saveStory("",!0).then(function(){return e.handleRevision()}).then(function(){return e.closeDialog()}).then(function(){return e.goToEditor()})},e.prototype.closeDialog=function(){this.CcDialogBuilder.cancel()},e.prototype.isMarkAsMajorRevisionAvailable=function(){return this.storyServices.story},e.prototype.openLoader=function(){this.spinnerService.isSolidBackground=!0,this.spinnerService.overrideMessage=this.$translate.instant("go-to-editor-popup.spinner-message"),this.spinnerService.waitForMe("renderForEditor")},e.prototype.handleRevision=function(){if(this.isMarkAsMajorRevisionAvailable())return this.storyServices.story.markAsMajorRevision()},e.prototype.goToEditor=function(){this.exitNotification.off(),this.consumerBiLogger.builder.goToEditorContinueToProEditorSuccess(),this.onGoToEditor()},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("goToEditorPopup",{templateUrl:"views/editor/go-to-editor-popup.html",controller:n,bindings:{onGoToEditor:"&"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("cropperController",["$window","flags","consumerBiLogger",function(e,t,i){return{restrict:"E",link:function(t,n){var o,r,a=t.onOutsideClick;t.consumerBiLogger=i,e.requestAnimationFrame(function(){n.find(".controllers"),o=n.find(".cropper-tool-overlay"),r=n.find(".cropper-tool-outline-container"),o.on("click",a),r.on("click",a)})}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(275),o=i(0),r=function(){function e(e,t,i,n,o){var r=this;this.$element=e,this.$scope=t,this.$q=i,this.sectionDrag=n,this.previewService=o,this.$ghostContainer=this.createGhostContainer(),this.$ghostContainer.appendTo(this.previewService.getOverlay()),t.$watch(function(){return r.cnDraggable},function(){return t.$evalAsync(function(){return r.setDraggable()})}),t.$on("$destroy",function(){return r.$ghostContainer.remove()})}return e.$inject=["$element","$scope","$q","sectionDrag","previewService"],e.prototype.createGhostContainer=function(){return angular.element("<div></div>").addClass("cn-ghost-container")},e.prototype.getGhostElem=function(){if(this.ghostSelector){if(0===this.ghostSelector.indexOf(">"))return this.$element.find(this.ghostSelector.replace(/>/,""));var e=angular.element(this.ghostSelector);return!o.isEmpty(e)&&e}return this.$element},e.prototype.getDropTarget=function(){return angular.element(e.DROP_TARGET_SELECTOR)},e.prototype.moveGhostUnderCursor=function(e){var t=this.$ghostContainer,i=t.get(0).getBoundingClientRect(),n=(i.left+i.right)/2,o=(i.top+i.bottom)/2,r=e.clientX-n-50,a=e.clientY-o+20;TweenMax.set(t,{x:r<0?"-="+-r:"+="+r,y:a<0?"-="+-a:"+="+a})},e.prototype.toggleDropTarget=function(t,i){var n=this;this.hasHoverStateChanged(t,i)&&setTimeout(function(){i?t.addClass(e.DROP_TARGET_HOVERED_CLASS).trigger("dragenter"):t.removeClass(e.DROP_TARGET_HOVERED_CLASS).trigger("dragleave"),t.data("hovered",i),n.$scope.$apply()})},e.prototype.hasHoverStateChanged=function(e,t){return e.data("hovered")!==t},e.prototype.cloneGhost=function(e){var t=e.get(0).cloneNode(!0),i=e.get(0).getBoundingClientRect(),n=i.height,o=i.width;this.$ghostContainer.css({height:n,width:o}).empty().append(t)},e.prototype.cleanGhost=function(){var e=this,t=this.$q.defer(),i=1,n=function(){i-=.2,TweenMax.set(e.$ghostContainer,{opacity:i}),i>0?requestAnimationFrame(n):t.resolve()};return requestAnimationFrame(n),t.promise},e.prototype.setDraggable=function(){n.cnDrag.removeDraggable(this.draggedInstance),this.draggedInstance=this.createDraggable(),this.cnDisableIf&&this.draggedInstance.disable("dndDragover")},e.prototype.createDraggable=function(){var t=this,i=this.getDropTarget();this.$ghostContainer.css("transform","rotate(-2deg)");var o=n.cnDrag.createDraggable(this.$ghostContainer,{trigger:this.$element,cursor:"-webkit-grab",onDragStart:function(e){t.cloneGhost(t.getGhostElem()),t.moveGhostUnderCursor(e),o.update(!0),t.cnDragstart({event:e,draggable:t.cnDraggable})},onDragEnd:function(n){t.cleanGhost().then(function(){o.hitTest(e.DROP_TARGET_SELECTOR)?t.cnDrop({event:n,draggable:t.cnDraggable}):t.cnCanceled({event:n}),t.toggleDropTarget(i,!1),TweenMax.set(t.$ghostContainer,{clearProps:"transform,scale,opacity"}),t.cnDragend({event:n,item:t.cnDraggable})})},onDrag:function(n){t.moveGhostUnderCursor(n),o.update(!0),t.toggleDropTarget(i,o.hitTest(e.DROP_TARGET_SELECTOR)),t.sectionDrag.onDragMouseMove(n)}})[0];return o},e.DROP_TARGET_HOVERED_CLASS="dndDragover",e.DROP_TARGET_SELECTOR="drop-target-overlay",e}();angular.module("siteGeneratorStaticsConsumerAppInternal").directive("cnDraggable",function(){return{controller:r,controllerAs:"$draggable",bindToController:!0,restrict:"A",scope:{cnDraggable:"=",cnDragstart:"&",cnDragend:"&",cnCanceled:"&",cnDrop:"&",cnDisableIf:"=",ghostSelector:"@"}}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){var n=this;this.flags=e,this.applicationState=t,this.undoRedo=i,this.onClickUndo=function(){return n.undoRedo.undo(!0)},this.onClickRedo=function(){return n.undoRedo.redo(!0)},this.canUndo=function(){return n.undoRedo.canUndo()},this.canRedo=function(){return n.undoRedo.canRedo()}}return e.$inject=["flags","applicationState","undoRedo"],e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("floatingUndoRedo",{templateUrl:"views/floating-undo-redo.html",controller:n})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=function(){function e(e,t){this.goToEditorService=e,this.applicationState=t}return e.$inject=["goToEditorService","applicationState"],e.prototype.onLinkClick=function(){this.goToEditorService.launchDialog(n.BIOrigins.FloatingButton)},Object.defineProperty(e.prototype,"isLeftPanelOpen",{get:function(){return this.applicationState.isLeftPanelOpen()},enumerable:!0,configurable:!0}),e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("floatingGoToEditorLink",{templateUrl:"views/floating-go-to-editor-link.html",controller:o})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),o=i(0),r=function(){function e(e,t,i,n,r,a,s){var l=this;this.undoRedo=e,this.previewScale=t,this.applicationState=i,this.consumerBiLogger=n,this.initService=r,this.flags=a,this.sectionHeightUIService=s,this.isAppReady=!1,this.onZoomOut=o.debounce(this.zoomOut,150),this.onZoomIn=o.debounce(this.zoomIn,150),this.flags.removeSpinnerAsStageReady&&this.initService.loaded().then(function(){return l.isAppReady=!0})}return e.$inject=["undoRedo","previewScale","applicationState","consumerBiLogger","initService","flags","sectionHeightUIService"],e.prototype.onUndo=function(){this.undoRedo.undo(!0)},e.prototype.onRedo=function(){this.undoRedo.redo(!0)},e.prototype.showChangeSectionHeight=function(){return this.sectionHeightUIService.showChangeSectionHeight()},Object.defineProperty(e.prototype,"canUndo",{get:function(){return this.undoRedo.canUndo()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this.undoRedo.canRedo()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canZoomOut",{get:function(){return this.isZoomEnabled()&&this.previewScale.getScaleFactor()>n.PreviewScale.MinScaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canZoomIn",{get:function(){return this.isZoomEnabled()&&this.previewScale.getScaleFactor()<n.PreviewScale.MaxScaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLeftPanelOpen",{get:function(){return this.applicationState.isLeftPanelOpen()},enumerable:!0,configurable:!0}),e.prototype.zoomOut=function(){this.canZoomOut&&(this.previewScale.zoomOut(!0),this.consumerBiLogger.builder.zoomInOut("zoom out",Math.round(100*this.previewScale.getScaleFactor())))},e.prototype.zoomIn=function(){this.canZoomIn&&(this.previewScale.zoomIn(!0),this.consumerBiLogger.builder.zoomInOut("zoom in",Math.round(100*this.previewScale.getScaleFactor())))},e.prototype.isZoomEnabled=function(){return!this.applicationState.isOnAddState()&&this.applicationState.isInDesktopEditMode()},e.prototype.shouldShowButtons=function(){return!this.flags.removeSpinnerAsStageReady||this.isAppReady},e}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("floatingStageControls",{controller:r,templateUrl:"views/floating-stage-controls.html"})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=function(){function e(e,t,i,n){this.dealerApi=e,this.siteState=t,this.consumerBiLogger=i,this.flags=n,this.discountPercentage=50}return e.$inject=["dealerApi","siteState","consumerBiLogger","flags"],e.prototype.loadCampaign=function(){var e=this,t=this.siteState.getMetaSiteId();return this.campaignID=null,(this.flags.newDealerApi?this.dealerApi.getCampaign(t).then(function(t){e.hasSale=t.hasSale,e.discountPercentage=t.discountPercentage}):this.dealerApi.old_GetCampaign(t).then(function(t){e.campaignID=t.campaignId})).catch(function(t){return e.consumerBiLogger.err(n.BIErrorCodes.GetCampaignFailed,"failed to get campaign"+JSON.stringify(t))})},e.prototype.isSale=function(){return this.campaignID&&this.campaignID.length>0||this.hasSale},e.prototype.getSaleDiscount=function(){return this.discountPercentage},e.SaleCampaignId="seasonal-campaign",e.NewUserPersonalCampaignId="new-user-personal-campaign",e}();t.SaleService=o,angular.module("siteGeneratorStaticsConsumerAppInternal").service("saleService",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){function e(e,t,i,n,o){this.$rootScope=e,this.clientTopology=t,this.wixmp=i,this.flags=n,this.$timeout=o,this.UPLOAD_ERROR_TIMEOUT=5e3,this.registerUploadHandler()}return e.$inject=["$rootScope","clientTopology","wixmp","flags","$timeout"],e.prototype.setContext=function(e){this.ctx=e,this.ctx.persistence.init&&this.ctx.persistence.init(),this.uploadingLogo=!1,this.hasUploadError=!1,this.updateLogoUrl()},e.prototype.doneWithThisContext=function(){this.ctx=void 0,this.uploadingLogo=!1,this.hasUploadError=!1,this.logoUrl=void 0},e.prototype.registerUploadHandler=function(){var e=this;this.wixmp.Uploader.on("uploadQueueFinished",function(t){if(t&&0!==t.length)if(!t[0].serverResponse||200!==t[0].serverResponse.code&&200!==t[0].serverResponse.status)e.setUploadError();else{var i=e.ctx.persistence.getLogoURL();e.ctx.persistence.setLogo(t[0]),e.logoUrl=e.ctx.persistence.getLogoURL(),e.uploadingLogo=!1,e.ctx.onFieldChanged("business logo","logo",i,e.logoUrl,Date.now()-e.uploadStartTime)}else e.setUploadError();e.$rootScope.$apply()})},e.prototype.deleteLogo=function(){this.ctx.usePlaceholderOnDelete&&(this.ctx.onFieldChanged("business logo display","logo",this.ctx.persistence.isLogoVisible(),!1),this.ctx.persistence.hideLogo(),this.updateLogoUrl())},e.prototype.updateLogoUrl=function(){var e=this.ctx.persistence.isLogoVisible(),t=this.ctx.persistence.getLogoURL();if(!e||!t)if(this.flags.newIntroDesign&&"intro"===this.ctx.app)t=this.clientTopology.staticsUrl+"/images/intro/new/logo-placeholder-add.png";else{var i=Math.floor(4*Math.random())+2;t=this.clientTopology.staticsUrl+"/images/intro/logo-placeholder"+i+".png"}this.logoUrl=t},e.prototype.getMediaUrl=function(){return this.logoUrl},e.prototype.uploadLogo=function(e){var t=this;if(!this.uploadingLogo)if(this.$timeout.cancel(this.uploadErrorTimeout),this.hasUploadError=!1,e){this.uploadingLogo=!0;var i=this.flags.MediaManager3||this.flags.MediaManager3Migrate?this.wixmp.Source(this.wixmp.sources.PRIVATE_SITE,{siteMediaToken:this.clientTopology.siteMediaToken}):this.wixmp.Source(this.wixmp.sources.PRIVATE),o=n.assign(e,{mediaType:"picture",file:e});try{this.uploadStartTime=Date.now(),this.wixmp.Uploader.upload([{uploadFn:i.item.upload,source:o}])[0].deferred.promise.catch(function(e){t.setUploadError()})}catch(e){this.setUploadError()}this.$rootScope.$apply()}else this.deleteLogo()},e.prototype.setUploadError=function(){var e=this;this.uploadingLogo=!1,this.hasUploadError=!0,this.wixmp.Uploader.clearQueue(),this.uploadErrorTimeout=this.$timeout(function(){return e.hasUploadError=!1},this.UPLOAD_ERROR_TIMEOUT)},e.prototype.cleanUp=function(){this.ctx&&this.ctx.persistence.cleanUp&&this.ctx.persistence.cleanUp()},e}();t.LogoManager=o,angular.module("adiCoreAppInternal").service("logoManager",o)},function(e,t){angular.module("siteGeneratorStaticsConsumerAppInternal").directive("collapseExpand",["$timeout","$parse","$log",function(e,t,i){return{restrict:"E",scope:{skipExpandAnimation:"<",name:"<"},transclude:!0,template:"<ng-transclude></ng-transclude>",link:function(e,t,i){var n=new Promise(function(i){e.$applyAsync(function(){var e=t.children()[0].clientHeight;i(e)})});e.skipExpandAnimation||t.css("height",0);var o=!1;n.then(function(i){o||function(i){e.skipExpandAnimation?t.css("height",i):requestAnimationFrame(function(){t.css("height",i)})}(i)}),e.$on("$destroy",function(){o=!0,function(){var e=t.children()[0];if(e&&""===t[0].style.height){var i=e.clientHeight;t.css("height",i),requestAnimationFrame(function(){t.css("height",0)})}else t.css("height",0)}()})}}}])},function(e,t){angular.module("siteGeneratorStaticsConsumerAppInternal").directive("autoScroll",["$parse",function(e){return{restrict:"A",link:function(t,i,n){var o=function(){return e(n.autoScroll)(t)||{}},r=o().maxHeight;i.css({"overflow-y":"hidden",display:"block"}),Boolean(r)&&i.css({"max-height":r+"px"});var a=function(e){var t=Date.now();"scroll"===e.type?t-(i.data().lastWheelTime||0)<=30&&i.stop(!1,!0):i.data().lastWheelTime=Date.now()};t.$watch(function(){return o().isAutoScrolling},function(e){return function(e){if(e){var t=o(),n=t.maxScroll,r=void 0===n?Number.POSITIVE_INFINITY:n,s=t.containerOffset,l=void 0===s?0:s,c=t.startScrollAnimationDuration,d=i[0].scrollHeight,u=i[0].clientHeight,p=Math.max(Math.min(d-u,r),0);p>l&&(i.stop(!1,!0).animate({scrollTop:p},{duration:c||p/80*1e3,always:function(){i.off("scroll wheel DOMMouseScroll mousewheel",a)}}),i.on("scroll wheel DOMMouseScroll mousewheel",a))}else{var g=o().stopScrollAnimationDuration,h=void 0===g?1e3:g;i.stop(!1,!0).animate({scrollTop:0},h)}}(e)})}}}])},function(e,t){angular.module("siteGeneratorStaticsConsumerAppInternal").directive("previewSlideshowPlayer",["$parse",function(e){return{restrict:"A",link:function(t,i,n){t.$watch(function(){return(e(n.previewSlideshowPlayer)(t)||{}).isPlaying},function(e){return function(e){var t=i.find("preset-preview .slide-show-film");e?t.trigger("preview-slide-show-start"):t.trigger("preview-slide-show-stop")}(e)})}}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1044);angular.module("siteGeneratorStaticsConsumerAppInternal").service("imageClientApi",n.ImageClientApi)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1045),o=function(){function e(){}return e.prototype.getScaleToFillImageUrl=function(e){return n.getScaleToFillImageURL(e.relativeUrl,e.sourceWidth,e.sourceHeight,e.targetWidth,e.targetHeight,{upscaleMethod:e.upscaleMethod,focalPoint:e.focalPoint})},e.prototype.getScaleToFitImageUrl=function(e){return n.getScaleToFitImageURL(e.relativeUrl,e.sourceWidth,e.sourceHeight,e.targetWidth,e.targetHeight,{upscaleMethod:e.upscaleMethod})},e.prototype.getCropImageUrl=function(e){return n.getCropImageURL(e.relativeUrl,e.sourceWidth,e.sourceHeight,e.cropX,e.cropY,e.cropWidth,e.cropHeight,e.targetWidth,e.targetHeight,{upscaleMethod:e.upscaleMethod})},e}();t.ImageClientApi=o},function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=15)}([function(e,t,i){"use strict";var n={JPG:"jpg",JPEG:"jpeg",PNG:"png",WEBP:"webp",WIX_ICO_MP:"wix_ico_mp",WIX_MP:"wix_mp",GIF:"gif",SVG:"svg",UNRECOGNIZED:"unrecognized"},o=[n.JPG,n.JPEG,n.PNG,n.GIF,n.WEBP];e.exports={alignTypes:{CENTER:"center",TOP:"top",TOP_LEFT:"top_left",TOP_RIGHT:"top_right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom_left",BOTTOM_RIGHT:"bottom_right",LEFT:"left",RIGHT:"right"},alignTypesMap:{center:"c",top:"t",top_left:"tl",top_right:"tr",bottom:"b",bottom_left:"bl",bottom_right:"br",left:"l",right:"r"},transformTypes:{FIT:"fit",FILL:"fill",FILL_FOCAL:"fill_focal",CROP:"crop",LEGACY_CROP:"legacy_crop",LEGACY_FILL:"legacy_fill"},fittingTypes:{SCALE_TO_FILL:"fill",SCALE_TO_FIT:"fit",STRETCH:"stretch",ORIGINAL_SIZE:"original_size",TILE:"tile",TILE_HORIZONTAL:"tile_horizontal",TILE_VERTICAL:"tile_vertical",FIT_AND_TILE:"fit_and_tile",LEGACY_STRIP_TILE:"legacy_strip_tile",LEGACY_STRIP_TILE_HORIZONTAL:"legacy_strip_tile_horizontal",LEGACY_STRIP_TILE_VERTICAL:"legacy_strip_tile_vertical",LEGACY_STRIP_SCALE_TO_FILL:"legacy_strip_fill",LEGACY_STRIP_SCALE_TO_FIT:"legacy_strip_fit",LEGACY_STRIP_FIT_AND_TILE:"legacy_strip_fit_and_tile",LEGACY_STRIP_ORIGINAL_SIZE:"legacy_strip_original_size",LEGACY_ORIGINAL_SIZE:"actual_size",LEGACY_FIT_WIDTH:"fitWidth",LEGACY_FIT_HEIGHT:"fitHeight",LEGACY_FULL:"full",LEGACY_BG_FIT_AND_TILE:"legacy_tile",LEGACY_BG_FIT_AND_TILE_HORIZONTAL:"legacy_tile_horizontal",LEGACY_BG_FIT_AND_TILE_VERTICAL:"legacy_tile_vertical",LEGACY_BG_NORMAL:"legacy_normal"},htmlTag:{BG:"bg",IMG:"img",SVG:"svg"},upscaleMethods:{AUTO:"auto",CLASSIC:"classic",SUPER:"super"},upscaleMethodsValues:{classic:1,super:2},defaultUSM:{radius:.66,amount:1,threshold:.01},emptyData:{uri:"",css:{img:{},container:{}},attr:{img:{},container:{}}},imageQuality:{HIGH:"HIGH",MEDIUM:"MEDIUM",LOW:"LOW",TINY:"TINY"},imageScaleDefaults:{HIGH:{size:196e4,quality:90,maxUpscale:1},MEDIUM:{size:36e4,quality:85,maxUpscale:1},LOW:{size:16e4,quality:80,maxUpscale:1.2},TINY:{size:0,quality:80,maxUpscale:1.4}},fileType:n,supportedExtensions:o,webp:{LOSSLESS:"lossless",LOSSY:"lossy",ALPHA:"alpha",ANIMATION:"animation"},SAFE_TRANSFORMED_AREA:25e6,SUPER_UPSCALE_MODELS:[1.5,2,4],MAX_DEVICE_PIXEL_RATIO:2,API_VERSION:"v1"}},function(e,t,i){"use strict";var n=i(2),o=i(0),r=i(4);function a(e){var t=new window.Image;t.onload=function(){var i=r.getFeature("isWEBP");i[e]=t.width>0&&t.height>0,r.setFeature("isWEBP",i)},t.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[e]}function s(e){var t=[o.fileType.PNG,o.fileType.JPEG,o.fileType.JPG,o.fileType.WIX_ICO_MP,o.fileType.WIX_MP];return n.includes(t,d(e))}function l(e){return n.includes(["webp"],d(e))}function c(e){return/(^https?)|(^data)|(^\/\/)/.test(e)}function d(e){return(/[.]([^.]+)$/.exec(e)&&/[.]([^.]+)$/.exec(e)[1]||"").toLowerCase()}function u(e,t,i,n,r){return r===o.transformTypes.FILL?function(e,t,i,n){return Math.max(i/e,n/t)}(e,t,i,n):r===o.transformTypes.FIT?function(e,t,i,n){return Math.min(i/e,n/t)}(e,t,i,n):1}function p(e,t){var i=m(e,t);return{optimizedScaleFactor:o.imageScaleDefaults[i].maxUpscale,upscaleMethodValue:o.upscaleMethodsValues.classic,forceUSM:!1}}function g(e,t){var i=m(e,t);return{optimizedScaleFactor:o.imageScaleDefaults[i].maxUpscale,upscaleMethodValue:o.upscaleMethodsValues.classic,forceUSM:!1}}function h(e,t,i){return{optimizedScaleFactor:n.last(o.SUPER_UPSCALE_MODELS),upscaleMethodValue:o.upscaleMethodsValues.super,forceUSM:!(o.SUPER_UPSCALE_MODELS.includes(i)||i>n.last(o.SUPER_UPSCALE_MODELS))}}function m(e,t){var i=e*t;return i>o.imageScaleDefaults[o.imageQuality.HIGH].size?o.imageQuality.HIGH:i>o.imageScaleDefaults[o.imageQuality.MEDIUM].size?o.imageQuality.MEDIUM:i>o.imageScaleDefaults[o.imageQuality.LOW].size?o.imageQuality.LOW:o.imageQuality.TINY}function f(e,t){var i=Math.pow(10,t||0);return(e*i/i).toFixed(parseInt(t,10))}e.exports={populateGlobalFeatureSupport:function(){"undefined"!=typeof window&&(a(o.webp.LOSSY),a(o.webp.LOSSLESS),a(o.webp.ALPHA),a(o.webp.ANIMATION),r.setFeature("isObjectFitBrowser","objectFit"in window.document.documentElement.style))},isWEBPBrowserSupport:function(e){var t=r.getFeature("isWEBP"),i=e===o.fileType.JPG&&t[o.webp.LOSSY],n=e===o.fileType.PNG&&t[o.webp.LOSSLESS],a=e===o.fileType.PNG&&t[o.webp.ALPHA];return i||n&&a},isObjectFitBrowserSupport:function(){return r.getFeature("isObjectFitBrowser")},isImageTransformApplicable:function(e){return s(e)&&!c(e)},isValidRequest:function(e,t,i){return i&&t&&!function(e){return!e||!e.trim()||"none"===e.toLowerCase()}(t.id)&&n.includes(o.fittingTypes,e)},isImageTypeSupported:s,isExternalUrl:c,isWEBP:l,getFileType:function(e){return function(e){return n.includes(["jpg","jpeg"],d(e))}(e)?o.fileType.JPG:function(e){return n.includes(["png"],d(e))}(e)?o.fileType.PNG:l(e)?o.fileType.WEBP:o.fileType.UNRECOGNIZED},getFileExtension:d,getFileName:function(e,t){var i=/\.([^.]*)$/;if("string"==typeof t&&t.length){var r=["/","\\","#","^","?","{","}","<",">","|","`","“",":",'"'].map(encodeURIComponent),a=new RegExp("("+r.concat(["\\.","\\*"]).join("|")+")","g"),s=t,l=t.match(i);return l&&n.includes(o.supportedExtensions,l[1])&&(s=t.replace(i,"")),encodeURIComponent(s).replace(a,"_")}var c=e.match(/\/(.*?)$/);return(c?c[1]:e).replace(i,"")},getAlignedRect:function(e,t,i){var n=void 0,r=void 0;switch(i){case o.alignTypes.CENTER:n=Math.max(0,(e.width-t.width)/2),r=Math.max(0,(e.height-t.height)/2);break;case o.alignTypes.TOP:n=Math.max(0,(e.width-t.width)/2),r=0;break;case o.alignTypes.TOP_LEFT:n=0,r=0;break;case o.alignTypes.TOP_RIGHT:n=Math.max(0,e.width-t.width),r=0;break;case o.alignTypes.BOTTOM:n=Math.max(0,(e.width-t.width)/2),r=Math.max(0,e.height-t.height);break;case o.alignTypes.BOTTOM_LEFT:n=0,r=Math.max(0,e.height-t.height);break;case o.alignTypes.BOTTOM_RIGHT:n=Math.max(0,e.width-t.width),r=Math.max(0,e.height-t.height);break;case o.alignTypes.LEFT:n=0,r=Math.max(0,(e.height-t.height)/2);break;case o.alignTypes.RIGHT:n=Math.max(0,e.width-t.width),r=Math.max(0,(e.height-t.height)/2)}return{x:e.x?e.x+n:n,y:e.y?e.y+r:r,width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}},getOverlappingRect:function(e,t){var i=Math.max(0,Math.min(e.width,t.x+t.width)-Math.max(0,t.x)),n=Math.max(0,Math.min(e.height,t.y+t.height)-Math.max(0,t.y));return i&&n&&(e.width!==i||e.height!==n)?{x:Math.max(0,t.x),y:Math.max(0,t.y),width:i,height:n}:null},getScaleFactor:u,getTransformData:function(e,t,i,n,r){e=e||i.width,t=t||i.height;var a=function(e){return Math.min(e.pixelAspectRatio||1,o.MAX_DEVICE_PIXEL_RATIO)}(i),s=function(e,t,i,n,r){var a=void 0,s=void 0,l=void 0;if(a=u(e,t,i,n,r),r===o.transformTypes.FILL?(s=i,l=n):r===o.transformTypes.FIT&&(s=e*a,l=t*a),s*l>o.SAFE_TRANSFORMED_AREA){var c=Math.sqrt(o.SAFE_TRANSFORMED_AREA/(s*l));a=u(e,t,s*=c,l*=c,r)}return{scaleFactor:a,width:s,height:l}}(e,t,i.width*a,i.height*a,n),l=s.scaleFactor;return function(e,t,i,n,r,a,s){var l=function(e,t,i,n){return{classic:p,auto:g,super:h}[n](e,t,i)}(e,t,a,r),c=l.optimizedScaleFactor,d=l.upscaleMethodValue,u=l.forceUSM;if(a<=c)return{width:i,height:n,scaleFactor:a,upscaleMethodValue:d,forceUSM:u,cssUpscaleNeeded:!1};var m=void 0,f=void 0;switch(s){case o.transformTypes.FILL:m=i*(c/a),f=n*(c/a);break;case o.transformTypes.FIT:m=e*c,f=t*c}return{width:m,height:f,scaleFactor:c,upscaleMethodValue:d,forceUSM:u,cssUpscaleNeeded:!0}}(e,t,s.width,s.height,r,l,n)},getAlignment:function(e){return o.alignTypesMap[e.alignment]||o.alignTypesMap[o.alignTypes.CENTER]},getPreferredImageQuality:function(e,t){return o.imageScaleDefaults[m(e,t)].quality},getDimension:function(e,t,i,n,o){var r=u(e,t,i,n,o);return{width:Math.round(e*r),height:Math.round(t*r)}},getFocalPoint:function(e){var t=null;return"number"==typeof e.x&&"number"==typeof e.y&&(t={x:f(Math.max(0,Math.min(100,e.x))/100,2),y:f(Math.max(0,Math.min(100,e.y))/100,2)}),t},getUpscaleString:function(e){return e&&e.upscaleMethod&&"string"==typeof e.upscaleMethod&&o.upscaleMethods[e.upscaleMethod.toUpperCase()]||o.upscaleMethods.AUTO},roundToFixed:f}},function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={assign:function(){for(var e=arguments[0]||{},t=Array.prototype.slice.call(arguments,1,arguments.length),i=0;i<t.length;i++){var n=t[i];for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e},includes:function(e,t){return e.indexOf?e.indexOf(t)>-1:!(!e||"object"!==(void 0===e?"undefined":n(e)))&&Object.keys(e).some(function(i){return e[i]===t})},last:function(e){return e[e.length-1]},template:function(e){return function(t){var i=e;for(var n in t)t.hasOwnProperty(n)&&(i=i.replace(new RegExp("\\${"+n+"}","g"),t[n]));return i}}}},function(e,t,i){"use strict";var n=i(1),o=i(5),r=i(6);e.exports=function(e,t,i,a){var s=n.getFileType(t.id),l={fileName:n.getFileName(t.id,t.name),fileExtension:n.getFileExtension(t.id),fileType:s,isWEBPSupport:n.isWEBPBrowserSupport(s),fittingType:e,src:{id:t.id,width:t.width,height:t.height,isCropped:!1},focalPoint:{x:t.focalPoint&&t.focalPoint.x,y:t.focalPoint&&t.focalPoint.y},quality:0,upscaleMethod:n.getUpscaleString(a),progressive:!0,unsharpMask:{},watermark:"",parts:[]};return n.isImageTransformApplicable(t.id)&&(o.setTransformParts(l,t,i),r.setTransformOptions(l,a)),l}},function(e,t,i){"use strict";var n={isWEBP:{lossless:!1,lossy:!1,alpha:!1,animation:!1},isObjectFitBrowser:!1};e.exports={getFeature:function(e){return n[e]},setFeature:function(e,t){n[e]=t}}},function(e,t,i){"use strict";var n=i(2),o=i(0),r=i(1);function a(e,t){var i=r.getTransformData(e.src.width,e.src.height,t,o.transformTypes.FIT,e.upscaleMethod);return{transformType:o.transformTypes.FILL,width:Math.round(i.width),height:Math.round(i.height),alignment:o.alignTypesMap.center,upscale:i.scaleFactor>1,forceUSM:i.forceUSM,scaleFactor:i.scaleFactor,cssUpscaleNeeded:i.cssUpscaleNeeded,upscaleMethodValue:i.upscaleMethodValue}}function s(e){return{transformType:o.transformTypes.CROP,x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}e.exports={setTransformParts:function(e,t,i){var l=void 0;switch(t.crop&&(l=r.getOverlappingRect(t,t.crop))&&(e.src.width=l.width,e.src.height=l.height,e.src.cropped=!0,e.parts.push(s(l))),e.fittingType){case o.fittingTypes.SCALE_TO_FIT:case o.fittingTypes.LEGACY_FIT_WIDTH:case o.fittingTypes.LEGACY_FIT_HEIGHT:case o.fittingTypes.LEGACY_FULL:case o.fittingTypes.FIT_AND_TILE:case o.fittingTypes.LEGACY_BG_FIT_AND_TILE:case o.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case o.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL:case o.fittingTypes.LEGACY_BG_NORMAL:e.parts.push(a(e,i));break;case o.fittingTypes.SCALE_TO_FILL:e.parts.push(function(e,t){var i=r.getTransformData(e.src.width,e.src.height,t,o.transformTypes.FILL,e.upscaleMethod),n=r.getFocalPoint(e.focalPoint);return{transformType:n?o.transformTypes.FILL_FOCAL:o.transformTypes.FILL,width:Math.round(i.width),height:Math.round(i.height),alignment:r.getAlignment(t),focalPointX:n&&n.x,focalPointY:n&&n.y,upscale:i.scaleFactor>1,forceUSM:i.forceUSM,scaleFactor:i.scaleFactor,cssUpscaleNeeded:i.cssUpscaleNeeded,upscaleMethodValue:i.upscaleMethodValue}}(e,i));break;case o.fittingTypes.STRETCH:e.parts.push(function(e,t){var i=r.getScaleFactor(e.src.width,e.src.height,t.width,t.height,o.transformTypes.FILL),s=n.assign({},t);return s.width=e.src.width*i,s.height=e.src.height*i,a(e,s)}(e,i));break;case o.fittingTypes.TILE_HORIZONTAL:case o.fittingTypes.TILE_VERTICAL:case o.fittingTypes.TILE:case o.fittingTypes.LEGACY_ORIGINAL_SIZE:case o.fittingTypes.ORIGINAL_SIZE:l=r.getAlignedRect(e.src,i,i.alignment),e.src.isCropped?(n.assign(e.parts[0],l),e.src.width=l.width,e.src.height=l.height):e.parts.push(s(l));break;case o.fittingTypes.LEGACY_STRIP_TILE_HORIZONTAL:case o.fittingTypes.LEGACY_STRIP_TILE_VERTICAL:case o.fittingTypes.LEGACY_STRIP_TILE:case o.fittingTypes.LEGACY_STRIP_ORIGINAL_SIZE:e.parts.push(function(e){return{transformType:o.transformTypes.LEGACY_CROP,width:Math.round(e.width),height:Math.round(e.height),alignment:r.getAlignment(e),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}(i));break;case o.fittingTypes.LEGACY_STRIP_SCALE_TO_FIT:case o.fittingTypes.LEGACY_STRIP_FIT_AND_TILE:e.parts.push(function(e){return{transformType:o.transformTypes.FIT,width:Math.round(e.width),height:Math.round(e.height),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(i));break;case o.fittingTypes.LEGACY_STRIP_SCALE_TO_FILL:e.parts.push(function(e){return{transformType:o.transformTypes.LEGACY_FILL,width:Math.round(e.width),height:Math.round(e.height),alignment:r.getAlignment(e),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(i))}}}},function(e,t,i){"use strict";var n=i(2),o=i(0),r=i(1);e.exports={setTransformOptions:function(e,t){t=t||{},e.quality=function(e,t){var i=n.last(e.parts),o=r.getPreferredImageQuality(i.width,i.height),a=t.quality&&t.quality>=5&&t.quality<=90?t.quality:o;return parseInt(a,10)}(e,t),e.unsharpMask=function(e,t){var i=void 0;return function(e){var t=void 0!==(e=e||{}).radius&&e.radius>=.1&&e.radius<=500,i=void 0!==e.amount&&e.amount>=0&&e.amount<=10,n=void 0!==e.threshold&&e.threshold>=0&&e.threshold<=255;return t&&i&&n}(t.unsharpMask)?i={radius:t.unsharpMask.radius,amount:t.unsharpMask.amount,threshold:t.unsharpMask.threshold}:function(e){return void 0!==(e=e||{}).radius&&0===e.radius&&void 0!==e.amount&&0===e.amount&&void 0!==e.threshold&&0===e.threshold}(t.unsharpMask)||function(e){var t=n.last(e.parts);return!(t.scaleFactor>=1)||t.forceUSM}(e)&&(i=o.defaultUSM),i&&(i.radius=r.roundToFixed(i.radius,2),i.amount=r.roundToFixed(i.amount,2),i.threshold=r.roundToFixed(i.threshold,2)),i}(e,t),e.progressive=function(e){return!1!==e.progressive}(t),e.watermark=function(e){return e.watermark}(t)}}},function(e,t,i){"use strict";var n=i(0),o=i(1),r=i(8),a=i(3);e.exports=function(e,t,i,s,l){var c=n.emptyData.uri;return o.isImageTransformApplicable(t.id)?(l=l||a(e,t,i,s,l),c=r.getImageURI(l)):c=t.id,c}},function(e,t,i){"use strict";var n=i(2),o=i(0),r=n.template("fit/w_${width},h_${height}"),a=n.template("fill/w_${width},h_${height},al_${alignment}"),s=n.template("fill/w_${width},h_${height},fp_${focalPointX}_${focalPointY}"),l=n.template("crop/x_${x},y_${y},w_${width},h_${height}"),c=n.template("crop/w_${width},h_${height},al_${alignment}"),d=n.template("fill/w_${width},h_${height},al_${alignment}"),u=n.template(",lg_${upscaleMethodValue}"),p=n.template(",q_${quality}"),g=n.template(",usm_${radius}_${amount}_${threshold}"),h=n.template(",bl"),m=n.template(",wm_${watermark}");e.exports={getImageURI:function(e){var t=[];e.parts.forEach(function(e){switch(e.transformType){case o.transformTypes.CROP:t.push(l(e));break;case o.transformTypes.LEGACY_CROP:t.push(c(e));break;case o.transformTypes.LEGACY_FILL:var i=d(e);e.upscale&&(i+=u(e)),t.push(i);break;case o.transformTypes.FIT:var n=r(e);e.upscale&&(n+=u(e)),t.push(n);break;case o.transformTypes.FILL:var p=a(e);e.upscale&&(p+=u(e)),t.push(p);break;case o.transformTypes.FILL_FOCAL:var g=s(e);e.upscale&&(g+=u(e)),t.push(g)}});var i=t.join("/");return(e.fileType===o.fileType.PNG&&e.isWEBPSupport||e.fileType===o.fileType.JPG)&&(i+=p(e)),e.unsharpMask&&(i+=g(e.unsharpMask)),e.progressive||(i+=h(e)),e.watermark&&(i+=m(e)),e.src.id+"/"+o.API_VERSION+"/"+i+"/"+e.fileName+"."+(e.isWEBPSupport?"webp":e.fileExtension)}}},,,,,,,function(e,t,i){"use strict";var n=i(16),o=i(0);n.populateGlobalFeatureSupport();var r="https://static.wixstatic.com/",a="https://static.wixstatic.com/media/",s=/^media\//i;function l(e){return s.test(e)?""+r+e:""+a+e}e.exports={getScaleToFitImageURL:function(e,t,i,r,a,s){return l(n.getData(o.fittingTypes.SCALE_TO_FIT,{id:e,width:t,height:i,name:s&&s.name},{width:r,height:a,htmlTag:n.htmlTag.IMG,alignment:n.alignTypes.CENTER,pixelAspectRatio:window.devicePixelRatio},s).uri)},getScaleToFillImageURL:function(e,t,i,r,a,s){return l(n.getData(o.fittingTypes.SCALE_TO_FILL,{id:e,width:t,height:i,name:s&&s.name,focalPoint:{x:s&&s.focalPoint&&s.focalPoint.x,y:s&&s.focalPoint&&s.focalPoint.y}},{width:r,height:a,htmlTag:n.htmlTag.IMG,alignment:n.alignTypes.CENTER,pixelAspectRatio:window.devicePixelRatio},s).uri)},getCropImageURL:function(e,t,i,r,a,s,c,d,u,p){return l(n.getData(o.fittingTypes.SCALE_TO_FILL,{id:e,width:t,height:i,name:p&&p.name,crop:{x:r,y:a,width:s,height:c}},{width:d,height:u,htmlTag:n.htmlTag.IMG,alignment:n.alignTypes.CENTER,pixelAspectRatio:window.devicePixelRatio},p).uri)}}},function(e,t,i){"use strict";var n=i(0),o=i(1),r=i(7);e.exports={populateGlobalFeatureSupport:o.populateGlobalFeatureSupport,getData:function(e,t,i,a){var s=n.emptyData.uri;return o.isValidRequest(e,t,i)&&(s=r(e,t,i,a)),{uri:s}},fittingTypes:n.fittingTypes,alignTypes:n.alignTypes,htmlTag:n.htmlTag,upscaleMethods:n.upscaleMethods}}])},function(e,t){angular.module("siteGeneratorStaticsConsumerAppInternal").directive("imageObjectFitResizer",function(){return{restrict:"A",link:function(e,t,i){function n(){return t[0]}function o(){var e=function(e){var t=e.contains,i=e.width,n=e.height,o=e.naturalWidth/e.naturalHeight,r=i/n;return t&&o>r||!t&&o<r?{renderedWidth:i,renderedHeight:i/o}:{renderedWidth:n*o,renderedHeight:n}}(function(){var e=n();return{contains:"contain"===e.style.objectFit,naturalWidth:e.naturalWidth,naturalHeight:e.naturalHeight,width:e.width,height:e.height}}());t.width(e.renderedWidth),t.height(e.renderedHeight)}e.$watch(function(){return t.attr("src")},function(e){return function(){var e=n();e.naturalHeight||e.naturalWidth?o():e.onload=o}()})}}})},function(e,t){angular.module("siteGeneratorStaticsConsumerAppInternal").directive("imageLoadHandler",["$parse",function(e){return{restrict:"A",link:function(t,i,n){t.$applyAsync(function(){var o=i[0],r={onImageLoaded:function(){return e(n.onImageLoaded)(t)},onImageReplaced:function(){return e(n.onImageReplaced)(t)}},a=new Image;a.onload=function(){t.$apply(function(){r.onImageLoaded()});o.addEventListener("load",function(){a.src!==o.src&&(t.$apply(function(){r.onImageReplaced()}),a.onload=void 0,a.src=void 0)})},a.src=o.src})}}}])}]);
//# sourceMappingURL=first-parties-js.bundle.min.js.map